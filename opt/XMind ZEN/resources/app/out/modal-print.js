module.exports=function(t){var e={};function n(r){if(e[r])return e[r].exports;var i=e[r]={i:r,l:!1,exports:{}};return t[r].call(i.exports,i,i.exports,n),i.l=!0,i.exports}return n.m=t,n.c=e,n.d=function(t,e,r){n.o(t,e)||Object.defineProperty(t,e,{configurable:!1,enumerable:!0,get:r})},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=126)}([function(t,e,n){var r;r=function(){var t=t||function(t,e){var n=Object.create||function(){function t(){}return function(e){var n;return t.prototype=e,n=new t,t.prototype=null,n}}(),r={},i=r.lib={},o=i.Base={extend:function(t){var e=n(this);return t&&e.mixIn(t),e.hasOwnProperty("init")&&this.init!==e.init||(e.init=function(){e.$super.init.apply(this,arguments)}),e.init.prototype=e,e.$super=this,e},create:function(){var t=this.extend();return t.init.apply(t,arguments),t},init:function(){},mixIn:function(t){for(var e in t)t.hasOwnProperty(e)&&(this[e]=t[e]);t.hasOwnProperty("toString")&&(this.toString=t.toString)},clone:function(){return this.init.prototype.extend(this)}},a=i.WordArray=o.extend({init:function(t,e){t=this.words=t||[],this.sigBytes=void 0!=e?e:4*t.length},toString:function(t){return(t||u).stringify(this)},concat:function(t){var e=this.words,n=t.words,r=this.sigBytes,i=t.sigBytes;if(this.clamp(),r%4)for(var o=0;o<i;o++){var a=n[o>>>2]>>>24-o%4*8&255;e[r+o>>>2]|=a<<24-(r+o)%4*8}else for(o=0;o<i;o+=4)e[r+o>>>2]=n[o>>>2];return this.sigBytes+=i,this},clamp:function(){var e=this.words,n=this.sigBytes;e[n>>>2]&=4294967295<<32-n%4*8,e.length=t.ceil(n/4)},clone:function(){var t=o.clone.call(this);return t.words=this.words.slice(0),t},random:function(e){for(var n,r=[],i=function(e){e=e;var n=987654321,r=4294967295;return function(){var i=((n=36969*(65535&n)+(n>>16)&r)<<16)+(e=18e3*(65535&e)+(e>>16)&r)&r;return i/=4294967296,(i+=.5)*(t.random()>.5?1:-1)}},o=0;o<e;o+=4){var s=i(4294967296*(n||t.random()));n=987654071*s(),r.push(4294967296*s()|0)}return new a.init(r,e)}}),s=r.enc={},u=s.Hex={stringify:function(t){for(var e=t.words,n=t.sigBytes,r=[],i=0;i<n;i++){var o=e[i>>>2]>>>24-i%4*8&255;r.push((o>>>4).toString(16)),r.push((15&o).toString(16))}return r.join("")},parse:function(t){for(var e=t.length,n=[],r=0;r<e;r+=2)n[r>>>3]|=parseInt(t.substr(r,2),16)<<24-r%8*4;return new a.init(n,e/2)}},c=s.Latin1={stringify:function(t){for(var e=t.words,n=t.sigBytes,r=[],i=0;i<n;i++){var o=e[i>>>2]>>>24-i%4*8&255;r.push(String.fromCharCode(o))}return r.join("")},parse:function(t){for(var e=t.length,n=[],r=0;r<e;r++)n[r>>>2]|=(255&t.charCodeAt(r))<<24-r%4*8;return new a.init(n,e)}},l=s.Utf8={stringify:function(t){try{return decodeURIComponent(escape(c.stringify(t)))}catch(t){throw new Error("Malformed UTF-8 data")}},parse:function(t){return c.parse(unescape(encodeURIComponent(t)))}},h=i.BufferedBlockAlgorithm=o.extend({reset:function(){this._data=new a.init,this._nDataBytes=0},_append:function(t){"string"==typeof t&&(t=l.parse(t)),this._data.concat(t),this._nDataBytes+=t.sigBytes},_process:function(e){var n=this._data,r=n.words,i=n.sigBytes,o=this.blockSize,s=i/(4*o),u=(s=e?t.ceil(s):t.max((0|s)-this._minBufferSize,0))*o,c=t.min(4*u,i);if(u){for(var l=0;l<u;l+=o)this._doProcessBlock(r,l);var h=r.splice(0,u);n.sigBytes-=c}return new a.init(h,c)},clone:function(){var t=o.clone.call(this);return t._data=this._data.clone(),t},_minBufferSize:0}),d=(i.Hasher=h.extend({cfg:o.extend(),init:function(t){this.cfg=this.cfg.extend(t),this.reset()},reset:function(){h.reset.call(this),this._doReset()},update:function(t){return this._append(t),this._process(),this},finalize:function(t){return t&&this._append(t),this._doFinalize()},blockSize:16,_createHelper:function(t){return function(e,n){return new t.init(n).finalize(e)}},_createHmacHelper:function(t){return function(e,n){return new d.HMAC.init(t,n).finalize(e)}}}),r.algo={});return r}(Math);return t},t.exports=r()},function(t,e,n){"use strict";var r=n(29),i="undefined"==typeof navigator,o={e:{}},a,s="undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:void 0!==this?this:null;function u(){try{var t=a;return a=null,t.apply(this,arguments)}catch(t){return o.e=t,o}}function c(t){return a=t,u}var l=function(t,e){var n={}.hasOwnProperty;function r(){for(var r in this.constructor=t,this.constructor$=e,e.prototype)n.call(e.prototype,r)&&"$"!==r.charAt(r.length-1)&&(this[r+"$"]=e.prototype[r])}return r.prototype=e.prototype,t.prototype=new r,t.prototype};function h(t){return null==t||!0===t||!1===t||"string"==typeof t||"number"==typeof t}function d(t){return"function"==typeof t||"object"==typeof t&&null!==t}function f(t){return h(t)?new Error(b(t)):t}function p(t,e){var n,r=t.length,i=new Array(r+1);for(n=0;n<r;++n)i[n]=t[n];return i[n]=e,i}function g(t,e,n){if(!r.isES5)return{}.hasOwnProperty.call(t,e)?t[e]:void 0;var i=Object.getOwnPropertyDescriptor(t,e);return null!=i?null==i.get&&null==i.set?i.value:n:void 0}function v(t,e,n){if(h(t))return t;var i={value:n,configurable:!0,enumerable:!1,writable:!0};return r.defineProperty(t,e,i),t}function m(t){throw t}var y=function(){var t=[Array.prototype,Object.prototype,Function.prototype],e=function(e){for(var n=0;n<t.length;++n)if(t[n]===e)return!0;return!1};if(r.isES5){var n=Object.getOwnPropertyNames;return function(t){for(var i=[],o=Object.create(null);null!=t&&!e(t);){var a;try{a=n(t)}catch(t){return i}for(var s=0;s<a.length;++s){var u=a[s];if(!o[u]){o[u]=!0;var c=Object.getOwnPropertyDescriptor(t,u);null!=c&&null==c.get&&null==c.set&&i.push(u)}}t=r.getPrototypeOf(t)}return i}}var i={}.hasOwnProperty;return function(n){if(e(n))return[];var r=[];t:for(var o in n)if(i.call(n,o))r.push(o);else{for(var a=0;a<t.length;++a)if(i.call(t[a],o))continue t;r.push(o)}return r}}(),_=/this\s*\.\s*\S+\s*=/;function E(t){try{if("function"==typeof t){var e=r.names(t.prototype),n=r.isES5&&e.length>1,i=e.length>0&&!(1===e.length&&"constructor"===e[0]),o=_.test(t+"")&&r.names(t).length>0;if(n||i||o)return!0}return!1}catch(t){return!1}}function A(t){function e(){}e.prototype=t;for(var n=8;n--;)new e;return t}var S=/^[a-z$_][a-z$_0-9]*$/i;function T(t){return S.test(t)}function x(t,e,n){for(var r=new Array(t),i=0;i<t;++i)r[i]=e+i+n;return r}function b(t){try{return t+""}catch(t){return"[no string representation]"}}function w(t){return t instanceof Error||null!==t&&"object"==typeof t&&"string"==typeof t.message&&"string"==typeof t.name}function C(t){try{v(t,"isOperational",!0)}catch(t){}}function I(t){return null!=t&&(t instanceof Error.__BluebirdErrorTypes__.OperationalError||!0===t.isOperational)}function L(t){return w(t)&&r.propertyIsWritable(t,"stack")}var N="stack"in new Error?function(t){return L(t)?t:new Error(b(t))}:function(t){if(L(t))return t;try{throw new Error(b(t))}catch(t){return t}};function O(t){return{}.toString.call(t)}function R(t,e,n){for(var i=r.names(t),o=0;o<i.length;++o){var a=i[o];if(n(a))try{r.defineProperty(e,a,r.getDescriptor(t,a))}catch(t){}}}var M=function(t){return r.isArray(t)?t:null};if("undefined"!=typeof Symbol&&Symbol.iterator){var D="function"==typeof Array.from?function(t){return Array.from(t)}:function(t){for(var e,n=[],r=t[Symbol.iterator]();!(e=r.next()).done;)n.push(e.value);return n};M=function(t){return r.isArray(t)?t:null!=t&&"function"==typeof t[Symbol.iterator]?D(t):null}}var P="undefined"!=typeof process&&"[object process]"===O(process).toLowerCase(),k="undefined"!=typeof process&&void 0!==process.env;function B(t){return k?process.env[t]:void 0}function F(){if("function"==typeof Promise)try{var t=new Promise(function(){});if("[object Promise]"==={}.toString.call(t))return Promise}catch(t){}}function V(t,e){return t.bind(e)}var U={isClass:E,isIdentifier:T,inheritedDataKeys:y,getDataPropertyOrDefault:g,thrower:m,isArray:r.isArray,asArray:M,notEnumerableProp:v,isPrimitive:h,isObject:d,isError:w,canEvaluate:i,errorObj:o,tryCatch:c,inherits:l,withAppended:p,maybeWrapAsError:f,toFastProperties:A,filledRange:x,toString:b,canAttachTrace:L,ensureErrorObject:N,originatesFromRejection:I,markAsOriginatingFromRejection:C,classString:O,copyDescriptors:R,hasDevTools:"undefined"!=typeof chrome&&chrome&&"function"==typeof chrome.loadTimes,isNode:P,hasEnvVariables:k,env:B,global:s,getNativePromise:F,domainBind:V},H;U.isRecentNode=U.isNode&&(H=process.versions.node.split(".").map(Number),0===H[0]&&H[1]>10||H[0]>0),U.isNode&&U.toFastProperties(process);try{throw new Error}catch(t){U.lastLineError=t}t.exports=U},function(t,e){t.exports=require("path")},function(t,e){var n=t.exports={version:"2.5.3"};"number"==typeof __e&&(__e=n)},function(t,e,n){var r=n(28),i=n(166),o=n(168),a=[],s=n(75);var u,c,l=function(){};function h(t){i(t),t.gracefulify=h,t.FileReadStream=p,t.FileWriteStream=g,t.createReadStream=function(t,e){return new p(t,e)},t.createWriteStream=function(t,e){return new g(t,e)};var e=t.readFile;t.readFile=function(t,n,r){"function"==typeof n&&(r=n,n=null);return function t(n,r,i){return e(n,r,function(e){!e||"EMFILE"!==e.code&&"ENFILE"!==e.code?("function"==typeof i&&i.apply(this,arguments),f()):d([t,[n,r,i]])})}(t,n,r)};var n=t.writeFile;t.writeFile=function(t,e,r,i){"function"==typeof r&&(i=r,r=null);return function t(e,r,i,o){return n(e,r,i,function(n){!n||"EMFILE"!==n.code&&"ENFILE"!==n.code?("function"==typeof o&&o.apply(this,arguments),f()):d([t,[e,r,i,o]])})}(t,e,r,i)};var r=t.appendFile;r&&(t.appendFile=function(t,e,n,i){"function"==typeof n&&(i=n,n=null);return function t(e,n,i,o){return r(e,n,i,function(r){!r||"EMFILE"!==r.code&&"ENFILE"!==r.code?("function"==typeof o&&o.apply(this,arguments),f()):d([t,[e,n,i,o]])})}(t,e,n,i)});var a=t.readdir;function s(e){return a.apply(t,e)}if(t.readdir=function(t,e,n){var r=[t];"function"!=typeof e?r.push(e):n=e;return r.push(function(t,e){e&&e.sort&&e.sort(),!t||"EMFILE"!==t.code&&"ENFILE"!==t.code?("function"==typeof n&&n.apply(this,arguments),f()):d([s,[r]])}),s(r)},"v0.8"===process.version.substr(0,4)){var u=o(t);p=u.ReadStream,g=u.WriteStream}var c=t.ReadStream;p.prototype=Object.create(c.prototype),p.prototype.open=function(){var t=this;m(t.path,t.flags,t.mode,function(e,n){e?(t.autoClose&&t.destroy(),t.emit("error",e)):(t.fd=n,t.emit("open",n),t.read())})};var l=t.WriteStream;function p(t,e){return this instanceof p?(c.apply(this,arguments),this):p.apply(Object.create(p.prototype),arguments)}function g(t,e){return this instanceof g?(l.apply(this,arguments),this):g.apply(Object.create(g.prototype),arguments)}g.prototype=Object.create(l.prototype),g.prototype.open=function(){var t=this;m(t.path,t.flags,t.mode,function(e,n){e?(t.destroy(),t.emit("error",e)):(t.fd=n,t.emit("open",n))})},t.ReadStream=p,t.WriteStream=g;var v=t.open;function m(t,e,n,r){return"function"==typeof n&&(r=n,n=null),function t(e,n,r,i){return v(e,n,r,function(o,a){!o||"EMFILE"!==o.code&&"ENFILE"!==o.code?("function"==typeof i&&i.apply(this,arguments),f()):d([t,[e,n,r,i]])})}(t,e,n,r)}return t.open=m,t}function d(t){l("ENQUEUE",t[0].name,t[1]),a.push(t)}function f(){var t=a.shift();t&&(l("RETRY",t[0].name,t[1]),t[0].apply(null,t[1]))}s.debuglog?l=s.debuglog("gfs4"):/\bgfs4\b/i.test(process.env.NODE_DEBUG||"")&&(l=function(){var t=s.format.apply(s,arguments);t="GFS4: "+t.split(/\n/).join("\nGFS4: "),console.error(t)}),/\bgfs4\b/i.test(process.env.NODE_DEBUG||"")&&process.on("exit",function(){l(a),n(102).equal(a.length,0)}),t.exports=h(n(101)),process.env.TEST_GRACEFUL_FS_GLOBAL_PATCH&&(t.exports=h(r)),t.exports.close=r.close=(u=r.close,function(t,e){return u.call(r,t,function(t){t||f(),"function"==typeof e&&e.apply(this,arguments)})}),t.exports.closeSync=r.closeSync=(c=r.closeSync,function(t){var e=c.apply(r,arguments);return f(),e})},function(t,e,n){var r;r=function(t){t.lib.Cipher||function(e){var n=t,r=n.lib,i=r.Base,o=r.WordArray,a=r.BufferedBlockAlgorithm,s=n.enc,u=(s.Utf8,s.Base64),c=n.algo.EvpKDF,l=r.Cipher=a.extend({cfg:i.extend(),createEncryptor:function(t,e){return this.create(this._ENC_XFORM_MODE,t,e)},createDecryptor:function(t,e){return this.create(this._DEC_XFORM_MODE,t,e)},init:function(t,e,n){this.cfg=this.cfg.extend(n),this._xformMode=t,this._key=e,this.reset()},reset:function(){a.reset.call(this),this._doReset()},process:function(t){return this._append(t),this._process()},finalize:function(t){return t&&this._append(t),this._doFinalize()},keySize:4,ivSize:4,_ENC_XFORM_MODE:1,_DEC_XFORM_MODE:2,_createHelper:function(){function t(t){return"string"==typeof t?_:m}return function(e){return{encrypt:function(n,r,i){return t(r).encrypt(e,n,r,i)},decrypt:function(n,r,i){return t(r).decrypt(e,n,r,i)}}}}()}),h=(r.StreamCipher=l.extend({_doFinalize:function(){return this._process(!0)},blockSize:1}),n.mode={}),d=r.BlockCipherMode=i.extend({createEncryptor:function(t,e){return this.Encryptor.create(t,e)},createDecryptor:function(t,e){return this.Decryptor.create(t,e)},init:function(t,e){this._cipher=t,this._iv=e}}),f=h.CBC=function(){var t=d.extend();function n(t,n,r){var i=this._iv;if(i){var o=i;this._iv=e}else o=this._prevBlock;for(var a=0;a<r;a++)t[n+a]^=o[a]}return t.Encryptor=t.extend({processBlock:function(t,e){var r=this._cipher,i=r.blockSize;n.call(this,t,e,i),r.encryptBlock(t,e),this._prevBlock=t.slice(e,e+i)}}),t.Decryptor=t.extend({processBlock:function(t,e){var r=this._cipher,i=r.blockSize,o=t.slice(e,e+i);r.decryptBlock(t,e),n.call(this,t,e,i),this._prevBlock=o}}),t}(),p=(n.pad={}).Pkcs7={pad:function(t,e){for(var n=4*e,r=n-t.sigBytes%n,i=r<<24|r<<16|r<<8|r,a=[],s=0;s<r;s+=4)a.push(i);var u=o.create(a,r);t.concat(u)},unpad:function(t){var e=255&t.words[t.sigBytes-1>>>2];t.sigBytes-=e}},g=(r.BlockCipher=l.extend({cfg:l.cfg.extend({mode:f,padding:p}),reset:function(){l.reset.call(this);var t=this.cfg,e=t.iv,n=t.mode;if(this._xformMode==this._ENC_XFORM_MODE)var r=n.createEncryptor;else{r=n.createDecryptor;this._minBufferSize=1}this._mode&&this._mode.__creator==r?this._mode.init(this,e&&e.words):(this._mode=r.call(n,this,e&&e.words),this._mode.__creator=r)},_doProcessBlock:function(t,e){this._mode.processBlock(t,e)},_doFinalize:function(){var t=this.cfg.padding;if(this._xformMode==this._ENC_XFORM_MODE){t.pad(this._data,this.blockSize);var e=this._process(!0)}else{e=this._process(!0);t.unpad(e)}return e},blockSize:4}),r.CipherParams=i.extend({init:function(t){this.mixIn(t)},toString:function(t){return(t||this.formatter).stringify(this)}})),v=(n.format={}).OpenSSL={stringify:function(t){var e=t.ciphertext,n=t.salt;if(n)var r=o.create([1398893684,1701076831]).concat(n).concat(e);else r=e;return r.toString(u)},parse:function(t){var e=u.parse(t),n=e.words;if(1398893684==n[0]&&1701076831==n[1]){var r=o.create(n.slice(2,4));n.splice(0,4),e.sigBytes-=16}return g.create({ciphertext:e,salt:r})}},m=r.SerializableCipher=i.extend({cfg:i.extend({format:v}),encrypt:function(t,e,n,r){r=this.cfg.extend(r);var i=t.createEncryptor(n,r),o=i.finalize(e),a=i.cfg;return g.create({ciphertext:o,key:n,iv:a.iv,algorithm:t,mode:a.mode,padding:a.padding,blockSize:t.blockSize,formatter:r.format})},decrypt:function(t,e,n,r){return r=this.cfg.extend(r),e=this._parse(e,r.format),t.createDecryptor(n,r).finalize(e.ciphertext)},_parse:function(t,e){return"string"==typeof t?e.parse(t,this):t}}),y=(n.kdf={}).OpenSSL={execute:function(t,e,n,r){r||(r=o.random(8));var i=c.create({keySize:e+n}).compute(t,r),a=o.create(i.words.slice(e),4*n);return i.sigBytes=4*e,g.create({key:i,iv:a,salt:r})}},_=r.PasswordBasedCipher=m.extend({cfg:m.cfg.extend({kdf:y}),encrypt:function(t,e,n,r){var i=(r=this.cfg.extend(r)).kdf.execute(n,t.keySize,t.ivSize);r.iv=i.iv;var o=m.encrypt.call(this,t,e,i.key,r);return o.mixIn(i),o},decrypt:function(t,e,n,r){r=this.cfg.extend(r),e=this._parse(e,r.format);var i=r.kdf.execute(n,t.keySize,t.ivSize,e.salt);return r.iv=i.iv,m.decrypt.call(this,t,e,i.key,r)}})}()},t.exports=r(n(0),n(26))},function(t,e,n){var r=n(7),i=n(3),o=n(16),a=n(17),s=function(t,e,n){var u,c,l,h=t&s.F,d=t&s.G,f=t&s.S,p=t&s.P,g=t&s.B,v=t&s.W,m=d?i:i[e]||(i[e]={}),y=m.prototype,_=d?r:f?r[e]:(r[e]||{}).prototype;for(u in d&&(n=e),n)(c=!h&&_&&void 0!==_[u])&&u in m||(l=c?_[u]:n[u],m[u]=d&&"function"!=typeof _[u]?n[u]:g&&c?o(l,r):v&&_[u]==l?function(t){var e=function(e,n,r){if(this instanceof t){switch(arguments.length){case 0:return new t;case 1:return new t(e);case 2:return new t(e,n)}return new t(e,n,r)}return t.apply(this,arguments)};return e.prototype=t.prototype,e}(l):p&&"function"==typeof l?o(Function.call,l):l,p&&((m.virtual||(m.virtual={}))[u]=l,t&s.R&&y&&!y[u]&&a(y,u,l)))};s.F=1,s.G=2,s.S=4,s.P=8,s.B=16,s.W=32,s.U=64,s.R=128,t.exports=s},function(t,e){var n=t.exports="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();"number"==typeof __g&&(__g=n)},function(t,e,n){var r=n(61)("wks"),i=n(46),o=n(7).Symbol,a="function"==typeof o;(t.exports=function(t){return r[t]||(r[t]=a&&o[t]||(a?o:i)("Symbol."+t))}).store=r},function(t,e,n){"use strict";e.fromCallback=function(t){return Object.defineProperty(function(){if("function"!=typeof arguments[arguments.length-1])return new Promise((e,n)=>{arguments[arguments.length]=((t,r)=>{if(t)return n(t);e(r)}),arguments.length++,t.apply(this,arguments)});t.apply(this,arguments)},"name",{value:t.name})},e.fromPromise=function(t){return Object.defineProperty(function(){const e=arguments[arguments.length-1];if("function"!=typeof e)return t.apply(this,arguments);t.apply(this,arguments).then(t=>e(null,t),e)},"name",{value:t.name})}},function(t,e,n){"use strict";const r=(0,n(9).fromCallback)(n(171)),i=n(172);t.exports={mkdirs:r,mkdirsSync:i,mkdirp:r,mkdirpSync:i,ensureDir:r,ensureDirSync:i}},function(t,e,n){var r=n(15),i=n(83),o=n(56),a=Object.defineProperty;e.f=n(13)?Object.defineProperty:function(t,e,n){if(r(t),e=o(e,!0),r(n),i)try{return a(t,e,n)}catch(t){}if("get"in n||"set"in n)throw TypeError("Accessors not supported!");return"value"in n&&(t[e]=n.value),t}},function(t,e){t.exports=function(t){return"object"==typeof t?null!==t:"function"==typeof t}},function(t,e,n){t.exports=!n(21)(function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a})},function(t,e){t.exports=require("electron")},function(t,e,n){var r=n(12);t.exports=function(t){if(!r(t))throw TypeError(t+" is not an object!");return t}},function(t,e,n){var r=n(36);t.exports=function(t,e,n){if(r(t),void 0===e)return t;switch(n){case 1:return function(n){return t.call(e,n)};case 2:return function(n,r){return t.call(e,n,r)};case 3:return function(n,r,i){return t.call(e,n,r,i)}}return function(){return t.apply(e,arguments)}}},function(t,e,n){var r=n(11),i=n(37);t.exports=n(13)?function(t,e,n){return r.f(t,e,i(1,n))}:function(t,e,n){return t[e]=n,t}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.activateService=e.offEM=e.onceEM=e.onEM=e.emitEM=e.removeListener=e.addListener=e.once=e.on=e.emit=e.fontService=e.tvud=e.vud=e.localize=e.localizer=e.preferences=e.keyBindings=e.lifecycle=e.eventManager=e.commandService=e.rootLogger=e.workspace=e.ipcServices=void 0;var r=h(n(48)),i=h(n(2)),o=n(14),a=h(n(135)),s=h(n(136)),u=h(n(137)),c=h(n(221)),l=h(n(253));function h(t){return t&&t.__esModule?t:{default:t}}var d=o.remote.app.commandService,f=o.remote.app.keyBindings,p=o.remote.app.vud,g=o.remote.app.eventManager,v=o.remote.app.tvud,m=o.remote.app.lifecycle,y=o.remote.app.workspace,_=o.remote.app.preferences,E=o.remote.app.fontService,A=new c.default({vud:p,superagent:a.default,app:o.remote.app,tvud:v,logger:s.default.logger("activate")}),S=new u.default(i.default.resolve(y.appRoot,"locales")),T=S.localize;C("change:vud",function(t){"preferences"===t.moduleName&&"general.locale"===t.key&&S.updateLocale({locales:[p.getModule("preferences").get("general.locale")]})});var x={listenerWrappers:[]};function b(t,e,n){var r=function(r){for(var i=arguments.length,o=Array(i>1?i-1:0),a=1;a<i;a++)o[a-1]=arguments[a];return n&&w(t,e),e.apply(void 0,o)};r._eventName=t,r._listener=e,x.listenerWrappers.push(r),o.ipcRenderer.addListener(t,r)}function w(t,e){x.listenerWrappers=x.listenerWrappers.filter(function(n){return n._eventName!==t||n._listener!==e||(o.ipcRenderer.removeListener(t,n),!1)})}function C(t,e){var n=o.remote.getCurrentWindow().id;n&&g.on(n,t,e)}e.ipcServices=l.default,e.workspace=y,e.rootLogger=s.default,e.commandService=d,e.eventManager=g,e.lifecycle=m,e.keyBindings=f,e.preferences=_,e.localizer=S,e.localize=T,e.vud=p,e.tvud=v,e.fontService=E,e.emit=function(t){for(var e,n=arguments.length,r=Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];(e=o.remote.app).emit.apply(e,[t].concat(r))},e.on=function(t,e){b(t,e,!1)},e.once=function(t,e){b(t,e,!0)},e.addListener=function(t,e){b(t,e,!1)},e.removeListener=w,e.emitEM=function(t,e){e instanceof Object&&(e=(0,r.default)(e)),g.emit(t,e)},e.onEM=C,e.onceEM=function(t,e){var n=o.remote.getCurrentWindow().id;n&&g.once(n,t,e)},e.offEM=function(t,e){var n=o.remote.getCurrentWindow().id;n&&g.off(n,t,e)},e.activateService=A},function(t,e,n){"use strict";const r=n(9).fromPromise,i=n(100);t.exports={pathExists:r(function(t){return i.access(t).then(()=>!0).catch(()=>!1)}),pathExistsSync:i.existsSync}},function(t,e,n){"use strict";var r,i,o=n(29),a=o.freeze,s=n(1),u=s.inherits,c=s.notEnumerableProp;function l(t,e){function n(r){if(!(this instanceof n))return new n(r);c(this,"message","string"==typeof r?r:e),c(this,"name",t),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):Error.call(this)}return u(n,Error),n}var h=l("Warning","warning"),d=l("CancellationError","cancellation error"),f=l("TimeoutError","timeout error"),p=l("AggregateError","aggregate error");try{r=TypeError,i=RangeError}catch(t){r=l("TypeError","type error"),i=l("RangeError","range error")}for(var g="join pop push shift unshift slice filter forEach some every map indexOf lastIndexOf reduce reduceRight sort reverse".split(" "),v=0;v<g.length;++v)"function"==typeof Array.prototype[g[v]]&&(p.prototype[g[v]]=Array.prototype[g[v]]);o.defineProperty(p.prototype,"length",{value:0,configurable:!1,writable:!0,enumerable:!0}),p.prototype.isOperational=!0;var m=0;function y(t){if(!(this instanceof y))return new y(t);c(this,"name","OperationalError"),c(this,"message",t),this.cause=t,this.isOperational=!0,t instanceof Error?(c(this,"message",t.message),c(this,"stack",t.stack)):Error.captureStackTrace&&Error.captureStackTrace(this,this.constructor)}p.prototype.toString=function(){var t=Array(4*m+1).join(" "),e="\n"+t+"AggregateError of:\n";m++,t=Array(4*m+1).join(" ");for(var n=0;n<this.length;++n){for(var r=this[n]===this?"[Circular AggregateError]":this[n]+"",i=r.split("\n"),o=0;o<i.length;++o)i[o]=t+i[o];e+=(r=i.join("\n"))+"\n"}return m--,e},u(y,Error);var _=Error.__BluebirdErrorTypes__;_||(_=a({CancellationError:d,TimeoutError:f,OperationalError:y,RejectionError:y,AggregateError:p}),o.defineProperty(Error,"__BluebirdErrorTypes__",{value:_,writable:!1,enumerable:!1,configurable:!1})),t.exports={Error:Error,TypeError:r,RangeError:i,CancellationError:_.CancellationError,OperationalError:_.OperationalError,TimeoutError:_.TimeoutError,AggregateError:_.AggregateError,Warning:h}},function(t,e){t.exports=function(t){try{return!!t()}catch(t){return!0}}},function(t,e){var n={}.hasOwnProperty;t.exports=function(t,e){return n.call(t,e)}},function(t,e,n){var r=n(57),i=n(58);t.exports=function(t){return r(i(t))}},function(t,e,n){"use strict";e.__esModule=!0;var r=a(n(141)),i=a(n(149)),o="function"==typeof i.default&&"symbol"==typeof r.default?function(t){return typeof t}:function(t){return t&&"function"==typeof i.default&&t.constructor===i.default&&t!==i.default.prototype?"symbol":typeof t};function a(t){return t&&t.__esModule?t:{default:t}}e.default="function"==typeof i.default&&"symbol"===o(r.default)?function(t){return void 0===t?"undefined":o(t)}:function(t){return t&&"function"==typeof i.default&&t.constructor===i.default&&t!==i.default.prototype?"symbol":void 0===t?"undefined":o(t)}},function(t,e,n){t.exports={default:n(157),__esModule:!0}},function(t,e,n){var r;r=function(t){var e,n,r,i,o,a,s;return n=(e=t).lib,r=n.Base,i=n.WordArray,o=e.algo,a=o.MD5,s=o.EvpKDF=r.extend({cfg:r.extend({keySize:4,hasher:a,iterations:1}),init:function(t){this.cfg=this.cfg.extend(t)},compute:function(t,e){for(var n=this.cfg,r=n.hasher.create(),o=i.create(),a=o.words,s=n.keySize,u=n.iterations;a.length<s;){c&&r.update(c);var c=r.update(t).finalize(e);r.reset();for(var l=1;l<u;l++)c=r.finalize(c),r.reset();o.concat(c)}return o.sigBytes=4*s,o}}),e.EvpKDF=function(t,e,n){return s.create(n).compute(t,e)},t.EvpKDF},t.exports=r(n(0),n(78),n(79))},function(t,e,n){var r=n(84),i=n(62);t.exports=Object.keys||function(t){return r(t,i)}},function(t,e){t.exports=require("fs")},function(t,e){var n=function(){"use strict";return void 0===this}();if(n)t.exports={freeze:Object.freeze,defineProperty:Object.defineProperty,getDescriptor:Object.getOwnPropertyDescriptor,keys:Object.keys,names:Object.getOwnPropertyNames,getPrototypeOf:Object.getPrototypeOf,isArray:Array.isArray,isES5:n,propertyIsWritable:function(t,e){var n=Object.getOwnPropertyDescriptor(t,e);return!(n&&!n.writable&&!n.set)}};else{var r={}.hasOwnProperty,i={}.toString,o={}.constructor.prototype,a=function(t){var e=[];for(var n in t)r.call(t,n)&&e.push(n);return e};t.exports={isArray:function(t){try{return"[object Array]"===i.call(t)}catch(t){return!1}},keys:a,names:a,defineProperty:function(t,e,n){return t[e]=n.value,t},getDescriptor:function(t,e){return{value:t[e]}},freeze:function(t){return t},getPrototypeOf:function(t){try{return Object(t).constructor.prototype}catch(t){return o}},isES5:n,propertyIsWritable:function(){return!0}}}},function(t,e,n){var r;r=function(t){return function(){var e=t,n=e.lib.WordArray;e.enc.Base64={stringify:function(t){var e=t.words,n=t.sigBytes,r=this._map;t.clamp();for(var i=[],o=0;o<n;o+=3)for(var a=(e[o>>>2]>>>24-o%4*8&255)<<16|(e[o+1>>>2]>>>24-(o+1)%4*8&255)<<8|e[o+2>>>2]>>>24-(o+2)%4*8&255,s=0;s<4&&o+.75*s<n;s++)i.push(r.charAt(a>>>6*(3-s)&63));var u=r.charAt(64);if(u)for(;i.length%4;)i.push(u);return i.join("")},parse:function(t){var e=t.length,r=this._map,i=this._reverseMap;if(!i){i=this._reverseMap=[];for(var o=0;o<r.length;o++)i[r.charCodeAt(o)]=o}var a=r.charAt(64);if(a){var s=t.indexOf(a);-1!==s&&(e=s)}return function(t,e,r){for(var i=[],o=0,a=0;a<e;a++)if(a%4){var s=r[t.charCodeAt(a-1)]<<a%4*2,u=r[t.charCodeAt(a)]>>>6-a%4*2;i[o>>>2]|=(s|u)<<24-o%4*8,o++}return n.create(i,o)}(t,e,i)},_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/="}}(),t.enc.Base64},t.exports=r(n(0))},function(t,e,n){var r;r=function(t){return function(e){var n=t,r=n.lib,i=r.WordArray,o=r.Hasher,a=n.algo,s=[];!function(){for(var t=0;t<64;t++)s[t]=4294967296*e.abs(e.sin(t+1))|0}();var u=a.MD5=o.extend({_doReset:function(){this._hash=new i.init([1732584193,4023233417,2562383102,271733878])},_doProcessBlock:function(t,e){for(var n=0;n<16;n++){var r=e+n,i=t[r];t[r]=16711935&(i<<8|i>>>24)|4278255360&(i<<24|i>>>8)}var o=this._hash.words,a=t[e+0],u=t[e+1],f=t[e+2],p=t[e+3],g=t[e+4],v=t[e+5],m=t[e+6],y=t[e+7],_=t[e+8],E=t[e+9],A=t[e+10],S=t[e+11],T=t[e+12],x=t[e+13],b=t[e+14],w=t[e+15],C=o[0],I=o[1],L=o[2],N=o[3];I=d(I=d(I=d(I=d(I=h(I=h(I=h(I=h(I=l(I=l(I=l(I=l(I=c(I=c(I=c(I=c(I,L=c(L,N=c(N,C=c(C,I,L,N,a,7,s[0]),I,L,u,12,s[1]),C,I,f,17,s[2]),N,C,p,22,s[3]),L=c(L,N=c(N,C=c(C,I,L,N,g,7,s[4]),I,L,v,12,s[5]),C,I,m,17,s[6]),N,C,y,22,s[7]),L=c(L,N=c(N,C=c(C,I,L,N,_,7,s[8]),I,L,E,12,s[9]),C,I,A,17,s[10]),N,C,S,22,s[11]),L=c(L,N=c(N,C=c(C,I,L,N,T,7,s[12]),I,L,x,12,s[13]),C,I,b,17,s[14]),N,C,w,22,s[15]),L=l(L,N=l(N,C=l(C,I,L,N,u,5,s[16]),I,L,m,9,s[17]),C,I,S,14,s[18]),N,C,a,20,s[19]),L=l(L,N=l(N,C=l(C,I,L,N,v,5,s[20]),I,L,A,9,s[21]),C,I,w,14,s[22]),N,C,g,20,s[23]),L=l(L,N=l(N,C=l(C,I,L,N,E,5,s[24]),I,L,b,9,s[25]),C,I,p,14,s[26]),N,C,_,20,s[27]),L=l(L,N=l(N,C=l(C,I,L,N,x,5,s[28]),I,L,f,9,s[29]),C,I,y,14,s[30]),N,C,T,20,s[31]),L=h(L,N=h(N,C=h(C,I,L,N,v,4,s[32]),I,L,_,11,s[33]),C,I,S,16,s[34]),N,C,b,23,s[35]),L=h(L,N=h(N,C=h(C,I,L,N,u,4,s[36]),I,L,g,11,s[37]),C,I,y,16,s[38]),N,C,A,23,s[39]),L=h(L,N=h(N,C=h(C,I,L,N,x,4,s[40]),I,L,a,11,s[41]),C,I,p,16,s[42]),N,C,m,23,s[43]),L=h(L,N=h(N,C=h(C,I,L,N,E,4,s[44]),I,L,T,11,s[45]),C,I,w,16,s[46]),N,C,f,23,s[47]),L=d(L,N=d(N,C=d(C,I,L,N,a,6,s[48]),I,L,y,10,s[49]),C,I,b,15,s[50]),N,C,v,21,s[51]),L=d(L,N=d(N,C=d(C,I,L,N,T,6,s[52]),I,L,p,10,s[53]),C,I,A,15,s[54]),N,C,u,21,s[55]),L=d(L,N=d(N,C=d(C,I,L,N,_,6,s[56]),I,L,w,10,s[57]),C,I,m,15,s[58]),N,C,x,21,s[59]),L=d(L,N=d(N,C=d(C,I,L,N,g,6,s[60]),I,L,S,10,s[61]),C,I,f,15,s[62]),N,C,E,21,s[63]),o[0]=o[0]+C|0,o[1]=o[1]+I|0,o[2]=o[2]+L|0,o[3]=o[3]+N|0},_doFinalize:function(){var t=this._data,n=t.words,r=8*this._nDataBytes,i=8*t.sigBytes;n[i>>>5]|=128<<24-i%32;var o=e.floor(r/4294967296),a=r;n[15+(i+64>>>9<<4)]=16711935&(o<<8|o>>>24)|4278255360&(o<<24|o>>>8),n[14+(i+64>>>9<<4)]=16711935&(a<<8|a>>>24)|4278255360&(a<<24|a>>>8),t.sigBytes=4*(n.length+1),this._process();for(var s=this._hash,u=s.words,c=0;c<4;c++){var l=u[c];u[c]=16711935&(l<<8|l>>>24)|4278255360&(l<<24|l>>>8)}return s},clone:function(){var t=o.clone.call(this);return t._hash=this._hash.clone(),t}});function c(t,e,n,r,i,o,a){var s=t+(e&n|~e&r)+i+a;return(s<<o|s>>>32-o)+e}function l(t,e,n,r,i,o,a){var s=t+(e&r|n&~r)+i+a;return(s<<o|s>>>32-o)+e}function h(t,e,n,r,i,o,a){var s=t+(e^n^r)+i+a;return(s<<o|s>>>32-o)+e}function d(t,e,n,r,i,o,a){var s=t+(n^(e|~r))+i+a;return(s<<o|s>>>32-o)+e}n.MD5=o._createHelper(u),n.HmacMD5=o._createHmacHelper(u)}(Math),t.MD5},t.exports=r(n(0))},function(t,e){t.exports=function(t){return t.webpackPolyfill||(t.deprecate=function(){},t.paths=[],t.children||(t.children=[]),Object.defineProperty(t,"loaded",{enumerable:!0,get:function(){return t.l}}),Object.defineProperty(t,"id",{enumerable:!0,get:function(){return t.i}}),t.webpackPolyfill=1),t}},function(t,e,n){t.exports={default:n(258),__esModule:!0}},function(t,e,n){"use strict";var r=n(283),i=n(284),o=n(116).decodeHTML,a="&(?:#x[a-f0-9]{1,8}|#[0-9]{1,8}|[a-z][a-z0-9]{1,31});",s="<[A-Za-z][A-Za-z0-9-]*(?:\\s+[a-zA-Z_:][a-zA-Z0-9:._-]*(?:\\s*=\\s*(?:[^\"'=<>`\\x00-\\x20]+|'[^']*'|\"[^\"]*\"))?)*\\s*/?>",u="</[A-Za-z][A-Za-z0-9-]*\\s*[>]",c=new RegExp("^(?:<[A-Za-z][A-Za-z0-9-]*(?:\\s+[a-zA-Z_:][a-zA-Z0-9:._-]*(?:\\s*=\\s*(?:[^\"'=<>`\\x00-\\x20]+|'[^']*'|\"[^\"]*\"))?)*\\s*/?>|</[A-Za-z][A-Za-z0-9-]*\\s*[>]|\x3c!----\x3e|\x3c!--(?:-?[^>-])(?:-?[^-])*--\x3e|[<][?].*?[?][>]|<![A-Z]+\\s+[^>]*>|<!\\[CDATA\\[[\\s\\S]*?\\]\\]>)","i"),l=/[\\&]/,h="[!\"#$%&'()*+,./:;<=>?@[\\\\\\]^_`{|}~-]",d=new RegExp("\\\\"+h+"|"+a,"gi"),f=new RegExp('[&<>"]',"g"),p=new RegExp(a+'|[&<>"]',"gi"),g=function(t){return 92===t.charCodeAt(0)?t.charAt(1):o(t)},v=function(t){switch(t){case"&":return"&amp;";case"<":return"&lt;";case">":return"&gt;";case'"':return"&quot;";default:return t}};t.exports={unescapeString:function(t){return l.test(t)?t.replace(d,g):t},normalizeURI:function(t){try{return r(i(t))}catch(e){return t}},escapeXml:function(t,e){return f.test(t)?e?t.replace(p,v):t.replace(f,v):t},reHtmlTag:c,OPENTAG:s,CLOSETAG:u,ENTITY:a,ESCAPABLE:h}},function(t,e,n){t.exports={default:n(128),__esModule:!0}},function(t,e){t.exports=function(t){if("function"!=typeof t)throw TypeError(t+" is not a function!");return t}},function(t,e){t.exports=function(t,e){return{enumerable:!(1&t),configurable:!(2&t),writable:!(4&t),value:e}}},function(t,e){var n={}.toString;t.exports=function(t){return n.call(t).slice(8,-1)}},function(t,e){e.f={}.propertyIsEnumerable},function(t,e,n){var r=n(58);t.exports=function(t){return Object(r(t))}},function(t,e,n){"use strict";var r=n(143)(!0);n(64)(String,"String",function(t){this._t=String(t),this._i=0},function(){var t,e=this._t,n=this._i;return n>=e.length?{value:void 0,done:!0}:(t=r(e,n),this._i+=t.length,{value:t,done:!1})})},function(t,e){t.exports={}},function(t,e,n){var r=n(11).f,i=n(22),o=n(8)("toStringTag");t.exports=function(t,e,n){t&&!i(t=n?t:t.prototype,o)&&r(t,o,{configurable:!0,value:e})}},function(t,e,n){var r=n(16),i=n(91),o=n(92),a=n(15),s=n(45),u=n(72),c={},l={};(e=t.exports=function(t,e,n,h,d){var f,p,g,v,m=d?function(){return t}:u(t),y=r(n,h,e?2:1),_=0;if("function"!=typeof m)throw TypeError(t+" is not iterable!");if(o(m)){for(f=s(t.length);f>_;_++)if((v=e?y(a(p=t[_])[0],p[1]):y(t[_]))===c||v===l)return v}else for(g=m.call(t);!(p=g.next()).done;)if((v=i(g,y,p.value,e))===c||v===l)return v}).BREAK=c,e.RETURN=l},function(t,e,n){var r=n(59),i=Math.min;t.exports=function(t){return t>0?i(r(t),9007199254740991):0}},function(t,e){var n=0,r=Math.random();t.exports=function(t){return"Symbol(".concat(void 0===t?"":t,")_",(++n+r).toString(36))}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=Object.freeze({});function i(t){return void 0===t||null===t}function o(t){return void 0!==t&&null!==t}function a(t){return!0===t}function s(t){return"string"==typeof t||"number"==typeof t||"symbol"==typeof t||"boolean"==typeof t}function u(t){return null!==t&&"object"==typeof t}var c=Object.prototype.toString;function l(t){return"[object Object]"===c.call(t)}function h(t){return"[object RegExp]"===c.call(t)}function d(t){var e=parseFloat(String(t));return e>=0&&Math.floor(e)===e&&isFinite(t)}function f(t){return null==t?"":"object"==typeof t?JSON.stringify(t,null,2):String(t)}function p(t){var e=parseFloat(t);return isNaN(e)?t:e}function g(t,e){for(var n=Object.create(null),r=t.split(","),i=0;i<r.length;i++)n[r[i]]=!0;return e?function(t){return n[t.toLowerCase()]}:function(t){return n[t]}}g("slot,component",!0);var v=g("key,ref,slot,slot-scope,is");function m(t,e){if(t.length){var n=t.indexOf(e);if(n>-1)return t.splice(n,1)}}var y=Object.prototype.hasOwnProperty;function _(t,e){return y.call(t,e)}function E(t){var e=Object.create(null);return function(n){return e[n]||(e[n]=t(n))}}var A=/-(\w)/g,S=E(function(t){return t.replace(A,function(t,e){return e?e.toUpperCase():""})}),T=E(function(t){return t.charAt(0).toUpperCase()+t.slice(1)}),x=/\B([A-Z])/g,b=E(function(t){return t.replace(x,"-$1").toLowerCase()});function w(t,e){function n(n){var r=arguments.length;return r?r>1?t.apply(e,arguments):t.call(e,n):t.call(e)}return n._length=t.length,n}function C(t,e){e=e||0;for(var n=t.length-e,r=new Array(n);n--;)r[n]=t[n+e];return r}function I(t,e){for(var n in e)t[n]=e[n];return t}function L(t){for(var e={},n=0;n<t.length;n++)t[n]&&I(e,t[n]);return e}function N(t,e,n){}var O=function(t,e,n){return!1},R=function(t){return t};function M(t,e){if(t===e)return!0;var n=u(t),r=u(e);if(!n||!r)return!n&&!r&&String(t)===String(e);try{var i=Array.isArray(t),o=Array.isArray(e);if(i&&o)return t.length===e.length&&t.every(function(t,n){return M(t,e[n])});if(i||o)return!1;var a=Object.keys(t),s=Object.keys(e);return a.length===s.length&&a.every(function(n){return M(t[n],e[n])})}catch(t){return!1}}function D(t,e){for(var n=0;n<t.length;n++)if(M(t[n],e))return n;return-1}function P(t){var e=!1;return function(){e||(e=!0,t.apply(this,arguments))}}var k="data-server-rendered",B=["component","directive","filter"],F=["beforeCreate","created","beforeMount","mounted","beforeUpdate","updated","beforeDestroy","destroyed","activated","deactivated","errorCaptured"],V={optionMergeStrategies:Object.create(null),silent:!1,productionTip:!1,devtools:!1,performance:!1,errorHandler:null,warnHandler:null,ignoredElements:[],keyCodes:Object.create(null),isReservedTag:O,isReservedAttr:O,isUnknownElement:O,getTagNamespace:N,parsePlatformTagName:R,mustUseProp:O,_lifecycleHooks:F};function U(t){var e=(t+"").charCodeAt(0);return 36===e||95===e}function H(t,e,n,r){Object.defineProperty(t,e,{value:n,enumerable:!!r,writable:!0,configurable:!0})}var Y=/[^\w.$]/;var G,j="__proto__"in{},z="undefined"!=typeof window,W="undefined"!=typeof WXEnvironment&&!!WXEnvironment.platform,K=W&&WXEnvironment.platform.toLowerCase(),Q=z&&window.navigator.userAgent.toLowerCase(),q=Q&&/msie|trident/.test(Q),X=Q&&Q.indexOf("msie 9.0")>0,$=Q&&Q.indexOf("edge/")>0,J=Q&&Q.indexOf("android")>0||"android"===K,Z=Q&&/iphone|ipad|ipod|ios/.test(Q)||"ios"===K,tt=(Q&&/chrome\/\d+/.test(Q),{}.watch),et=!1;if(z)try{var nt={};Object.defineProperty(nt,"passive",{get:function(){et=!0}}),window.addEventListener("test-passive",null,nt)}catch(t){}var rt=function(){return void 0===G&&(G=!z&&"undefined"!=typeof global&&"server"===global.process.env.VUE_ENV),G},it=z&&window.__VUE_DEVTOOLS_GLOBAL_HOOK__;function ot(t){return"function"==typeof t&&/native code/.test(t.toString())}var at,st="undefined"!=typeof Symbol&&ot(Symbol)&&"undefined"!=typeof Reflect&&ot(Reflect.ownKeys);at="undefined"!=typeof Set&&ot(Set)?Set:function(){function t(){this.set=Object.create(null)}return t.prototype.has=function(t){return!0===this.set[t]},t.prototype.add=function(t){this.set[t]=!0},t.prototype.clear=function(){this.set=Object.create(null)},t}();var ut=N,ct=0,lt=function(){this.id=ct++,this.subs=[]};lt.prototype.addSub=function(t){this.subs.push(t)},lt.prototype.removeSub=function(t){m(this.subs,t)},lt.prototype.depend=function(){lt.target&&lt.target.addDep(this)},lt.prototype.notify=function(){for(var t=this.subs.slice(),e=0,n=t.length;e<n;e++)t[e].update()},lt.target=null;var ht=[];var dt=function(t,e,n,r,i,o,a,s){this.tag=t,this.data=e,this.children=n,this.text=r,this.elm=i,this.ns=void 0,this.context=o,this.fnContext=void 0,this.fnOptions=void 0,this.fnScopeId=void 0,this.key=e&&e.key,this.componentOptions=a,this.componentInstance=void 0,this.parent=void 0,this.raw=!1,this.isStatic=!1,this.isRootInsert=!0,this.isComment=!1,this.isCloned=!1,this.isOnce=!1,this.asyncFactory=s,this.asyncMeta=void 0,this.isAsyncPlaceholder=!1},ft={child:{configurable:!0}};ft.child.get=function(){return this.componentInstance},Object.defineProperties(dt.prototype,ft);var pt=function(t){void 0===t&&(t="");var e=new dt;return e.text=t,e.isComment=!0,e};function gt(t){return new dt(void 0,void 0,void 0,String(t))}function vt(t,e){var n=t.componentOptions,r=new dt(t.tag,t.data,t.children,t.text,t.elm,t.context,n,t.asyncFactory);return r.ns=t.ns,r.isStatic=t.isStatic,r.key=t.key,r.isComment=t.isComment,r.fnContext=t.fnContext,r.fnOptions=t.fnOptions,r.fnScopeId=t.fnScopeId,r.isCloned=!0,e&&(t.children&&(r.children=mt(t.children,!0)),n&&n.children&&(n.children=mt(n.children,!0))),r}function mt(t,e){for(var n=t.length,r=new Array(n),i=0;i<n;i++)r[i]=vt(t[i],e);return r}var yt=Array.prototype,_t=Object.create(yt);["push","pop","shift","unshift","splice","sort","reverse"].forEach(function(t){var e=yt[t];H(_t,t,function(){for(var n=[],r=arguments.length;r--;)n[r]=arguments[r];var i,o=e.apply(this,n),a=this.__ob__;switch(t){case"push":case"unshift":i=n;break;case"splice":i=n.slice(2)}return i&&a.observeArray(i),a.dep.notify(),o})});var Et=Object.getOwnPropertyNames(_t),At={shouldConvert:!0},St=function(t){(this.value=t,this.dep=new lt,this.vmCount=0,H(t,"__ob__",this),Array.isArray(t))?((j?Tt:xt)(t,_t,Et),this.observeArray(t)):this.walk(t)};function Tt(t,e,n){t.__proto__=e}function xt(t,e,n){for(var r=0,i=n.length;r<i;r++){var o=n[r];H(t,o,e[o])}}function bt(t,e){var n;if(u(t)&&!(t instanceof dt))return _(t,"__ob__")&&t.__ob__ instanceof St?n=t.__ob__:At.shouldConvert&&!rt()&&(Array.isArray(t)||l(t))&&Object.isExtensible(t)&&!t._isVue&&(n=new St(t)),e&&n&&n.vmCount++,n}function wt(t,e,n,r,i){var o=new lt,a=Object.getOwnPropertyDescriptor(t,e);if(!a||!1!==a.configurable){var s=a&&a.get,u=a&&a.set,c=!i&&bt(n);Object.defineProperty(t,e,{enumerable:!0,configurable:!0,get:function(){var e=s?s.call(t):n;return lt.target&&(o.depend(),c&&(c.dep.depend(),Array.isArray(e)&&function t(e){for(var n=void 0,r=0,i=e.length;r<i;r++)(n=e[r])&&n.__ob__&&n.__ob__.dep.depend(),Array.isArray(n)&&t(n)}(e))),e},set:function(e){var r=s?s.call(t):n;e===r||e!=e&&r!=r||(u?u.call(t,e):n=e,c=!i&&bt(e),o.notify())}})}}function Ct(t,e,n){if(Array.isArray(t)&&d(e))return t.length=Math.max(t.length,e),t.splice(e,1,n),n;if(e in t&&!(e in Object.prototype))return t[e]=n,n;var r=t.__ob__;return t._isVue||r&&r.vmCount?n:r?(wt(r.value,e,n),r.dep.notify(),n):(t[e]=n,n)}function It(t,e){if(Array.isArray(t)&&d(e))t.splice(e,1);else{var n=t.__ob__;t._isVue||n&&n.vmCount||_(t,e)&&(delete t[e],n&&n.dep.notify())}}St.prototype.walk=function(t){for(var e=Object.keys(t),n=0;n<e.length;n++)wt(t,e[n],t[e[n]])},St.prototype.observeArray=function(t){for(var e=0,n=t.length;e<n;e++)bt(t[e])};var Lt=V.optionMergeStrategies;function Nt(t,e){if(!e)return t;for(var n,r,i,o=Object.keys(e),a=0;a<o.length;a++)r=t[n=o[a]],i=e[n],_(t,n)?l(r)&&l(i)&&Nt(r,i):Ct(t,n,i);return t}function Ot(t,e,n){return n?function(){var r="function"==typeof e?e.call(n,n):e,i="function"==typeof t?t.call(n,n):t;return r?Nt(r,i):i}:e?t?function(){return Nt("function"==typeof e?e.call(this,this):e,"function"==typeof t?t.call(this,this):t)}:e:t}function Rt(t,e){return e?t?t.concat(e):Array.isArray(e)?e:[e]:t}function Mt(t,e,n,r){var i=Object.create(t||null);return e?I(i,e):i}Lt.data=function(t,e,n){return n?Ot(t,e,n):e&&"function"!=typeof e?t:Ot(t,e)},F.forEach(function(t){Lt[t]=Rt}),B.forEach(function(t){Lt[t+"s"]=Mt}),Lt.watch=function(t,e,n,r){if(t===tt&&(t=void 0),e===tt&&(e=void 0),!e)return Object.create(t||null);if(!t)return e;var i={};for(var o in I(i,t),e){var a=i[o],s=e[o];a&&!Array.isArray(a)&&(a=[a]),i[o]=a?a.concat(s):Array.isArray(s)?s:[s]}return i},Lt.props=Lt.methods=Lt.inject=Lt.computed=function(t,e,n,r){if(!t)return e;var i=Object.create(null);return I(i,t),e&&I(i,e),i},Lt.provide=Ot;var Dt=function(t,e){return void 0===e?t:e};function Pt(t,e,n){"function"==typeof e&&(e=e.options),function(t,e){var n=t.props;if(n){var r,i,o={};if(Array.isArray(n))for(r=n.length;r--;)"string"==typeof(i=n[r])&&(o[S(i)]={type:null});else if(l(n))for(var a in n)i=n[a],o[S(a)]=l(i)?i:{type:i};t.props=o}}(e),function(t,e){var n=t.inject;if(n){var r=t.inject={};if(Array.isArray(n))for(var i=0;i<n.length;i++)r[n[i]]={from:n[i]};else if(l(n))for(var o in n){var a=n[o];r[o]=l(a)?I({from:o},a):{from:a}}}}(e),function(t){var e=t.directives;if(e)for(var n in e){var r=e[n];"function"==typeof r&&(e[n]={bind:r,update:r})}}(e);var r=e.extends;if(r&&(t=Pt(t,r,n)),e.mixins)for(var i=0,o=e.mixins.length;i<o;i++)t=Pt(t,e.mixins[i],n);var a,s={};for(a in t)u(a);for(a in e)_(t,a)||u(a);function u(r){var i=Lt[r]||Dt;s[r]=i(t[r],e[r],n,r)}return s}function kt(t,e,n,r){if("string"==typeof n){var i=t[e];if(_(i,n))return i[n];var o=S(n);if(_(i,o))return i[o];var a=T(o);return _(i,a)?i[a]:i[n]||i[o]||i[a]}}function Bt(t,e,n,r){var i=e[t],o=!_(n,t),a=n[t];if(Vt(Boolean,i.type)&&(o&&!_(i,"default")?a=!1:Vt(String,i.type)||""!==a&&a!==b(t)||(a=!0)),void 0===a){a=function(t,e,n){if(!_(e,"default"))return;var r=e.default;0;if(t&&t.$options.propsData&&void 0===t.$options.propsData[n]&&void 0!==t._props[n])return t._props[n];return"function"==typeof r&&"Function"!==Ft(e.type)?r.call(t):r}(r,i,t);var s=At.shouldConvert;At.shouldConvert=!0,bt(a),At.shouldConvert=s}return a}function Ft(t){var e=t&&t.toString().match(/^\s*function (\w+)/);return e?e[1]:""}function Vt(t,e){if(!Array.isArray(e))return Ft(e)===Ft(t);for(var n=0,r=e.length;n<r;n++)if(Ft(e[n])===Ft(t))return!0;return!1}function Ut(t,e,n){if(e)for(var r=e;r=r.$parent;){var i=r.$options.errorCaptured;if(i)for(var o=0;o<i.length;o++)try{if(!1===i[o].call(r,t,e,n))return}catch(t){Ht(t,r,"errorCaptured hook")}}Ht(t,e,n)}function Ht(t,e,n){if(V.errorHandler)try{return V.errorHandler.call(null,t,e,n)}catch(t){Yt(t,null,"config.errorHandler")}Yt(t,e,n)}function Yt(t,e,n){if(!z&&!W||"undefined"==typeof console)throw t;console.error(t)}var Gt,jt,zt=[],Wt=!1;function Kt(){Wt=!1;var t=zt.slice(0);zt.length=0;for(var e=0;e<t.length;e++)t[e]()}var Qt=!1;if("undefined"!=typeof setImmediate&&ot(setImmediate))jt=function(){setImmediate(Kt)};else if("undefined"==typeof MessageChannel||!ot(MessageChannel)&&"[object MessageChannelConstructor]"!==MessageChannel.toString())jt=function(){setTimeout(Kt,0)};else{var qt=new MessageChannel,Xt=qt.port2;qt.port1.onmessage=Kt,jt=function(){Xt.postMessage(1)}}if("undefined"!=typeof Promise&&ot(Promise)){var $t=Promise.resolve();Gt=function(){$t.then(Kt),Z&&setTimeout(N)}}else Gt=jt;function Jt(t,e){var n;if(zt.push(function(){if(t)try{t.call(e)}catch(t){Ut(t,e,"nextTick")}else n&&n(e)}),Wt||(Wt=!0,Qt?jt():Gt()),!t&&"undefined"!=typeof Promise)return new Promise(function(t){n=t})}var Zt=new at;function te(t){!function t(e,n){var r,i;var o=Array.isArray(e);if(!o&&!u(e)||Object.isFrozen(e))return;if(e.__ob__){var a=e.__ob__.dep.id;if(n.has(a))return;n.add(a)}if(o)for(r=e.length;r--;)t(e[r],n);else for(i=Object.keys(e),r=i.length;r--;)t(e[i[r]],n)}(t,Zt),Zt.clear()}var ee,ne=E(function(t){var e="&"===t.charAt(0),n="~"===(t=e?t.slice(1):t).charAt(0),r="!"===(t=n?t.slice(1):t).charAt(0);return{name:t=r?t.slice(1):t,once:n,capture:r,passive:e}});function re(t){function e(){var t=arguments,n=e.fns;if(!Array.isArray(n))return n.apply(null,arguments);for(var r=n.slice(),i=0;i<r.length;i++)r[i].apply(null,t)}return e.fns=t,e}function ie(t,e,n,r,o){var a,s,u,c;for(a in t)s=t[a],u=e[a],c=ne(a),i(s)||(i(u)?(i(s.fns)&&(s=t[a]=re(s)),n(c.name,s,c.once,c.capture,c.passive,c.params)):s!==u&&(u.fns=s,t[a]=u));for(a in e)i(t[a])&&r((c=ne(a)).name,e[a],c.capture)}function oe(t,e,n){var r;t instanceof dt&&(t=t.data.hook||(t.data.hook={}));var s=t[e];function u(){n.apply(this,arguments),m(r.fns,u)}i(s)?r=re([u]):o(s.fns)&&a(s.merged)?(r=s).fns.push(u):r=re([s,u]),r.merged=!0,t[e]=r}function ae(t,e,n,r,i){if(o(e)){if(_(e,n))return t[n]=e[n],i||delete e[n],!0;if(_(e,r))return t[n]=e[r],i||delete e[r],!0}return!1}function se(t){return s(t)?[gt(t)]:Array.isArray(t)?function t(e,n){var r=[];var u,c,l,h;for(u=0;u<e.length;u++)i(c=e[u])||"boolean"==typeof c||(l=r.length-1,h=r[l],Array.isArray(c)?c.length>0&&(ue((c=t(c,(n||"")+"_"+u))[0])&&ue(h)&&(r[l]=gt(h.text+c[0].text),c.shift()),r.push.apply(r,c)):s(c)?ue(h)?r[l]=gt(h.text+c):""!==c&&r.push(gt(c)):ue(c)&&ue(h)?r[l]=gt(h.text+c.text):(a(e._isVList)&&o(c.tag)&&i(c.key)&&o(n)&&(c.key="__vlist"+n+"_"+u+"__"),r.push(c)));return r}(t):void 0}function ue(t){return o(t)&&o(t.text)&&!1===t.isComment}function ce(t,e){return(t.__esModule||st&&"Module"===t[Symbol.toStringTag])&&(t=t.default),u(t)?e.extend(t):t}function le(t){return t.isComment&&t.asyncFactory}function he(t){if(Array.isArray(t))for(var e=0;e<t.length;e++){var n=t[e];if(o(n)&&(o(n.componentOptions)||le(n)))return n}}function de(t,e,n){n?ee.$once(t,e):ee.$on(t,e)}function fe(t,e){ee.$off(t,e)}function pe(t,e,n){ee=t,ie(e,n||{},de,fe),ee=void 0}function ge(t,e){var n={};if(!t)return n;for(var r=0,i=t.length;r<i;r++){var o=t[r],a=o.data;if(a&&a.attrs&&a.attrs.slot&&delete a.attrs.slot,o.context!==e&&o.fnContext!==e||!a||null==a.slot)(n.default||(n.default=[])).push(o);else{var s=a.slot,u=n[s]||(n[s]=[]);"template"===o.tag?u.push.apply(u,o.children||[]):u.push(o)}}for(var c in n)n[c].every(ve)&&delete n[c];return n}function ve(t){return t.isComment&&!t.asyncFactory||" "===t.text}function me(t,e){e=e||{};for(var n=0;n<t.length;n++)Array.isArray(t[n])?me(t[n],e):e[t[n].key]=t[n].fn;return e}var ye=null;function _e(t){for(;t&&(t=t.$parent);)if(t._inactive)return!0;return!1}function Ee(t,e){if(e){if(t._directInactive=!1,_e(t))return}else if(t._directInactive)return;if(t._inactive||null===t._inactive){t._inactive=!1;for(var n=0;n<t.$children.length;n++)Ee(t.$children[n]);Ae(t,"activated")}}function Ae(t,e){var n=t.$options[e];if(n)for(var r=0,i=n.length;r<i;r++)try{n[r].call(t)}catch(n){Ut(n,t,e+" hook")}t._hasHookEvent&&t.$emit("hook:"+e)}var Se=[],Te=[],xe={},be=!1,we=!1,Ce=0;function Ie(){var t,e;for(we=!0,Se.sort(function(t,e){return t.id-e.id}),Ce=0;Ce<Se.length;Ce++)e=(t=Se[Ce]).id,xe[e]=null,t.run();var n=Te.slice(),r=Se.slice();Ce=Se.length=Te.length=0,xe={},be=we=!1,function(t){for(var e=0;e<t.length;e++)t[e]._inactive=!0,Ee(t[e],!0)}(n),function(t){var e=t.length;for(;e--;){var n=t[e],r=n.vm;r._watcher===n&&r._isMounted&&Ae(r,"updated")}}(r),it&&V.devtools&&it.emit("flush")}var Le=0,Ne=function(t,e,n,r,i){this.vm=t,i&&(t._watcher=this),t._watchers.push(this),r?(this.deep=!!r.deep,this.user=!!r.user,this.lazy=!!r.lazy,this.sync=!!r.sync):this.deep=this.user=this.lazy=this.sync=!1,this.cb=n,this.id=++Le,this.active=!0,this.dirty=this.lazy,this.deps=[],this.newDeps=[],this.depIds=new at,this.newDepIds=new at,this.expression="","function"==typeof e?this.getter=e:(this.getter=function(t){if(!Y.test(t)){var e=t.split(".");return function(t){for(var n=0;n<e.length;n++){if(!t)return;t=t[e[n]]}return t}}}(e),this.getter||(this.getter=function(){})),this.value=this.lazy?void 0:this.get()};Ne.prototype.get=function(){var t,e;t=this,lt.target&&ht.push(lt.target),lt.target=t;var n=this.vm;try{e=this.getter.call(n,n)}catch(t){if(!this.user)throw t;Ut(t,n,'getter for watcher "'+this.expression+'"')}finally{this.deep&&te(e),lt.target=ht.pop(),this.cleanupDeps()}return e},Ne.prototype.addDep=function(t){var e=t.id;this.newDepIds.has(e)||(this.newDepIds.add(e),this.newDeps.push(t),this.depIds.has(e)||t.addSub(this))},Ne.prototype.cleanupDeps=function(){for(var t=this.deps.length;t--;){var e=this.deps[t];this.newDepIds.has(e.id)||e.removeSub(this)}var n=this.depIds;this.depIds=this.newDepIds,this.newDepIds=n,this.newDepIds.clear(),n=this.deps,this.deps=this.newDeps,this.newDeps=n,this.newDeps.length=0},Ne.prototype.update=function(){this.lazy?this.dirty=!0:this.sync?this.run():function(t){var e=t.id;if(null==xe[e]){if(xe[e]=!0,we){for(var n=Se.length-1;n>Ce&&Se[n].id>t.id;)n--;Se.splice(n+1,0,t)}else Se.push(t);be||(be=!0,Jt(Ie))}}(this)},Ne.prototype.run=function(){if(this.active){var t=this.get();if(t!==this.value||u(t)||this.deep){var e=this.value;if(this.value=t,this.user)try{this.cb.call(this.vm,t,e)}catch(t){Ut(t,this.vm,'callback for watcher "'+this.expression+'"')}else this.cb.call(this.vm,t,e)}}},Ne.prototype.evaluate=function(){this.value=this.get(),this.dirty=!1},Ne.prototype.depend=function(){for(var t=this.deps.length;t--;)this.deps[t].depend()},Ne.prototype.teardown=function(){if(this.active){this.vm._isBeingDestroyed||m(this.vm._watchers,this);for(var t=this.deps.length;t--;)this.deps[t].removeSub(this);this.active=!1}};var Oe={enumerable:!0,configurable:!0,get:N,set:N};function Re(t,e,n){Oe.get=function(){return this[e][n]},Oe.set=function(t){this[e][n]=t},Object.defineProperty(t,n,Oe)}function Me(t){t._watchers=[];var e=t.$options;e.props&&function(t,e){var n=t.$options.propsData||{},r=t._props={},i=t.$options._propKeys=[],o=!t.$parent;At.shouldConvert=o;var a=function(o){i.push(o);var a=Bt(o,e,n,t);wt(r,o,a),o in t||Re(t,"_props",o)};for(var s in e)a(s);At.shouldConvert=!0}(t,e.props),e.methods&&function(t,e){t.$options.props;for(var n in e)t[n]=null==e[n]?N:w(e[n],t)}(t,e.methods),e.data?function(t){var e=t.$options.data;l(e=t._data="function"==typeof e?function(t,e){try{return t.call(e,e)}catch(t){return Ut(t,e,"data()"),{}}}(e,t):e||{})||(e={});var n=Object.keys(e),r=t.$options.props,i=(t.$options.methods,n.length);for(;i--;){var o=n[i];0,r&&_(r,o)||U(o)||Re(t,"_data",o)}bt(e,!0)}(t):bt(t._data={},!0),e.computed&&function(t,e){var n=t._computedWatchers=Object.create(null),r=rt();for(var i in e){var o=e[i],a="function"==typeof o?o:o.get;0,r||(n[i]=new Ne(t,a||N,N,De)),i in t||Pe(t,i,o)}}(t,e.computed),e.watch&&e.watch!==tt&&function(t,e){for(var n in e){var r=e[n];if(Array.isArray(r))for(var i=0;i<r.length;i++)Be(t,n,r[i]);else Be(t,n,r)}}(t,e.watch)}var De={lazy:!0};function Pe(t,e,n){var r=!rt();"function"==typeof n?(Oe.get=r?ke(e):n,Oe.set=N):(Oe.get=n.get?r&&!1!==n.cache?ke(e):n.get:N,Oe.set=n.set?n.set:N),Object.defineProperty(t,e,Oe)}function ke(t){return function(){var e=this._computedWatchers&&this._computedWatchers[t];if(e)return e.dirty&&e.evaluate(),lt.target&&e.depend(),e.value}}function Be(t,e,n,r){return l(n)&&(r=n,n=n.handler),"string"==typeof n&&(n=t[n]),t.$watch(e,n,r)}function Fe(t,e){if(t){for(var n=Object.create(null),r=st?Reflect.ownKeys(t).filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}):Object.keys(t),i=0;i<r.length;i++){for(var o=r[i],a=t[o].from,s=e;s;){if(s._provided&&a in s._provided){n[o]=s._provided[a];break}s=s.$parent}if(!s)if("default"in t[o]){var u=t[o].default;n[o]="function"==typeof u?u.call(e):u}else 0}return n}}function Ve(t,e){var n,r,i,a,s;if(Array.isArray(t)||"string"==typeof t)for(n=new Array(t.length),r=0,i=t.length;r<i;r++)n[r]=e(t[r],r);else if("number"==typeof t)for(n=new Array(t),r=0;r<t;r++)n[r]=e(r+1,r);else if(u(t))for(a=Object.keys(t),n=new Array(a.length),r=0,i=a.length;r<i;r++)s=a[r],n[r]=e(t[s],s,r);return o(n)&&(n._isVList=!0),n}function Ue(t,e,n,r){var i,o=this.$scopedSlots[t];if(o)n=n||{},r&&(n=I(I({},r),n)),i=o(n)||e;else{var a=this.$slots[t];a&&(a._rendered=!0),i=a||e}var s=n&&n.slot;return s?this.$createElement("template",{slot:s},i):i}function He(t){return kt(this.$options,"filters",t)||R}function Ye(t,e,n,r){var i=V.keyCodes[e]||n;return i?Array.isArray(i)?-1===i.indexOf(t):i!==t:r?b(r)!==e:void 0}function Ge(t,e,n,r,i){if(n)if(u(n)){var o;Array.isArray(n)&&(n=L(n));var a=function(a){if("class"===a||"style"===a||v(a))o=t;else{var s=t.attrs&&t.attrs.type;o=r||V.mustUseProp(e,s,a)?t.domProps||(t.domProps={}):t.attrs||(t.attrs={})}a in o||(o[a]=n[a],i&&((t.on||(t.on={}))["update:"+a]=function(t){n[a]=t}))};for(var s in n)a(s)}else;return t}function je(t,e){var n=this._staticTrees||(this._staticTrees=[]),r=n[t];return r&&!e?Array.isArray(r)?mt(r):vt(r):(We(r=n[t]=this.$options.staticRenderFns[t].call(this._renderProxy,null,this),"__static__"+t,!1),r)}function ze(t,e,n){return We(t,"__once__"+e+(n?"_"+n:""),!0),t}function We(t,e,n){if(Array.isArray(t))for(var r=0;r<t.length;r++)t[r]&&"string"!=typeof t[r]&&Ke(t[r],e+"_"+r,n);else Ke(t,e,n)}function Ke(t,e,n){t.isStatic=!0,t.key=e,t.isOnce=n}function Qe(t,e){if(e)if(l(e)){var n=t.on=t.on?I({},t.on):{};for(var r in e){var i=n[r],o=e[r];n[r]=i?[].concat(i,o):o}}else;return t}function qe(t){t._o=ze,t._n=p,t._s=f,t._l=Ve,t._t=Ue,t._q=M,t._i=D,t._m=je,t._f=He,t._k=Ye,t._b=Ge,t._v=gt,t._e=pt,t._u=me,t._g=Qe}function Xe(t,e,n,i,o){var s=o.options;this.data=t,this.props=e,this.children=n,this.parent=i,this.listeners=t.on||r,this.injections=Fe(s.inject,i),this.slots=function(){return ge(n,i)};var u=Object.create(i),c=a(s._compiled),l=!c;c&&(this.$options=s,this.$slots=this.slots(),this.$scopedSlots=t.scopedSlots||r),s._scopeId?this._c=function(t,e,n,r){var o=on(u,t,e,n,r,l);return o&&(o.fnScopeId=s._scopeId,o.fnContext=i),o}:this._c=function(t,e,n,r){return on(u,t,e,n,r,l)}}function $e(t,e){for(var n in e)t[S(n)]=e[n]}qe(Xe.prototype);var Je={init:function(t,e,n,r){if(!t.componentInstance||t.componentInstance._isDestroyed)(t.componentInstance=function(t,e,n,r){var i={_isComponent:!0,parent:e,_parentVnode:t,_parentElm:n||null,_refElm:r||null},a=t.data.inlineTemplate;o(a)&&(i.render=a.render,i.staticRenderFns=a.staticRenderFns);return new t.componentOptions.Ctor(i)}(t,ye,n,r)).$mount(e?t.elm:void 0,e);else if(t.data.keepAlive){var i=t;Je.prepatch(i,i)}},prepatch:function(t,e){var n=e.componentOptions;!function(t,e,n,i,o){var a=!!(o||t.$options._renderChildren||i.data.scopedSlots||t.$scopedSlots!==r);if(t.$options._parentVnode=i,t.$vnode=i,t._vnode&&(t._vnode.parent=i),t.$options._renderChildren=o,t.$attrs=i.data&&i.data.attrs||r,t.$listeners=n||r,e&&t.$options.props){At.shouldConvert=!1;for(var s=t._props,u=t.$options._propKeys||[],c=0;c<u.length;c++){var l=u[c];s[l]=Bt(l,t.$options.props,e,t)}At.shouldConvert=!0,t.$options.propsData=e}if(n){var h=t.$options._parentListeners;t.$options._parentListeners=n,pe(t,n,h)}a&&(t.$slots=ge(o,i.context),t.$forceUpdate())}(e.componentInstance=t.componentInstance,n.propsData,n.listeners,e,n.children)},insert:function(t){var e,n=t.context,r=t.componentInstance;r._isMounted||(r._isMounted=!0,Ae(r,"mounted")),t.data.keepAlive&&(n._isMounted?((e=r)._inactive=!1,Te.push(e)):Ee(r,!0))},destroy:function(t){var e=t.componentInstance;e._isDestroyed||(t.data.keepAlive?function t(e,n){if(!(n&&(e._directInactive=!0,_e(e))||e._inactive)){e._inactive=!0;for(var r=0;r<e.$children.length;r++)t(e.$children[r]);Ae(e,"deactivated")}}(e,!0):e.$destroy())}},Ze=Object.keys(Je);function tn(t,e,n,s,c){if(!i(t)){var l=n.$options._base;if(u(t)&&(t=l.extend(t)),"function"==typeof t){var h;if(i(t.cid)&&void 0===(t=function(t,e,n){if(a(t.error)&&o(t.errorComp))return t.errorComp;if(o(t.resolved))return t.resolved;if(a(t.loading)&&o(t.loadingComp))return t.loadingComp;if(!o(t.contexts)){var r=t.contexts=[n],s=!0,c=function(){for(var t=0,e=r.length;t<e;t++)r[t].$forceUpdate()},l=P(function(n){t.resolved=ce(n,e),s||c()}),h=P(function(e){o(t.errorComp)&&(t.error=!0,c())}),d=t(l,h);return u(d)&&("function"==typeof d.then?i(t.resolved)&&d.then(l,h):o(d.component)&&"function"==typeof d.component.then&&(d.component.then(l,h),o(d.error)&&(t.errorComp=ce(d.error,e)),o(d.loading)&&(t.loadingComp=ce(d.loading,e),0===d.delay?t.loading=!0:setTimeout(function(){i(t.resolved)&&i(t.error)&&(t.loading=!0,c())},d.delay||200)),o(d.timeout)&&setTimeout(function(){i(t.resolved)&&h(null)},d.timeout))),s=!1,t.loading?t.loadingComp:t.resolved}t.contexts.push(n)}(h=t,l,n)))return function(t,e,n,r,i){var o=pt();return o.asyncFactory=t,o.asyncMeta={data:e,context:n,children:r,tag:i},o}(h,e,n,s,c);e=e||{},sn(t),o(e.model)&&function(t,e){var n=t.model&&t.model.prop||"value",r=t.model&&t.model.event||"input";(e.props||(e.props={}))[n]=e.model.value;var i=e.on||(e.on={});o(i[r])?i[r]=[e.model.callback].concat(i[r]):i[r]=e.model.callback}(t.options,e);var d=function(t,e,n){var r=e.options.props;if(!i(r)){var a={},s=t.attrs,u=t.props;if(o(s)||o(u))for(var c in r){var l=b(c);ae(a,u,c,l,!0)||ae(a,s,c,l,!1)}return a}}(e,t);if(a(t.options.functional))return function(t,e,n,i,a){var s=t.options,u={},c=s.props;if(o(c))for(var l in c)u[l]=Bt(l,c,e||r);else o(n.attrs)&&$e(u,n.attrs),o(n.props)&&$e(u,n.props);var h=new Xe(n,u,a,i,t),d=s.render.call(null,h._c,h);return d instanceof dt&&(d.fnContext=i,d.fnOptions=s,n.slot&&((d.data||(d.data={})).slot=n.slot)),d}(t,d,e,n,s);var f=e.on;if(e.on=e.nativeOn,a(t.options.abstract)){var p=e.slot;e={},p&&(e.slot=p)}!function(t){t.hook||(t.hook={});for(var e=0;e<Ze.length;e++){var n=Ze[e],r=t.hook[n],i=Je[n];t.hook[n]=r?en(i,r):i}}(e);var g=t.options.name||c;return new dt("vue-component-"+t.cid+(g?"-"+g:""),e,void 0,void 0,void 0,n,{Ctor:t,propsData:d,listeners:f,tag:c,children:s},h)}}}function en(t,e){return function(n,r,i,o){t(n,r,i,o),e(n,r,i,o)}}var nn=1,rn=2;function on(t,e,n,r,u,c){return(Array.isArray(n)||s(n))&&(u=r,r=n,n=void 0),a(c)&&(u=rn),function(t,e,n,r,s){if(o(n)&&o(n.__ob__))return pt();o(n)&&o(n.is)&&(e=n.is);if(!e)return pt();0;Array.isArray(r)&&"function"==typeof r[0]&&((n=n||{}).scopedSlots={default:r[0]},r.length=0);s===rn?r=se(r):s===nn&&(r=function(t){for(var e=0;e<t.length;e++)if(Array.isArray(t[e]))return Array.prototype.concat.apply([],t);return t}(r));var u,c;if("string"==typeof e){var l;c=t.$vnode&&t.$vnode.ns||V.getTagNamespace(e),u=V.isReservedTag(e)?new dt(V.parsePlatformTagName(e),n,r,void 0,void 0,t):o(l=kt(t.$options,"components",e))?tn(l,n,t,r,e):new dt(e,n,r,void 0,void 0,t)}else u=tn(e,n,t,r);return o(u)?(c&&function t(e,n,r){e.ns=n;"foreignObject"===e.tag&&(n=void 0,r=!0);if(o(e.children))for(var s=0,u=e.children.length;s<u;s++){var c=e.children[s];o(c.tag)&&(i(c.ns)||a(r))&&t(c,n,r)}}(u,c),u):pt()}(t,e,n,r,u)}var an=0;function sn(t){var e=t.options;if(t.super){var n=sn(t.super);if(n!==t.superOptions){t.superOptions=n;var r=function(t){var e,n=t.options,r=t.extendOptions,i=t.sealedOptions;for(var o in n)n[o]!==i[o]&&(e||(e={}),e[o]=un(n[o],r[o],i[o]));return e}(t);r&&I(t.extendOptions,r),(e=t.options=Pt(n,t.extendOptions)).name&&(e.components[e.name]=t)}}return e}function un(t,e,n){if(Array.isArray(t)){var r=[];n=Array.isArray(n)?n:[n],e=Array.isArray(e)?e:[e];for(var i=0;i<t.length;i++)(e.indexOf(t[i])>=0||n.indexOf(t[i])<0)&&r.push(t[i]);return r}return t}function cn(t){this._init(t)}function ln(t){t.cid=0;var e=1;t.extend=function(t){t=t||{};var n=this,r=n.cid,i=t._Ctor||(t._Ctor={});if(i[r])return i[r];var o=t.name||n.options.name;var a=function(t){this._init(t)};return(a.prototype=Object.create(n.prototype)).constructor=a,a.cid=e++,a.options=Pt(n.options,t),a.super=n,a.options.props&&function(t){var e=t.options.props;for(var n in e)Re(t.prototype,"_props",n)}(a),a.options.computed&&function(t){var e=t.options.computed;for(var n in e)Pe(t.prototype,n,e[n])}(a),a.extend=n.extend,a.mixin=n.mixin,a.use=n.use,B.forEach(function(t){a[t]=n[t]}),o&&(a.options.components[o]=a),a.superOptions=n.options,a.extendOptions=t,a.sealedOptions=I({},a.options),i[r]=a,a}}function hn(t){return t&&(t.Ctor.options.name||t.tag)}function dn(t,e){return Array.isArray(t)?t.indexOf(e)>-1:"string"==typeof t?t.split(",").indexOf(e)>-1:!!h(t)&&t.test(e)}function fn(t,e){var n=t.cache,r=t.keys,i=t._vnode;for(var o in n){var a=n[o];if(a){var s=hn(a.componentOptions);s&&!e(s)&&pn(n,o,r,i)}}}function pn(t,e,n,r){var i=t[e];!i||r&&i.tag===r.tag||i.componentInstance.$destroy(),t[e]=null,m(n,e)}cn.prototype._init=function(t){var e=this;e._uid=an++,e._isVue=!0,t&&t._isComponent?function(t,e){var n=t.$options=Object.create(t.constructor.options),r=e._parentVnode;n.parent=e.parent,n._parentVnode=r,n._parentElm=e._parentElm,n._refElm=e._refElm;var i=r.componentOptions;n.propsData=i.propsData,n._parentListeners=i.listeners,n._renderChildren=i.children,n._componentTag=i.tag,e.render&&(n.render=e.render,n.staticRenderFns=e.staticRenderFns)}(e,t):e.$options=Pt(sn(e.constructor),t||{},e),e._renderProxy=e,e._self=e,function(t){var e=t.$options,n=e.parent;if(n&&!e.abstract){for(;n.$options.abstract&&n.$parent;)n=n.$parent;n.$children.push(t)}t.$parent=n,t.$root=n?n.$root:t,t.$children=[],t.$refs={},t._watcher=null,t._inactive=null,t._directInactive=!1,t._isMounted=!1,t._isDestroyed=!1,t._isBeingDestroyed=!1}(e),function(t){t._events=Object.create(null),t._hasHookEvent=!1;var e=t.$options._parentListeners;e&&pe(t,e)}(e),function(t){t._vnode=null,t._staticTrees=null;var e=t.$options,n=t.$vnode=e._parentVnode,i=n&&n.context;t.$slots=ge(e._renderChildren,i),t.$scopedSlots=r,t._c=function(e,n,r,i){return on(t,e,n,r,i,!1)},t.$createElement=function(e,n,r,i){return on(t,e,n,r,i,!0)};var o=n&&n.data;wt(t,"$attrs",o&&o.attrs||r,0,!0),wt(t,"$listeners",e._parentListeners||r,0,!0)}(e),Ae(e,"beforeCreate"),function(t){var e=Fe(t.$options.inject,t);e&&(At.shouldConvert=!1,Object.keys(e).forEach(function(n){wt(t,n,e[n])}),At.shouldConvert=!0)}(e),Me(e),function(t){var e=t.$options.provide;e&&(t._provided="function"==typeof e?e.call(t):e)}(e),Ae(e,"created"),e.$options.el&&e.$mount(e.$options.el)},function(t){var e={get:function(){return this._data}},n={get:function(){return this._props}};Object.defineProperty(t.prototype,"$data",e),Object.defineProperty(t.prototype,"$props",n),t.prototype.$set=Ct,t.prototype.$delete=It,t.prototype.$watch=function(t,e,n){if(l(e))return Be(this,t,e,n);(n=n||{}).user=!0;var r=new Ne(this,t,e,n);return n.immediate&&e.call(this,r.value),function(){r.teardown()}}}(cn),function(t){var e=/^hook:/;t.prototype.$on=function(t,n){if(Array.isArray(t))for(var r=0,i=t.length;r<i;r++)this.$on(t[r],n);else(this._events[t]||(this._events[t]=[])).push(n),e.test(t)&&(this._hasHookEvent=!0);return this},t.prototype.$once=function(t,e){var n=this;function r(){n.$off(t,r),e.apply(n,arguments)}return r.fn=e,n.$on(t,r),n},t.prototype.$off=function(t,e){var n=this;if(!arguments.length)return n._events=Object.create(null),n;if(Array.isArray(t)){for(var r=0,i=t.length;r<i;r++)this.$off(t[r],e);return n}var o=n._events[t];if(!o)return n;if(!e)return n._events[t]=null,n;if(e)for(var a,s=o.length;s--;)if((a=o[s])===e||a.fn===e){o.splice(s,1);break}return n},t.prototype.$emit=function(t){var e=this,n=e._events[t];if(n){n=n.length>1?C(n):n;for(var r=C(arguments,1),i=0,o=n.length;i<o;i++)try{n[i].apply(e,r)}catch(n){Ut(n,e,'event handler for "'+t+'"')}}return e}}(cn),function(t){t.prototype._update=function(t,e){var n=this;n._isMounted&&Ae(n,"beforeUpdate");var r=n.$el,i=n._vnode,o=ye;ye=n,n._vnode=t,i?n.$el=n.__patch__(i,t):(n.$el=n.__patch__(n.$el,t,e,!1,n.$options._parentElm,n.$options._refElm),n.$options._parentElm=n.$options._refElm=null),ye=o,r&&(r.__vue__=null),n.$el&&(n.$el.__vue__=n),n.$vnode&&n.$parent&&n.$vnode===n.$parent._vnode&&(n.$parent.$el=n.$el)},t.prototype.$forceUpdate=function(){this._watcher&&this._watcher.update()},t.prototype.$destroy=function(){var t=this;if(!t._isBeingDestroyed){Ae(t,"beforeDestroy"),t._isBeingDestroyed=!0;var e=t.$parent;!e||e._isBeingDestroyed||t.$options.abstract||m(e.$children,t),t._watcher&&t._watcher.teardown();for(var n=t._watchers.length;n--;)t._watchers[n].teardown();t._data.__ob__&&t._data.__ob__.vmCount--,t._isDestroyed=!0,t.__patch__(t._vnode,null),Ae(t,"destroyed"),t.$off(),t.$el&&(t.$el.__vue__=null),t.$vnode&&(t.$vnode.parent=null)}}}(cn),function(t){qe(t.prototype),t.prototype.$nextTick=function(t){return Jt(t,this)},t.prototype._render=function(){var t,e=this,n=e.$options,i=n.render,o=n._parentVnode;if(e._isMounted)for(var a in e.$slots){var s=e.$slots[a];(s._rendered||s[0]&&s[0].elm)&&(e.$slots[a]=mt(s,!0))}e.$scopedSlots=o&&o.data.scopedSlots||r,e.$vnode=o;try{t=i.call(e._renderProxy,e.$createElement)}catch(n){Ut(n,e,"render"),t=e._vnode}return t instanceof dt||(t=pt()),t.parent=o,t}}(cn);var gn=[String,RegExp,Array],vn={KeepAlive:{name:"keep-alive",abstract:!0,props:{include:gn,exclude:gn,max:[String,Number]},created:function(){this.cache=Object.create(null),this.keys=[]},destroyed:function(){for(var t in this.cache)pn(this.cache,t,this.keys)},watch:{include:function(t){fn(this,function(e){return dn(t,e)})},exclude:function(t){fn(this,function(e){return!dn(t,e)})}},render:function(){var t=this.$slots.default,e=he(t),n=e&&e.componentOptions;if(n){var r=hn(n),i=this.include,o=this.exclude;if(i&&(!r||!dn(i,r))||o&&r&&dn(o,r))return e;var a=this.cache,s=this.keys,u=null==e.key?n.Ctor.cid+(n.tag?"::"+n.tag:""):e.key;a[u]?(e.componentInstance=a[u].componentInstance,m(s,u),s.push(u)):(a[u]=e,s.push(u),this.max&&s.length>parseInt(this.max)&&pn(a,s[0],s,this._vnode)),e.data.keepAlive=!0}return e||t&&t[0]}}};!function(t){var e={get:function(){return V}};Object.defineProperty(t,"config",e),t.util={warn:ut,extend:I,mergeOptions:Pt,defineReactive:wt},t.set=Ct,t.delete=It,t.nextTick=Jt,t.options=Object.create(null),B.forEach(function(e){t.options[e+"s"]=Object.create(null)}),t.options._base=t,I(t.options.components,vn),function(t){t.use=function(t){var e=this._installedPlugins||(this._installedPlugins=[]);if(e.indexOf(t)>-1)return this;var n=C(arguments,1);return n.unshift(this),"function"==typeof t.install?t.install.apply(t,n):"function"==typeof t&&t.apply(null,n),e.push(t),this}}(t),function(t){t.mixin=function(t){return this.options=Pt(this.options,t),this}}(t),ln(t),function(t){B.forEach(function(e){t[e]=function(t,n){return n?("component"===e&&l(n)&&(n.name=n.name||t,n=this.options._base.extend(n)),"directive"===e&&"function"==typeof n&&(n={bind:n,update:n}),this.options[e+"s"][t]=n,n):this.options[e+"s"][t]}})}(t)}(cn),Object.defineProperty(cn.prototype,"$isServer",{get:rt}),Object.defineProperty(cn.prototype,"$ssrContext",{get:function(){return this.$vnode&&this.$vnode.ssrContext}}),cn.version="2.5.13";var mn=g("style,class"),yn=g("input,textarea,option,select,progress"),_n=g("contenteditable,draggable,spellcheck"),En=g("allowfullscreen,async,autofocus,autoplay,checked,compact,controls,declare,default,defaultchecked,defaultmuted,defaultselected,defer,disabled,enabled,formnovalidate,hidden,indeterminate,inert,ismap,itemscope,loop,multiple,muted,nohref,noresize,noshade,novalidate,nowrap,open,pauseonexit,readonly,required,reversed,scoped,seamless,selected,sortable,translate,truespeed,typemustmatch,visible"),An="http://www.w3.org/1999/xlink",Sn=function(t){return":"===t.charAt(5)&&"xlink"===t.slice(0,5)},Tn=function(t){return Sn(t)?t.slice(6,t.length):""},xn=function(t){return null==t||!1===t};function bn(t){for(var e=t.data,n=t,r=t;o(r.componentInstance);)(r=r.componentInstance._vnode)&&r.data&&(e=wn(r.data,e));for(;o(n=n.parent);)n&&n.data&&(e=wn(e,n.data));return function(t,e){if(o(t)||o(e))return Cn(t,In(e));return""}(e.staticClass,e.class)}function wn(t,e){return{staticClass:Cn(t.staticClass,e.staticClass),class:o(t.class)?[t.class,e.class]:e.class}}function Cn(t,e){return t?e?t+" "+e:t:e||""}function In(t){return Array.isArray(t)?function(t){for(var e,n="",r=0,i=t.length;r<i;r++)o(e=In(t[r]))&&""!==e&&(n&&(n+=" "),n+=e);return n}(t):u(t)?function(t){var e="";for(var n in t)t[n]&&(e&&(e+=" "),e+=n);return e}(t):"string"==typeof t?t:""}var Ln={svg:"http://www.w3.org/2000/svg",math:"http://www.w3.org/1998/Math/MathML"},Nn=g("html,body,base,head,link,meta,style,title,address,article,aside,footer,header,h1,h2,h3,h4,h5,h6,hgroup,nav,section,div,dd,dl,dt,figcaption,figure,picture,hr,img,li,main,ol,p,pre,ul,a,b,abbr,bdi,bdo,br,cite,code,data,dfn,em,i,kbd,mark,q,rp,rt,rtc,ruby,s,samp,small,span,strong,sub,sup,time,u,var,wbr,area,audio,map,track,video,embed,object,param,source,canvas,script,noscript,del,ins,caption,col,colgroup,table,thead,tbody,td,th,tr,button,datalist,fieldset,form,input,label,legend,meter,optgroup,option,output,progress,select,textarea,details,dialog,menu,menuitem,summary,content,element,shadow,template,blockquote,iframe,tfoot"),On=g("svg,animate,circle,clippath,cursor,defs,desc,ellipse,filter,font-face,foreignObject,g,glyph,image,line,marker,mask,missing-glyph,path,pattern,polygon,polyline,rect,switch,symbol,text,textpath,tspan,use,view",!0),Rn=function(t){return Nn(t)||On(t)};var Mn=Object.create(null);var Dn=g("text,number,password,search,email,tel,url");var Pn=Object.freeze({createElement:function(t,e){var n=document.createElement(t);return"select"!==t?n:(e.data&&e.data.attrs&&void 0!==e.data.attrs.multiple&&n.setAttribute("multiple","multiple"),n)},createElementNS:function(t,e){return document.createElementNS(Ln[t],e)},createTextNode:function(t){return document.createTextNode(t)},createComment:function(t){return document.createComment(t)},insertBefore:function(t,e,n){t.insertBefore(e,n)},removeChild:function(t,e){t.removeChild(e)},appendChild:function(t,e){t.appendChild(e)},parentNode:function(t){return t.parentNode},nextSibling:function(t){return t.nextSibling},tagName:function(t){return t.tagName},setTextContent:function(t,e){t.textContent=e},setAttribute:function(t,e,n){t.setAttribute(e,n)}}),kn={create:function(t,e){Bn(e)},update:function(t,e){t.data.ref!==e.data.ref&&(Bn(t,!0),Bn(e))},destroy:function(t){Bn(t,!0)}};function Bn(t,e){var n=t.data.ref;if(n){var r=t.context,i=t.componentInstance||t.elm,o=r.$refs;e?Array.isArray(o[n])?m(o[n],i):o[n]===i&&(o[n]=void 0):t.data.refInFor?Array.isArray(o[n])?o[n].indexOf(i)<0&&o[n].push(i):o[n]=[i]:o[n]=i}}var Fn=new dt("",{},[]),Vn=["create","activate","update","remove","destroy"];function Un(t,e){return t.key===e.key&&(t.tag===e.tag&&t.isComment===e.isComment&&o(t.data)===o(e.data)&&function(t,e){if("input"!==t.tag)return!0;var n,r=o(n=t.data)&&o(n=n.attrs)&&n.type,i=o(n=e.data)&&o(n=n.attrs)&&n.type;return r===i||Dn(r)&&Dn(i)}(t,e)||a(t.isAsyncPlaceholder)&&t.asyncFactory===e.asyncFactory&&i(e.asyncFactory.error))}function Hn(t,e,n){var r,i,a={};for(r=e;r<=n;++r)o(i=t[r].key)&&(a[i]=r);return a}var Yn={create:Gn,update:Gn,destroy:function(t){Gn(t,Fn)}};function Gn(t,e){(t.data.directives||e.data.directives)&&function(t,e){var n,r,i,o=t===Fn,a=e===Fn,s=zn(t.data.directives,t.context),u=zn(e.data.directives,e.context),c=[],l=[];for(n in u)r=s[n],i=u[n],r?(i.oldValue=r.value,Kn(i,"update",e,t),i.def&&i.def.componentUpdated&&l.push(i)):(Kn(i,"bind",e,t),i.def&&i.def.inserted&&c.push(i));if(c.length){var h=function(){for(var n=0;n<c.length;n++)Kn(c[n],"inserted",e,t)};o?oe(e,"insert",h):h()}l.length&&oe(e,"postpatch",function(){for(var n=0;n<l.length;n++)Kn(l[n],"componentUpdated",e,t)});if(!o)for(n in s)u[n]||Kn(s[n],"unbind",t,t,a)}(t,e)}var jn=Object.create(null);function zn(t,e){var n,r,i=Object.create(null);if(!t)return i;for(n=0;n<t.length;n++)(r=t[n]).modifiers||(r.modifiers=jn),i[Wn(r)]=r,r.def=kt(e.$options,"directives",r.name);return i}function Wn(t){return t.rawName||t.name+"."+Object.keys(t.modifiers||{}).join(".")}function Kn(t,e,n,r,i){var o=t.def&&t.def[e];if(o)try{o(n.elm,t,n,r,i)}catch(r){Ut(r,n.context,"directive "+t.name+" "+e+" hook")}}var Qn=[kn,Yn];function qn(t,e){var n=e.componentOptions;if(!(o(n)&&!1===n.Ctor.options.inheritAttrs||i(t.data.attrs)&&i(e.data.attrs))){var r,a,s=e.elm,u=t.data.attrs||{},c=e.data.attrs||{};for(r in o(c.__ob__)&&(c=e.data.attrs=I({},c)),c)a=c[r],u[r]!==a&&Xn(s,r,a);for(r in(q||$)&&c.value!==u.value&&Xn(s,"value",c.value),u)i(c[r])&&(Sn(r)?s.removeAttributeNS(An,Tn(r)):_n(r)||s.removeAttribute(r))}}function Xn(t,e,n){if(En(e))xn(n)?t.removeAttribute(e):(n="allowfullscreen"===e&&"EMBED"===t.tagName?"true":e,t.setAttribute(e,n));else if(_n(e))t.setAttribute(e,xn(n)||"false"===n?"false":"true");else if(Sn(e))xn(n)?t.removeAttributeNS(An,Tn(e)):t.setAttributeNS(An,e,n);else if(xn(n))t.removeAttribute(e);else{if(q&&!X&&"TEXTAREA"===t.tagName&&"placeholder"===e&&!t.__ieph){var r=function(e){e.stopImmediatePropagation(),t.removeEventListener("input",r)};t.addEventListener("input",r),t.__ieph=!0}t.setAttribute(e,n)}}var $n={create:qn,update:qn};function Jn(t,e){var n=e.elm,r=e.data,a=t.data;if(!(i(r.staticClass)&&i(r.class)&&(i(a)||i(a.staticClass)&&i(a.class)))){var s=bn(e),u=n._transitionClasses;o(u)&&(s=Cn(s,In(u))),s!==n._prevClass&&(n.setAttribute("class",s),n._prevClass=s)}}var Zn,tr={create:Jn,update:Jn},er="__r",nr="__c";function rr(t,e,n,r,i){var o;e=(o=e)._withTask||(o._withTask=function(){Qt=!0;var t=o.apply(null,arguments);return Qt=!1,t}),n&&(e=function(t,e,n){var r=Zn;return function i(){null!==t.apply(null,arguments)&&ir(e,i,n,r)}}(e,t,r)),Zn.addEventListener(t,e,et?{capture:r,passive:i}:r)}function ir(t,e,n,r){(r||Zn).removeEventListener(t,e._withTask||e,n)}function or(t,e){if(!i(t.data.on)||!i(e.data.on)){var n=e.data.on||{},r=t.data.on||{};Zn=e.elm,function(t){if(o(t[er])){var e=q?"change":"input";t[e]=[].concat(t[er],t[e]||[]),delete t[er]}o(t[nr])&&(t.change=[].concat(t[nr],t.change||[]),delete t[nr])}(n),ie(n,r,rr,ir,e.context),Zn=void 0}}var ar={create:or,update:or};function sr(t,e){if(!i(t.data.domProps)||!i(e.data.domProps)){var n,r,a=e.elm,s=t.data.domProps||{},u=e.data.domProps||{};for(n in o(u.__ob__)&&(u=e.data.domProps=I({},u)),s)i(u[n])&&(a[n]="");for(n in u){if(r=u[n],"textContent"===n||"innerHTML"===n){if(e.children&&(e.children.length=0),r===s[n])continue;1===a.childNodes.length&&a.removeChild(a.childNodes[0])}if("value"===n){a._value=r;var c=i(r)?"":String(r);ur(a,c)&&(a.value=c)}else a[n]=r}}}function ur(t,e){return!t.composing&&("OPTION"===t.tagName||function(t,e){var n=!0;try{n=document.activeElement!==t}catch(t){}return n&&t.value!==e}(t,e)||function(t,e){var n=t.value,r=t._vModifiers;if(o(r)){if(r.lazy)return!1;if(r.number)return p(n)!==p(e);if(r.trim)return n.trim()!==e.trim()}return n!==e}(t,e))}var cr={create:sr,update:sr},lr=E(function(t){var e={},n=/:(.+)/;return t.split(/;(?![^(]*\))/g).forEach(function(t){if(t){var r=t.split(n);r.length>1&&(e[r[0].trim()]=r[1].trim())}}),e});function hr(t){var e=dr(t.style);return t.staticStyle?I(t.staticStyle,e):e}function dr(t){return Array.isArray(t)?L(t):"string"==typeof t?lr(t):t}var fr,pr=/^--/,gr=/\s*!important$/,vr=function(t,e,n){if(pr.test(e))t.style.setProperty(e,n);else if(gr.test(n))t.style.setProperty(e,n.replace(gr,""),"important");else{var r=yr(e);if(Array.isArray(n))for(var i=0,o=n.length;i<o;i++)t.style[r]=n[i];else t.style[r]=n}},mr=["Webkit","Moz","ms"],yr=E(function(t){if(fr=fr||document.createElement("div").style,"filter"!==(t=S(t))&&t in fr)return t;for(var e=t.charAt(0).toUpperCase()+t.slice(1),n=0;n<mr.length;n++){var r=mr[n]+e;if(r in fr)return r}});function _r(t,e){var n=e.data,r=t.data;if(!(i(n.staticStyle)&&i(n.style)&&i(r.staticStyle)&&i(r.style))){var a,s,u=e.elm,c=r.staticStyle,l=r.normalizedStyle||r.style||{},h=c||l,d=dr(e.data.style)||{};e.data.normalizedStyle=o(d.__ob__)?I({},d):d;var f=function(t,e){var n,r={};if(e)for(var i=t;i.componentInstance;)(i=i.componentInstance._vnode)&&i.data&&(n=hr(i.data))&&I(r,n);(n=hr(t.data))&&I(r,n);for(var o=t;o=o.parent;)o.data&&(n=hr(o.data))&&I(r,n);return r}(e,!0);for(s in h)i(f[s])&&vr(u,s,"");for(s in f)(a=f[s])!==h[s]&&vr(u,s,null==a?"":a)}}var Er={create:_r,update:_r};function Ar(t,e){if(e&&(e=e.trim()))if(t.classList)e.indexOf(" ")>-1?e.split(/\s+/).forEach(function(e){return t.classList.add(e)}):t.classList.add(e);else{var n=" "+(t.getAttribute("class")||"")+" ";n.indexOf(" "+e+" ")<0&&t.setAttribute("class",(n+e).trim())}}function Sr(t,e){if(e&&(e=e.trim()))if(t.classList)e.indexOf(" ")>-1?e.split(/\s+/).forEach(function(e){return t.classList.remove(e)}):t.classList.remove(e),t.classList.length||t.removeAttribute("class");else{for(var n=" "+(t.getAttribute("class")||"")+" ",r=" "+e+" ";n.indexOf(r)>=0;)n=n.replace(r," ");(n=n.trim())?t.setAttribute("class",n):t.removeAttribute("class")}}function Tr(t){if(t){if("object"==typeof t){var e={};return!1!==t.css&&I(e,xr(t.name||"v")),I(e,t),e}return"string"==typeof t?xr(t):void 0}}var xr=E(function(t){return{enterClass:t+"-enter",enterToClass:t+"-enter-to",enterActiveClass:t+"-enter-active",leaveClass:t+"-leave",leaveToClass:t+"-leave-to",leaveActiveClass:t+"-leave-active"}}),br=z&&!X,wr="transition",Cr="animation",Ir="transition",Lr="transitionend",Nr="animation",Or="animationend";br&&(void 0===window.ontransitionend&&void 0!==window.onwebkittransitionend&&(Ir="WebkitTransition",Lr="webkitTransitionEnd"),void 0===window.onanimationend&&void 0!==window.onwebkitanimationend&&(Nr="WebkitAnimation",Or="webkitAnimationEnd"));var Rr=z?window.requestAnimationFrame?window.requestAnimationFrame.bind(window):setTimeout:function(t){return t()};function Mr(t){Rr(function(){Rr(t)})}function Dr(t,e){var n=t._transitionClasses||(t._transitionClasses=[]);n.indexOf(e)<0&&(n.push(e),Ar(t,e))}function Pr(t,e){t._transitionClasses&&m(t._transitionClasses,e),Sr(t,e)}function kr(t,e,n){var r=Fr(t,e),i=r.type,o=r.timeout,a=r.propCount;if(!i)return n();var s=i===wr?Lr:Or,u=0,c=function(){t.removeEventListener(s,l),n()},l=function(e){e.target===t&&++u>=a&&c()};setTimeout(function(){u<a&&c()},o+1),t.addEventListener(s,l)}var Br=/\b(transform|all)(,|$)/;function Fr(t,e){var n,r=window.getComputedStyle(t),i=r[Ir+"Delay"].split(", "),o=r[Ir+"Duration"].split(", "),a=Vr(i,o),s=r[Nr+"Delay"].split(", "),u=r[Nr+"Duration"].split(", "),c=Vr(s,u),l=0,h=0;return e===wr?a>0&&(n=wr,l=a,h=o.length):e===Cr?c>0&&(n=Cr,l=c,h=u.length):h=(n=(l=Math.max(a,c))>0?a>c?wr:Cr:null)?n===wr?o.length:u.length:0,{type:n,timeout:l,propCount:h,hasTransform:n===wr&&Br.test(r[Ir+"Property"])}}function Vr(t,e){for(;t.length<e.length;)t=t.concat(t);return Math.max.apply(null,e.map(function(e,n){return Ur(e)+Ur(t[n])}))}function Ur(t){return 1e3*Number(t.slice(0,-1))}function Hr(t,e){var n=t.elm;o(n._leaveCb)&&(n._leaveCb.cancelled=!0,n._leaveCb());var r=Tr(t.data.transition);if(!i(r)&&!o(n._enterCb)&&1===n.nodeType){for(var a=r.css,s=r.type,c=r.enterClass,l=r.enterToClass,h=r.enterActiveClass,d=r.appearClass,f=r.appearToClass,g=r.appearActiveClass,v=r.beforeEnter,m=r.enter,y=r.afterEnter,_=r.enterCancelled,E=r.beforeAppear,A=r.appear,S=r.afterAppear,T=r.appearCancelled,x=r.duration,b=ye,w=ye.$vnode;w&&w.parent;)b=(w=w.parent).context;var C=!b._isMounted||!t.isRootInsert;if(!C||A||""===A){var I=C&&d?d:c,L=C&&g?g:h,N=C&&f?f:l,O=C&&E||v,R=C&&"function"==typeof A?A:m,M=C&&S||y,D=C&&T||_,k=p(u(x)?x.enter:x);0;var B=!1!==a&&!X,F=jr(R),V=n._enterCb=P(function(){B&&(Pr(n,N),Pr(n,L)),V.cancelled?(B&&Pr(n,I),D&&D(n)):M&&M(n),n._enterCb=null});t.data.show||oe(t,"insert",function(){var e=n.parentNode,r=e&&e._pending&&e._pending[t.key];r&&r.tag===t.tag&&r.elm._leaveCb&&r.elm._leaveCb(),R&&R(n,V)}),O&&O(n),B&&(Dr(n,I),Dr(n,L),Mr(function(){Dr(n,N),Pr(n,I),V.cancelled||F||(Gr(k)?setTimeout(V,k):kr(n,s,V))})),t.data.show&&(e&&e(),R&&R(n,V)),B||F||V()}}}function Yr(t,e){var n=t.elm;o(n._enterCb)&&(n._enterCb.cancelled=!0,n._enterCb());var r=Tr(t.data.transition);if(i(r)||1!==n.nodeType)return e();if(!o(n._leaveCb)){var a=r.css,s=r.type,c=r.leaveClass,l=r.leaveToClass,h=r.leaveActiveClass,d=r.beforeLeave,f=r.leave,g=r.afterLeave,v=r.leaveCancelled,m=r.delayLeave,y=r.duration,_=!1!==a&&!X,E=jr(f),A=p(u(y)?y.leave:y);0;var S=n._leaveCb=P(function(){n.parentNode&&n.parentNode._pending&&(n.parentNode._pending[t.key]=null),_&&(Pr(n,l),Pr(n,h)),S.cancelled?(_&&Pr(n,c),v&&v(n)):(e(),g&&g(n)),n._leaveCb=null});m?m(T):T()}function T(){S.cancelled||(t.data.show||((n.parentNode._pending||(n.parentNode._pending={}))[t.key]=t),d&&d(n),_&&(Dr(n,c),Dr(n,h),Mr(function(){Dr(n,l),Pr(n,c),S.cancelled||E||(Gr(A)?setTimeout(S,A):kr(n,s,S))})),f&&f(n,S),_||E||S())}}function Gr(t){return"number"==typeof t&&!isNaN(t)}function jr(t){if(i(t))return!1;var e=t.fns;return o(e)?jr(Array.isArray(e)?e[0]:e):(t._length||t.length)>1}function zr(t,e){!0!==e.data.show&&Hr(e)}var Wr=function(t){var e,n,r={},u=t.modules,c=t.nodeOps;for(e=0;e<Vn.length;++e)for(r[Vn[e]]=[],n=0;n<u.length;++n)o(u[n][Vn[e]])&&r[Vn[e]].push(u[n][Vn[e]]);function l(t){var e=c.parentNode(t);o(e)&&c.removeChild(e,t)}function h(t,e,n,i,s){if(t.isRootInsert=!s,!function(t,e,n,i){var s=t.data;if(o(s)){var u=o(t.componentInstance)&&s.keepAlive;if(o(s=s.hook)&&o(s=s.init)&&s(t,!1,n,i),o(t.componentInstance))return d(t,e),a(u)&&function(t,e,n,i){for(var a,s=t;s.componentInstance;)if(s=s.componentInstance._vnode,o(a=s.data)&&o(a=a.transition)){for(a=0;a<r.activate.length;++a)r.activate[a](Fn,s);e.push(s);break}f(n,t.elm,i)}(t,e,n,i),!0}}(t,e,n,i)){var u=t.data,l=t.children,h=t.tag;o(h)?(t.elm=t.ns?c.createElementNS(t.ns,h):c.createElement(h,t),y(t),p(t,l,e),o(u)&&m(t,e),f(n,t.elm,i)):a(t.isComment)?(t.elm=c.createComment(t.text),f(n,t.elm,i)):(t.elm=c.createTextNode(t.text),f(n,t.elm,i))}}function d(t,e){o(t.data.pendingInsert)&&(e.push.apply(e,t.data.pendingInsert),t.data.pendingInsert=null),t.elm=t.componentInstance.$el,v(t)?(m(t,e),y(t)):(Bn(t),e.push(t))}function f(t,e,n){o(t)&&(o(n)?n.parentNode===t&&c.insertBefore(t,e,n):c.appendChild(t,e))}function p(t,e,n){if(Array.isArray(e))for(var r=0;r<e.length;++r)h(e[r],n,t.elm,null,!0);else s(t.text)&&c.appendChild(t.elm,c.createTextNode(String(t.text)))}function v(t){for(;t.componentInstance;)t=t.componentInstance._vnode;return o(t.tag)}function m(t,n){for(var i=0;i<r.create.length;++i)r.create[i](Fn,t);o(e=t.data.hook)&&(o(e.create)&&e.create(Fn,t),o(e.insert)&&n.push(t))}function y(t){var e;if(o(e=t.fnScopeId))c.setAttribute(t.elm,e,"");else for(var n=t;n;)o(e=n.context)&&o(e=e.$options._scopeId)&&c.setAttribute(t.elm,e,""),n=n.parent;o(e=ye)&&e!==t.context&&e!==t.fnContext&&o(e=e.$options._scopeId)&&c.setAttribute(t.elm,e,"")}function _(t,e,n,r,i,o){for(;r<=i;++r)h(n[r],o,t,e)}function E(t){var e,n,i=t.data;if(o(i))for(o(e=i.hook)&&o(e=e.destroy)&&e(t),e=0;e<r.destroy.length;++e)r.destroy[e](t);if(o(e=t.children))for(n=0;n<t.children.length;++n)E(t.children[n])}function A(t,e,n,r){for(;n<=r;++n){var i=e[n];o(i)&&(o(i.tag)?(S(i),E(i)):l(i.elm))}}function S(t,e){if(o(e)||o(t.data)){var n,i=r.remove.length+1;for(o(e)?e.listeners+=i:e=function(t,e){function n(){0==--n.listeners&&l(t)}return n.listeners=e,n}(t.elm,i),o(n=t.componentInstance)&&o(n=n._vnode)&&o(n.data)&&S(n,e),n=0;n<r.remove.length;++n)r.remove[n](t,e);o(n=t.data.hook)&&o(n=n.remove)?n(t,e):e()}else l(t.elm)}function T(t,e,n,r){for(var i=n;i<r;i++){var a=e[i];if(o(a)&&Un(t,a))return i}}function x(t,e,n,s){if(t!==e){var u=e.elm=t.elm;if(a(t.isAsyncPlaceholder))o(e.asyncFactory.resolved)?C(t.elm,e,n):e.isAsyncPlaceholder=!0;else if(a(e.isStatic)&&a(t.isStatic)&&e.key===t.key&&(a(e.isCloned)||a(e.isOnce)))e.componentInstance=t.componentInstance;else{var l,d=e.data;o(d)&&o(l=d.hook)&&o(l=l.prepatch)&&l(t,e);var f=t.children,p=e.children;if(o(d)&&v(e)){for(l=0;l<r.update.length;++l)r.update[l](t,e);o(l=d.hook)&&o(l=l.update)&&l(t,e)}i(e.text)?o(f)&&o(p)?f!==p&&function(t,e,n,r,a){for(var s,u,l,d=0,f=0,p=e.length-1,g=e[0],v=e[p],m=n.length-1,y=n[0],E=n[m],S=!a;d<=p&&f<=m;)i(g)?g=e[++d]:i(v)?v=e[--p]:Un(g,y)?(x(g,y,r),g=e[++d],y=n[++f]):Un(v,E)?(x(v,E,r),v=e[--p],E=n[--m]):Un(g,E)?(x(g,E,r),S&&c.insertBefore(t,g.elm,c.nextSibling(v.elm)),g=e[++d],E=n[--m]):Un(v,y)?(x(v,y,r),S&&c.insertBefore(t,v.elm,g.elm),v=e[--p],y=n[++f]):(i(s)&&(s=Hn(e,d,p)),i(u=o(y.key)?s[y.key]:T(y,e,d,p))?h(y,r,t,g.elm):Un(l=e[u],y)?(x(l,y,r),e[u]=void 0,S&&c.insertBefore(t,l.elm,g.elm)):h(y,r,t,g.elm),y=n[++f]);d>p?_(t,i(n[m+1])?null:n[m+1].elm,n,f,m,r):f>m&&A(0,e,d,p)}(u,f,p,n,s):o(p)?(o(t.text)&&c.setTextContent(u,""),_(u,null,p,0,p.length-1,n)):o(f)?A(0,f,0,f.length-1):o(t.text)&&c.setTextContent(u,""):t.text!==e.text&&c.setTextContent(u,e.text),o(d)&&o(l=d.hook)&&o(l=l.postpatch)&&l(t,e)}}}function b(t,e,n){if(a(n)&&o(t.parent))t.parent.data.pendingInsert=e;else for(var r=0;r<e.length;++r)e[r].data.hook.insert(e[r])}var w=g("attrs,class,staticClass,staticStyle,key");function C(t,e,n,r){var i,s=e.tag,u=e.data,c=e.children;if(r=r||u&&u.pre,e.elm=t,a(e.isComment)&&o(e.asyncFactory))return e.isAsyncPlaceholder=!0,!0;if(o(u)&&(o(i=u.hook)&&o(i=i.init)&&i(e,!0),o(i=e.componentInstance)))return d(e,n),!0;if(o(s)){if(o(c))if(t.hasChildNodes())if(o(i=u)&&o(i=i.domProps)&&o(i=i.innerHTML)){if(i!==t.innerHTML)return!1}else{for(var l=!0,h=t.firstChild,f=0;f<c.length;f++){if(!h||!C(h,c[f],n,r)){l=!1;break}h=h.nextSibling}if(!l||h)return!1}else p(e,c,n);if(o(u)){var g=!1;for(var v in u)if(!w(v)){g=!0,m(e,n);break}!g&&u.class&&te(u.class)}}else t.data!==e.text&&(t.data=e.text);return!0}return function(t,e,n,s,u,l){if(!i(e)){var d,f=!1,p=[];if(i(t))f=!0,h(e,p,u,l);else{var g=o(t.nodeType);if(!g&&Un(t,e))x(t,e,p,s);else{if(g){if(1===t.nodeType&&t.hasAttribute(k)&&(t.removeAttribute(k),n=!0),a(n)&&C(t,e,p))return b(e,p,!0),t;d=t,t=new dt(c.tagName(d).toLowerCase(),{},[],void 0,d)}var m=t.elm,y=c.parentNode(m);if(h(e,p,m._leaveCb?null:y,c.nextSibling(m)),o(e.parent))for(var _=e.parent,S=v(e);_;){for(var T=0;T<r.destroy.length;++T)r.destroy[T](_);if(_.elm=e.elm,S){for(var w=0;w<r.create.length;++w)r.create[w](Fn,_);var I=_.data.hook.insert;if(I.merged)for(var L=1;L<I.fns.length;L++)I.fns[L]()}else Bn(_);_=_.parent}o(y)?A(0,[t],0,0):o(t.tag)&&E(t)}}return b(e,p,f),e.elm}o(t)&&E(t)}}({nodeOps:Pn,modules:[$n,tr,ar,cr,Er,z?{create:zr,activate:zr,remove:function(t,e){!0!==t.data.show?Yr(t,e):e()}}:{}].concat(Qn)});X&&document.addEventListener("selectionchange",function(){var t=document.activeElement;t&&t.vmodel&&ti(t,"input")});var Kr={inserted:function(t,e,n,r){"select"===n.tag?(r.elm&&!r.elm._vOptions?oe(n,"postpatch",function(){Kr.componentUpdated(t,e,n)}):Qr(t,e,n.context),t._vOptions=[].map.call(t.options,$r)):("textarea"===n.tag||Dn(t.type))&&(t._vModifiers=e.modifiers,e.modifiers.lazy||(t.addEventListener("change",Zr),J||(t.addEventListener("compositionstart",Jr),t.addEventListener("compositionend",Zr)),X&&(t.vmodel=!0)))},componentUpdated:function(t,e,n){if("select"===n.tag){Qr(t,e,n.context);var r=t._vOptions,i=t._vOptions=[].map.call(t.options,$r);if(i.some(function(t,e){return!M(t,r[e])}))(t.multiple?e.value.some(function(t){return Xr(t,i)}):e.value!==e.oldValue&&Xr(e.value,i))&&ti(t,"change")}}};function Qr(t,e,n){qr(t,e,n),(q||$)&&setTimeout(function(){qr(t,e,n)},0)}function qr(t,e,n){var r=e.value,i=t.multiple;if(!i||Array.isArray(r)){for(var o,a,s=0,u=t.options.length;s<u;s++)if(a=t.options[s],i)o=D(r,$r(a))>-1,a.selected!==o&&(a.selected=o);else if(M($r(a),r))return void(t.selectedIndex!==s&&(t.selectedIndex=s));i||(t.selectedIndex=-1)}}function Xr(t,e){return e.every(function(e){return!M(e,t)})}function $r(t){return"_value"in t?t._value:t.value}function Jr(t){t.target.composing=!0}function Zr(t){t.target.composing&&(t.target.composing=!1,ti(t.target,"input"))}function ti(t,e){var n=document.createEvent("HTMLEvents");n.initEvent(e,!0,!0),t.dispatchEvent(n)}function ei(t){return!t.componentInstance||t.data&&t.data.transition?t:ei(t.componentInstance._vnode)}var ni={model:Kr,show:{bind:function(t,e,n){var r=e.value,i=(n=ei(n)).data&&n.data.transition,o=t.__vOriginalDisplay="none"===t.style.display?"":t.style.display;r&&i?(n.data.show=!0,Hr(n,function(){t.style.display=o})):t.style.display=r?o:"none"},update:function(t,e,n){var r=e.value;r!==e.oldValue&&((n=ei(n)).data&&n.data.transition?(n.data.show=!0,r?Hr(n,function(){t.style.display=t.__vOriginalDisplay}):Yr(n,function(){t.style.display="none"})):t.style.display=r?t.__vOriginalDisplay:"none")},unbind:function(t,e,n,r,i){i||(t.style.display=t.__vOriginalDisplay)}}},ri={name:String,appear:Boolean,css:Boolean,mode:String,type:String,enterClass:String,leaveClass:String,enterToClass:String,leaveToClass:String,enterActiveClass:String,leaveActiveClass:String,appearClass:String,appearActiveClass:String,appearToClass:String,duration:[Number,String,Object]};function ii(t){var e=t&&t.componentOptions;return e&&e.Ctor.options.abstract?ii(he(e.children)):t}function oi(t){var e={},n=t.$options;for(var r in n.propsData)e[r]=t[r];var i=n._parentListeners;for(var o in i)e[S(o)]=i[o];return e}function ai(t,e){if(/\d-keep-alive$/.test(e.tag))return t("keep-alive",{props:e.componentOptions.propsData})}var si={name:"transition",props:ri,abstract:!0,render:function(t){var e=this,n=this.$slots.default;if(n&&(n=n.filter(function(t){return t.tag||le(t)})).length){0;var r=this.mode;0;var i=n[0];if(function(t){for(;t=t.parent;)if(t.data.transition)return!0}(this.$vnode))return i;var o=ii(i);if(!o)return i;if(this._leaving)return ai(t,i);var a="__transition-"+this._uid+"-";o.key=null==o.key?o.isComment?a+"comment":a+o.tag:s(o.key)?0===String(o.key).indexOf(a)?o.key:a+o.key:o.key;var u=(o.data||(o.data={})).transition=oi(this),c=this._vnode,l=ii(c);if(o.data.directives&&o.data.directives.some(function(t){return"show"===t.name})&&(o.data.show=!0),l&&l.data&&!function(t,e){return e.key===t.key&&e.tag===t.tag}(o,l)&&!le(l)&&(!l.componentInstance||!l.componentInstance._vnode.isComment)){var h=l.data.transition=I({},u);if("out-in"===r)return this._leaving=!0,oe(h,"afterLeave",function(){e._leaving=!1,e.$forceUpdate()}),ai(t,i);if("in-out"===r){if(le(o))return c;var d,f=function(){d()};oe(u,"afterEnter",f),oe(u,"enterCancelled",f),oe(h,"delayLeave",function(t){d=t})}}return i}}},ui=I({tag:String,moveClass:String},ri);function ci(t){t.elm._moveCb&&t.elm._moveCb(),t.elm._enterCb&&t.elm._enterCb()}function li(t){t.data.newPos=t.elm.getBoundingClientRect()}function hi(t){var e=t.data.pos,n=t.data.newPos,r=e.left-n.left,i=e.top-n.top;if(r||i){t.data.moved=!0;var o=t.elm.style;o.transform=o.WebkitTransform="translate("+r+"px,"+i+"px)",o.transitionDuration="0s"}}delete ui.mode;var di={Transition:si,TransitionGroup:{props:ui,render:function(t){for(var e=this.tag||this.$vnode.data.tag||"span",n=Object.create(null),r=this.prevChildren=this.children,i=this.$slots.default||[],o=this.children=[],a=oi(this),s=0;s<i.length;s++){var u=i[s];if(u.tag)if(null!=u.key&&0!==String(u.key).indexOf("__vlist"))o.push(u),n[u.key]=u,(u.data||(u.data={})).transition=a;else;}if(r){for(var c=[],l=[],h=0;h<r.length;h++){var d=r[h];d.data.transition=a,d.data.pos=d.elm.getBoundingClientRect(),n[d.key]?c.push(d):l.push(d)}this.kept=t(e,null,c),this.removed=l}return t(e,null,o)},beforeUpdate:function(){this.__patch__(this._vnode,this.kept,!1,!0),this._vnode=this.kept},updated:function(){var t=this.prevChildren,e=this.moveClass||(this.name||"v")+"-move";t.length&&this.hasMove(t[0].elm,e)&&(t.forEach(ci),t.forEach(li),t.forEach(hi),this._reflow=document.body.offsetHeight,t.forEach(function(t){if(t.data.moved){var n=t.elm,r=n.style;Dr(n,e),r.transform=r.WebkitTransform=r.transitionDuration="",n.addEventListener(Lr,n._moveCb=function t(r){r&&!/transform$/.test(r.propertyName)||(n.removeEventListener(Lr,t),n._moveCb=null,Pr(n,e))})}}))},methods:{hasMove:function(t,e){if(!br)return!1;if(this._hasMove)return this._hasMove;var n=t.cloneNode();t._transitionClasses&&t._transitionClasses.forEach(function(t){Sr(n,t)}),Ar(n,e),n.style.display="none",this.$el.appendChild(n);var r=Fr(n);return this.$el.removeChild(n),this._hasMove=r.hasTransform}}}};cn.config.mustUseProp=function(t,e,n){return"value"===n&&yn(t)&&"button"!==e||"selected"===n&&"option"===t||"checked"===n&&"input"===t||"muted"===n&&"video"===t},cn.config.isReservedTag=Rn,cn.config.isReservedAttr=mn,cn.config.getTagNamespace=function(t){return On(t)?"svg":"math"===t?"math":void 0},cn.config.isUnknownElement=function(t){if(!z)return!0;if(Rn(t))return!1;if(t=t.toLowerCase(),null!=Mn[t])return Mn[t];var e=document.createElement(t);return t.indexOf("-")>-1?Mn[t]=e.constructor===window.HTMLUnknownElement||e.constructor===window.HTMLElement:Mn[t]=/HTMLUnknownElement/.test(e.toString())},I(cn.options.directives,ni),I(cn.options.components,di),cn.prototype.__patch__=z?Wr:N,cn.prototype.$mount=function(t,e){return function(t,e,n){return t.$el=e,t.$options.render||(t.$options.render=pt),Ae(t,"beforeMount"),new Ne(t,function(){t._update(t._render(),n)},N,null,!0),n=!1,null==t.$vnode&&(t._isMounted=!0,Ae(t,"mounted")),t}(this,t=t&&z?function(t){if("string"==typeof t){var e=document.querySelector(t);return e||document.createElement("div")}return t}(t):void 0,e)},cn.nextTick(function(){V.devtools&&it&&it.emit("init",cn)},0),e.default=cn},function(t,e,n){t.exports={default:n(134),__esModule:!0}},function(t,e){t.exports=!0},function(t,e,n){n(147);for(var r=n(7),i=n(17),o=n(42),a=n(8)("toStringTag"),s="CSSRuleList,CSSStyleDeclaration,CSSValueList,ClientRectList,DOMRectList,DOMStringList,DOMTokenList,DataTransferItemList,FileList,HTMLAllCollection,HTMLCollection,HTMLFormElement,HTMLSelectElement,MediaList,MimeTypeArray,NamedNodeMap,NodeList,PaintRequestList,Plugin,PluginArray,SVGLengthList,SVGNumberList,SVGPathSegList,SVGPointList,SVGStringList,SVGTransformList,SourceBufferList,StyleSheetList,TextTrackCueList,TextTrackList,TouchList".split(","),u=0;u<s.length;u++){var c=s[u],l=r[c],h=l&&l.prototype;h&&!h[a]&&i(h,a,c),o[c]=o.Array}},function(t,e){t.exports=require("os")},function(t,e,n){"use strict";const r=n(9).fromCallback,i=n(174);t.exports={remove:r(i),removeSync:i.sync}},function(t,e,n){var r;r=function(t){var e,n,r,i,o;return n=(e=t).lib,r=n.Base,i=n.WordArray,(o=e.x64={}).Word=r.extend({init:function(t,e){this.high=t,this.low=e}}),o.WordArray=r.extend({init:function(t,e){t=this.words=t||[],this.sigBytes=void 0!=e?e:8*t.length},toX32:function(){for(var t=this.words,e=t.length,n=[],r=0;r<e;r++){var o=t[r];n.push(o.high),n.push(o.low)}return i.create(n,this.sigBytes)},clone:function(){for(var t=r.clone.call(this),e=t.words=this.words.slice(0),n=e.length,i=0;i<n;i++)e[i]=e[i].clone();return t}}),t},t.exports=r(n(0))},function(t,e,n){var r;!function(e,n){"use strict";"object"==typeof t&&"object"==typeof t.exports?t.exports=e.document?n(e,!0):function(t){if(!t.document)throw new Error("jQuery requires a window with a document");return n(t)}:n(e)}("undefined"!=typeof window?window:this,function(n,i){"use strict";var o=[],a=n.document,s=Object.getPrototypeOf,u=o.slice,c=o.concat,l=o.push,h=o.indexOf,d={},f=d.toString,p=d.hasOwnProperty,g=p.toString,v=g.call(Object),m={},y=function(t){return"function"==typeof t&&"number"!=typeof t.nodeType},_=function(t){return null!=t&&t===t.window},E={type:!0,src:!0,noModule:!0};function A(t,e,n){var r,i=(e=e||a).createElement("script");if(i.text=t,n)for(r in E)n[r]&&(i[r]=n[r]);e.head.appendChild(i).parentNode.removeChild(i)}function S(t){return null==t?t+"":"object"==typeof t||"function"==typeof t?d[f.call(t)]||"object":typeof t}var T=function(t,e){return new T.fn.init(t,e)},x=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g;function b(t){var e=!!t&&"length"in t&&t.length,n=S(t);return!y(t)&&!_(t)&&("array"===n||0===e||"number"==typeof e&&e>0&&e-1 in t)}T.fn=T.prototype={jquery:"3.3.1",constructor:T,length:0,toArray:function(){return u.call(this)},get:function(t){return null==t?u.call(this):t<0?this[t+this.length]:this[t]},pushStack:function(t){var e=T.merge(this.constructor(),t);return e.prevObject=this,e},each:function(t){return T.each(this,t)},map:function(t){return this.pushStack(T.map(this,function(e,n){return t.call(e,n,e)}))},slice:function(){return this.pushStack(u.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},eq:function(t){var e=this.length,n=+t+(t<0?e:0);return this.pushStack(n>=0&&n<e?[this[n]]:[])},end:function(){return this.prevObject||this.constructor()},push:l,sort:o.sort,splice:o.splice},T.extend=T.fn.extend=function(){var t,e,n,r,i,o,a=arguments[0]||{},s=1,u=arguments.length,c=!1;for("boolean"==typeof a&&(c=a,a=arguments[s]||{},s++),"object"==typeof a||y(a)||(a={}),s===u&&(a=this,s--);s<u;s++)if(null!=(t=arguments[s]))for(e in t)n=a[e],a!==(r=t[e])&&(c&&r&&(T.isPlainObject(r)||(i=Array.isArray(r)))?(i?(i=!1,o=n&&Array.isArray(n)?n:[]):o=n&&T.isPlainObject(n)?n:{},a[e]=T.extend(c,o,r)):void 0!==r&&(a[e]=r));return a},T.extend({expando:"jQuery"+("3.3.1"+Math.random()).replace(/\D/g,""),isReady:!0,error:function(t){throw new Error(t)},noop:function(){},isPlainObject:function(t){var e,n;return!(!t||"[object Object]"!==f.call(t))&&(!(e=s(t))||"function"==typeof(n=p.call(e,"constructor")&&e.constructor)&&g.call(n)===v)},isEmptyObject:function(t){var e;for(e in t)return!1;return!0},globalEval:function(t){A(t)},each:function(t,e){var n,r=0;if(b(t))for(n=t.length;r<n&&!1!==e.call(t[r],r,t[r]);r++);else for(r in t)if(!1===e.call(t[r],r,t[r]))break;return t},trim:function(t){return null==t?"":(t+"").replace(x,"")},makeArray:function(t,e){var n=e||[];return null!=t&&(b(Object(t))?T.merge(n,"string"==typeof t?[t]:t):l.call(n,t)),n},inArray:function(t,e,n){return null==e?-1:h.call(e,t,n)},merge:function(t,e){for(var n=+e.length,r=0,i=t.length;r<n;r++)t[i++]=e[r];return t.length=i,t},grep:function(t,e,n){for(var r=[],i=0,o=t.length,a=!n;i<o;i++)!e(t[i],i)!==a&&r.push(t[i]);return r},map:function(t,e,n){var r,i,o=0,a=[];if(b(t))for(r=t.length;o<r;o++)null!=(i=e(t[o],o,n))&&a.push(i);else for(o in t)null!=(i=e(t[o],o,n))&&a.push(i);return c.apply([],a)},guid:1,support:m}),"function"==typeof Symbol&&(T.fn[Symbol.iterator]=o[Symbol.iterator]),T.each("Boolean Number String Function Array Date RegExp Object Error Symbol".split(" "),function(t,e){d["[object "+e+"]"]=e.toLowerCase()});var w=function(t){var e,n,r,i,o,a,s,u,c,l,h,d,f,p,g,v,m,y,_,E="sizzle"+1*new Date,A=t.document,S=0,T=0,x=at(),b=at(),w=at(),C=function(t,e){return t===e&&(h=!0),0},I={}.hasOwnProperty,L=[],N=L.pop,O=L.push,R=L.push,M=L.slice,D=function(t,e){for(var n=0,r=t.length;n<r;n++)if(t[n]===e)return n;return-1},P="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",k="[\\x20\\t\\r\\n\\f]",B="(?:\\\\.|[\\w-]|[^\0-\\xa0])+",F="\\["+k+"*("+B+")(?:"+k+"*([*^$|!~]?=)"+k+"*(?:'((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\"|("+B+"))|)"+k+"*\\]",V=":("+B+")(?:\\((('((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\")|((?:\\\\.|[^\\\\()[\\]]|"+F+")*)|.*)\\)|)",U=new RegExp(k+"+","g"),H=new RegExp("^"+k+"+|((?:^|[^\\\\])(?:\\\\.)*)"+k+"+$","g"),Y=new RegExp("^"+k+"*,"+k+"*"),G=new RegExp("^"+k+"*([>+~]|"+k+")"+k+"*"),j=new RegExp("="+k+"*([^\\]'\"]*?)"+k+"*\\]","g"),z=new RegExp(V),W=new RegExp("^"+B+"$"),K={ID:new RegExp("^#("+B+")"),CLASS:new RegExp("^\\.("+B+")"),TAG:new RegExp("^("+B+"|[*])"),ATTR:new RegExp("^"+F),PSEUDO:new RegExp("^"+V),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+k+"*(even|odd|(([+-]|)(\\d*)n|)"+k+"*(?:([+-]|)"+k+"*(\\d+)|))"+k+"*\\)|)","i"),bool:new RegExp("^(?:"+P+")$","i"),needsContext:new RegExp("^"+k+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+k+"*((?:-\\d)?\\d*)"+k+"*\\)|)(?=[^-]|$)","i")},Q=/^(?:input|select|textarea|button)$/i,q=/^h\d$/i,X=/^[^{]+\{\s*\[native \w/,$=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,J=/[+~]/,Z=new RegExp("\\\\([\\da-f]{1,6}"+k+"?|("+k+")|.)","ig"),tt=function(t,e,n){var r="0x"+e-65536;return r!=r||n?e:r<0?String.fromCharCode(r+65536):String.fromCharCode(r>>10|55296,1023&r|56320)},et=/([\0-\x1f\x7f]|^-?\d)|^-$|[^\0-\x1f\x7f-\uFFFF\w-]/g,nt=function(t,e){return e?"\0"===t?"":t.slice(0,-1)+"\\"+t.charCodeAt(t.length-1).toString(16)+" ":"\\"+t},rt=function(){d()},it=yt(function(t){return!0===t.disabled&&("form"in t||"label"in t)},{dir:"parentNode",next:"legend"});try{R.apply(L=M.call(A.childNodes),A.childNodes),L[A.childNodes.length].nodeType}catch(t){R={apply:L.length?function(t,e){O.apply(t,M.call(e))}:function(t,e){for(var n=t.length,r=0;t[n++]=e[r++];);t.length=n-1}}}function ot(t,e,r,i){var o,s,c,l,h,p,m,y=e&&e.ownerDocument,S=e?e.nodeType:9;if(r=r||[],"string"!=typeof t||!t||1!==S&&9!==S&&11!==S)return r;if(!i&&((e?e.ownerDocument||e:A)!==f&&d(e),e=e||f,g)){if(11!==S&&(h=$.exec(t)))if(o=h[1]){if(9===S){if(!(c=e.getElementById(o)))return r;if(c.id===o)return r.push(c),r}else if(y&&(c=y.getElementById(o))&&_(e,c)&&c.id===o)return r.push(c),r}else{if(h[2])return R.apply(r,e.getElementsByTagName(t)),r;if((o=h[3])&&n.getElementsByClassName&&e.getElementsByClassName)return R.apply(r,e.getElementsByClassName(o)),r}if(n.qsa&&!w[t+" "]&&(!v||!v.test(t))){if(1!==S)y=e,m=t;else if("object"!==e.nodeName.toLowerCase()){for((l=e.getAttribute("id"))?l=l.replace(et,nt):e.setAttribute("id",l=E),s=(p=a(t)).length;s--;)p[s]="#"+l+" "+mt(p[s]);m=p.join(","),y=J.test(t)&&gt(e.parentNode)||e}if(m)try{return R.apply(r,y.querySelectorAll(m)),r}catch(t){}finally{l===E&&e.removeAttribute("id")}}}return u(t.replace(H,"$1"),e,r,i)}function at(){var t=[];return function e(n,i){return t.push(n+" ")>r.cacheLength&&delete e[t.shift()],e[n+" "]=i}}function st(t){return t[E]=!0,t}function ut(t){var e=f.createElement("fieldset");try{return!!t(e)}catch(t){return!1}finally{e.parentNode&&e.parentNode.removeChild(e),e=null}}function ct(t,e){for(var n=t.split("|"),i=n.length;i--;)r.attrHandle[n[i]]=e}function lt(t,e){var n=e&&t,r=n&&1===t.nodeType&&1===e.nodeType&&t.sourceIndex-e.sourceIndex;if(r)return r;if(n)for(;n=n.nextSibling;)if(n===e)return-1;return t?1:-1}function ht(t){return function(e){return"input"===e.nodeName.toLowerCase()&&e.type===t}}function dt(t){return function(e){var n=e.nodeName.toLowerCase();return("input"===n||"button"===n)&&e.type===t}}function ft(t){return function(e){return"form"in e?e.parentNode&&!1===e.disabled?"label"in e?"label"in e.parentNode?e.parentNode.disabled===t:e.disabled===t:e.isDisabled===t||e.isDisabled!==!t&&it(e)===t:e.disabled===t:"label"in e&&e.disabled===t}}function pt(t){return st(function(e){return e=+e,st(function(n,r){for(var i,o=t([],n.length,e),a=o.length;a--;)n[i=o[a]]&&(n[i]=!(r[i]=n[i]))})})}function gt(t){return t&&void 0!==t.getElementsByTagName&&t}for(e in n=ot.support={},o=ot.isXML=function(t){var e=t&&(t.ownerDocument||t).documentElement;return!!e&&"HTML"!==e.nodeName},d=ot.setDocument=function(t){var e,i,a=t?t.ownerDocument||t:A;return a!==f&&9===a.nodeType&&a.documentElement?(p=(f=a).documentElement,g=!o(f),A!==f&&(i=f.defaultView)&&i.top!==i&&(i.addEventListener?i.addEventListener("unload",rt,!1):i.attachEvent&&i.attachEvent("onunload",rt)),n.attributes=ut(function(t){return t.className="i",!t.getAttribute("className")}),n.getElementsByTagName=ut(function(t){return t.appendChild(f.createComment("")),!t.getElementsByTagName("*").length}),n.getElementsByClassName=X.test(f.getElementsByClassName),n.getById=ut(function(t){return p.appendChild(t).id=E,!f.getElementsByName||!f.getElementsByName(E).length}),n.getById?(r.filter.ID=function(t){var e=t.replace(Z,tt);return function(t){return t.getAttribute("id")===e}},r.find.ID=function(t,e){if(void 0!==e.getElementById&&g){var n=e.getElementById(t);return n?[n]:[]}}):(r.filter.ID=function(t){var e=t.replace(Z,tt);return function(t){var n=void 0!==t.getAttributeNode&&t.getAttributeNode("id");return n&&n.value===e}},r.find.ID=function(t,e){if(void 0!==e.getElementById&&g){var n,r,i,o=e.getElementById(t);if(o){if((n=o.getAttributeNode("id"))&&n.value===t)return[o];for(i=e.getElementsByName(t),r=0;o=i[r++];)if((n=o.getAttributeNode("id"))&&n.value===t)return[o]}return[]}}),r.find.TAG=n.getElementsByTagName?function(t,e){return void 0!==e.getElementsByTagName?e.getElementsByTagName(t):n.qsa?e.querySelectorAll(t):void 0}:function(t,e){var n,r=[],i=0,o=e.getElementsByTagName(t);if("*"===t){for(;n=o[i++];)1===n.nodeType&&r.push(n);return r}return o},r.find.CLASS=n.getElementsByClassName&&function(t,e){if(void 0!==e.getElementsByClassName&&g)return e.getElementsByClassName(t)},m=[],v=[],(n.qsa=X.test(f.querySelectorAll))&&(ut(function(t){p.appendChild(t).innerHTML="<a id='"+E+"'></a><select id='"+E+"-\r\\' msallowcapture=''><option selected=''></option></select>",t.querySelectorAll("[msallowcapture^='']").length&&v.push("[*^$]="+k+"*(?:''|\"\")"),t.querySelectorAll("[selected]").length||v.push("\\["+k+"*(?:value|"+P+")"),t.querySelectorAll("[id~="+E+"-]").length||v.push("~="),t.querySelectorAll(":checked").length||v.push(":checked"),t.querySelectorAll("a#"+E+"+*").length||v.push(".#.+[+~]")}),ut(function(t){t.innerHTML="<a href='' disabled='disabled'></a><select disabled='disabled'><option/></select>";var e=f.createElement("input");e.setAttribute("type","hidden"),t.appendChild(e).setAttribute("name","D"),t.querySelectorAll("[name=d]").length&&v.push("name"+k+"*[*^$|!~]?="),2!==t.querySelectorAll(":enabled").length&&v.push(":enabled",":disabled"),p.appendChild(t).disabled=!0,2!==t.querySelectorAll(":disabled").length&&v.push(":enabled",":disabled"),t.querySelectorAll("*,:x"),v.push(",.*:")})),(n.matchesSelector=X.test(y=p.matches||p.webkitMatchesSelector||p.mozMatchesSelector||p.oMatchesSelector||p.msMatchesSelector))&&ut(function(t){n.disconnectedMatch=y.call(t,"*"),y.call(t,"[s!='']:x"),m.push("!=",V)}),v=v.length&&new RegExp(v.join("|")),m=m.length&&new RegExp(m.join("|")),e=X.test(p.compareDocumentPosition),_=e||X.test(p.contains)?function(t,e){var n=9===t.nodeType?t.documentElement:t,r=e&&e.parentNode;return t===r||!(!r||1!==r.nodeType||!(n.contains?n.contains(r):t.compareDocumentPosition&&16&t.compareDocumentPosition(r)))}:function(t,e){if(e)for(;e=e.parentNode;)if(e===t)return!0;return!1},C=e?function(t,e){if(t===e)return h=!0,0;var r=!t.compareDocumentPosition-!e.compareDocumentPosition;return r||(1&(r=(t.ownerDocument||t)===(e.ownerDocument||e)?t.compareDocumentPosition(e):1)||!n.sortDetached&&e.compareDocumentPosition(t)===r?t===f||t.ownerDocument===A&&_(A,t)?-1:e===f||e.ownerDocument===A&&_(A,e)?1:l?D(l,t)-D(l,e):0:4&r?-1:1)}:function(t,e){if(t===e)return h=!0,0;var n,r=0,i=t.parentNode,o=e.parentNode,a=[t],s=[e];if(!i||!o)return t===f?-1:e===f?1:i?-1:o?1:l?D(l,t)-D(l,e):0;if(i===o)return lt(t,e);for(n=t;n=n.parentNode;)a.unshift(n);for(n=e;n=n.parentNode;)s.unshift(n);for(;a[r]===s[r];)r++;return r?lt(a[r],s[r]):a[r]===A?-1:s[r]===A?1:0},f):f},ot.matches=function(t,e){return ot(t,null,null,e)},ot.matchesSelector=function(t,e){if((t.ownerDocument||t)!==f&&d(t),e=e.replace(j,"='$1']"),n.matchesSelector&&g&&!w[e+" "]&&(!m||!m.test(e))&&(!v||!v.test(e)))try{var r=y.call(t,e);if(r||n.disconnectedMatch||t.document&&11!==t.document.nodeType)return r}catch(t){}return ot(e,f,null,[t]).length>0},ot.contains=function(t,e){return(t.ownerDocument||t)!==f&&d(t),_(t,e)},ot.attr=function(t,e){(t.ownerDocument||t)!==f&&d(t);var i=r.attrHandle[e.toLowerCase()],o=i&&I.call(r.attrHandle,e.toLowerCase())?i(t,e,!g):void 0;return void 0!==o?o:n.attributes||!g?t.getAttribute(e):(o=t.getAttributeNode(e))&&o.specified?o.value:null},ot.escape=function(t){return(t+"").replace(et,nt)},ot.error=function(t){throw new Error("Syntax error, unrecognized expression: "+t)},ot.uniqueSort=function(t){var e,r=[],i=0,o=0;if(h=!n.detectDuplicates,l=!n.sortStable&&t.slice(0),t.sort(C),h){for(;e=t[o++];)e===t[o]&&(i=r.push(o));for(;i--;)t.splice(r[i],1)}return l=null,t},i=ot.getText=function(t){var e,n="",r=0,o=t.nodeType;if(o){if(1===o||9===o||11===o){if("string"==typeof t.textContent)return t.textContent;for(t=t.firstChild;t;t=t.nextSibling)n+=i(t)}else if(3===o||4===o)return t.nodeValue}else for(;e=t[r++];)n+=i(e);return n},(r=ot.selectors={cacheLength:50,createPseudo:st,match:K,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(t){return t[1]=t[1].replace(Z,tt),t[3]=(t[3]||t[4]||t[5]||"").replace(Z,tt),"~="===t[2]&&(t[3]=" "+t[3]+" "),t.slice(0,4)},CHILD:function(t){return t[1]=t[1].toLowerCase(),"nth"===t[1].slice(0,3)?(t[3]||ot.error(t[0]),t[4]=+(t[4]?t[5]+(t[6]||1):2*("even"===t[3]||"odd"===t[3])),t[5]=+(t[7]+t[8]||"odd"===t[3])):t[3]&&ot.error(t[0]),t},PSEUDO:function(t){var e,n=!t[6]&&t[2];return K.CHILD.test(t[0])?null:(t[3]?t[2]=t[4]||t[5]||"":n&&z.test(n)&&(e=a(n,!0))&&(e=n.indexOf(")",n.length-e)-n.length)&&(t[0]=t[0].slice(0,e),t[2]=n.slice(0,e)),t.slice(0,3))}},filter:{TAG:function(t){var e=t.replace(Z,tt).toLowerCase();return"*"===t?function(){return!0}:function(t){return t.nodeName&&t.nodeName.toLowerCase()===e}},CLASS:function(t){var e=x[t+" "];return e||(e=new RegExp("(^|"+k+")"+t+"("+k+"|$)"))&&x(t,function(t){return e.test("string"==typeof t.className&&t.className||void 0!==t.getAttribute&&t.getAttribute("class")||"")})},ATTR:function(t,e,n){return function(r){var i=ot.attr(r,t);return null==i?"!="===e:!e||(i+="","="===e?i===n:"!="===e?i!==n:"^="===e?n&&0===i.indexOf(n):"*="===e?n&&i.indexOf(n)>-1:"$="===e?n&&i.slice(-n.length)===n:"~="===e?(" "+i.replace(U," ")+" ").indexOf(n)>-1:"|="===e&&(i===n||i.slice(0,n.length+1)===n+"-"))}},CHILD:function(t,e,n,r,i){var o="nth"!==t.slice(0,3),a="last"!==t.slice(-4),s="of-type"===e;return 1===r&&0===i?function(t){return!!t.parentNode}:function(e,n,u){var c,l,h,d,f,p,g=o!==a?"nextSibling":"previousSibling",v=e.parentNode,m=s&&e.nodeName.toLowerCase(),y=!u&&!s,_=!1;if(v){if(o){for(;g;){for(d=e;d=d[g];)if(s?d.nodeName.toLowerCase()===m:1===d.nodeType)return!1;p=g="only"===t&&!p&&"nextSibling"}return!0}if(p=[a?v.firstChild:v.lastChild],a&&y){for(_=(f=(c=(l=(h=(d=v)[E]||(d[E]={}))[d.uniqueID]||(h[d.uniqueID]={}))[t]||[])[0]===S&&c[1])&&c[2],d=f&&v.childNodes[f];d=++f&&d&&d[g]||(_=f=0)||p.pop();)if(1===d.nodeType&&++_&&d===e){l[t]=[S,f,_];break}}else if(y&&(_=f=(c=(l=(h=(d=e)[E]||(d[E]={}))[d.uniqueID]||(h[d.uniqueID]={}))[t]||[])[0]===S&&c[1]),!1===_)for(;(d=++f&&d&&d[g]||(_=f=0)||p.pop())&&((s?d.nodeName.toLowerCase()!==m:1!==d.nodeType)||!++_||(y&&((l=(h=d[E]||(d[E]={}))[d.uniqueID]||(h[d.uniqueID]={}))[t]=[S,_]),d!==e)););return(_-=i)===r||_%r==0&&_/r>=0}}},PSEUDO:function(t,e){var n,i=r.pseudos[t]||r.setFilters[t.toLowerCase()]||ot.error("unsupported pseudo: "+t);return i[E]?i(e):i.length>1?(n=[t,t,"",e],r.setFilters.hasOwnProperty(t.toLowerCase())?st(function(t,n){for(var r,o=i(t,e),a=o.length;a--;)t[r=D(t,o[a])]=!(n[r]=o[a])}):function(t){return i(t,0,n)}):i}},pseudos:{not:st(function(t){var e=[],n=[],r=s(t.replace(H,"$1"));return r[E]?st(function(t,e,n,i){for(var o,a=r(t,null,i,[]),s=t.length;s--;)(o=a[s])&&(t[s]=!(e[s]=o))}):function(t,i,o){return e[0]=t,r(e,null,o,n),e[0]=null,!n.pop()}}),has:st(function(t){return function(e){return ot(t,e).length>0}}),contains:st(function(t){return t=t.replace(Z,tt),function(e){return(e.textContent||e.innerText||i(e)).indexOf(t)>-1}}),lang:st(function(t){return W.test(t||"")||ot.error("unsupported lang: "+t),t=t.replace(Z,tt).toLowerCase(),function(e){var n;do{if(n=g?e.lang:e.getAttribute("xml:lang")||e.getAttribute("lang"))return(n=n.toLowerCase())===t||0===n.indexOf(t+"-")}while((e=e.parentNode)&&1===e.nodeType);return!1}}),target:function(e){var n=t.location&&t.location.hash;return n&&n.slice(1)===e.id},root:function(t){return t===p},focus:function(t){return t===f.activeElement&&(!f.hasFocus||f.hasFocus())&&!!(t.type||t.href||~t.tabIndex)},enabled:ft(!1),disabled:ft(!0),checked:function(t){var e=t.nodeName.toLowerCase();return"input"===e&&!!t.checked||"option"===e&&!!t.selected},selected:function(t){return t.parentNode&&t.parentNode.selectedIndex,!0===t.selected},empty:function(t){for(t=t.firstChild;t;t=t.nextSibling)if(t.nodeType<6)return!1;return!0},parent:function(t){return!r.pseudos.empty(t)},header:function(t){return q.test(t.nodeName)},input:function(t){return Q.test(t.nodeName)},button:function(t){var e=t.nodeName.toLowerCase();return"input"===e&&"button"===t.type||"button"===e},text:function(t){var e;return"input"===t.nodeName.toLowerCase()&&"text"===t.type&&(null==(e=t.getAttribute("type"))||"text"===e.toLowerCase())},first:pt(function(){return[0]}),last:pt(function(t,e){return[e-1]}),eq:pt(function(t,e,n){return[n<0?n+e:n]}),even:pt(function(t,e){for(var n=0;n<e;n+=2)t.push(n);return t}),odd:pt(function(t,e){for(var n=1;n<e;n+=2)t.push(n);return t}),lt:pt(function(t,e,n){for(var r=n<0?n+e:n;--r>=0;)t.push(r);return t}),gt:pt(function(t,e,n){for(var r=n<0?n+e:n;++r<e;)t.push(r);return t})}}).pseudos.nth=r.pseudos.eq,{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})r.pseudos[e]=ht(e);for(e in{submit:!0,reset:!0})r.pseudos[e]=dt(e);function vt(){}function mt(t){for(var e=0,n=t.length,r="";e<n;e++)r+=t[e].value;return r}function yt(t,e,n){var r=e.dir,i=e.next,o=i||r,a=n&&"parentNode"===o,s=T++;return e.first?function(e,n,i){for(;e=e[r];)if(1===e.nodeType||a)return t(e,n,i);return!1}:function(e,n,u){var c,l,h,d=[S,s];if(u){for(;e=e[r];)if((1===e.nodeType||a)&&t(e,n,u))return!0}else for(;e=e[r];)if(1===e.nodeType||a)if(l=(h=e[E]||(e[E]={}))[e.uniqueID]||(h[e.uniqueID]={}),i&&i===e.nodeName.toLowerCase())e=e[r]||e;else{if((c=l[o])&&c[0]===S&&c[1]===s)return d[2]=c[2];if(l[o]=d,d[2]=t(e,n,u))return!0}return!1}}function _t(t){return t.length>1?function(e,n,r){for(var i=t.length;i--;)if(!t[i](e,n,r))return!1;return!0}:t[0]}function Et(t,e,n,r,i){for(var o,a=[],s=0,u=t.length,c=null!=e;s<u;s++)(o=t[s])&&(n&&!n(o,r,i)||(a.push(o),c&&e.push(s)));return a}function At(t,e,n,r,i,o){return r&&!r[E]&&(r=At(r)),i&&!i[E]&&(i=At(i,o)),st(function(o,a,s,u){var c,l,h,d=[],f=[],p=a.length,g=o||function(t,e,n){for(var r=0,i=e.length;r<i;r++)ot(t,e[r],n);return n}(e||"*",s.nodeType?[s]:s,[]),v=!t||!o&&e?g:Et(g,d,t,s,u),m=n?i||(o?t:p||r)?[]:a:v;if(n&&n(v,m,s,u),r)for(c=Et(m,f),r(c,[],s,u),l=c.length;l--;)(h=c[l])&&(m[f[l]]=!(v[f[l]]=h));if(o){if(i||t){if(i){for(c=[],l=m.length;l--;)(h=m[l])&&c.push(v[l]=h);i(null,m=[],c,u)}for(l=m.length;l--;)(h=m[l])&&(c=i?D(o,h):d[l])>-1&&(o[c]=!(a[c]=h))}}else m=Et(m===a?m.splice(p,m.length):m),i?i(null,a,m,u):R.apply(a,m)})}function St(t){for(var e,n,i,o=t.length,a=r.relative[t[0].type],s=a||r.relative[" "],u=a?1:0,l=yt(function(t){return t===e},s,!0),h=yt(function(t){return D(e,t)>-1},s,!0),d=[function(t,n,r){var i=!a&&(r||n!==c)||((e=n).nodeType?l(t,n,r):h(t,n,r));return e=null,i}];u<o;u++)if(n=r.relative[t[u].type])d=[yt(_t(d),n)];else{if((n=r.filter[t[u].type].apply(null,t[u].matches))[E]){for(i=++u;i<o&&!r.relative[t[i].type];i++);return At(u>1&&_t(d),u>1&&mt(t.slice(0,u-1).concat({value:" "===t[u-2].type?"*":""})).replace(H,"$1"),n,u<i&&St(t.slice(u,i)),i<o&&St(t=t.slice(i)),i<o&&mt(t))}d.push(n)}return _t(d)}return vt.prototype=r.filters=r.pseudos,r.setFilters=new vt,a=ot.tokenize=function(t,e){var n,i,o,a,s,u,c,l=b[t+" "];if(l)return e?0:l.slice(0);for(s=t,u=[],c=r.preFilter;s;){for(a in n&&!(i=Y.exec(s))||(i&&(s=s.slice(i[0].length)||s),u.push(o=[])),n=!1,(i=G.exec(s))&&(n=i.shift(),o.push({value:n,type:i[0].replace(H," ")}),s=s.slice(n.length)),r.filter)!(i=K[a].exec(s))||c[a]&&!(i=c[a](i))||(n=i.shift(),o.push({value:n,type:a,matches:i}),s=s.slice(n.length));if(!n)break}return e?s.length:s?ot.error(t):b(t,u).slice(0)},s=ot.compile=function(t,e){var n,i=[],o=[],s=w[t+" "];if(!s){for(e||(e=a(t)),n=e.length;n--;)(s=St(e[n]))[E]?i.push(s):o.push(s);(s=w(t,function(t,e){var n=e.length>0,i=t.length>0,o=function(o,a,s,u,l){var h,p,v,m=0,y="0",_=o&&[],E=[],A=c,T=o||i&&r.find.TAG("*",l),x=S+=null==A?1:Math.random()||.1,b=T.length;for(l&&(c=a===f||a||l);y!==b&&null!=(h=T[y]);y++){if(i&&h){for(p=0,a||h.ownerDocument===f||(d(h),s=!g);v=t[p++];)if(v(h,a||f,s)){u.push(h);break}l&&(S=x)}n&&((h=!v&&h)&&m--,o&&_.push(h))}if(m+=y,n&&y!==m){for(p=0;v=e[p++];)v(_,E,a,s);if(o){if(m>0)for(;y--;)_[y]||E[y]||(E[y]=N.call(u));E=Et(E)}R.apply(u,E),l&&!o&&E.length>0&&m+e.length>1&&ot.uniqueSort(u)}return l&&(S=x,c=A),_};return n?st(o):o}(o,i))).selector=t}return s},u=ot.select=function(t,e,n,i){var o,u,c,l,h,d="function"==typeof t&&t,f=!i&&a(t=d.selector||t);if(n=n||[],1===f.length){if((u=f[0]=f[0].slice(0)).length>2&&"ID"===(c=u[0]).type&&9===e.nodeType&&g&&r.relative[u[1].type]){if(!(e=(r.find.ID(c.matches[0].replace(Z,tt),e)||[])[0]))return n;d&&(e=e.parentNode),t=t.slice(u.shift().value.length)}for(o=K.needsContext.test(t)?0:u.length;o--&&(c=u[o],!r.relative[l=c.type]);)if((h=r.find[l])&&(i=h(c.matches[0].replace(Z,tt),J.test(u[0].type)&&gt(e.parentNode)||e))){if(u.splice(o,1),!(t=i.length&&mt(u)))return R.apply(n,i),n;break}}return(d||s(t,f))(i,e,!g,n,!e||J.test(t)&&gt(e.parentNode)||e),n},n.sortStable=E.split("").sort(C).join("")===E,n.detectDuplicates=!!h,d(),n.sortDetached=ut(function(t){return 1&t.compareDocumentPosition(f.createElement("fieldset"))}),ut(function(t){return t.innerHTML="<a href='#'></a>","#"===t.firstChild.getAttribute("href")})||ct("type|href|height|width",function(t,e,n){if(!n)return t.getAttribute(e,"type"===e.toLowerCase()?1:2)}),n.attributes&&ut(function(t){return t.innerHTML="<input/>",t.firstChild.setAttribute("value",""),""===t.firstChild.getAttribute("value")})||ct("value",function(t,e,n){if(!n&&"input"===t.nodeName.toLowerCase())return t.defaultValue}),ut(function(t){return null==t.getAttribute("disabled")})||ct(P,function(t,e,n){var r;if(!n)return!0===t[e]?e.toLowerCase():(r=t.getAttributeNode(e))&&r.specified?r.value:null}),ot}(n);T.find=w,T.expr=w.selectors,T.expr[":"]=T.expr.pseudos,T.uniqueSort=T.unique=w.uniqueSort,T.text=w.getText,T.isXMLDoc=w.isXML,T.contains=w.contains,T.escapeSelector=w.escape;var C=function(t,e,n){for(var r=[],i=void 0!==n;(t=t[e])&&9!==t.nodeType;)if(1===t.nodeType){if(i&&T(t).is(n))break;r.push(t)}return r},I=function(t,e){for(var n=[];t;t=t.nextSibling)1===t.nodeType&&t!==e&&n.push(t);return n},L=T.expr.match.needsContext;function N(t,e){return t.nodeName&&t.nodeName.toLowerCase()===e.toLowerCase()}var O=/^<([a-z][^\/\0>:\x20\t\r\n\f]*)[\x20\t\r\n\f]*\/?>(?:<\/\1>|)$/i;function R(t,e,n){return y(e)?T.grep(t,function(t,r){return!!e.call(t,r,t)!==n}):e.nodeType?T.grep(t,function(t){return t===e!==n}):"string"!=typeof e?T.grep(t,function(t){return h.call(e,t)>-1!==n}):T.filter(e,t,n)}T.filter=function(t,e,n){var r=e[0];return n&&(t=":not("+t+")"),1===e.length&&1===r.nodeType?T.find.matchesSelector(r,t)?[r]:[]:T.find.matches(t,T.grep(e,function(t){return 1===t.nodeType}))},T.fn.extend({find:function(t){var e,n,r=this.length,i=this;if("string"!=typeof t)return this.pushStack(T(t).filter(function(){for(e=0;e<r;e++)if(T.contains(i[e],this))return!0}));for(n=this.pushStack([]),e=0;e<r;e++)T.find(t,i[e],n);return r>1?T.uniqueSort(n):n},filter:function(t){return this.pushStack(R(this,t||[],!1))},not:function(t){return this.pushStack(R(this,t||[],!0))},is:function(t){return!!R(this,"string"==typeof t&&L.test(t)?T(t):t||[],!1).length}});var M,D=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]+))$/;(T.fn.init=function(t,e,n){var r,i;if(!t)return this;if(n=n||M,"string"==typeof t){if(!(r="<"===t[0]&&">"===t[t.length-1]&&t.length>=3?[null,t,null]:D.exec(t))||!r[1]&&e)return!e||e.jquery?(e||n).find(t):this.constructor(e).find(t);if(r[1]){if(e=e instanceof T?e[0]:e,T.merge(this,T.parseHTML(r[1],e&&e.nodeType?e.ownerDocument||e:a,!0)),O.test(r[1])&&T.isPlainObject(e))for(r in e)y(this[r])?this[r](e[r]):this.attr(r,e[r]);return this}return(i=a.getElementById(r[2]))&&(this[0]=i,this.length=1),this}return t.nodeType?(this[0]=t,this.length=1,this):y(t)?void 0!==n.ready?n.ready(t):t(T):T.makeArray(t,this)}).prototype=T.fn,M=T(a);var P=/^(?:parents|prev(?:Until|All))/,k={children:!0,contents:!0,next:!0,prev:!0};function B(t,e){for(;(t=t[e])&&1!==t.nodeType;);return t}T.fn.extend({has:function(t){var e=T(t,this),n=e.length;return this.filter(function(){for(var t=0;t<n;t++)if(T.contains(this,e[t]))return!0})},closest:function(t,e){var n,r=0,i=this.length,o=[],a="string"!=typeof t&&T(t);if(!L.test(t))for(;r<i;r++)for(n=this[r];n&&n!==e;n=n.parentNode)if(n.nodeType<11&&(a?a.index(n)>-1:1===n.nodeType&&T.find.matchesSelector(n,t))){o.push(n);break}return this.pushStack(o.length>1?T.uniqueSort(o):o)},index:function(t){return t?"string"==typeof t?h.call(T(t),this[0]):h.call(this,t.jquery?t[0]:t):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(t,e){return this.pushStack(T.uniqueSort(T.merge(this.get(),T(t,e))))},addBack:function(t){return this.add(null==t?this.prevObject:this.prevObject.filter(t))}}),T.each({parent:function(t){var e=t.parentNode;return e&&11!==e.nodeType?e:null},parents:function(t){return C(t,"parentNode")},parentsUntil:function(t,e,n){return C(t,"parentNode",n)},next:function(t){return B(t,"nextSibling")},prev:function(t){return B(t,"previousSibling")},nextAll:function(t){return C(t,"nextSibling")},prevAll:function(t){return C(t,"previousSibling")},nextUntil:function(t,e,n){return C(t,"nextSibling",n)},prevUntil:function(t,e,n){return C(t,"previousSibling",n)},siblings:function(t){return I((t.parentNode||{}).firstChild,t)},children:function(t){return I(t.firstChild)},contents:function(t){return N(t,"iframe")?t.contentDocument:(N(t,"template")&&(t=t.content||t),T.merge([],t.childNodes))}},function(t,e){T.fn[t]=function(n,r){var i=T.map(this,e,n);return"Until"!==t.slice(-5)&&(r=n),r&&"string"==typeof r&&(i=T.filter(r,i)),this.length>1&&(k[t]||T.uniqueSort(i),P.test(t)&&i.reverse()),this.pushStack(i)}});var F=/[^\x20\t\r\n\f]+/g;function V(t){return t}function U(t){throw t}function H(t,e,n,r){var i;try{t&&y(i=t.promise)?i.call(t).done(e).fail(n):t&&y(i=t.then)?i.call(t,e,n):e.apply(void 0,[t].slice(r))}catch(t){n.apply(void 0,[t])}}T.Callbacks=function(t){t="string"==typeof t?function(t){var e={};return T.each(t.match(F)||[],function(t,n){e[n]=!0}),e}(t):T.extend({},t);var e,n,r,i,o=[],a=[],s=-1,u=function(){for(i=i||t.once,r=e=!0;a.length;s=-1)for(n=a.shift();++s<o.length;)!1===o[s].apply(n[0],n[1])&&t.stopOnFalse&&(s=o.length,n=!1);t.memory||(n=!1),e=!1,i&&(o=n?[]:"")},c={add:function(){return o&&(n&&!e&&(s=o.length-1,a.push(n)),function e(n){T.each(n,function(n,r){y(r)?t.unique&&c.has(r)||o.push(r):r&&r.length&&"string"!==S(r)&&e(r)})}(arguments),n&&!e&&u()),this},remove:function(){return T.each(arguments,function(t,e){for(var n;(n=T.inArray(e,o,n))>-1;)o.splice(n,1),n<=s&&s--}),this},has:function(t){return t?T.inArray(t,o)>-1:o.length>0},empty:function(){return o&&(o=[]),this},disable:function(){return i=a=[],o=n="",this},disabled:function(){return!o},lock:function(){return i=a=[],n||e||(o=n=""),this},locked:function(){return!!i},fireWith:function(t,n){return i||(n=[t,(n=n||[]).slice?n.slice():n],a.push(n),e||u()),this},fire:function(){return c.fireWith(this,arguments),this},fired:function(){return!!r}};return c},T.extend({Deferred:function(t){var e=[["notify","progress",T.Callbacks("memory"),T.Callbacks("memory"),2],["resolve","done",T.Callbacks("once memory"),T.Callbacks("once memory"),0,"resolved"],["reject","fail",T.Callbacks("once memory"),T.Callbacks("once memory"),1,"rejected"]],r="pending",i={state:function(){return r},always:function(){return o.done(arguments).fail(arguments),this},catch:function(t){return i.then(null,t)},pipe:function(){var t=arguments;return T.Deferred(function(n){T.each(e,function(e,r){var i=y(t[r[4]])&&t[r[4]];o[r[1]](function(){var t=i&&i.apply(this,arguments);t&&y(t.promise)?t.promise().progress(n.notify).done(n.resolve).fail(n.reject):n[r[0]+"With"](this,i?[t]:arguments)})}),t=null}).promise()},then:function(t,r,i){var o=0;function a(t,e,r,i){return function(){var s=this,u=arguments,c=function(){var n,c;if(!(t<o)){if((n=r.apply(s,u))===e.promise())throw new TypeError("Thenable self-resolution");c=n&&("object"==typeof n||"function"==typeof n)&&n.then,y(c)?i?c.call(n,a(o,e,V,i),a(o,e,U,i)):(o++,c.call(n,a(o,e,V,i),a(o,e,U,i),a(o,e,V,e.notifyWith))):(r!==V&&(s=void 0,u=[n]),(i||e.resolveWith)(s,u))}},l=i?c:function(){try{c()}catch(n){T.Deferred.exceptionHook&&T.Deferred.exceptionHook(n,l.stackTrace),t+1>=o&&(r!==U&&(s=void 0,u=[n]),e.rejectWith(s,u))}};t?l():(T.Deferred.getStackHook&&(l.stackTrace=T.Deferred.getStackHook()),n.setTimeout(l))}}return T.Deferred(function(n){e[0][3].add(a(0,n,y(i)?i:V,n.notifyWith)),e[1][3].add(a(0,n,y(t)?t:V)),e[2][3].add(a(0,n,y(r)?r:U))}).promise()},promise:function(t){return null!=t?T.extend(t,i):i}},o={};return T.each(e,function(t,n){var a=n[2],s=n[5];i[n[1]]=a.add,s&&a.add(function(){r=s},e[3-t][2].disable,e[3-t][3].disable,e[0][2].lock,e[0][3].lock),a.add(n[3].fire),o[n[0]]=function(){return o[n[0]+"With"](this===o?void 0:this,arguments),this},o[n[0]+"With"]=a.fireWith}),i.promise(o),t&&t.call(o,o),o},when:function(t){var e=arguments.length,n=e,r=Array(n),i=u.call(arguments),o=T.Deferred(),a=function(t){return function(n){r[t]=this,i[t]=arguments.length>1?u.call(arguments):n,--e||o.resolveWith(r,i)}};if(e<=1&&(H(t,o.done(a(n)).resolve,o.reject,!e),"pending"===o.state()||y(i[n]&&i[n].then)))return o.then();for(;n--;)H(i[n],a(n),o.reject);return o.promise()}});var Y=/^(Eval|Internal|Range|Reference|Syntax|Type|URI)Error$/;T.Deferred.exceptionHook=function(t,e){n.console&&n.console.warn&&t&&Y.test(t.name)&&n.console.warn("jQuery.Deferred exception: "+t.message,t.stack,e)},T.readyException=function(t){n.setTimeout(function(){throw t})};var G=T.Deferred();function j(){a.removeEventListener("DOMContentLoaded",j),n.removeEventListener("load",j),T.ready()}T.fn.ready=function(t){return G.then(t).catch(function(t){T.readyException(t)}),this},T.extend({isReady:!1,readyWait:1,ready:function(t){(!0===t?--T.readyWait:T.isReady)||(T.isReady=!0,!0!==t&&--T.readyWait>0||G.resolveWith(a,[T]))}}),T.ready.then=G.then,"complete"===a.readyState||"loading"!==a.readyState&&!a.documentElement.doScroll?n.setTimeout(T.ready):(a.addEventListener("DOMContentLoaded",j),n.addEventListener("load",j));var z=function(t,e,n,r,i,o,a){var s=0,u=t.length,c=null==n;if("object"===S(n))for(s in i=!0,n)z(t,e,s,n[s],!0,o,a);else if(void 0!==r&&(i=!0,y(r)||(a=!0),c&&(a?(e.call(t,r),e=null):(c=e,e=function(t,e,n){return c.call(T(t),n)})),e))for(;s<u;s++)e(t[s],n,a?r:r.call(t[s],s,e(t[s],n)));return i?t:c?e.call(t):u?e(t[0],n):o},W=/^-ms-/,K=/-([a-z])/g;function Q(t,e){return e.toUpperCase()}function q(t){return t.replace(W,"ms-").replace(K,Q)}var X=function(t){return 1===t.nodeType||9===t.nodeType||!+t.nodeType};function $(){this.expando=T.expando+$.uid++}$.uid=1,$.prototype={cache:function(t){var e=t[this.expando];return e||(e={},X(t)&&(t.nodeType?t[this.expando]=e:Object.defineProperty(t,this.expando,{value:e,configurable:!0}))),e},set:function(t,e,n){var r,i=this.cache(t);if("string"==typeof e)i[q(e)]=n;else for(r in e)i[q(r)]=e[r];return i},get:function(t,e){return void 0===e?this.cache(t):t[this.expando]&&t[this.expando][q(e)]},access:function(t,e,n){return void 0===e||e&&"string"==typeof e&&void 0===n?this.get(t,e):(this.set(t,e,n),void 0!==n?n:e)},remove:function(t,e){var n,r=t[this.expando];if(void 0!==r){if(void 0!==e){n=(e=Array.isArray(e)?e.map(q):(e=q(e))in r?[e]:e.match(F)||[]).length;for(;n--;)delete r[e[n]]}(void 0===e||T.isEmptyObject(r))&&(t.nodeType?t[this.expando]=void 0:delete t[this.expando])}},hasData:function(t){var e=t[this.expando];return void 0!==e&&!T.isEmptyObject(e)}};var J=new $,Z=new $,tt=/^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,et=/[A-Z]/g;function nt(t,e,n){var r;if(void 0===n&&1===t.nodeType)if(r="data-"+e.replace(et,"-$&").toLowerCase(),"string"==typeof(n=t.getAttribute(r))){try{n=function(t){return"true"===t||"false"!==t&&("null"===t?null:t===+t+""?+t:tt.test(t)?JSON.parse(t):t)}(n)}catch(t){}Z.set(t,e,n)}else n=void 0;return n}T.extend({hasData:function(t){return Z.hasData(t)||J.hasData(t)},data:function(t,e,n){return Z.access(t,e,n)},removeData:function(t,e){Z.remove(t,e)},_data:function(t,e,n){return J.access(t,e,n)},_removeData:function(t,e){J.remove(t,e)}}),T.fn.extend({data:function(t,e){var n,r,i,o=this[0],a=o&&o.attributes;if(void 0===t){if(this.length&&(i=Z.get(o),1===o.nodeType&&!J.get(o,"hasDataAttrs"))){for(n=a.length;n--;)a[n]&&0===(r=a[n].name).indexOf("data-")&&(r=q(r.slice(5)),nt(o,r,i[r]));J.set(o,"hasDataAttrs",!0)}return i}return"object"==typeof t?this.each(function(){Z.set(this,t)}):z(this,function(e){var n;if(o&&void 0===e)return void 0!==(n=Z.get(o,t))?n:void 0!==(n=nt(o,t))?n:void 0;this.each(function(){Z.set(this,t,e)})},null,e,arguments.length>1,null,!0)},removeData:function(t){return this.each(function(){Z.remove(this,t)})}}),T.extend({queue:function(t,e,n){var r;if(t)return e=(e||"fx")+"queue",r=J.get(t,e),n&&(!r||Array.isArray(n)?r=J.access(t,e,T.makeArray(n)):r.push(n)),r||[]},dequeue:function(t,e){e=e||"fx";var n=T.queue(t,e),r=n.length,i=n.shift(),o=T._queueHooks(t,e);"inprogress"===i&&(i=n.shift(),r--),i&&("fx"===e&&n.unshift("inprogress"),delete o.stop,i.call(t,function(){T.dequeue(t,e)},o)),!r&&o&&o.empty.fire()},_queueHooks:function(t,e){var n=e+"queueHooks";return J.get(t,n)||J.access(t,n,{empty:T.Callbacks("once memory").add(function(){J.remove(t,[e+"queue",n])})})}}),T.fn.extend({queue:function(t,e){var n=2;return"string"!=typeof t&&(e=t,t="fx",n--),arguments.length<n?T.queue(this[0],t):void 0===e?this:this.each(function(){var n=T.queue(this,t,e);T._queueHooks(this,t),"fx"===t&&"inprogress"!==n[0]&&T.dequeue(this,t)})},dequeue:function(t){return this.each(function(){T.dequeue(this,t)})},clearQueue:function(t){return this.queue(t||"fx",[])},promise:function(t,e){var n,r=1,i=T.Deferred(),o=this,a=this.length,s=function(){--r||i.resolveWith(o,[o])};for("string"!=typeof t&&(e=t,t=void 0),t=t||"fx";a--;)(n=J.get(o[a],t+"queueHooks"))&&n.empty&&(r++,n.empty.add(s));return s(),i.promise(e)}});var rt=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,it=new RegExp("^(?:([+-])=|)("+rt+")([a-z%]*)$","i"),ot=["Top","Right","Bottom","Left"],at=function(t,e){return"none"===(t=e||t).style.display||""===t.style.display&&T.contains(t.ownerDocument,t)&&"none"===T.css(t,"display")},st=function(t,e,n,r){var i,o,a={};for(o in e)a[o]=t.style[o],t.style[o]=e[o];for(o in i=n.apply(t,r||[]),e)t.style[o]=a[o];return i};function ut(t,e,n,r){var i,o,a=20,s=r?function(){return r.cur()}:function(){return T.css(t,e,"")},u=s(),c=n&&n[3]||(T.cssNumber[e]?"":"px"),l=(T.cssNumber[e]||"px"!==c&&+u)&&it.exec(T.css(t,e));if(l&&l[3]!==c){for(u/=2,c=c||l[3],l=+u||1;a--;)T.style(t,e,l+c),(1-o)*(1-(o=s()/u||.5))<=0&&(a=0),l/=o;l*=2,T.style(t,e,l+c),n=n||[]}return n&&(l=+l||+u||0,i=n[1]?l+(n[1]+1)*n[2]:+n[2],r&&(r.unit=c,r.start=l,r.end=i)),i}var ct={};function lt(t){var e,n=t.ownerDocument,r=t.nodeName,i=ct[r];return i||(e=n.body.appendChild(n.createElement(r)),i=T.css(e,"display"),e.parentNode.removeChild(e),"none"===i&&(i="block"),ct[r]=i,i)}function ht(t,e){for(var n,r,i=[],o=0,a=t.length;o<a;o++)(r=t[o]).style&&(n=r.style.display,e?("none"===n&&(i[o]=J.get(r,"display")||null,i[o]||(r.style.display="")),""===r.style.display&&at(r)&&(i[o]=lt(r))):"none"!==n&&(i[o]="none",J.set(r,"display",n)));for(o=0;o<a;o++)null!=i[o]&&(t[o].style.display=i[o]);return t}T.fn.extend({show:function(){return ht(this,!0)},hide:function(){return ht(this)},toggle:function(t){return"boolean"==typeof t?t?this.show():this.hide():this.each(function(){at(this)?T(this).show():T(this).hide()})}});var dt=/^(?:checkbox|radio)$/i,ft=/<([a-z][^\/\0>\x20\t\r\n\f]+)/i,pt=/^$|^module$|\/(?:java|ecma)script/i,gt={option:[1,"<select multiple='multiple'>","</select>"],thead:[1,"<table>","</table>"],col:[2,"<table><colgroup>","</colgroup></table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:[0,"",""]};function vt(t,e){var n;return n=void 0!==t.getElementsByTagName?t.getElementsByTagName(e||"*"):void 0!==t.querySelectorAll?t.querySelectorAll(e||"*"):[],void 0===e||e&&N(t,e)?T.merge([t],n):n}function mt(t,e){for(var n=0,r=t.length;n<r;n++)J.set(t[n],"globalEval",!e||J.get(e[n],"globalEval"))}gt.optgroup=gt.option,gt.tbody=gt.tfoot=gt.colgroup=gt.caption=gt.thead,gt.th=gt.td;var yt,_t,Et=/<|&#?\w+;/;function At(t,e,n,r,i){for(var o,a,s,u,c,l,h=e.createDocumentFragment(),d=[],f=0,p=t.length;f<p;f++)if((o=t[f])||0===o)if("object"===S(o))T.merge(d,o.nodeType?[o]:o);else if(Et.test(o)){for(a=a||h.appendChild(e.createElement("div")),s=(ft.exec(o)||["",""])[1].toLowerCase(),u=gt[s]||gt._default,a.innerHTML=u[1]+T.htmlPrefilter(o)+u[2],l=u[0];l--;)a=a.lastChild;T.merge(d,a.childNodes),(a=h.firstChild).textContent=""}else d.push(e.createTextNode(o));for(h.textContent="",f=0;o=d[f++];)if(r&&T.inArray(o,r)>-1)i&&i.push(o);else if(c=T.contains(o.ownerDocument,o),a=vt(h.appendChild(o),"script"),c&&mt(a),n)for(l=0;o=a[l++];)pt.test(o.type||"")&&n.push(o);return h}yt=a.createDocumentFragment().appendChild(a.createElement("div")),(_t=a.createElement("input")).setAttribute("type","radio"),_t.setAttribute("checked","checked"),_t.setAttribute("name","t"),yt.appendChild(_t),m.checkClone=yt.cloneNode(!0).cloneNode(!0).lastChild.checked,yt.innerHTML="<textarea>x</textarea>",m.noCloneChecked=!!yt.cloneNode(!0).lastChild.defaultValue;var St=a.documentElement,Tt=/^key/,xt=/^(?:mouse|pointer|contextmenu|drag|drop)|click/,bt=/^([^.]*)(?:\.(.+)|)/;function wt(){return!0}function Ct(){return!1}function It(){try{return a.activeElement}catch(t){}}function Lt(t,e,n,r,i,o){var a,s;if("object"==typeof e){for(s in"string"!=typeof n&&(r=r||n,n=void 0),e)Lt(t,s,n,r,e[s],o);return t}if(null==r&&null==i?(i=n,r=n=void 0):null==i&&("string"==typeof n?(i=r,r=void 0):(i=r,r=n,n=void 0)),!1===i)i=Ct;else if(!i)return t;return 1===o&&(a=i,(i=function(t){return T().off(t),a.apply(this,arguments)}).guid=a.guid||(a.guid=T.guid++)),t.each(function(){T.event.add(this,e,i,r,n)})}T.event={global:{},add:function(t,e,n,r,i){var o,a,s,u,c,l,h,d,f,p,g,v=J.get(t);if(v)for(n.handler&&(n=(o=n).handler,i=o.selector),i&&T.find.matchesSelector(St,i),n.guid||(n.guid=T.guid++),(u=v.events)||(u=v.events={}),(a=v.handle)||(a=v.handle=function(e){return void 0!==T&&T.event.triggered!==e.type?T.event.dispatch.apply(t,arguments):void 0}),c=(e=(e||"").match(F)||[""]).length;c--;)f=g=(s=bt.exec(e[c])||[])[1],p=(s[2]||"").split(".").sort(),f&&(h=T.event.special[f]||{},f=(i?h.delegateType:h.bindType)||f,h=T.event.special[f]||{},l=T.extend({type:f,origType:g,data:r,handler:n,guid:n.guid,selector:i,needsContext:i&&T.expr.match.needsContext.test(i),namespace:p.join(".")},o),(d=u[f])||((d=u[f]=[]).delegateCount=0,h.setup&&!1!==h.setup.call(t,r,p,a)||t.addEventListener&&t.addEventListener(f,a)),h.add&&(h.add.call(t,l),l.handler.guid||(l.handler.guid=n.guid)),i?d.splice(d.delegateCount++,0,l):d.push(l),T.event.global[f]=!0)},remove:function(t,e,n,r,i){var o,a,s,u,c,l,h,d,f,p,g,v=J.hasData(t)&&J.get(t);if(v&&(u=v.events)){for(c=(e=(e||"").match(F)||[""]).length;c--;)if(f=g=(s=bt.exec(e[c])||[])[1],p=(s[2]||"").split(".").sort(),f){for(h=T.event.special[f]||{},d=u[f=(r?h.delegateType:h.bindType)||f]||[],s=s[2]&&new RegExp("(^|\\.)"+p.join("\\.(?:.*\\.|)")+"(\\.|$)"),a=o=d.length;o--;)l=d[o],!i&&g!==l.origType||n&&n.guid!==l.guid||s&&!s.test(l.namespace)||r&&r!==l.selector&&("**"!==r||!l.selector)||(d.splice(o,1),l.selector&&d.delegateCount--,h.remove&&h.remove.call(t,l));a&&!d.length&&(h.teardown&&!1!==h.teardown.call(t,p,v.handle)||T.removeEvent(t,f,v.handle),delete u[f])}else for(f in u)T.event.remove(t,f+e[c],n,r,!0);T.isEmptyObject(u)&&J.remove(t,"handle events")}},dispatch:function(t){var e,n,r,i,o,a,s=T.event.fix(t),u=new Array(arguments.length),c=(J.get(this,"events")||{})[s.type]||[],l=T.event.special[s.type]||{};for(u[0]=s,e=1;e<arguments.length;e++)u[e]=arguments[e];if(s.delegateTarget=this,!l.preDispatch||!1!==l.preDispatch.call(this,s)){for(a=T.event.handlers.call(this,s,c),e=0;(i=a[e++])&&!s.isPropagationStopped();)for(s.currentTarget=i.elem,n=0;(o=i.handlers[n++])&&!s.isImmediatePropagationStopped();)s.rnamespace&&!s.rnamespace.test(o.namespace)||(s.handleObj=o,s.data=o.data,void 0!==(r=((T.event.special[o.origType]||{}).handle||o.handler).apply(i.elem,u))&&!1===(s.result=r)&&(s.preventDefault(),s.stopPropagation()));return l.postDispatch&&l.postDispatch.call(this,s),s.result}},handlers:function(t,e){var n,r,i,o,a,s=[],u=e.delegateCount,c=t.target;if(u&&c.nodeType&&!("click"===t.type&&t.button>=1))for(;c!==this;c=c.parentNode||this)if(1===c.nodeType&&("click"!==t.type||!0!==c.disabled)){for(o=[],a={},n=0;n<u;n++)void 0===a[i=(r=e[n]).selector+" "]&&(a[i]=r.needsContext?T(i,this).index(c)>-1:T.find(i,this,null,[c]).length),a[i]&&o.push(r);o.length&&s.push({elem:c,handlers:o})}return c=this,u<e.length&&s.push({elem:c,handlers:e.slice(u)}),s},addProp:function(t,e){Object.defineProperty(T.Event.prototype,t,{enumerable:!0,configurable:!0,get:y(e)?function(){if(this.originalEvent)return e(this.originalEvent)}:function(){if(this.originalEvent)return this.originalEvent[t]},set:function(e){Object.defineProperty(this,t,{enumerable:!0,configurable:!0,writable:!0,value:e})}})},fix:function(t){return t[T.expando]?t:new T.Event(t)},special:{load:{noBubble:!0},focus:{trigger:function(){if(this!==It()&&this.focus)return this.focus(),!1},delegateType:"focusin"},blur:{trigger:function(){if(this===It()&&this.blur)return this.blur(),!1},delegateType:"focusout"},click:{trigger:function(){if("checkbox"===this.type&&this.click&&N(this,"input"))return this.click(),!1},_default:function(t){return N(t.target,"a")}},beforeunload:{postDispatch:function(t){void 0!==t.result&&t.originalEvent&&(t.originalEvent.returnValue=t.result)}}}},T.removeEvent=function(t,e,n){t.removeEventListener&&t.removeEventListener(e,n)},T.Event=function(t,e){if(!(this instanceof T.Event))return new T.Event(t,e);t&&t.type?(this.originalEvent=t,this.type=t.type,this.isDefaultPrevented=t.defaultPrevented||void 0===t.defaultPrevented&&!1===t.returnValue?wt:Ct,this.target=t.target&&3===t.target.nodeType?t.target.parentNode:t.target,this.currentTarget=t.currentTarget,this.relatedTarget=t.relatedTarget):this.type=t,e&&T.extend(this,e),this.timeStamp=t&&t.timeStamp||Date.now(),this[T.expando]=!0},T.Event.prototype={constructor:T.Event,isDefaultPrevented:Ct,isPropagationStopped:Ct,isImmediatePropagationStopped:Ct,isSimulated:!1,preventDefault:function(){var t=this.originalEvent;this.isDefaultPrevented=wt,t&&!this.isSimulated&&t.preventDefault()},stopPropagation:function(){var t=this.originalEvent;this.isPropagationStopped=wt,t&&!this.isSimulated&&t.stopPropagation()},stopImmediatePropagation:function(){var t=this.originalEvent;this.isImmediatePropagationStopped=wt,t&&!this.isSimulated&&t.stopImmediatePropagation(),this.stopPropagation()}},T.each({altKey:!0,bubbles:!0,cancelable:!0,changedTouches:!0,ctrlKey:!0,detail:!0,eventPhase:!0,metaKey:!0,pageX:!0,pageY:!0,shiftKey:!0,view:!0,char:!0,charCode:!0,key:!0,keyCode:!0,button:!0,buttons:!0,clientX:!0,clientY:!0,offsetX:!0,offsetY:!0,pointerId:!0,pointerType:!0,screenX:!0,screenY:!0,targetTouches:!0,toElement:!0,touches:!0,which:function(t){var e=t.button;return null==t.which&&Tt.test(t.type)?null!=t.charCode?t.charCode:t.keyCode:!t.which&&void 0!==e&&xt.test(t.type)?1&e?1:2&e?3:4&e?2:0:t.which}},T.event.addProp),T.each({mouseenter:"mouseover",mouseleave:"mouseout",pointerenter:"pointerover",pointerleave:"pointerout"},function(t,e){T.event.special[t]={delegateType:e,bindType:e,handle:function(t){var n,r=t.relatedTarget,i=t.handleObj;return r&&(r===this||T.contains(this,r))||(t.type=i.origType,n=i.handler.apply(this,arguments),t.type=e),n}}}),T.fn.extend({on:function(t,e,n,r){return Lt(this,t,e,n,r)},one:function(t,e,n,r){return Lt(this,t,e,n,r,1)},off:function(t,e,n){var r,i;if(t&&t.preventDefault&&t.handleObj)return r=t.handleObj,T(t.delegateTarget).off(r.namespace?r.origType+"."+r.namespace:r.origType,r.selector,r.handler),this;if("object"==typeof t){for(i in t)this.off(i,e,t[i]);return this}return!1!==e&&"function"!=typeof e||(n=e,e=void 0),!1===n&&(n=Ct),this.each(function(){T.event.remove(this,t,n,e)})}});var Nt=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([a-z][^\/\0>\x20\t\r\n\f]*)[^>]*)\/>/gi,Ot=/<script|<style|<link/i,Rt=/checked\s*(?:[^=]|=\s*.checked.)/i,Mt=/^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g;function Dt(t,e){return N(t,"table")&&N(11!==e.nodeType?e:e.firstChild,"tr")&&T(t).children("tbody")[0]||t}function Pt(t){return t.type=(null!==t.getAttribute("type"))+"/"+t.type,t}function kt(t){return"true/"===(t.type||"").slice(0,5)?t.type=t.type.slice(5):t.removeAttribute("type"),t}function Bt(t,e){var n,r,i,o,a,s,u,c;if(1===e.nodeType){if(J.hasData(t)&&(o=J.access(t),a=J.set(e,o),c=o.events))for(i in delete a.handle,a.events={},c)for(n=0,r=c[i].length;n<r;n++)T.event.add(e,i,c[i][n]);Z.hasData(t)&&(s=Z.access(t),u=T.extend({},s),Z.set(e,u))}}function Ft(t,e,n,r){e=c.apply([],e);var i,o,a,s,u,l,h=0,d=t.length,f=d-1,p=e[0],g=y(p);if(g||d>1&&"string"==typeof p&&!m.checkClone&&Rt.test(p))return t.each(function(i){var o=t.eq(i);g&&(e[0]=p.call(this,i,o.html())),Ft(o,e,n,r)});if(d&&(o=(i=At(e,t[0].ownerDocument,!1,t,r)).firstChild,1===i.childNodes.length&&(i=o),o||r)){for(s=(a=T.map(vt(i,"script"),Pt)).length;h<d;h++)u=i,h!==f&&(u=T.clone(u,!0,!0),s&&T.merge(a,vt(u,"script"))),n.call(t[h],u,h);if(s)for(l=a[a.length-1].ownerDocument,T.map(a,kt),h=0;h<s;h++)u=a[h],pt.test(u.type||"")&&!J.access(u,"globalEval")&&T.contains(l,u)&&(u.src&&"module"!==(u.type||"").toLowerCase()?T._evalUrl&&T._evalUrl(u.src):A(u.textContent.replace(Mt,""),l,u))}return t}function Vt(t,e,n){for(var r,i=e?T.filter(e,t):t,o=0;null!=(r=i[o]);o++)n||1!==r.nodeType||T.cleanData(vt(r)),r.parentNode&&(n&&T.contains(r.ownerDocument,r)&&mt(vt(r,"script")),r.parentNode.removeChild(r));return t}T.extend({htmlPrefilter:function(t){return t.replace(Nt,"<$1></$2>")},clone:function(t,e,n){var r,i,o,a,s,u,c,l=t.cloneNode(!0),h=T.contains(t.ownerDocument,t);if(!(m.noCloneChecked||1!==t.nodeType&&11!==t.nodeType||T.isXMLDoc(t)))for(a=vt(l),r=0,i=(o=vt(t)).length;r<i;r++)s=o[r],u=a[r],void 0,"input"===(c=u.nodeName.toLowerCase())&&dt.test(s.type)?u.checked=s.checked:"input"!==c&&"textarea"!==c||(u.defaultValue=s.defaultValue);if(e)if(n)for(o=o||vt(t),a=a||vt(l),r=0,i=o.length;r<i;r++)Bt(o[r],a[r]);else Bt(t,l);return(a=vt(l,"script")).length>0&&mt(a,!h&&vt(t,"script")),l},cleanData:function(t){for(var e,n,r,i=T.event.special,o=0;void 0!==(n=t[o]);o++)if(X(n)){if(e=n[J.expando]){if(e.events)for(r in e.events)i[r]?T.event.remove(n,r):T.removeEvent(n,r,e.handle);n[J.expando]=void 0}n[Z.expando]&&(n[Z.expando]=void 0)}}}),T.fn.extend({detach:function(t){return Vt(this,t,!0)},remove:function(t){return Vt(this,t)},text:function(t){return z(this,function(t){return void 0===t?T.text(this):this.empty().each(function(){1!==this.nodeType&&11!==this.nodeType&&9!==this.nodeType||(this.textContent=t)})},null,t,arguments.length)},append:function(){return Ft(this,arguments,function(t){1!==this.nodeType&&11!==this.nodeType&&9!==this.nodeType||Dt(this,t).appendChild(t)})},prepend:function(){return Ft(this,arguments,function(t){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var e=Dt(this,t);e.insertBefore(t,e.firstChild)}})},before:function(){return Ft(this,arguments,function(t){this.parentNode&&this.parentNode.insertBefore(t,this)})},after:function(){return Ft(this,arguments,function(t){this.parentNode&&this.parentNode.insertBefore(t,this.nextSibling)})},empty:function(){for(var t,e=0;null!=(t=this[e]);e++)1===t.nodeType&&(T.cleanData(vt(t,!1)),t.textContent="");return this},clone:function(t,e){return t=null!=t&&t,e=null==e?t:e,this.map(function(){return T.clone(this,t,e)})},html:function(t){return z(this,function(t){var e=this[0]||{},n=0,r=this.length;if(void 0===t&&1===e.nodeType)return e.innerHTML;if("string"==typeof t&&!Ot.test(t)&&!gt[(ft.exec(t)||["",""])[1].toLowerCase()]){t=T.htmlPrefilter(t);try{for(;n<r;n++)1===(e=this[n]||{}).nodeType&&(T.cleanData(vt(e,!1)),e.innerHTML=t);e=0}catch(t){}}e&&this.empty().append(t)},null,t,arguments.length)},replaceWith:function(){var t=[];return Ft(this,arguments,function(e){var n=this.parentNode;T.inArray(this,t)<0&&(T.cleanData(vt(this)),n&&n.replaceChild(e,this))},t)}}),T.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(t,e){T.fn[t]=function(t){for(var n,r=[],i=T(t),o=i.length-1,a=0;a<=o;a++)n=a===o?this:this.clone(!0),T(i[a])[e](n),l.apply(r,n.get());return this.pushStack(r)}});var Ut=new RegExp("^("+rt+")(?!px)[a-z%]+$","i"),Ht=function(t){var e=t.ownerDocument.defaultView;return e&&e.opener||(e=n),e.getComputedStyle(t)},Yt=new RegExp(ot.join("|"),"i");function Gt(t,e,n){var r,i,o,a,s=t.style;return(n=n||Ht(t))&&(""!==(a=n.getPropertyValue(e)||n[e])||T.contains(t.ownerDocument,t)||(a=T.style(t,e)),!m.pixelBoxStyles()&&Ut.test(a)&&Yt.test(e)&&(r=s.width,i=s.minWidth,o=s.maxWidth,s.minWidth=s.maxWidth=s.width=a,a=n.width,s.width=r,s.minWidth=i,s.maxWidth=o)),void 0!==a?a+"":a}function jt(t,e){return{get:function(){if(!t())return(this.get=e).apply(this,arguments);delete this.get}}}!function(){function t(){if(l){c.style.cssText="position:absolute;left:-11111px;width:60px;margin-top:1px;padding:0;border:0",l.style.cssText="position:relative;display:block;box-sizing:border-box;overflow:scroll;margin:auto;border:1px;padding:1px;width:60%;top:1%",St.appendChild(c).appendChild(l);var t=n.getComputedStyle(l);r="1%"!==t.top,u=12===e(t.marginLeft),l.style.right="60%",s=36===e(t.right),i=36===e(t.width),l.style.position="absolute",o=36===l.offsetWidth||"absolute",St.removeChild(c),l=null}}function e(t){return Math.round(parseFloat(t))}var r,i,o,s,u,c=a.createElement("div"),l=a.createElement("div");l.style&&(l.style.backgroundClip="content-box",l.cloneNode(!0).style.backgroundClip="",m.clearCloneStyle="content-box"===l.style.backgroundClip,T.extend(m,{boxSizingReliable:function(){return t(),i},pixelBoxStyles:function(){return t(),s},pixelPosition:function(){return t(),r},reliableMarginLeft:function(){return t(),u},scrollboxSize:function(){return t(),o}}))}();var zt=/^(none|table(?!-c[ea]).+)/,Wt=/^--/,Kt={position:"absolute",visibility:"hidden",display:"block"},Qt={letterSpacing:"0",fontWeight:"400"},qt=["Webkit","Moz","ms"],Xt=a.createElement("div").style;function $t(t){var e=T.cssProps[t];return e||(e=T.cssProps[t]=function(t){if(t in Xt)return t;for(var e=t[0].toUpperCase()+t.slice(1),n=qt.length;n--;)if((t=qt[n]+e)in Xt)return t}(t)||t),e}function Jt(t,e,n){var r=it.exec(e);return r?Math.max(0,r[2]-(n||0))+(r[3]||"px"):e}function Zt(t,e,n,r,i,o){var a="width"===e?1:0,s=0,u=0;if(n===(r?"border":"content"))return 0;for(;a<4;a+=2)"margin"===n&&(u+=T.css(t,n+ot[a],!0,i)),r?("content"===n&&(u-=T.css(t,"padding"+ot[a],!0,i)),"margin"!==n&&(u-=T.css(t,"border"+ot[a]+"Width",!0,i))):(u+=T.css(t,"padding"+ot[a],!0,i),"padding"!==n?u+=T.css(t,"border"+ot[a]+"Width",!0,i):s+=T.css(t,"border"+ot[a]+"Width",!0,i));return!r&&o>=0&&(u+=Math.max(0,Math.ceil(t["offset"+e[0].toUpperCase()+e.slice(1)]-o-u-s-.5))),u}function te(t,e,n){var r=Ht(t),i=Gt(t,e,r),o="border-box"===T.css(t,"boxSizing",!1,r),a=o;if(Ut.test(i)){if(!n)return i;i="auto"}return a=a&&(m.boxSizingReliable()||i===t.style[e]),("auto"===i||!parseFloat(i)&&"inline"===T.css(t,"display",!1,r))&&(i=t["offset"+e[0].toUpperCase()+e.slice(1)],a=!0),(i=parseFloat(i)||0)+Zt(t,e,n||(o?"border":"content"),a,r,i)+"px"}function ee(t,e,n,r,i){return new ee.prototype.init(t,e,n,r,i)}T.extend({cssHooks:{opacity:{get:function(t,e){if(e){var n=Gt(t,"opacity");return""===n?"1":n}}}},cssNumber:{animationIterationCount:!0,columnCount:!0,fillOpacity:!0,flexGrow:!0,flexShrink:!0,fontWeight:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{},style:function(t,e,n,r){if(t&&3!==t.nodeType&&8!==t.nodeType&&t.style){var i,o,a,s=q(e),u=Wt.test(e),c=t.style;if(u||(e=$t(s)),a=T.cssHooks[e]||T.cssHooks[s],void 0===n)return a&&"get"in a&&void 0!==(i=a.get(t,!1,r))?i:c[e];"string"===(o=typeof n)&&(i=it.exec(n))&&i[1]&&(n=ut(t,e,i),o="number"),null!=n&&n==n&&("number"===o&&(n+=i&&i[3]||(T.cssNumber[s]?"":"px")),m.clearCloneStyle||""!==n||0!==e.indexOf("background")||(c[e]="inherit"),a&&"set"in a&&void 0===(n=a.set(t,n,r))||(u?c.setProperty(e,n):c[e]=n))}},css:function(t,e,n,r){var i,o,a,s=q(e);return Wt.test(e)||(e=$t(s)),(a=T.cssHooks[e]||T.cssHooks[s])&&"get"in a&&(i=a.get(t,!0,n)),void 0===i&&(i=Gt(t,e,r)),"normal"===i&&e in Qt&&(i=Qt[e]),""===n||n?(o=parseFloat(i),!0===n||isFinite(o)?o||0:i):i}}),T.each(["height","width"],function(t,e){T.cssHooks[e]={get:function(t,n,r){if(n)return!zt.test(T.css(t,"display"))||t.getClientRects().length&&t.getBoundingClientRect().width?te(t,e,r):st(t,Kt,function(){return te(t,e,r)})},set:function(t,n,r){var i,o=Ht(t),a="border-box"===T.css(t,"boxSizing",!1,o),s=r&&Zt(t,e,r,a,o);return a&&m.scrollboxSize()===o.position&&(s-=Math.ceil(t["offset"+e[0].toUpperCase()+e.slice(1)]-parseFloat(o[e])-Zt(t,e,"border",!1,o)-.5)),s&&(i=it.exec(n))&&"px"!==(i[3]||"px")&&(t.style[e]=n,n=T.css(t,e)),Jt(0,n,s)}}}),T.cssHooks.marginLeft=jt(m.reliableMarginLeft,function(t,e){if(e)return(parseFloat(Gt(t,"marginLeft"))||t.getBoundingClientRect().left-st(t,{marginLeft:0},function(){return t.getBoundingClientRect().left}))+"px"}),T.each({margin:"",padding:"",border:"Width"},function(t,e){T.cssHooks[t+e]={expand:function(n){for(var r=0,i={},o="string"==typeof n?n.split(" "):[n];r<4;r++)i[t+ot[r]+e]=o[r]||o[r-2]||o[0];return i}},"margin"!==t&&(T.cssHooks[t+e].set=Jt)}),T.fn.extend({css:function(t,e){return z(this,function(t,e,n){var r,i,o={},a=0;if(Array.isArray(e)){for(r=Ht(t),i=e.length;a<i;a++)o[e[a]]=T.css(t,e[a],!1,r);return o}return void 0!==n?T.style(t,e,n):T.css(t,e)},t,e,arguments.length>1)}}),T.Tween=ee,ee.prototype={constructor:ee,init:function(t,e,n,r,i,o){this.elem=t,this.prop=n,this.easing=i||T.easing._default,this.options=e,this.start=this.now=this.cur(),this.end=r,this.unit=o||(T.cssNumber[n]?"":"px")},cur:function(){var t=ee.propHooks[this.prop];return t&&t.get?t.get(this):ee.propHooks._default.get(this)},run:function(t){var e,n=ee.propHooks[this.prop];return this.options.duration?this.pos=e=T.easing[this.easing](t,this.options.duration*t,0,1,this.options.duration):this.pos=e=t,this.now=(this.end-this.start)*e+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),n&&n.set?n.set(this):ee.propHooks._default.set(this),this}},ee.prototype.init.prototype=ee.prototype,ee.propHooks={_default:{get:function(t){var e;return 1!==t.elem.nodeType||null!=t.elem[t.prop]&&null==t.elem.style[t.prop]?t.elem[t.prop]:(e=T.css(t.elem,t.prop,""))&&"auto"!==e?e:0},set:function(t){T.fx.step[t.prop]?T.fx.step[t.prop](t):1!==t.elem.nodeType||null==t.elem.style[T.cssProps[t.prop]]&&!T.cssHooks[t.prop]?t.elem[t.prop]=t.now:T.style(t.elem,t.prop,t.now+t.unit)}}},ee.propHooks.scrollTop=ee.propHooks.scrollLeft={set:function(t){t.elem.nodeType&&t.elem.parentNode&&(t.elem[t.prop]=t.now)}},T.easing={linear:function(t){return t},swing:function(t){return.5-Math.cos(t*Math.PI)/2},_default:"swing"},T.fx=ee.prototype.init,T.fx.step={};var ne,re,ie=/^(?:toggle|show|hide)$/,oe=/queueHooks$/;function ae(){re&&(!1===a.hidden&&n.requestAnimationFrame?n.requestAnimationFrame(ae):n.setTimeout(ae,T.fx.interval),T.fx.tick())}function se(){return n.setTimeout(function(){ne=void 0}),ne=Date.now()}function ue(t,e){var n,r=0,i={height:t};for(e=e?1:0;r<4;r+=2-e)i["margin"+(n=ot[r])]=i["padding"+n]=t;return e&&(i.opacity=i.width=t),i}function ce(t,e,n){for(var r,i=(le.tweeners[e]||[]).concat(le.tweeners["*"]),o=0,a=i.length;o<a;o++)if(r=i[o].call(n,e,t))return r}function le(t,e,n){var r,i,o=0,a=le.prefilters.length,s=T.Deferred().always(function(){delete u.elem}),u=function(){if(i)return!1;for(var e=ne||se(),n=Math.max(0,c.startTime+c.duration-e),r=1-(n/c.duration||0),o=0,a=c.tweens.length;o<a;o++)c.tweens[o].run(r);return s.notifyWith(t,[c,r,n]),r<1&&a?n:(a||s.notifyWith(t,[c,1,0]),s.resolveWith(t,[c]),!1)},c=s.promise({elem:t,props:T.extend({},e),opts:T.extend(!0,{specialEasing:{},easing:T.easing._default},n),originalProperties:e,originalOptions:n,startTime:ne||se(),duration:n.duration,tweens:[],createTween:function(e,n){var r=T.Tween(t,c.opts,e,n,c.opts.specialEasing[e]||c.opts.easing);return c.tweens.push(r),r},stop:function(e){var n=0,r=e?c.tweens.length:0;if(i)return this;for(i=!0;n<r;n++)c.tweens[n].run(1);return e?(s.notifyWith(t,[c,1,0]),s.resolveWith(t,[c,e])):s.rejectWith(t,[c,e]),this}}),l=c.props;for(!function(t,e){var n,r,i,o,a;for(n in t)if(i=e[r=q(n)],o=t[n],Array.isArray(o)&&(i=o[1],o=t[n]=o[0]),n!==r&&(t[r]=o,delete t[n]),(a=T.cssHooks[r])&&"expand"in a)for(n in o=a.expand(o),delete t[r],o)n in t||(t[n]=o[n],e[n]=i);else e[r]=i}(l,c.opts.specialEasing);o<a;o++)if(r=le.prefilters[o].call(c,t,l,c.opts))return y(r.stop)&&(T._queueHooks(c.elem,c.opts.queue).stop=r.stop.bind(r)),r;return T.map(l,ce,c),y(c.opts.start)&&c.opts.start.call(t,c),c.progress(c.opts.progress).done(c.opts.done,c.opts.complete).fail(c.opts.fail).always(c.opts.always),T.fx.timer(T.extend(u,{elem:t,anim:c,queue:c.opts.queue})),c}T.Animation=T.extend(le,{tweeners:{"*":[function(t,e){var n=this.createTween(t,e);return ut(n.elem,t,it.exec(e),n),n}]},tweener:function(t,e){y(t)?(e=t,t=["*"]):t=t.match(F);for(var n,r=0,i=t.length;r<i;r++)n=t[r],le.tweeners[n]=le.tweeners[n]||[],le.tweeners[n].unshift(e)},prefilters:[function(t,e,n){var r,i,o,a,s,u,c,l,h="width"in e||"height"in e,d=this,f={},p=t.style,g=t.nodeType&&at(t),v=J.get(t,"fxshow");for(r in n.queue||(null==(a=T._queueHooks(t,"fx")).unqueued&&(a.unqueued=0,s=a.empty.fire,a.empty.fire=function(){a.unqueued||s()}),a.unqueued++,d.always(function(){d.always(function(){a.unqueued--,T.queue(t,"fx").length||a.empty.fire()})})),e)if(i=e[r],ie.test(i)){if(delete e[r],o=o||"toggle"===i,i===(g?"hide":"show")){if("show"!==i||!v||void 0===v[r])continue;g=!0}f[r]=v&&v[r]||T.style(t,r)}if((u=!T.isEmptyObject(e))||!T.isEmptyObject(f))for(r in h&&1===t.nodeType&&(n.overflow=[p.overflow,p.overflowX,p.overflowY],null==(c=v&&v.display)&&(c=J.get(t,"display")),"none"===(l=T.css(t,"display"))&&(c?l=c:(ht([t],!0),c=t.style.display||c,l=T.css(t,"display"),ht([t]))),("inline"===l||"inline-block"===l&&null!=c)&&"none"===T.css(t,"float")&&(u||(d.done(function(){p.display=c}),null==c&&(l=p.display,c="none"===l?"":l)),p.display="inline-block")),n.overflow&&(p.overflow="hidden",d.always(function(){p.overflow=n.overflow[0],p.overflowX=n.overflow[1],p.overflowY=n.overflow[2]})),u=!1,f)u||(v?"hidden"in v&&(g=v.hidden):v=J.access(t,"fxshow",{display:c}),o&&(v.hidden=!g),g&&ht([t],!0),d.done(function(){for(r in g||ht([t]),J.remove(t,"fxshow"),f)T.style(t,r,f[r])})),u=ce(g?v[r]:0,r,d),r in v||(v[r]=u.start,g&&(u.end=u.start,u.start=0))}],prefilter:function(t,e){e?le.prefilters.unshift(t):le.prefilters.push(t)}}),T.speed=function(t,e,n){var r=t&&"object"==typeof t?T.extend({},t):{complete:n||!n&&e||y(t)&&t,duration:t,easing:n&&e||e&&!y(e)&&e};return T.fx.off?r.duration=0:"number"!=typeof r.duration&&(r.duration in T.fx.speeds?r.duration=T.fx.speeds[r.duration]:r.duration=T.fx.speeds._default),null!=r.queue&&!0!==r.queue||(r.queue="fx"),r.old=r.complete,r.complete=function(){y(r.old)&&r.old.call(this),r.queue&&T.dequeue(this,r.queue)},r},T.fn.extend({fadeTo:function(t,e,n,r){return this.filter(at).css("opacity",0).show().end().animate({opacity:e},t,n,r)},animate:function(t,e,n,r){var i=T.isEmptyObject(t),o=T.speed(e,n,r),a=function(){var e=le(this,T.extend({},t),o);(i||J.get(this,"finish"))&&e.stop(!0)};return a.finish=a,i||!1===o.queue?this.each(a):this.queue(o.queue,a)},stop:function(t,e,n){var r=function(t){var e=t.stop;delete t.stop,e(n)};return"string"!=typeof t&&(n=e,e=t,t=void 0),e&&!1!==t&&this.queue(t||"fx",[]),this.each(function(){var e=!0,i=null!=t&&t+"queueHooks",o=T.timers,a=J.get(this);if(i)a[i]&&a[i].stop&&r(a[i]);else for(i in a)a[i]&&a[i].stop&&oe.test(i)&&r(a[i]);for(i=o.length;i--;)o[i].elem!==this||null!=t&&o[i].queue!==t||(o[i].anim.stop(n),e=!1,o.splice(i,1));!e&&n||T.dequeue(this,t)})},finish:function(t){return!1!==t&&(t=t||"fx"),this.each(function(){var e,n=J.get(this),r=n[t+"queue"],i=n[t+"queueHooks"],o=T.timers,a=r?r.length:0;for(n.finish=!0,T.queue(this,t,[]),i&&i.stop&&i.stop.call(this,!0),e=o.length;e--;)o[e].elem===this&&o[e].queue===t&&(o[e].anim.stop(!0),o.splice(e,1));for(e=0;e<a;e++)r[e]&&r[e].finish&&r[e].finish.call(this);delete n.finish})}}),T.each(["toggle","show","hide"],function(t,e){var n=T.fn[e];T.fn[e]=function(t,r,i){return null==t||"boolean"==typeof t?n.apply(this,arguments):this.animate(ue(e,!0),t,r,i)}}),T.each({slideDown:ue("show"),slideUp:ue("hide"),slideToggle:ue("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(t,e){T.fn[t]=function(t,n,r){return this.animate(e,t,n,r)}}),T.timers=[],T.fx.tick=function(){var t,e=0,n=T.timers;for(ne=Date.now();e<n.length;e++)(t=n[e])()||n[e]!==t||n.splice(e--,1);n.length||T.fx.stop(),ne=void 0},T.fx.timer=function(t){T.timers.push(t),T.fx.start()},T.fx.interval=13,T.fx.start=function(){re||(re=!0,ae())},T.fx.stop=function(){re=null},T.fx.speeds={slow:600,fast:200,_default:400},T.fn.delay=function(t,e){return t=T.fx&&T.fx.speeds[t]||t,e=e||"fx",this.queue(e,function(e,r){var i=n.setTimeout(e,t);r.stop=function(){n.clearTimeout(i)}})},function(){var t=a.createElement("input"),e=a.createElement("select").appendChild(a.createElement("option"));t.type="checkbox",m.checkOn=""!==t.value,m.optSelected=e.selected,(t=a.createElement("input")).value="t",t.type="radio",m.radioValue="t"===t.value}();var he,de=T.expr.attrHandle;T.fn.extend({attr:function(t,e){return z(this,T.attr,t,e,arguments.length>1)},removeAttr:function(t){return this.each(function(){T.removeAttr(this,t)})}}),T.extend({attr:function(t,e,n){var r,i,o=t.nodeType;if(3!==o&&8!==o&&2!==o)return void 0===t.getAttribute?T.prop(t,e,n):(1===o&&T.isXMLDoc(t)||(i=T.attrHooks[e.toLowerCase()]||(T.expr.match.bool.test(e)?he:void 0)),void 0!==n?null===n?void T.removeAttr(t,e):i&&"set"in i&&void 0!==(r=i.set(t,n,e))?r:(t.setAttribute(e,n+""),n):i&&"get"in i&&null!==(r=i.get(t,e))?r:null==(r=T.find.attr(t,e))?void 0:r)},attrHooks:{type:{set:function(t,e){if(!m.radioValue&&"radio"===e&&N(t,"input")){var n=t.value;return t.setAttribute("type",e),n&&(t.value=n),e}}}},removeAttr:function(t,e){var n,r=0,i=e&&e.match(F);if(i&&1===t.nodeType)for(;n=i[r++];)t.removeAttribute(n)}}),he={set:function(t,e,n){return!1===e?T.removeAttr(t,n):t.setAttribute(n,n),n}},T.each(T.expr.match.bool.source.match(/\w+/g),function(t,e){var n=de[e]||T.find.attr;de[e]=function(t,e,r){var i,o,a=e.toLowerCase();return r||(o=de[a],de[a]=i,i=null!=n(t,e,r)?a:null,de[a]=o),i}});var fe=/^(?:input|select|textarea|button)$/i,pe=/^(?:a|area)$/i;function ge(t){return(t.match(F)||[]).join(" ")}function ve(t){return t.getAttribute&&t.getAttribute("class")||""}function me(t){return Array.isArray(t)?t:"string"==typeof t&&t.match(F)||[]}T.fn.extend({prop:function(t,e){return z(this,T.prop,t,e,arguments.length>1)},removeProp:function(t){return this.each(function(){delete this[T.propFix[t]||t]})}}),T.extend({prop:function(t,e,n){var r,i,o=t.nodeType;if(3!==o&&8!==o&&2!==o)return 1===o&&T.isXMLDoc(t)||(e=T.propFix[e]||e,i=T.propHooks[e]),void 0!==n?i&&"set"in i&&void 0!==(r=i.set(t,n,e))?r:t[e]=n:i&&"get"in i&&null!==(r=i.get(t,e))?r:t[e]},propHooks:{tabIndex:{get:function(t){var e=T.find.attr(t,"tabindex");return e?parseInt(e,10):fe.test(t.nodeName)||pe.test(t.nodeName)&&t.href?0:-1}}},propFix:{for:"htmlFor",class:"className"}}),m.optSelected||(T.propHooks.selected={get:function(t){var e=t.parentNode;return e&&e.parentNode&&e.parentNode.selectedIndex,null},set:function(t){var e=t.parentNode;e&&(e.selectedIndex,e.parentNode&&e.parentNode.selectedIndex)}}),T.each(["tabIndex","readOnly","maxLength","cellSpacing","cellPadding","rowSpan","colSpan","useMap","frameBorder","contentEditable"],function(){T.propFix[this.toLowerCase()]=this}),T.fn.extend({addClass:function(t){var e,n,r,i,o,a,s,u=0;if(y(t))return this.each(function(e){T(this).addClass(t.call(this,e,ve(this)))});if((e=me(t)).length)for(;n=this[u++];)if(i=ve(n),r=1===n.nodeType&&" "+ge(i)+" "){for(a=0;o=e[a++];)r.indexOf(" "+o+" ")<0&&(r+=o+" ");i!==(s=ge(r))&&n.setAttribute("class",s)}return this},removeClass:function(t){var e,n,r,i,o,a,s,u=0;if(y(t))return this.each(function(e){T(this).removeClass(t.call(this,e,ve(this)))});if(!arguments.length)return this.attr("class","");if((e=me(t)).length)for(;n=this[u++];)if(i=ve(n),r=1===n.nodeType&&" "+ge(i)+" "){for(a=0;o=e[a++];)for(;r.indexOf(" "+o+" ")>-1;)r=r.replace(" "+o+" "," ");i!==(s=ge(r))&&n.setAttribute("class",s)}return this},toggleClass:function(t,e){var n=typeof t,r="string"===n||Array.isArray(t);return"boolean"==typeof e&&r?e?this.addClass(t):this.removeClass(t):y(t)?this.each(function(n){T(this).toggleClass(t.call(this,n,ve(this),e),e)}):this.each(function(){var e,i,o,a;if(r)for(i=0,o=T(this),a=me(t);e=a[i++];)o.hasClass(e)?o.removeClass(e):o.addClass(e);else void 0!==t&&"boolean"!==n||((e=ve(this))&&J.set(this,"__className__",e),this.setAttribute&&this.setAttribute("class",e||!1===t?"":J.get(this,"__className__")||""))})},hasClass:function(t){var e,n,r=0;for(e=" "+t+" ";n=this[r++];)if(1===n.nodeType&&(" "+ge(ve(n))+" ").indexOf(e)>-1)return!0;return!1}});var ye=/\r/g;T.fn.extend({val:function(t){var e,n,r,i=this[0];return arguments.length?(r=y(t),this.each(function(n){var i;1===this.nodeType&&(null==(i=r?t.call(this,n,T(this).val()):t)?i="":"number"==typeof i?i+="":Array.isArray(i)&&(i=T.map(i,function(t){return null==t?"":t+""})),(e=T.valHooks[this.type]||T.valHooks[this.nodeName.toLowerCase()])&&"set"in e&&void 0!==e.set(this,i,"value")||(this.value=i))})):i?(e=T.valHooks[i.type]||T.valHooks[i.nodeName.toLowerCase()])&&"get"in e&&void 0!==(n=e.get(i,"value"))?n:"string"==typeof(n=i.value)?n.replace(ye,""):null==n?"":n:void 0}}),T.extend({valHooks:{option:{get:function(t){var e=T.find.attr(t,"value");return null!=e?e:ge(T.text(t))}},select:{get:function(t){var e,n,r,i=t.options,o=t.selectedIndex,a="select-one"===t.type,s=a?null:[],u=a?o+1:i.length;for(r=o<0?u:a?o:0;r<u;r++)if(((n=i[r]).selected||r===o)&&!n.disabled&&(!n.parentNode.disabled||!N(n.parentNode,"optgroup"))){if(e=T(n).val(),a)return e;s.push(e)}return s},set:function(t,e){for(var n,r,i=t.options,o=T.makeArray(e),a=i.length;a--;)((r=i[a]).selected=T.inArray(T.valHooks.option.get(r),o)>-1)&&(n=!0);return n||(t.selectedIndex=-1),o}}}}),T.each(["radio","checkbox"],function(){T.valHooks[this]={set:function(t,e){if(Array.isArray(e))return t.checked=T.inArray(T(t).val(),e)>-1}},m.checkOn||(T.valHooks[this].get=function(t){return null===t.getAttribute("value")?"on":t.value})}),m.focusin="onfocusin"in n;var _e=/^(?:focusinfocus|focusoutblur)$/,Ee=function(t){t.stopPropagation()};T.extend(T.event,{trigger:function(t,e,r,i){var o,s,u,c,l,h,d,f,g=[r||a],v=p.call(t,"type")?t.type:t,m=p.call(t,"namespace")?t.namespace.split("."):[];if(s=f=u=r=r||a,3!==r.nodeType&&8!==r.nodeType&&!_e.test(v+T.event.triggered)&&(v.indexOf(".")>-1&&(v=(m=v.split(".")).shift(),m.sort()),l=v.indexOf(":")<0&&"on"+v,(t=t[T.expando]?t:new T.Event(v,"object"==typeof t&&t)).isTrigger=i?2:3,t.namespace=m.join("."),t.rnamespace=t.namespace?new RegExp("(^|\\.)"+m.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,t.result=void 0,t.target||(t.target=r),e=null==e?[t]:T.makeArray(e,[t]),d=T.event.special[v]||{},i||!d.trigger||!1!==d.trigger.apply(r,e))){if(!i&&!d.noBubble&&!_(r)){for(c=d.delegateType||v,_e.test(c+v)||(s=s.parentNode);s;s=s.parentNode)g.push(s),u=s;u===(r.ownerDocument||a)&&g.push(u.defaultView||u.parentWindow||n)}for(o=0;(s=g[o++])&&!t.isPropagationStopped();)f=s,t.type=o>1?c:d.bindType||v,(h=(J.get(s,"events")||{})[t.type]&&J.get(s,"handle"))&&h.apply(s,e),(h=l&&s[l])&&h.apply&&X(s)&&(t.result=h.apply(s,e),!1===t.result&&t.preventDefault());return t.type=v,i||t.isDefaultPrevented()||d._default&&!1!==d._default.apply(g.pop(),e)||!X(r)||l&&y(r[v])&&!_(r)&&((u=r[l])&&(r[l]=null),T.event.triggered=v,t.isPropagationStopped()&&f.addEventListener(v,Ee),r[v](),t.isPropagationStopped()&&f.removeEventListener(v,Ee),T.event.triggered=void 0,u&&(r[l]=u)),t.result}},simulate:function(t,e,n){var r=T.extend(new T.Event,n,{type:t,isSimulated:!0});T.event.trigger(r,null,e)}}),T.fn.extend({trigger:function(t,e){return this.each(function(){T.event.trigger(t,e,this)})},triggerHandler:function(t,e){var n=this[0];if(n)return T.event.trigger(t,e,n,!0)}}),m.focusin||T.each({focus:"focusin",blur:"focusout"},function(t,e){var n=function(t){T.event.simulate(e,t.target,T.event.fix(t))};T.event.special[e]={setup:function(){var r=this.ownerDocument||this,i=J.access(r,e);i||r.addEventListener(t,n,!0),J.access(r,e,(i||0)+1)},teardown:function(){var r=this.ownerDocument||this,i=J.access(r,e)-1;i?J.access(r,e,i):(r.removeEventListener(t,n,!0),J.remove(r,e))}}});var Ae=n.location,Se=Date.now(),Te=/\?/;T.parseXML=function(t){var e;if(!t||"string"!=typeof t)return null;try{e=(new n.DOMParser).parseFromString(t,"text/xml")}catch(t){e=void 0}return e&&!e.getElementsByTagName("parsererror").length||T.error("Invalid XML: "+t),e};var xe=/\[\]$/,be=/\r?\n/g,we=/^(?:submit|button|image|reset|file)$/i,Ce=/^(?:input|select|textarea|keygen)/i;function Ie(t,e,n,r){var i;if(Array.isArray(e))T.each(e,function(e,i){n||xe.test(t)?r(t,i):Ie(t+"["+("object"==typeof i&&null!=i?e:"")+"]",i,n,r)});else if(n||"object"!==S(e))r(t,e);else for(i in e)Ie(t+"["+i+"]",e[i],n,r)}T.param=function(t,e){var n,r=[],i=function(t,e){var n=y(e)?e():e;r[r.length]=encodeURIComponent(t)+"="+encodeURIComponent(null==n?"":n)};if(Array.isArray(t)||t.jquery&&!T.isPlainObject(t))T.each(t,function(){i(this.name,this.value)});else for(n in t)Ie(n,t[n],e,i);return r.join("&")},T.fn.extend({serialize:function(){return T.param(this.serializeArray())},serializeArray:function(){return this.map(function(){var t=T.prop(this,"elements");return t?T.makeArray(t):this}).filter(function(){var t=this.type;return this.name&&!T(this).is(":disabled")&&Ce.test(this.nodeName)&&!we.test(t)&&(this.checked||!dt.test(t))}).map(function(t,e){var n=T(this).val();return null==n?null:Array.isArray(n)?T.map(n,function(t){return{name:e.name,value:t.replace(be,"\r\n")}}):{name:e.name,value:n.replace(be,"\r\n")}}).get()}});var Le=/%20/g,Ne=/#.*$/,Oe=/([?&])_=[^&]*/,Re=/^(.*?):[ \t]*([^\r\n]*)$/gm,Me=/^(?:GET|HEAD)$/,De=/^\/\//,Pe={},ke={},Be="*/".concat("*"),Fe=a.createElement("a");function Ve(t){return function(e,n){"string"!=typeof e&&(n=e,e="*");var r,i=0,o=e.toLowerCase().match(F)||[];if(y(n))for(;r=o[i++];)"+"===r[0]?(r=r.slice(1)||"*",(t[r]=t[r]||[]).unshift(n)):(t[r]=t[r]||[]).push(n)}}function Ue(t,e,n,r){var i={},o=t===ke;function a(s){var u;return i[s]=!0,T.each(t[s]||[],function(t,s){var c=s(e,n,r);return"string"!=typeof c||o||i[c]?o?!(u=c):void 0:(e.dataTypes.unshift(c),a(c),!1)}),u}return a(e.dataTypes[0])||!i["*"]&&a("*")}function He(t,e){var n,r,i=T.ajaxSettings.flatOptions||{};for(n in e)void 0!==e[n]&&((i[n]?t:r||(r={}))[n]=e[n]);return r&&T.extend(!0,t,r),t}Fe.href=Ae.href,T.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:Ae.href,type:"GET",isLocal:/^(?:about|app|app-storage|.+-extension|file|res|widget):$/.test(Ae.protocol),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":Be,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/\bxml\b/,html:/\bhtml/,json:/\bjson\b/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":!0,"text json":JSON.parse,"text xml":T.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(t,e){return e?He(He(t,T.ajaxSettings),e):He(T.ajaxSettings,t)},ajaxPrefilter:Ve(Pe),ajaxTransport:Ve(ke),ajax:function(t,e){"object"==typeof t&&(e=t,t=void 0),e=e||{};var r,i,o,s,u,c,l,h,d,f,p=T.ajaxSetup({},e),g=p.context||p,v=p.context&&(g.nodeType||g.jquery)?T(g):T.event,m=T.Deferred(),y=T.Callbacks("once memory"),_=p.statusCode||{},E={},A={},S="canceled",x={readyState:0,getResponseHeader:function(t){var e;if(l){if(!s)for(s={};e=Re.exec(o);)s[e[1].toLowerCase()]=e[2];e=s[t.toLowerCase()]}return null==e?null:e},getAllResponseHeaders:function(){return l?o:null},setRequestHeader:function(t,e){return null==l&&(t=A[t.toLowerCase()]=A[t.toLowerCase()]||t,E[t]=e),this},overrideMimeType:function(t){return null==l&&(p.mimeType=t),this},statusCode:function(t){var e;if(t)if(l)x.always(t[x.status]);else for(e in t)_[e]=[_[e],t[e]];return this},abort:function(t){var e=t||S;return r&&r.abort(e),b(0,e),this}};if(m.promise(x),p.url=((t||p.url||Ae.href)+"").replace(De,Ae.protocol+"//"),p.type=e.method||e.type||p.method||p.type,p.dataTypes=(p.dataType||"*").toLowerCase().match(F)||[""],null==p.crossDomain){c=a.createElement("a");try{c.href=p.url,c.href=c.href,p.crossDomain=Fe.protocol+"//"+Fe.host!=c.protocol+"//"+c.host}catch(t){p.crossDomain=!0}}if(p.data&&p.processData&&"string"!=typeof p.data&&(p.data=T.param(p.data,p.traditional)),Ue(Pe,p,e,x),l)return x;for(d in(h=T.event&&p.global)&&0==T.active++&&T.event.trigger("ajaxStart"),p.type=p.type.toUpperCase(),p.hasContent=!Me.test(p.type),i=p.url.replace(Ne,""),p.hasContent?p.data&&p.processData&&0===(p.contentType||"").indexOf("application/x-www-form-urlencoded")&&(p.data=p.data.replace(Le,"+")):(f=p.url.slice(i.length),p.data&&(p.processData||"string"==typeof p.data)&&(i+=(Te.test(i)?"&":"?")+p.data,delete p.data),!1===p.cache&&(i=i.replace(Oe,"$1"),f=(Te.test(i)?"&":"?")+"_="+Se+++f),p.url=i+f),p.ifModified&&(T.lastModified[i]&&x.setRequestHeader("If-Modified-Since",T.lastModified[i]),T.etag[i]&&x.setRequestHeader("If-None-Match",T.etag[i])),(p.data&&p.hasContent&&!1!==p.contentType||e.contentType)&&x.setRequestHeader("Content-Type",p.contentType),x.setRequestHeader("Accept",p.dataTypes[0]&&p.accepts[p.dataTypes[0]]?p.accepts[p.dataTypes[0]]+("*"!==p.dataTypes[0]?", "+Be+"; q=0.01":""):p.accepts["*"]),p.headers)x.setRequestHeader(d,p.headers[d]);if(p.beforeSend&&(!1===p.beforeSend.call(g,x,p)||l))return x.abort();if(S="abort",y.add(p.complete),x.done(p.success),x.fail(p.error),r=Ue(ke,p,e,x)){if(x.readyState=1,h&&v.trigger("ajaxSend",[x,p]),l)return x;p.async&&p.timeout>0&&(u=n.setTimeout(function(){x.abort("timeout")},p.timeout));try{l=!1,r.send(E,b)}catch(t){if(l)throw t;b(-1,t)}}else b(-1,"No Transport");function b(t,e,a,s){var c,d,f,E,A,S=e;l||(l=!0,u&&n.clearTimeout(u),r=void 0,o=s||"",x.readyState=t>0?4:0,c=t>=200&&t<300||304===t,a&&(E=function(t,e,n){for(var r,i,o,a,s=t.contents,u=t.dataTypes;"*"===u[0];)u.shift(),void 0===r&&(r=t.mimeType||e.getResponseHeader("Content-Type"));if(r)for(i in s)if(s[i]&&s[i].test(r)){u.unshift(i);break}if(u[0]in n)o=u[0];else{for(i in n){if(!u[0]||t.converters[i+" "+u[0]]){o=i;break}a||(a=i)}o=o||a}if(o)return o!==u[0]&&u.unshift(o),n[o]}(p,x,a)),E=function(t,e,n,r){var i,o,a,s,u,c={},l=t.dataTypes.slice();if(l[1])for(a in t.converters)c[a.toLowerCase()]=t.converters[a];for(o=l.shift();o;)if(t.responseFields[o]&&(n[t.responseFields[o]]=e),!u&&r&&t.dataFilter&&(e=t.dataFilter(e,t.dataType)),u=o,o=l.shift())if("*"===o)o=u;else if("*"!==u&&u!==o){if(!(a=c[u+" "+o]||c["* "+o]))for(i in c)if((s=i.split(" "))[1]===o&&(a=c[u+" "+s[0]]||c["* "+s[0]])){!0===a?a=c[i]:!0!==c[i]&&(o=s[0],l.unshift(s[1]));break}if(!0!==a)if(a&&t.throws)e=a(e);else try{e=a(e)}catch(t){return{state:"parsererror",error:a?t:"No conversion from "+u+" to "+o}}}return{state:"success",data:e}}(p,E,x,c),c?(p.ifModified&&((A=x.getResponseHeader("Last-Modified"))&&(T.lastModified[i]=A),(A=x.getResponseHeader("etag"))&&(T.etag[i]=A)),204===t||"HEAD"===p.type?S="nocontent":304===t?S="notmodified":(S=E.state,d=E.data,c=!(f=E.error))):(f=S,!t&&S||(S="error",t<0&&(t=0))),x.status=t,x.statusText=(e||S)+"",c?m.resolveWith(g,[d,S,x]):m.rejectWith(g,[x,S,f]),x.statusCode(_),_=void 0,h&&v.trigger(c?"ajaxSuccess":"ajaxError",[x,p,c?d:f]),y.fireWith(g,[x,S]),h&&(v.trigger("ajaxComplete",[x,p]),--T.active||T.event.trigger("ajaxStop")))}return x},getJSON:function(t,e,n){return T.get(t,e,n,"json")},getScript:function(t,e){return T.get(t,void 0,e,"script")}}),T.each(["get","post"],function(t,e){T[e]=function(t,n,r,i){return y(n)&&(i=i||r,r=n,n=void 0),T.ajax(T.extend({url:t,type:e,dataType:i,data:n,success:r},T.isPlainObject(t)&&t))}}),T._evalUrl=function(t){return T.ajax({url:t,type:"GET",dataType:"script",cache:!0,async:!1,global:!1,throws:!0})},T.fn.extend({wrapAll:function(t){var e;return this[0]&&(y(t)&&(t=t.call(this[0])),e=T(t,this[0].ownerDocument).eq(0).clone(!0),this[0].parentNode&&e.insertBefore(this[0]),e.map(function(){for(var t=this;t.firstElementChild;)t=t.firstElementChild;return t}).append(this)),this},wrapInner:function(t){return y(t)?this.each(function(e){T(this).wrapInner(t.call(this,e))}):this.each(function(){var e=T(this),n=e.contents();n.length?n.wrapAll(t):e.append(t)})},wrap:function(t){var e=y(t);return this.each(function(n){T(this).wrapAll(e?t.call(this,n):t)})},unwrap:function(t){return this.parent(t).not("body").each(function(){T(this).replaceWith(this.childNodes)}),this}}),T.expr.pseudos.hidden=function(t){return!T.expr.pseudos.visible(t)},T.expr.pseudos.visible=function(t){return!!(t.offsetWidth||t.offsetHeight||t.getClientRects().length)},T.ajaxSettings.xhr=function(){try{return new n.XMLHttpRequest}catch(t){}};var Ye={0:200,1223:204},Ge=T.ajaxSettings.xhr();m.cors=!!Ge&&"withCredentials"in Ge,m.ajax=Ge=!!Ge,T.ajaxTransport(function(t){var e,r;if(m.cors||Ge&&!t.crossDomain)return{send:function(i,o){var a,s=t.xhr();if(s.open(t.type,t.url,t.async,t.username,t.password),t.xhrFields)for(a in t.xhrFields)s[a]=t.xhrFields[a];for(a in t.mimeType&&s.overrideMimeType&&s.overrideMimeType(t.mimeType),t.crossDomain||i["X-Requested-With"]||(i["X-Requested-With"]="XMLHttpRequest"),i)s.setRequestHeader(a,i[a]);e=function(t){return function(){e&&(e=r=s.onload=s.onerror=s.onabort=s.ontimeout=s.onreadystatechange=null,"abort"===t?s.abort():"error"===t?"number"!=typeof s.status?o(0,"error"):o(s.status,s.statusText):o(Ye[s.status]||s.status,s.statusText,"text"!==(s.responseType||"text")||"string"!=typeof s.responseText?{binary:s.response}:{text:s.responseText},s.getAllResponseHeaders()))}},s.onload=e(),r=s.onerror=s.ontimeout=e("error"),void 0!==s.onabort?s.onabort=r:s.onreadystatechange=function(){4===s.readyState&&n.setTimeout(function(){e&&r()})},e=e("abort");try{s.send(t.hasContent&&t.data||null)}catch(t){if(e)throw t}},abort:function(){e&&e()}}}),T.ajaxPrefilter(function(t){t.crossDomain&&(t.contents.script=!1)}),T.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/\b(?:java|ecma)script\b/},converters:{"text script":function(t){return T.globalEval(t),t}}}),T.ajaxPrefilter("script",function(t){void 0===t.cache&&(t.cache=!1),t.crossDomain&&(t.type="GET")}),T.ajaxTransport("script",function(t){var e,n;if(t.crossDomain)return{send:function(r,i){e=T("<script>").prop({charset:t.scriptCharset,src:t.url}).on("load error",n=function(t){e.remove(),n=null,t&&i("error"===t.type?404:200,t.type)}),a.head.appendChild(e[0])},abort:function(){n&&n()}}});var je,ze=[],We=/(=)\?(?=&|$)|\?\?/;T.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var t=ze.pop()||T.expando+"_"+Se++;return this[t]=!0,t}}),T.ajaxPrefilter("json jsonp",function(t,e,r){var i,o,a,s=!1!==t.jsonp&&(We.test(t.url)?"url":"string"==typeof t.data&&0===(t.contentType||"").indexOf("application/x-www-form-urlencoded")&&We.test(t.data)&&"data");if(s||"jsonp"===t.dataTypes[0])return i=t.jsonpCallback=y(t.jsonpCallback)?t.jsonpCallback():t.jsonpCallback,s?t[s]=t[s].replace(We,"$1"+i):!1!==t.jsonp&&(t.url+=(Te.test(t.url)?"&":"?")+t.jsonp+"="+i),t.converters["script json"]=function(){return a||T.error(i+" was not called"),a[0]},t.dataTypes[0]="json",o=n[i],n[i]=function(){a=arguments},r.always(function(){void 0===o?T(n).removeProp(i):n[i]=o,t[i]&&(t.jsonpCallback=e.jsonpCallback,ze.push(i)),a&&y(o)&&o(a[0]),a=o=void 0}),"script"}),m.createHTMLDocument=((je=a.implementation.createHTMLDocument("").body).innerHTML="<form></form><form></form>",2===je.childNodes.length),T.parseHTML=function(t,e,n){return"string"!=typeof t?[]:("boolean"==typeof e&&(n=e,e=!1),e||(m.createHTMLDocument?((r=(e=a.implementation.createHTMLDocument("")).createElement("base")).href=a.location.href,e.head.appendChild(r)):e=a),i=O.exec(t),o=!n&&[],i?[e.createElement(i[1])]:(i=At([t],e,o),o&&o.length&&T(o).remove(),T.merge([],i.childNodes)));var r,i,o},T.fn.load=function(t,e,n){var r,i,o,a=this,s=t.indexOf(" ");return s>-1&&(r=ge(t.slice(s)),t=t.slice(0,s)),y(e)?(n=e,e=void 0):e&&"object"==typeof e&&(i="POST"),a.length>0&&T.ajax({url:t,type:i||"GET",dataType:"html",data:e}).done(function(t){o=arguments,a.html(r?T("<div>").append(T.parseHTML(t)).find(r):t)}).always(n&&function(t,e){a.each(function(){n.apply(this,o||[t.responseText,e,t])})}),this},T.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],function(t,e){T.fn[e]=function(t){return this.on(e,t)}}),T.expr.pseudos.animated=function(t){return T.grep(T.timers,function(e){return t===e.elem}).length},T.offset={setOffset:function(t,e,n){var r,i,o,a,s,u,c=T.css(t,"position"),l=T(t),h={};"static"===c&&(t.style.position="relative"),s=l.offset(),o=T.css(t,"top"),u=T.css(t,"left"),("absolute"===c||"fixed"===c)&&(o+u).indexOf("auto")>-1?(a=(r=l.position()).top,i=r.left):(a=parseFloat(o)||0,i=parseFloat(u)||0),y(e)&&(e=e.call(t,n,T.extend({},s))),null!=e.top&&(h.top=e.top-s.top+a),null!=e.left&&(h.left=e.left-s.left+i),"using"in e?e.using.call(t,h):l.css(h)}},T.fn.extend({offset:function(t){if(arguments.length)return void 0===t?this:this.each(function(e){T.offset.setOffset(this,t,e)});var e,n,r=this[0];return r?r.getClientRects().length?(e=r.getBoundingClientRect(),n=r.ownerDocument.defaultView,{top:e.top+n.pageYOffset,left:e.left+n.pageXOffset}):{top:0,left:0}:void 0},position:function(){if(this[0]){var t,e,n,r=this[0],i={top:0,left:0};if("fixed"===T.css(r,"position"))e=r.getBoundingClientRect();else{for(e=this.offset(),n=r.ownerDocument,t=r.offsetParent||n.documentElement;t&&(t===n.body||t===n.documentElement)&&"static"===T.css(t,"position");)t=t.parentNode;t&&t!==r&&1===t.nodeType&&((i=T(t).offset()).top+=T.css(t,"borderTopWidth",!0),i.left+=T.css(t,"borderLeftWidth",!0))}return{top:e.top-i.top-T.css(r,"marginTop",!0),left:e.left-i.left-T.css(r,"marginLeft",!0)}}},offsetParent:function(){return this.map(function(){for(var t=this.offsetParent;t&&"static"===T.css(t,"position");)t=t.offsetParent;return t||St})}}),T.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(t,e){var n="pageYOffset"===e;T.fn[t]=function(r){return z(this,function(t,r,i){var o;if(_(t)?o=t:9===t.nodeType&&(o=t.defaultView),void 0===i)return o?o[e]:t[r];o?o.scrollTo(n?o.pageXOffset:i,n?i:o.pageYOffset):t[r]=i},t,r,arguments.length)}}),T.each(["top","left"],function(t,e){T.cssHooks[e]=jt(m.pixelPosition,function(t,n){if(n)return n=Gt(t,e),Ut.test(n)?T(t).position()[e]+"px":n})}),T.each({Height:"height",Width:"width"},function(t,e){T.each({padding:"inner"+t,content:e,"":"outer"+t},function(n,r){T.fn[r]=function(i,o){var a=arguments.length&&(n||"boolean"!=typeof i),s=n||(!0===i||!0===o?"margin":"border");return z(this,function(e,n,i){var o;return _(e)?0===r.indexOf("outer")?e["inner"+t]:e.document.documentElement["client"+t]:9===e.nodeType?(o=e.documentElement,Math.max(e.body["scroll"+t],o["scroll"+t],e.body["offset"+t],o["offset"+t],o["client"+t])):void 0===i?T.css(e,n,s):T.style(e,n,i,s)},e,a?i:void 0,a)}})}),T.each("blur focus focusin focusout resize scroll click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup contextmenu".split(" "),function(t,e){T.fn[e]=function(t,n){return arguments.length>0?this.on(e,null,t,n):this.trigger(e)}}),T.fn.extend({hover:function(t,e){return this.mouseenter(t).mouseleave(e||t)}}),T.fn.extend({bind:function(t,e,n){return this.on(t,null,e,n)},unbind:function(t,e){return this.off(t,null,e)},delegate:function(t,e,n,r){return this.on(e,t,n,r)},undelegate:function(t,e,n){return 1===arguments.length?this.off(t,"**"):this.off(e,t||"**",n)}}),T.proxy=function(t,e){var n,r,i;if("string"==typeof e&&(n=t[e],e=t,t=n),y(t))return r=u.call(arguments,2),(i=function(){return t.apply(e||this,r.concat(u.call(arguments)))}).guid=t.guid=t.guid||T.guid++,i},T.holdReady=function(t){t?T.readyWait++:T.ready(!0)},T.isArray=Array.isArray,T.parseJSON=JSON.parse,T.nodeName=N,T.isFunction=y,T.isWindow=_,T.camelCase=q,T.type=S,T.now=Date.now,T.isNumeric=function(t){var e=T.type(t);return("number"===e||"string"===e)&&!isNaN(t-parseFloat(t))},void 0===(r=function(){return T}.apply(e,[]))||(t.exports=r);var Ke=n.jQuery,Qe=n.$;return T.noConflict=function(t){return n.$===T&&(n.$=Qe),t&&n.jQuery===T&&(n.jQuery=Ke),T},i||(n.jQuery=n.$=T),T})},function(t,e,n){var r=n(12),i=n(7).document,o=r(i)&&r(i.createElement);t.exports=function(t){return o?i.createElement(t):{}}},function(t,e,n){var r=n(12);t.exports=function(t,e){if(!r(t))return t;var n,i;if(e&&"function"==typeof(n=t.toString)&&!r(i=n.call(t)))return i;if("function"==typeof(n=t.valueOf)&&!r(i=n.call(t)))return i;if(!e&&"function"==typeof(n=t.toString)&&!r(i=n.call(t)))return i;throw TypeError("Can't convert object to primitive value")}},function(t,e,n){var r=n(38);t.exports=Object("z").propertyIsEnumerable(0)?Object:function(t){return"String"==r(t)?t.split(""):Object(t)}},function(t,e){t.exports=function(t){if(void 0==t)throw TypeError("Can't call method on  "+t);return t}},function(t,e){var n=Math.ceil,r=Math.floor;t.exports=function(t){return isNaN(t=+t)?0:(t>0?r:n)(t)}},function(t,e,n){var r=n(61)("keys"),i=n(46);t.exports=function(t){return r[t]||(r[t]=i(t))}},function(t,e,n){var r=n(7),i=r["__core-js_shared__"]||(r["__core-js_shared__"]={});t.exports=function(t){return i[t]||(i[t]={})}},function(t,e){t.exports="constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf".split(",")},function(t,e){e.f=Object.getOwnPropertySymbols},function(t,e,n){"use strict";var r=n(49),i=n(6),o=n(86),a=n(17),s=n(22),u=n(42),c=n(144),l=n(43),h=n(146),d=n(8)("iterator"),f=!([].keys&&"next"in[].keys()),p=function(){return this};t.exports=function(t,e,n,g,v,m,y){c(n,e,g);var _,E,A,S=function(t){if(!f&&t in w)return w[t];switch(t){case"keys":case"values":return function(){return new n(this,t)}}return function(){return new n(this,t)}},T=e+" Iterator",x="values"==v,b=!1,w=t.prototype,C=w[d]||w["@@iterator"]||v&&w[v],I=!f&&C||S(v),L=v?x?S("entries"):I:void 0,N="Array"==e&&w.entries||C;if(N&&(A=h(N.call(new t)))!==Object.prototype&&A.next&&(l(A,T,!0),r||s(A,d)||a(A,d,p)),x&&C&&"values"!==C.name&&(b=!0,I=function(){return C.call(this)}),r&&!y||!f&&!b&&w[d]||a(w,d,I),u[e]=I,u[T]=p,v)if(_={values:x?I:S("values"),keys:m?I:S("keys"),entries:L},y)for(E in _)E in w||o(w,E,_[E]);else i(i.P+i.F*(f||b),e,_);return _}},function(t,e,n){var r=n(15),i=n(145),o=n(62),a=n(60)("IE_PROTO"),s=function(){},u=function(){var t,e=n(55)("iframe"),r=o.length;for(e.style.display="none",n(87).appendChild(e),e.src="javascript:",(t=e.contentWindow.document).open(),t.write("<script>document.F=Object<\/script>"),t.close(),u=t.F;r--;)delete u.prototype[o[r]];return u()};t.exports=Object.create||function(t,e){var n;return null!==t?(s.prototype=r(t),n=new s,s.prototype=null,n[a]=t):n=u(),void 0===e?n:i(n,e)}},function(t,e,n){e.f=n(8)},function(t,e,n){var r=n(46)("meta"),i=n(12),o=n(22),a=n(11).f,s=0,u=Object.isExtensible||function(){return!0},c=!n(21)(function(){return u(Object.preventExtensions({}))}),l=function(t){a(t,r,{value:{i:"O"+ ++s,w:{}}})},h=t.exports={KEY:r,NEED:!1,fastKey:function(t,e){if(!i(t))return"symbol"==typeof t?t:("string"==typeof t?"S":"P")+t;if(!o(t,r)){if(!u(t))return"F";if(!e)return"E";l(t)}return t[r].i},getWeak:function(t,e){if(!o(t,r)){if(!u(t))return!0;if(!e)return!1;l(t)}return t[r].w},onFreeze:function(t){return c&&h.NEED&&u(t)&&!o(t,r)&&l(t),t}}},function(t,e,n){var r=n(7),i=n(3),o=n(49),a=n(66),s=n(11).f;t.exports=function(t){var e=i.Symbol||(i.Symbol=o?{}:r.Symbol||{});"_"==t.charAt(0)||t in e||s(e,t,{value:a.f(t)})}},function(t,e){},function(t,e,n){var r=n(38),i=n(8)("toStringTag"),o="Arguments"==r(function(){return arguments}());t.exports=function(t){var e,n,a;return void 0===t?"Undefined":null===t?"Null":"string"==typeof(n=function(t,e){try{return t[e]}catch(t){}}(e=Object(t),i))?n:o?r(e):"Object"==(a=r(e))&&"function"==typeof e.callee?"Arguments":a}},function(t,e){t.exports=function(t,e,n,r){if(!(t instanceof e)||void 0!==r&&r in t)throw TypeError(n+": incorrect invocation!");return t}},function(t,e,n){var r=n(70),i=n(8)("iterator"),o=n(42);t.exports=n(3).getIteratorMethod=function(t){if(void 0!=t)return t[i]||t["@@iterator"]||o[r(t)]}},function(t,e,n){"use strict";var r=n(36);t.exports.f=function(t){return new function(t){var e,n;this.promise=new t(function(t,r){if(void 0!==e||void 0!==n)throw TypeError("Bad Promise constructor");e=t,n=r}),this.resolve=r(e),this.reject=r(n)}(t)}},function(t,e,n){var r=n(17);t.exports=function(t,e,n){for(var i in e)n&&t[i]?t[i]=e[i]:r(t,i,e[i]);return t}},function(t,e){t.exports=require("util")},function(t,e,n){"use strict";const r=n(9).fromCallback,i=n(176);t.exports={readJson:r(i.readFile),readJsonSync:i.readFileSync,writeJson:r(i.writeFile),writeJsonSync:i.writeFileSync}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.SimpleErrorHandler=e.RunOnceScheduler=void 0;var r=u(n(25));e.UUID=function(){return"xxxyxxxxxxxyxxxxxxxxxyxxxx".replace(/[xy]/g,function(t){var e=16*Math.random()|0,n="x"===t?e:3&e|8;return n.toString(16)})},e.arrayBufferToBase64=function(t){for(var e="",n=new Uint8Array(t),r=n.byteLength,i=0;i<r;i++)e+=String.fromCharCode(n[i]);return window.btoa(e)},e.HASH=function(t){return"string"==typeof t?a.default.SHA256(t).toString(a.default.enc.Hex):a.default.SHA256(a.default.lib.WordArray.create(t)).toString(a.default.enc.Hex)},e.MD5=function(t){return"string"==typeof t?a.default.MD5(t).toString(a.default.enc.Base64):a.default.MD5(a.default.lib.WordArray.create(t)).toString(a.default.enc.Base64)},e.BTOA=function(t){var e;e=t instanceof Buffer?t:new Buffer(t.toString(),"binary");return e.toString("base64")},e.verifyRSA=function(t,e,n){var r="";"appso-9beta"==n?r="-----BEGIN PUBLIC KEY-----\nMIICIjANBgkqhkiG9w0BAQEFAAOCAg8AMIICCgKCAgEAlPlpYTmSDKVWhIvSk0N5\n01AD/t+4xblO9suabgP7CUeGg/CqGsv3bVkTtw/qsNW2DvYS0Rc25vB65vs6gbzU\nIsne9U0RygnnRkJJA2706hRqRQC0Q5dUxs52+8paJ7QodeTvOkD1RBybjjiVI0Mp\njgqb4zhNWSU2upTjbMU1QjnaMGjsWdtnXSz8AALbsBVHpnyT4fE/XKSWepYHGuwc\nUsEs7iNUdU8/bQwLkR8qN/CPzbFHoxF3iHSEkHZlePYaBdAJywqP56g4DHKMZRi1\nk/cN+UnFndPMp+QuloGtCvPQpGzOurnuAokF2E3gQFLtZxz16wOmeSHnk48HqD0k\nBMp/1x1b+gwndRVngKkfQdl3xRfe/d5evAFXKT0hPt3ttZ5DBbi/WEhrjp/C+Smd\nXMWcimLNbj7w3ELGohZs9AjCNogzaUuvAPuU/LN6p0MFXc5YaPawUES/2eC18ipb\nvRt7Air9O0kFCsxzqcEtRTyM1j+QAtwwztFA1FhjO0X+wxhByHjWtMUkMRHo6f+P\nmbTG/DbP2hwx2+x0LByCQ9NlQC9VaBtSd1X8cJ7fL1qtE6V04CJdHEzZf8QNRNvI\nFK5IO2DIVE5v4DRTLIISeWuAegP8Lv3BBJ3nxkX1EZRNMdIco5NkH0sM5sM8Ol9R\nI4GqvluVMIro2tIX5UVUV0kCAwEAAQ==\n-----END PUBLIC KEY-----":"9beta"==n&&(r="-----BEGIN PUBLIC KEY-----\nMIICIjANBgkqhkiG9w0BAQEFAAOCAg8AMIICCgKCAgEAlPlpYTmSDKVWhIvSk0N5\n01AD/t+4xblO9suabgP7CUeGg/CqGsv3bVkTtw/qsNW2DvYS0Rc25vB65vs6gbzU\nIsne9U0RygnnRkJJA2706hRqRQC0Q5dUxs52+8paJ7QodeTvOkD1RBybjjiVI0Mp\njgqb4zhNWSU2upTjbMU1QjnaMGjsWdtnXSz8AALbsBVHpnyT4fE/XKSWepYHGuwc\nUsEs7iNUdU8/bQwLkR8qN/CPzbFHoxF3iHSEkHZlePYaBdAJywqP56g4DHKMZRi1\nk/cN+UnFndPMp+QuloGtCvPQpGzOurnuAokF2E3gQFLtZxz16wOmeSHnk48HqD0k\nBMp/1x1b+gwndRVngKkfQdl3xRfe/d5evAFXKT0hPt3ttZ5DBbi/WEhrjp/C+Smd\nXMWcimLNbj7w3ELGohZs9AjCNogzaUuvAPuU/LN6p0MFXc5YaPawUES/2eC18ipb\nvRt7Air9O0kFCsxzqcEtRTyM1j+QAtwwztFA1FhjO0X+wxhByHjWtMUkMRHo6f+P\nmbTG/DbP2hwx2+x0LByCQ9NlQC9VaBtSd1X8cJ7fL1qtE6V04CJdHEzZf8QNRNvI\nFK5IO2DIVE5v4DRTLIISeWuAegP8Lv3BBJ3nxkX1EZRNMdIco5NkH0sM5sM8Ol9R\nI4GqvluVMIro2tIX5UVUV0kCAwEAAQ==\n-----END PUBLIC KEY-----");try{var o=i.default.createVerify("RSA-SHA256");return o.update(t),o.verify(r,e,"base64")}catch(t){return!1}},e.isDebugging=function(t){return o.enabled(t)},e.isArray=function(t){return Array.isArray(t)||"[object Array]"===toString.call(t)},e.isObject=function(t){return"[object Object]"===toString.call(t)},e.promiseSome=function(t){return new r.default(function(e,n){t=t.map(function(t){return t.then(e).catch(function(t){return t})}),r.default.all(t).then(n)})};var i=u(n(110)),o=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}(n(223)),a=u(n(229)),s=u(n(14));function u(t){return t&&t.__esModule?t:{default:t}}global.process&&o.enable(process.env.DEBUG),String.prototype.withMnemonic=function(t){var e=this;if(t&&"win32"===process.platform){t=t.toUpperCase();var n=!1;for(var r in e.split("")){if(e.substr(r,1).toUpperCase()===t){n=!0,e=e.substr(0,r)+"&"+e.substr(r);break}}n||(e=e+" (&"+t+")")}return""+e},String.prototype.partition=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",e=this.indexOf(t);return e<0?[""+this,"",""]:[""+this.substr(0,e),t,""+this.substr(e+t.length)]},String.prototype.rpartition=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",e=this.lastIndexOf(t);return e<0?["","",""+this]:[""+this.substr(0,e),t,""+this.substr(e+t.length)]},Promise.resolveAsync=function(){for(var t=arguments.length,e=Array(t),n=0;n<t;n++)e[n]=arguments[n];return new r.default(function(t){return setTimeout(function(){return t.apply(void 0,e)},0)})};e.RunOnceScheduler=class{constructor(t,e){this._timeoutToken=-1,this._runner=t,this._timeout=e,this._timeoutHandler=this._onTimeout.bind(this)}dispose(){this.cancel(),this._runner=null}cancel(){this.isScheduled()&&(clearTimeout(this._timeoutToken),this._timeoutToken=-1)}setRunner(t){this._runner=t}schedule(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this._timeout;this.cancel(),this._timeoutToken=setTimeout(this._timeoutHandler,t)}isScheduled(){return-1!==this._timeoutToken}_onTimeout(){this._timeoutToken=-1,this._runner&&this._runner()}};e.SimpleErrorHandler=class{constructor(t){this.logger=t,this.dialog=null}handle(t){var e="Unknow Error";t&&(e=t.stack||t.message||t.toString());var n=s.default.remote?s.default.remote.BrowserWindow:s.default.BrowserWindow;if(this.logger.error(e),n.openError){var r=n.vana.error;if(null!==r&&null!==n.fromId(r))return;n.openError({type:"error",errorMsg:e})}else this.dialog&&this.dialog.showMessageBoxOnTop({type:"error",title:"XMind",message:"Oops, some error occurred!",detail:e,buttons:["OK"],cancelId:0});var i=s.default.remote?s.default.remote.app:s.default.app;i&&i.tracker&&i.tracker.track({eventCategory:"Error",eventAction:"handleError",eventName:e.split(".")[0]})}}},function(t,e,n){var r;r=function(t){var e,n,r,i,o,a;return n=(e=t).lib,r=n.WordArray,i=n.Hasher,o=[],a=e.algo.SHA1=i.extend({_doReset:function(){this._hash=new r.init([1732584193,4023233417,2562383102,271733878,3285377520])},_doProcessBlock:function(t,e){for(var n=this._hash.words,r=n[0],i=n[1],a=n[2],s=n[3],u=n[4],c=0;c<80;c++){if(c<16)o[c]=0|t[e+c];else{var l=o[c-3]^o[c-8]^o[c-14]^o[c-16];o[c]=l<<1|l>>>31}var h=(r<<5|r>>>27)+u+o[c];h+=c<20?1518500249+(i&a|~i&s):c<40?1859775393+(i^a^s):c<60?(i&a|i&s|a&s)-1894007588:(i^a^s)-899497514,u=s,s=a,a=i<<30|i>>>2,i=r,r=h}n[0]=n[0]+r|0,n[1]=n[1]+i|0,n[2]=n[2]+a|0,n[3]=n[3]+s|0,n[4]=n[4]+u|0},_doFinalize:function(){var t=this._data,e=t.words,n=8*this._nDataBytes,r=8*t.sigBytes;return e[r>>>5]|=128<<24-r%32,e[14+(r+64>>>9<<4)]=Math.floor(n/4294967296),e[15+(r+64>>>9<<4)]=n,t.sigBytes=4*e.length,this._process(),this._hash},clone:function(){var t=i.clone.call(this);return t._hash=this._hash.clone(),t}}),e.SHA1=i._createHelper(a),e.HmacSHA1=i._createHmacHelper(a),t.SHA1},t.exports=r(n(0))},function(t,e,n){var r;r=function(t){var e,n,r;n=(e=t).lib.Base,r=e.enc.Utf8,e.algo.HMAC=n.extend({init:function(t,e){t=this._hasher=new t.init,"string"==typeof e&&(e=r.parse(e));var n=t.blockSize,i=4*n;e.sigBytes>i&&(e=t.finalize(e)),e.clamp();for(var o=this._oKey=e.clone(),a=this._iKey=e.clone(),s=o.words,u=a.words,c=0;c<n;c++)s[c]^=1549556828,u[c]^=909522486;o.sigBytes=a.sigBytes=i,this.reset()},reset:function(){var t=this._hasher;t.reset(),t.update(this._iKey)},update:function(t){return this._hasher.update(t),this},finalize:function(t){var e=this._hasher,n=e.finalize(t);return e.reset(),e.finalize(this._oKey.clone().concat(n))}})},t.exports=r(n(0))},function(t,e,n){t.exports={default:n(255),__esModule:!0}},function(t,e,n){"use strict";function r(t){switch(t._type){case"document":case"block_quote":case"list":case"item":case"paragraph":case"heading":case"emph":case"strong":case"link":case"image":case"custom_inline":case"custom_block":return!0;default:return!1}}var i=function(t,e){this.current=t,this.entering=!0===e},o=function(){var t=this.current,e=this.entering;if(null===t)return null;var n=r(t);return e&&n?t._firstChild?(this.current=t._firstChild,this.entering=!0):this.entering=!1:t===this.root?this.current=null:null===t._next?(this.current=t._parent,this.entering=!1):(this.current=t._next,this.entering=!0),{entering:e,node:t}},a=function(t,e){this._type=t,this._parent=null,this._firstChild=null,this._lastChild=null,this._prev=null,this._next=null,this._sourcepos=e,this._lastLineBlank=!1,this._open=!0,this._string_content=null,this._literal=null,this._listData={},this._info=null,this._destination=null,this._title=null,this._isFenced=!1,this._fenceChar=null,this._fenceLength=0,this._fenceOffset=null,this._level=null,this._onEnter=null,this._onExit=null},s=a.prototype;Object.defineProperty(s,"isContainer",{get:function(){return r(this)}}),Object.defineProperty(s,"type",{get:function(){return this._type}}),Object.defineProperty(s,"firstChild",{get:function(){return this._firstChild}}),Object.defineProperty(s,"lastChild",{get:function(){return this._lastChild}}),Object.defineProperty(s,"next",{get:function(){return this._next}}),Object.defineProperty(s,"prev",{get:function(){return this._prev}}),Object.defineProperty(s,"parent",{get:function(){return this._parent}}),Object.defineProperty(s,"sourcepos",{get:function(){return this._sourcepos}}),Object.defineProperty(s,"literal",{get:function(){return this._literal},set:function(t){this._literal=t}}),Object.defineProperty(s,"destination",{get:function(){return this._destination},set:function(t){this._destination=t}}),Object.defineProperty(s,"title",{get:function(){return this._title},set:function(t){this._title=t}}),Object.defineProperty(s,"info",{get:function(){return this._info},set:function(t){this._info=t}}),Object.defineProperty(s,"level",{get:function(){return this._level},set:function(t){this._level=t}}),Object.defineProperty(s,"listType",{get:function(){return this._listData.type},set:function(t){this._listData.type=t}}),Object.defineProperty(s,"listTight",{get:function(){return this._listData.tight},set:function(t){this._listData.tight=t}}),Object.defineProperty(s,"listStart",{get:function(){return this._listData.start},set:function(t){this._listData.start=t}}),Object.defineProperty(s,"listDelimiter",{get:function(){return this._listData.delimiter},set:function(t){this._listData.delimiter=t}}),Object.defineProperty(s,"onEnter",{get:function(){return this._onEnter},set:function(t){this._onEnter=t}}),Object.defineProperty(s,"onExit",{get:function(){return this._onExit},set:function(t){this._onExit=t}}),a.prototype.appendChild=function(t){t.unlink(),t._parent=this,this._lastChild?(this._lastChild._next=t,t._prev=this._lastChild,this._lastChild=t):(this._firstChild=t,this._lastChild=t)},a.prototype.prependChild=function(t){t.unlink(),t._parent=this,this._firstChild?(this._firstChild._prev=t,t._next=this._firstChild,this._firstChild=t):(this._firstChild=t,this._lastChild=t)},a.prototype.unlink=function(){this._prev?this._prev._next=this._next:this._parent&&(this._parent._firstChild=this._next),this._next?this._next._prev=this._prev:this._parent&&(this._parent._lastChild=this._prev),this._parent=null,this._next=null,this._prev=null},a.prototype.insertAfter=function(t){t.unlink(),t._next=this._next,t._next&&(t._next._prev=t),t._prev=this,this._next=t,t._parent=this._parent,t._next||(t._parent._lastChild=t)},a.prototype.insertBefore=function(t){t.unlink(),t._prev=this._prev,t._prev&&(t._prev._next=t),t._next=this,this._prev=t,t._parent=this._parent,t._prev||(t._parent._firstChild=t)},a.prototype.walker=function(){return new function(t){return{current:t,root:t,entering:!0,next:o,resumeAt:i}}(this)},t.exports=a},function(t,e,n){"use strict";e.__esModule=!0;var r,i=n(35),o=(r=i)&&r.__esModule?r:{default:r};e.default=o.default||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t}},function(t,e,n){t.exports=!n(13)&&!n(21)(function(){return 7!=Object.defineProperty(n(55)("div"),"a",{get:function(){return 7}}).a})},function(t,e,n){var r=n(22),i=n(23),o=n(131)(!1),a=n(60)("IE_PROTO");t.exports=function(t,e){var n,s=i(t),u=0,c=[];for(n in s)n!=a&&r(s,n)&&c.push(n);for(;e.length>u;)r(s,n=e[u++])&&(~o(c,n)||c.push(n));return c}},function(t,e,n){t.exports={default:n(138),__esModule:!0}},function(t,e,n){t.exports=n(17)},function(t,e,n){var r=n(7).document;t.exports=r&&r.documentElement},function(t,e){t.exports=function(t,e){return{value:e,done:!!t}}},function(t,e,n){var r=n(38);t.exports=Array.isArray||function(t){return"Array"==r(t)}},function(t,e,n){var r=n(84),i=n(62).concat("length","prototype");e.f=Object.getOwnPropertyNames||function(t){return r(t,i)}},function(t,e,n){var r=n(15);t.exports=function(t,e,n,i){try{return i?e(r(n)[0],n[1]):e(n)}catch(e){var o=t.return;throw void 0!==o&&r(o.call(t)),e}}},function(t,e,n){var r=n(42),i=n(8)("iterator"),o=Array.prototype;t.exports=function(t){return void 0!==t&&(r.Array===t||o[i]===t)}},function(t,e,n){var r=n(15),i=n(36),o=n(8)("species");t.exports=function(t,e){var n,a=r(t).constructor;return void 0===a||void 0==(n=r(a)[o])?e:i(n)}},function(t,e,n){var r,i,o,a=n(16),s=n(159),u=n(87),c=n(55),l=n(7),h=l.process,d=l.setImmediate,f=l.clearImmediate,p=l.MessageChannel,g=l.Dispatch,v=0,m={},y=function(){var t=+this;if(m.hasOwnProperty(t)){var e=m[t];delete m[t],e()}},_=function(t){y.call(t.data)};d&&f||(d=function(t){for(var e=[],n=1;arguments.length>n;)e.push(arguments[n++]);return m[++v]=function(){s("function"==typeof t?t:Function(t),e)},r(v),v},f=function(t){delete m[t]},"process"==n(38)(h)?r=function(t){h.nextTick(a(y,t,1))}:g&&g.now?r=function(t){g.now(a(y,t,1))}:p?(o=(i=new p).port2,i.port1.onmessage=_,r=a(o.postMessage,o,1)):l.addEventListener&&"function"==typeof postMessage&&!l.importScripts?(r=function(t){l.postMessage(t+"","*")},l.addEventListener("message",_,!1)):r="onreadystatechange"in c("script")?function(t){u.appendChild(c("script")).onreadystatechange=function(){u.removeChild(this),y.call(t)}}:function(t){setTimeout(a(y,t,1),0)}),t.exports={set:d,clear:f}},function(t,e){t.exports=function(t){try{return{e:!1,v:t()}}catch(t){return{e:!0,v:t}}}},function(t,e,n){var r=n(15),i=n(12),o=n(73);t.exports=function(t,e){if(r(t),i(e)&&e.constructor===t)return e;var n=o.f(t);return(0,n.resolve)(e),n.promise}},function(t,e,n){"use strict";var r=n(7),i=n(3),o=n(11),a=n(13),s=n(8)("species");t.exports=function(t){var e="function"==typeof i[t]?i[t]:r[t];a&&e&&!e[s]&&o.f(e,s,{configurable:!0,get:function(){return this}})}},function(t,e,n){var r=n(8)("iterator"),i=!1;try{var o=[7][r]();o.return=function(){i=!0},Array.from(o,function(){throw 2})}catch(t){}t.exports=function(t,e){if(!e&&!i)return!1;var n=!1;try{var o=[7],a=o[r]();a.next=function(){return{done:n=!0}},o[r]=function(){return a},t(o)}catch(t){}return n}},function(t,e,n){"use strict";const r=n(164),i=n(189),o=function(t,e){const n=t;t={};for(let e in n)t[e]=n[e];t.isDirectory=((e,n)=>{t.stat(e,(t,e)=>{t?n(t):n(null,e.isDirectory())})}),t.isDirectorySync=(e=>t.statSync(e).isDirectory());for(let n in t){let r=t[n];"function"==typeof r&&("Sync"!=n.slice(-4)&&(n.match(/^[A-Z]/)||-1==["exists","watch","watchFile","unwatchFile","createReadStream","createWriteStream"].indexOf(n)&&(t[n+"Async"]=e.promisify(r))))}return t.existsAsync=(n=>new e(e=>t.exists(n,e))),t.usePromise=(t=>o(n,t)),t.useFs=(t=>o(t,e)),t};t.exports=o(r,i)},function(t,e,n){const r=n(9).fromCallback,i=n(4),o=["access","appendFile","chmod","chown","close","copyFile","fchmod","fchown","fdatasync","fstat","fsync","ftruncate","futimes","lchown","link","lstat","mkdir","mkdtemp","open","readFile","readdir","readlink","realpath","rename","rmdir","stat","symlink","truncate","unlink","utimes","writeFile"].filter(t=>"function"==typeof i[t]);Object.keys(i).forEach(t=>{e[t]=i[t]}),o.forEach(t=>{e[t]=r(i[t])}),e.exists=function(t,e){return"function"==typeof e?i.exists(t,e):new Promise(e=>i.exists(t,e))},e.read=function(t,e,n,r,o,a){return"function"==typeof a?i.read(t,e,n,r,o,a):new Promise((a,s)=>{i.read(t,e,n,r,o,(t,e,n)=>{if(t)return s(t);a({bytesRead:e,buffer:n})})})},e.write=function(t,e,n,r,o,a){return"function"==typeof arguments[arguments.length-1]?i.write(t,e,n,r,o,a):"string"==typeof e?new Promise((o,a)=>{i.write(t,e,n,r,(t,e,n)=>{if(t)return a(t);o({bytesWritten:e,buffer:n})})}):new Promise((a,s)=>{i.write(t,e,n,r,o,(t,e,n)=>{if(t)return s(t);a({bytesWritten:e,buffer:n})})})}},function(t,e,n){"use strict";var r=n(28);t.exports=function(t){if(null===t||"object"!=typeof t)return t;if(t instanceof Object)var e={__proto__:t.__proto__};else var e=Object.create(null);return Object.getOwnPropertyNames(t).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}),e}(r)},function(t,e){t.exports=require("assert")},function(t,e,n){"use strict";const r=n(4),i=n(2),o=n(10).mkdirs,a=n(19).pathExists,s=n(105).utimesMillis,u=Symbol("notExist"),c=Symbol("existsReg");function l(t,e,n,r){const s=i.dirname(e);a(s,(i,a)=>i?r(i):a?h(t,e,n,r):void o(s,i=>i?r(i):h(t,e,n,r)))}function h(t,e,n,r){return n.filter?d(f,t,e,n,r):f(t,e,n,r)}function d(t,e,n,r,i){Promise.resolve(r.filter(e,n)).then(o=>o?t(e,n,r,i):i(),t=>i(t))}function f(t,e,n,o){(n.dereference?r.stat:r.lstat)(t,(a,s)=>a?o(a):s.isDirectory()?function(t,e,n,i,o){y(n,(a,s)=>a?o(a):s===u?_(e,n)?o(new Error(`Cannot copy '${e}' to a subdirectory of itself, '${n}'.`)):function(t,e,n,i,o){r.mkdir(n,t.mode,a=>{if(a)return o(a);r.chmod(n,t.mode,t=>t?o(t):m(e,n,i,o))})}(t,e,n,i,o):s===c?_(e,n)?o(new Error(`Cannot copy '${e}' to a subdirectory of itself, '${n}'.`)):function(t,e,n,i){r.stat(e,(r,o)=>r?i(r):o.isDirectory()?m(t,e,n,i):i(new Error(`Cannot overwrite non-directory '${e}' with directory '${t}'.`)))}(e,n,i,o):e===s?o():m(e,n,i,o))}(s,t,e,n,o):s.isFile()||s.isCharacterDevice()||s.isBlockDevice()?function(t,e,n,r,i){y(n,(o,a)=>o?i(o):a===u?g(t,e,n,r,i):a===c?p(t,e,n,r,i):e===a?i():p(t,e,n,r,i))}(s,t,e,n,o):s.isSymbolicLink()?function(t,e,n,o){r.readlink(t,(t,a)=>{if(t)return o(t);n.dereference&&(a=i.resolve(process.cwd(),a)),y(e,(t,s)=>t?o(t):s===u||s===c?r.symlink(a,e,o):(n.dereference&&(s=i.resolve(process.cwd(),s)),s===a?o():void r.stat(e,(t,n)=>t?o(t):n.isDirectory()&&_(s,a)?o(new Error(`Cannot overwrite '${s}' with '${a}'.`)):function(t,e,n){r.unlink(e,i=>i?n(i):r.symlink(t,e,n))}(a,e,o))))})}(t,e,n,o):void 0)}function p(t,e,n,i,o){if(!i.overwrite)return i.errorOnExist?o(new Error(`'${n}' already exists`)):o();r.unlink(n,r=>r?o(r):g(t,e,n,i,o))}function g(t,e,n,i,o){return"function"==typeof r.copyFile?r.copyFile(e,n,e=>e?o(e):v(t,n,i,o)):function(t,e,n,i,o){const a=r.createReadStream(e);a.on("error",t=>o(t)).once("open",()=>{const e=r.createWriteStream(n,{mode:t.mode});e.on("error",t=>o(t)).on("open",()=>a.pipe(e)).once("close",()=>v(t,n,i,o))})}(t,e,n,i,o)}function v(t,e,n,i){r.chmod(e,t.mode,r=>r?i(r):n.preserveTimestamps?s(e,t.atime,t.mtime,i):i())}function m(t,e,n,o){r.readdir(t,(r,a)=>r?o(r):function t(e,n,r,o,a){const s=e.pop();if(!s)return a();h(i.join(n,s),i.join(r,s),o,i=>i?a(i):t(e,n,r,o,a))}(a,t,e,n,o))}function y(t,e){r.readlink(t,(t,n)=>t?"ENOENT"===t.code?e(null,u):"EINVAL"===t.code||"UNKNOWN"===t.code?e(null,c):e(t):e(null,n))}function _(t,e){const n=e.split(i.dirname(t)+i.sep)[1];if(n){const r=n.split(i.sep)[0];return!!r&&(t!==e&&e.indexOf(t)>-1&&r===i.basename(t))}return!1}t.exports=function(t,e,n,r){return"function"!=typeof n||r?"function"==typeof n&&(n={filter:n}):(r=n,n={}),r=r||function(){},(n=n||{}).clobber=!("clobber"in n&&!n.clobber),n.overwrite="overwrite"in n?!!n.overwrite:n.clobber,n.preserveTimestamps&&"ia32"===process.arch&&console.warn("fs-extra: Using the preserveTimestamps option in 32-bit node is not recommended;\n\n    see https://github.com/jprichardson/node-fs-extra/issues/269"),(t=i.resolve(t))===(e=i.resolve(e))?r(new Error("Source and destination must not be the same.")):n.filter?d(l,t,e,n,r):l(t,e,n,r)}},function(t,e,n){"use strict";const r=n(2);function i(t){return(t=r.normalize(r.resolve(t)).split(r.sep)).length>0?t[0]:null}const o=/[<>:"|?*]/;t.exports={getRootPath:i,invalidWin32Path:function(t){const e=i(t);return t=t.replace(e,""),o.test(t)}}},function(t,e,n){"use strict";const r=n(4),i=n(51),o=n(2);t.exports={hasMillisRes:function(t){let e=o.join("millis-test"+Date.now().toString()+Math.random().toString().slice(2));e=o.join(i.tmpdir(),e);const n=new Date(1435410243862);r.writeFile(e,"https://github.com/jprichardson/node-fs-extra/pull/141",i=>{if(i)return t(i);r.open(e,"r+",(i,o)=>{if(i)return t(i);r.futimes(o,n,n,n=>{if(n)return t(n);r.close(o,n=>{if(n)return t(n);r.stat(e,(e,n)=>{if(e)return t(e);t(null,n.mtime>1435410243e3)})})})})})},hasMillisResSync:function(){let t=o.join("millis-test-sync"+Date.now().toString()+Math.random().toString().slice(2));t=o.join(i.tmpdir(),t);const e=new Date(1435410243862);r.writeFileSync(t,"https://github.com/jprichardson/node-fs-extra/pull/141");const n=r.openSync(t,"r+");return r.futimesSync(n,e,e),r.closeSync(n),r.statSync(t).mtime>1435410243e3},timeRemoveMillis:function(t){if("number"==typeof t)return 1e3*Math.floor(t/1e3);if(t instanceof Date)return new Date(1e3*Math.floor(t.getTime()/1e3));throw new Error("fs-extra: timeRemoveMillis() unknown parameter type")},utimesMillis:function(t,e,n,i){r.open(t,"r+",(t,o)=>{if(t)return i(t);r.futimes(o,e,n,t=>{r.close(o,e=>{i&&i(t||e)})})})},utimesMillisSync:function(t,e,n){const i=r.openSync(t,"r+");return r.futimesSync(i,e,n),r.closeSync(i)}}},function(t,e,n){t.exports={copySync:n(173)}},function(t,e){t.exports=function(t){if("function"==typeof Buffer.allocUnsafe)try{return Buffer.allocUnsafe(t)}catch(e){return new Buffer(t)}return new Buffer(t)}},function(t,e,n){"use strict";t.exports=function(t){var e=n(1),r=n(29).keys,i=e.tryCatch,o=e.errorObj;return function(n,a,s){return function(u){var c=s._boundValue();t:for(var l=0;l<n.length;++l){var h=n[l];if(h===Error||null!=h&&h.prototype instanceof Error){if(u instanceof h)return i(a).call(c,u)}else if("function"==typeof h){var d=i(h).call(c,u);if(d===o)return d;if(d)return i(a).call(c,u)}else if(e.isObject(u)){for(var f=r(h),p=0;p<f.length;++p){var g=f[p];if(h[g]!=u[g])continue t}return i(a).call(c,u)}}return t}}}},function(t,e,n){"use strict";var r=n(1),i=r.maybeWrapAsError,o=n(20).OperationalError,a=n(29);var s=/^(?:name|message|stack|cause)$/;function u(t){var e;if(function(t){return t instanceof Error&&a.getPrototypeOf(t)===Error.prototype}(t)){(e=new o(t)).name=t.name,e.message=t.message,e.stack=t.stack;for(var n=a.keys(t),i=0;i<n.length;++i){var u=n[i];s.test(u)||(e[u]=t[u])}return e}return r.markAsOriginatingFromRejection(t),t}t.exports=function(t,e){return function(n,r){if(null!==t){if(n){var o=u(i(n));t._attachExtraTrace(o),t._reject(o)}else if(e){for(var a=arguments.length,s=new Array(Math.max(a-1,0)),c=1;c<a;++c)s[c-1]=arguments[c];t._fulfill(s)}else t._fulfill(r);t=null}}}},function(t,e){t.exports=require("crypto")},function(t,e,n){var r;function i(t){function n(){if(n.enabled){var t=n,i=+new Date,o=i-(r||i);t.diff=o,t.prev=r,t.curr=i,r=i;for(var a=new Array(arguments.length),s=0;s<a.length;s++)a[s]=arguments[s];a[0]=e.coerce(a[0]),"string"!=typeof a[0]&&a.unshift("%O");var u=0;a[0]=a[0].replace(/%([a-zA-Z%])/g,function(n,r){if("%%"===n)return n;u++;var i=e.formatters[r];if("function"==typeof i){var o=a[u];n=i.call(t,o),a.splice(u,1),u--}return n}),e.formatArgs.call(t,a),(n.log||e.log||console.log.bind(console)).apply(t,a)}}return n.namespace=t,n.enabled=e.enabled(t),n.useColors=e.useColors(),n.color=function(t){var n,r=0;for(n in t)r=(r<<5)-r+t.charCodeAt(n),r|=0;return e.colors[Math.abs(r)%e.colors.length]}(t),"function"==typeof e.init&&e.init(n),n}(e=t.exports=i.debug=i.default=i).coerce=function(t){return t instanceof Error?t.stack||t.message:t},e.disable=function(){e.enable("")},e.enable=function(t){e.save(t),e.names=[],e.skips=[];for(var n=("string"==typeof t?t:"").split(/[\s,]+/),r=n.length,i=0;i<r;i++)n[i]&&("-"===(t=n[i].replace(/\*/g,".*?"))[0]?e.skips.push(new RegExp("^"+t.substr(1)+"$")):e.names.push(new RegExp("^"+t+"$")))},e.enabled=function(t){var n,r;for(n=0,r=e.skips.length;n<r;n++)if(e.skips[n].test(t))return!1;for(n=0,r=e.names.length;n<r;n++)if(e.names[n].test(t))return!0;return!1},e.humanize=n(225),e.names=[],e.skips=[],e.formatters={}},function(t,e,n){var r;r=function(t){return function(e){var n=t,r=n.lib,i=r.WordArray,o=r.Hasher,a=n.algo,s=[],u=[];!function(){function t(t){for(var n=e.sqrt(t),r=2;r<=n;r++)if(!(t%r))return!1;return!0}function n(t){return 4294967296*(t-(0|t))|0}for(var r=2,i=0;i<64;)t(r)&&(i<8&&(s[i]=n(e.pow(r,.5))),u[i]=n(e.pow(r,1/3)),i++),r++}();var c=[],l=a.SHA256=o.extend({_doReset:function(){this._hash=new i.init(s.slice(0))},_doProcessBlock:function(t,e){for(var n=this._hash.words,r=n[0],i=n[1],o=n[2],a=n[3],s=n[4],l=n[5],h=n[6],d=n[7],f=0;f<64;f++){if(f<16)c[f]=0|t[e+f];else{var p=c[f-15],g=(p<<25|p>>>7)^(p<<14|p>>>18)^p>>>3,v=c[f-2],m=(v<<15|v>>>17)^(v<<13|v>>>19)^v>>>10;c[f]=g+c[f-7]+m+c[f-16]}var y=r&i^r&o^i&o,_=(r<<30|r>>>2)^(r<<19|r>>>13)^(r<<10|r>>>22),E=d+((s<<26|s>>>6)^(s<<21|s>>>11)^(s<<7|s>>>25))+(s&l^~s&h)+u[f]+c[f];d=h,h=l,l=s,s=a+E|0,a=o,o=i,i=r,r=E+(_+y)|0}n[0]=n[0]+r|0,n[1]=n[1]+i|0,n[2]=n[2]+o|0,n[3]=n[3]+a|0,n[4]=n[4]+s|0,n[5]=n[5]+l|0,n[6]=n[6]+h|0,n[7]=n[7]+d|0},_doFinalize:function(){var t=this._data,n=t.words,r=8*this._nDataBytes,i=8*t.sigBytes;return n[i>>>5]|=128<<24-i%32,n[14+(i+64>>>9<<4)]=e.floor(r/4294967296),n[15+(i+64>>>9<<4)]=r,t.sigBytes=4*n.length,this._process(),this._hash},clone:function(){var t=o.clone.call(this);return t._hash=this._hash.clone(),t}});n.SHA256=o._createHelper(l),n.HmacSHA256=o._createHmacHelper(l)}(Math),t.SHA256},t.exports=r(n(0))},function(t,e,n){var r;r=function(t){return function(){var e=t,n=e.lib.Hasher,r=e.x64,i=r.Word,o=r.WordArray,a=e.algo;function s(){return i.create.apply(i,arguments)}var u=[s(1116352408,3609767458),s(1899447441,602891725),s(3049323471,3964484399),s(3921009573,2173295548),s(961987163,4081628472),s(1508970993,3053834265),s(2453635748,2937671579),s(2870763221,3664609560),s(3624381080,2734883394),s(310598401,1164996542),s(607225278,1323610764),s(1426881987,3590304994),s(1925078388,4068182383),s(2162078206,991336113),s(2614888103,633803317),s(3248222580,3479774868),s(3835390401,2666613458),s(4022224774,944711139),s(264347078,2341262773),s(604807628,2007800933),s(770255983,1495990901),s(1249150122,1856431235),s(1555081692,3175218132),s(1996064986,2198950837),s(2554220882,3999719339),s(2821834349,766784016),s(2952996808,2566594879),s(3210313671,3203337956),s(3336571891,1034457026),s(3584528711,2466948901),s(113926993,3758326383),s(338241895,168717936),s(666307205,1188179964),s(773529912,1546045734),s(1294757372,1522805485),s(1396182291,2643833823),s(1695183700,2343527390),s(1986661051,1014477480),s(2177026350,1206759142),s(2456956037,344077627),s(2730485921,1290863460),s(2820302411,3158454273),s(3259730800,3505952657),s(3345764771,106217008),s(3516065817,3606008344),s(3600352804,1432725776),s(4094571909,1467031594),s(275423344,851169720),s(430227734,3100823752),s(506948616,1363258195),s(659060556,3750685593),s(883997877,3785050280),s(958139571,3318307427),s(1322822218,3812723403),s(1537002063,2003034995),s(1747873779,3602036899),s(1955562222,1575990012),s(2024104815,1125592928),s(2227730452,2716904306),s(2361852424,442776044),s(2428436474,593698344),s(2756734187,3733110249),s(3204031479,2999351573),s(3329325298,3815920427),s(3391569614,3928383900),s(3515267271,566280711),s(3940187606,3454069534),s(4118630271,4000239992),s(116418474,1914138554),s(174292421,2731055270),s(289380356,3203993006),s(460393269,320620315),s(685471733,587496836),s(852142971,1086792851),s(1017036298,365543100),s(1126000580,2618297676),s(1288033470,3409855158),s(1501505948,4234509866),s(1607167915,987167468),s(1816402316,1246189591)],c=[];!function(){for(var t=0;t<80;t++)c[t]=s()}();var l=a.SHA512=n.extend({_doReset:function(){this._hash=new o.init([new i.init(1779033703,4089235720),new i.init(3144134277,2227873595),new i.init(1013904242,4271175723),new i.init(2773480762,1595750129),new i.init(1359893119,2917565137),new i.init(2600822924,725511199),new i.init(528734635,4215389547),new i.init(1541459225,327033209)])},_doProcessBlock:function(t,e){for(var n=this._hash.words,r=n[0],i=n[1],o=n[2],a=n[3],s=n[4],l=n[5],h=n[6],d=n[7],f=r.high,p=r.low,g=i.high,v=i.low,m=o.high,y=o.low,_=a.high,E=a.low,A=s.high,S=s.low,T=l.high,x=l.low,b=h.high,w=h.low,C=d.high,I=d.low,L=f,N=p,O=g,R=v,M=m,D=y,P=_,k=E,B=A,F=S,V=T,U=x,H=b,Y=w,G=C,j=I,z=0;z<80;z++){var W=c[z];if(z<16)var K=W.high=0|t[e+2*z],Q=W.low=0|t[e+2*z+1];else{var q=c[z-15],X=q.high,$=q.low,J=(X>>>1|$<<31)^(X>>>8|$<<24)^X>>>7,Z=($>>>1|X<<31)^($>>>8|X<<24)^($>>>7|X<<25),tt=c[z-2],et=tt.high,nt=tt.low,rt=(et>>>19|nt<<13)^(et<<3|nt>>>29)^et>>>6,it=(nt>>>19|et<<13)^(nt<<3|et>>>29)^(nt>>>6|et<<26),ot=c[z-7],at=ot.high,st=ot.low,ut=c[z-16],ct=ut.high,lt=ut.low;K=(K=(K=J+at+((Q=Z+st)>>>0<Z>>>0?1:0))+rt+((Q=Q+it)>>>0<it>>>0?1:0))+ct+((Q=Q+lt)>>>0<lt>>>0?1:0);W.high=K,W.low=Q}var ht,dt=B&V^~B&H,ft=F&U^~F&Y,pt=L&O^L&M^O&M,gt=N&R^N&D^R&D,vt=(L>>>28|N<<4)^(L<<30|N>>>2)^(L<<25|N>>>7),mt=(N>>>28|L<<4)^(N<<30|L>>>2)^(N<<25|L>>>7),yt=(B>>>14|F<<18)^(B>>>18|F<<14)^(B<<23|F>>>9),_t=(F>>>14|B<<18)^(F>>>18|B<<14)^(F<<23|B>>>9),Et=u[z],At=Et.high,St=Et.low,Tt=G+yt+((ht=j+_t)>>>0<j>>>0?1:0),xt=mt+gt;G=H,j=Y,H=V,Y=U,V=B,U=F,B=P+(Tt=(Tt=(Tt=Tt+dt+((ht=ht+ft)>>>0<ft>>>0?1:0))+At+((ht=ht+St)>>>0<St>>>0?1:0))+K+((ht=ht+Q)>>>0<Q>>>0?1:0))+((F=k+ht|0)>>>0<k>>>0?1:0)|0,P=M,k=D,M=O,D=R,O=L,R=N,L=Tt+(vt+pt+(xt>>>0<mt>>>0?1:0))+((N=ht+xt|0)>>>0<ht>>>0?1:0)|0}p=r.low=p+N,r.high=f+L+(p>>>0<N>>>0?1:0),v=i.low=v+R,i.high=g+O+(v>>>0<R>>>0?1:0),y=o.low=y+D,o.high=m+M+(y>>>0<D>>>0?1:0),E=a.low=E+k,a.high=_+P+(E>>>0<k>>>0?1:0),S=s.low=S+F,s.high=A+B+(S>>>0<F>>>0?1:0),x=l.low=x+U,l.high=T+V+(x>>>0<U>>>0?1:0),w=h.low=w+Y,h.high=b+H+(w>>>0<Y>>>0?1:0),I=d.low=I+j,d.high=C+G+(I>>>0<j>>>0?1:0)},_doFinalize:function(){var t=this._data,e=t.words,n=8*this._nDataBytes,r=8*t.sigBytes;return e[r>>>5]|=128<<24-r%32,e[30+(r+128>>>10<<5)]=Math.floor(n/4294967296),e[31+(r+128>>>10<<5)]=n,t.sigBytes=4*e.length,this._process(),this._hash.toX32()},clone:function(){var t=n.clone.call(this);return t._hash=this._hash.clone(),t},blockSize:32});e.SHA512=n._createHelper(l),e.HmacSHA512=n._createHmacHelper(l)}(),t.SHA512},t.exports=r(n(0),n(53))},function(t,e){t.exports=function(t,e,n,r){var i,o=t=t||{},a=typeof t.default;"object"!==a&&"function"!==a||(i=t,o=t.default);var s="function"==typeof o?o.options:o;if(e&&(s.render=e.render,s.staticRenderFns=e.staticRenderFns),n&&(s._scopeId=n),r){var u=s.computed||(s.computed={});Object.keys(r).forEach(function(t){var e=r[t];u[t]=function(){return e}})}return{esModule:i,exports:o,options:s}}},function(t,e,n){var r;(function(){var n=this,i=n._,o=Array.prototype,a=Object.prototype,s=Function.prototype,u=o.push,c=o.slice,l=a.toString,h=a.hasOwnProperty,d=Array.isArray,f=Object.keys,p=s.bind,g=Object.create,v=function(){},m=function(t){return t instanceof m?t:this instanceof m?void(this._wrapped=t):new m(t)};void 0!==t&&t.exports&&(e=t.exports=m),e._=m,m.VERSION="1.8.3";var y=function(t,e,n){if(void 0===e)return t;switch(null==n?3:n){case 1:return function(n){return t.call(e,n)};case 2:return function(n,r){return t.call(e,n,r)};case 3:return function(n,r,i){return t.call(e,n,r,i)};case 4:return function(n,r,i,o){return t.call(e,n,r,i,o)}}return function(){return t.apply(e,arguments)}},_=function(t,e,n){return null==t?m.identity:m.isFunction(t)?y(t,e,n):m.isObject(t)?m.matcher(t):m.property(t)};m.iteratee=function(t,e){return _(t,e,1/0)};var E=function(t,e){return function(n){var r=arguments.length;if(r<2||null==n)return n;for(var i=1;i<r;i++)for(var o=arguments[i],a=t(o),s=a.length,u=0;u<s;u++){var c=a[u];e&&void 0!==n[c]||(n[c]=o[c])}return n}},A=function(t){if(!m.isObject(t))return{};if(g)return g(t);v.prototype=t;var e=new v;return v.prototype=null,e},S=function(t){return function(e){return null==e?void 0:e[t]}},T=Math.pow(2,53)-1,x=S("length"),b=function(t){var e=x(t);return"number"==typeof e&&e>=0&&e<=T};function w(t){return function(e,n,r,i){n=y(n,i,4);var o=!b(e)&&m.keys(e),a=(o||e).length,s=t>0?0:a-1;return arguments.length<3&&(r=e[o?o[s]:s],s+=t),function(e,n,r,i,o,a){for(;o>=0&&o<a;o+=t){var s=i?i[o]:o;r=n(r,e[s],s,e)}return r}(e,n,r,o,s,a)}}m.each=m.forEach=function(t,e,n){var r,i;if(e=y(e,n),b(t))for(r=0,i=t.length;r<i;r++)e(t[r],r,t);else{var o=m.keys(t);for(r=0,i=o.length;r<i;r++)e(t[o[r]],o[r],t)}return t},m.map=m.collect=function(t,e,n){e=_(e,n);for(var r=!b(t)&&m.keys(t),i=(r||t).length,o=Array(i),a=0;a<i;a++){var s=r?r[a]:a;o[a]=e(t[s],s,t)}return o},m.reduce=m.foldl=m.inject=w(1),m.reduceRight=m.foldr=w(-1),m.find=m.detect=function(t,e,n){var r;if(void 0!==(r=b(t)?m.findIndex(t,e,n):m.findKey(t,e,n))&&-1!==r)return t[r]},m.filter=m.select=function(t,e,n){var r=[];return e=_(e,n),m.each(t,function(t,n,i){e(t,n,i)&&r.push(t)}),r},m.reject=function(t,e,n){return m.filter(t,m.negate(_(e)),n)},m.every=m.all=function(t,e,n){e=_(e,n);for(var r=!b(t)&&m.keys(t),i=(r||t).length,o=0;o<i;o++){var a=r?r[o]:o;if(!e(t[a],a,t))return!1}return!0},m.some=m.any=function(t,e,n){e=_(e,n);for(var r=!b(t)&&m.keys(t),i=(r||t).length,o=0;o<i;o++){var a=r?r[o]:o;if(e(t[a],a,t))return!0}return!1},m.contains=m.includes=m.include=function(t,e,n,r){return b(t)||(t=m.values(t)),("number"!=typeof n||r)&&(n=0),m.indexOf(t,e,n)>=0},m.invoke=function(t,e){var n=c.call(arguments,2),r=m.isFunction(e);return m.map(t,function(t){var i=r?e:t[e];return null==i?i:i.apply(t,n)})},m.pluck=function(t,e){return m.map(t,m.property(e))},m.where=function(t,e){return m.filter(t,m.matcher(e))},m.findWhere=function(t,e){return m.find(t,m.matcher(e))},m.max=function(t,e,n){var r,i,o=-1/0,a=-1/0;if(null==e&&null!=t)for(var s=0,u=(t=b(t)?t:m.values(t)).length;s<u;s++)(r=t[s])>o&&(o=r);else e=_(e,n),m.each(t,function(t,n,r){((i=e(t,n,r))>a||i===-1/0&&o===-1/0)&&(o=t,a=i)});return o},m.min=function(t,e,n){var r,i,o=1/0,a=1/0;if(null==e&&null!=t)for(var s=0,u=(t=b(t)?t:m.values(t)).length;s<u;s++)(r=t[s])<o&&(o=r);else e=_(e,n),m.each(t,function(t,n,r){((i=e(t,n,r))<a||i===1/0&&o===1/0)&&(o=t,a=i)});return o},m.shuffle=function(t){for(var e,n=b(t)?t:m.values(t),r=n.length,i=Array(r),o=0;o<r;o++)(e=m.random(0,o))!==o&&(i[o]=i[e]),i[e]=n[o];return i},m.sample=function(t,e,n){return null==e||n?(b(t)||(t=m.values(t)),t[m.random(t.length-1)]):m.shuffle(t).slice(0,Math.max(0,e))},m.sortBy=function(t,e,n){return e=_(e,n),m.pluck(m.map(t,function(t,n,r){return{value:t,index:n,criteria:e(t,n,r)}}).sort(function(t,e){var n=t.criteria,r=e.criteria;if(n!==r){if(n>r||void 0===n)return 1;if(n<r||void 0===r)return-1}return t.index-e.index}),"value")};var C=function(t){return function(e,n,r){var i={};return n=_(n,r),m.each(e,function(r,o){var a=n(r,o,e);t(i,r,a)}),i}};m.groupBy=C(function(t,e,n){m.has(t,n)?t[n].push(e):t[n]=[e]}),m.indexBy=C(function(t,e,n){t[n]=e}),m.countBy=C(function(t,e,n){m.has(t,n)?t[n]++:t[n]=1}),m.toArray=function(t){return t?m.isArray(t)?c.call(t):b(t)?m.map(t,m.identity):m.values(t):[]},m.size=function(t){return null==t?0:b(t)?t.length:m.keys(t).length},m.partition=function(t,e,n){e=_(e,n);var r=[],i=[];return m.each(t,function(t,n,o){(e(t,n,o)?r:i).push(t)}),[r,i]},m.first=m.head=m.take=function(t,e,n){if(null!=t)return null==e||n?t[0]:m.initial(t,t.length-e)},m.initial=function(t,e,n){return c.call(t,0,Math.max(0,t.length-(null==e||n?1:e)))},m.last=function(t,e,n){if(null!=t)return null==e||n?t[t.length-1]:m.rest(t,Math.max(0,t.length-e))},m.rest=m.tail=m.drop=function(t,e,n){return c.call(t,null==e||n?1:e)},m.compact=function(t){return m.filter(t,m.identity)};var I=function(t,e,n,r){for(var i=[],o=0,a=r||0,s=x(t);a<s;a++){var u=t[a];if(b(u)&&(m.isArray(u)||m.isArguments(u))){e||(u=I(u,e,n));var c=0,l=u.length;for(i.length+=l;c<l;)i[o++]=u[c++]}else n||(i[o++]=u)}return i};function L(t){return function(e,n,r){n=_(n,r);for(var i=x(e),o=t>0?0:i-1;o>=0&&o<i;o+=t)if(n(e[o],o,e))return o;return-1}}function N(t,e,n){return function(r,i,o){var a=0,s=x(r);if("number"==typeof o)t>0?a=o>=0?o:Math.max(o+s,a):s=o>=0?Math.min(o+1,s):o+s+1;else if(n&&o&&s)return r[o=n(r,i)]===i?o:-1;if(i!=i)return(o=e(c.call(r,a,s),m.isNaN))>=0?o+a:-1;for(o=t>0?a:s-1;o>=0&&o<s;o+=t)if(r[o]===i)return o;return-1}}m.flatten=function(t,e){return I(t,e,!1)},m.without=function(t){return m.difference(t,c.call(arguments,1))},m.uniq=m.unique=function(t,e,n,r){m.isBoolean(e)||(r=n,n=e,e=!1),null!=n&&(n=_(n,r));for(var i=[],o=[],a=0,s=x(t);a<s;a++){var u=t[a],c=n?n(u,a,t):u;e?(a&&o===c||i.push(u),o=c):n?m.contains(o,c)||(o.push(c),i.push(u)):m.contains(i,u)||i.push(u)}return i},m.union=function(){return m.uniq(I(arguments,!0,!0))},m.intersection=function(t){for(var e=[],n=arguments.length,r=0,i=x(t);r<i;r++){var o=t[r];if(!m.contains(e,o)){for(var a=1;a<n&&m.contains(arguments[a],o);a++);a===n&&e.push(o)}}return e},m.difference=function(t){var e=I(arguments,!0,!0,1);return m.filter(t,function(t){return!m.contains(e,t)})},m.zip=function(){return m.unzip(arguments)},m.unzip=function(t){for(var e=t&&m.max(t,x).length||0,n=Array(e),r=0;r<e;r++)n[r]=m.pluck(t,r);return n},m.object=function(t,e){for(var n={},r=0,i=x(t);r<i;r++)e?n[t[r]]=e[r]:n[t[r][0]]=t[r][1];return n},m.findIndex=L(1),m.findLastIndex=L(-1),m.sortedIndex=function(t,e,n,r){for(var i=(n=_(n,r,1))(e),o=0,a=x(t);o<a;){var s=Math.floor((o+a)/2);n(t[s])<i?o=s+1:a=s}return o},m.indexOf=N(1,m.findIndex,m.sortedIndex),m.lastIndexOf=N(-1,m.findLastIndex),m.range=function(t,e,n){null==e&&(e=t||0,t=0),n=n||1;for(var r=Math.max(Math.ceil((e-t)/n),0),i=Array(r),o=0;o<r;o++,t+=n)i[o]=t;return i};var O=function(t,e,n,r,i){if(!(r instanceof e))return t.apply(n,i);var o=A(t.prototype),a=t.apply(o,i);return m.isObject(a)?a:o};m.bind=function(t,e){if(p&&t.bind===p)return p.apply(t,c.call(arguments,1));if(!m.isFunction(t))throw new TypeError("Bind must be called on a function");var n=c.call(arguments,2),r=function(){return O(t,r,e,this,n.concat(c.call(arguments)))};return r},m.partial=function(t){var e=c.call(arguments,1),n=function(){for(var r=0,i=e.length,o=Array(i),a=0;a<i;a++)o[a]=e[a]===m?arguments[r++]:e[a];for(;r<arguments.length;)o.push(arguments[r++]);return O(t,n,this,this,o)};return n},m.bindAll=function(t){var e,n,r=arguments.length;if(r<=1)throw new Error("bindAll must be passed function names");for(e=1;e<r;e++)t[n=arguments[e]]=m.bind(t[n],t);return t},m.memoize=function(t,e){var n=function(r){var i=n.cache,o=""+(e?e.apply(this,arguments):r);return m.has(i,o)||(i[o]=t.apply(this,arguments)),i[o]};return n.cache={},n},m.delay=function(t,e){var n=c.call(arguments,2);return setTimeout(function(){return t.apply(null,n)},e)},m.defer=m.partial(m.delay,m,1),m.throttle=function(t,e,n){var r,i,o,a=null,s=0;n||(n={});var u=function(){s=!1===n.leading?0:m.now(),a=null,o=t.apply(r,i),a||(r=i=null)};return function(){var c=m.now();s||!1!==n.leading||(s=c);var l=e-(c-s);return r=this,i=arguments,l<=0||l>e?(a&&(clearTimeout(a),a=null),s=c,o=t.apply(r,i),a||(r=i=null)):a||!1===n.trailing||(a=setTimeout(u,l)),o}},m.debounce=function(t,e,n){var r,i,o,a,s,u=function(){var c=m.now()-a;c<e&&c>=0?r=setTimeout(u,e-c):(r=null,n||(s=t.apply(o,i),r||(o=i=null)))};return function(){o=this,i=arguments,a=m.now();var c=n&&!r;return r||(r=setTimeout(u,e)),c&&(s=t.apply(o,i),o=i=null),s}},m.wrap=function(t,e){return m.partial(e,t)},m.negate=function(t){return function(){return!t.apply(this,arguments)}},m.compose=function(){var t=arguments,e=t.length-1;return function(){for(var n=e,r=t[e].apply(this,arguments);n--;)r=t[n].call(this,r);return r}},m.after=function(t,e){return function(){if(--t<1)return e.apply(this,arguments)}},m.before=function(t,e){var n;return function(){return--t>0&&(n=e.apply(this,arguments)),t<=1&&(e=null),n}},m.once=m.partial(m.before,2);var R=!{toString:null}.propertyIsEnumerable("toString"),M=["valueOf","isPrototypeOf","toString","propertyIsEnumerable","hasOwnProperty","toLocaleString"];function D(t,e){var n=M.length,r=t.constructor,i=m.isFunction(r)&&r.prototype||a,o="constructor";for(m.has(t,o)&&!m.contains(e,o)&&e.push(o);n--;)(o=M[n])in t&&t[o]!==i[o]&&!m.contains(e,o)&&e.push(o)}m.keys=function(t){if(!m.isObject(t))return[];if(f)return f(t);var e=[];for(var n in t)m.has(t,n)&&e.push(n);return R&&D(t,e),e},m.allKeys=function(t){if(!m.isObject(t))return[];var e=[];for(var n in t)e.push(n);return R&&D(t,e),e},m.values=function(t){for(var e=m.keys(t),n=e.length,r=Array(n),i=0;i<n;i++)r[i]=t[e[i]];return r},m.mapObject=function(t,e,n){e=_(e,n);for(var r,i=m.keys(t),o=i.length,a={},s=0;s<o;s++)a[r=i[s]]=e(t[r],r,t);return a},m.pairs=function(t){for(var e=m.keys(t),n=e.length,r=Array(n),i=0;i<n;i++)r[i]=[e[i],t[e[i]]];return r},m.invert=function(t){for(var e={},n=m.keys(t),r=0,i=n.length;r<i;r++)e[t[n[r]]]=n[r];return e},m.functions=m.methods=function(t){var e=[];for(var n in t)m.isFunction(t[n])&&e.push(n);return e.sort()},m.extend=E(m.allKeys),m.extendOwn=m.assign=E(m.keys),m.findKey=function(t,e,n){e=_(e,n);for(var r,i=m.keys(t),o=0,a=i.length;o<a;o++)if(e(t[r=i[o]],r,t))return r},m.pick=function(t,e,n){var r,i,o={},a=t;if(null==a)return o;m.isFunction(e)?(i=m.allKeys(a),r=y(e,n)):(i=I(arguments,!1,!1,1),r=function(t,e,n){return e in n},a=Object(a));for(var s=0,u=i.length;s<u;s++){var c=i[s],l=a[c];r(l,c,a)&&(o[c]=l)}return o},m.omit=function(t,e,n){if(m.isFunction(e))e=m.negate(e);else{var r=m.map(I(arguments,!1,!1,1),String);e=function(t,e){return!m.contains(r,e)}}return m.pick(t,e,n)},m.defaults=E(m.allKeys,!0),m.create=function(t,e){var n=A(t);return e&&m.extendOwn(n,e),n},m.clone=function(t){return m.isObject(t)?m.isArray(t)?t.slice():m.extend({},t):t},m.tap=function(t,e){return e(t),t},m.isMatch=function(t,e){var n=m.keys(e),r=n.length;if(null==t)return!r;for(var i=Object(t),o=0;o<r;o++){var a=n[o];if(e[a]!==i[a]||!(a in i))return!1}return!0};var P=function(t,e,n,r){if(t===e)return 0!==t||1/t==1/e;if(null==t||null==e)return t===e;t instanceof m&&(t=t._wrapped),e instanceof m&&(e=e._wrapped);var i=l.call(t);if(i!==l.call(e))return!1;switch(i){case"[object RegExp]":case"[object String]":return""+t==""+e;case"[object Number]":return+t!=+t?+e!=+e:0==+t?1/+t==1/e:+t==+e;case"[object Date]":case"[object Boolean]":return+t==+e}var o="[object Array]"===i;if(!o){if("object"!=typeof t||"object"!=typeof e)return!1;var a=t.constructor,s=e.constructor;if(a!==s&&!(m.isFunction(a)&&a instanceof a&&m.isFunction(s)&&s instanceof s)&&"constructor"in t&&"constructor"in e)return!1}n=n||[],r=r||[];for(var u=n.length;u--;)if(n[u]===t)return r[u]===e;if(n.push(t),r.push(e),o){if((u=t.length)!==e.length)return!1;for(;u--;)if(!P(t[u],e[u],n,r))return!1}else{var c,h=m.keys(t);if(u=h.length,m.keys(e).length!==u)return!1;for(;u--;)if(c=h[u],!m.has(e,c)||!P(t[c],e[c],n,r))return!1}return n.pop(),r.pop(),!0};m.isEqual=function(t,e){return P(t,e)},m.isEmpty=function(t){return null==t||(b(t)&&(m.isArray(t)||m.isString(t)||m.isArguments(t))?0===t.length:0===m.keys(t).length)},m.isElement=function(t){return!(!t||1!==t.nodeType)},m.isArray=d||function(t){return"[object Array]"===l.call(t)},m.isObject=function(t){var e=typeof t;return"function"===e||"object"===e&&!!t},m.each(["Arguments","Function","String","Number","Date","RegExp","Error"],function(t){m["is"+t]=function(e){return l.call(e)==="[object "+t+"]"}}),m.isArguments(arguments)||(m.isArguments=function(t){return m.has(t,"callee")}),"function"!=typeof/./&&"object"!=typeof Int8Array&&(m.isFunction=function(t){return"function"==typeof t||!1}),m.isFinite=function(t){return isFinite(t)&&!isNaN(parseFloat(t))},m.isNaN=function(t){return m.isNumber(t)&&t!==+t},m.isBoolean=function(t){return!0===t||!1===t||"[object Boolean]"===l.call(t)},m.isNull=function(t){return null===t},m.isUndefined=function(t){return void 0===t},m.has=function(t,e){return null!=t&&h.call(t,e)},m.noConflict=function(){return n._=i,this},m.identity=function(t){return t},m.constant=function(t){return function(){return t}},m.noop=function(){},m.property=S,m.propertyOf=function(t){return null==t?function(){}:function(e){return t[e]}},m.matcher=m.matches=function(t){return t=m.extendOwn({},t),function(e){return m.isMatch(e,t)}},m.times=function(t,e,n){var r=Array(Math.max(0,t));e=y(e,n,1);for(var i=0;i<t;i++)r[i]=e(i);return r},m.random=function(t,e){return null==e&&(e=t,t=0),t+Math.floor(Math.random()*(e-t+1))},m.now=Date.now||function(){return(new Date).getTime()};var k={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;"},B=m.invert(k),F=function(t){var e=function(e){return t[e]},n="(?:"+m.keys(t).join("|")+")",r=RegExp(n),i=RegExp(n,"g");return function(t){return t=null==t?"":""+t,r.test(t)?t.replace(i,e):t}};m.escape=F(k),m.unescape=F(B),m.result=function(t,e,n){var r=null==t?void 0:t[e];return void 0===r&&(r=n),m.isFunction(r)?r.call(t):r};var V=0;m.uniqueId=function(t){var e=++V+"";return t?t+e:e},m.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g};var U=/(.)^/,H={"'":"'","\\":"\\","\r":"r","\n":"n","\u2028":"u2028","\u2029":"u2029"},Y=/\\|'|\r|\n|\u2028|\u2029/g,G=function(t){return"\\"+H[t]};m.template=function(t,e,n){!e&&n&&(e=n),e=m.defaults({},e,m.templateSettings);var r=RegExp([(e.escape||U).source,(e.interpolate||U).source,(e.evaluate||U).source].join("|")+"|$","g"),i=0,o="__p+='";t.replace(r,function(e,n,r,a,s){return o+=t.slice(i,s).replace(Y,G),i=s+e.length,n?o+="'+\n((__t=("+n+"))==null?'':_.escape(__t))+\n'":r?o+="'+\n((__t=("+r+"))==null?'':__t)+\n'":a&&(o+="';\n"+a+"\n__p+='"),e}),o+="';\n",e.variable||(o="with(obj||{}){\n"+o+"}\n"),o="var __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\n"+o+"return __p;\n";try{var a=new Function(e.variable||"obj","_",o)}catch(t){throw t.source=o,t}var s=function(t){return a.call(this,t,m)},u=e.variable||"obj";return s.source="function("+u+"){\n"+o+"}",s},m.chain=function(t){var e=m(t);return e._chain=!0,e};var j=function(t,e){return t._chain?m(e).chain():e};m.mixin=function(t){m.each(m.functions(t),function(e){var n=m[e]=t[e];m.prototype[e]=function(){var t=[this._wrapped];return u.apply(t,arguments),j(this,n.apply(m,t))}})},m.mixin(m),m.each(["pop","push","reverse","shift","sort","splice","unshift"],function(t){var e=o[t];m.prototype[t]=function(){var n=this._wrapped;return e.apply(n,arguments),"shift"!==t&&"splice"!==t||0!==n.length||delete n[0],j(this,n)}}),m.each(["concat","join","slice"],function(t){var e=o[t];m.prototype[t]=function(){return j(this,e.apply(this._wrapped,arguments))}}),m.prototype.value=function(){return this._wrapped},m.prototype.valueOf=m.prototype.toJSON=m.prototype.value,m.prototype.toString=function(){return""+this._wrapped},void 0===(r=function(){return m}.apply(e,[]))||(t.exports=r)}).call(this)},function(t,e,n){var r=n(285),i=n(286);e.decode=function(t,e){return(!e||e<=0?i.XML:i.HTML)(t)},e.decodeStrict=function(t,e){return(!e||e<=0?i.XML:i.HTMLStrict)(t)},e.encode=function(t,e){return(!e||e<=0?r.XML:r.HTML)(t)},e.encodeXML=r.XML,e.encodeHTML4=e.encodeHTML5=e.encodeHTML=r.HTML,e.decodeXML=e.decodeXMLStrict=i.XML,e.decodeHTML4=e.decodeHTML5=e.decodeHTML=i.HTML,e.decodeHTML4Strict=e.decodeHTML5Strict=e.decodeHTMLStrict=i.HTMLStrict,e.escape=r.escape},function(t,e){t.exports={amp:"&",apos:"'",gt:">",lt:"<",quot:'"'}},function(t,e){t.exports={Aacute:"",aacute:"",Abreve:"",abreve:"",ac:"",acd:"",acE:"",Acirc:"",acirc:"",acute:"",Acy:"",acy:"",AElig:"",aelig:"",af:"",Afr:"",afr:"",Agrave:"",agrave:"",alefsym:"",aleph:"",Alpha:"",alpha:"",Amacr:"",amacr:"",amalg:"",amp:"&",AMP:"&",andand:"",And:"",and:"",andd:"",andslope:"",andv:"",ang:"",ange:"",angle:"",angmsdaa:"",angmsdab:"",angmsdac:"",angmsdad:"",angmsdae:"",angmsdaf:"",angmsdag:"",angmsdah:"",angmsd:"",angrt:"",angrtvb:"",angrtvbd:"",angsph:"",angst:"",angzarr:"",Aogon:"",aogon:"",Aopf:"",aopf:"",apacir:"",ap:"",apE:"",ape:"",apid:"",apos:"'",ApplyFunction:"",approx:"",approxeq:"",Aring:"",aring:"",Ascr:"",ascr:"",Assign:"",ast:"*",asymp:"",asympeq:"",Atilde:"",atilde:"",Auml:"",auml:"",awconint:"",awint:"",backcong:"",backepsilon:"",backprime:"",backsim:"",backsimeq:"",Backslash:"",Barv:"",barvee:"",barwed:"",Barwed:"",barwedge:"",bbrk:"",bbrktbrk:"",bcong:"",Bcy:"",bcy:"",bdquo:"",becaus:"",because:"",Because:"",bemptyv:"",bepsi:"",bernou:"",Bernoullis:"",Beta:"",beta:"",beth:"",between:"",Bfr:"",bfr:"",bigcap:"",bigcirc:"",bigcup:"",bigodot:"",bigoplus:"",bigotimes:"",bigsqcup:"",bigstar:"",bigtriangledown:"",bigtriangleup:"",biguplus:"",bigvee:"",bigwedge:"",bkarow:"",blacklozenge:"",blacksquare:"",blacktriangle:"",blacktriangledown:"",blacktriangleleft:"",blacktriangleright:"",blank:"",blk12:"",blk14:"",blk34:"",block:"",bne:"=",bnequiv:"",bNot:"",bnot:"",Bopf:"",bopf:"",bot:"",bottom:"",bowtie:"",boxbox:"",boxdl:"",boxdL:"",boxDl:"",boxDL:"",boxdr:"",boxdR:"",boxDr:"",boxDR:"",boxh:"",boxH:"",boxhd:"",boxHd:"",boxhD:"",boxHD:"",boxhu:"",boxHu:"",boxhU:"",boxHU:"",boxminus:"",boxplus:"",boxtimes:"",boxul:"",boxuL:"",boxUl:"",boxUL:"",boxur:"",boxuR:"",boxUr:"",boxUR:"",boxv:"",boxV:"",boxvh:"",boxvH:"",boxVh:"",boxVH:"",boxvl:"",boxvL:"",boxVl:"",boxVL:"",boxvr:"",boxvR:"",boxVr:"",boxVR:"",bprime:"",breve:"",Breve:"",brvbar:"",bscr:"",Bscr:"",bsemi:"",bsim:"",bsime:"",bsolb:"",bsol:"\\",bsolhsub:"",bull:"",bullet:"",bump:"",bumpE:"",bumpe:"",Bumpeq:"",bumpeq:"",Cacute:"",cacute:"",capand:"",capbrcup:"",capcap:"",cap:"",Cap:"",capcup:"",capdot:"",CapitalDifferentialD:"",caps:"",caret:"",caron:"",Cayleys:"",ccaps:"",Ccaron:"",ccaron:"",Ccedil:"",ccedil:"",Ccirc:"",ccirc:"",Cconint:"",ccups:"",ccupssm:"",Cdot:"",cdot:"",cedil:"",Cedilla:"",cemptyv:"",cent:"",centerdot:"",CenterDot:"",cfr:"",Cfr:"",CHcy:"",chcy:"",check:"",checkmark:"",Chi:"",chi:"",circ:"",circeq:"",circlearrowleft:"",circlearrowright:"",circledast:"",circledcirc:"",circleddash:"",CircleDot:"",circledR:"",circledS:"",CircleMinus:"",CirclePlus:"",CircleTimes:"",cir:"",cirE:"",cire:"",cirfnint:"",cirmid:"",cirscir:"",ClockwiseContourIntegral:"",CloseCurlyDoubleQuote:"",CloseCurlyQuote:"",clubs:"",clubsuit:"",colon:":",Colon:"",Colone:"",colone:"",coloneq:"",comma:",",commat:"@",comp:"",compfn:"",complement:"",complexes:"",cong:"",congdot:"",Congruent:"",conint:"",Conint:"",ContourIntegral:"",copf:"",Copf:"",coprod:"",Coproduct:"",copy:"",COPY:"",copysr:"",CounterClockwiseContourIntegral:"",crarr:"",cross:"",Cross:"",Cscr:"",cscr:"",csub:"",csube:"",csup:"",csupe:"",ctdot:"",cudarrl:"",cudarrr:"",cuepr:"",cuesc:"",cularr:"",cularrp:"",cupbrcap:"",cupcap:"",CupCap:"",cup:"",Cup:"",cupcup:"",cupdot:"",cupor:"",cups:"",curarr:"",curarrm:"",curlyeqprec:"",curlyeqsucc:"",curlyvee:"",curlywedge:"",curren:"",curvearrowleft:"",curvearrowright:"",cuvee:"",cuwed:"",cwconint:"",cwint:"",cylcty:"",dagger:"",Dagger:"",daleth:"",darr:"",Darr:"",dArr:"",dash:"",Dashv:"",dashv:"",dbkarow:"",dblac:"",Dcaron:"",dcaron:"",Dcy:"",dcy:"",ddagger:"",ddarr:"",DD:"",dd:"",DDotrahd:"",ddotseq:"",deg:"",Del:"",Delta:"",delta:"",demptyv:"",dfisht:"",Dfr:"",dfr:"",dHar:"",dharl:"",dharr:"",DiacriticalAcute:"",DiacriticalDot:"",DiacriticalDoubleAcute:"",DiacriticalGrave:"`",DiacriticalTilde:"",diam:"",diamond:"",Diamond:"",diamondsuit:"",diams:"",die:"",DifferentialD:"",digamma:"",disin:"",div:"",divide:"",divideontimes:"",divonx:"",DJcy:"",djcy:"",dlcorn:"",dlcrop:"",dollar:"$",Dopf:"",dopf:"",Dot:"",dot:"",DotDot:"",doteq:"",doteqdot:"",DotEqual:"",dotminus:"",dotplus:"",dotsquare:"",doublebarwedge:"",DoubleContourIntegral:"",DoubleDot:"",DoubleDownArrow:"",DoubleLeftArrow:"",DoubleLeftRightArrow:"",DoubleLeftTee:"",DoubleLongLeftArrow:"",DoubleLongLeftRightArrow:"",DoubleLongRightArrow:"",DoubleRightArrow:"",DoubleRightTee:"",DoubleUpArrow:"",DoubleUpDownArrow:"",DoubleVerticalBar:"",DownArrowBar:"",downarrow:"",DownArrow:"",Downarrow:"",DownArrowUpArrow:"",DownBreve:"",downdownarrows:"",downharpoonleft:"",downharpoonright:"",DownLeftRightVector:"",DownLeftTeeVector:"",DownLeftVectorBar:"",DownLeftVector:"",DownRightTeeVector:"",DownRightVectorBar:"",DownRightVector:"",DownTeeArrow:"",DownTee:"",drbkarow:"",drcorn:"",drcrop:"",Dscr:"",dscr:"",DScy:"",dscy:"",dsol:"",Dstrok:"",dstrok:"",dtdot:"",dtri:"",dtrif:"",duarr:"",duhar:"",dwangle:"",DZcy:"",dzcy:"",dzigrarr:"",Eacute:"",eacute:"",easter:"",Ecaron:"",ecaron:"",Ecirc:"",ecirc:"",ecir:"",ecolon:"",Ecy:"",ecy:"",eDDot:"",Edot:"",edot:"",eDot:"",ee:"",efDot:"",Efr:"",efr:"",eg:"",Egrave:"",egrave:"",egs:"",egsdot:"",el:"",Element:"",elinters:"",ell:"",els:"",elsdot:"",Emacr:"",emacr:"",empty:"",emptyset:"",EmptySmallSquare:"",emptyv:"",EmptyVerySmallSquare:"",emsp13:"",emsp14:"",emsp:"",ENG:"",eng:"",ensp:"",Eogon:"",eogon:"",Eopf:"",eopf:"",epar:"",eparsl:"",eplus:"",epsi:"",Epsilon:"",epsilon:"",epsiv:"",eqcirc:"",eqcolon:"",eqsim:"",eqslantgtr:"",eqslantless:"",Equal:"",equals:"=",EqualTilde:"",equest:"",Equilibrium:"",equiv:"",equivDD:"",eqvparsl:"",erarr:"",erDot:"",escr:"",Escr:"",esdot:"",Esim:"",esim:"",Eta:"",eta:"",ETH:"",eth:"",Euml:"",euml:"",euro:"",excl:"!",exist:"",Exists:"",expectation:"",exponentiale:"",ExponentialE:"",fallingdotseq:"",Fcy:"",fcy:"",female:"",ffilig:"",fflig:"",ffllig:"",Ffr:"",ffr:"",filig:"",FilledSmallSquare:"",FilledVerySmallSquare:"",fjlig:"fj",flat:"",fllig:"",fltns:"",fnof:"",Fopf:"",fopf:"",forall:"",ForAll:"",fork:"",forkv:"",Fouriertrf:"",fpartint:"",frac12:"",frac13:"",frac14:"",frac15:"",frac16:"",frac18:"",frac23:"",frac25:"",frac34:"",frac35:"",frac38:"",frac45:"",frac56:"",frac58:"",frac78:"",frasl:"",frown:"",fscr:"",Fscr:"",gacute:"",Gamma:"",gamma:"",Gammad:"",gammad:"",gap:"",Gbreve:"",gbreve:"",Gcedil:"",Gcirc:"",gcirc:"",Gcy:"",gcy:"",Gdot:"",gdot:"",ge:"",gE:"",gEl:"",gel:"",geq:"",geqq:"",geqslant:"",gescc:"",ges:"",gesdot:"",gesdoto:"",gesdotol:"",gesl:"",gesles:"",Gfr:"",gfr:"",gg:"",Gg:"",ggg:"",gimel:"",GJcy:"",gjcy:"",gla:"",gl:"",glE:"",glj:"",gnap:"",gnapprox:"",gne:"",gnE:"",gneq:"",gneqq:"",gnsim:"",Gopf:"",gopf:"",grave:"`",GreaterEqual:"",GreaterEqualLess:"",GreaterFullEqual:"",GreaterGreater:"",GreaterLess:"",GreaterSlantEqual:"",GreaterTilde:"",Gscr:"",gscr:"",gsim:"",gsime:"",gsiml:"",gtcc:"",gtcir:"",gt:">",GT:">",Gt:"",gtdot:"",gtlPar:"",gtquest:"",gtrapprox:"",gtrarr:"",gtrdot:"",gtreqless:"",gtreqqless:"",gtrless:"",gtrsim:"",gvertneqq:"",gvnE:"",Hacek:"",hairsp:"",half:"",hamilt:"",HARDcy:"",hardcy:"",harrcir:"",harr:"",hArr:"",harrw:"",Hat:"^",hbar:"",Hcirc:"",hcirc:"",hearts:"",heartsuit:"",hellip:"",hercon:"",hfr:"",Hfr:"",HilbertSpace:"",hksearow:"",hkswarow:"",hoarr:"",homtht:"",hookleftarrow:"",hookrightarrow:"",hopf:"",Hopf:"",horbar:"",HorizontalLine:"",hscr:"",Hscr:"",hslash:"",Hstrok:"",hstrok:"",HumpDownHump:"",HumpEqual:"",hybull:"",hyphen:"",Iacute:"",iacute:"",ic:"",Icirc:"",icirc:"",Icy:"",icy:"",Idot:"",IEcy:"",iecy:"",iexcl:"",iff:"",ifr:"",Ifr:"",Igrave:"",igrave:"",ii:"",iiiint:"",iiint:"",iinfin:"",iiota:"",IJlig:"",ijlig:"",Imacr:"",imacr:"",image:"",ImaginaryI:"",imagline:"",imagpart:"",imath:"",Im:"",imof:"",imped:"",Implies:"",incare:"",in:"",infin:"",infintie:"",inodot:"",intcal:"",int:"",Int:"",integers:"",Integral:"",intercal:"",Intersection:"",intlarhk:"",intprod:"",InvisibleComma:"",InvisibleTimes:"",IOcy:"",iocy:"",Iogon:"",iogon:"",Iopf:"",iopf:"",Iota:"",iota:"",iprod:"",iquest:"",iscr:"",Iscr:"",isin:"",isindot:"",isinE:"",isins:"",isinsv:"",isinv:"",it:"",Itilde:"",itilde:"",Iukcy:"",iukcy:"",Iuml:"",iuml:"",Jcirc:"",jcirc:"",Jcy:"",jcy:"",Jfr:"",jfr:"",jmath:"",Jopf:"",jopf:"",Jscr:"",jscr:"",Jsercy:"",jsercy:"",Jukcy:"",jukcy:"",Kappa:"",kappa:"",kappav:"",Kcedil:"",kcedil:"",Kcy:"",kcy:"",Kfr:"",kfr:"",kgreen:"",KHcy:"",khcy:"",KJcy:"",kjcy:"",Kopf:"",kopf:"",Kscr:"",kscr:"",lAarr:"",Lacute:"",lacute:"",laemptyv:"",lagran:"",Lambda:"",lambda:"",lang:"",Lang:"",langd:"",langle:"",lap:"",Laplacetrf:"",laquo:"",larrb:"",larrbfs:"",larr:"",Larr:"",lArr:"",larrfs:"",larrhk:"",larrlp:"",larrpl:"",larrsim:"",larrtl:"",latail:"",lAtail:"",lat:"",late:"",lates:"",lbarr:"",lBarr:"",lbbrk:"",lbrace:"{",lbrack:"[",lbrke:"",lbrksld:"",lbrkslu:"",Lcaron:"",lcaron:"",Lcedil:"",lcedil:"",lceil:"",lcub:"{",Lcy:"",lcy:"",ldca:"",ldquo:"",ldquor:"",ldrdhar:"",ldrushar:"",ldsh:"",le:"",lE:"",LeftAngleBracket:"",LeftArrowBar:"",leftarrow:"",LeftArrow:"",Leftarrow:"",LeftArrowRightArrow:"",leftarrowtail:"",LeftCeiling:"",LeftDoubleBracket:"",LeftDownTeeVector:"",LeftDownVectorBar:"",LeftDownVector:"",LeftFloor:"",leftharpoondown:"",leftharpoonup:"",leftleftarrows:"",leftrightarrow:"",LeftRightArrow:"",Leftrightarrow:"",leftrightarrows:"",leftrightharpoons:"",leftrightsquigarrow:"",LeftRightVector:"",LeftTeeArrow:"",LeftTee:"",LeftTeeVector:"",leftthreetimes:"",LeftTriangleBar:"",LeftTriangle:"",LeftTriangleEqual:"",LeftUpDownVector:"",LeftUpTeeVector:"",LeftUpVectorBar:"",LeftUpVector:"",LeftVectorBar:"",LeftVector:"",lEg:"",leg:"",leq:"",leqq:"",leqslant:"",lescc:"",les:"",lesdot:"",lesdoto:"",lesdotor:"",lesg:"",lesges:"",lessapprox:"",lessdot:"",lesseqgtr:"",lesseqqgtr:"",LessEqualGreater:"",LessFullEqual:"",LessGreater:"",lessgtr:"",LessLess:"",lesssim:"",LessSlantEqual:"",LessTilde:"",lfisht:"",lfloor:"",Lfr:"",lfr:"",lg:"",lgE:"",lHar:"",lhard:"",lharu:"",lharul:"",lhblk:"",LJcy:"",ljcy:"",llarr:"",ll:"",Ll:"",llcorner:"",Lleftarrow:"",llhard:"",lltri:"",Lmidot:"",lmidot:"",lmoustache:"",lmoust:"",lnap:"",lnapprox:"",lne:"",lnE:"",lneq:"",lneqq:"",lnsim:"",loang:"",loarr:"",lobrk:"",longleftarrow:"",LongLeftArrow:"",Longleftarrow:"",longleftrightarrow:"",LongLeftRightArrow:"",Longleftrightarrow:"",longmapsto:"",longrightarrow:"",LongRightArrow:"",Longrightarrow:"",looparrowleft:"",looparrowright:"",lopar:"",Lopf:"",lopf:"",loplus:"",lotimes:"",lowast:"",lowbar:"_",LowerLeftArrow:"",LowerRightArrow:"",loz:"",lozenge:"",lozf:"",lpar:"(",lparlt:"",lrarr:"",lrcorner:"",lrhar:"",lrhard:"",lrm:"",lrtri:"",lsaquo:"",lscr:"",Lscr:"",lsh:"",Lsh:"",lsim:"",lsime:"",lsimg:"",lsqb:"[",lsquo:"",lsquor:"",Lstrok:"",lstrok:"",ltcc:"",ltcir:"",lt:"<",LT:"<",Lt:"",ltdot:"",lthree:"",ltimes:"",ltlarr:"",ltquest:"",ltri:"",ltrie:"",ltrif:"",ltrPar:"",lurdshar:"",luruhar:"",lvertneqq:"",lvnE:"",macr:"",male:"",malt:"",maltese:"",Map:"",map:"",mapsto:"",mapstodown:"",mapstoleft:"",mapstoup:"",marker:"",mcomma:"",Mcy:"",mcy:"",mdash:"",mDDot:"",measuredangle:"",MediumSpace:"",Mellintrf:"",Mfr:"",mfr:"",mho:"",micro:"",midast:"*",midcir:"",mid:"",middot:"",minusb:"",minus:"",minusd:"",minusdu:"",MinusPlus:"",mlcp:"",mldr:"",mnplus:"",models:"",Mopf:"",mopf:"",mp:"",mscr:"",Mscr:"",mstpos:"",Mu:"",mu:"",multimap:"",mumap:"",nabla:"",Nacute:"",nacute:"",nang:"",nap:"",napE:"",napid:"",napos:"",napprox:"",natural:"",naturals:"",natur:"",nbsp:"",nbump:"",nbumpe:"",ncap:"",Ncaron:"",ncaron:"",Ncedil:"",ncedil:"",ncong:"",ncongdot:"",ncup:"",Ncy:"",ncy:"",ndash:"",nearhk:"",nearr:"",neArr:"",nearrow:"",ne:"",nedot:"",NegativeMediumSpace:"",NegativeThickSpace:"",NegativeThinSpace:"",NegativeVeryThinSpace:"",nequiv:"",nesear:"",nesim:"",NestedGreaterGreater:"",NestedLessLess:"",NewLine:"\n",nexist:"",nexists:"",Nfr:"",nfr:"",ngE:"",nge:"",ngeq:"",ngeqq:"",ngeqslant:"",nges:"",nGg:"",ngsim:"",nGt:"",ngt:"",ngtr:"",nGtv:"",nharr:"",nhArr:"",nhpar:"",ni:"",nis:"",nisd:"",niv:"",NJcy:"",njcy:"",nlarr:"",nlArr:"",nldr:"",nlE:"",nle:"",nleftarrow:"",nLeftarrow:"",nleftrightarrow:"",nLeftrightarrow:"",nleq:"",nleqq:"",nleqslant:"",nles:"",nless:"",nLl:"",nlsim:"",nLt:"",nlt:"",nltri:"",nltrie:"",nLtv:"",nmid:"",NoBreak:"",NonBreakingSpace:"",nopf:"",Nopf:"",Not:"",not:"",NotCongruent:"",NotCupCap:"",NotDoubleVerticalBar:"",NotElement:"",NotEqual:"",NotEqualTilde:"",NotExists:"",NotGreater:"",NotGreaterEqual:"",NotGreaterFullEqual:"",NotGreaterGreater:"",NotGreaterLess:"",NotGreaterSlantEqual:"",NotGreaterTilde:"",NotHumpDownHump:"",NotHumpEqual:"",notin:"",notindot:"",notinE:"",notinva:"",notinvb:"",notinvc:"",NotLeftTriangleBar:"",NotLeftTriangle:"",NotLeftTriangleEqual:"",NotLess:"",NotLessEqual:"",NotLessGreater:"",NotLessLess:"",NotLessSlantEqual:"",NotLessTilde:"",NotNestedGreaterGreater:"",NotNestedLessLess:"",notni:"",notniva:"",notnivb:"",notnivc:"",NotPrecedes:"",NotPrecedesEqual:"",NotPrecedesSlantEqual:"",NotReverseElement:"",NotRightTriangleBar:"",NotRightTriangle:"",NotRightTriangleEqual:"",NotSquareSubset:"",NotSquareSubsetEqual:"",NotSquareSuperset:"",NotSquareSupersetEqual:"",NotSubset:"",NotSubsetEqual:"",NotSucceeds:"",NotSucceedsEqual:"",NotSucceedsSlantEqual:"",NotSucceedsTilde:"",NotSuperset:"",NotSupersetEqual:"",NotTilde:"",NotTildeEqual:"",NotTildeFullEqual:"",NotTildeTilde:"",NotVerticalBar:"",nparallel:"",npar:"",nparsl:"",npart:"",npolint:"",npr:"",nprcue:"",nprec:"",npreceq:"",npre:"",nrarrc:"",nrarr:"",nrArr:"",nrarrw:"",nrightarrow:"",nRightarrow:"",nrtri:"",nrtrie:"",nsc:"",nsccue:"",nsce:"",Nscr:"",nscr:"",nshortmid:"",nshortparallel:"",nsim:"",nsime:"",nsimeq:"",nsmid:"",nspar:"",nsqsube:"",nsqsupe:"",nsub:"",nsubE:"",nsube:"",nsubset:"",nsubseteq:"",nsubseteqq:"",nsucc:"",nsucceq:"",nsup:"",nsupE:"",nsupe:"",nsupset:"",nsupseteq:"",nsupseteqq:"",ntgl:"",Ntilde:"",ntilde:"",ntlg:"",ntriangleleft:"",ntrianglelefteq:"",ntriangleright:"",ntrianglerighteq:"",Nu:"",nu:"",num:"#",numero:"",numsp:"",nvap:"",nvdash:"",nvDash:"",nVdash:"",nVDash:"",nvge:"",nvgt:">",nvHarr:"",nvinfin:"",nvlArr:"",nvle:"",nvlt:"<",nvltrie:"",nvrArr:"",nvrtrie:"",nvsim:"",nwarhk:"",nwarr:"",nwArr:"",nwarrow:"",nwnear:"",Oacute:"",oacute:"",oast:"",Ocirc:"",ocirc:"",ocir:"",Ocy:"",ocy:"",odash:"",Odblac:"",odblac:"",odiv:"",odot:"",odsold:"",OElig:"",oelig:"",ofcir:"",Ofr:"",ofr:"",ogon:"",Ograve:"",ograve:"",ogt:"",ohbar:"",ohm:"",oint:"",olarr:"",olcir:"",olcross:"",oline:"",olt:"",Omacr:"",omacr:"",Omega:"",omega:"",Omicron:"",omicron:"",omid:"",ominus:"",Oopf:"",oopf:"",opar:"",OpenCurlyDoubleQuote:"",OpenCurlyQuote:"",operp:"",oplus:"",orarr:"",Or:"",or:"",ord:"",order:"",orderof:"",ordf:"",ordm:"",origof:"",oror:"",orslope:"",orv:"",oS:"",Oscr:"",oscr:"",Oslash:"",oslash:"",osol:"",Otilde:"",otilde:"",otimesas:"",Otimes:"",otimes:"",Ouml:"",ouml:"",ovbar:"",OverBar:"",OverBrace:"",OverBracket:"",OverParenthesis:"",para:"",parallel:"",par:"",parsim:"",parsl:"",part:"",PartialD:"",Pcy:"",pcy:"",percnt:"%",period:".",permil:"",perp:"",pertenk:"",Pfr:"",pfr:"",Phi:"",phi:"",phiv:"",phmmat:"",phone:"",Pi:"",pi:"",pitchfork:"",piv:"",planck:"",planckh:"",plankv:"",plusacir:"",plusb:"",pluscir:"",plus:"+",plusdo:"",plusdu:"",pluse:"",PlusMinus:"",plusmn:"",plussim:"",plustwo:"",pm:"",Poincareplane:"",pointint:"",popf:"",Popf:"",pound:"",prap:"",Pr:"",pr:"",prcue:"",precapprox:"",prec:"",preccurlyeq:"",Precedes:"",PrecedesEqual:"",PrecedesSlantEqual:"",PrecedesTilde:"",preceq:"",precnapprox:"",precneqq:"",precnsim:"",pre:"",prE:"",precsim:"",prime:"",Prime:"",primes:"",prnap:"",prnE:"",prnsim:"",prod:"",Product:"",profalar:"",profline:"",profsurf:"",prop:"",Proportional:"",Proportion:"",propto:"",prsim:"",prurel:"",Pscr:"",pscr:"",Psi:"",psi:"",puncsp:"",Qfr:"",qfr:"",qint:"",qopf:"",Qopf:"",qprime:"",Qscr:"",qscr:"",quaternions:"",quatint:"",quest:"?",questeq:"",quot:'"',QUOT:'"',rAarr:"",race:"",Racute:"",racute:"",radic:"",raemptyv:"",rang:"",Rang:"",rangd:"",range:"",rangle:"",raquo:"",rarrap:"",rarrb:"",rarrbfs:"",rarrc:"",rarr:"",Rarr:"",rArr:"",rarrfs:"",rarrhk:"",rarrlp:"",rarrpl:"",rarrsim:"",Rarrtl:"",rarrtl:"",rarrw:"",ratail:"",rAtail:"",ratio:"",rationals:"",rbarr:"",rBarr:"",RBarr:"",rbbrk:"",rbrace:"}",rbrack:"]",rbrke:"",rbrksld:"",rbrkslu:"",Rcaron:"",rcaron:"",Rcedil:"",rcedil:"",rceil:"",rcub:"}",Rcy:"",rcy:"",rdca:"",rdldhar:"",rdquo:"",rdquor:"",rdsh:"",real:"",realine:"",realpart:"",reals:"",Re:"",rect:"",reg:"",REG:"",ReverseElement:"",ReverseEquilibrium:"",ReverseUpEquilibrium:"",rfisht:"",rfloor:"",rfr:"",Rfr:"",rHar:"",rhard:"",rharu:"",rharul:"",Rho:"",rho:"",rhov:"",RightAngleBracket:"",RightArrowBar:"",rightarrow:"",RightArrow:"",Rightarrow:"",RightArrowLeftArrow:"",rightarrowtail:"",RightCeiling:"",RightDoubleBracket:"",RightDownTeeVector:"",RightDownVectorBar:"",RightDownVector:"",RightFloor:"",rightharpoondown:"",rightharpoonup:"",rightleftarrows:"",rightleftharpoons:"",rightrightarrows:"",rightsquigarrow:"",RightTeeArrow:"",RightTee:"",RightTeeVector:"",rightthreetimes:"",RightTriangleBar:"",RightTriangle:"",RightTriangleEqual:"",RightUpDownVector:"",RightUpTeeVector:"",RightUpVectorBar:"",RightUpVector:"",RightVectorBar:"",RightVector:"",ring:"",risingdotseq:"",rlarr:"",rlhar:"",rlm:"",rmoustache:"",rmoust:"",rnmid:"",roang:"",roarr:"",robrk:"",ropar:"",ropf:"",Ropf:"",roplus:"",rotimes:"",RoundImplies:"",rpar:")",rpargt:"",rppolint:"",rrarr:"",Rrightarrow:"",rsaquo:"",rscr:"",Rscr:"",rsh:"",Rsh:"",rsqb:"]",rsquo:"",rsquor:"",rthree:"",rtimes:"",rtri:"",rtrie:"",rtrif:"",rtriltri:"",RuleDelayed:"",ruluhar:"",rx:"",Sacute:"",sacute:"",sbquo:"",scap:"",Scaron:"",scaron:"",Sc:"",sc:"",sccue:"",sce:"",scE:"",Scedil:"",scedil:"",Scirc:"",scirc:"",scnap:"",scnE:"",scnsim:"",scpolint:"",scsim:"",Scy:"",scy:"",sdotb:"",sdot:"",sdote:"",searhk:"",searr:"",seArr:"",searrow:"",sect:"",semi:";",seswar:"",setminus:"",setmn:"",sext:"",Sfr:"",sfr:"",sfrown:"",sharp:"",SHCHcy:"",shchcy:"",SHcy:"",shcy:"",ShortDownArrow:"",ShortLeftArrow:"",shortmid:"",shortparallel:"",ShortRightArrow:"",ShortUpArrow:"",shy:"",Sigma:"",sigma:"",sigmaf:"",sigmav:"",sim:"",simdot:"",sime:"",simeq:"",simg:"",simgE:"",siml:"",simlE:"",simne:"",simplus:"",simrarr:"",slarr:"",SmallCircle:"",smallsetminus:"",smashp:"",smeparsl:"",smid:"",smile:"",smt:"",smte:"",smtes:"",SOFTcy:"",softcy:"",solbar:"",solb:"",sol:"/",Sopf:"",sopf:"",spades:"",spadesuit:"",spar:"",sqcap:"",sqcaps:"",sqcup:"",sqcups:"",Sqrt:"",sqsub:"",sqsube:"",sqsubset:"",sqsubseteq:"",sqsup:"",sqsupe:"",sqsupset:"",sqsupseteq:"",square:"",Square:"",SquareIntersection:"",SquareSubset:"",SquareSubsetEqual:"",SquareSuperset:"",SquareSupersetEqual:"",SquareUnion:"",squarf:"",squ:"",squf:"",srarr:"",Sscr:"",sscr:"",ssetmn:"",ssmile:"",sstarf:"",Star:"",star:"",starf:"",straightepsilon:"",straightphi:"",strns:"",sub:"",Sub:"",subdot:"",subE:"",sube:"",subedot:"",submult:"",subnE:"",subne:"",subplus:"",subrarr:"",subset:"",Subset:"",subseteq:"",subseteqq:"",SubsetEqual:"",subsetneq:"",subsetneqq:"",subsim:"",subsub:"",subsup:"",succapprox:"",succ:"",succcurlyeq:"",Succeeds:"",SucceedsEqual:"",SucceedsSlantEqual:"",SucceedsTilde:"",succeq:"",succnapprox:"",succneqq:"",succnsim:"",succsim:"",SuchThat:"",sum:"",Sum:"",sung:"",sup1:"",sup2:"",sup3:"",sup:"",Sup:"",supdot:"",supdsub:"",supE:"",supe:"",supedot:"",Superset:"",SupersetEqual:"",suphsol:"",suphsub:"",suplarr:"",supmult:"",supnE:"",supne:"",supplus:"",supset:"",Supset:"",supseteq:"",supseteqq:"",supsetneq:"",supsetneqq:"",supsim:"",supsub:"",supsup:"",swarhk:"",swarr:"",swArr:"",swarrow:"",swnwar:"",szlig:"",Tab:"\t",target:"",Tau:"",tau:"",tbrk:"",Tcaron:"",tcaron:"",Tcedil:"",tcedil:"",Tcy:"",tcy:"",tdot:"",telrec:"",Tfr:"",tfr:"",there4:"",therefore:"",Therefore:"",Theta:"",theta:"",thetasym:"",thetav:"",thickapprox:"",thicksim:"",ThickSpace:"",ThinSpace:"",thinsp:"",thkap:"",thksim:"",THORN:"",thorn:"",tilde:"",Tilde:"",TildeEqual:"",TildeFullEqual:"",TildeTilde:"",timesbar:"",timesb:"",times:"",timesd:"",tint:"",toea:"",topbot:"",topcir:"",top:"",Topf:"",topf:"",topfork:"",tosa:"",tprime:"",trade:"",TRADE:"",triangle:"",triangledown:"",triangleleft:"",trianglelefteq:"",triangleq:"",triangleright:"",trianglerighteq:"",tridot:"",trie:"",triminus:"",TripleDot:"",triplus:"",trisb:"",tritime:"",trpezium:"",Tscr:"",tscr:"",TScy:"",tscy:"",TSHcy:"",tshcy:"",Tstrok:"",tstrok:"",twixt:"",twoheadleftarrow:"",twoheadrightarrow:"",Uacute:"",uacute:"",uarr:"",Uarr:"",uArr:"",Uarrocir:"",Ubrcy:"",ubrcy:"",Ubreve:"",ubreve:"",Ucirc:"",ucirc:"",Ucy:"",ucy:"",udarr:"",Udblac:"",udblac:"",udhar:"",ufisht:"",Ufr:"",ufr:"",Ugrave:"",ugrave:"",uHar:"",uharl:"",uharr:"",uhblk:"",ulcorn:"",ulcorner:"",ulcrop:"",ultri:"",Umacr:"",umacr:"",uml:"",UnderBar:"_",UnderBrace:"",UnderBracket:"",UnderParenthesis:"",Union:"",UnionPlus:"",Uogon:"",uogon:"",Uopf:"",uopf:"",UpArrowBar:"",uparrow:"",UpArrow:"",Uparrow:"",UpArrowDownArrow:"",updownarrow:"",UpDownArrow:"",Updownarrow:"",UpEquilibrium:"",upharpoonleft:"",upharpoonright:"",uplus:"",UpperLeftArrow:"",UpperRightArrow:"",upsi:"",Upsi:"",upsih:"",Upsilon:"",upsilon:"",UpTeeArrow:"",UpTee:"",upuparrows:"",urcorn:"",urcorner:"",urcrop:"",Uring:"",uring:"",urtri:"",Uscr:"",uscr:"",utdot:"",Utilde:"",utilde:"",utri:"",utrif:"",uuarr:"",Uuml:"",uuml:"",uwangle:"",vangrt:"",varepsilon:"",varkappa:"",varnothing:"",varphi:"",varpi:"",varpropto:"",varr:"",vArr:"",varrho:"",varsigma:"",varsubsetneq:"",varsubsetneqq:"",varsupsetneq:"",varsupsetneqq:"",vartheta:"",vartriangleleft:"",vartriangleright:"",vBar:"",Vbar:"",vBarv:"",Vcy:"",vcy:"",vdash:"",vDash:"",Vdash:"",VDash:"",Vdashl:"",veebar:"",vee:"",Vee:"",veeeq:"",vellip:"",verbar:"|",Verbar:"",vert:"|",Vert:"",VerticalBar:"",VerticalLine:"|",VerticalSeparator:"",VerticalTilde:"",VeryThinSpace:"",Vfr:"",vfr:"",vltri:"",vnsub:"",vnsup:"",Vopf:"",vopf:"",vprop:"",vrtri:"",Vscr:"",vscr:"",vsubnE:"",vsubne:"",vsupnE:"",vsupne:"",Vvdash:"",vzigzag:"",Wcirc:"",wcirc:"",wedbar:"",wedge:"",Wedge:"",wedgeq:"",weierp:"",Wfr:"",wfr:"",Wopf:"",wopf:"",wp:"",wr:"",wreath:"",Wscr:"",wscr:"",xcap:"",xcirc:"",xcup:"",xdtri:"",Xfr:"",xfr:"",xharr:"",xhArr:"",Xi:"",xi:"",xlarr:"",xlArr:"",xmap:"",xnis:"",xodot:"",Xopf:"",xopf:"",xoplus:"",xotime:"",xrarr:"",xrArr:"",Xscr:"",xscr:"",xsqcup:"",xuplus:"",xutri:"",xvee:"",xwedge:"",Yacute:"",yacute:"",YAcy:"",yacy:"",Ycirc:"",ycirc:"",Ycy:"",ycy:"",yen:"",Yfr:"",yfr:"",YIcy:"",yicy:"",Yopf:"",yopf:"",Yscr:"",yscr:"",YUcy:"",yucy:"",yuml:"",Yuml:"",Zacute:"",zacute:"",Zcaron:"",zcaron:"",Zcy:"",zcy:"",Zdot:"",zdot:"",zeetrf:"",ZeroWidthSpace:"",Zeta:"",zeta:"",zfr:"",Zfr:"",ZHcy:"",zhcy:"",zigrarr:"",zopf:"",Zopf:"",Zscr:"",zscr:"",zwj:"",zwnj:""}},function(t,e,n){"use strict";function r(){}r.prototype.render=function(t){var e,n,r=t.walker();for(this.buffer="",this.lastOut="\n";e=r.next();)this[n=e.node.type]&&this[n](e.node,e.entering);return this.buffer},r.prototype.out=function(t){this.lit(t)},r.prototype.lit=function(t){this.buffer+=t,this.lastOut=t},r.prototype.cr=function(){"\n"!==this.lastOut&&this.lit("\n")},r.prototype.esc=function(t){return t},t.exports=r},function(t,e,n){var r=n(12);t.exports=function(t,e){if(!r(t)||t._t!==e)throw TypeError("Incompatible receiver, "+e+" required!");return t}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.saveDialogHelper=void 0,e.openNotExistDialog=function(t){t&&(t.startsWith("file://")?r.remote.dialog.showMessageBoxOnTop({type:"error",title:"XMind",message:i.localizer.localize("Open Recent"),detail:i.localizer.localize("This file does not exist. It may have been deleted or moved to another location."),buttons:[i.localizer.localize("OK")],cancelId:0}):t.startsWith("cloud://")&&r.remote.dialog.showMessageBoxOnTop({type:"error",title:"XMind",message:i.localizer.localize("Open Recent"),detail:i.localizer.localize("This file does not exist, it may have been deleted or in another account."),buttons:[i.localizer.localize("OK")],cancelId:0}))};var r=n(14),i=n(18),o=r.remote.app,a=n(2);e.saveDialogHelper=new class{guessFilePath(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"home",n=i.vud.getModule(e).get("lastDir")||o.getPath("documents");if("string"==typeof t)return a.join(n,t);var r=t&&t.model,s=r&&r.rootTopic();if(s){var u=s.get("title")||"";u=u.replace(/\n+/g," ").trim(),n=a.join(n,u)}return n}rememberRecent(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"home";i.vud.getModule(e).set("lastDir",a.dirname(t))}}},function(t,e,n){t.exports=n.p+"imgs/print-watermark-en-US.svg"},function(t,e,n){t.exports=n.p+"imgs/png-watermark-en-US.svg"},function(t,e,n){t.exports=n.p+"imgs/pdf-footer-en-US.svg"},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=a(n(2)),i=n(14),o=a(n(335));function a(t){return t&&t.__esModule?t:{default:t}}var s=r.default.join(i.remote.app.__rootname,"dll");e.default=new class{getDefaultPrinter(t){return this._edgeGetDefaultPrinter||(this._edgeGetDefaultPrinter=o.default.func(function(){return'\n                    using System.Diagnostics;\n                    using System.Threading.Tasks;\n                    using System.Collections.Generic;\n\n                    #r "System.Drawing.dll"\n                    using System.Drawing.Printing;\n\n                    #r "System.Drawing.dll"\n                    using System.Drawing;\n\n                    public class Startup\n                    {\n                        public async Task<object> Invoke(dynamic input)\n                        {\n                        PrinterSettings printerSettings = new System.Drawing.Printing.PrinterSettings();\n                        return printerSettings.PrinterName;\n                        }\n                    }\n                '})),this._edgeGetDefaultPrinter(null,t)}getPrinters(t){return this._edgeGetPrinters||(this._edgeGetPrinters=o.default.func(function(){return'\n                    using System.Diagnostics;\n                    using System.Threading.Tasks;\n                    using System.Collections.Generic;\n\n                    #r "System.Drawing.dll"\n                    using System.Drawing.Printing;\n\n                    #r "System.Drawing.dll"\n                    using System.Drawing;\n\n\n                    public class Startup\n                    {\n                        public async Task<object> Invoke(dynamic input)\n                        {\n                            List<string> printers = new List<string>();\n\n                            foreach (string printname in System.Drawing.Printing.PrinterSettings.InstalledPrinters)\n                            {\n                                printers.Add(printname);\n                            }\n                            return printers;\n                        }\n                    }\n\n                '})),this._edgeGetPrinters(null,t)}getSupportedPageSizesforPrinter(t,e){return this._edgeGetSupportedPageSizesforPrinter||(this._edgeGetSupportedPageSizesforPrinter=o.default.func(function(){return'\n                    using System.Diagnostics;\n                    using System.Threading.Tasks;\n                    using System.Collections.Generic;\n                    using System.Collections;\n\n                    #r "System.Drawing.dll"\n                    using System.Drawing.Printing;\n\n                    #r "System.Drawing.dll"\n                    using System.Drawing;\n\n                    #r "'+s+'/ReachFramework.dll"\n\n                    #r "'+s+'/System.Printing.dll"\n                    using System.Printing;\n\n                    public class Startup\n                    {\n                        public async Task<object> Invoke(dynamic input)\n                        {\n                            List<PageMediaSize> availablePaperSizes = new List<PageMediaSize>();\n\n                            Startup s = new Startup();\n                            foreach (PrintQueue printQueue in s.GetPrintQueues())\n                            {\n                                if(printQueue.FullName.Equals(input))\n                                {\n                                    var pCapability = printQueue.GetPrintCapabilities();\n                                    foreach (PageMediaSize paperSize in pCapability.PageMediaSizeCapability)\n                                    {\n                                        availablePaperSizes.Add(paperSize);\n                                    }\n                                    break;\n                                }\n                            }\n\n                            return availablePaperSizes;\n                        }\n\n                        private IEnumerable GetPrintQueues()\n                        {\n                            PrintServer printServer = new PrintServer();\n\n                            PrintQueueCollection printQueues\n                            = printServer.GetPrintQueues(new[]\n                            {\n                                EnumeratedPrintQueueTypes.Local,\n                                EnumeratedPrintQueueTypes.Connections\n                            });\n\n                            return printQueues;\n                        }\n                    }\n\n                '})),this._edgeGetSupportedPageSizesforPrinter(t,e)}getSupportedPageOrientationsforPrinter(t,e){return this._edgeGetSupportedPageOrientationsforPrinter||(this._edgeGetSupportedPageOrientationsforPrinter=o.default.func(function(){return'\n                    using System.Diagnostics;\n                    using System.Threading.Tasks;\n                    using System.Collections.Generic;\n                    using System.Collections;\n\n                    #r "System.Drawing.dll"\n                    using System.Drawing.Printing;\n\n                    #r "System.Drawing.dll"\n                    using System.Drawing;\n\n                    #r "'+s+'/ReachFramework.dll"\n\n                    #r "'+s+'/System.Printing.dll"\n                    using System.Printing;\n\n                    public class Startup\n                    {\n                        public async Task<object> Invoke(dynamic input)\n                        {\n                            List<PageOrientation> availablePageOrientations = new List<PageOrientation>();\n\n                            Startup s = new Startup();\n                            foreach (PrintQueue printQueue in s.GetPrintQueues())\n                            {\n                                if (printQueue.FullName.Equals(input))\n                                {\n                                    var pCapability = printQueue.GetPrintCapabilities();\n                                    foreach (PageOrientation pageOrientation in pCapability.PageOrientationCapability)\n                                    {\n                                        availablePageOrientations.Add(pageOrientation);\n                                    }\n                                    break;\n                                }\n                            }\n\n                            return availablePageOrientations;\n                        }\n\n                        private IEnumerable GetPrintQueues()\n                        {\n                            PrintServer printServer = new PrintServer();\n\n                            PrintQueueCollection printQueues\n                            = printServer.GetPrintQueues(new[]\n                            {\n                                EnumeratedPrintQueueTypes.Local,\n                                EnumeratedPrintQueueTypes.Connections\n                            });\n\n                            return printQueues;\n                        }\n                    }\n\n                '})),this._edgeGetSupportedPageOrientationsforPrinter(t,e)}setPageSizeforPrinter(t,e){return this._edgeSetPageSizeforPrinter||(this._edgeSetPageSizeforPrinter=o.default.func(function(){return'\n                    using System.Diagnostics;\n                    using System.Threading.Tasks;\n                    using System.Collections.Generic;\n                    using System.Collections;\n\n                    #r "System.Drawing.dll"\n                    using System.Drawing.Printing;\n\n                    #r "System.Drawing.dll"\n                    using System.Drawing;\n\n                    #r "'+s+'/ReachFramework.dll"\n\n                    #r "'+s+'/System.Printing.dll"\n                    using System.Printing;\n\n                    public class Startup\n                    {\n                        public async Task<object> Invoke(dynamic input)\n                        {\n                                    Startup s = new Startup();\n\n                                    foreach (PrintQueue printQueue in s.GetPrintQueues())\n                                    {\n                                        if (printQueue.FullName.Equals((string)input.printerName))\n                                        {\n                                            return s.setPageSizeforPrinter(printQueue, (string)input.pageSizeName);\n                                        }\n                                    }\n\n                                return "error";\n                        }\n\n                        private IEnumerable GetPrintQueues()\n                        {\n                            PrintServer printServer = new PrintServer();\n\n                            PrintQueueCollection printQueues\n                            = printServer.GetPrintQueues(new[]\n                            {\n                                EnumeratedPrintQueueTypes.Local,\n                                EnumeratedPrintQueueTypes.Connections\n                            });\n\n                            return printQueues;\n                        }\n\n                        private string setPageSizeforPrinter(PrintQueue queue, string pageMediaSizeName)\n                        {\n                            PrintCapabilities printcap = queue.GetPrintCapabilities();\n\n                            PageMediaSize pageMediaSizeToSet = null;\n                            foreach (PageMediaSize pageMediaSize in printcap.PageMediaSizeCapability)\n                            {\n                                if (string.Equals(pageMediaSize.PageMediaSizeName.ToString(), pageMediaSizeName))\n                                {\n                                    pageMediaSizeToSet = pageMediaSize;\n                                }\n                            }\n\n                            PrintTicket deltaTicket = new PrintTicket();\n                            deltaTicket.PageMediaSize = pageMediaSizeToSet;\n\n                            ValidationResult result = queue.MergeAndValidatePrintTicket(queue.UserPrintTicket, deltaTicket);\n\n                            if (string.Equals(result.ValidatedPrintTicket.PageMediaSize.PageMediaSizeName.ToString(), pageMediaSizeName))\n                            {\n                                queue.UserPrintTicket = result.ValidatedPrintTicket;\n                                queue.Commit();\n                                return "Success";\n                            }\n                            else\n                            {\n                                return "error";\n                            }\n\n                        }\n                    }\n\n                '})),this._edgeSetPageSizeforPrinter(t,e)}setPageOrientationforPrinter(t,e){return this._edgeSetPageOrientationforPrinter||(this._edgeSetPageOrientationforPrinter=o.default.func(function(){return'\n                    using System.Diagnostics;\n                    using System.Threading.Tasks;\n                    using System.Collections.Generic;\n                    using System.Collections;\n\n                    #r "System.Drawing.dll"\n                    using System.Drawing.Printing;\n\n                    #r "System.Drawing.dll"\n                    using System.Drawing;\n\n                    #r "'+s+'/ReachFramework.dll"\n\n                    #r "'+s+'/System.Printing.dll"\n                    using System.Printing;\n\n                    public class Startup\n                    {\n                        public async Task<object> Invoke(dynamic input)\n                        {\n                                    Startup s = new Startup();\n\n                                    foreach (PrintQueue printQueue in s.GetPrintQueues())\n                                    {\n                                        if (printQueue.FullName.Equals((string)input.printerName))\n                                        {\n                                            return s.setPageOrientationforPrinter(printQueue, (string)input.pageOrientation);\n                                        }\n                                    }\n\n                                return "error";\n                        }\n\n\n                        private IEnumerable GetPrintQueues()\n                        {\n                            PrintServer printServer = new PrintServer();\n\n                            PrintQueueCollection printQueues\n                            = printServer.GetPrintQueues(new[]\n                            {\n                                EnumeratedPrintQueueTypes.Local,\n                                EnumeratedPrintQueueTypes.Connections\n                            });\n\n                            return printQueues;\n                        }\n\n                        private string setPageOrientationforPrinter(PrintQueue queue, string pageOrientation)\n                        {\n                        PrintCapabilities printcap = queue.GetPrintCapabilities();\n                        PrintTicket deltaTicket = new PrintTicket();\n                        PageOrientation pOrientation;\n                        System.Enum.TryParse(pageOrientation, out pOrientation);\n\n                        if (printcap.PageOrientationCapability.Contains(pOrientation))\n                        {\n                            deltaTicket.PageOrientation = pOrientation;\n                        }\n\n                        ValidationResult result = queue.MergeAndValidatePrintTicket(queue.UserPrintTicket, deltaTicket);\n\n                        if (result.ValidatedPrintTicket.PageOrientation== pOrientation)\n                        {\n                            queue.UserPrintTicket = result.ValidatedPrintTicket;\n                            queue.Commit();\n                            return "Success";\n                        }\n                        else\n                        {\n                            return "error";\n                        }\n\n                        }\n                    }\n\n                '})),this._edgeSetPageOrientationforPrinter(t,e)}setDefaultPrinter(t,e){return this._edgeSetDefaultPrinter||(this._edgeSetDefaultPrinter=o.default.func(function(){return'\n                using System.Diagnostics;\n                    using System.Threading.Tasks;\n                    using System.Collections.Generic;\n                    using System.Runtime.InteropServices;\n\n                    public class Startup\n                    {\n                        public async Task<object> Invoke(dynamic input)\n                        {\n                            return SetDefaultPrinter(input);\n                        }\n\n                        [DllImport("winspool.drv", CharSet = CharSet.Auto, SetLastError = true)]\n                        public static extern bool SetDefaultPrinter(string Name);\n                    }\n\n                '})),this._edgeSetDefaultPrinter(t,e)}}},function(t,e,n){t.exports=n(127)},function(t,e,n){"use strict";var r=d(n(82)),i=d(n(47)),o=d(n(133));n(257);var a=n(260),s=d(n(261)),u=n(262),c=d(n(263)),l=d(n(264)),h=d(n(265));function d(t){return t&&t.__esModule?t:{default:t}}i.default.use(a.XMDropdown),i.default.use(a.XMDropdownItem),i.default.use(s.default),i.default.use(u.xmButton),i.default.use(u.xmButtonGroup),i.default.use(c.default),i.default.use(l.default),o.default.init().then(function(){new i.default((0,r.default)({},h.default)).$mount("#app")})},function(t,e,n){n(129),t.exports=n(3).Object.assign},function(t,e,n){var r=n(6);r(r.S+r.F,"Object",{assign:n(130)})},function(t,e,n){"use strict";var r=n(27),i=n(63),o=n(39),a=n(40),s=n(57),u=Object.assign;t.exports=!u||n(21)(function(){var t={},e={},n=Symbol(),r="abcdefghijklmnopqrst";return t[n]=7,r.split("").forEach(function(t){e[t]=t}),7!=u({},t)[n]||Object.keys(u({},e)).join("")!=r})?function(t,e){for(var n=a(t),u=arguments.length,c=1,l=i.f,h=o.f;u>c;)for(var d,f=s(arguments[c++]),p=l?r(f).concat(l(f)):r(f),g=p.length,v=0;g>v;)h.call(f,d=p[v++])&&(n[d]=f[d]);return n}:u},function(t,e,n){var r=n(23),i=n(45),o=n(132);t.exports=function(t){return function(e,n,a){var s,u=r(e),c=i(u.length),l=o(a,c);if(t&&n!=n){for(;c>l;)if((s=u[l++])!=s)return!0}else for(;c>l;l++)if((t||l in u)&&u[l]===n)return t||l||0;return!t&&-1}}},function(t,e,n){var r=n(59),i=Math.max,o=Math.min;t.exports=function(t,e){return(t=r(t))<0?i(t+e,0):o(t,e)}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(14),i=s(n(47)),o=n(18),a=s(n(254));function s(t){return t&&t.__esModule?t:{default:t}}i.default.mixin(a.default),e.default={init:function(){return o.localizer.updateLocale({locales:["en-US",r.remote.app.getLocale(),o.preferences.get("general.locale")]})}}},function(t,e,n){var r=n(3),i=r.JSON||(r.JSON={stringify:JSON.stringify});t.exports=function(t){return i.stringify.apply(i,arguments)}},function(t,e,n){var r,i;i=function(){return function t(e,n,i){function o(s,u){if(!n[s]){if(!e[s]){if(!u&&("function"==typeof r&&r))return r(s,!0);if(a)return a(s,!0);var c=new Error("Cannot find module '"+s+"'");throw c.code="MODULE_NOT_FOUND",c}var l=n[s]={exports:{}};e[s][0].call(l.exports,function(t){var n=e[s][1][t];return o(n||t)},l,l.exports,t,e,n,i)}return n[s].exports}for(var a="function"==typeof r&&r,s=0;s<i.length;s++)o(i[s]);return o}({1:[function(t,e,n){function r(){this._defaults=[]}["use","on","once","set","query","type","accept","auth","withCredentials","sortQuery","retry","ok","redirects","timeout","buffer","serialize","parse","ca","key","pfx","cert"].forEach(function(t){r.prototype[t]=function(){return this._defaults.push({fn:t,arguments:arguments}),this}}),r.prototype._setDefaults=function(t){this._defaults.forEach(function(e){t[e.fn].apply(t,e.arguments)})},e.exports=r},{}],2:[function(t,e,n){"use strict";e.exports=function(t){return null!==t&&"object"==typeof t}},{}],3:[function(t,e,n){"use strict";var r=t("./is-object");function i(t){if(t)return function(t){for(var e in i.prototype)t[e]=i.prototype[e];return t}(t)}e.exports=i,i.prototype.clearTimeout=function(){return clearTimeout(this._timer),clearTimeout(this._responseTimeoutTimer),delete this._timer,delete this._responseTimeoutTimer,this},i.prototype.parse=function(t){return this._parser=t,this},i.prototype.responseType=function(t){return this._responseType=t,this},i.prototype.serialize=function(t){return this._serializer=t,this},i.prototype.timeout=function(t){if(!t||"object"!=typeof t)return this._timeout=t,this._responseTimeout=0,this;for(var e in t)switch(e){case"deadline":this._timeout=t.deadline;break;case"response":this._responseTimeout=t.response;break;default:console.warn("Unknown timeout option",e)}return this},i.prototype.retry=function(t,e){return 0!==arguments.length&&!0!==t||(t=1),t<=0&&(t=0),this._maxRetries=t,this._retries=0,this._retryCallback=e,this};var o=["ECONNRESET","ETIMEDOUT","EADDRINFO","ESOCKETTIMEDOUT"];i.prototype._shouldRetry=function(t,e){if(!this._maxRetries||this._retries++>=this._maxRetries)return!1;if(this._retryCallback)try{var n=this._retryCallback(t,e);if(!0===n)return!0;if(!1===n)return!1}catch(t){console.error(t)}if(e&&e.status&&e.status>=500&&501!=e.status)return!0;if(t){if(t.code&&~o.indexOf(t.code))return!0;if(t.timeout&&"ECONNABORTED"==t.code)return!0;if(t.crossDomain)return!0}return!1},i.prototype._retry=function(){return this.clearTimeout(),this.req&&(this.req=null,this.req=this.request()),this._aborted=!1,this.timedout=!1,this._end()},i.prototype.then=function(t,e){if(!this._fullfilledPromise){var n=this;this._endCalled&&console.warn("Warning: superagent request was sent twice, because both .end() and .then() were called. Never call .end() if you use promises"),this._fullfilledPromise=new Promise(function(t,e){n.end(function(n,r){n?e(n):t(r)})})}return this._fullfilledPromise.then(t,e)},i.prototype.catch=function(t){return this.then(void 0,t)},i.prototype.use=function(t){return t(this),this},i.prototype.ok=function(t){if("function"!=typeof t)throw Error("Callback required");return this._okCallback=t,this},i.prototype._isResponseOK=function(t){return!!t&&(this._okCallback?this._okCallback(t):t.status>=200&&t.status<300)},i.prototype.get=function(t){return this._header[t.toLowerCase()]},i.prototype.getHeader=i.prototype.get,i.prototype.set=function(t,e){if(r(t)){for(var n in t)this.set(n,t[n]);return this}return this._header[t.toLowerCase()]=e,this.header[t]=e,this},i.prototype.unset=function(t){return delete this._header[t.toLowerCase()],delete this.header[t],this},i.prototype.field=function(t,e){if(null===t||void 0===t)throw new Error(".field(name, val) name can not be empty");if(this._data&&console.error(".field() can't be used if .send() is used. Please use only .send() or only .field() & .attach()"),r(t)){for(var n in t)this.field(n,t[n]);return this}if(Array.isArray(e)){for(var i in e)this.field(t,e[i]);return this}if(null===e||void 0===e)throw new Error(".field(name, val) val can not be empty");return"boolean"==typeof e&&(e=""+e),this._getFormData().append(t,e),this},i.prototype.abort=function(){return this._aborted?this:(this._aborted=!0,this.xhr&&this.xhr.abort(),this.req&&this.req.abort(),this.clearTimeout(),this.emit("abort"),this)},i.prototype._auth=function(t,e,n,r){switch(n.type){case"basic":this.set("Authorization","Basic "+r(t+":"+e));break;case"auto":this.username=t,this.password=e;break;case"bearer":this.set("Authorization","Bearer "+t)}return this},i.prototype.withCredentials=function(t){return void 0==t&&(t=!0),this._withCredentials=t,this},i.prototype.redirects=function(t){return this._maxRedirects=t,this},i.prototype.maxResponseSize=function(t){if("number"!=typeof t)throw TypeError("Invalid argument");return this._maxResponseSize=t,this},i.prototype.toJSON=function(){return{method:this.method,url:this.url,data:this._data,headers:this._header}},i.prototype.send=function(t){var e=r(t),n=this._header["content-type"];if(this._formData&&console.error(".send() can't be used if .attach() or .field() is used. Please use only .send() or only .field() & .attach()"),e&&!this._data)Array.isArray(t)?this._data=[]:this._isHost(t)||(this._data={});else if(t&&this._data&&this._isHost(this._data))throw Error("Can't merge these send calls");if(e&&r(this._data))for(var i in t)this._data[i]=t[i];else"string"==typeof t?(n||this.type("form"),n=this._header["content-type"],this._data="application/x-www-form-urlencoded"==n?this._data?this._data+"&"+t:t:(this._data||"")+t):this._data=t;return!e||this._isHost(t)?this:(n||this.type("json"),this)},i.prototype.sortQuery=function(t){return this._sort=void 0===t||t,this},i.prototype._finalizeQueryString=function(){var t=this._query.join("&");if(t&&(this.url+=(this.url.indexOf("?")>=0?"&":"?")+t),this._query.length=0,this._sort){var e=this.url.indexOf("?");if(e>=0){var n=this.url.substring(e+1).split("&");"function"==typeof this._sort?n.sort(this._sort):n.sort(),this.url=this.url.substring(0,e)+"?"+n.join("&")}}},i.prototype._appendQueryString=function(){console.trace("Unsupported")},i.prototype._timeoutError=function(t,e,n){if(!this._aborted){var r=new Error(t+e+"ms exceeded");r.timeout=e,r.code="ECONNABORTED",r.errno=n,this.timedout=!0,this.abort(),this.callback(r)}},i.prototype._setTimeouts=function(){var t=this;this._timeout&&!this._timer&&(this._timer=setTimeout(function(){t._timeoutError("Timeout of ",t._timeout,"ETIME")},this._timeout)),this._responseTimeout&&!this._responseTimeoutTimer&&(this._responseTimeoutTimer=setTimeout(function(){t._timeoutError("Response timeout of ",t._responseTimeout,"ETIMEDOUT")},this._responseTimeout))}},{"./is-object":2}],4:[function(t,e,n){"use strict";var r=t("./utils");function i(t){if(t)return function(t){for(var e in i.prototype)t[e]=i.prototype[e];return t}(t)}e.exports=i,i.prototype.get=function(t){return this.header[t.toLowerCase()]},i.prototype._setHeaderProperties=function(t){var e=t["content-type"]||"";this.type=r.type(e);var n=r.params(e);for(var i in n)this[i]=n[i];this.links={};try{t.link&&(this.links=r.parseLinks(t.link))}catch(t){}},i.prototype._setStatusProperties=function(t){var e=t/100|0;this.status=this.statusCode=t,this.statusType=e,this.info=1==e,this.ok=2==e,this.redirect=3==e,this.clientError=4==e,this.serverError=5==e,this.error=(4==e||5==e)&&this.toError(),this.accepted=202==t,this.noContent=204==t,this.badRequest=400==t,this.unauthorized=401==t,this.notAcceptable=406==t,this.forbidden=403==t,this.notFound=404==t}},{"./utils":5}],5:[function(t,e,n){"use strict";n.type=function(t){return t.split(/ *; */).shift()},n.params=function(t){return t.split(/ *; */).reduce(function(t,e){var n=e.split(/ *= */),r=n.shift(),i=n.shift();return r&&i&&(t[r]=i),t},{})},n.parseLinks=function(t){return t.split(/ *, */).reduce(function(t,e){var n=e.split(/ *; */),r=n[0].slice(1,-1);return t[n[1].split(/ *= */)[1].slice(1,-1)]=r,t},{})},n.cleanHeader=function(t,e){return delete t["content-type"],delete t["content-length"],delete t["transfer-encoding"],delete t.host,e&&(delete t.authorization,delete t.cookie),t}},{}],6:[function(t,e,n){function r(t){if(t)return function(t){for(var e in r.prototype)t[e]=r.prototype[e];return t}(t)}void 0!==e&&(e.exports=r),r.prototype.on=r.prototype.addEventListener=function(t,e){return this._callbacks=this._callbacks||{},(this._callbacks["$"+t]=this._callbacks["$"+t]||[]).push(e),this},r.prototype.once=function(t,e){function n(){this.off(t,n),e.apply(this,arguments)}return n.fn=e,this.on(t,n),this},r.prototype.off=r.prototype.removeListener=r.prototype.removeAllListeners=r.prototype.removeEventListener=function(t,e){if(this._callbacks=this._callbacks||{},0==arguments.length)return this._callbacks={},this;var n,r=this._callbacks["$"+t];if(!r)return this;if(1==arguments.length)return delete this._callbacks["$"+t],this;for(var i=0;i<r.length;i++)if((n=r[i])===e||n.fn===e){r.splice(i,1);break}return this},r.prototype.emit=function(t){this._callbacks=this._callbacks||{};var e=[].slice.call(arguments,1),n=this._callbacks["$"+t];if(n)for(var r=0,i=(n=n.slice(0)).length;r<i;++r)n[r].apply(this,e);return this},r.prototype.listeners=function(t){return this._callbacks=this._callbacks||{},this._callbacks["$"+t]||[]},r.prototype.hasListeners=function(t){return!!this.listeners(t).length}},{}],7:[function(t,e,n){var r;"undefined"!=typeof window?r=window:"undefined"!=typeof self?r=self:(console.warn("Using browser-only version of superagent in non-browser environment"),r=this);var i=t("component-emitter"),o=t("./request-base"),a=t("./is-object"),s=t("./response-base"),u=t("./agent-base");function c(){}var l=n=e.exports=function(t,e){return"function"==typeof e?new n.Request("GET",t).end(e):1==arguments.length?new n.Request("GET",t):new n.Request(t,e)};n.Request=m,l.getXHR=function(){if(!(!r.XMLHttpRequest||r.location&&"file:"==r.location.protocol&&r.ActiveXObject))return new XMLHttpRequest;try{return new ActiveXObject("Microsoft.XMLHTTP")}catch(t){}try{return new ActiveXObject("Msxml2.XMLHTTP.6.0")}catch(t){}try{return new ActiveXObject("Msxml2.XMLHTTP.3.0")}catch(t){}try{return new ActiveXObject("Msxml2.XMLHTTP")}catch(t){}throw Error("Browser-only version of superagent could not find XHR")};var h="".trim?function(t){return t.trim()}:function(t){return t.replace(/(^\s*|\s*$)/g,"")};function d(t){if(!a(t))return t;var e=[];for(var n in t)f(e,n,t[n]);return e.join("&")}function f(t,e,n){if(null!=n)if(Array.isArray(n))n.forEach(function(n){f(t,e,n)});else if(a(n))for(var r in n)f(t,e+"["+r+"]",n[r]);else t.push(encodeURIComponent(e)+"="+encodeURIComponent(n));else null===n&&t.push(encodeURIComponent(e))}function p(t){for(var e,n,r={},i=t.split("&"),o=0,a=i.length;o<a;++o)-1==(n=(e=i[o]).indexOf("="))?r[decodeURIComponent(e)]="":r[decodeURIComponent(e.slice(0,n))]=decodeURIComponent(e.slice(n+1));return r}function g(t){return/[\/+]json($|[^-\w])/.test(t)}function v(t){this.req=t,this.xhr=this.req.xhr,this.text="HEAD"!=this.req.method&&(""===this.xhr.responseType||"text"===this.xhr.responseType)||void 0===this.xhr.responseType?this.xhr.responseText:null,this.statusText=this.req.xhr.statusText;var e=this.xhr.status;1223===e&&(e=204),this._setStatusProperties(e),this.header=this.headers=function(t){for(var e,n,r,i,o=t.split(/\r?\n/),a={},s=0,u=o.length;s<u;++s)-1!==(e=(n=o[s]).indexOf(":"))&&(r=n.slice(0,e).toLowerCase(),i=h(n.slice(e+1)),a[r]=i);return a}(this.xhr.getAllResponseHeaders()),this.header["content-type"]=this.xhr.getResponseHeader("content-type"),this._setHeaderProperties(this.header),null===this.text&&t._responseType?this.body=this.xhr.response:this.body="HEAD"!=this.req.method?this._parseBody(this.text?this.text:this.xhr.response):null}function m(t,e){var n=this;this._query=this._query||[],this.method=t,this.url=e,this.header={},this._header={},this.on("end",function(){var t,e=null,r=null;try{r=new v(n)}catch(t){return(e=new Error("Parser is unable to parse the response")).parse=!0,e.original=t,n.xhr?(e.rawResponse=void 0===n.xhr.responseType?n.xhr.responseText:n.xhr.response,e.status=n.xhr.status?n.xhr.status:null,e.statusCode=e.status):(e.rawResponse=null,e.status=null),n.callback(e)}n.emit("response",r);try{n._isResponseOK(r)||(t=new Error(r.statusText||"Unsuccessful HTTP response"))}catch(e){t=e}t?(t.original=e,t.response=r,t.status=r.status,n.callback(t,r)):n.callback(null,r)})}function y(t,e,n){var r=l("DELETE",t);return"function"==typeof e&&(n=e,e=null),e&&r.send(e),n&&r.end(n),r}l.serializeObject=d,l.parseString=p,l.types={html:"text/html",json:"application/json",xml:"text/xml",urlencoded:"application/x-www-form-urlencoded",form:"application/x-www-form-urlencoded","form-data":"application/x-www-form-urlencoded"},l.serialize={"application/x-www-form-urlencoded":d,"application/json":JSON.stringify},l.parse={"application/x-www-form-urlencoded":p,"application/json":JSON.parse},s(v.prototype),v.prototype._parseBody=function(t){var e=l.parse[this.type];return this.req._parser?this.req._parser(this,t):(!e&&g(this.type)&&(e=l.parse["application/json"]),e&&t&&(t.length||t instanceof Object)?e(t):null)},v.prototype.toError=function(){var t=this.req,e=t.method,n=t.url,r="cannot "+e+" "+n+" ("+this.status+")",i=new Error(r);return i.status=this.status,i.method=e,i.url=n,i},l.Response=v,i(m.prototype),o(m.prototype),m.prototype.type=function(t){return this.set("Content-Type",l.types[t]||t),this},m.prototype.accept=function(t){return this.set("Accept",l.types[t]||t),this},m.prototype.auth=function(t,e,n){1===arguments.length&&(e=""),"object"==typeof e&&null!==e&&(n=e,e=""),n||(n={type:"function"==typeof btoa?"basic":"auto"});return this._auth(t,e,n,function(t){if("function"==typeof btoa)return btoa(t);throw new Error("Cannot use basic auth, btoa is not a function")})},m.prototype.query=function(t){return"string"!=typeof t&&(t=d(t)),t&&this._query.push(t),this},m.prototype.attach=function(t,e,n){if(e){if(this._data)throw Error("superagent can't mix .send() and .attach()");this._getFormData().append(t,e,n||e.name)}return this},m.prototype._getFormData=function(){return this._formData||(this._formData=new r.FormData),this._formData},m.prototype.callback=function(t,e){if(this._shouldRetry(t,e))return this._retry();var n=this._callback;this.clearTimeout(),t&&(this._maxRetries&&(t.retries=this._retries-1),this.emit("error",t)),n(t,e)},m.prototype.crossDomainError=function(){var t=new Error("Request has been terminated\nPossible causes: the network is offline, Origin is not allowed by Access-Control-Allow-Origin, the page is being unloaded, etc.");t.crossDomain=!0,t.status=this.status,t.method=this.method,t.url=this.url,this.callback(t)},m.prototype.buffer=m.prototype.ca=m.prototype.agent=function(){return console.warn("This is not supported in browser version of superagent"),this},m.prototype.pipe=m.prototype.write=function(){throw Error("Streaming is not supported in browser version of superagent")},m.prototype._isHost=function(t){return t&&"object"==typeof t&&!Array.isArray(t)&&"[object Object]"!==Object.prototype.toString.call(t)},m.prototype.end=function(t){return this._endCalled&&console.warn("Warning: .end() was called twice. This is not supported in superagent"),this._endCalled=!0,this._callback=t||c,this._finalizeQueryString(),this._end()},m.prototype._end=function(){var t=this,e=this.xhr=l.getXHR(),n=this._formData||this._data;this._setTimeouts(),e.onreadystatechange=function(){var n=e.readyState;if(n>=2&&t._responseTimeoutTimer&&clearTimeout(t._responseTimeoutTimer),4==n){var r;try{r=e.status}catch(t){r=0}if(!r){if(t.timedout||t._aborted)return;return t.crossDomainError()}t.emit("end")}};var r=function(e,n){n.total>0&&(n.percent=n.loaded/n.total*100),n.direction=e,t.emit("progress",n)};if(this.hasListeners("progress"))try{e.onprogress=r.bind(null,"download"),e.upload&&(e.upload.onprogress=r.bind(null,"upload"))}catch(t){}try{this.username&&this.password?e.open(this.method,this.url,!0,this.username,this.password):e.open(this.method,this.url,!0)}catch(t){return this.callback(t)}if(this._withCredentials&&(e.withCredentials=!0),!this._formData&&"GET"!=this.method&&"HEAD"!=this.method&&"string"!=typeof n&&!this._isHost(n)){var i=this._header["content-type"],o=this._serializer||l.serialize[i?i.split(";")[0]:""];!o&&g(i)&&(o=l.serialize["application/json"]),o&&(n=o(n))}for(var a in this.header)null!=this.header[a]&&this.header.hasOwnProperty(a)&&e.setRequestHeader(a,this.header[a]);return this._responseType&&(e.responseType=this._responseType),this.emit("request",this),e.send(void 0!==n?n:null),this},l.agent=function(){return new u},["GET","POST","OPTIONS","PATCH","PUT","DELETE"].forEach(function(t){u.prototype[t.toLowerCase()]=function(e,n){var r=new l.Request(t,e);return this._setDefaults(r),n&&r.end(n),r}}),u.prototype.del=u.prototype.delete,l.get=function(t,e,n){var r=l("GET",t);return"function"==typeof e&&(n=e,e=null),e&&r.query(e),n&&r.end(n),r},l.head=function(t,e,n){var r=l("HEAD",t);return"function"==typeof e&&(n=e,e=null),e&&r.query(e),n&&r.end(n),r},l.options=function(t,e,n){var r=l("OPTIONS",t);return"function"==typeof e&&(n=e,e=null),e&&r.send(e),n&&r.end(n),r},l.del=y,l.delete=y,l.patch=function(t,e,n){var r=l("PATCH",t);return"function"==typeof e&&(n=e,e=null),e&&r.send(e),n&&r.end(n),r},l.post=function(t,e,n){var r=l("POST",t);return"function"==typeof e&&(n=e,e=null),e&&r.send(e),n&&r.end(n),r},l.put=function(t,e,n){var r=l("PUT",t);return"function"==typeof e&&(n=e,e=null),e&&r.send(e),n&&r.end(n),r}},{"./agent-base":1,"./is-object":2,"./request-base":3,"./response-base":4,"component-emitter":6}]},{},[7])(7)},t.exports=i()},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.RendererLogger=void 0;var r=n(18);class i{constructor(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"root";this.moduleName=t,this.debugAllowed=null,this.debug=this.debug.bind(this),this.info=this.info.bind(this),this.warn=this.warn.bind(this),this.error=this.error.bind(this)}logger(t){return t?new i("root"===this.moduleName?t:this.moduleName+":"+t):this}debug(){for(var t=arguments.length,e=Array(t),n=0;n<t;n++)e[n]=arguments[n];return this._handleLog("debug",e),this}info(){for(var t=arguments.length,e=Array(t),n=0;n<t;n++)e[n]=arguments[n];return this._handleLog("info",e),this}warn(){for(var t=arguments.length,e=Array(t),n=0;n<t;n++)e[n]=arguments[n];return this._handleLog("warn",e),this}error(){for(var t=arguments.length,e=Array(t),n=0;n<t;n++)e[n]=arguments[n];return this._handleLog("error",e),this}_handleLog(t,e){r.ipcServices.send("writeLogToFile",{protoFnName:t,moduleName:this.moduleName,args:e})}}e.RendererLogger=i,e.default=new i},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=f(n(35)),i=f(n(48)),o=f(n(85)),a=f(n(24)),s=f(n(25)),u=f(n(2)),c=f(n(163)),l=f(n(99)),h=f(n(220)),d=f(n(14));function f(t){return t&&t.__esModule?t:{default:t}}var p="translation.json",g=h.default.logger("localize");e.default=class extends c.default{constructor(t){super(),this._defaultLocaleDir=t,this._translation=null;var e=d.default.remote?d.default.remote.app.__rootname:d.default.app.__rootname;this.__newTransFilePath=u.default.join(e,"locales","new_translations.json"),this.__new_translation=null,this.__haveMore=!1}localize(t){var e=void 0;if(!this._translation)return t;(e=t in this._translation?this._translation[t]:t)||(e=t);for(var n=arguments.length,r=Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];if(r.length>0){var o=r.shift();if("object"===(void 0===e?"undefined":(0,a.default)(e))?e=o in e?e[o]:t:r.unshift(o),r.length>0)for(var s=0,u=r.length;s<u;s++){var c=new RegExp("\\$"+(s+1),"g");e=e.replace(c,r[s])}}return e}_dev_save_translation(t){(t||"string"==typeof t)&&(this.__new_translation||(this.__new_translation={},setInterval(this._dev_sync_translation.bind(this),1e3)),this.__new_translation[t]||(this.__haveMore=!0,this.__new_translation[t]=!0))}_dev_sync_translation(){var t=this;this.__haveMore&&(l.default.existsSync(this.__newTransFilePath)?l.default.readFile(this.__newTransFilePath,function(e,n){if(!e&&0!==n.length)try{var r=JSON.parse(n.toString());t._dev_mergeAndSync(r,t.__new_translation)}catch(t){return}}):this._dev_mergeAndSync({},this.__new_translation))}_dev_mergeAndSync(t,e){this.__haveMore=!1;var n={};(0,o.default)(t).concat((0,o.default)(e)).sort().forEach(function(t){n[t]=!0}),this.__new_translation=n,l.default.writeFile(this.__newTransFilePath,(0,i.default)(n,null,2)),console.log("Write file")}updateLocale(t){var e=this,n=t.locales,i=void 0===n?[]:n,o=t.searchPath,a=void 0===o?this._defaultLocaleDir:o;return this._translation={},new s.default(function(t,n){var o=[];i.forEach(function(t){if(t){var e=function(t){if(!t)return null;var e=t.indexOf("-");return e<0?t:t.substr(0,e)}(t);e&&o.push(e),t!==e&&o.push(t)}}),g.debug("Locales to load: %s",o),s.default.all(o.map(function(t,e){return new s.default(function(n){if(!e)return n({});var r=u.default.join(u.default.join(t,e),p);l.default.readFileAsync(r).then(JSON.parse).then(n).catch(function(){return n({})})})}.bind(e,a))).then(function(t){t.forEach(function(t){(0,r.default)(e._translation,t)})}).then(function(){var t=e._locale;e._locale=i.pop(),e.emit("change:locale",{oldvalue:t,newvalue:e._locale})}).then(t).catch(n)})}}},function(t,e,n){n(139),t.exports=n(3).Object.keys},function(t,e,n){var r=n(40),i=n(27);n(140)("keys",function(){return function(t){return i(r(t))}})},function(t,e,n){var r=n(6),i=n(3),o=n(21);t.exports=function(t,e){var n=(i.Object||{})[t]||Object[t],a={};a[t]=e(n),r(r.S+r.F*o(function(){n(1)}),"Object",a)}},function(t,e,n){t.exports={default:n(142),__esModule:!0}},function(t,e,n){n(41),n(50),t.exports=n(66).f("iterator")},function(t,e,n){var r=n(59),i=n(58);t.exports=function(t){return function(e,n){var o,a,s=String(i(e)),u=r(n),c=s.length;return u<0||u>=c?t?"":void 0:(o=s.charCodeAt(u))<55296||o>56319||u+1===c||(a=s.charCodeAt(u+1))<56320||a>57343?t?s.charAt(u):o:t?s.slice(u,u+2):a-56320+(o-55296<<10)+65536}}},function(t,e,n){"use strict";var r=n(65),i=n(37),o=n(43),a={};n(17)(a,n(8)("iterator"),function(){return this}),t.exports=function(t,e,n){t.prototype=r(a,{next:i(1,n)}),o(t,e+" Iterator")}},function(t,e,n){var r=n(11),i=n(15),o=n(27);t.exports=n(13)?Object.defineProperties:function(t,e){i(t);for(var n,a=o(e),s=a.length,u=0;s>u;)r.f(t,n=a[u++],e[n]);return t}},function(t,e,n){var r=n(22),i=n(40),o=n(60)("IE_PROTO"),a=Object.prototype;t.exports=Object.getPrototypeOf||function(t){return t=i(t),r(t,o)?t[o]:"function"==typeof t.constructor&&t instanceof t.constructor?t.constructor.prototype:t instanceof Object?a:null}},function(t,e,n){"use strict";var r=n(148),i=n(88),o=n(42),a=n(23);t.exports=n(64)(Array,"Array",function(t,e){this._t=a(t),this._i=0,this._k=e},function(){var t=this._t,e=this._k,n=this._i++;return!t||n>=t.length?(this._t=void 0,i(1)):i(0,"keys"==e?n:"values"==e?t[n]:[n,t[n]])},"values"),o.Arguments=o.Array,r("keys"),r("values"),r("entries")},function(t,e){t.exports=function(){}},function(t,e,n){t.exports={default:n(150),__esModule:!0}},function(t,e,n){n(151),n(69),n(155),n(156),t.exports=n(3).Symbol},function(t,e,n){"use strict";var r=n(7),i=n(22),o=n(13),a=n(6),s=n(86),u=n(67).KEY,c=n(21),l=n(61),h=n(43),d=n(46),f=n(8),p=n(66),g=n(68),v=n(152),m=n(89),y=n(15),_=n(12),E=n(23),A=n(56),S=n(37),T=n(65),x=n(153),b=n(154),w=n(11),C=n(27),I=b.f,L=w.f,N=x.f,O=r.Symbol,R=r.JSON,M=R&&R.stringify,D=f("_hidden"),P=f("toPrimitive"),k={}.propertyIsEnumerable,B=l("symbol-registry"),F=l("symbols"),V=l("op-symbols"),U=Object.prototype,H="function"==typeof O,Y=r.QObject,G=!Y||!Y.prototype||!Y.prototype.findChild,j=o&&c(function(){return 7!=T(L({},"a",{get:function(){return L(this,"a",{value:7}).a}})).a})?function(t,e,n){var r=I(U,e);r&&delete U[e],L(t,e,n),r&&t!==U&&L(U,e,r)}:L,z=function(t){var e=F[t]=T(O.prototype);return e._k=t,e},W=H&&"symbol"==typeof O.iterator?function(t){return"symbol"==typeof t}:function(t){return t instanceof O},K=function(t,e,n){return t===U&&K(V,e,n),y(t),e=A(e,!0),y(n),i(F,e)?(n.enumerable?(i(t,D)&&t[D][e]&&(t[D][e]=!1),n=T(n,{enumerable:S(0,!1)})):(i(t,D)||L(t,D,S(1,{})),t[D][e]=!0),j(t,e,n)):L(t,e,n)},Q=function(t,e){y(t);for(var n,r=v(e=E(e)),i=0,o=r.length;o>i;)K(t,n=r[i++],e[n]);return t},q=function(t){var e=k.call(this,t=A(t,!0));return!(this===U&&i(F,t)&&!i(V,t))&&(!(e||!i(this,t)||!i(F,t)||i(this,D)&&this[D][t])||e)},X=function(t,e){if(t=E(t),e=A(e,!0),t!==U||!i(F,e)||i(V,e)){var n=I(t,e);return!n||!i(F,e)||i(t,D)&&t[D][e]||(n.enumerable=!0),n}},$=function(t){for(var e,n=N(E(t)),r=[],o=0;n.length>o;)i(F,e=n[o++])||e==D||e==u||r.push(e);return r},J=function(t){for(var e,n=t===U,r=N(n?V:E(t)),o=[],a=0;r.length>a;)!i(F,e=r[a++])||n&&!i(U,e)||o.push(F[e]);return o};H||(s((O=function(){if(this instanceof O)throw TypeError("Symbol is not a constructor!");var t=d(arguments.length>0?arguments[0]:void 0),e=function(n){this===U&&e.call(V,n),i(this,D)&&i(this[D],t)&&(this[D][t]=!1),j(this,t,S(1,n))};return o&&G&&j(U,t,{configurable:!0,set:e}),z(t)}).prototype,"toString",function(){return this._k}),b.f=X,w.f=K,n(90).f=x.f=$,n(39).f=q,n(63).f=J,o&&!n(49)&&s(U,"propertyIsEnumerable",q,!0),p.f=function(t){return z(f(t))}),a(a.G+a.W+a.F*!H,{Symbol:O});for(var Z="hasInstance,isConcatSpreadable,iterator,match,replace,search,species,split,toPrimitive,toStringTag,unscopables".split(","),tt=0;Z.length>tt;)f(Z[tt++]);for(var et=C(f.store),nt=0;et.length>nt;)g(et[nt++]);a(a.S+a.F*!H,"Symbol",{for:function(t){return i(B,t+="")?B[t]:B[t]=O(t)},keyFor:function(t){if(!W(t))throw TypeError(t+" is not a symbol!");for(var e in B)if(B[e]===t)return e},useSetter:function(){G=!0},useSimple:function(){G=!1}}),a(a.S+a.F*!H,"Object",{create:function(t,e){return void 0===e?T(t):Q(T(t),e)},defineProperty:K,defineProperties:Q,getOwnPropertyDescriptor:X,getOwnPropertyNames:$,getOwnPropertySymbols:J}),R&&a(a.S+a.F*(!H||c(function(){var t=O();return"[null]"!=M([t])||"{}"!=M({a:t})||"{}"!=M(Object(t))})),"JSON",{stringify:function(t){for(var e,n,r=[t],i=1;arguments.length>i;)r.push(arguments[i++]);if(n=e=r[1],(_(e)||void 0!==t)&&!W(t))return m(e)||(e=function(t,e){if("function"==typeof n&&(e=n.call(this,t,e)),!W(e))return e}),r[1]=e,M.apply(R,r)}}),O.prototype[P]||n(17)(O.prototype,P,O.prototype.valueOf),h(O,"Symbol"),h(Math,"Math",!0),h(r.JSON,"JSON",!0)},function(t,e,n){var r=n(27),i=n(63),o=n(39);t.exports=function(t){var e=r(t),n=i.f;if(n)for(var a,s=n(t),u=o.f,c=0;s.length>c;)u.call(t,a=s[c++])&&e.push(a);return e}},function(t,e,n){var r=n(23),i=n(90).f,o={}.toString,a="object"==typeof window&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[];t.exports.f=function(t){return a&&"[object Window]"==o.call(t)?function(t){try{return i(t)}catch(t){return a.slice()}}(t):i(r(t))}},function(t,e,n){var r=n(39),i=n(37),o=n(23),a=n(56),s=n(22),u=n(83),c=Object.getOwnPropertyDescriptor;e.f=n(13)?c:function(t,e){if(t=o(t),e=a(e,!0),u)try{return c(t,e)}catch(t){}if(s(t,e))return i(!r.f.call(t,e),t[e])}},function(t,e,n){n(68)("asyncIterator")},function(t,e,n){n(68)("observable")},function(t,e,n){n(69),n(41),n(50),n(158),n(161),n(162),t.exports=n(3).Promise},function(t,e,n){"use strict";var r,i,o,a,s=n(49),u=n(7),c=n(16),l=n(70),h=n(6),d=n(12),f=n(36),p=n(71),g=n(44),v=n(93),m=n(94).set,y=n(160)(),_=n(73),E=n(95),A=n(96),S=u.TypeError,T=u.process,x=u.Promise,b="process"==l(T),w=function(){},C=i=_.f,I=!!function(){try{var t=x.resolve(1),e=(t.constructor={})[n(8)("species")]=function(t){t(w,w)};return(b||"function"==typeof PromiseRejectionEvent)&&t.then(w)instanceof e}catch(t){}}(),L=function(t){var e;return!(!d(t)||"function"!=typeof(e=t.then))&&e},N=function(t,e){if(!t._n){t._n=!0;var n=t._c;y(function(){for(var r=t._v,i=1==t._s,o=0,a=function(e){var n,o,a=i?e.ok:e.fail,s=e.resolve,u=e.reject,c=e.domain;try{a?(i||(2==t._h&&M(t),t._h=1),!0===a?n=r:(c&&c.enter(),n=a(r),c&&c.exit()),n===e.promise?u(S("Promise-chain cycle")):(o=L(n))?o.call(n,s,u):s(n)):u(r)}catch(t){u(t)}};n.length>o;)a(n[o++]);t._c=[],t._n=!1,e&&!t._h&&O(t)})}},O=function(t){m.call(u,function(){var e,n,r,i=t._v,o=R(t);if(o&&(e=E(function(){b?T.emit("unhandledRejection",i,t):(n=u.onunhandledrejection)?n({promise:t,reason:i}):(r=u.console)&&r.error&&r.error("Unhandled promise rejection",i)}),t._h=b||R(t)?2:1),t._a=void 0,o&&e.e)throw e.v})},R=function(t){return 1!==t._h&&0===(t._a||t._c).length},M=function(t){m.call(u,function(){var e;b?T.emit("rejectionHandled",t):(e=u.onrejectionhandled)&&e({promise:t,reason:t._v})})},D=function(t){var e=this;e._d||(e._d=!0,(e=e._w||e)._v=t,e._s=2,e._a||(e._a=e._c.slice()),N(e,!0))},P=function(t){var e,n=this;if(!n._d){n._d=!0,n=n._w||n;try{if(n===t)throw S("Promise can't be resolved itself");(e=L(t))?y(function(){var r={_w:n,_d:!1};try{e.call(t,c(P,r,1),c(D,r,1))}catch(t){D.call(r,t)}}):(n._v=t,n._s=1,N(n,!1))}catch(t){D.call({_w:n,_d:!1},t)}}};I||(x=function(t){p(this,x,"Promise","_h"),f(t),r.call(this);try{t(c(P,this,1),c(D,this,1))}catch(t){D.call(this,t)}},(r=function(t){this._c=[],this._a=void 0,this._s=0,this._d=!1,this._v=void 0,this._h=0,this._n=!1}).prototype=n(74)(x.prototype,{then:function(t,e){var n=C(v(this,x));return n.ok="function"!=typeof t||t,n.fail="function"==typeof e&&e,n.domain=b?T.domain:void 0,this._c.push(n),this._a&&this._a.push(n),this._s&&N(this,!1),n.promise},catch:function(t){return this.then(void 0,t)}}),o=function(){var t=new r;this.promise=t,this.resolve=c(P,t,1),this.reject=c(D,t,1)},_.f=C=function(t){return t===x||t===a?new o(t):i(t)}),h(h.G+h.W+h.F*!I,{Promise:x}),n(43)(x,"Promise"),n(97)("Promise"),a=n(3).Promise,h(h.S+h.F*!I,"Promise",{reject:function(t){var e=C(this);return(0,e.reject)(t),e.promise}}),h(h.S+h.F*(s||!I),"Promise",{resolve:function(t){return A(s&&this===a?x:this,t)}}),h(h.S+h.F*!(I&&n(98)(function(t){x.all(t).catch(w)})),"Promise",{all:function(t){var e=this,n=C(e),r=n.resolve,i=n.reject,o=E(function(){var n=[],o=0,a=1;g(t,!1,function(t){var s=o++,u=!1;n.push(void 0),a++,e.resolve(t).then(function(t){u||(u=!0,n[s]=t,--a||r(n))},i)}),--a||r(n)});return o.e&&i(o.v),n.promise},race:function(t){var e=this,n=C(e),r=n.reject,i=E(function(){g(t,!1,function(t){e.resolve(t).then(n.resolve,r)})});return i.e&&r(i.v),n.promise}})},function(t,e){t.exports=function(t,e,n){var r=void 0===n;switch(e.length){case 0:return r?t():t.call(n);case 1:return r?t(e[0]):t.call(n,e[0]);case 2:return r?t(e[0],e[1]):t.call(n,e[0],e[1]);case 3:return r?t(e[0],e[1],e[2]):t.call(n,e[0],e[1],e[2]);case 4:return r?t(e[0],e[1],e[2],e[3]):t.call(n,e[0],e[1],e[2],e[3])}return t.apply(n,e)}},function(t,e,n){var r=n(7),i=n(94).set,o=r.MutationObserver||r.WebKitMutationObserver,a=r.process,s=r.Promise,u="process"==n(38)(a);t.exports=function(){var t,e,n,c=function(){var r,i;for(u&&(r=a.domain)&&r.exit();t;){i=t.fn,t=t.next;try{i()}catch(r){throw t?n():e=void 0,r}}e=void 0,r&&r.enter()};if(u)n=function(){a.nextTick(c)};else if(!o||r.navigator&&r.navigator.standalone)if(s&&s.resolve){var l=s.resolve();n=function(){l.then(c)}}else n=function(){i.call(r,c)};else{var h=!0,d=document.createTextNode("");new o(c).observe(d,{characterData:!0}),n=function(){d.data=h=!h}}return function(r){var i={fn:r,next:void 0};e&&(e.next=i),t||(t=i,n()),e=i}}},function(t,e,n){"use strict";var r=n(6),i=n(3),o=n(7),a=n(93),s=n(96);r(r.P+r.R,"Promise",{finally:function(t){var e=a(this,i.Promise||o.Promise),n="function"==typeof t;return this.then(n?function(n){return s(e,t()).then(function(){return n})}:t,n?function(n){return s(e,t()).then(function(){throw n})}:t)}})},function(t,e,n){"use strict";var r=n(6),i=n(73),o=n(95);r(r.S,"Promise",{try:function(t){var e=i.f(this),n=o(t);return(n.e?e.reject:e.resolve)(n.v),e.promise}})},function(t,e){t.exports=require("events")},function(t,e,n){"use strict";const r=n(165),i={};r(i,n(100)),r(i,n(170)),r(i,n(106)),r(i,n(10)),r(i,n(52)),r(i,n(175)),r(i,n(179)),r(i,n(180)),r(i,n(181)),r(i,n(182)),r(i,n(188)),r(i,n(19)),t.exports=i},function(t,e,n){"use strict";t.exports=function(){const t=[].slice.call(arguments).filter(t=>t),e=t.shift();return t.forEach(t=>{Object.keys(t).forEach(n=>{e[n]=t[n]})}),e}},function(t,e,n){var r=n(101),i=n(167),o=process.cwd,a=null,s=process.env.GRACEFUL_FS_PLATFORM||process.platform;process.cwd=function(){return a||(a=o.call(process)),a};try{process.cwd()}catch(t){}var u=process.chdir;function c(t){return t?function(e,n,i){return t.call(r,e,n,function(t){g(t)&&(t=null),i&&i.apply(this,arguments)})}:t}function l(t){return t?function(e,n){try{return t.call(r,e,n)}catch(t){if(!g(t))throw t}}:t}function h(t){return t?function(e,n,i,o){return t.call(r,e,n,i,function(t){g(t)&&(t=null),o&&o.apply(this,arguments)})}:t}function d(t){return t?function(e,n,i){try{return t.call(r,e,n,i)}catch(t){if(!g(t))throw t}}:t}function f(t){return t?function(e,n){return t.call(r,e,function(t,e){if(!e)return n.apply(this,arguments);e.uid<0&&(e.uid+=4294967296),e.gid<0&&(e.gid+=4294967296),n&&n.apply(this,arguments)})}:t}function p(t){return t?function(e){var n=t.call(r,e);return n.uid<0&&(n.uid+=4294967296),n.gid<0&&(n.gid+=4294967296),n}:t}function g(t){return!t||("ENOSYS"===t.code||!(process.getuid&&0===process.getuid()||"EINVAL"!==t.code&&"EPERM"!==t.code))}process.chdir=function(t){a=null,u.call(process,t)},t.exports=function(t){i.hasOwnProperty("O_SYMLINK")&&process.version.match(/^v0\.6\.[0-2]|^v0\.5\./)&&function(t){t.lchmod=function(e,n,r){t.open(e,i.O_WRONLY|i.O_SYMLINK,n,function(e,i){e?r&&r(e):t.fchmod(i,n,function(e){t.close(i,function(t){r&&r(e||t)})})})},t.lchmodSync=function(e,n){var r,o=t.openSync(e,i.O_WRONLY|i.O_SYMLINK,n),a=!0;try{r=t.fchmodSync(o,n),a=!1}finally{if(a)try{t.closeSync(o)}catch(t){}else t.closeSync(o)}return r}}(t);t.lutimes||function(t){i.hasOwnProperty("O_SYMLINK")?(t.lutimes=function(e,n,r,o){t.open(e,i.O_SYMLINK,function(e,i){e?o&&o(e):t.futimes(i,n,r,function(e){t.close(i,function(t){o&&o(e||t)})})})},t.lutimesSync=function(e,n,r){var o,a=t.openSync(e,i.O_SYMLINK),s=!0;try{o=t.futimesSync(a,n,r),s=!1}finally{if(s)try{t.closeSync(a)}catch(t){}else t.closeSync(a)}return o}):(t.lutimes=function(t,e,n,r){r&&process.nextTick(r)},t.lutimesSync=function(){})}(t);t.chown=h(t.chown),t.fchown=h(t.fchown),t.lchown=h(t.lchown),t.chmod=c(t.chmod),t.fchmod=c(t.fchmod),t.lchmod=c(t.lchmod),t.chownSync=d(t.chownSync),t.fchownSync=d(t.fchownSync),t.lchownSync=d(t.lchownSync),t.chmodSync=l(t.chmodSync),t.fchmodSync=l(t.fchmodSync),t.lchmodSync=l(t.lchmodSync),t.stat=f(t.stat),t.fstat=f(t.fstat),t.lstat=f(t.lstat),t.statSync=p(t.statSync),t.fstatSync=p(t.fstatSync),t.lstatSync=p(t.lstatSync),t.lchmod||(t.lchmod=function(t,e,n){n&&process.nextTick(n)},t.lchmodSync=function(){});t.lchown||(t.lchown=function(t,e,n,r){r&&process.nextTick(r)},t.lchownSync=function(){});"win32"===s&&(t.rename=(e=t.rename,function(n,r,i){var o=Date.now(),a=0;e(n,r,function s(u){if(u&&("EACCES"===u.code||"EPERM"===u.code)&&Date.now()-o<6e4)return setTimeout(function(){t.stat(r,function(t,o){t&&"ENOENT"===t.code?e(n,r,s):i(u)})},a),void(a<100&&(a+=10));i&&i(u)})}));var e;t.read=(r=t.read,function(e,n,i,o,a,s){var u;if(s&&"function"==typeof s){var c=0;u=function(l,h,d){if(l&&"EAGAIN"===l.code&&c<10)return c++,r.call(t,e,n,i,o,a,u);s.apply(this,arguments)}}return r.call(t,e,n,i,o,a,u)}),t.readSync=(n=t.readSync,function(e,r,i,o,a){for(var s=0;;)try{return n.call(t,e,r,i,o,a)}catch(t){if("EAGAIN"===t.code&&s<10){s++;continue}throw t}});var n;var r}},function(t,e){t.exports=require("constants")},function(t,e,n){var r=n(169).Stream;t.exports=function(t){return{ReadStream:function e(n,i){if(!(this instanceof e))return new e(n,i);r.call(this);var o=this;this.path=n;this.fd=null;this.readable=!0;this.paused=!1;this.flags="r";this.mode=438;this.bufferSize=65536;i=i||{};var a=Object.keys(i);for(var s=0,u=a.length;s<u;s++){var c=a[s];this[c]=i[c]}this.encoding&&this.setEncoding(this.encoding);if(void 0!==this.start){if("number"!=typeof this.start)throw TypeError("start must be a Number");if(void 0===this.end)this.end=1/0;else if("number"!=typeof this.end)throw TypeError("end must be a Number");if(this.start>this.end)throw new Error("start must be <= end");this.pos=this.start}if(null!==this.fd)return void process.nextTick(function(){o._read()});t.open(this.path,this.flags,this.mode,function(t,e){if(t)return o.emit("error",t),void(o.readable=!1);o.fd=e,o.emit("open",e),o._read()})},WriteStream:function e(n,i){if(!(this instanceof e))return new e(n,i);r.call(this);this.path=n;this.fd=null;this.writable=!0;this.flags="w";this.encoding="binary";this.mode=438;this.bytesWritten=0;i=i||{};var o=Object.keys(i);for(var a=0,s=o.length;a<s;a++){var u=o[a];this[u]=i[u]}if(void 0!==this.start){if("number"!=typeof this.start)throw TypeError("start must be a Number");if(this.start<0)throw new Error("start must be >= zero");this.pos=this.start}this.busy=!1;this._queue=[];null===this.fd&&(this._open=t.open,this._queue.push([this._open,this.path,this.flags,this.mode,void 0]),this.flush())}}}},function(t,e){t.exports=require("stream")},function(t,e,n){const r=n(9).fromCallback;t.exports={copy:r(n(103))}},function(t,e,n){"use strict";const r=n(4),i=n(2),o=n(104).invalidWin32Path,a=parseInt("0777",8);t.exports=function t(e,n,s,u){if("function"==typeof n?(s=n,n={}):n&&"object"==typeof n||(n={mode:n}),"win32"===process.platform&&o(e)){const t=new Error(e+" contains invalid WIN32 path characters.");return t.code="EINVAL",s(t)}let c=n.mode;const l=n.fs||r;void 0===c&&(c=a&~process.umask()),u||(u=null),s=s||function(){},e=i.resolve(e),l.mkdir(e,c,r=>{if(!r)return s(null,u=u||e);switch(r.code){case"ENOENT":if(i.dirname(e)===e)return s(r);t(i.dirname(e),n,(r,i)=>{r?s(r,i):t(e,n,s,i)});break;default:l.stat(e,(t,e)=>{t||!e.isDirectory()?s(r,u):s(null,u)})}})}},function(t,e,n){"use strict";const r=n(4),i=n(2),o=n(104).invalidWin32Path,a=parseInt("0777",8);t.exports=function t(e,n,s){n&&"object"==typeof n||(n={mode:n});let u=n.mode;const c=n.fs||r;if("win32"===process.platform&&o(e)){const t=new Error(e+" contains invalid WIN32 path characters.");throw t.code="EINVAL",t}void 0===u&&(u=a&~process.umask()),s||(s=null),e=i.resolve(e);try{c.mkdirSync(e,u),s=s||e}catch(r){switch(r.code){case"ENOENT":if(i.dirname(e)===e)throw r;t(e,n,s=t(i.dirname(e),n,s));break;default:let o;try{o=c.statSync(e)}catch(t){throw r}if(!o.isDirectory())throw r}}return s}},function(t,e,n){"use strict";const r=n(4),i=n(2),o=n(10).mkdirsSync,a=n(105).utimesMillisSync,s=Symbol("notExist"),u=Symbol("existsReg");function c(t,e,n){if(!n.filter||n.filter(t,e))return function(t,e,n){const o=(n.dereference?r.statSync:r.lstatSync)(t);if(o.isDirectory())return function(t,e,n,i){const o=f(n);if(o===s){if(p(e,n))throw new Error(`Cannot copy '${e}' to a subdirectory of itself, '${n}'.`);return function(t,e,n,i){return r.mkdirSync(n,t.mode),r.chmodSync(n,t.mode),d(e,n,i)}(t,e,n,i)}if(o===u){if(p(e,n))throw new Error(`Cannot copy '${e}' to a subdirectory of itself, '${n}'.`);return function(t,e,n){if(!r.statSync(e).isDirectory())throw new Error(`Cannot overwrite non-directory '${e}' with directory '${t}'.`);return d(t,e,n)}(e,n,i)}if(e===o)return;return d(e,n,i)}(o,t,e,n);if(o.isFile()||o.isCharacterDevice()||o.isBlockDevice())return function(t,e,n,r){const i=f(n);if(i===s)return h(t,e,n,r);if(i===u)return l(t,e,n,r);if(e===i)return;return l(t,e,n,r)}(o,t,e,n);if(o.isSymbolicLink())return function(t,e,n){let o=r.readlinkSync(t);n.dereference&&(o=i.resolve(process.cwd(),o));let a=f(e);if(a===s||a===u)return r.symlinkSync(o,e);if(n.dereference&&(a=i.resolve(process.cwd(),a)),a===o)return;if(r.statSync(e).isDirectory()&&p(a,o))throw new Error(`Cannot overwrite '${a}' with '${o}'.`);return function(t,e){return r.unlinkSync(e),r.symlinkSync(t,e)}(o,e)}(t,e,n)}(t,e,n)}function l(t,e,n,i){if(i.overwrite)return r.unlinkSync(n),h(t,e,n,i);if(i.errorOnExist)throw new Error(`'${n}' already exists`)}function h(t,e,i,o){return"function"==typeof r.copyFileSync?(r.copyFileSync(e,i),r.chmodSync(i,t.mode),o.preserveTimestamps?a(i,t.atime,t.mtime):void 0):function(t,e,i,o){const a=n(107)(65536),s=r.openSync(e,"r"),u=r.openSync(i,"w",t.mode);let c=1,l=0;for(;c>0;)c=r.readSync(s,a,0,65536,l),r.writeSync(u,a,0,c),l+=c;o.preserveTimestamps&&r.futimesSync(u,t.atime,t.mtime);r.closeSync(s),r.closeSync(u)}(t,e,i,o)}function d(t,e,n){r.readdirSync(t).forEach(r=>{c(i.join(t,r),i.join(e,r),n)})}function f(t){let e;try{e=r.readlinkSync(t)}catch(t){if("ENOENT"===t.code)return s;if("EINVAL"===t.code||"UNKNOWN"===t.code)return u;throw t}return e}function p(t,e){const n=e.split(i.dirname(t)+i.sep)[1];if(n){const r=n.split(i.sep)[0];return!!r&&(t!==e&&e.indexOf(t)>-1&&r===i.basename(t))}return!1}t.exports=function(t,e,n){if("function"==typeof n&&(n={filter:n}),(n=n||{}).clobber=!("clobber"in n&&!n.clobber),n.overwrite="overwrite"in n?!!n.overwrite:n.clobber,n.preserveTimestamps&&"ia32"===process.arch&&console.warn("fs-extra: Using the preserveTimestamps option in 32-bit node is not recommended;\n\n    see https://github.com/jprichardson/node-fs-extra/issues/269"),(t=i.resolve(t))===(e=i.resolve(e)))throw new Error("Source and destination must not be the same.");if(n.filter&&!n.filter(t,e))return;const a=i.dirname(e);return r.existsSync(a)||o(a),c(t,e,n)}},function(t,e,n){"use strict";const r=n(4),i=n(2),o=n(102),a="win32"===process.platform;function s(t){["unlink","chmod","stat","lstat","rmdir","readdir"].forEach(e=>{t[e]=t[e]||r[e],t[e+="Sync"]=t[e]||r[e]}),t.maxBusyTries=t.maxBusyTries||3}function u(t,e,n){let r=0;"function"==typeof e&&(n=e,e={}),o(t,"rimraf: missing path"),o.equal(typeof t,"string","rimraf: path should be a string"),o.equal(typeof n,"function","rimraf: callback function required"),o(e,"rimraf: invalid options argument provided"),o.equal(typeof e,"object","rimraf: options should be object"),s(e),c(t,e,function i(o){if(o){if(("EBUSY"===o.code||"ENOTEMPTY"===o.code||"EPERM"===o.code)&&r<e.maxBusyTries){return r++,setTimeout(()=>c(t,e,i),100*r)}"ENOENT"===o.code&&(o=null)}n(o)})}function c(t,e,n){o(t),o(e),o("function"==typeof n),e.lstat(t,(r,i)=>r&&"ENOENT"===r.code?n(null):r&&"EPERM"===r.code&&a?l(t,e,r,n):i&&i.isDirectory()?d(t,e,r,n):void e.unlink(t,r=>{if(r){if("ENOENT"===r.code)return n(null);if("EPERM"===r.code)return a?l(t,e,r,n):d(t,e,r,n);if("EISDIR"===r.code)return d(t,e,r,n)}return n(r)}))}function l(t,e,n,r){o(t),o(e),o("function"==typeof r),n&&o(n instanceof Error),e.chmod(t,438,i=>{i?r("ENOENT"===i.code?null:n):e.stat(t,(i,o)=>{i?r("ENOENT"===i.code?null:n):o.isDirectory()?d(t,e,n,r):e.unlink(t,r)})})}function h(t,e,n){let r;o(t),o(e),n&&o(n instanceof Error);try{e.chmodSync(t,438)}catch(t){if("ENOENT"===t.code)return;throw n}try{r=e.statSync(t)}catch(t){if("ENOENT"===t.code)return;throw n}r.isDirectory()?p(t,e,n):e.unlinkSync(t)}function d(t,e,n,r){o(t),o(e),n&&o(n instanceof Error),o("function"==typeof r),e.rmdir(t,a=>{!a||"ENOTEMPTY"!==a.code&&"EEXIST"!==a.code&&"EPERM"!==a.code?a&&"ENOTDIR"===a.code?r(n):r(a):function(t,e,n){o(t),o(e),o("function"==typeof n),e.readdir(t,(r,o)=>{if(r)return n(r);let a,s=o.length;if(0===s)return e.rmdir(t,n);o.forEach(r=>{u(i.join(t,r),e,r=>{if(!a)return r?n(a=r):void(0==--s&&e.rmdir(t,n))})})})}(t,e,r)})}function f(t,e){let n;s(e=e||{}),o(t,"rimraf: missing path"),o.equal(typeof t,"string","rimraf: path should be a string"),o(e,"rimraf: missing options"),o.equal(typeof e,"object","rimraf: options should be object");try{n=e.lstatSync(t)}catch(n){if("ENOENT"===n.code)return;"EPERM"===n.code&&a&&h(t,e,n)}try{n&&n.isDirectory()?p(t,e,null):e.unlinkSync(t)}catch(n){if("ENOENT"===n.code)return;if("EPERM"===n.code)return a?h(t,e,n):p(t,e,n);if("EISDIR"!==n.code)throw n;p(t,e,n)}}function p(t,e,n){o(t),o(e),n&&o(n instanceof Error);try{e.rmdirSync(t)}catch(r){if("ENOTDIR"===r.code)throw n;if("ENOTEMPTY"===r.code||"EEXIST"===r.code||"EPERM"===r.code)!function(t,e){o(t),o(e),e.readdirSync(t).forEach(n=>f(i.join(t,n),e));const n=a?100:1;let r=0;for(;;){let i=!0;try{const o=e.rmdirSync(t,e);return i=!1,o}finally{if(++r<n&&i)continue}}}(t,e);else if("ENOENT"!==r.code)throw r}}t.exports=u,u.sync=f},function(t,e,n){"use strict";const r=n(9).fromCallback,i=n(76);i.outputJson=r(n(177)),i.outputJsonSync=n(178),i.outputJSON=i.outputJson,i.outputJSONSync=i.outputJsonSync,i.writeJSON=i.writeJson,i.writeJSONSync=i.writeJsonSync,i.readJSON=i.readJson,i.readJSONSync=i.readJsonSync,t.exports=i},function(t,e,n){var r;try{r=n(4)}catch(t){r=n(28)}function i(t,e){var n,r="\n";return"object"==typeof e&&null!==e&&(e.spaces&&(n=e.spaces),e.EOL&&(r=e.EOL)),JSON.stringify(t,e?e.replacer:null,n).replace(/\n/g,r)+r}function o(t){return Buffer.isBuffer(t)&&(t=t.toString("utf8")),t=t.replace(/^\uFEFF/,"")}var a={readFile:function(t,e,n){null==n&&(n=e,e={}),"string"==typeof e&&(e={encoding:e});var i=(e=e||{}).fs||r,a=!0;"throws"in e&&(a=e.throws),i.readFile(t,e,function(r,i){if(r)return n(r);var s;i=o(i);try{s=JSON.parse(i,e?e.reviver:null)}catch(e){return a?(e.message=t+": "+e.message,n(e)):n(null,null)}n(null,s)})},readFileSync:function(t,e){"string"==typeof(e=e||{})&&(e={encoding:e});var n=e.fs||r,i=!0;"throws"in e&&(i=e.throws);try{var a=n.readFileSync(t,e);return a=o(a),JSON.parse(a,e.reviver)}catch(e){if(i)throw e.message=t+": "+e.message,e;return null}},writeFile:function(t,e,n,o){null==o&&(o=n,n={});var a=(n=n||{}).fs||r,s="";try{s=i(e,n)}catch(t){return void(o&&o(t,null))}a.writeFile(t,s,n,o)},writeFileSync:function(t,e,n){var o=(n=n||{}).fs||r,a=i(e,n);return o.writeFileSync(t,a,n)}};t.exports=a},function(t,e,n){"use strict";const r=n(2),i=n(10),o=n(19).pathExists,a=n(76);t.exports=function(t,e,n,s){"function"==typeof n&&(s=n,n={});const u=r.dirname(t);o(u,(r,o)=>r?s(r):o?a.writeJson(t,e,n,s):void i.mkdirs(u,r=>{if(r)return s(r);a.writeJson(t,e,n,s)}))}},function(t,e,n){"use strict";const r=n(4),i=n(2),o=n(10),a=n(76);t.exports=function(t,e,n){const s=i.dirname(t);r.existsSync(s)||o.mkdirsSync(s),a.writeJsonSync(t,e,n)}},function(t,e,n){"use strict";const r=n(9).fromCallback,i=n(4),o=n(103),a=n(2),s=n(52).remove,u=n(10).mkdirs;function c(t,e,n,r){i.stat(t,(o,a)=>{if(o)return r(o);a.isDirectory()?l(t,e,n,r):function(t,e,n,r){const o=n?"w":"wx",a=i.createReadStream(t),s=i.createWriteStream(e,{flags:o});function u(){i.unlink(t,r)}a.on("error",o=>{a.destroy(),s.destroy(),s.removeListener("close",u),i.unlink(e,()=>{"EISDIR"===o.code||"EPERM"===o.code?l(t,e,n,r):r(o)})}),s.on("error",t=>{a.destroy(),s.destroy(),s.removeListener("close",u),r(t)}),s.once("close",u),a.pipe(s)}(t,e,n,r)})}function l(t,e,n,r){const i={overwrite:!1};function a(){o(t,e,i,e=>{if(e)return r(e);s(t,r)})}n?s(e,t=>{if(t)return r(t);a()}):a()}t.exports={move:r(function t(e,n,r,o){"function"==typeof r&&(o=r,r={});const l=r.overwrite||r.clobber||!1;!function(t,e,n){i.stat(t,(r,i)=>{if(r)return n(r);if(i.isDirectory()){const r=e.split(a.dirname(t)+a.sep)[1];if(r){const i=r.split(a.sep)[0];return n(null,!!i&&(t!==e&&e.indexOf(t)>-1&&i===a.basename(t)))}return n(null,!1)}return n(null,!1)})}(e,n,(h,d)=>h?o(h):d?o(new Error(`Cannot move '${e}' to a subdirectory of itself, '${n}'.`)):void u(a.dirname(n),u=>{if(u)return o(u);a.resolve(e)===a.resolve(n)?i.access(e,o):l?i.rename(e,n,i=>{if(!i)return o();if("ENOTEMPTY"!==i.code&&"EEXIST"!==i.code){if("EPERM"!==i.code)return"EXDEV"!==i.code?o(i):void c(e,n,l,o);setTimeout(()=>{s(n,i=>{if(i)return o(i);r.overwrite=!1,t(e,n,r,o)})},200)}else s(n,i=>{if(i)return o(i);r.overwrite=!1,t(e,n,r,o)})}):i.link(e,n,t=>t?"EXDEV"===t.code||"EISDIR"===t.code||"EPERM"===t.code||"ENOTSUP"===t.code?c(e,n,l,o):o(t):i.unlink(e,o))}))})}},function(t,e,n){"use strict";const r=n(4),i=n(2),o=n(106).copySync,a=n(52).removeSync,s=n(10).mkdirsSync,u=n(107);function c(t,e,n){return r.statSync(t).isDirectory()?function(t,e,n){const r={overwrite:!1};n?(a(e),i()):i();function i(){return o(t,e,r),a(t)}}(t,e,n):function(t,e,n){const i=u(65536),o=n?"w":"wx",a=r.openSync(t,"r"),s=r.fstatSync(a),c=r.openSync(e,o,s.mode);let l=1,h=0;for(;l>0;)l=r.readSync(a,i,0,65536,h),r.writeSync(c,i,0,l),h+=l;return r.closeSync(a),r.closeSync(c),r.unlinkSync(t)}(t,e,n)}t.exports={moveSync:function t(e,n,o){const u=(o=o||{}).overwrite||o.clobber||!1;if(e=i.resolve(e),n=i.resolve(n),e===n)return r.accessSync(e);if(function(t,e){try{return r.statSync(t).isDirectory()&&t!==e&&e.indexOf(t)>-1&&e.split(i.dirname(t)+i.sep)[1].split(i.sep)[0]===i.basename(t)}catch(t){return!1}}(e,n))throw new Error(`Cannot move '${e}' into itself '${n}'.`);s(i.dirname(n)),function(){if(u)try{r.renameSync(e,n)}catch(r){if("ENOTEMPTY"===r.code||"EEXIST"===r.code||"EPERM"===r.code)return a(n),o.overwrite=!1,t(e,n,o);if("EXDEV"!==r.code)throw r;return c(e,n,u)}else try{r.linkSync(e,n),r.unlinkSync(e)}catch(t){if("EXDEV"===t.code||"EISDIR"===t.code||"EPERM"===t.code||"ENOTSUP"===t.code)return c(e,n,u);throw t}}()}}},function(t,e,n){"use strict";const r=n(9).fromCallback,i=n(28),o=n(2),a=n(10),s=n(52),u=r(function(t,e){e=e||function(){},i.readdir(t,(n,r)=>{if(n)return a.mkdirs(t,e);r=r.map(e=>o.join(t,e)),function t(){const n=r.pop();if(!n)return e();s.remove(n,n=>{if(n)return e(n);t()})}()})});function c(t){let e;try{e=i.readdirSync(t)}catch(e){return a.mkdirsSync(t)}e.forEach(e=>{e=o.join(t,e),s.removeSync(e)})}t.exports={emptyDirSync:c,emptydirSync:c,emptyDir:u,emptydir:u}},function(t,e,n){"use strict";const r=n(183),i=n(184),o=n(185);t.exports={createFile:r.createFile,createFileSync:r.createFileSync,ensureFile:r.createFile,ensureFileSync:r.createFileSync,createLink:i.createLink,createLinkSync:i.createLinkSync,ensureLink:i.createLink,ensureLinkSync:i.createLinkSync,createSymlink:o.createSymlink,createSymlinkSync:o.createSymlinkSync,ensureSymlink:o.createSymlink,ensureSymlinkSync:o.createSymlinkSync}},function(t,e,n){"use strict";const r=n(9).fromCallback,i=n(2),o=n(4),a=n(10),s=n(19).pathExists;t.exports={createFile:r(function(t,e){function n(){o.writeFile(t,"",t=>{if(t)return e(t);e()})}o.stat(t,(r,o)=>{if(!r&&o.isFile())return e();const u=i.dirname(t);s(u,(t,r)=>t?e(t):r?n():void a.mkdirs(u,t=>{if(t)return e(t);n()}))})}),createFileSync:function(t){let e;try{e=o.statSync(t)}catch(t){}if(e&&e.isFile())return;const n=i.dirname(t);o.existsSync(n)||a.mkdirsSync(n),o.writeFileSync(t,"")}}},function(t,e,n){"use strict";const r=n(9).fromCallback,i=n(2),o=n(4),a=n(10),s=n(19).pathExists;t.exports={createLink:r(function(t,e,n){function r(t,e){o.link(t,e,t=>{if(t)return n(t);n(null)})}s(e,(u,c)=>u?n(u):c?n(null):void o.lstat(t,(o,u)=>{if(o)return o.message=o.message.replace("lstat","ensureLink"),n(o);const c=i.dirname(e);s(c,(i,o)=>i?n(i):o?r(t,e):void a.mkdirs(c,i=>{if(i)return n(i);r(t,e)}))}))}),createLinkSync:function(t,e,n){if(o.existsSync(e))return;try{o.lstatSync(t)}catch(t){throw t.message=t.message.replace("lstat","ensureLink"),t}const r=i.dirname(e);return o.existsSync(r)?o.linkSync(t,e):(a.mkdirsSync(r),o.linkSync(t,e))}}},function(t,e,n){"use strict";const r=n(9).fromCallback,i=n(2),o=n(4),a=n(10),s=a.mkdirs,u=a.mkdirsSync,c=n(186),l=c.symlinkPaths,h=c.symlinkPathsSync,d=n(187),f=d.symlinkType,p=d.symlinkTypeSync,g=n(19).pathExists;t.exports={createSymlink:r(function(t,e,n,r){r="function"==typeof n?n:r,n="function"!=typeof n&&n,g(e,(a,u)=>a?r(a):u?r(null):void l(t,e,(a,u)=>{if(a)return r(a);t=u.toDst,f(u.toCwd,n,(n,a)=>{if(n)return r(n);const u=i.dirname(e);g(u,(n,i)=>n?r(n):i?o.symlink(t,e,a,r):void s(u,n=>{if(n)return r(n);o.symlink(t,e,a,r)}))})}))}),createSymlinkSync:function(t,e,n,r){if(r="function"==typeof n?n:r,n="function"!=typeof n&&n,o.existsSync(e))return;const a=h(t,e);t=a.toDst,n=p(a.toCwd,n);const s=i.dirname(e);return o.existsSync(s)?o.symlinkSync(t,e,n):(u(s),o.symlinkSync(t,e,n))}}},function(t,e,n){"use strict";const r=n(2),i=n(4),o=n(19).pathExists;t.exports={symlinkPaths:function(t,e,n){if(r.isAbsolute(t))return i.lstat(t,(e,r)=>e?(e.message=e.message.replace("lstat","ensureSymlink"),n(e)):n(null,{toCwd:t,toDst:t}));{const a=r.dirname(e),s=r.join(a,t);return o(s,(e,o)=>e?n(e):o?n(null,{toCwd:s,toDst:t}):i.lstat(t,(e,i)=>e?(e.message=e.message.replace("lstat","ensureSymlink"),n(e)):n(null,{toCwd:t,toDst:r.relative(a,t)})))}},symlinkPathsSync:function(t,e){let n;if(r.isAbsolute(t)){if(!(n=i.existsSync(t)))throw new Error("absolute srcpath does not exist");return{toCwd:t,toDst:t}}{const o=r.dirname(e),a=r.join(o,t);if(n=i.existsSync(a))return{toCwd:a,toDst:t};if(!(n=i.existsSync(t)))throw new Error("relative srcpath does not exist");return{toCwd:t,toDst:r.relative(o,t)}}}}},function(t,e,n){"use strict";const r=n(4);t.exports={symlinkType:function(t,e,n){if(n="function"==typeof e?e:n,e="function"!=typeof e&&e)return n(null,e);r.lstat(t,(t,r)=>{if(t)return n(null,"file");e=r&&r.isDirectory()?"dir":"file",n(null,e)})},symlinkTypeSync:function(t,e){let n;if(e)return e;try{n=r.lstatSync(t)}catch(t){return"file"}return n&&n.isDirectory()?"dir":"file"}}},function(t,e,n){"use strict";const r=n(9).fromCallback,i=n(4),o=n(2),a=n(10),s=n(19).pathExists;t.exports={outputFile:r(function(t,e,n,r){"function"==typeof n&&(r=n,n="utf8");const u=o.dirname(t);s(u,(o,s)=>o?r(o):s?i.writeFile(t,e,n,r):void a.mkdirs(u,o=>{if(o)return r(o);i.writeFile(t,e,n,r)}))}),outputFileSync:function(t,e,n){const r=o.dirname(t);if(i.existsSync(r))return i.writeFileSync.apply(i,arguments);a.mkdirsSync(r),i.writeFileSync.apply(i,arguments)}}},function(t,e,n){"use strict";var r;"undefined"!=typeof Promise&&(r=Promise);var i=n(190)();i.noConflict=function(){try{Promise===i&&(Promise=r)}catch(t){}return i},t.exports=i},function(t,e,n){"use strict";t.exports=function(){var e=function(){return new f("circular promise resolution chain\n\n    See http://goo.gl/MqrFmX\n")},r=function(){return new I.PromiseInspection(this._target())},i=function(t){return I.reject(new f(t))};function o(){}var a,s={},u=n(1);a=u.isNode?function(){var t=process.domain;return void 0===t&&(t=null),t}:function(){return null},u.notEnumerableProp(I,"_getDomain",a);var c=n(29),l=n(191),h=new l;c.defineProperty(I,"_async",{value:h});var d=n(20),f=I.TypeError=d.TypeError;I.RangeError=d.RangeError;var p=I.CancellationError=d.CancellationError;I.TimeoutError=d.TimeoutError,I.OperationalError=d.OperationalError,I.RejectionError=d.OperationalError,I.AggregateError=d.AggregateError;var g=function(){},v={},m={},y=n(194)(I,g),_=n(195)(I,g,y,i,o),E=n(196)(I),A=E.create,S=n(197)(I,E),T=(S.CapturedTrace,n(198)(I,y,m)),x=n(108)(m),b=n(109),w=u.errorObj,C=u.tryCatch;function I(t){t!==g&&function(t,e){if(null==t||t.constructor!==I)throw new f("the promise constructor cannot be invoked directly\n\n    See http://goo.gl/MqrFmX\n");if("function"!=typeof e)throw new f("expecting a function but got "+u.classString(e))}(this,t),this._bitField=0,this._fulfillmentHandler0=void 0,this._rejectionHandler0=void 0,this._promise0=void 0,this._receiver0=void 0,this._resolveFromExecutor(t),this._promiseCreated(),this._fireEvent("promiseCreated",this)}function L(t){this.promise._resolveCallback(t)}function N(t){this.promise._rejectCallback(t,!1)}function O(t){var e=new I(g);e._fulfillmentHandler0=t,e._rejectionHandler0=t,e._promise0=t,e._receiver0=t}return I.prototype.toString=function(){return"[object Promise]"},I.prototype.caught=I.prototype.catch=function(t){var e=arguments.length;if(e>1){var n,r=new Array(e-1),o=0;for(n=0;n<e-1;++n){var a=arguments[n];if(!u.isObject(a))return i("Catch statement predicate: expecting an object but got "+u.classString(a));r[o++]=a}return r.length=o,t=arguments[n],this.then(void 0,x(r,t,this))}return this.then(void 0,t)},I.prototype.reflect=function(){return this._then(r,r,void 0,this,void 0)},I.prototype.then=function(t,e){if(S.warnings()&&arguments.length>0&&"function"!=typeof t&&"function"!=typeof e){var n=".then() only accepts functions but was passed: "+u.classString(t);arguments.length>1&&(n+=", "+u.classString(e)),this._warn(n)}return this._then(t,e,void 0,void 0,void 0)},I.prototype.done=function(t,e){this._then(t,e,void 0,void 0,void 0)._setIsFinal()},I.prototype.spread=function(t){return"function"!=typeof t?i("expecting a function but got "+u.classString(t)):this.all()._then(t,void 0,void 0,v,void 0)},I.prototype.toJSON=function(){var t={isFulfilled:!1,isRejected:!1,fulfillmentValue:void 0,rejectionReason:void 0};return this.isFulfilled()?(t.fulfillmentValue=this.value(),t.isFulfilled=!0):this.isRejected()&&(t.rejectionReason=this.reason(),t.isRejected=!0),t},I.prototype.all=function(){return arguments.length>0&&this._warn(".all() was passed arguments but it does not take any"),new _(this).promise()},I.prototype.error=function(t){return this.caught(u.originatesFromRejection,t)},I.getNewLibraryCopy=t.exports,I.is=function(t){return t instanceof I},I.fromNode=I.fromCallback=function(t){var e=new I(g);e._captureStackTrace();var n=arguments.length>1&&!!Object(arguments[1]).multiArgs,r=C(t)(b(e,n));return r===w&&e._rejectCallback(r.e,!0),e._isFateSealed()||e._setAsyncGuaranteed(),e},I.all=function(t){return new _(t).promise()},I.cast=function(t){var e=y(t);return e instanceof I||((e=new I(g))._captureStackTrace(),e._setFulfilled(),e._rejectionHandler0=t),e},I.resolve=I.fulfilled=I.cast,I.reject=I.rejected=function(t){var e=new I(g);return e._captureStackTrace(),e._rejectCallback(t,!0),e},I.setScheduler=function(t){if("function"!=typeof t)throw new f("expecting a function but got "+u.classString(t));return h.setScheduler(t)},I.prototype._then=function(t,e,n,r,i){var o=void 0!==i,s=o?i:new I(g),c=this._target(),l=c._bitField;o||(s._propagateFrom(this,3),s._captureStackTrace(),void 0===r&&0!=(2097152&this._bitField)&&(r=0!=(50397184&l)?this._boundValue():c===this?void 0:this._boundTo),this._fireEvent("promiseChained",this,s));var d=a();if(0!=(50397184&l)){var f,v,m=c._settlePromiseCtx;0!=(33554432&l)?(v=c._rejectionHandler0,f=t):0!=(16777216&l)?(v=c._fulfillmentHandler0,f=e,c._unsetRejectionIsUnhandled()):(m=c._settlePromiseLateCancellationObserver,v=new p("late cancellation observer"),c._attachExtraTrace(v),f=e),h.invoke(m,c,{handler:null===d?f:"function"==typeof f&&u.domainBind(d,f),promise:s,receiver:r,value:v})}else c._addCallbacks(t,e,s,r,d);return s},I.prototype._length=function(){return 65535&this._bitField},I.prototype._isFateSealed=function(){return 0!=(117506048&this._bitField)},I.prototype._isFollowing=function(){return 67108864==(67108864&this._bitField)},I.prototype._setLength=function(t){this._bitField=-65536&this._bitField|65535&t},I.prototype._setFulfilled=function(){this._bitField=33554432|this._bitField,this._fireEvent("promiseFulfilled",this)},I.prototype._setRejected=function(){this._bitField=16777216|this._bitField,this._fireEvent("promiseRejected",this)},I.prototype._setFollowing=function(){this._bitField=67108864|this._bitField,this._fireEvent("promiseResolved",this)},I.prototype._setIsFinal=function(){this._bitField=4194304|this._bitField},I.prototype._isFinal=function(){return(4194304&this._bitField)>0},I.prototype._unsetCancelled=function(){this._bitField=-65537&this._bitField},I.prototype._setCancelled=function(){this._bitField=65536|this._bitField,this._fireEvent("promiseCancelled",this)},I.prototype._setWillBeCancelled=function(){this._bitField=8388608|this._bitField},I.prototype._setAsyncGuaranteed=function(){h.hasCustomScheduler()||(this._bitField=134217728|this._bitField)},I.prototype._receiverAt=function(t){var e=0===t?this._receiver0:this[4*t-4+3];if(e!==s)return void 0===e&&this._isBound()?this._boundValue():e},I.prototype._promiseAt=function(t){return this[4*t-4+2]},I.prototype._fulfillmentHandlerAt=function(t){return this[4*t-4+0]},I.prototype._rejectionHandlerAt=function(t){return this[4*t-4+1]},I.prototype._boundValue=function(){},I.prototype._migrateCallback0=function(t){t._bitField;var e=t._fulfillmentHandler0,n=t._rejectionHandler0,r=t._promise0,i=t._receiverAt(0);void 0===i&&(i=s),this._addCallbacks(e,n,r,i,null)},I.prototype._migrateCallbackAt=function(t,e){var n=t._fulfillmentHandlerAt(e),r=t._rejectionHandlerAt(e),i=t._promiseAt(e),o=t._receiverAt(e);void 0===o&&(o=s),this._addCallbacks(n,r,i,o,null)},I.prototype._addCallbacks=function(t,e,n,r,i){var o=this._length();if(o>=65531&&(o=0,this._setLength(0)),0===o)this._promise0=n,this._receiver0=r,"function"==typeof t&&(this._fulfillmentHandler0=null===i?t:u.domainBind(i,t)),"function"==typeof e&&(this._rejectionHandler0=null===i?e:u.domainBind(i,e));else{var a=4*o-4;this[a+2]=n,this[a+3]=r,"function"==typeof t&&(this[a+0]=null===i?t:u.domainBind(i,t)),"function"==typeof e&&(this[a+1]=null===i?e:u.domainBind(i,e))}return this._setLength(o+1),o},I.prototype._proxy=function(t,e){this._addCallbacks(void 0,void 0,e,t,null)},I.prototype._resolveCallback=function(t,n){if(0==(117506048&this._bitField)){if(t===this)return this._rejectCallback(e(),!1);var r=y(t,this);if(!(r instanceof I))return this._fulfill(t);n&&this._propagateFrom(r,2);var i=r._target();if(i!==this){var o=i._bitField;if(0==(50397184&o)){var a=this._length();a>0&&i._migrateCallback0(this);for(var s=1;s<a;++s)i._migrateCallbackAt(this,s);this._setFollowing(),this._setLength(0),this._setFollowee(i)}else if(0!=(33554432&o))this._fulfill(i._value());else if(0!=(16777216&o))this._reject(i._reason());else{var u=new p("late cancellation observer");i._attachExtraTrace(u),this._reject(u)}}else this._reject(e())}},I.prototype._rejectCallback=function(t,e,n){var r=u.ensureErrorObject(t),i=r===t;if(!i&&!n&&S.warnings()){var o="a promise was rejected with a non-error: "+u.classString(t);this._warn(o,!0)}this._attachExtraTrace(r,!!e&&i),this._reject(t)},I.prototype._resolveFromExecutor=function(t){if(t!==g){var e=this;this._captureStackTrace(),this._pushContext();var n=!0,r=this._execute(t,function(t){e._resolveCallback(t)},function(t){e._rejectCallback(t,n)});n=!1,this._popContext(),void 0!==r&&e._rejectCallback(r,!0)}},I.prototype._settlePromiseFromHandler=function(t,e,n,r){var i=r._bitField;if(0==(65536&i)){var o;r._pushContext(),e===v?n&&"number"==typeof n.length?o=C(t).apply(this._boundValue(),n):(o=w).e=new f("cannot .spread() a non-array: "+u.classString(n)):o=C(t).call(e,n);var a=r._popContext();0==(65536&(i=r._bitField))&&(o===m?r._reject(n):o===w?r._rejectCallback(o.e,!1):(S.checkForgottenReturns(o,a,"",r,this),r._resolveCallback(o)))}},I.prototype._target=function(){for(var t=this;t._isFollowing();)t=t._followee();return t},I.prototype._followee=function(){return this._rejectionHandler0},I.prototype._setFollowee=function(t){this._rejectionHandler0=t},I.prototype._settlePromise=function(t,e,n,i){var a=t instanceof I,s=this._bitField,u=0!=(134217728&s);0!=(65536&s)?(a&&t._invokeInternalOnCancel(),n instanceof T&&n.isFinallyHandler()?(n.cancelPromise=t,C(e).call(n,i)===w&&t._reject(w.e)):e===r?t._fulfill(r.call(n)):n instanceof o?n._promiseCancelled(t):a||t instanceof _?t._cancel():n.cancel()):"function"==typeof e?a?(u&&t._setAsyncGuaranteed(),this._settlePromiseFromHandler(e,n,i,t)):e.call(n,i,t):n instanceof o?n._isResolved()||(0!=(33554432&s)?n._promiseFulfilled(i,t):n._promiseRejected(i,t)):a&&(u&&t._setAsyncGuaranteed(),0!=(33554432&s)?t._fulfill(i):t._reject(i))},I.prototype._settlePromiseLateCancellationObserver=function(t){var e=t.handler,n=t.promise,r=t.receiver,i=t.value;"function"==typeof e?n instanceof I?this._settlePromiseFromHandler(e,r,i,n):e.call(r,i,n):n instanceof I&&n._reject(i)},I.prototype._settlePromiseCtx=function(t){this._settlePromise(t.promise,t.handler,t.receiver,t.value)},I.prototype._settlePromise0=function(t,e,n){var r=this._promise0,i=this._receiverAt(0);this._promise0=void 0,this._receiver0=void 0,this._settlePromise(r,t,i,e)},I.prototype._clearCallbackDataAtIndex=function(t){var e=4*t-4;this[e+2]=this[e+3]=this[e+0]=this[e+1]=void 0},I.prototype._fulfill=function(t){var n=this._bitField;if(!((117506048&n)>>>16)){if(t===this){var r=e();return this._attachExtraTrace(r),this._reject(r)}this._setFulfilled(),this._rejectionHandler0=t,(65535&n)>0&&(0!=(134217728&n)?this._settlePromises():h.settlePromises(this))}},I.prototype._reject=function(t){var e=this._bitField;if(!((117506048&e)>>>16)){if(this._setRejected(),this._fulfillmentHandler0=t,this._isFinal())return h.fatalError(t,u.isNode);(65535&e)>0?h.settlePromises(this):this._ensurePossibleRejectionHandled()}},I.prototype._fulfillPromises=function(t,e){for(var n=1;n<t;n++){var r=this._fulfillmentHandlerAt(n),i=this._promiseAt(n),o=this._receiverAt(n);this._clearCallbackDataAtIndex(n),this._settlePromise(i,r,o,e)}},I.prototype._rejectPromises=function(t,e){for(var n=1;n<t;n++){var r=this._rejectionHandlerAt(n),i=this._promiseAt(n),o=this._receiverAt(n);this._clearCallbackDataAtIndex(n),this._settlePromise(i,r,o,e)}},I.prototype._settlePromises=function(){var t=this._bitField,e=65535&t;if(e>0){if(0!=(16842752&t)){var n=this._fulfillmentHandler0;this._settlePromise0(this._rejectionHandler0,n,t),this._rejectPromises(e,n)}else{var r=this._rejectionHandler0;this._settlePromise0(this._fulfillmentHandler0,r,t),this._fulfillPromises(e,r)}this._setLength(0)}this._clearCancellationData()},I.prototype._settledValue=function(){var t=this._bitField;return 0!=(33554432&t)?this._rejectionHandler0:0!=(16777216&t)?this._fulfillmentHandler0:void 0},I.defer=I.pending=function(){return S.deprecated("Promise.defer","new Promise"),{promise:new I(g),resolve:L,reject:N}},u.notEnumerableProp(I,"_makeSelfResolutionError",e),n(199)(I,g,y,i,S),n(200)(I,g,y,S),n(201)(I,_,i,S),n(202)(I),n(203)(I),n(204)(I,_,y,g,h,a),I.Promise=I,I.version="3.5.1",n(205)(I,_,i,y,g,S),n(206)(I),n(207)(I,i,y,A,g,S),n(208)(I,g,S),n(209)(I,i,g,y,o,S),n(210)(I),n(211)(I,g),n(212)(I,_,y,i),n(213)(I,g,y,i),n(214)(I,_,i,y,g,S),n(215)(I,_,S),n(216)(I,_,i),n(217)(I,g),n(218)(I,g),n(219)(I),u.toFastProperties(I),u.toFastProperties(I.prototype),O({a:1}),O({b:2}),O({c:3}),O(1),O(function(){}),O(void 0),O(!1),O(new I(g)),S.setBounds(l.firstLineError,u.lastLineError),I}},function(t,e,n){"use strict";var r;try{throw new Error}catch(t){r=t}var i=n(192),o=n(193),a=n(1);function s(){this._customScheduler=!1,this._isTickUsed=!1,this._lateQueue=new o(16),this._normalQueue=new o(16),this._haveDrainedQueues=!1,this._trampolineEnabled=!0;var t=this;this.drainQueues=function(){t._drainQueues()},this._schedule=i}function u(t,e,n){this._lateQueue.push(t,e,n),this._queueTick()}function c(t,e,n){this._normalQueue.push(t,e,n),this._queueTick()}function l(t){this._normalQueue._pushOne(t),this._queueTick()}s.prototype.setScheduler=function(t){var e=this._schedule;return this._schedule=t,this._customScheduler=!0,e},s.prototype.hasCustomScheduler=function(){return this._customScheduler},s.prototype.enableTrampoline=function(){this._trampolineEnabled=!0},s.prototype.disableTrampolineIfNecessary=function(){a.hasDevTools&&(this._trampolineEnabled=!1)},s.prototype.haveItemsQueued=function(){return this._isTickUsed||this._haveDrainedQueues},s.prototype.fatalError=function(t,e){e?(process.stderr.write("Fatal "+(t instanceof Error?t.stack:t)+"\n"),process.exit(2)):this.throwLater(t)},s.prototype.throwLater=function(t,e){if(1===arguments.length&&(e=t,t=function(){throw e}),"undefined"!=typeof setTimeout)setTimeout(function(){t(e)},0);else try{this._schedule(function(){t(e)})}catch(t){throw new Error("No async scheduler available\n\n    See http://goo.gl/MqrFmX\n")}},a.hasDevTools?(s.prototype.invokeLater=function(t,e,n){this._trampolineEnabled?u.call(this,t,e,n):this._schedule(function(){setTimeout(function(){t.call(e,n)},100)})},s.prototype.invoke=function(t,e,n){this._trampolineEnabled?c.call(this,t,e,n):this._schedule(function(){t.call(e,n)})},s.prototype.settlePromises=function(t){this._trampolineEnabled?l.call(this,t):this._schedule(function(){t._settlePromises()})}):(s.prototype.invokeLater=u,s.prototype.invoke=c,s.prototype.settlePromises=l),s.prototype._drainQueue=function(t){for(;t.length()>0;){var e=t.shift();if("function"==typeof e){var n=t.shift(),r=t.shift();e.call(n,r)}else e._settlePromises()}},s.prototype._drainQueues=function(){this._drainQueue(this._normalQueue),this._reset(),this._haveDrainedQueues=!0,this._drainQueue(this._lateQueue)},s.prototype._queueTick=function(){this._isTickUsed||(this._isTickUsed=!0,this._schedule(this.drainQueues))},s.prototype._reset=function(){this._isTickUsed=!1},t.exports=s,t.exports.firstLineError=r},function(t,e,n){"use strict";var r,i=n(1),o=i.getNativePromise();if(i.isNode&&"undefined"==typeof MutationObserver){var a=global.setImmediate,s=process.nextTick;r=i.isRecentNode?function(t){a.call(global,t)}:function(t){s.call(process,t)}}else if("function"==typeof o&&"function"==typeof o.resolve){var u=o.resolve();r=function(t){u.then(t)}}else r="undefined"==typeof MutationObserver||"undefined"!=typeof window&&window.navigator&&(window.navigator.standalone||window.cordova)?"undefined"!=typeof setImmediate?function(t){setImmediate(t)}:"undefined"!=typeof setTimeout?function(t){setTimeout(t,0)}:function(){throw new Error("No async scheduler available\n\n    See http://goo.gl/MqrFmX\n")}:function(){var t=document.createElement("div"),e={attributes:!0},n=!1,r=document.createElement("div");new MutationObserver(function(){t.classList.toggle("foo"),n=!1}).observe(r,e);return function(i){var o=new MutationObserver(function(){o.disconnect(),i()});o.observe(t,e),n||(n=!0,r.classList.toggle("foo"))}}();t.exports=r},function(t,e,n){"use strict";function r(t){this._capacity=t,this._length=0,this._front=0}r.prototype._willBeOverCapacity=function(t){return this._capacity<t},r.prototype._pushOne=function(t){var e=this.length();this._checkCapacity(e+1),this[this._front+e&this._capacity-1]=t,this._length=e+1},r.prototype.push=function(t,e,n){var r=this.length()+3;if(this._willBeOverCapacity(r))return this._pushOne(t),this._pushOne(e),void this._pushOne(n);var i=this._front+r-3;this._checkCapacity(r);var o=this._capacity-1;this[i+0&o]=t,this[i+1&o]=e,this[i+2&o]=n,this._length=r},r.prototype.shift=function(){var t=this._front,e=this[t];return this[t]=void 0,this._front=t+1&this._capacity-1,this._length--,e},r.prototype.length=function(){return this._length},r.prototype._checkCapacity=function(t){this._capacity<t&&this._resizeTo(this._capacity<<1)},r.prototype._resizeTo=function(t){var e=this._capacity;this._capacity=t,function(t,e,n,r,i){for(var o=0;o<i;++o)n[o+r]=t[o+e],t[o+e]=void 0}(this,0,this,e,this._front+this._length&e-1)},t.exports=r},function(t,e,n){"use strict";t.exports=function(t,e){var r=n(1),i=r.errorObj,o=r.isObject;var a={}.hasOwnProperty;return function(n,s){if(o(n)){if(n instanceof t)return n;var u=function(t){try{return function(t){return t.then}(t)}catch(t){return i.e=t,i}}(n);if(u===i){s&&s._pushContext();var c=t.reject(u.e);return s&&s._popContext(),c}if("function"==typeof u)return function(t){try{return a.call(t,"_promise0")}catch(t){return!1}}(n)?(c=new t(e),n._then(c._fulfill,c._reject,void 0,c,null),c):function(n,o,a){var s=new t(e),u=s;a&&a._pushContext(),s._captureStackTrace(),a&&a._popContext();var c=!0,l=r.tryCatch(o).call(n,function(t){s&&(s._resolveCallback(t),s=null)},function(t){s&&(s._rejectCallback(t,c,!0),s=null)});return c=!1,s&&l===i&&(s._rejectCallback(l.e,!0,!0),s=null),u}(n,u,s)}return n}}},function(t,e,n){"use strict";t.exports=function(t,e,r,i,o){var a=n(1);a.isArray;function s(n){var r=this._promise=new t(e);n instanceof t&&r._propagateFrom(n,3),r._setOnCancel(this),this._values=n,this._length=0,this._totalResolved=0,this._init(void 0,-2)}return a.inherits(s,o),s.prototype.length=function(){return this._length},s.prototype.promise=function(){return this._promise},s.prototype._init=function e(n,o){var s=r(this._values,this._promise);if(s instanceof t){var u=(s=s._target())._bitField;if(this._values=s,0==(50397184&u))return this._promise._setAsyncGuaranteed(),s._then(e,this._reject,void 0,this,o);if(0==(33554432&u))return 0!=(16777216&u)?this._reject(s._reason()):this._cancel();s=s._value()}if(null!==(s=a.asArray(s)))0!==s.length?this._iterate(s):-5===o?this._resolveEmptyArray():this._resolve(function(t){switch(t){case-2:return[];case-3:return{};case-6:return new Map}}(o));else{var c=i("expecting an array or an iterable object but got "+a.classString(s)).reason();this._promise._rejectCallback(c,!1)}},s.prototype._iterate=function(e){var n=this.getActualLength(e.length);this._length=n,this._values=this.shouldCopyValues()?new Array(n):this._values;for(var i=this._promise,o=!1,a=null,s=0;s<n;++s){var u=r(e[s],i);a=u instanceof t?(u=u._target())._bitField:null,o?null!==a&&u.suppressUnhandledRejections():null!==a?0==(50397184&a)?(u._proxy(this,s),this._values[s]=u):o=0!=(33554432&a)?this._promiseFulfilled(u._value(),s):0!=(16777216&a)?this._promiseRejected(u._reason(),s):this._promiseCancelled(s):o=this._promiseFulfilled(u,s)}o||i._setAsyncGuaranteed()},s.prototype._isResolved=function(){return null===this._values},s.prototype._resolve=function(t){this._values=null,this._promise._fulfill(t)},s.prototype._cancel=function(){!this._isResolved()&&this._promise._isCancellable()&&(this._values=null,this._promise._cancel())},s.prototype._reject=function(t){this._values=null,this._promise._rejectCallback(t,!1)},s.prototype._promiseFulfilled=function(t,e){return this._values[e]=t,++this._totalResolved>=this._length&&(this._resolve(this._values),!0)},s.prototype._promiseCancelled=function(){return this._cancel(),!0},s.prototype._promiseRejected=function(t){return this._totalResolved++,this._reject(t),!0},s.prototype._resultCancelled=function(){if(!this._isResolved()){var e=this._values;if(this._cancel(),e instanceof t)e.cancel();else for(var n=0;n<e.length;++n)e[n]instanceof t&&e[n].cancel()}},s.prototype.shouldCopyValues=function(){return!0},s.prototype.getActualLength=function(t){return t},s}},function(t,e,n){"use strict";t.exports=function(t){var e=!1,n=[];function r(){this._trace=new r.CapturedTrace(i())}function i(){var t=n.length-1;if(t>=0)return n[t]}return t.prototype._promiseCreated=function(){},t.prototype._pushContext=function(){},t.prototype._popContext=function(){return null},t._peekContext=t.prototype._peekContext=function(){},r.prototype._pushContext=function(){void 0!==this._trace&&(this._trace._promiseCreated=null,n.push(this._trace))},r.prototype._popContext=function(){if(void 0!==this._trace){var t=n.pop(),e=t._promiseCreated;return t._promiseCreated=null,e}return null},r.CapturedTrace=null,r.create=function(){if(e)return new r},r.deactivateLongStackTraces=function(){},r.activateLongStackTraces=function(){var n=t.prototype._pushContext,o=t.prototype._popContext,a=t._peekContext,s=t.prototype._peekContext,u=t.prototype._promiseCreated;r.deactivateLongStackTraces=function(){t.prototype._pushContext=n,t.prototype._popContext=o,t._peekContext=a,t.prototype._peekContext=s,t.prototype._promiseCreated=u,e=!1},e=!0,t.prototype._pushContext=r.prototype._pushContext,t.prototype._popContext=r.prototype._popContext,t._peekContext=t.prototype._peekContext=i,t.prototype._promiseCreated=function(){var t=this._peekContext();t&&null==t._promiseCreated&&(t._promiseCreated=this)}},r}},function(t,e,n){"use strict";t.exports=function(t,e){var r,i,o,a=t._getDomain,s=t._async,u=n(20).Warning,c=n(1),l=c.canAttachTrace,h=/[\\\/]bluebird[\\\/]js[\\\/](release|debug|instrumented)/,d=/\((?:timers\.js):\d+:\d+\)/,f=/[\/<\(](.+?):(\d+):(\d+)\)?\s*$/,p=null,g=null,v=!1,m=!(0==c.env("BLUEBIRD_DEBUG")||!c.env("BLUEBIRD_DEBUG")&&"development"!==c.env("NODE_ENV")),y=!(0==c.env("BLUEBIRD_WARNINGS")||!m&&!c.env("BLUEBIRD_WARNINGS")),_=!(0==c.env("BLUEBIRD_LONG_STACK_TRACES")||!m&&!c.env("BLUEBIRD_LONG_STACK_TRACES")),E=0!=c.env("BLUEBIRD_W_FORGOTTEN_RETURN")&&(y||!!c.env("BLUEBIRD_W_FORGOTTEN_RETURN"));t.prototype.suppressUnhandledRejections=function(){var t=this._target();t._bitField=-1048577&t._bitField|524288},t.prototype._ensurePossibleRejectionHandled=function(){if(0==(524288&this._bitField)){this._setRejectionIsUnhandled();var t=this;setTimeout(function(){t._notifyUnhandledRejection()},1)}},t.prototype._notifyUnhandledRejectionIsHandled=function(){Y("rejectionHandled",r,void 0,this)},t.prototype._setReturnedNonUndefined=function(){this._bitField=268435456|this._bitField},t.prototype._returnedNonUndefined=function(){return 0!=(268435456&this._bitField)},t.prototype._notifyUnhandledRejection=function(){if(this._isRejectionUnhandled()){var t=this._settledValue();this._setUnhandledRejectionIsNotified(),Y("unhandledRejection",i,t,this)}},t.prototype._setUnhandledRejectionIsNotified=function(){this._bitField=262144|this._bitField},t.prototype._unsetUnhandledRejectionIsNotified=function(){this._bitField=-262145&this._bitField},t.prototype._isUnhandledRejectionNotified=function(){return(262144&this._bitField)>0},t.prototype._setRejectionIsUnhandled=function(){this._bitField=1048576|this._bitField},t.prototype._unsetRejectionIsUnhandled=function(){this._bitField=-1048577&this._bitField,this._isUnhandledRejectionNotified()&&(this._unsetUnhandledRejectionIsNotified(),this._notifyUnhandledRejectionIsHandled())},t.prototype._isRejectionUnhandled=function(){return(1048576&this._bitField)>0},t.prototype._warn=function(t,e,n){return F(t,e,n||this)},t.onPossiblyUnhandledRejection=function(t){var e=a();i="function"==typeof t?null===e?t:c.domainBind(e,t):void 0},t.onUnhandledRejectionHandled=function(t){var e=a();r="function"==typeof t?null===e?t:c.domainBind(e,t):void 0};var A=function(){};t.longStackTraces=function(){if(s.haveItemsQueued()&&!X.longStackTraces)throw new Error("cannot enable long stack traces after promises have been created\n\n    See http://goo.gl/MqrFmX\n");if(!X.longStackTraces&&j()){var n=t.prototype._captureStackTrace,r=t.prototype._attachExtraTrace;X.longStackTraces=!0,A=function(){if(s.haveItemsQueued()&&!X.longStackTraces)throw new Error("cannot enable long stack traces after promises have been created\n\n    See http://goo.gl/MqrFmX\n");t.prototype._captureStackTrace=n,t.prototype._attachExtraTrace=r,e.deactivateLongStackTraces(),s.enableTrampoline(),X.longStackTraces=!1},t.prototype._captureStackTrace=k,t.prototype._attachExtraTrace=B,e.activateLongStackTraces(),s.disableTrampolineIfNecessary()}},t.hasLongStackTraces=function(){return X.longStackTraces&&j()};var S=function(){try{if("function"==typeof CustomEvent){var t=new CustomEvent("CustomEvent");return c.global.dispatchEvent(t),function(t,e){var n=new CustomEvent(t.toLowerCase(),{detail:e,cancelable:!0});return!c.global.dispatchEvent(n)}}if("function"==typeof Event){t=new Event("CustomEvent");return c.global.dispatchEvent(t),function(t,e){var n=new Event(t.toLowerCase(),{cancelable:!0});return n.detail=e,!c.global.dispatchEvent(n)}}return(t=document.createEvent("CustomEvent")).initCustomEvent("testingtheevent",!1,!0,{}),c.global.dispatchEvent(t),function(t,e){var n=document.createEvent("CustomEvent");return n.initCustomEvent(t.toLowerCase(),!1,!0,e),!c.global.dispatchEvent(n)}}catch(t){}return function(){return!1}}(),T=c.isNode?function(){return process.emit.apply(process,arguments)}:c.global?function(t){var e="on"+t.toLowerCase(),n=c.global[e];return!!n&&(n.apply(c.global,[].slice.call(arguments,1)),!0)}:function(){return!1};function x(t,e){return{promise:e}}var b={promiseCreated:x,promiseFulfilled:x,promiseRejected:x,promiseResolved:x,promiseCancelled:x,promiseChained:function(t,e,n){return{promise:e,child:n}},warning:function(t,e){return{warning:e}},unhandledRejection:function(t,e,n){return{reason:e,promise:n}},rejectionHandled:x},w=function(t){var e=!1;try{e=T.apply(null,arguments)}catch(t){s.throwLater(t),e=!0}var n=!1;try{n=S(t,b[t].apply(null,arguments))}catch(t){s.throwLater(t),n=!0}return n||e};function C(){return!1}function I(t,e,n){var r=this;try{t(e,n,function(t){if("function"!=typeof t)throw new TypeError("onCancel must be a function, got: "+c.toString(t));r._attachCancellationCallback(t)})}catch(t){return t}}function L(t){if(!this._isCancellable())return this;var e=this._onCancel();void 0!==e?c.isArray(e)?e.push(t):this._setOnCancel([e,t]):this._setOnCancel(t)}function N(){return this._onCancelField}function O(t){this._onCancelField=t}function R(){this._cancellationParent=void 0,this._onCancelField=void 0}function M(t,e){if(0!=(1&e)){this._cancellationParent=t;var n=t._branchesRemainingToCancel;void 0===n&&(n=0),t._branchesRemainingToCancel=n+1}0!=(2&e)&&t._isBound()&&this._setBoundTo(t._boundTo)}t.config=function(e){if("longStackTraces"in(e=Object(e))&&(e.longStackTraces?t.longStackTraces():!e.longStackTraces&&t.hasLongStackTraces()&&A()),"warnings"in e){var n=e.warnings;X.warnings=!!n,E=X.warnings,c.isObject(n)&&"wForgottenReturn"in n&&(E=!!n.wForgottenReturn)}if("cancellation"in e&&e.cancellation&&!X.cancellation){if(s.haveItemsQueued())throw new Error("cannot enable cancellation after promises are in use");t.prototype._clearCancellationData=R,t.prototype._propagateFrom=M,t.prototype._onCancel=N,t.prototype._setOnCancel=O,t.prototype._attachCancellationCallback=L,t.prototype._execute=I,D=M,X.cancellation=!0}return"monitoring"in e&&(e.monitoring&&!X.monitoring?(X.monitoring=!0,t.prototype._fireEvent=w):!e.monitoring&&X.monitoring&&(X.monitoring=!1,t.prototype._fireEvent=C)),t},t.prototype._fireEvent=C,t.prototype._execute=function(t,e,n){try{t(e,n)}catch(t){return t}},t.prototype._onCancel=function(){},t.prototype._setOnCancel=function(t){},t.prototype._attachCancellationCallback=function(t){},t.prototype._captureStackTrace=function(){},t.prototype._attachExtraTrace=function(){},t.prototype._clearCancellationData=function(){},t.prototype._propagateFrom=function(t,e){};var D=function(t,e){0!=(2&e)&&t._isBound()&&this._setBoundTo(t._boundTo)};function P(){var e=this._boundTo;return void 0!==e&&e instanceof t?e.isFulfilled()?e.value():void 0:e}function k(){this._trace=new Q(this._peekContext())}function B(t,e){if(l(t)){var n=this._trace;if(void 0!==n&&e&&(n=n._parent),void 0!==n)n.attachExtraTrace(t);else if(!t.__stackCleaned__){var r=U(t);c.notEnumerableProp(t,"stack",r.message+"\n"+r.stack.join("\n")),c.notEnumerableProp(t,"__stackCleaned__",!0)}}}function F(e,n,r){if(X.warnings){var i,o=new u(e);if(n)r._attachExtraTrace(o);else if(X.longStackTraces&&(i=t._peekContext()))i.attachExtraTrace(o);else{var a=U(o);o.stack=a.message+"\n"+a.stack.join("\n")}w("warning",o)||H(o,"",!0)}}function V(t){for(var e=[],n=0;n<t.length;++n){var r=t[n],i="    (No stack trace)"===r||p.test(r),o=i&&z(r);i&&!o&&(v&&" "!==r.charAt(0)&&(r="    "+r),e.push(r))}return e}function U(t){var e=t.stack,n=t.toString();return e="string"==typeof e&&e.length>0?function(t){for(var e=t.stack.replace(/\s+$/g,"").split("\n"),n=0;n<e.length;++n){var r=e[n];if("    (No stack trace)"===r||p.test(r))break}return n>0&&"SyntaxError"!=t.name&&(e=e.slice(n)),e}(t):["    (No stack trace)"],{message:n,stack:"SyntaxError"==t.name?e:V(e)}}function H(t,e,n){if("undefined"!=typeof console){var r;if(c.isObject(t)){var i=t.stack;r=e+g(i,t)}else r=e+String(t);"function"==typeof o?o(r,n):"function"!=typeof console.log&&"object"!=typeof console.log||console.log(r)}}function Y(t,e,n,r){var i=!1;try{"function"==typeof e&&(i=!0,"rejectionHandled"===t?e(r):e(n,r))}catch(t){s.throwLater(t)}"unhandledRejection"===t?w(t,n,r)||i||H(n,"Unhandled rejection "):w(t,r)}function G(t){var e;if("function"==typeof t)e="[function "+(t.name||"anonymous")+"]";else{e=t&&"function"==typeof t.toString?t.toString():c.toString(t);if(/\[object [a-zA-Z0-9$_]+\]/.test(e))try{e=JSON.stringify(t)}catch(t){}0===e.length&&(e="(empty array)")}return"(<"+function(t){if(t.length<41)return t;return t.substr(0,38)+"..."}(e)+">, no stack trace)"}function j(){return"function"==typeof q}var z=function(){return!1},W=/[\/<\(]([^:\/]+):(\d+):(?:\d+)\)?\s*$/;function K(t){var e=t.match(W);if(e)return{fileName:e[1],line:parseInt(e[2],10)}}function Q(t){this._parent=t,this._promisesCreated=0;var e=this._length=1+(void 0===t?0:t._length);q(this,Q),e>32&&this.uncycle()}c.inherits(Q,Error),e.CapturedTrace=Q,Q.prototype.uncycle=function(){var t=this._length;if(!(t<2)){for(var e=[],n={},r=0,i=this;void 0!==i;++r)e.push(i),i=i._parent;for(r=(t=this._length=r)-1;r>=0;--r){var o=e[r].stack;void 0===n[o]&&(n[o]=r)}for(r=0;r<t;++r){var a=n[e[r].stack];if(void 0!==a&&a!==r){a>0&&(e[a-1]._parent=void 0,e[a-1]._length=1),e[r]._parent=void 0,e[r]._length=1;var s=r>0?e[r-1]:this;a<t-1?(s._parent=e[a+1],s._parent.uncycle(),s._length=s._parent._length+1):(s._parent=void 0,s._length=1);for(var u=s._length+1,c=r-2;c>=0;--c)e[c]._length=u,u++;return}}}},Q.prototype.attachExtraTrace=function(t){if(!t.__stackCleaned__){this.uncycle();for(var e=U(t),n=e.message,r=[e.stack],i=this;void 0!==i;)r.push(V(i.stack.split("\n"))),i=i._parent;!function(t){for(var e=t[0],n=1;n<t.length;++n){for(var r=t[n],i=e.length-1,o=e[i],a=-1,s=r.length-1;s>=0;--s)if(r[s]===o){a=s;break}for(s=a;s>=0;--s){var u=r[s];if(e[i]!==u)break;e.pop(),i--}e=r}}(r),function(t){for(var e=0;e<t.length;++e)(0===t[e].length||e+1<t.length&&t[e][0]===t[e+1][0])&&(t.splice(e,1),e--)}(r),c.notEnumerableProp(t,"stack",function(t,e){for(var n=0;n<e.length-1;++n)e[n].push("From previous event:"),e[n]=e[n].join("\n");return n<e.length&&(e[n]=e[n].join("\n")),t+"\n"+e.join("\n")}(n,r)),c.notEnumerableProp(t,"__stackCleaned__",!0)}};var q=function(){var t=/^\s*at\s*/,e=function(t,e){return"string"==typeof t?t:void 0!==e.name&&void 0!==e.message?e.toString():G(e)};if("number"==typeof Error.stackTraceLimit&&"function"==typeof Error.captureStackTrace){Error.stackTraceLimit+=6,p=t,g=e;var n=Error.captureStackTrace;return z=function(t){return h.test(t)},function(t,e){Error.stackTraceLimit+=6,n(t,e),Error.stackTraceLimit-=6}}var r,i=new Error;if("string"==typeof i.stack&&i.stack.split("\n")[0].indexOf("stackDetection@")>=0)return p=/@/,g=e,v=!0,function(t){t.stack=(new Error).stack};try{throw new Error}catch(t){r="stack"in t}return"stack"in i||!r||"number"!=typeof Error.stackTraceLimit?(g=function(t,e){return"string"==typeof t?t:"object"!=typeof e&&"function"!=typeof e||void 0===e.name||void 0===e.message?G(e):e.toString()},null):(p=t,g=e,function(t){Error.stackTraceLimit+=6;try{throw new Error}catch(e){t.stack=e.stack}Error.stackTraceLimit-=6})}();"undefined"!=typeof console&&void 0!==console.warn&&(o=function(t){console.warn(t)},c.isNode&&process.stderr.isTTY?o=function(t,e){var n=e?"[33m":"[31m";console.warn(n+t+"[0m\n")}:c.isNode||"string"!=typeof(new Error).stack||(o=function(t,e){console.warn("%c"+t,e?"color: darkorange":"color: red")}));var X={warnings:y,longStackTraces:!1,cancellation:!1,monitoring:!1};return _&&t.longStackTraces(),{longStackTraces:function(){return X.longStackTraces},warnings:function(){return X.warnings},cancellation:function(){return X.cancellation},monitoring:function(){return X.monitoring},propagateFromFunction:function(){return D},boundValueFunction:function(){return P},checkForgottenReturns:function(t,e,n,r,i){if(void 0===t&&null!==e&&E){if(void 0!==i&&i._returnedNonUndefined())return;if(0==(65535&r._bitField))return;n&&(n+=" ");var o="",a="";if(e._trace){for(var s=e._trace.stack.split("\n"),u=V(s),c=u.length-1;c>=0;--c){var l=u[c];if(!d.test(l)){var h=l.match(f);h&&(o="at "+h[1]+":"+h[2]+":"+h[3]+" ");break}}if(u.length>0){var p=u[0];for(c=0;c<s.length;++c)if(s[c]===p){c>0&&(a="\n"+s[c-1]);break}}}var g="a promise was created in a "+n+"handler "+o+"but was not returned from it, see http://goo.gl/rRqMUw"+a;r._warn(g,!0,e)}},setBounds:function(t,e){if(j()){for(var n,r,i=t.stack.split("\n"),o=e.stack.split("\n"),a=-1,s=-1,u=0;u<i.length;++u)if(c=K(i[u])){n=c.fileName,a=c.line;break}for(u=0;u<o.length;++u){var c;if(c=K(o[u])){r=c.fileName,s=c.line;break}}a<0||s<0||!n||!r||n!==r||a>=s||(z=function(t){if(h.test(t))return!0;var e=K(t);return!!(e&&e.fileName===n&&a<=e.line&&e.line<=s)})}},warn:F,deprecated:function(t,e){var n=t+" is deprecated and will be removed in a future version.";return e&&(n+=" Use "+e+" instead."),F(n)},CapturedTrace:Q,fireDomEvent:S,fireGlobalEvent:T}}},function(t,e,n){"use strict";t.exports=function(t,e,r){var i=n(1),o=t.CancellationError,a=i.errorObj,s=n(108)(r);function u(t,e,n){this.promise=t,this.type=e,this.handler=n,this.called=!1,this.cancelPromise=null}function c(t){this.finallyHandler=t}function l(t,e){return null!=t.cancelPromise&&(arguments.length>1?t.cancelPromise._reject(e):t.cancelPromise._cancel(),t.cancelPromise=null,!0)}function h(){return f.call(this,this.promise._target()._settledValue())}function d(t){if(!l(this,t))return a.e=t,a}function f(n){var i=this.promise,s=this.handler;if(!this.called){this.called=!0;var u=this.isFinallyHandler()?s.call(i._boundValue()):s.call(i._boundValue(),n);if(u===r)return u;if(void 0!==u){i._setReturnedNonUndefined();var f=e(u,i);if(f instanceof t){if(null!=this.cancelPromise){if(f._isCancelled()){var p=new o("late cancellation observer");return i._attachExtraTrace(p),a.e=p,a}f.isPending()&&f._attachCancellationCallback(new c(this))}return f._then(h,d,void 0,this,void 0)}}}return i.isRejected()?(l(this),a.e=n,a):(l(this),n)}return u.prototype.isFinallyHandler=function(){return 0===this.type},c.prototype._resultCancelled=function(){l(this.finallyHandler)},t.prototype._passThrough=function(t,e,n,r){return"function"!=typeof t?this.then():this._then(n,r,void 0,new u(this,e,t),void 0)},t.prototype.lastly=t.prototype.finally=function(t){return this._passThrough(t,0,f,f)},t.prototype.tap=function(t){return this._passThrough(t,1,f)},t.prototype.tapCatch=function(e){var n=arguments.length;if(1===n)return this._passThrough(e,1,void 0,f);var r,o=new Array(n-1),a=0;for(r=0;r<n-1;++r){var u=arguments[r];if(!i.isObject(u))return t.reject(new TypeError("tapCatch statement predicate: expecting an object but got "+i.classString(u)));o[a++]=u}o.length=a;var c=arguments[r];return this._passThrough(s(o,c,this),1,void 0,f)},u}},function(t,e,n){"use strict";t.exports=function(t,e,r,i,o){var a=n(1),s=a.tryCatch;t.method=function(n){if("function"!=typeof n)throw new t.TypeError("expecting a function but got "+a.classString(n));return function(){var r=new t(e);r._captureStackTrace(),r._pushContext();var i=s(n).apply(this,arguments),a=r._popContext();return o.checkForgottenReturns(i,a,"Promise.method",r),r._resolveFromSyncValue(i),r}},t.attempt=t.try=function(n){if("function"!=typeof n)return i("expecting a function but got "+a.classString(n));var r,u=new t(e);if(u._captureStackTrace(),u._pushContext(),arguments.length>1){o.deprecated("calling Promise.try with more than 1 argument");var c=arguments[1],l=arguments[2];r=a.isArray(c)?s(n).apply(l,c):s(n).call(l,c)}else r=s(n)();var h=u._popContext();return o.checkForgottenReturns(r,h,"Promise.try",u),u._resolveFromSyncValue(r),u},t.prototype._resolveFromSyncValue=function(t){t===a.errorObj?this._rejectCallback(t.e,!1):this._resolveCallback(t,!0)}}},function(t,e,n){"use strict";t.exports=function(t,e,n,r){var i=!1,o=function(t,e){this._reject(e)},a=function(t,e){e.promiseRejectionQueued=!0,e.bindingPromise._then(o,o,null,this,t)},s=function(t,e){0==(50397184&this._bitField)&&this._resolveCallback(e.target)},u=function(t,e){e.promiseRejectionQueued||this._reject(t)};t.prototype.bind=function(o){i||(i=!0,t.prototype._propagateFrom=r.propagateFromFunction(),t.prototype._boundValue=r.boundValueFunction());var c=n(o),l=new t(e);l._propagateFrom(this,1);var h=this._target();if(l._setBoundTo(c),c instanceof t){var d={promiseRejectionQueued:!1,promise:l,target:h,bindingPromise:c};h._then(e,a,void 0,l,d),c._then(s,u,void 0,l,d),l._setOnCancel(c)}else l._resolveCallback(h);return l},t.prototype._setBoundTo=function(t){void 0!==t?(this._bitField=2097152|this._bitField,this._boundTo=t):this._bitField=-2097153&this._bitField},t.prototype._isBound=function(){return 2097152==(2097152&this._bitField)},t.bind=function(e,n){return t.resolve(n).bind(e)}}},function(t,e,n){"use strict";t.exports=function(t,e,r,i){var o=n(1),a=o.tryCatch,s=o.errorObj,u=t._async;t.prototype.break=t.prototype.cancel=function(){if(!i.cancellation())return this._warn("cancellation is disabled");for(var t=this,e=t;t._isCancellable();){if(!t._cancelBy(e)){e._isFollowing()?e._followee().cancel():e._cancelBranched();break}var n=t._cancellationParent;if(null==n||!n._isCancellable()){t._isFollowing()?t._followee().cancel():t._cancelBranched();break}t._isFollowing()&&t._followee().cancel(),t._setWillBeCancelled(),e=t,t=n}},t.prototype._branchHasCancelled=function(){this._branchesRemainingToCancel--},t.prototype._enoughBranchesHaveCancelled=function(){return void 0===this._branchesRemainingToCancel||this._branchesRemainingToCancel<=0},t.prototype._cancelBy=function(t){return t===this?(this._branchesRemainingToCancel=0,this._invokeOnCancel(),!0):(this._branchHasCancelled(),!!this._enoughBranchesHaveCancelled()&&(this._invokeOnCancel(),!0))},t.prototype._cancelBranched=function(){this._enoughBranchesHaveCancelled()&&this._cancel()},t.prototype._cancel=function(){this._isCancellable()&&(this._setCancelled(),u.invoke(this._cancelPromises,this,void 0))},t.prototype._cancelPromises=function(){this._length()>0&&this._settlePromises()},t.prototype._unsetOnCancel=function(){this._onCancelField=void 0},t.prototype._isCancellable=function(){return this.isPending()&&!this._isCancelled()},t.prototype.isCancellable=function(){return this.isPending()&&!this.isCancelled()},t.prototype._doInvokeOnCancel=function(t,e){if(o.isArray(t))for(var n=0;n<t.length;++n)this._doInvokeOnCancel(t[n],e);else if(void 0!==t)if("function"==typeof t){if(!e){var r=a(t).call(this._boundValue());r===s&&(this._attachExtraTrace(r.e),u.throwLater(r.e))}}else t._resultCancelled(this)},t.prototype._invokeOnCancel=function(){var t=this._onCancel();this._unsetOnCancel(),u.invoke(this._doInvokeOnCancel,this,t)},t.prototype._invokeInternalOnCancel=function(){this._isCancellable()&&(this._doInvokeOnCancel(this._onCancel(),!0),this._unsetOnCancel())},t.prototype._resultCancelled=function(){this.cancel()}}},function(t,e,n){"use strict";t.exports=function(t){function e(){return this.value}function n(){throw this.reason}t.prototype.return=t.prototype.thenReturn=function(n){return n instanceof t&&n.suppressUnhandledRejections(),this._then(e,void 0,void 0,{value:n},void 0)},t.prototype.throw=t.prototype.thenThrow=function(t){return this._then(n,void 0,void 0,{reason:t},void 0)},t.prototype.catchThrow=function(t){if(arguments.length<=1)return this._then(void 0,n,void 0,{reason:t},void 0);var e=arguments[1];return this.caught(t,function(){throw e})},t.prototype.catchReturn=function(n){if(arguments.length<=1)return n instanceof t&&n.suppressUnhandledRejections(),this._then(void 0,e,void 0,{value:n},void 0);var r=arguments[1];r instanceof t&&r.suppressUnhandledRejections();return this.caught(n,function(){return r})}}},function(t,e,n){"use strict";t.exports=function(t){function e(t){void 0!==t?(t=t._target(),this._bitField=t._bitField,this._settledValueField=t._isFateSealed()?t._settledValue():void 0):(this._bitField=0,this._settledValueField=void 0)}e.prototype._settledValue=function(){return this._settledValueField};var n=e.prototype.value=function(){if(!this.isFulfilled())throw new TypeError("cannot get fulfillment value of a non-fulfilled promise\n\n    See http://goo.gl/MqrFmX\n");return this._settledValue()},r=e.prototype.error=e.prototype.reason=function(){if(!this.isRejected())throw new TypeError("cannot get rejection reason of a non-rejected promise\n\n    See http://goo.gl/MqrFmX\n");return this._settledValue()},i=e.prototype.isFulfilled=function(){return 0!=(33554432&this._bitField)},o=e.prototype.isRejected=function(){return 0!=(16777216&this._bitField)},a=e.prototype.isPending=function(){return 0==(50397184&this._bitField)},s=e.prototype.isResolved=function(){return 0!=(50331648&this._bitField)};e.prototype.isCancelled=function(){return 0!=(8454144&this._bitField)},t.prototype.__isCancelled=function(){return 65536==(65536&this._bitField)},t.prototype._isCancelled=function(){return this._target().__isCancelled()},t.prototype.isCancelled=function(){return 0!=(8454144&this._target()._bitField)},t.prototype.isPending=function(){return a.call(this._target())},t.prototype.isRejected=function(){return o.call(this._target())},t.prototype.isFulfilled=function(){return i.call(this._target())},t.prototype.isResolved=function(){return s.call(this._target())},t.prototype.value=function(){return n.call(this._target())},t.prototype.reason=function(){var t=this._target();return t._unsetRejectionIsUnhandled(),r.call(t)},t.prototype._value=function(){return this._settledValue()},t.prototype._reason=function(){return this._unsetRejectionIsUnhandled(),this._settledValue()},t.PromiseInspection=e}},function(t,e,n){"use strict";t.exports=function(t,e,r,i,o,a){var s,u=n(1),c=u.canEvaluate,l=u.tryCatch,h=u.errorObj;if(c){for(var d=function(t){return new Function("value","holder","                             \n            'use strict';                                                    \n            holder.pIndex = value;                                           \n            holder.checkFulfillment(this);                                   \n            ".replace(/Index/g,t))},f=function(t){return new Function("promise","holder","                           \n            'use strict';                                                    \n            holder.pIndex = promise;                                         \n            ".replace(/Index/g,t))},p=function(e){for(var n=new Array(e),r=0;r<n.length;++r)n[r]="this.p"+(r+1);var i=n.join(" = ")+" = null;",a="var promise;\n"+n.map(function(t){return"                                                         \n                promise = "+t+";                                      \n                if (promise instanceof Promise) {                            \n                    promise.cancel();                                        \n                }                                                            \n            "}).join("\n"),s=n.join(", "),u="Holder$"+e,c="return function(tryCatch, errorObj, Promise, async) {    \n            'use strict';                                                    \n            function [TheName](fn) {                                         \n                [TheProperties]                                              \n                this.fn = fn;                                                \n                this.asyncNeeded = true;                                     \n                this.now = 0;                                                \n            }                                                                \n                                                                             \n            [TheName].prototype._callFunction = function(promise) {          \n                promise._pushContext();                                      \n                var ret = tryCatch(this.fn)([ThePassedArguments]);           \n                promise._popContext();                                       \n                if (ret === errorObj) {                                      \n                    promise._rejectCallback(ret.e, false);                   \n                } else {                                                     \n                    promise._resolveCallback(ret);                           \n                }                                                            \n            };                                                               \n                                                                             \n            [TheName].prototype.checkFulfillment = function(promise) {       \n                var now = ++this.now;                                        \n                if (now === [TheTotal]) {                                    \n                    if (this.asyncNeeded) {                                  \n                        async.invoke(this._callFunction, this, promise);     \n                    } else {                                                 \n                        this._callFunction(promise);                         \n                    }                                                        \n                                                                             \n                }                                                            \n            };                                                               \n                                                                             \n            [TheName].prototype._resultCancelled = function() {              \n                [CancellationCode]                                           \n            };                                                               \n                                                                             \n            return [TheName];                                                \n        }(tryCatch, errorObj, Promise, async);                               \n        ";return c=c.replace(/\[TheName\]/g,u).replace(/\[TheTotal\]/g,e).replace(/\[ThePassedArguments\]/g,s).replace(/\[TheProperties\]/g,i).replace(/\[CancellationCode\]/g,a),new Function("tryCatch","errorObj","Promise","async",c)(l,h,t,o)},g=[],v=[],m=[],y=0;y<8;++y)g.push(p(y+1)),v.push(d(y+1)),m.push(f(y+1));s=function(t){this._reject(t)}}t.join=function(){var n,o=arguments.length-1;if(o>0&&"function"==typeof arguments[o]&&(n=arguments[o],o<=8&&c)){(S=new t(i))._captureStackTrace();for(var l=new(0,g[o-1])(n),h=v,d=0;d<o;++d){var f=r(arguments[d],S);if(f instanceof t){var p=(f=f._target())._bitField;0==(50397184&p)?(f._then(h[d],s,void 0,S,l),m[d](f,l),l.asyncNeeded=!1):0!=(33554432&p)?h[d].call(S,f._value(),l):0!=(16777216&p)?S._reject(f._reason()):S._cancel()}else h[d].call(S,f,l)}if(!S._isFateSealed()){if(l.asyncNeeded){var y=a();null!==y&&(l.fn=u.domainBind(y,l.fn))}S._setAsyncGuaranteed(),S._setOnCancel(l)}return S}for(var _=arguments.length,E=new Array(_),A=0;A<_;++A)E[A]=arguments[A];n&&E.pop();var S=new e(E).promise();return void 0!==n?S.spread(n):S}}},function(t,e,n){"use strict";t.exports=function(t,e,r,i,o,a){var s=t._getDomain,u=n(1),c=u.tryCatch,l=u.errorObj,h=t._async;function d(t,e,n,r){this.constructor$(t),this._promise._captureStackTrace();var i=s();this._callback=null===i?e:u.domainBind(i,e),this._preservedValues=r===o?new Array(this.length()):null,this._limit=n,this._inFlight=0,this._queue=[],h.invoke(this._asyncInit,this,void 0)}function f(e,n,i,o){if("function"!=typeof n)return r("expecting a function but got "+u.classString(n));var a=0;if(void 0!==i){if("object"!=typeof i||null===i)return t.reject(new TypeError("options argument must be an object but it is "+u.classString(i)));if("number"!=typeof i.concurrency)return t.reject(new TypeError("'concurrency' must be a number but it is "+u.classString(i.concurrency)));a=i.concurrency}return new d(e,n,a="number"==typeof a&&isFinite(a)&&a>=1?a:0,o).promise()}u.inherits(d,e),d.prototype._asyncInit=function(){this._init$(void 0,-2)},d.prototype._init=function(){},d.prototype._promiseFulfilled=function(e,n){var r=this._values,o=this.length(),s=this._preservedValues,u=this._limit;if(n<0){if(r[n=-1*n-1]=e,u>=1&&(this._inFlight--,this._drainQueue(),this._isResolved()))return!0}else{if(u>=1&&this._inFlight>=u)return r[n]=e,this._queue.push(n),!1;null!==s&&(s[n]=e);var h=this._promise,d=this._callback,f=h._boundValue();h._pushContext();var p=c(d).call(f,e,n,o),g=h._popContext();if(a.checkForgottenReturns(p,g,null!==s?"Promise.filter":"Promise.map",h),p===l)return this._reject(p.e),!0;var v=i(p,this._promise);if(v instanceof t){var m=(v=v._target())._bitField;if(0==(50397184&m))return u>=1&&this._inFlight++,r[n]=v,v._proxy(this,-1*(n+1)),!1;if(0==(33554432&m))return 0!=(16777216&m)?(this._reject(v._reason()),!0):(this._cancel(),!0);p=v._value()}r[n]=p}return++this._totalResolved>=o&&(null!==s?this._filter(r,s):this._resolve(r),!0)},d.prototype._drainQueue=function(){for(var t=this._queue,e=this._limit,n=this._values;t.length>0&&this._inFlight<e;){if(this._isResolved())return;var r=t.pop();this._promiseFulfilled(n[r],r)}},d.prototype._filter=function(t,e){for(var n=e.length,r=new Array(n),i=0,o=0;o<n;++o)t[o]&&(r[i++]=e[o]);r.length=i,this._resolve(r)},d.prototype.preservedValues=function(){return this._preservedValues},t.prototype.map=function(t,e){return f(this,t,e,null)},t.map=function(t,e,n,r){return f(t,e,n,r)}}},function(t,e,n){"use strict";var r=Object.create;if(r){var i=r(null),o=r(null);i[" size"]=o[" size"]=0}t.exports=function(t){var e,r,a=n(1),s=a.canEvaluate,u=a.isIdentifier,c=function(t){return new Function("ensureMethod","                                    \n        return function(obj) {                                               \n            'use strict'                                                     \n            var len = this.length;                                           \n            ensureMethod(obj, 'methodName');                                 \n            switch(len) {                                                    \n                case 1: return obj.methodName(this[0]);                      \n                case 2: return obj.methodName(this[0], this[1]);             \n                case 3: return obj.methodName(this[0], this[1], this[2]);    \n                case 0: return obj.methodName();                             \n                default:                                                     \n                    return obj.methodName.apply(obj, this);                  \n            }                                                                \n        };                                                                   \n        ".replace(/methodName/g,t))(d)},l=function(t){return new Function("obj","                                             \n        'use strict';                                                        \n        return obj.propertyName;                                             \n        ".replace("propertyName",t))},h=function(t,e,n){var r=n[t];if("function"!=typeof r){if(!u(t))return null;if(r=e(t),n[t]=r,n[" size"]++,n[" size"]>512){for(var i=Object.keys(n),o=0;o<256;++o)delete n[i[o]];n[" size"]=i.length-256}}return r};function d(e,n){var r;if(null!=e&&(r=e[n]),"function"!=typeof r){var i="Object "+a.classString(e)+" has no method '"+a.toString(n)+"'";throw new t.TypeError(i)}return r}function f(t){return d(t,this.pop()).apply(t,this)}function p(t){return t[this]}function g(t){var e=+this;return e<0&&(e=Math.max(0,e+t.length)),t[e]}e=function(t){return h(t,c,i)},r=function(t){return h(t,l,o)},t.prototype.call=function(t){for(var n=arguments.length,r=new Array(Math.max(n-1,0)),i=1;i<n;++i)r[i-1]=arguments[i];if(s){var o=e(t);if(null!==o)return this._then(o,void 0,void 0,r,void 0)}return r.push(t),this._then(f,void 0,void 0,r,void 0)},t.prototype.get=function(t){var e;if("number"==typeof t)e=g;else if(s){var n=r(t);e=null!==n?n:p}else e=p;return this._then(e,void 0,void 0,t,void 0)}}},function(t,e,n){"use strict";t.exports=function(t,e,r,i,o,a){var s=n(1),u=n(20).TypeError,c=n(1).inherits,l=s.errorObj,h=s.tryCatch,d={};function f(t){setTimeout(function(){throw t},0)}function p(e,n){var i=0,a=e.length,s=new t(o);return function o(){if(i>=a)return s._fulfill();var u=function(t){var e=r(t);return e!==t&&"function"==typeof t._isDisposable&&"function"==typeof t._getDisposer&&t._isDisposable()&&e._setDisposable(t._getDisposer()),e}(e[i++]);if(u instanceof t&&u._isDisposable()){try{u=r(u._getDisposer().tryDispose(n),e.promise)}catch(t){return f(t)}if(u instanceof t)return u._then(o,f,null,null,null)}o()}(),s}function g(t,e,n){this._data=t,this._promise=e,this._context=n}function v(t,e,n){this.constructor$(t,e,n)}function m(t){return g.isDisposer(t)?(this.resources[this.index]._setDisposable(t),t.promise()):t}function y(t){this.length=t,this.promise=null,this[t-1]=null}g.prototype.data=function(){return this._data},g.prototype.promise=function(){return this._promise},g.prototype.resource=function(){return this.promise().isFulfilled()?this.promise().value():d},g.prototype.tryDispose=function(t){var e=this.resource(),n=this._context;void 0!==n&&n._pushContext();var r=e!==d?this.doDispose(e,t):null;return void 0!==n&&n._popContext(),this._promise._unsetDisposable(),this._data=null,r},g.isDisposer=function(t){return null!=t&&"function"==typeof t.resource&&"function"==typeof t.tryDispose},c(v,g),v.prototype.doDispose=function(t,e){return this.data().call(t,t,e)},y.prototype._resultCancelled=function(){for(var e=this.length,n=0;n<e;++n){var r=this[n];r instanceof t&&r.cancel()}},t.using=function(){var n=arguments.length;if(n<2)return e("you must pass at least 2 arguments to Promise.using");var i,o=arguments[n-1];if("function"!=typeof o)return e("expecting a function but got "+s.classString(o));var u=!0;2===n&&Array.isArray(arguments[0])?(n=(i=arguments[0]).length,u=!1):(i=arguments,n--);for(var c=new y(n),d=0;d<n;++d){var f=i[d];if(g.isDisposer(f)){var v=f;(f=f.promise())._setDisposable(v)}else{var _=r(f);_ instanceof t&&(f=_._then(m,null,null,{resources:c,index:d},void 0))}c[d]=f}var E=new Array(c.length);for(d=0;d<E.length;++d)E[d]=t.resolve(c[d]).reflect();var A=t.all(E).then(function(t){for(var e=0;e<t.length;++e){var n=t[e];if(n.isRejected())return l.e=n.error(),l;if(!n.isFulfilled())return void A.cancel();t[e]=n.value()}S._pushContext(),o=h(o);var r=u?o.apply(void 0,t):o(t),i=S._popContext();return a.checkForgottenReturns(r,i,"Promise.using",S),r}),S=A.lastly(function(){var e=new t.PromiseInspection(A);return p(c,e)});return c.promise=S,S._setOnCancel(c),S},t.prototype._setDisposable=function(t){this._bitField=131072|this._bitField,this._disposer=t},t.prototype._isDisposable=function(){return(131072&this._bitField)>0},t.prototype._getDisposer=function(){return this._disposer},t.prototype._unsetDisposable=function(){this._bitField=-131073&this._bitField,this._disposer=void 0},t.prototype.disposer=function(t){if("function"==typeof t)return new v(t,this,i());throw new u}}},function(t,e,n){"use strict";t.exports=function(t,e,r){var i=n(1),o=t.TimeoutError;function a(t){this.handle=t}a.prototype._resultCancelled=function(){clearTimeout(this.handle)};var s=function(t){return u(+this).thenReturn(t)},u=t.delay=function(n,i){var o,u;return void 0!==i?(o=t.resolve(i)._then(s,null,null,n,void 0),r.cancellation()&&i instanceof t&&o._setOnCancel(i)):(o=new t(e),u=setTimeout(function(){o._fulfill()},+n),r.cancellation()&&o._setOnCancel(new a(u)),o._captureStackTrace()),o._setAsyncGuaranteed(),o};t.prototype.delay=function(t){return u(t,this)};function c(t){return clearTimeout(this.handle),t}function l(t){throw clearTimeout(this.handle),t}t.prototype.timeout=function(t,e){var n,s;t=+t;var u=new a(setTimeout(function(){n.isPending()&&function(t,e,n){var r;r="string"!=typeof e?e instanceof Error?e:new o("operation timed out"):new o(e),i.markAsOriginatingFromRejection(r),t._attachExtraTrace(r),t._reject(r),null!=n&&n.cancel()}(n,e,s)},t));return r.cancellation()?(s=this.then(),(n=s._then(c,l,void 0,u,void 0))._setOnCancel(u)):n=this._then(c,l,void 0,u,void 0),n}}},function(t,e,n){"use strict";t.exports=function(t,e,r,i,o,a){var s=n(20).TypeError,u=n(1),c=u.errorObj,l=u.tryCatch,h=[];function d(e,n,i,o){if(a.cancellation()){var s=new t(r),u=this._finallyPromise=new t(r);this._promise=s.lastly(function(){return u}),s._captureStackTrace(),s._setOnCancel(this)}else{(this._promise=new t(r))._captureStackTrace()}this._stack=o,this._generatorFunction=e,this._receiver=n,this._generator=void 0,this._yieldHandlers="function"==typeof i?[i].concat(h):h,this._yieldedPromise=null,this._cancellationPhase=!1}u.inherits(d,o),d.prototype._isResolved=function(){return null===this._promise},d.prototype._cleanup=function(){this._promise=this._generator=null,a.cancellation()&&null!==this._finallyPromise&&(this._finallyPromise._fulfill(),this._finallyPromise=null)},d.prototype._promiseCancelled=function(){if(!this._isResolved()){var e;if(void 0!==this._generator.return)this._promise._pushContext(),e=l(this._generator.return).call(this._generator,void 0),this._promise._popContext();else{var n=new t.CancellationError("generator .return() sentinel");t.coroutine.returnSentinel=n,this._promise._attachExtraTrace(n),this._promise._pushContext(),e=l(this._generator.throw).call(this._generator,n),this._promise._popContext()}this._cancellationPhase=!0,this._yieldedPromise=null,this._continue(e)}},d.prototype._promiseFulfilled=function(t){this._yieldedPromise=null,this._promise._pushContext();var e=l(this._generator.next).call(this._generator,t);this._promise._popContext(),this._continue(e)},d.prototype._promiseRejected=function(t){this._yieldedPromise=null,this._promise._attachExtraTrace(t),this._promise._pushContext();var e=l(this._generator.throw).call(this._generator,t);this._promise._popContext(),this._continue(e)},d.prototype._resultCancelled=function(){if(this._yieldedPromise instanceof t){var e=this._yieldedPromise;this._yieldedPromise=null,e.cancel()}},d.prototype.promise=function(){return this._promise},d.prototype._run=function(){this._generator=this._generatorFunction.call(this._receiver),this._receiver=this._generatorFunction=void 0,this._promiseFulfilled(void 0)},d.prototype._continue=function(e){var n=this._promise;if(e===c)return this._cleanup(),this._cancellationPhase?n.cancel():n._rejectCallback(e.e,!1);var r=e.value;if(!0===e.done)return this._cleanup(),this._cancellationPhase?n.cancel():n._resolveCallback(r);var o=i(r,this._promise);if(o instanceof t||null!==(o=function(e,n,r){for(var o=0;o<n.length;++o){r._pushContext();var a=l(n[o])(e);if(r._popContext(),a===c){r._pushContext();var s=t.reject(c.e);return r._popContext(),s}var u=i(a,r);if(u instanceof t)return u}return null}(o,this._yieldHandlers,this._promise))){var a=(o=o._target())._bitField;0==(50397184&a)?(this._yieldedPromise=o,o._proxy(this,null)):0!=(33554432&a)?t._async.invoke(this._promiseFulfilled,this,o._value()):0!=(16777216&a)?t._async.invoke(this._promiseRejected,this,o._reason()):this._promiseCancelled()}else this._promiseRejected(new s("A value %s was yielded that could not be treated as a promise\n\n    See http://goo.gl/MqrFmX\n\n".replace("%s",String(r))+"From coroutine:\n"+this._stack.split("\n").slice(1,-7).join("\n")))},t.coroutine=function(t,e){if("function"!=typeof t)throw new s("generatorFunction must be a function\n\n    See http://goo.gl/MqrFmX\n");var n=Object(e).yieldHandler,r=d,i=(new Error).stack;return function(){var e=t.apply(this,arguments),o=new r(void 0,void 0,n,i),a=o.promise();return o._generator=e,o._promiseFulfilled(void 0),a}},t.coroutine.addYieldHandler=function(t){if("function"!=typeof t)throw new s("expecting a function but got "+u.classString(t));h.push(t)},t.spawn=function(n){if(a.deprecated("Promise.spawn()","Promise.coroutine()"),"function"!=typeof n)return e("generatorFunction must be a function\n\n    See http://goo.gl/MqrFmX\n");var r=new d(n,this),i=r.promise();return r._run(t.spawn),i}}},function(t,e,n){"use strict";t.exports=function(t){var e=n(1),r=t._async,i=e.tryCatch,o=e.errorObj;function a(t,n){if(!e.isArray(t))return s.call(this,t,n);var a=i(n).apply(this._boundValue(),[null].concat(t));a===o&&r.throwLater(a.e)}function s(t,e){var n=this._boundValue(),a=void 0===t?i(e).call(n,null):i(e).call(n,null,t);a===o&&r.throwLater(a.e)}function u(t,e){if(!t){var n=new Error(t+"");n.cause=t,t=n}var a=i(e).call(this._boundValue(),t);a===o&&r.throwLater(a.e)}t.prototype.asCallback=t.prototype.nodeify=function(t,e){if("function"==typeof t){var n=s;void 0!==e&&Object(e).spread&&(n=a),this._then(n,u,void 0,this,t)}return this}}},function(t,e,n){"use strict";t.exports=function(t,e){var r={},i=n(1),o=n(109),a=i.withAppended,s=i.maybeWrapAsError,u=i.canEvaluate,c=n(20).TypeError,l={__isPromisified__:!0},h=new RegExp("^(?:"+["arity","length","name","arguments","caller","callee","prototype","__isPromisified__"].join("|")+")$"),d=function(t){return i.isIdentifier(t)&&"_"!==t.charAt(0)&&"constructor"!==t};function f(t){return!h.test(t)}function p(t){try{return!0===t.__isPromisified__}catch(t){return!1}}function g(t,e,n){var r=i.getDataPropertyOrDefault(t,e+n,l);return!!r&&p(r)}function v(t,e,n,r){for(var o=i.inheritedDataKeys(t),a=[],s=0;s<o.length;++s){var u=o[s],l=t[u],h=r===d||d(u,l,t);"function"!=typeof l||p(l)||g(t,u,e)||!r(u,l,t,h)||a.push(u,l)}return function(t,e,n){for(var r=0;r<t.length;r+=2){var i=t[r];if(n.test(i))for(var o=i.replace(n,""),a=0;a<t.length;a+=2)if(t[a]===o)throw new c("Cannot promisify an API that has normal methods with '%s'-suffix\n\n    See http://goo.gl/MqrFmX\n".replace("%s",e))}}(a,e,n),a}var m=function(t){return t.replace(/([$])/,"\\$")},y=function(t){return i.filledRange(t,"_arg","")};var _=u?function(n,u,c,l,h,d){var f=Math.max(0,function(t){return"number"==typeof t.length?Math.max(Math.min(t.length,1024),0):0}(l)-1),p=function(t){for(var e=[t],n=Math.max(0,t-1-3),r=t-1;r>=n;--r)e.push(r);for(r=t+1;r<=3;++r)e.push(r);return e}(f),g="string"==typeof n||u===r;var v="string"==typeof n?"this != null ? this['"+n+"'] : fn":"fn",m="'use strict';                                                \n        var ret = function (Parameters) {                                    \n            'use strict';                                                    \n            var len = arguments.length;                                      \n            var promise = new Promise(INTERNAL);                             \n            promise._captureStackTrace();                                    \n            var nodeback = nodebackForPromise(promise, "+d+");   \n            var ret;                                                         \n            var callback = tryCatch([GetFunctionCode]);                      \n            switch(len) {                                                    \n                [CodeForSwitchCase]                                          \n            }                                                                \n            if (ret === errorObj) {                                          \n                promise._rejectCallback(maybeWrapAsError(ret.e), true, true);\n            }                                                                \n            if (!promise._isFateSealed()) promise._setAsyncGuaranteed();     \n            return promise;                                                  \n        };                                                                   \n        notEnumerableProp(ret, '__isPromisified__', true);                   \n        return ret;                                                          \n    ".replace("[CodeForSwitchCase]",function(){for(var t,e,n,r="",i=0;i<p.length;++i)r+="case "+p[i]+":"+(t=p[i],e=y(t).join(", "),n=t>0?", ":"",(g?"ret = callback.call(this, {{args}}, nodeback); break;\n":void 0===u?"ret = callback({{args}}, nodeback); break;\n":"ret = callback.call(receiver, {{args}}, nodeback); break;\n").replace("{{args}}",e).replace(", ",n));return r+="                                                             \n        default:                                                             \n            var args = new Array(len + 1);                                   \n            var i = 0;                                                       \n            for (var i = 0; i < len; ++i) {                                  \n               args[i] = arguments[i];                                       \n            }                                                                \n            args[i] = nodeback;                                              \n            [CodeForCall]                                                    \n            break;                                                           \n        ".replace("[CodeForCall]",g?"ret = callback.apply(this, args);\n":"ret = callback.apply(receiver, args);\n")}()).replace("[GetFunctionCode]",v);return m=m.replace("Parameters",function(t){return i.filledRange(Math.max(t,3),"_arg","")}(f)),new Function("Promise","fn","receiver","withAppended","maybeWrapAsError","nodebackForPromise","tryCatch","errorObj","notEnumerableProp","INTERNAL",m)(t,l,u,a,s,o,i.tryCatch,i.errorObj,i.notEnumerableProp,e)}:function(n,u,c,l,h,d){var f=function(){return this}(),p=n;function g(){var i=u;u===r&&(i=this);var c=new t(e);c._captureStackTrace();var l="string"==typeof p&&this!==f?this[p]:n,h=o(c,d);try{l.apply(i,a(arguments,h))}catch(t){c._rejectCallback(s(t),!0,!0)}return c._isFateSealed()||c._setAsyncGuaranteed(),c}return"string"==typeof p&&(n=l),i.notEnumerableProp(g,"__isPromisified__",!0),g};function E(t,e,n,o,a){for(var s=new RegExp(m(e)+"$"),u=v(t,e,s,n),c=0,l=u.length;c<l;c+=2){var h=u[c],d=u[c+1],f=h+e;if(o===_)t[f]=_(h,r,h,d,e,a);else{var p=o(d,function(){return _(h,r,h,d,e,a)});i.notEnumerableProp(p,"__isPromisified__",!0),t[f]=p}}return i.toFastProperties(t),t}t.promisify=function(t,e){if("function"!=typeof t)throw new c("expecting a function but got "+i.classString(t));if(p(t))return t;var n=function(t,e,n){return _(t,e,void 0,t,null,n)}(t,void 0===(e=Object(e)).context?r:e.context,!!e.multiArgs);return i.copyDescriptors(t,n,f),n},t.promisifyAll=function(t,e){if("function"!=typeof t&&"object"!=typeof t)throw new c("the target of promisifyAll must be an object or a function\n\n    See http://goo.gl/MqrFmX\n");var n=!!(e=Object(e)).multiArgs,r=e.suffix;"string"!=typeof r&&(r="Async");var o=e.filter;"function"!=typeof o&&(o=d);var a=e.promisifier;if("function"!=typeof a&&(a=_),!i.isIdentifier(r))throw new RangeError("suffix must be a valid identifier\n\n    See http://goo.gl/MqrFmX\n");for(var s=i.inheritedDataKeys(t),u=0;u<s.length;++u){var l=t[s[u]];"constructor"!==s[u]&&i.isClass(l)&&(E(l.prototype,r,o,a,n),E(l,r,o,a,n))}return E(t,r,o,a,n)}}},function(t,e,n){"use strict";t.exports=function(t,e,r,i){var o,a=n(1),s=a.isObject,u=n(29);"function"==typeof Map&&(o=Map);var c=function(){var t=0,e=0;function n(n,r){this[t]=n,this[t+e]=r,t++}return function(r){e=r.size,t=0;var i=new Array(2*r.size);return r.forEach(n,i),i}}();function l(t){var e,n=!1;if(void 0!==o&&t instanceof o)e=c(t),n=!0;else{var r=u.keys(t),i=r.length;e=new Array(2*i);for(var a=0;a<i;++a){var s=r[a];e[a]=t[s],e[a+i]=s}}this.constructor$(e),this._isMap=n,this._init$(void 0,n?-6:-3)}function h(e){var n,o=r(e);return s(o)?(n=o instanceof t?o._then(t.props,void 0,void 0,void 0,void 0):new l(o).promise(),o instanceof t&&n._propagateFrom(o,2),n):i("cannot await properties of a non-object\n\n    See http://goo.gl/MqrFmX\n")}a.inherits(l,e),l.prototype._init=function(){},l.prototype._promiseFulfilled=function(t,e){if(this._values[e]=t,++this._totalResolved>=this._length){var n;if(this._isMap)n=function(t){for(var e=new o,n=t.length/2|0,r=0;r<n;++r){var i=t[n+r],a=t[r];e.set(i,a)}return e}(this._values);else{n={};for(var r=this.length(),i=0,a=this.length();i<a;++i)n[this._values[i+r]]=this._values[i]}return this._resolve(n),!0}return!1},l.prototype.shouldCopyValues=function(){return!1},l.prototype.getActualLength=function(t){return t>>1},t.prototype.props=function(){return h(this)},t.props=function(t){return h(t)}}},function(t,e,n){"use strict";t.exports=function(t,e,r,i){var o=n(1),a=function(t){return t.then(function(e){return s(e,t)})};function s(n,s){var u=r(n);if(u instanceof t)return a(u);if(null===(n=o.asArray(n)))return i("expecting an array or an iterable object but got "+o.classString(n));var c=new t(e);void 0!==s&&c._propagateFrom(s,3);for(var l=c._fulfill,h=c._reject,d=0,f=n.length;d<f;++d){var p=n[d];(void 0!==p||d in n)&&t.cast(p)._then(l,h,void 0,c,null)}return c}t.race=function(t){return s(t,void 0)},t.prototype.race=function(){return s(this,void 0)}}},function(t,e,n){"use strict";t.exports=function(t,e,r,i,o,a){var s=t._getDomain,u=n(1),c=u.tryCatch;function l(e,n,r,i){this.constructor$(e);var a=s();this._fn=null===a?n:u.domainBind(a,n),void 0!==r&&(r=t.resolve(r))._attachCancellationCallback(this),this._initialValue=r,this._currentCancellable=null,this._eachValues=i===o?Array(this._length):0===i?null:void 0,this._promise._captureStackTrace(),this._init$(void 0,-5)}function h(t,e){this.isFulfilled()?e._resolve(t):e._reject(t)}function d(t,e,n,i){return"function"!=typeof e?r("expecting a function but got "+u.classString(e)):new l(t,e,n,i).promise()}function f(e){this.accum=e,this.array._gotAccum(e);var n=i(this.value,this.array._promise);return n instanceof t?(this.array._currentCancellable=n,n._then(p,void 0,void 0,this,void 0)):p.call(this,n)}function p(e){var n,r=this.array,i=r._promise,o=c(r._fn);i._pushContext(),(n=void 0!==r._eachValues?o.call(i._boundValue(),e,this.index,this.length):o.call(i._boundValue(),this.accum,e,this.index,this.length))instanceof t&&(r._currentCancellable=n);var s=i._popContext();return a.checkForgottenReturns(n,s,void 0!==r._eachValues?"Promise.each":"Promise.reduce",i),n}u.inherits(l,e),l.prototype._gotAccum=function(t){void 0!==this._eachValues&&null!==this._eachValues&&t!==o&&this._eachValues.push(t)},l.prototype._eachComplete=function(t){return null!==this._eachValues&&this._eachValues.push(t),this._eachValues},l.prototype._init=function(){},l.prototype._resolveEmptyArray=function(){this._resolve(void 0!==this._eachValues?this._eachValues:this._initialValue)},l.prototype.shouldCopyValues=function(){return!1},l.prototype._resolve=function(t){this._promise._resolveCallback(t),this._values=null},l.prototype._resultCancelled=function(e){if(e===this._initialValue)return this._cancel();this._isResolved()||(this._resultCancelled$(),this._currentCancellable instanceof t&&this._currentCancellable.cancel(),this._initialValue instanceof t&&this._initialValue.cancel())},l.prototype._iterate=function(e){var n,r;this._values=e;var i=e.length;if(void 0!==this._initialValue?(n=this._initialValue,r=0):(n=t.resolve(e[0]),r=1),this._currentCancellable=n,!n.isRejected())for(;r<i;++r){var o={accum:null,value:e[r],index:r,length:i,array:this};n=n._then(f,void 0,void 0,o,void 0)}void 0!==this._eachValues&&(n=n._then(this._eachComplete,void 0,void 0,this,void 0)),n._then(h,h,void 0,n,this)},t.prototype.reduce=function(t,e){return d(this,t,e,null)},t.reduce=function(t,e,n,r){return d(t,e,n,r)}}},function(t,e,n){"use strict";t.exports=function(t,e,r){var i=t.PromiseInspection;function o(t){this.constructor$(t)}n(1).inherits(o,e),o.prototype._promiseResolved=function(t,e){return this._values[t]=e,++this._totalResolved>=this._length&&(this._resolve(this._values),!0)},o.prototype._promiseFulfilled=function(t,e){var n=new i;return n._bitField=33554432,n._settledValueField=t,this._promiseResolved(e,n)},o.prototype._promiseRejected=function(t,e){var n=new i;return n._bitField=16777216,n._settledValueField=t,this._promiseResolved(e,n)},t.settle=function(t){return r.deprecated(".settle()",".reflect()"),new o(t).promise()},t.prototype.settle=function(){return t.settle(this)}}},function(t,e,n){"use strict";t.exports=function(t,e,r){var i=n(1),o=n(20).RangeError,a=n(20).AggregateError,s=i.isArray,u={};function c(t){this.constructor$(t),this._howMany=0,this._unwrap=!1,this._initialized=!1}function l(t,e){if((0|e)!==e||e<0)return r("expecting a positive integer\n\n    See http://goo.gl/MqrFmX\n");var n=new c(t),i=n.promise();return n.setHowMany(e),n.init(),i}i.inherits(c,e),c.prototype._init=function(){if(this._initialized)if(0!==this._howMany){this._init$(void 0,-5);var t=s(this._values);!this._isResolved()&&t&&this._howMany>this._canPossiblyFulfill()&&this._reject(this._getRangeError(this.length()))}else this._resolve([])},c.prototype.init=function(){this._initialized=!0,this._init()},c.prototype.setUnwrap=function(){this._unwrap=!0},c.prototype.howMany=function(){return this._howMany},c.prototype.setHowMany=function(t){this._howMany=t},c.prototype._promiseFulfilled=function(t){return this._addFulfilled(t),this._fulfilled()===this.howMany()&&(this._values.length=this.howMany(),1===this.howMany()&&this._unwrap?this._resolve(this._values[0]):this._resolve(this._values),!0)},c.prototype._promiseRejected=function(t){return this._addRejected(t),this._checkOutcome()},c.prototype._promiseCancelled=function(){return this._values instanceof t||null==this._values?this._cancel():(this._addRejected(u),this._checkOutcome())},c.prototype._checkOutcome=function(){if(this.howMany()>this._canPossiblyFulfill()){for(var t=new a,e=this.length();e<this._values.length;++e)this._values[e]!==u&&t.push(this._values[e]);return t.length>0?this._reject(t):this._cancel(),!0}return!1},c.prototype._fulfilled=function(){return this._totalResolved},c.prototype._rejected=function(){return this._values.length-this.length()},c.prototype._addRejected=function(t){this._values.push(t)},c.prototype._addFulfilled=function(t){this._values[this._totalResolved++]=t},c.prototype._canPossiblyFulfill=function(){return this.length()-this._rejected()},c.prototype._getRangeError=function(t){var e="Input array must contain at least "+this._howMany+" items but contains only "+t+" items";return new o(e)},c.prototype._resolveEmptyArray=function(){this._reject(this._getRangeError(0))},t.some=function(t,e){return l(t,e)},t.prototype.some=function(t){return l(this,t)},t._SomePromiseArray=c}},function(t,e,n){"use strict";t.exports=function(t,e){var n=t.map;t.prototype.filter=function(t,r){return n(this,t,r,e)},t.filter=function(t,r,i){return n(t,r,i,e)}}},function(t,e,n){"use strict";t.exports=function(t,e){var n=t.reduce,r=t.all;function i(){return r(this)}t.prototype.each=function(t){return n(this,t,e,0)._then(i,void 0,void 0,this,void 0)},t.prototype.mapSeries=function(t){return n(this,t,e,e)},t.each=function(t,r){return n(t,r,e,0)._then(i,void 0,void 0,t,void 0)},t.mapSeries=function(t,r){return n(t,r,e,e)}}},function(t,e,n){"use strict";t.exports=function(t){var e=t._SomePromiseArray;function n(t){var n=new e(t),r=n.promise();return n.setHowMany(1),n.setUnwrap(),n.init(),r}t.any=function(t){return n(t)},t.prototype.any=function(){return n(this)}}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Logger=void 0;var r=s(n(2)),i=n(75),o=s(n(51)),a=s(n(99));function s(t){return t&&t.__esModule?t:{default:t}}var u={sessionInfo:null,logFilePathPrefix:null,logFileRetentionCount:10,isDebugging:function(){return!1}},c={sessionTimestamp:(new Date).toISOString(),sessionInfoWritten:!1,logFileDateString:null,logFilePath:null,logFileStream:null,console:null},l={reset:"[39m",debug:"[32m",info:"[37m",warn:"[33m",error:"[31m"};class h{constructor(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"root";this.moduleName=t,this.debugAllowed=null}logger(t){return t?new h("root"===this.moduleName?t:this.moduleName+":"+t):this}debug(t){if(!0!==this.debugAllowed&&!1!==this.debugAllowed&&(this.debugAllowed=!!u.isDebugging("xmind:"+this.moduleName+":verbose")||!!u.isDebugging("xmind:verbose:"+this.moduleName)),!this.debugAllowed)return this;for(var e=arguments.length,n=Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];return this._handle("debug",t,n),this}info(t){for(var e=arguments.length,n=Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];return this._handle("info",t,n),this}warn(t){for(var e=arguments.length,n=Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];return this._handle("warn",t,n),this}error(t){for(var e=arguments.length,n=Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];return this._handle("error",t,n),this}_handle(t,e,n){var r=(new Date).toISOString();c.sessionInfoWritten||(d(u.sessionInfo,g),c.sessionInfoWritten=!0),d({moduleName:this.moduleName,timestamp:r,level:t,message:e,args:n},p)}configure(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.sessionInfo,n=void 0===e?null:e,r=t.logFilePathPrefix,i=void 0===r?null:r,o=t.logFileRetentionCount,a=void 0===o?null:o,s=t.isDebugging,l=void 0===s?null:s;n&&(u.sessionInfo=n),i&&(!function(){c.logFileStream&&(c.logFileStream.end(),c.logFileStream=null);c.logFilePath=null,c.logFileDateString=null}(),u.logFilePathPrefix=i),"number"==typeof a&&a>=1&&(u.logFileRetentionCount=parseInt(a,10),f()),"function"==typeof l&&(u.isDebugging=l,l("xmind:logger:console")?c.console=global.console:c.console=null)}}function d(t,e){!function(t,e){if(!u.logFilePathPrefix)return;try{!function(t){if(c.logFileStream&&t===c.logFileDateString)return;c.logFileDateString=t;var e=u.logFilePathPrefix+"_"+t+".log";c.logFilePath=e,f(),a.default.ensureFileSync(e),c.logFileStream=a.default.createWriteStream(e,{flags:"a"})}((r=new Date,r.getFullYear()+"-"+(r.getMonth()+1)+"-"+r.getDate()));var n=e(t);c.logFileStream.write(n),c.logFileStream.write("\r\n")}catch(e){global.console&&global.console.trace("Failed to write log message",t,"to file",c.logFilePath,", Reason:",e)}var r}(t,e),function(t,e){if(!c.console)return;try{var n=c.console,r=n[t.level]||n.log;r||(n=global.console,r=n[t.level]||n.log);var i=e(t);i=(l[t.level]||l.reset)+i+l.reset,r.call(n,i)}catch(e){global.console&&global.console.trace("Failed to write log message",t,"to console.")}}(t,e)}function f(){if(c.logFilePath&&u.logFilePathPrefix){var t=r.default.basename(u.logFilePathPrefix)+"_",e=r.default.dirname(c.logFilePath);try{if(a.default.existsSync(e)&&a.default.lstatSync(e).isDirectory()){var n=a.default.readdirSync(e).filter(function(e){return e.startsWith(t)});if(n.length<=u.logFileRetentionCount)return;for(var i in n.sort(),n.splice(n.length-u.logFileRetentionCount,u.logFileRetentionCount),n)a.default.removeSync(r.default.join(e,i))}}catch(t){global.console&&global.console.trace('Failed to delete outdated log files in "'+e+'":',t)}}}function p(t){return"["+t.level[0].toUpperCase()+" "+t.timestamp+" "+t.moduleName+"] "+i.format.apply(void 0,[t.message].concat(t.args))}function g(t){if(t){var e=(t.version||"0.0.0")+"+"+(t.buildNumber||"0"),n=t.vendor||"(unknown vendor)";return"\r\n-------- SESSION "+c.sessionTimestamp+" ("+e+", "+process.platform+", "+process.arch+", "+o.default.totalmem()+", "+n+", "+t.distrib+") --------"}return"\r\n-------------------------------------------------"}e.Logger=h,e.default=new h},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=c(n(35)),i=c(n(25)),o=c(n(51)),a=c(n(110)),s=n(222),u=n(77);function c(t){return t&&t.__esModule?t:{default:t}}var l=o.default.hostname().replace(/\.local$/,""),h=process.platform,d={TRIAL:"trial",SUB:"sub",EXPIRED:"expired",EXCEED_MAX_DEVICE:"4031",KICK_OUT:"4032",TOKEN_ERROR:401,UNKNOW_ERROR:"unknow error"},f=3e4,p=50;var g=String.fromCharCode.apply(String,[45,45,45,45,45,66,69,71,73,78,32,80,85,66,76,73,67,32,75,69,89,45,45,45,45,45,10,77,73,71,102,77,65,48,71,67,83,113,71,83,73,98,51,68,81,69,66,65,81,85,65,65,52,71,78,65,68,67,66,105,81,75,66,103,81,67,68,89,72,51,49,108,48,108,108,105,99,66,97,118,98,85,90,82,103,48,121,49,76,110,73,10,50,74,74,117,80,90,97,107,48,52,57,56,119,71,109,75,48,78,43,107,115,113,67,122,65,48,88,85,102,67,103,81,53,69,57,105,116,89,121,80,117,84,43,122,54,80,122,47,43,48,113,54,78,101,65,112,107,87,99,110,67,47,84,104,10,87,81,89,54,90,108,69,79,77,111,110,114,104,80,117,98,56,122,115,87,89,79,90,122,99,107,81,117,116,120,51,106,110,54,107,43,54,90,88,120,55,121,85,98,98,107,120,73,107,43,119,113,87,103,110,108,81,120,110,120,54,84,77,100,10,83,51,114,103,111,51,114,52,98,108,70,84,87,105,54,69,69,81,73,68,65,81,65,66,10,45,45,45,45,45,69,78,68,32,80,85,66,76,73,67,32,75,69,89,45,45,45,45,45]),v=function(t,e){return"cn"===t?e?"https://test-www.xmind.cn":"https://www.xmind.cn":e?"https://test-www.xmind.net":"https://www.xmind.net"},m=function(t){return v(t,"undefined".includes("server"))+"/_res/devices"},y=function(t){return v(t,"undefined".includes("server"))+"/_res/user_sub_status"},_=function(t){return v(t,"undefined".includes("license"))+"/_api/license-activations"},E=function(t){return v(t,"undefined".includes("server"))+"/_res/appstore/sub"},A=function(t){return v(t,"undefined".includes("server"))+"/_res/get-zen-price"};function S(){return parseInt("9.0.6".split(".")[0])}e.default=class{constructor(t){var e=t.vud,n=t.superagent,r=t.app,i=t.tvud,o=t.logger;this.PER_MACHINE_LICENSE_RETURN_CODE={SUCCESS:0,E_LICENSE_MISSING:1,E_KEY_INVALID:2,E_OUTDATED:3,E_MAJOR_VERSION_UNMATCHED:4,E_MACHINE_ID_UNMATCHED:5},this.PER_MACHINE_LICENSE_SERVER_RETURN_CODE={SUCCESS:200,E_KEY_BIND_TO_ANOTHER_MACHINE:403,E_KEY_NOT_EXIST:404,E_PARAM_MISSING:400,E_SERVER_ERR:500},this.APP_STATUS=s.appActivateStatus,this.STATUS={TRIAL:"trial",SUB:"sub",EXPIRED:"expired",EXCEED_MAX_DEVICE:"4031",KICK_OUT:"4032",CONFIG_ERROR:"CONFIG_ERROR",TOKEN_ERROR:401,UNKNOW_ERROR:"unknow error"},this.vud=e,this.superagent=n,this.app=r,this.tvud=i,this.logger=o}_initTvud(){this.tvud.getModule("remindSubscription").set("actionCount",0),this.tvud.getModule("remindSubscription").set("notifyAtActionNum",Math.floor(Math.random()*p)),this.tvud.getModule("remindSubscription").set("lastNotifyTime",0)}checkPerMachineLicenseInServer(t){var e=this,n=t.email,r={key:t.licenseKey,email:n,device_id:this.app.hwFingerprint};return(0,u.promiseSome)([this.superagent.head(_("net")).timeout(f).then(function(){return"net"}),this.superagent.head(_("cn")).timeout(f).then(function(){return"cn"})]).then(function(t){return e.superagent.post(_(t)).timeout(f).send(r).then(function(t){return{code:t.body._code,data:{data:t.body.data,partLength:t.body.part_length,padding:t.body.padding},param:r}})}).catch(function(t){return i.default.reject({err:t,param:r})})}getPerMachineLicenseStatus(){var t=this.getPerMachineLicense();return this.checkPerMachineLicense(t)}getPerMachineLicense(){var t=this.getPerMachineLicenseVud();if(!t)return null;var e=null;try{var n=T(t);e=JSON.parse(n)}catch(e){this.logger.warn("error in decrypt license",e,t)}return e}setPerMachineLicenseVud(t){this.vud.getModule("perMachineLicense").set(S(),t)}getPerMachineLicenseVud(){return this.vud.getModule("perMachineLicense").get(S())}checkPerMachineLicense(t){if(!t)return this.PER_MACHINE_LICENSE_RETURN_CODE.E_LICENSE_MISSING;if(!this.app.hwFingerprint)return this.PER_MACHINE_LICENSE_RETURN_CODE.E_MACHINE_ID_UNMATCHED;var e=t.key;if(t.device_id!==this.app.hwFingerprint)return this.PER_MACHINE_LICENSE_RETURN_CODE.E_MACHINE_ID_UNMATCHED;var n=this.checkPerMachineLicenseKey(e);return n!==this.PER_MACHINE_LICENSE_RETURN_CODE.SUCCESS?n:this.PER_MACHINE_LICENSE_RETURN_CODE.SUCCESS}checkPerMachineLicenseKey(t){if(25!==(t=t.trim().toUpperCase()).length)return this.PER_MACHINE_LICENSE_RETURN_CODE.E_KEY_INVALID;var e=t.slice(0,5),n=t.slice(5);if(!/^[ABCDEFGHJKLMNPQRSTUVWXYZ23456789]{20}$/.test(n))return this.PER_MACHINE_LICENSE_RETURN_CODE.E_KEY_INVALID;if(!/^[0-9A-Z]{5}$/.test(e))return this.PER_MACHINE_LICENSE_RETURN_CODE.E_KEY_INVALID;if("X"!==t.slice(0,1))return this.PER_MACHINE_LICENSE_RETURN_CODE.E_KEY_INVALID;var r,i,o=(r=t.slice(2,3),9+((i=(r=r.toLowerCase()).charCodeAt(0))>=48&&i<=57?i-48:i>=97&&i<=122?i-97:-1));return o<=8?this.PER_MACHINE_LICENSE_RETURN_CODE.E_KEY_INVALID:S()!==o?this.PER_MACHINE_LICENSE_RETURN_CODE.E_MAJOR_VERSION_UNMATCHED:this.PER_MACHINE_LICENSE_RETURN_CODE.SUCCESS}getAppActivateStatusCode(){var t,e=this.getPerMachineLicenseStatus(),n="ee"===this.getMachineStatus()?1:0;return[e,(t={},t[this.STATUS.SUB]=0,t[this.STATUS.TRIAL]=1,t[this.STATUS.EXPIRED]=2,t)[this.getCurrentLicenseStatus()],n]}getAppActivateStatus(){var t,e,n=this.getCurrentLicenseStatus(),r="ee"===this.getMachineStatus()?"ee":"normal",i=this.getPerMachineLicenseStatus(),o=null;o=i===this.PER_MACHINE_LICENSE_RETURN_CODE.SUCCESS?"activated":i===this.PER_MACHINE_LICENSE_RETURN_CODE.E_OUTDATED?"expired":"missing";var a=((t={})[this.STATUS.TRIAL]={ee:s.appActivateStatus.LIMITED,normal:s.appActivateStatus.TRIAL},t[this.STATUS.SUB]={ee:s.appActivateStatus.ACTIVATED,normal:s.appActivateStatus.ACTIVATED},t[this.STATUS.EXPIRED]={ee:s.appActivateStatus.LIMITED,normal:s.appActivateStatus.LIMITED},t),u=((e={})[s.appActivateStatus.LIMITED]={activated:s.appActivateStatus.ACTIVATED,expired:s.appActivateStatus.LIMITED,missing:s.appActivateStatus.LIMITED},e[s.appActivateStatus.TRIAL]={activated:s.appActivateStatus.ACTIVATED,expired:s.appActivateStatus.TRIAL,missing:s.appActivateStatus.TRIAL},e[s.appActivateStatus.ACTIVATED]={activated:s.appActivateStatus.ACTIVATED,expired:s.appActivateStatus.ACTIVATED,missing:s.appActivateStatus.ACTIVATED},e),c=a[n][r];return c=u[c][o]}getUsedDays(){var t=this.app.vud.getModule("deviceStatus"),e=t.get("start_use_time");e||(e=Date.now(),t.set("start_use_time",e));var n=Date.now()-e;return Math.floor(n/864e5)}openActivateDialog(){this.app.modal.showModal("activate"),this.app.tracker.track({eventCategory:"Activate",eventAction:"showActivateWindow"})}verifyReceipt(t,e){var n=this,r=this.app.vud.getModule("account").get("token");if(!r)return e(new Error("please signin"));var i=this.getDomain(),o={4001:"the receipt is considered invalid by apple",4002:"bundle identifier mismatch",4003:"no unexpired receipt found",4004:"subscription duplicated. The user might have already subscriped via browser",4005:"receipt has been used"};this.superagent.post(E(i)).timeout(3e4).set({"content-type":"application/json; charset=utf-8",AuthToken:r}).send({receipt:t}).end(function(r,i){r?setTimeout(function(){n.verifyReceipt(t,e)},1e4):200===i.body._code?e(200,null):void 0!==i.body.errorcode?e(i.body.errorcode,o[i.body.errorcode]):e(500,"server error")})}getPrice(t){var e=this.getDomain();this.superagent.get(A(e)).timeout(3e4).end(function(e,n){t(e,n)})}checkActive(t){var e=this,n=this.app.vud.getModule("account"),r=this.getDomain(),i=n.get("token"),o=this.app.machine_id;this.superagent.post(m(r)).timeout(3e4).set({"content-type":"application/json; charset=utf-8",AuthToken:i}).send({device_id:o,device_name:l,device_type:h}).end(function(n,r){n?(e.logger.info("[common checkActive error]",n,r),t({type:e.STATUS.UNKNOW_ERROR,data:r})):200===r.body._code?(e.license_status=r.body.license.status||d.TRIAL,r.body.raw_data?e.deviceStatusData=r.body.raw_data:(e.deviceStatusData=r.body.license,e.deviceStatusData.device_id=o),e.license_status===d.TRIAL?t(null,{type:e.STATUS.TRIAL,data:e.deviceStatusData}):e.license_status===d.SUB?t(null,{type:e.STATUS.SUB,data:e.deviceStatusData}):e.license_status===d.EXPIRED?t(null,{type:e.STATUS.EXPIRED,data:e.deviceStatusData}):t(null,{type:e.STATUS.UNKNOW_ERROR,data:r.body})):403===r.body._code&&"4031"===r.body.errorcode?t(null,{type:e.STATUS.EXCEED_MAX_DEVICE,devices:r.body.devices}):403===r.body._code&&"4032"===r.body.errorcode?(console.log(""),t(null,{type:e.STATUS.KICK_OUT})):401===r.body._code?(console.log("token "),t(null,{type:e.STATUS.TOKEN_ERROR})):t({type:e.STATUS.UNKNOW_ERROR,data:r.body._code})})}getSubscription(t){var e=this.app.vud.getModule("account"),n=this.getDomain(),r=e.get("token");this.superagent.get(y(n)).set({AuthToken:r}).end(function(e,n){t(e,n)})}unbindDevice(t,e){var n=t.unbind_device_list,r=t.domain,i=t.token,o=this.app.machine_id;this.superagent.post(m(r)).set({"content-type":"application/json; charset=utf-8",AuthToken:i}).send({unbind_device_list:n,device_id:o,device_name:l,device_type:h}).end(function(t,n){e(t,n)})}setLicense(t){this.setDeviceStatus("license",t)}getLicense(){try{var t=this.vud.getModule("deviceStatus"),e=this.decipher(t.get("license"),!0);return e?(e.status||(e.status=this.STATUS.TRIAL),e):null}catch(t){return this.logger.info("[getLicense error]",t),null}}setDeviceStatus(t,e){this.vud.getModule("deviceStatus").set(t,e)}getCurrentLicenseStatus(){if(this.vud.getModule("account").get("token")){var t=this.getLicense();this.license_status=t&&t.status||d.TRIAL}else this.license_status=d.TRIAL;return this.license_status}setMachineAsEE(){this.vud.getModule("deviceStatus").set("machine_status","ee"),this.machine_status="ee"}getMachineStatus(){var t=this.vud.getModule("deviceStatus").get("machine_status");return t&&"ee"!==t?(this.setMachineAsEE(),"ee"):t||""}logout(){this.app.vud.getModule("account").clear(),this.setDeviceStatus("license",null),this.app.commandService.updateCommand("sign")}checkExpired(){if(this.PER_MACHINE_LICENSE_RETURN_CODE.SUCCESS!==this.getPerMachineLicenseStatus())if("trial"===this.getCurrentLicenseStatus())this._checkTrail();else if("sub"===this.getCurrentLicenseStatus()){var t=this.app.vud.getModule("deviceStatus"),e=this.getLicense();if(e.expireTime)if(new Date>new Date(e.expireTime)){if(!t.get("expired_notify"))return t.set("expired_notify",!0),{message:this.app.localizer.localize("No subscription detected."),detail:this.app.localizer.localize("Unable to detect any valid subscription status, please subscribe XMind at first.")}}else if(new Date(+new Date+6048e5)>=new Date(e.expireTime)&&!t.get("will_expired_notify"))return t.set("will_expired_notify",!0),{message:this.app.localizer.localize("Subscription will expire soon."),detail:this.app.localizer.localize("Renew your subscription and continue to enjoy full version.")}}}_checkTrail(){var t=!1,e=this.tvud.getModule("remindSubscription"),n=e.get("actionCount"),r=e.get("notifyAtActionNum"),i=e.get("lastNotifyTime");n===r&&(t=!0),++n===p&&(n=0,r=Math.floor(Math.random()*p));var o=0===i;Date.now()-i>18e5&&(t=!0,i=Date.now()),e.update({actionCount:n,notifyAtActionNum:r,lastNotifyTime:i}),t&&(this.app.tracker.track({actionName:"ActivateAlert"}),this.app.modal.showModal("activatealert",{isFirstNotify:o}))}getDomain(){var t=this.app.vud.getModule("account"),e=t.get("domain");return e||(e="zh-CN"!==this.app.preferences.get("language")?"net":"cn",t.set("domain",e)),e}decipher(t,e){return e&&t?JSON.parse(a.default.publicDecrypt({key:g,padding:a.default.constants.RSA_PKCS1_PADDING},new Buffer(t,"base64")).toString()):t}};var T=function(t){var e=[],n=e.find(function(e){var n=e.fingerprint;return n.data===t.data&&n.partLength===t.partLength&&n.padding===t.padding});if(n)return console.log("matchedCache: ",n),n.result;var i=function(t){for(var e=t.data,n=t.partLength,r=t.padding,i=Buffer.from(e,"base64"),o=0,s=void 0,u=[];(s=i.slice(o,o+n)).length>0;)u.push(a.default.publicDecrypt({key:g,padding:a.default.constants[r]},s).toString()),o+=n;return u.join("")}(t);return e.push({fingerprint:(0,r.default)({},t),result:i}),i}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});e.appActivateStatus={TRIAL:"trial",ACTIVATED:"activated",LIMITED:"limited"};e.EventTypes={WINDOW_FOCUS:"vana:windowfocus",WINDOW_BLUR:"vana:windowblur",WINDOW_CLOSED:"vana:windowclosed",WINDOW_SHOW:"vana:windowshow",AFTER_ACTIVATE_STATUS_CHANGE:"AFTER_ACTIVATE_STATUS_CHANGE"},e.NotificationTypes={PROMOTION_READY:"promotion:ready",PROMOTION_RESET:"promotion:reset",PROMOTION_COMPLETE_ONE:"promotion:completedOne"},e.CategoryTypes={NOTIFICATION:"notification"}},function(t,e,n){"undefined"!=typeof process&&"renderer"===process.type?t.exports=n(224):t.exports=n(226)},function(t,e,n){function r(){var t;try{t=e.storage.debug}catch(t){}return!t&&"undefined"!=typeof process&&"env"in process&&(t=process.env.DEBUG),t}(e=t.exports=n(111)).log=function(){return"object"==typeof console&&console.log&&Function.prototype.apply.call(console.log,console,arguments)},e.formatArgs=function(t){var n=this.useColors;if(t[0]=(n?"%c":"")+this.namespace+(n?" %c":" ")+t[0]+(n?"%c ":" ")+"+"+e.humanize(this.diff),!n)return;var r="color: "+this.color;t.splice(1,0,r,"color: inherit");var i=0,o=0;t[0].replace(/%[a-zA-Z%]/g,function(t){"%%"!==t&&"%c"===t&&(o=++i)}),t.splice(o,0,r)},e.save=function(t){try{null==t?e.storage.removeItem("debug"):e.storage.debug=t}catch(t){}},e.load=r,e.useColors=function(){if("undefined"!=typeof window&&window.process&&"renderer"===window.process.type)return!0;return"undefined"!=typeof document&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||"undefined"!=typeof window&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)},e.storage="undefined"!=typeof chrome&&void 0!==chrome.storage?chrome.storage.local:function(){try{return window.localStorage}catch(t){}}(),e.colors=["lightseagreen","forestgreen","goldenrod","dodgerblue","darkorchid","crimson"],e.formatters.j=function(t){try{return JSON.stringify(t)}catch(t){return"[UnexpectedJSONParseError]: "+t.message}},e.enable(r())},function(t,e){var n=1e3,r=60*n,i=60*r,o=24*i,a=365.25*o;function s(t,e,n){if(!(t<e))return t<1.5*e?Math.floor(t/e)+" "+n:Math.ceil(t/e)+" "+n+"s"}t.exports=function(t,e){e=e||{};var u,c=typeof t;if("string"===c&&t.length>0)return function(t){if((t=String(t)).length>100)return;var e=/^((?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|years?|yrs?|y)?$/i.exec(t);if(!e)return;var s=parseFloat(e[1]);switch((e[2]||"ms").toLowerCase()){case"years":case"year":case"yrs":case"yr":case"y":return s*a;case"days":case"day":case"d":return s*o;case"hours":case"hour":case"hrs":case"hr":case"h":return s*i;case"minutes":case"minute":case"mins":case"min":case"m":return s*r;case"seconds":case"second":case"secs":case"sec":case"s":return s*n;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return s;default:return}}(t);if("number"===c&&!1===isNaN(t))return e.long?s(u=t,o,"day")||s(u,i,"hour")||s(u,r,"minute")||s(u,n,"second")||u+" ms":function(t){if(t>=o)return Math.round(t/o)+"d";if(t>=i)return Math.round(t/i)+"h";if(t>=r)return Math.round(t/r)+"m";if(t>=n)return Math.round(t/n)+"s";return t+"ms"}(t);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(t))}},function(t,e,n){var r=n(227),i=n(75);(e=t.exports=n(111)).init=function(t){t.inspectOpts={};for(var n=Object.keys(e.inspectOpts),r=0;r<n.length;r++)t.inspectOpts[n[r]]=e.inspectOpts[n[r]]},e.log=function(){return a.write(i.format.apply(i,arguments)+"\n")},e.formatArgs=function(t){var n=this.namespace;if(this.useColors){var r=this.color,i="  [3"+r+";1m"+n+" [0m";t[0]=i+t[0].split("\n").join("\n"+i),t.push("[3"+r+"m+"+e.humanize(this.diff)+"[0m")}else t[0]=(new Date).toUTCString()+" "+n+" "+t[0]},e.save=function(t){null==t?delete process.env.DEBUG:process.env.DEBUG=t},e.load=s,e.useColors=function(){return"colors"in e.inspectOpts?Boolean(e.inspectOpts.colors):r.isatty(o)},e.colors=[6,2,3,4,5,1],e.inspectOpts=Object.keys(process.env).filter(function(t){return/^debug_/i.test(t)}).reduce(function(t,e){var n=e.substring(6).toLowerCase().replace(/_([a-z])/g,function(t,e){return e.toUpperCase()}),r=process.env[e];return r=!!/^(yes|on|true|enabled)$/i.test(r)||!/^(no|off|false|disabled)$/i.test(r)&&("null"===r?null:Number(r)),t[n]=r,t},{});var o=parseInt(process.env.DEBUG_FD,10)||2;1!==o&&2!==o&&i.deprecate(function(){},"except for stderr(2) and stdout(1), any other usage of DEBUG_FD is deprecated. Override debug.log if you want to use a different log function (https://git.io/debug_fd)")();var a=1===o?process.stdout:2===o?process.stderr:function(t){var e;switch(process.binding("tty_wrap").guessHandleType(t)){case"TTY":(e=new r.WriteStream(t))._type="tty",e._handle&&e._handle.unref&&e._handle.unref();break;case"FILE":var i=n(28);(e=new i.SyncWriteStream(t,{autoClose:!1}))._type="fs";break;case"PIPE":case"TCP":var o=n(228);(e=new o.Socket({fd:t,readable:!1,writable:!0})).readable=!1,e.read=null,e._type="pipe",e._handle&&e._handle.unref&&e._handle.unref();break;default:throw new Error("Implement me. Unknown stream file type!")}return e.fd=t,e._isStdio=!0,e}(o);function s(){return process.env.DEBUG}e.formatters.o=function(t){return this.inspectOpts.colors=this.useColors,i.inspect(t,this.inspectOpts).split("\n").map(function(t){return t.trim()}).join(" ")},e.formatters.O=function(t){return this.inspectOpts.colors=this.useColors,i.inspect(t,this.inspectOpts)},e.enable(s())},function(t,e){t.exports=require("tty")},function(t,e){t.exports=require("net")},function(t,e,n){var r;r=function(t){return t},t.exports=r(n(0),n(53),n(230),n(231),n(30),n(31),n(78),n(112),n(232),n(113),n(233),n(234),n(235),n(79),n(236),n(26),n(5),n(237),n(238),n(239),n(240),n(241),n(242),n(243),n(244),n(245),n(246),n(247),n(248),n(249),n(250),n(251),n(252))},function(t,e,n){var r;r=function(t){return function(){if("function"==typeof ArrayBuffer){var e=t.lib.WordArray,n=e.init;(e.init=function(t){if(t instanceof ArrayBuffer&&(t=new Uint8Array(t)),(t instanceof Int8Array||"undefined"!=typeof Uint8ClampedArray&&t instanceof Uint8ClampedArray||t instanceof Int16Array||t instanceof Uint16Array||t instanceof Int32Array||t instanceof Uint32Array||t instanceof Float32Array||t instanceof Float64Array)&&(t=new Uint8Array(t.buffer,t.byteOffset,t.byteLength)),t instanceof Uint8Array){for(var e=t.byteLength,r=[],i=0;i<e;i++)r[i>>>2]|=t[i]<<24-i%4*8;n.call(this,r,e)}else n.apply(this,arguments)}).prototype=e}}(),t.lib.WordArray},t.exports=r(n(0))},function(t,e,n){var r;r=function(t){return function(){var e=t,n=e.lib.WordArray,r=e.enc;r.Utf16=r.Utf16BE={stringify:function(t){for(var e=t.words,n=t.sigBytes,r=[],i=0;i<n;i+=2){var o=e[i>>>2]>>>16-i%4*8&65535;r.push(String.fromCharCode(o))}return r.join("")},parse:function(t){for(var e=t.length,r=[],i=0;i<e;i++)r[i>>>1]|=t.charCodeAt(i)<<16-i%2*16;return n.create(r,2*e)}};function i(t){return t<<8&4278255360|t>>>8&16711935}r.Utf16LE={stringify:function(t){for(var e=t.words,n=t.sigBytes,r=[],o=0;o<n;o+=2){var a=i(e[o>>>2]>>>16-o%4*8&65535);r.push(String.fromCharCode(a))}return r.join("")},parse:function(t){for(var e=t.length,r=[],o=0;o<e;o++)r[o>>>1]|=i(t.charCodeAt(o)<<16-o%2*16);return n.create(r,2*e)}}}(),t.enc.Utf16},t.exports=r(n(0))},function(t,e,n){var r;r=function(t){var e,n,r,i,o;return n=(e=t).lib.WordArray,r=e.algo,i=r.SHA256,o=r.SHA224=i.extend({_doReset:function(){this._hash=new n.init([3238371032,914150663,812702999,4144912697,4290775857,1750603025,1694076839,3204075428])},_doFinalize:function(){var t=i._doFinalize.call(this);return t.sigBytes-=4,t}}),e.SHA224=i._createHelper(o),e.HmacSHA224=i._createHmacHelper(o),t.SHA224},t.exports=r(n(0),n(112))},function(t,e,n){var r;r=function(t){var e,n,r,i,o,a,s;return n=(e=t).x64,r=n.Word,i=n.WordArray,o=e.algo,a=o.SHA512,s=o.SHA384=a.extend({_doReset:function(){this._hash=new i.init([new r.init(3418070365,3238371032),new r.init(1654270250,914150663),new r.init(2438529370,812702999),new r.init(355462360,4144912697),new r.init(1731405415,4290775857),new r.init(2394180231,1750603025),new r.init(3675008525,1694076839),new r.init(1203062813,3204075428)])},_doFinalize:function(){var t=a._doFinalize.call(this);return t.sigBytes-=16,t}}),e.SHA384=a._createHelper(s),e.HmacSHA384=a._createHmacHelper(s),t.SHA384},t.exports=r(n(0),n(53),n(113))},function(t,e,n){var r;r=function(t){return function(e){var n=t,r=n.lib,i=r.WordArray,o=r.Hasher,a=n.x64.Word,s=n.algo,u=[],c=[],l=[];!function(){for(var t=1,e=0,n=0;n<24;n++){u[t+5*e]=(n+1)*(n+2)/2%64;var r=(2*t+3*e)%5;t=e%5,e=r}for(t=0;t<5;t++)for(e=0;e<5;e++)c[t+5*e]=e+(2*t+3*e)%5*5;for(var i=1,o=0;o<24;o++){for(var s=0,h=0,d=0;d<7;d++){if(1&i){var f=(1<<d)-1;f<32?h^=1<<f:s^=1<<f-32}128&i?i=i<<1^113:i<<=1}l[o]=a.create(s,h)}}();var h=[];!function(){for(var t=0;t<25;t++)h[t]=a.create()}();var d=s.SHA3=o.extend({cfg:o.cfg.extend({outputLength:512}),_doReset:function(){for(var t=this._state=[],e=0;e<25;e++)t[e]=new a.init;this.blockSize=(1600-2*this.cfg.outputLength)/32},_doProcessBlock:function(t,e){for(var n=this._state,r=this.blockSize/2,i=0;i<r;i++){var o=t[e+2*i],a=t[e+2*i+1];o=16711935&(o<<8|o>>>24)|4278255360&(o<<24|o>>>8),a=16711935&(a<<8|a>>>24)|4278255360&(a<<24|a>>>8),(I=n[i]).high^=a,I.low^=o}for(var s=0;s<24;s++){for(var d=0;d<5;d++){for(var f=0,p=0,g=0;g<5;g++){f^=(I=n[d+5*g]).high,p^=I.low}var v=h[d];v.high=f,v.low=p}for(d=0;d<5;d++){var m=h[(d+4)%5],y=h[(d+1)%5],_=y.high,E=y.low;for(f=m.high^(_<<1|E>>>31),p=m.low^(E<<1|_>>>31),g=0;g<5;g++){(I=n[d+5*g]).high^=f,I.low^=p}}for(var A=1;A<25;A++){var S=(I=n[A]).high,T=I.low,x=u[A];if(x<32)f=S<<x|T>>>32-x,p=T<<x|S>>>32-x;else f=T<<x-32|S>>>64-x,p=S<<x-32|T>>>64-x;var b=h[c[A]];b.high=f,b.low=p}var w=h[0],C=n[0];w.high=C.high,w.low=C.low;for(d=0;d<5;d++)for(g=0;g<5;g++){var I=n[A=d+5*g],L=h[A],N=h[(d+1)%5+5*g],O=h[(d+2)%5+5*g];I.high=L.high^~N.high&O.high,I.low=L.low^~N.low&O.low}I=n[0];var R=l[s];I.high^=R.high,I.low^=R.low}},_doFinalize:function(){var t=this._data,n=t.words,r=(this._nDataBytes,8*t.sigBytes),o=32*this.blockSize;n[r>>>5]|=1<<24-r%32,n[(e.ceil((r+1)/o)*o>>>5)-1]|=128,t.sigBytes=4*n.length,this._process();for(var a=this._state,s=this.cfg.outputLength/8,u=s/8,c=[],l=0;l<u;l++){var h=a[l],d=h.high,f=h.low;d=16711935&(d<<8|d>>>24)|4278255360&(d<<24|d>>>8),f=16711935&(f<<8|f>>>24)|4278255360&(f<<24|f>>>8),c.push(f),c.push(d)}return new i.init(c,s)},clone:function(){for(var t=o.clone.call(this),e=t._state=this._state.slice(0),n=0;n<25;n++)e[n]=e[n].clone();return t}});n.SHA3=o._createHelper(d),n.HmacSHA3=o._createHmacHelper(d)}(Math),t.SHA3},t.exports=r(n(0),n(53))},function(t,e,n){var r;r=function(t){return function(e){var n=t,r=n.lib,i=r.WordArray,o=r.Hasher,a=n.algo,s=i.create([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,7,4,13,1,10,6,15,3,12,0,9,5,2,14,11,8,3,10,14,4,9,15,8,1,2,7,0,6,13,11,5,12,1,9,11,10,0,8,12,4,13,3,7,15,14,5,6,2,4,0,5,9,7,12,2,10,14,1,3,8,11,6,15,13]),u=i.create([5,14,7,0,9,2,11,4,13,6,15,8,1,10,3,12,6,11,3,7,0,13,5,10,14,15,8,12,4,9,1,2,15,5,1,3,7,14,6,9,11,8,12,2,10,0,4,13,8,6,4,1,3,11,15,0,5,12,2,13,9,7,10,14,12,15,10,4,1,5,8,7,6,2,13,14,0,3,9,11]),c=i.create([11,14,15,12,5,8,7,9,11,13,14,15,6,7,9,8,7,6,8,13,11,9,7,15,7,12,15,9,11,7,13,12,11,13,6,7,14,9,13,15,14,8,13,6,5,12,7,5,11,12,14,15,14,15,9,8,9,14,5,6,8,6,5,12,9,15,5,11,6,8,13,12,5,12,13,14,11,8,5,6]),l=i.create([8,9,9,11,13,15,15,5,7,7,8,11,14,14,12,6,9,13,15,7,12,8,9,11,7,7,12,7,6,15,13,11,9,7,15,11,8,6,6,14,12,13,5,14,13,13,7,5,15,5,8,11,14,14,6,14,6,9,12,9,12,5,15,8,8,5,12,9,12,5,14,6,8,13,6,5,15,13,11,11]),h=i.create([0,1518500249,1859775393,2400959708,2840853838]),d=i.create([1352829926,1548603684,1836072691,2053994217,0]),f=a.RIPEMD160=o.extend({_doReset:function(){this._hash=i.create([1732584193,4023233417,2562383102,271733878,3285377520])},_doProcessBlock:function(t,e){for(var n=0;n<16;n++){var r=e+n,i=t[r];t[r]=16711935&(i<<8|i>>>24)|4278255360&(i<<24|i>>>8)}var o,a,f,E,A,S,T,x,b,w,C,I=this._hash.words,L=h.words,N=d.words,O=s.words,R=u.words,M=c.words,D=l.words;S=o=I[0],T=a=I[1],x=f=I[2],b=E=I[3],w=A=I[4];for(n=0;n<80;n+=1)C=o+t[e+O[n]]|0,C+=n<16?p(a,f,E)+L[0]:n<32?g(a,f,E)+L[1]:n<48?v(a,f,E)+L[2]:n<64?m(a,f,E)+L[3]:y(a,f,E)+L[4],C=(C=_(C|=0,M[n]))+A|0,o=A,A=E,E=_(f,10),f=a,a=C,C=S+t[e+R[n]]|0,C+=n<16?y(T,x,b)+N[0]:n<32?m(T,x,b)+N[1]:n<48?v(T,x,b)+N[2]:n<64?g(T,x,b)+N[3]:p(T,x,b)+N[4],C=(C=_(C|=0,D[n]))+w|0,S=w,w=b,b=_(x,10),x=T,T=C;C=I[1]+f+b|0,I[1]=I[2]+E+w|0,I[2]=I[3]+A+S|0,I[3]=I[4]+o+T|0,I[4]=I[0]+a+x|0,I[0]=C},_doFinalize:function(){var t=this._data,e=t.words,n=8*this._nDataBytes,r=8*t.sigBytes;e[r>>>5]|=128<<24-r%32,e[14+(r+64>>>9<<4)]=16711935&(n<<8|n>>>24)|4278255360&(n<<24|n>>>8),t.sigBytes=4*(e.length+1),this._process();for(var i=this._hash,o=i.words,a=0;a<5;a++){var s=o[a];o[a]=16711935&(s<<8|s>>>24)|4278255360&(s<<24|s>>>8)}return i},clone:function(){var t=o.clone.call(this);return t._hash=this._hash.clone(),t}});function p(t,e,n){return t^e^n}function g(t,e,n){return t&e|~t&n}function v(t,e,n){return(t|~e)^n}function m(t,e,n){return t&n|e&~n}function y(t,e,n){return t^(e|~n)}function _(t,e){return t<<e|t>>>32-e}n.RIPEMD160=o._createHelper(f),n.HmacRIPEMD160=o._createHmacHelper(f)}(Math),t.RIPEMD160},t.exports=r(n(0))},function(t,e,n){var r;r=function(t){var e,n,r,i,o,a,s,u;return n=(e=t).lib,r=n.Base,i=n.WordArray,o=e.algo,a=o.SHA1,s=o.HMAC,u=o.PBKDF2=r.extend({cfg:r.extend({keySize:4,hasher:a,iterations:1}),init:function(t){this.cfg=this.cfg.extend(t)},compute:function(t,e){for(var n=this.cfg,r=s.create(n.hasher,t),o=i.create(),a=i.create([1]),u=o.words,c=a.words,l=n.keySize,h=n.iterations;u.length<l;){var d=r.update(e).finalize(a);r.reset();for(var f=d.words,p=f.length,g=d,v=1;v<h;v++){g=r.finalize(g),r.reset();for(var m=g.words,y=0;y<p;y++)f[y]^=m[y]}o.concat(d),c[0]++}return o.sigBytes=4*l,o}}),e.PBKDF2=function(t,e,n){return u.create(n).compute(t,e)},t.PBKDF2},t.exports=r(n(0),n(78),n(79))},function(t,e,n){var r;r=function(t){return t.mode.CFB=function(){var e=t.lib.BlockCipherMode.extend();function n(t,e,n,r){var i=this._iv;if(i){var o=i.slice(0);this._iv=void 0}else o=this._prevBlock;r.encryptBlock(o,0);for(var a=0;a<n;a++)t[e+a]^=o[a]}return e.Encryptor=e.extend({processBlock:function(t,e){var r=this._cipher,i=r.blockSize;n.call(this,t,e,i,r),this._prevBlock=t.slice(e,e+i)}}),e.Decryptor=e.extend({processBlock:function(t,e){var r=this._cipher,i=r.blockSize,o=t.slice(e,e+i);n.call(this,t,e,i,r),this._prevBlock=o}}),e}(),t.mode.CFB},t.exports=r(n(0),n(5))},function(t,e,n){var r;r=function(t){var e,n;return t.mode.CTR=(e=t.lib.BlockCipherMode.extend(),n=e.Encryptor=e.extend({processBlock:function(t,e){var n=this._cipher,r=n.blockSize,i=this._iv,o=this._counter;i&&(o=this._counter=i.slice(0),this._iv=void 0);var a=o.slice(0);n.encryptBlock(a,0),o[r-1]=o[r-1]+1|0;for(var s=0;s<r;s++)t[e+s]^=a[s]}}),e.Decryptor=n,e),t.mode.CTR},t.exports=r(n(0),n(5))},function(t,e,n){var r;r=function(t){return t.mode.CTRGladman=function(){var e=t.lib.BlockCipherMode.extend();function n(t){if(255==(t>>24&255)){var e=t>>16&255,n=t>>8&255,r=255&t;255===e?(e=0,255===n?(n=0,255===r?r=0:++r):++n):++e,t=0,t+=e<<16,t+=n<<8,t+=r}else t+=1<<24;return t}var r=e.Encryptor=e.extend({processBlock:function(t,e){var r=this._cipher,i=r.blockSize,o=this._iv,a=this._counter;o&&(a=this._counter=o.slice(0),this._iv=void 0),function(t){0===(t[0]=n(t[0]))&&(t[1]=n(t[1]))}(a);var s=a.slice(0);r.encryptBlock(s,0);for(var u=0;u<i;u++)t[e+u]^=s[u]}});return e.Decryptor=r,e}(),t.mode.CTRGladman},t.exports=r(n(0),n(5))},function(t,e,n){var r;r=function(t){var e,n;return t.mode.OFB=(e=t.lib.BlockCipherMode.extend(),n=e.Encryptor=e.extend({processBlock:function(t,e){var n=this._cipher,r=n.blockSize,i=this._iv,o=this._keystream;i&&(o=this._keystream=i.slice(0),this._iv=void 0),n.encryptBlock(o,0);for(var a=0;a<r;a++)t[e+a]^=o[a]}}),e.Decryptor=n,e),t.mode.OFB},t.exports=r(n(0),n(5))},function(t,e,n){var r;r=function(t){var e;return t.mode.ECB=((e=t.lib.BlockCipherMode.extend()).Encryptor=e.extend({processBlock:function(t,e){this._cipher.encryptBlock(t,e)}}),e.Decryptor=e.extend({processBlock:function(t,e){this._cipher.decryptBlock(t,e)}}),e),t.mode.ECB},t.exports=r(n(0),n(5))},function(t,e,n){var r;r=function(t){return t.pad.AnsiX923={pad:function(t,e){var n=t.sigBytes,r=4*e,i=r-n%r,o=n+i-1;t.clamp(),t.words[o>>>2]|=i<<24-o%4*8,t.sigBytes+=i},unpad:function(t){var e=255&t.words[t.sigBytes-1>>>2];t.sigBytes-=e}},t.pad.Ansix923},t.exports=r(n(0),n(5))},function(t,e,n){var r;r=function(t){return t.pad.Iso10126={pad:function(e,n){var r=4*n,i=r-e.sigBytes%r;e.concat(t.lib.WordArray.random(i-1)).concat(t.lib.WordArray.create([i<<24],1))},unpad:function(t){var e=255&t.words[t.sigBytes-1>>>2];t.sigBytes-=e}},t.pad.Iso10126},t.exports=r(n(0),n(5))},function(t,e,n){var r;r=function(t){return t.pad.Iso97971={pad:function(e,n){e.concat(t.lib.WordArray.create([2147483648],1)),t.pad.ZeroPadding.pad(e,n)},unpad:function(e){t.pad.ZeroPadding.unpad(e),e.sigBytes--}},t.pad.Iso97971},t.exports=r(n(0),n(5))},function(t,e,n){var r;r=function(t){return t.pad.ZeroPadding={pad:function(t,e){var n=4*e;t.clamp(),t.sigBytes+=n-(t.sigBytes%n||n)},unpad:function(t){for(var e=t.words,n=t.sigBytes-1;!(e[n>>>2]>>>24-n%4*8&255);)n--;t.sigBytes=n+1}},t.pad.ZeroPadding},t.exports=r(n(0),n(5))},function(t,e,n){var r;r=function(t){return t.pad.NoPadding={pad:function(){},unpad:function(){}},t.pad.NoPadding},t.exports=r(n(0),n(5))},function(t,e,n){var r;r=function(t){var e,n,r;return n=(e=t).lib.CipherParams,r=e.enc.Hex,e.format.Hex={stringify:function(t){return t.ciphertext.toString(r)},parse:function(t){var e=r.parse(t);return n.create({ciphertext:e})}},t.format.Hex},t.exports=r(n(0),n(5))},function(t,e,n){var r;r=function(t){return function(){var e=t,n=e.lib.BlockCipher,r=e.algo,i=[],o=[],a=[],s=[],u=[],c=[],l=[],h=[],d=[],f=[];!function(){for(var t=[],e=0;e<256;e++)t[e]=e<128?e<<1:e<<1^283;var n=0,r=0;for(e=0;e<256;e++){var p=r^r<<1^r<<2^r<<3^r<<4;p=p>>>8^255&p^99,i[n]=p,o[p]=n;var g=t[n],v=t[g],m=t[v],y=257*t[p]^16843008*p;a[n]=y<<24|y>>>8,s[n]=y<<16|y>>>16,u[n]=y<<8|y>>>24,c[n]=y;y=16843009*m^65537*v^257*g^16843008*n;l[p]=y<<24|y>>>8,h[p]=y<<16|y>>>16,d[p]=y<<8|y>>>24,f[p]=y,n?(n=g^t[t[t[m^g]]],r^=t[t[r]]):n=r=1}}();var p=[0,1,2,4,8,16,32,64,128,27,54],g=r.AES=n.extend({_doReset:function(){if(!this._nRounds||this._keyPriorReset!==this._key){for(var t=this._keyPriorReset=this._key,e=t.words,n=t.sigBytes/4,r=4*((this._nRounds=n+6)+1),o=this._keySchedule=[],a=0;a<r;a++)if(a<n)o[a]=e[a];else{var s=o[a-1];a%n?n>6&&a%n==4&&(s=i[s>>>24]<<24|i[s>>>16&255]<<16|i[s>>>8&255]<<8|i[255&s]):(s=i[(s=s<<8|s>>>24)>>>24]<<24|i[s>>>16&255]<<16|i[s>>>8&255]<<8|i[255&s],s^=p[a/n|0]<<24),o[a]=o[a-n]^s}for(var u=this._invKeySchedule=[],c=0;c<r;c++){a=r-c;if(c%4)s=o[a];else s=o[a-4];u[c]=c<4||a<=4?s:l[i[s>>>24]]^h[i[s>>>16&255]]^d[i[s>>>8&255]]^f[i[255&s]]}}},encryptBlock:function(t,e){this._doCryptBlock(t,e,this._keySchedule,a,s,u,c,i)},decryptBlock:function(t,e){var n=t[e+1];t[e+1]=t[e+3],t[e+3]=n,this._doCryptBlock(t,e,this._invKeySchedule,l,h,d,f,o);n=t[e+1];t[e+1]=t[e+3],t[e+3]=n},_doCryptBlock:function(t,e,n,r,i,o,a,s){for(var u=this._nRounds,c=t[e]^n[0],l=t[e+1]^n[1],h=t[e+2]^n[2],d=t[e+3]^n[3],f=4,p=1;p<u;p++){var g=r[c>>>24]^i[l>>>16&255]^o[h>>>8&255]^a[255&d]^n[f++],v=r[l>>>24]^i[h>>>16&255]^o[d>>>8&255]^a[255&c]^n[f++],m=r[h>>>24]^i[d>>>16&255]^o[c>>>8&255]^a[255&l]^n[f++],y=r[d>>>24]^i[c>>>16&255]^o[l>>>8&255]^a[255&h]^n[f++];c=g,l=v,h=m,d=y}g=(s[c>>>24]<<24|s[l>>>16&255]<<16|s[h>>>8&255]<<8|s[255&d])^n[f++],v=(s[l>>>24]<<24|s[h>>>16&255]<<16|s[d>>>8&255]<<8|s[255&c])^n[f++],m=(s[h>>>24]<<24|s[d>>>16&255]<<16|s[c>>>8&255]<<8|s[255&l])^n[f++],y=(s[d>>>24]<<24|s[c>>>16&255]<<16|s[l>>>8&255]<<8|s[255&h])^n[f++];t[e]=g,t[e+1]=v,t[e+2]=m,t[e+3]=y},keySize:8});e.AES=n._createHelper(g)}(),t.AES},t.exports=r(n(0),n(30),n(31),n(26),n(5))},function(t,e,n){var r;r=function(t){return function(){var e=t,n=e.lib,r=n.WordArray,i=n.BlockCipher,o=e.algo,a=[57,49,41,33,25,17,9,1,58,50,42,34,26,18,10,2,59,51,43,35,27,19,11,3,60,52,44,36,63,55,47,39,31,23,15,7,62,54,46,38,30,22,14,6,61,53,45,37,29,21,13,5,28,20,12,4],s=[14,17,11,24,1,5,3,28,15,6,21,10,23,19,12,4,26,8,16,7,27,20,13,2,41,52,31,37,47,55,30,40,51,45,33,48,44,49,39,56,34,53,46,42,50,36,29,32],u=[1,2,4,6,8,10,12,14,15,17,19,21,23,25,27,28],c=[{0:8421888,268435456:32768,536870912:8421378,805306368:2,1073741824:512,1342177280:8421890,1610612736:8389122,1879048192:8388608,2147483648:514,2415919104:8389120,2684354560:33280,2952790016:8421376,3221225472:32770,3489660928:8388610,3758096384:0,4026531840:33282,134217728:0,402653184:8421890,671088640:33282,939524096:32768,1207959552:8421888,1476395008:512,1744830464:8421378,2013265920:2,2281701376:8389120,2550136832:33280,2818572288:8421376,3087007744:8389122,3355443200:8388610,3623878656:32770,3892314112:514,4160749568:8388608,1:32768,268435457:2,536870913:8421888,805306369:8388608,1073741825:8421378,1342177281:33280,1610612737:512,1879048193:8389122,2147483649:8421890,2415919105:8421376,2684354561:8388610,2952790017:33282,3221225473:514,3489660929:8389120,3758096385:32770,4026531841:0,134217729:8421890,402653185:8421376,671088641:8388608,939524097:512,1207959553:32768,1476395009:8388610,1744830465:2,2013265921:33282,2281701377:32770,2550136833:8389122,2818572289:514,3087007745:8421888,3355443201:8389120,3623878657:0,3892314113:33280,4160749569:8421378},{0:1074282512,16777216:16384,33554432:524288,50331648:1074266128,67108864:1073741840,83886080:1074282496,100663296:1073758208,117440512:16,134217728:540672,150994944:1073758224,167772160:1073741824,184549376:540688,201326592:524304,218103808:0,234881024:16400,251658240:1074266112,8388608:1073758208,25165824:540688,41943040:16,58720256:1073758224,75497472:1074282512,92274688:1073741824,109051904:524288,125829120:1074266128,142606336:524304,159383552:0,176160768:16384,192937984:1074266112,209715200:1073741840,226492416:540672,243269632:1074282496,260046848:16400,268435456:0,285212672:1074266128,301989888:1073758224,318767104:1074282496,335544320:1074266112,352321536:16,369098752:540688,385875968:16384,402653184:16400,419430400:524288,436207616:524304,452984832:1073741840,469762048:540672,486539264:1073758208,503316480:1073741824,520093696:1074282512,276824064:540688,293601280:524288,310378496:1074266112,327155712:16384,343932928:1073758208,360710144:1074282512,377487360:16,394264576:1073741824,411041792:1074282496,427819008:1073741840,444596224:1073758224,461373440:524304,478150656:0,494927872:16400,511705088:1074266128,528482304:540672},{0:260,1048576:0,2097152:67109120,3145728:65796,4194304:65540,5242880:67108868,6291456:67174660,7340032:67174400,8388608:67108864,9437184:67174656,10485760:65792,11534336:67174404,12582912:67109124,13631488:65536,14680064:4,15728640:256,524288:67174656,1572864:67174404,2621440:0,3670016:67109120,4718592:67108868,5767168:65536,6815744:65540,7864320:260,8912896:4,9961472:256,11010048:67174400,12058624:65796,13107200:65792,14155776:67109124,15204352:67174660,16252928:67108864,16777216:67174656,17825792:65540,18874368:65536,19922944:67109120,20971520:256,22020096:67174660,23068672:67108868,24117248:0,25165824:67109124,26214400:67108864,27262976:4,28311552:65792,29360128:67174400,30408704:260,31457280:65796,32505856:67174404,17301504:67108864,18350080:260,19398656:67174656,20447232:0,21495808:65540,22544384:67109120,23592960:256,24641536:67174404,25690112:65536,26738688:67174660,27787264:65796,28835840:67108868,29884416:67109124,30932992:67174400,31981568:4,33030144:65792},{0:2151682048,65536:2147487808,131072:4198464,196608:2151677952,262144:0,327680:4198400,393216:2147483712,458752:4194368,524288:2147483648,589824:4194304,655360:64,720896:2147487744,786432:2151678016,851968:4160,917504:4096,983040:2151682112,32768:2147487808,98304:64,163840:2151678016,229376:2147487744,294912:4198400,360448:2151682112,425984:0,491520:2151677952,557056:4096,622592:2151682048,688128:4194304,753664:4160,819200:2147483648,884736:4194368,950272:4198464,1015808:2147483712,1048576:4194368,1114112:4198400,1179648:2147483712,1245184:0,1310720:4160,1376256:2151678016,1441792:2151682048,1507328:2147487808,1572864:2151682112,1638400:2147483648,1703936:2151677952,1769472:4198464,1835008:2147487744,1900544:4194304,1966080:64,2031616:4096,1081344:2151677952,1146880:2151682112,1212416:0,1277952:4198400,1343488:4194368,1409024:2147483648,1474560:2147487808,1540096:64,1605632:2147483712,1671168:4096,1736704:2147487744,1802240:2151678016,1867776:4160,1933312:2151682048,1998848:4194304,2064384:4198464},{0:128,4096:17039360,8192:262144,12288:536870912,16384:537133184,20480:16777344,24576:553648256,28672:262272,32768:16777216,36864:537133056,40960:536871040,45056:553910400,49152:553910272,53248:0,57344:17039488,61440:553648128,2048:17039488,6144:553648256,10240:128,14336:17039360,18432:262144,22528:537133184,26624:553910272,30720:536870912,34816:537133056,38912:0,43008:553910400,47104:16777344,51200:536871040,55296:553648128,59392:16777216,63488:262272,65536:262144,69632:128,73728:536870912,77824:553648256,81920:16777344,86016:553910272,90112:537133184,94208:16777216,98304:553910400,102400:553648128,106496:17039360,110592:537133056,114688:262272,118784:536871040,122880:0,126976:17039488,67584:553648256,71680:16777216,75776:17039360,79872:537133184,83968:536870912,88064:17039488,92160:128,96256:553910272,100352:262272,104448:553910400,108544:0,112640:553648128,116736:16777344,120832:262144,124928:537133056,129024:536871040},{0:268435464,256:8192,512:270532608,768:270540808,1024:268443648,1280:2097152,1536:2097160,1792:268435456,2048:0,2304:268443656,2560:2105344,2816:8,3072:270532616,3328:2105352,3584:8200,3840:270540800,128:270532608,384:270540808,640:8,896:2097152,1152:2105352,1408:268435464,1664:268443648,1920:8200,2176:2097160,2432:8192,2688:268443656,2944:270532616,3200:0,3456:270540800,3712:2105344,3968:268435456,4096:268443648,4352:270532616,4608:270540808,4864:8200,5120:2097152,5376:268435456,5632:268435464,5888:2105344,6144:2105352,6400:0,6656:8,6912:270532608,7168:8192,7424:268443656,7680:270540800,7936:2097160,4224:8,4480:2105344,4736:2097152,4992:268435464,5248:268443648,5504:8200,5760:270540808,6016:270532608,6272:270540800,6528:270532616,6784:8192,7040:2105352,7296:2097160,7552:0,7808:268435456,8064:268443656},{0:1048576,16:33555457,32:1024,48:1049601,64:34604033,80:0,96:1,112:34603009,128:33555456,144:1048577,160:33554433,176:34604032,192:34603008,208:1025,224:1049600,240:33554432,8:34603009,24:0,40:33555457,56:34604032,72:1048576,88:33554433,104:33554432,120:1025,136:1049601,152:33555456,168:34603008,184:1048577,200:1024,216:34604033,232:1,248:1049600,256:33554432,272:1048576,288:33555457,304:34603009,320:1048577,336:33555456,352:34604032,368:1049601,384:1025,400:34604033,416:1049600,432:1,448:0,464:34603008,480:33554433,496:1024,264:1049600,280:33555457,296:34603009,312:1,328:33554432,344:1048576,360:1025,376:34604032,392:33554433,408:34603008,424:0,440:34604033,456:1049601,472:1024,488:33555456,504:1048577},{0:134219808,1:131072,2:134217728,3:32,4:131104,5:134350880,6:134350848,7:2048,8:134348800,9:134219776,10:133120,11:134348832,12:2080,13:0,14:134217760,15:133152,2147483648:2048,2147483649:134350880,2147483650:134219808,2147483651:134217728,2147483652:134348800,2147483653:133120,2147483654:133152,2147483655:32,2147483656:134217760,2147483657:2080,2147483658:131104,2147483659:134350848,2147483660:0,2147483661:134348832,2147483662:134219776,2147483663:131072,16:133152,17:134350848,18:32,19:2048,20:134219776,21:134217760,22:134348832,23:131072,24:0,25:131104,26:134348800,27:134219808,28:134350880,29:133120,30:2080,31:134217728,2147483664:131072,2147483665:2048,2147483666:134348832,2147483667:133152,2147483668:32,2147483669:134348800,2147483670:134217728,2147483671:134219808,2147483672:134350880,2147483673:134217760,2147483674:134219776,2147483675:0,2147483676:133120,2147483677:2080,2147483678:131104,2147483679:134350848}],l=[4160749569,528482304,33030144,2064384,129024,8064,504,2147483679],h=o.DES=i.extend({_doReset:function(){for(var t=this._key.words,e=[],n=0;n<56;n++){var r=a[n]-1;e[n]=t[r>>>5]>>>31-r%32&1}for(var i=this._subKeys=[],o=0;o<16;o++){var c=i[o]=[],l=u[o];for(n=0;n<24;n++)c[n/6|0]|=e[(s[n]-1+l)%28]<<31-n%6,c[4+(n/6|0)]|=e[28+(s[n+24]-1+l)%28]<<31-n%6;c[0]=c[0]<<1|c[0]>>>31;for(n=1;n<7;n++)c[n]=c[n]>>>4*(n-1)+3;c[7]=c[7]<<5|c[7]>>>27}var h=this._invSubKeys=[];for(n=0;n<16;n++)h[n]=i[15-n]},encryptBlock:function(t,e){this._doCryptBlock(t,e,this._subKeys)},decryptBlock:function(t,e){this._doCryptBlock(t,e,this._invSubKeys)},_doCryptBlock:function(t,e,n){this._lBlock=t[e],this._rBlock=t[e+1],d.call(this,4,252645135),d.call(this,16,65535),f.call(this,2,858993459),f.call(this,8,16711935),d.call(this,1,1431655765);for(var r=0;r<16;r++){for(var i=n[r],o=this._lBlock,a=this._rBlock,s=0,u=0;u<8;u++)s|=c[u][((a^i[u])&l[u])>>>0];this._lBlock=a,this._rBlock=o^s}var h=this._lBlock;this._lBlock=this._rBlock,this._rBlock=h,d.call(this,1,1431655765),f.call(this,8,16711935),f.call(this,2,858993459),d.call(this,16,65535),d.call(this,4,252645135),t[e]=this._lBlock,t[e+1]=this._rBlock},keySize:2,ivSize:2,blockSize:2});function d(t,e){var n=(this._lBlock>>>t^this._rBlock)&e;this._rBlock^=n,this._lBlock^=n<<t}function f(t,e){var n=(this._rBlock>>>t^this._lBlock)&e;this._lBlock^=n,this._rBlock^=n<<t}e.DES=i._createHelper(h);var p=o.TripleDES=i.extend({_doReset:function(){var t=this._key.words;this._des1=h.createEncryptor(r.create(t.slice(0,2))),this._des2=h.createEncryptor(r.create(t.slice(2,4))),this._des3=h.createEncryptor(r.create(t.slice(4,6)))},encryptBlock:function(t,e){this._des1.encryptBlock(t,e),this._des2.decryptBlock(t,e),this._des3.encryptBlock(t,e)},decryptBlock:function(t,e){this._des3.decryptBlock(t,e),this._des2.encryptBlock(t,e),this._des1.decryptBlock(t,e)},keySize:6,ivSize:2,blockSize:2});e.TripleDES=i._createHelper(p)}(),t.TripleDES},t.exports=r(n(0),n(30),n(31),n(26),n(5))},function(t,e,n){var r;r=function(t){return function(){var e=t,n=e.lib.StreamCipher,r=e.algo,i=r.RC4=n.extend({_doReset:function(){for(var t=this._key,e=t.words,n=t.sigBytes,r=this._S=[],i=0;i<256;i++)r[i]=i;i=0;for(var o=0;i<256;i++){var a=i%n,s=e[a>>>2]>>>24-a%4*8&255;o=(o+r[i]+s)%256;var u=r[i];r[i]=r[o],r[o]=u}this._i=this._j=0},_doProcessBlock:function(t,e){t[e]^=o.call(this)},keySize:8,ivSize:0});function o(){for(var t=this._S,e=this._i,n=this._j,r=0,i=0;i<4;i++){n=(n+t[e=(e+1)%256])%256;var o=t[e];t[e]=t[n],t[n]=o,r|=t[(t[e]+t[n])%256]<<24-8*i}return this._i=e,this._j=n,r}e.RC4=n._createHelper(i);var a=r.RC4Drop=i.extend({cfg:i.cfg.extend({drop:192}),_doReset:function(){i._doReset.call(this);for(var t=this.cfg.drop;t>0;t--)o.call(this)}});e.RC4Drop=n._createHelper(a)}(),t.RC4},t.exports=r(n(0),n(30),n(31),n(26),n(5))},function(t,e,n){var r;r=function(t){return function(){var e=t,n=e.lib.StreamCipher,r=[],i=[],o=[],a=e.algo.Rabbit=n.extend({_doReset:function(){for(var t=this._key.words,e=this.cfg.iv,n=0;n<4;n++)t[n]=16711935&(t[n]<<8|t[n]>>>24)|4278255360&(t[n]<<24|t[n]>>>8);var r=this._X=[t[0],t[3]<<16|t[2]>>>16,t[1],t[0]<<16|t[3]>>>16,t[2],t[1]<<16|t[0]>>>16,t[3],t[2]<<16|t[1]>>>16],i=this._C=[t[2]<<16|t[2]>>>16,4294901760&t[0]|65535&t[1],t[3]<<16|t[3]>>>16,4294901760&t[1]|65535&t[2],t[0]<<16|t[0]>>>16,4294901760&t[2]|65535&t[3],t[1]<<16|t[1]>>>16,4294901760&t[3]|65535&t[0]];this._b=0;for(n=0;n<4;n++)s.call(this);for(n=0;n<8;n++)i[n]^=r[n+4&7];if(e){var o=e.words,a=o[0],u=o[1],c=16711935&(a<<8|a>>>24)|4278255360&(a<<24|a>>>8),l=16711935&(u<<8|u>>>24)|4278255360&(u<<24|u>>>8),h=c>>>16|4294901760&l,d=l<<16|65535&c;i[0]^=c,i[1]^=h,i[2]^=l,i[3]^=d,i[4]^=c,i[5]^=h,i[6]^=l,i[7]^=d;for(n=0;n<4;n++)s.call(this)}},_doProcessBlock:function(t,e){var n=this._X;s.call(this),r[0]=n[0]^n[5]>>>16^n[3]<<16,r[1]=n[2]^n[7]>>>16^n[5]<<16,r[2]=n[4]^n[1]>>>16^n[7]<<16,r[3]=n[6]^n[3]>>>16^n[1]<<16;for(var i=0;i<4;i++)r[i]=16711935&(r[i]<<8|r[i]>>>24)|4278255360&(r[i]<<24|r[i]>>>8),t[e+i]^=r[i]},blockSize:4,ivSize:2});function s(){for(var t=this._X,e=this._C,n=0;n<8;n++)i[n]=e[n];e[0]=e[0]+1295307597+this._b|0,e[1]=e[1]+3545052371+(e[0]>>>0<i[0]>>>0?1:0)|0,e[2]=e[2]+886263092+(e[1]>>>0<i[1]>>>0?1:0)|0,e[3]=e[3]+1295307597+(e[2]>>>0<i[2]>>>0?1:0)|0,e[4]=e[4]+3545052371+(e[3]>>>0<i[3]>>>0?1:0)|0,e[5]=e[5]+886263092+(e[4]>>>0<i[4]>>>0?1:0)|0,e[6]=e[6]+1295307597+(e[5]>>>0<i[5]>>>0?1:0)|0,e[7]=e[7]+3545052371+(e[6]>>>0<i[6]>>>0?1:0)|0,this._b=e[7]>>>0<i[7]>>>0?1:0;for(n=0;n<8;n++){var r=t[n]+e[n],a=65535&r,s=r>>>16,u=((a*a>>>17)+a*s>>>15)+s*s,c=((4294901760&r)*r|0)+((65535&r)*r|0);o[n]=u^c}t[0]=o[0]+(o[7]<<16|o[7]>>>16)+(o[6]<<16|o[6]>>>16)|0,t[1]=o[1]+(o[0]<<8|o[0]>>>24)+o[7]|0,t[2]=o[2]+(o[1]<<16|o[1]>>>16)+(o[0]<<16|o[0]>>>16)|0,t[3]=o[3]+(o[2]<<8|o[2]>>>24)+o[1]|0,t[4]=o[4]+(o[3]<<16|o[3]>>>16)+(o[2]<<16|o[2]>>>16)|0,t[5]=o[5]+(o[4]<<8|o[4]>>>24)+o[3]|0,t[6]=o[6]+(o[5]<<16|o[5]>>>16)+(o[4]<<16|o[4]>>>16)|0,t[7]=o[7]+(o[6]<<8|o[6]>>>24)+o[5]|0}e.Rabbit=n._createHelper(a)}(),t.Rabbit},t.exports=r(n(0),n(30),n(31),n(26),n(5))},function(t,e,n){var r;r=function(t){return function(){var e=t,n=e.lib.StreamCipher,r=[],i=[],o=[],a=e.algo.RabbitLegacy=n.extend({_doReset:function(){var t=this._key.words,e=this.cfg.iv,n=this._X=[t[0],t[3]<<16|t[2]>>>16,t[1],t[0]<<16|t[3]>>>16,t[2],t[1]<<16|t[0]>>>16,t[3],t[2]<<16|t[1]>>>16],r=this._C=[t[2]<<16|t[2]>>>16,4294901760&t[0]|65535&t[1],t[3]<<16|t[3]>>>16,4294901760&t[1]|65535&t[2],t[0]<<16|t[0]>>>16,4294901760&t[2]|65535&t[3],t[1]<<16|t[1]>>>16,4294901760&t[3]|65535&t[0]];this._b=0;for(var i=0;i<4;i++)s.call(this);for(i=0;i<8;i++)r[i]^=n[i+4&7];if(e){var o=e.words,a=o[0],u=o[1],c=16711935&(a<<8|a>>>24)|4278255360&(a<<24|a>>>8),l=16711935&(u<<8|u>>>24)|4278255360&(u<<24|u>>>8),h=c>>>16|4294901760&l,d=l<<16|65535&c;r[0]^=c,r[1]^=h,r[2]^=l,r[3]^=d,r[4]^=c,r[5]^=h,r[6]^=l,r[7]^=d;for(i=0;i<4;i++)s.call(this)}},_doProcessBlock:function(t,e){var n=this._X;s.call(this),r[0]=n[0]^n[5]>>>16^n[3]<<16,r[1]=n[2]^n[7]>>>16^n[5]<<16,r[2]=n[4]^n[1]>>>16^n[7]<<16,r[3]=n[6]^n[3]>>>16^n[1]<<16;for(var i=0;i<4;i++)r[i]=16711935&(r[i]<<8|r[i]>>>24)|4278255360&(r[i]<<24|r[i]>>>8),t[e+i]^=r[i]},blockSize:4,ivSize:2});function s(){for(var t=this._X,e=this._C,n=0;n<8;n++)i[n]=e[n];e[0]=e[0]+1295307597+this._b|0,e[1]=e[1]+3545052371+(e[0]>>>0<i[0]>>>0?1:0)|0,e[2]=e[2]+886263092+(e[1]>>>0<i[1]>>>0?1:0)|0,e[3]=e[3]+1295307597+(e[2]>>>0<i[2]>>>0?1:0)|0,e[4]=e[4]+3545052371+(e[3]>>>0<i[3]>>>0?1:0)|0,e[5]=e[5]+886263092+(e[4]>>>0<i[4]>>>0?1:0)|0,e[6]=e[6]+1295307597+(e[5]>>>0<i[5]>>>0?1:0)|0,e[7]=e[7]+3545052371+(e[6]>>>0<i[6]>>>0?1:0)|0,this._b=e[7]>>>0<i[7]>>>0?1:0;for(n=0;n<8;n++){var r=t[n]+e[n],a=65535&r,s=r>>>16,u=((a*a>>>17)+a*s>>>15)+s*s,c=((4294901760&r)*r|0)+((65535&r)*r|0);o[n]=u^c}t[0]=o[0]+(o[7]<<16|o[7]>>>16)+(o[6]<<16|o[6]>>>16)|0,t[1]=o[1]+(o[0]<<8|o[0]>>>24)+o[7]|0,t[2]=o[2]+(o[1]<<16|o[1]>>>16)+(o[0]<<16|o[0]>>>16)|0,t[3]=o[3]+(o[2]<<8|o[2]>>>24)+o[1]|0,t[4]=o[4]+(o[3]<<16|o[3]>>>16)+(o[2]<<16|o[2]>>>16)|0,t[5]=o[5]+(o[4]<<8|o[4]>>>24)+o[3]|0,t[6]=o[6]+(o[5]<<16|o[5]>>>16)+(o[4]<<16|o[4]>>>16)|0,t[7]=o[7]+(o[6]<<8|o[6]>>>24)+o[5]|0}e.RabbitLegacy=n._createHelper(a)}(),t.RabbitLegacy},t.exports=r(n(0),n(30),n(31),n(26),n(5))},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r,i=n(25),o=(r=i)&&r.__esModule?r:{default:r},a=n(14);var s=0,u={send:function(t,e){return new o.default(function(n){var r=s++;a.ipcRenderer.send("async:"+t,e,r),a.ipcRenderer.on("async:"+t+"-reply",function e(i,o,s){s===r&&(a.ipcRenderer.removeListener("async:"+t+"-reply",e),n(o.result))})})},sendSync:function(t,e){return a.ipcRenderer.sendSync("sync:"+t,e).result}};e.default=u},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.localizerListener=void 0;var r,i=n(80),o=(r=i)&&r.__esModule?r:{default:r},a=n(18);var s=a.preferences.get("general.locale"),u=[],c=e.localizerListener=function(t){s=a.preferences.get("general.locale");var e=u,n=Array.isArray(e),r=0;for(e=n?e:(0,o.default)(e);;){var i;if(n){if(r>=e.length)break;i=e[r++]}else{if((r=e.next()).done)break;i=r.value}i(t)}};a.localizer.on("change:locale",c),e.default={created:function(){var t=this;this._localeListener=function(e){t.locale=e&&e.newvalue},u.push(this._localeListener)},destroyed:function(){var t=u.indexOf(this._localeListener);t>-1&&u.splice(t,1)},data:function(){return{locale:s}},computed:{l10n:function(){var t={T:function(t){for(var e=arguments.length,n=Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];return a.localizer.localize.apply(a.localizer,[t].concat(n))}};return t.locale=this.locale,t}}}},function(t,e,n){n(50),n(41),t.exports=n(256)},function(t,e,n){var r=n(15),i=n(72);t.exports=n(3).getIterator=function(t){var e=i(t);if("function"!=typeof e)throw TypeError(t+" is not iterable!");return r(e.call(t))}},function(t,e,n){"use strict";(function(t){var r,i,o,a,s=l(n(35)),u=l(n(33)),c=l(n(24));function l(t){return t&&t.__esModule?t:{default:t}}"undefined"!=typeof self&&self,a=function(t){return function(t){var e={};function n(r){if(e[r])return e[r].exports;var i=e[r]={i:r,l:!1,exports:{}};return t[r].call(i.exports,i,i.exports,n),i.l=!0,i.exports}return n.m=t,n.c=e,n.d=function(t,e,r){n.o(t,e)||(0,u.default)(t,e,{configurable:!1,enumerable:!0,get:r})},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="/",n(n.s=1)}([function(e,n){e.exports=t},function(t,e,n){Object.defineProperty(e,"__esModule",{value:!0});n(2),n(3)},function(t,e,n){var r=n(0),i=n.n(r);i.a.directive("f10-effect",{bind:function(t,e,n,r){var o=e.value;o.hover&&(n.context._f10mouseoverhandler=function(t){n.context[o.hover]=!0},n.context._f10mouseleavehandler=function(){n.context[o.hover]=!1},t.addEventListener("mouseover",n.context._f10mouseoverhandler),t.addEventListener("mouseleave",n.context._f10mouseleavehandler)),o.active&&(n.context._f10mousedownhandler=function(t){n.context[o.active]=!0},i.a._f10mousedownhandlers||(i.a._f10mousedownhandlers={}),i.a._f10mousedownhandlers[n.context._uid]?n.context._f10effects.push(o):(n.context._f10effects=[],n.context._f10effects.push(o),i.a._f10mousedownhandlers[n.context._uid]=function(){for(var t=0,e=n.context._f10effects.length;t<e;t++){var r=n.context._f10effects[t];if(n.context[r.active])for(var i in r)n.context[r[i]]=!1}}),i.a.f10mouseupHandler||(i.a.f10mouseupHandler=function(){for(var t in i.a._f10mousedownhandlers)i.a._f10mousedownhandlers[t]()},document.addEventListener("mouseup",i.a.f10mouseupHandler)),t.addEventListener("mousedown",n.context._f10mousedownhandler))},unbind:function(t,e,n){n.context._f10mouseoverhandler&&t.removeEventListener("mouseover",n.context._f10mouseoverhandler),n.context._f10mouseleavehandler&&t.removeEventListener("mouseleave",n.context._f10mouseleavehandler),n.context._f10mousedownhandler&&t.removeEventListener("mousedown",n.context._f10mousedownhandler),i.a._f10mousedownhandlers[n.context._uid]&&delete i.a._f10mousedownhandlers[n.context._uid]}})},function(t,e,n){var r=n(0);n.n(r).a.directive("tip",{bind:function(t,e){var n={text:"",delay:0,position:"up"},r=e.value,i=e.modifiers;i.left?n.position="left":i.right?n.position="right":i.down&&(n.position="down"),n.target=t,"string"==typeof r?n.text=r:n=(0,s.default)(n,r);var o=null,a=null;t.setAttribute("data-tips",n.text),t.addEventListener("mouseover",function(){o=setTimeout(function(){n.text=t.getAttribute("data-tips"),a=function(t){var e=t.target,n=t.position,r=t.text,i=t.offset,o=void 0===i?5:i,a=document.querySelector(".f10__tip"),s=document.querySelector(".f10__tip__arrow");if(!a){var u=document.createElement("div");u.className="f10__tip",a=u;var c=document.createElement("div");c.className="f10__tip__arrow",s=c,document.body.appendChild(a)}var l=a.childNodes[0];l&&3===l.nodeType&&a.removeChild(l);a.appendChild(document.createTextNode(r)),a.appendChild(s),a.style.visibility="visible";var h=e.getBoundingClientRect(),d=0,f=0,p=0,g=0,v=a.getBoundingClientRect();"down"===n?(s.className="f10__tip__arrow down",f=h.bottom+o+4,d=h.left+h.width/2-v.width/2,g=h.bottom+o,p=h.left+h.width/2-4):"up"===n?(s.className="f10__tip__arrow up",f=h.top-4-o-v.height,d=h.left+h.width/2-v.width/2,g=h.top-4-o,p=h.left+h.width/2-4):"left"===n?(s.className="f10__tip__arrow left",f=h.top+h.height/2-v.height/2,d=h.left-4-o-v.width,g=h.top+h.height/2-4,p=h.left-o-4):"right"===n&&(s.className="f10__tip__arrow right",f=h.top+h.height/2-v.height/2,d=h.right+4+o,p=h.right+o,g=h.top+h.height/2-4);return s.style.top=g+"px",s.style.left=p+"px",a.style.top=f+"px",a.style.left=d+"px",a}(n)},n.delay)}),t.addEventListener("mouseleave",function(){o&&(clearTimeout(o),a&&(a.style.visibility="hidden"))})},update:function(t,e){var n=e.value;"string"==typeof n?t.setAttribute("data-tips",n):t.setAttribute("data-tips",n.text)}})}])},"object"===(0,c.default)(e)&&"object"===(0,c.default)(t)?t.exports=a(n(47)):(i=[n(47)],void 0===(o="function"==typeof(r=a)?r.apply(e,i):r)||(t.exports=o))}).call(e,n(32)(t))},function(t,e,n){n(259);var r=n(3).Object;t.exports=function(t,e,n){return r.defineProperty(t,e,n)}},function(t,e,n){var r=n(6);r(r.S+r.F*!n(13),"Object",{defineProperty:n(11).f})},function(t,e,n){"use strict";(function(t){var r,i,o,a,s=c(n(33)),u=c(n(24));function c(t){return t&&t.__esModule?t:{default:t}}"undefined"!=typeof self&&self,a=function(){return function(t){var e={};function n(r){if(e[r])return e[r].exports;var i=e[r]={i:r,l:!1,exports:{}};return t[r].call(i.exports,i,i.exports,n),i.l=!0,i.exports}return n.m=t,n.c=e,n.d=function(t,e,r){n.o(t,e)||(0,s.default)(t,e,{configurable:!1,enumerable:!0,get:r})},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="/",n(n.s=1)}([function(t,e,n){e.a={name:"xmDropdownItem",props:{type:{type:String,default:"basic",validator:function(t){return["basic","recent"].indexOf(t)>-1}},index:null,hotkey:String,title:String},data:function(){return{hover:!1,selected:!1,multiSelected:!1}},methods:{select:function(){this.$emit("item:click",this.index),this.$parent.$emit("item:click",this.index)},getHoverIndex:function(){return Number(this.$el.getAttribute("data-hover-index"))}},mounted:function(){var t=this;this.$parent.$on("update:selectId",function(e){t.multiSelected=!1,t.index===e?t.selected=!0:t.selected=!1}),this.$parent.$on("multi:selectId",function(e){t.selected=!1,e.indexOf(t.index)>-1?t.multiSelected=!0:t.multiSelected=!1}),this.$parent.$on("update:hoverId",function(e){t.getHoverIndex()===e?t.hover=!0:t.hover=!1}),this.$el.addEventListener("mouseleave",function(){t.hover=!1}),this.$el.addEventListener("mouseover",function(e){t.$parent.blockMouseOver||t.hover||(t.$parent.currentHoverIndex=t.getHoverIndex(),t.$parent.$emit("update:hoverId",t.getHoverIndex()))})}}},function(t,e,n){Object.defineProperty(e,"__esModule",{value:!0});var r=n(2),i=n(4);n.d(e,"XMDropdown",function(){return r.a}),n.d(e,"XMDropdownItem",function(){return i.a}),r.a.install=function(t){t.component(r.a.name,r.a)},i.a.install=function(t){t.component(i.a.name,i.a)}},function(t,e,n){var r=n(3);e.a={name:"xmDropdown",data:function(){return{opened:!1,childLength:0,itemHeight:28,inputHeight:24,padding:6,positionStyle:{},hasRecent:!1,currentItem:null,recentList:[]}},props:{value:{type:Number|Array,default:0},width:{type:Number,default:160},maxLine:{type:Number,default:11},disable:{type:Boolean,default:!1},placeholder:{type:String,default:"..."},async:Boolean,multi:Boolean,recent:{type:Array,default:function(){return[]}},blockClose:{type:Boolean,default:!0},topOffset:{type:Number,default:0},hotkey:{type:Boolean,default:!1},hotkeyInterval:{type:Number,default:1e3},title:String},computed:{maxHeight:function(){if(this.recent.length>0){var t=2*this.padding+2;return this.maxLine*this.itemHeight+2*this.padding+t+"px"}return this.maxLine*this.itemHeight+2*this.padding+"px"},selectValue:function(){return Array.isArray(this.value)?this.value[0]||0:this.value}},mounted:function(){var t=this;(this.currentItem=this.placeholder,this.$on("item:click",function(e){t.$emit("input",e),t.$emit("change",e)}),this.async)&&new MutationObserver(function(t){}).observe(this.$refs.list,{childList:!0,subtree:!0});var e=this;this.listener=function(){e.closeDropdown()},this.keydownListener=function(e){e.preventDefault(),e.stopPropagation(),e.cancelBubble=!0,40===e.keyCode?t.updateHover(t.currentHoverIndex+1):38===e.keyCode&&t.updateHover(t.currentHoverIndex-1)},this.keyupListener=function(e){if(e.preventDefault(),e.stopPropagation(),e.cancelBubble=!0,13===e.keyCode){for(var n=0,r=t.$children.length;n<r;n++)if(t.$children[n].$el.getAttribute("data-hover-index")===t.currentHoverIndex.toString()){var i=t.$children[n].index;t.$emit("input",i),t.$emit("change",i);break}t.closeDropdown()}},this.mousewheelListener=function(e){t.blockMouseOver=!1},this.mousemoveListener=function(){t.blockMouseOver&&(t.blockMouseOver=!1)},this.kyedownListener=function(e){27===e.keyCode&&t.closeDropdown()},this.$refs.list.addEventListener("mousewheel",this.mousewheelListener),this.$refs.list.addEventListener("keyup",this.keyupListener),this.$refs.list.addEventListener("mousemove",this.mousemoveListener),this.$refs.list.addEventListener("keydown",this.kyedownListener),this.hotkey&&(this.hotkeyIns=new r.a(this,this.$refs.list,this.hotkeyInterval))},beforeDestroy:function(){this.$refs.list.removeEventListener("mousewheel",this.mousewheelListener),this.$refs.list.removeEventListener("keyup",this.keyupListener),this.$refs.list.removeEventListener("mousemove",this.mousemoveListener),this.$refs.list.removeEventListener("keydown",this.kyedownListener)},methods:{clickDropdown:function(t){this.$refs.list.contains(t.target)||t.target===this.$refs.mask||(this.$emit("click",t),this.opened=!0,this.openList(t),this.$emit("open"))},closeDropdown:function(){this.opened=!1,this.$refs.list.style.top="-1px",document.removeEventListener("click",this.listener,!0),this.$refs.list.removeEventListener("keydown",this.keydownListener),this.positionStyle={},this.$emit("close"),this.$emit("update:hoverId",-1),this.hotkeyIns&&this.hotkeyIns.destroyed()},openList:function(t){var e=this;document.addEventListener("click",this.listener,!0),this.$refs.list.addEventListener("keydown",this.keydownListener),Array.isArray(this.value)?this.$emit("multi:selectId",this.value):this.$emit("update:selectId",this.value),this.positionStyle=this.calculatePosition(),this.$nextTick(function(){var n=e.selectValue,r=e.recent.indexOf(n);r>-1&&(n=r),e.$refs.list.scrollTop=(n-Math.floor(e.maxLine/2))*e.itemHeight,e.checkHover(t);for(var i=e.$refs.list.querySelectorAll(".f10__dropdown-item"),o=0,a=i.length;o<a;o++)i[o].setAttribute("data-hover-index",o);e.$refs.list.focus(),e.hotkey&&e.hotkeyIns.startListen(e.updateHover)})},updateHover:function(t){t===this.$children.length?t=0:-1===t&&(t=this.$children.length-1),this.$emit("update:hoverId",t),this.blockMouseOver=!0,this.currentHoverIndex=t;var e=this.$refs.list.querySelector('.f10__dropdown-item[data-hover-index="'+this.currentHoverIndex+'"]').getBoundingClientRect(),n=this.$refs.list.getBoundingClientRect(),r=e.bottom+this.padding-n.bottom,i=e.top-this.padding-n.top;r>0?this.$refs.list.scrollTop=this.$refs.list.scrollTop+r:i<0&&(this.$refs.list.scrollTop=this.$refs.list.scrollTop+i)},checkHover:function(t){this.currentHoverIndex=0;for(var e=t.clientX,n=t.clientY,r=this.$children,i=0,o=r.length;i<o;i++){var a=r[i].$el.getBoundingClientRect();if(a.top<n&&a.bottom>n&&a.left<e&&a.right>e){r[i].hover=!0,this.currentHoverIndex=Number(r[i].$el.getAttribute("data-hover-index"));break}}},calculatePosition:function(){var t=this.recent.length>0,e=0,n=this.$el.getBoundingClientRect(),r={top:n.top,left:n.left-16,width:n.width+16},i=this.selectValue,o=this.recent.indexOf(i);o>-1?i=o:t&&(e=this.itemHeight*this.recent.length+2*this.padding+2);var a=this.$children.length,s=a>this.maxLine?this.maxLine:a,u=0,c=Math.floor(s/2);c>i?u=i*this.itemHeight+(this.itemHeight-this.inputHeight)/2+this.padding+e:c<=i&&a-i>c?u=c*this.itemHeight+(this.itemHeight-this.inputHeight)/2+this.padding+e:c>=a-i&&(u=(s-(a-i))*this.itemHeight+(this.itemHeight-this.inputHeight)/2+this.padding+e);var l=s*this.itemHeight+2*this.padding-u+n.top;t&&(l=l+2*this.padding+2);var h=n.top-u,d=document.documentElement.clientHeight,f=r.top,p=l+12-d;p>0&&(f-=p);var g=h-12-this.topOffset;return g<0&&(f-=g),{maxHeight:this.maxHeight,top:f-1+"px",width:r.width+"px",left:r.left-1+"px",transform:"translateY(-"+u+"px)"}}},render:function(t,e){var n=this;return t("div",{attrs:{title:this.title},class:{f10__dropdown:!0,f10__dropdown__disale:this.disable},style:{width:this.width+"px"}},[t("div",{class:"f10__dropdown__wrapper",on:{click:this.clickDropdown},ref:"dropdown"},[t("div",{class:"f10__dropdown__current",ref:"current"},[this.$slots.default]),t("div",{class:"f10__dropdown__mask",ref:"mask",directives:[{name:"show",value:this.opened&&this.blockClose}]}),t("div",{class:{"f10__dropdown-list":!0,active:this.opened},style:this.positionStyle,ref:"list",attrs:{tabindex:"0"}},[function(){if(n.recent&&n.$slots.dropdown&&n.recent.length>0){var e=n.recent.map(function(e){return function(t,e){function n(t){var r=t.children&&t.children.map(function(t){return n(t)}),i=e(t.tag,t.data,r);return i.text=t.text,i.isComment=t.isComment,i.componentOptions=t.componentOptions,i.elm=t.elm,i.context=t.context,i.ns=t.ns,i.isStatic=t.isStatic,i.key=t.key,i}return Array.isArray(t)?t.map(function(t){return n(t)}):n(t)}(n.$slots.dropdown[e],t)});return t("div",{class:"f10__dropdown__recent"},[e])}return null}(),n.$slots.dropdown?t("div",{class:"f10__dropdown__normal"},[n.$slots.dropdown]):null])])])}}},function(t,e,n){var r=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),(0,s.default)(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}();var i=function(){function t(e,n,r){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.vm=e,this.getkey=this.genKey(r),this.dom=n}return r(t,[{key:"genKey",value:function(t){var e="",n=null;return function(r){return clearTimeout(n),n=setTimeout(function(){e=""},t),e+=r}}},{key:"search",value:function(t){for(var e=0,n=this.vm.$children.length;e<n;e++){var r=this.vm.$children[e].hotkey;if(r&&r.toLocaleLowerCase().startsWith(t))return Number(this.vm.$children[e].$el.getAttribute("data-hover-index"))}}},{key:"listener",value:function(t){var e=t.key,n=this.getkey(e),r=this.search(n);r>-1&&this.hoverIndexCallback(r)}},{key:"startListen",value:function(t){this._listener=this.listener.bind(this),this.hoverIndexCallback=t,this.dom.addEventListener("keydown",this._listener)}},{key:"destroyed",value:function(){this.dom.removeEventListener("keydown",this._listener)}}]),t}();e.a=i},function(t,e,n){var r=n(0),i=n(6),o=n(5)(r.a,i.a,!1,null,null,null);e.a=o.exports},function(t,e){t.exports=function(t,e,n,r,i,o){var a,s=t=t||{},c=(0,u.default)(t.default);"object"!==c&&"function"!==c||(a=t,s=t.default);var l,h="function"==typeof s?s.options:s;if(e&&(h.render=e.render,h.staticRenderFns=e.staticRenderFns,h._compiled=!0),n&&(h.functional=!0),i&&(h._scopeId=i),o?(l=function(t){(t=t||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext)||"undefined"==typeof __VUE_SSR_CONTEXT__||(t=__VUE_SSR_CONTEXT__),r&&r.call(this,t),t&&t._registeredComponents&&t._registeredComponents.add(o)},h._ssrRegister=l):r&&(l=r),l){var d=h.functional,f=d?h.render:h.beforeCreate;d?(h._injectStyles=l,h.render=function(t,e){return l.call(e),f(t,e)}):h.beforeCreate=f?[].concat(f,l):[l]}return{esModule:a,exports:s,options:h}}},function(t,e,n){var r={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{ref:"item",staticClass:"f10__dropdown-item",class:{hover:t.hover,recent:"recent"===t.type},attrs:{title:t.title},on:{click:t.select}},[n("div",{staticClass:"f10__dropdown__selected-icon",class:{selected:t.selected,multiSelected:t.multiSelected}}),t._v(" "),n("div",{ref:"content",staticClass:"f10__dropdown-item-slot-container"},[t._t("default")],2)])},staticRenderFns:[]};e.a=r}])},"object"===(0,u.default)(e)&&"object"===(0,u.default)(t)?t.exports=a():(i=[],void 0===(o="function"==typeof(r=a)?r.apply(e,i):r)||(t.exports=o))}).call(e,n(32)(t))},function(t,e,n){"use strict";(function(t){var r,i,o,a,s=c(n(33)),u=c(n(24));function c(t){return t&&t.__esModule?t:{default:t}}"undefined"!=typeof self&&self,a=function(){return function(t){var e={};function n(r){if(e[r])return e[r].exports;var i=e[r]={i:r,l:!1,exports:{}};return t[r].call(i.exports,i,i.exports,n),i.l=!0,i.exports}return n.m=t,n.c=e,n.d=function(t,e,r){n.o(t,e)||(0,s.default)(t,e,{configurable:!1,enumerable:!0,get:r})},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="/",n(n.s=1)}([function(t,e,n){e.a={name:"xmStepper",props:{value:Number,disable:Boolean,title:String,max:{type:Number,default:1/0},min:{type:Number,default:0},restrict:{type:Function,default:function(t){return""===t?"":!!/^\d+$/.test(t)&&t}}},data:function(){return{f10__stepper_plus__hover:!1,f10__stepper_plus__active:!1,f10__stepper_minus__hover:!1,f10__stepper_minus__active:!1,f10__stepper__input__hover:!1,editing:!1,lastValue:""}},mounted:function(){var t=this.value;this.value<this.min?(this.$emit("input",this.min),t=this.min):this.value>this.max&&(this.$emit("input",this.max),t=this.max),this.lastValue=t,this.$refs.input.value=t},methods:{updateValue:function(t){var e=this.restrict(t.target.value);!1===e?e=this.lastValue:this.changeValue(t),this.$refs.input.value=e,this.lastValue=e},changeValue:function(t){var e=Number(t.target.value);e>this.max?(e=this.max,this.$refs.input.value=e,this.lastValue=e):e<this.min&&(e=this.min,this.$refs.input.value=e,this.lastValue=e),this.$emit("input",Number(e))},minus:function(){this.value>this.min&&(this.$refs.input.value=this.value-1,this.lastValue=this.value-1,this.$emit("input",this.value-1))},plus:function(){this.value<this.max&&(this.$refs.input.value=this.value+1,this.lastValue=this.value+1,this.$emit("input",this.value+1))},keydownPlus:function(){var t=this;this.plus(),this.timeout=setTimeout(function(){t.interval=setInterval(function(){t.plus()},150)},300)},keyupPlus:function(t){this.timeout&&clearTimeout(this.timeout),this.interval&&clearInterval(this.interval)},keydownMinus:function(){var t=this;this.minus(),this.timeout=setTimeout(function(){t.interval=setInterval(function(){t.minus()},150)},300)},keyupMinus:function(t){this.timeout&&clearTimeout(this.timeout),this.interval&&clearInterval(this.interval)}}}},function(t,e,n){Object.defineProperty(e,"__esModule",{value:!0});var r=n(2);r.a.install=function(t){t.component(r.a.name,r.a)},e.default=r.a},function(t,e,n){var r=n(0),i=n(4),o=n(3)(r.a,i.a,!1,null,null,null);e.a=o.exports},function(t,e){t.exports=function(t,e,n,r,i,o){var a,s=t=t||{},c=(0,u.default)(t.default);"object"!==c&&"function"!==c||(a=t,s=t.default);var l,h="function"==typeof s?s.options:s;if(e&&(h.render=e.render,h.staticRenderFns=e.staticRenderFns,h._compiled=!0),n&&(h.functional=!0),i&&(h._scopeId=i),o?(l=function(t){(t=t||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext)||"undefined"==typeof __VUE_SSR_CONTEXT__||(t=__VUE_SSR_CONTEXT__),r&&r.call(this,t),t&&t._registeredComponents&&t._registeredComponents.add(o)},h._ssrRegister=l):r&&(l=r),l){var d=h.functional,f=d?h.render:h.beforeCreate;d?(h._injectStyles=l,h.render=function(t,e){return l.call(e),f(t,e)}):h.beforeCreate=f?[].concat(f,l):[l]}return{esModule:a,exports:s,options:h}}},function(t,e,n){var r={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"f10__stepper",class:{f10__stepper_plus__hover:t.f10__stepper_plus__hover,f10__stepper_plus__active:t.f10__stepper_plus__active,f10__stepper_minus__hover:t.f10__stepper_minus__hover,f10__stepper_minus__active:t.f10__stepper_minus__active,f10__stepper__input__hover:t.f10__stepper__input__hover,f10__stepper__editing:t.editing,f10__stepper__disable:t.disable},attrs:{title:t.title}},[n("div",{directives:[{name:"f10-effect",rawName:"v-f10-effect",value:{hover:"f10__stepper__input__hover"},expression:"{ hover: 'f10__stepper__input__hover' }"}],staticClass:"f10__stepper__input-container"},[n("input",{ref:"input",staticClass:"f10__stepper__input",attrs:{type:"text",disabled:t.disable},on:{input:function(e){t.updateValue(e)},change:function(e){t.changeValue(e)},keydown:[function(e){return"button"in e||!t._k(e.keyCode,"down",40,e.key,["Down","ArrowDown"])?(e.preventDefault(),t.minus(e)):null},function(e){return"button"in e||!t._k(e.keyCode,"up",38,e.key,["Up","ArrowUp"])?(e.preventDefault(),t.plus(e)):null}],focus:function(e){t.editing=!0},blur:function(e){t.editing=!1}}})]),t._v(" "),n("div",{staticClass:"f10__stepper__right"},[n("div",{directives:[{name:"f10-effect",rawName:"v-f10-effect",value:{hover:"f10__stepper_plus__hover",active:"f10__stepper_plus__active"},expression:"{ hover: 'f10__stepper_plus__hover', active: 'f10__stepper_plus__active' }"}],staticClass:"f10__stepper__right__item f10__stepper__right__top",on:{mousedown:t.keydownPlus,mouseup:t.keyupPlus}}),t._v(" "),n("div",{staticClass:"f10__stepper__line"}),t._v(" "),n("div",{directives:[{name:"f10-effect",rawName:"v-f10-effect",value:{hover:"f10__stepper_minus__hover",active:"f10__stepper_minus__active"},expression:"{ hover: 'f10__stepper_minus__hover', active: 'f10__stepper_minus__active' }"}],staticClass:"f10__stepper__right__item f10__stepper__right__bottom",on:{mousedown:t.keydownMinus,mouseup:t.keyupMinus}})])])},staticRenderFns:[]};e.a=r}])},"object"===(0,u.default)(e)&&"object"===(0,u.default)(t)?t.exports=a():(i=[],void 0===(o="function"==typeof(r=a)?r.apply(e,i):r)||(t.exports=o))}).call(e,n(32)(t))},function(t,e,n){"use strict";(function(t){var r,i,o,a,s=c(n(33)),u=c(n(24));function c(t){return t&&t.__esModule?t:{default:t}}"undefined"!=typeof self&&self,a=function(){return function(t){var e={};function n(r){if(e[r])return e[r].exports;var i=e[r]={i:r,l:!1,exports:{}};return t[r].call(i.exports,i,i.exports,n),i.l=!0,i.exports}return n.m=t,n.c=e,n.d=function(t,e,r){n.o(t,e)||(0,s.default)(t,e,{configurable:!1,enumerable:!0,get:r})},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="/",n(n.s=3)}([function(t,e){t.exports=function(t,e,n,r,i,o){var a,s=t=t||{},c=(0,u.default)(t.default);"object"!==c&&"function"!==c||(a=t,s=t.default);var l,h="function"==typeof s?s.options:s;if(e&&(h.render=e.render,h.staticRenderFns=e.staticRenderFns,h._compiled=!0),n&&(h.functional=!0),i&&(h._scopeId=i),o?(l=function(t){(t=t||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext)||"undefined"==typeof __VUE_SSR_CONTEXT__||(t=__VUE_SSR_CONTEXT__),r&&r.call(this,t),t&&t._registeredComponents&&t._registeredComponents.add(o)},h._ssrRegister=l):r&&(l=r),l){var d=h.functional,f=d?h.render:h.beforeCreate;d?(h._injectStyles=l,h.render=function(t,e){return l.call(e),f(t,e)}):h.beforeCreate=f?[].concat(f,l):[l]}return{esModule:a,exports:s,options:h}}},function(t,e,n){e.a={name:"xmButton",props:{type:{type:String,validator:function(t){return["primary","secondary","default","text","link"].indexOf(t)>-1},default:"secondary"},size:{type:String,validator:function(t){return["large","middle","small"].indexOf(t)>-1},default:"middle"},theme:{type:String},disable:{type:Boolean,default:!1},state:{type:String,default:null},title:String},data:function(){return{f10__btn__hover:!1,f10__btn__active:!1,hasChecked:!1}},mounted:function(){this.checkState()},watch:{state:function(t){this.checkState()}},methods:{checkState:function(){var t=this;"checked"===this.state?setTimeout(function(){t.hasChecked=!0},50):this.hasChecked=!1},click:function(){this.$emit("click")},focus:function(){this.f10__btn__hover=!0},blur:function(){this.f10__btn__hover=!1},enter:function(){var t=this;this.disable||this.loading||(this.f10__btn__active=!0,setTimeout(function(){t.f10__btn__active=!1},100),this.$emit("enter"))}}}},function(t,e,n){e.a={name:"xm-button-group"}},function(t,e,n){Object.defineProperty(e,"__esModule",{value:!0});var r=n(4),i=n(6);n.d(e,"xmButton",function(){return r.a}),n.d(e,"xmButtonGroup",function(){return i.a}),r.a.install=function(t){t.component(r.a.name,r.a)},i.a.install=function(t){t.component(i.a.name,i.a)}},function(t,e,n){var r=n(1),i=n(5),o=n(0)(r.a,i.a,!1,null,null,null);e.a=o.exports},function(t,e,n){var r={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("button",{directives:[{name:"f10-effect",rawName:"v-f10-effect",value:{hover:"f10__btn__hover",active:"f10__btn__active"},expression:"{ hover: 'f10__btn__hover', active: 'f10__btn__active' }"}],staticClass:"f10__btn",class:[t.type,t.size,t.theme,{f10__btn__active:t.f10__btn__active,f10__btn__hover:t.f10__btn__hover,disable:t.disable,loading:"loading"===t.state,checked:"checked"===t.state}],attrs:{disabled:t.disable,title:t.title,tabindex:"loading"===t.state?-1:0},on:{focus:t.focus,blur:t.blur,keydown:function(e){return"button"in e||!t._k(e.keyCode,"enter",13,e.key,"Enter")?t.enter(e):null},click:t.click}},[t._t("default"),t._v(" "),"checked"===t.state?n("svg",{staticClass:"f10__btn-checked-container",attrs:{width:"16px",height:"16px",viewBox:"0 0 16 16",version:"1.1",xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink"}},[n("path",{staticClass:"f10__btn-checked",class:{active:t.hasChecked},attrs:{d:"M1 7 L6 12 L15 4","stroke-width":"1.5",stroke:"#ffffff",fill:"transparent"}})]):t._e()],2)},staticRenderFns:[]};e.a=r},function(t,e,n){var r=n(2),i=n(7),o=n(0)(r.a,i.a,!1,null,null,null);e.a=o.exports},function(t,e,n){var r={render:function(){var t=this.$createElement;return(this._self._c||t)("div",{staticClass:"btn-group"},[this._t("default")],2)},staticRenderFns:[]};e.a=r}])},"object"===(0,u.default)(e)&&"object"===(0,u.default)(t)?t.exports=a():(i=[],void 0===(o="function"==typeof(r=a)?r.apply(e,i):r)||(t.exports=o))}).call(e,n(32)(t))},function(t,e,n){"use strict";(function(t){var r,i,o,a,s=c(n(33)),u=c(n(24));function c(t){return t&&t.__esModule?t:{default:t}}"undefined"!=typeof self&&self,a=function(){return function(t){var e={};function n(r){if(e[r])return e[r].exports;var i=e[r]={i:r,l:!1,exports:{}};return t[r].call(i.exports,i,i.exports,n),i.l=!0,i.exports}return n.m=t,n.c=e,n.d=function(t,e,r){n.o(t,e)||(0,s.default)(t,e,{configurable:!1,enumerable:!0,get:r})},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="/",n(n.s=1)}([function(t,e,n){e.a={name:"xmCheckbox",props:{value:Boolean,disable:Boolean,title:String},data:function(){return{f10__checkbox__hover:!1,f10__checkbox__active:!1}},methods:{toggle:function(){this.disable||(this.$emit("input",!this.value),this.$emit("change",!this.value))},focus:function(){this.f10__checkbox__hover=!0},blur:function(){this.f10__checkbox__hover=!1,this.f10__checkbox__active=!1}}}},function(t,e,n){Object.defineProperty(e,"__esModule",{value:!0});var r=n(2);r.a.install=function(t){t.component(r.a.name,r.a)},e.default=r.a},function(t,e,n){var r=n(0),i=n(4),o=n(3)(r.a,i.a,!1,null,null,null);e.a=o.exports},function(t,e){t.exports=function(t,e,n,r,i,o){var a,s=t=t||{},c=(0,u.default)(t.default);"object"!==c&&"function"!==c||(a=t,s=t.default);var l,h="function"==typeof s?s.options:s;if(e&&(h.render=e.render,h.staticRenderFns=e.staticRenderFns,h._compiled=!0),n&&(h.functional=!0),i&&(h._scopeId=i),o?(l=function(t){(t=t||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext)||"undefined"==typeof __VUE_SSR_CONTEXT__||(t=__VUE_SSR_CONTEXT__),r&&r.call(this,t),t&&t._registeredComponents&&t._registeredComponents.add(o)},h._ssrRegister=l):r&&(l=r),l){var d=h.functional,f=d?h.render:h.beforeCreate;d?(h._injectStyles=l,h.render=function(t,e){return l.call(e),f(t,e)}):h.beforeCreate=f?[].concat(f,l):[l]}return{esModule:a,exports:s,options:h}}},function(t,e,n){var r={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("label",{directives:[{name:"f10-effect",rawName:"v-f10-effect",value:{hover:"f10__checkbox__hover",active:"f10__checkbox__active"},expression:"{ hover: 'f10__checkbox__hover', active: 'f10__checkbox__active' }"}],staticClass:"f10__checkbox__container",class:{f10__checkbox__hover:t.f10__checkbox__hover,f10__checkbox__active:t.f10__checkbox__active,f10__checkbox__disable:t.disable,f10__checkbox__checked:t.value},attrs:{title:t.title}},[n("input",{staticClass:"f10__checkbox",attrs:{type:"checkbox",disabled:t.disable},domProps:{value:t.value},on:{change:t.toggle,focus:t.focus,blur:t.blur,keyup:function(e){return"button"in e||!t._k(e.keyCode,"enter",13,e.key,"Enter")?t.toggle(e):null}}}),t._v(" "),n("span",{staticClass:"f10__checkbox__content"},[t._t("default")],2)])},staticRenderFns:[]};e.a=r}])},"object"===(0,u.default)(e)&&"object"===(0,u.default)(t)?t.exports=a():(i=[],void 0===(o="function"==typeof(r=a)?r.apply(e,i):r)||(t.exports=o))}).call(e,n(32)(t))},function(t,e,n){"use strict";(function(t){var r,i,o,a,s=c(n(33)),u=c(n(24));function c(t){return t&&t.__esModule?t:{default:t}}"undefined"!=typeof self&&self,a=function(){return function(t){var e={};function n(r){if(e[r])return e[r].exports;var i=e[r]={i:r,l:!1,exports:{}};return t[r].call(i.exports,i,i.exports,n),i.l=!0,i.exports}return n.m=t,n.c=e,n.d=function(t,e,r){n.o(t,e)||(0,s.default)(t,e,{configurable:!1,enumerable:!0,get:r})},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="/",n(n.s=1)}([function(t,e,n){e.a={name:"xmRadio",props:{value:{type:Boolean|String},disable:{type:Boolean,default:!1},label:String,name:String,title:String},computed:{checked:function(){return this.label?this.label===this.value:this.value},tabIndex:function(){return this.disable?-1:0}},methods:{change:function(){if(!this.disable){if(void 0!==this.label)return this.$emit("input",this.label);this.$emit("input",!0)}},enter:function(){if(!this.disable){if(void 0!==this.label)return this.$emit("input",this.label);this.$emit("input",!0)}}}}},function(t,e,n){Object.defineProperty(e,"__esModule",{value:!0});var r=n(2);r.a.install=function(t){t.component(r.a.name,r.a)},e.default=r.a},function(t,e,n){var r=n(0),i=n(4),o=n(3)(r.a,i.a,!1,null,null,null);e.a=o.exports},function(t,e){t.exports=function(t,e,n,r,i,o){var a,s=t=t||{},c=(0,u.default)(t.default);"object"!==c&&"function"!==c||(a=t,s=t.default);var l,h="function"==typeof s?s.options:s;if(e&&(h.render=e.render,h.staticRenderFns=e.staticRenderFns,h._compiled=!0),n&&(h.functional=!0),i&&(h._scopeId=i),o?(l=function(t){(t=t||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext)||"undefined"==typeof __VUE_SSR_CONTEXT__||(t=__VUE_SSR_CONTEXT__),r&&r.call(this,t),t&&t._registeredComponents&&t._registeredComponents.add(o)},h._ssrRegister=l):r&&(l=r),l){var d=h.functional,f=d?h.render:h.beforeCreate;d?(h._injectStyles=l,h.render=function(t,e){return l.call(e),f(t,e)}):h.beforeCreate=f?[].concat(f,l):[l]}return{esModule:a,exports:s,options:h}}},function(t,e,n){var r={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("label",{ref:"label",staticClass:"f10__radio__container",class:{disable:t.disable,checked:t.checked},attrs:{role:"radio",title:t.title,tabindex:t.tabIndex},on:{keyup:function(e){return"button"in e||!t._k(e.keyCode,"enter",13,e.key,"Enter")?t.enter(e):null}}},[n("input",{ref:"radio",staticClass:"f10__radio",attrs:{type:"radio",disabled:t.disable,name:t.name,tabindex:"-1"},domProps:{value:t.value,checked:t.checked},on:{change:t.change}}),t._v(" "),n("span",{staticClass:"f10__radio__content"},[t._t("default")],2)])},staticRenderFns:[]};e.a=r}])},"object"===(0,u.default)(e)&&"object"===(0,u.default)(t)?t.exports=a():(i=[],void 0===(o="function"==typeof(r=a)?r.apply(e,i):r)||(t.exports=o))}).call(e,n(32)(t))},function(t,e,n){n(266);var r=n(114)(n(267),n(336),null,null);r.options.__file="/project/src/renderer/dialogs/src/print/printer.vue",r.esModule&&Object.keys(r.esModule).some(function(t){return"default"!==t&&"__esModule"!==t})&&console.error("named exports are not supported in *.vue files."),r.options.functional&&console.error("[vue-loader] printer.vue: functional components are not supported with templates, they should use render functions."),t.exports=r.exports},function(t,e){},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=l(n(268)),i=l(n(80)),o=l(n(54)),a=n(272),s=l(n(273)),u=n(18),c=n(277);function l(t){return t&&t.__esModule?t:{default:t}}var h={ISOA3:"A3",ISOA4:"A4",ISOA5:"A5",JISB4:"B4 JIS",JISB5:"B5 JIS",ISOB4:"B4",ISOB5:"B5"},d="win32"===process.platform;e.default={name:"print",components:{modalDialog:s.default},mounted:function(){var t=this,e=a.modalHelper.getModel();this.backgroundColor=e.backgroundColor,this.imageData=JSON.parse(Buffer.from(e.imageData,"hex").toString()),this.settings.orientation=e.orientation,this.currentSheetEditorIndex=e.currentSheetEditorIndex,a.modalHelper.onUpdate(function(e){t.imageData=JSON.parse(Buffer.from(e.imageData,"hex").toString())}),this.getDeviceDPI(),this.loadWinPageSize(),this.loadPreview(),window.addEventListener("keydown",function(e){13===e.keyCode&&t.clickPrint()}),this.$refs.img.onload=function(){t.$refs.img.style.opacity=1},a.modalHelper.showAfterTimeout(50)},data:function(){return{settings:{copies:1,content:"currentMap",orientation:"landscape",pageSetup:{background:!0},margins:{top:10,bottom:10,left:10,right:10},pageSize:{x:210,y:297},scale:"fitMap",sides:"one-sided",pageRanges:["1","-","2"]},margins:"Normal",allPreviews:[],currentIndex:0,currentSheetEditorIndex:0,supportedPageSizes:d?[]:["8.5*13","Envelope #10","A3","A4","A5","B5","Envelope C5","Envelope DL","JIS B5","ROC 16K","Postcard","Postcard Double Long Edge","Envelop Monarch","US Letter","US Legal","Executive"],printerIndex:0,contentIndex:0,pageSizeIndex:d?0:3,actualSizeBoolean:!1,fitMapBoolean:!0,nothing:0,imageData:[],backgroundColor:""}},computed:{primaryBtnText:function(){return"saveAsPdf"===this.printer.id?"Save":"Print"},rangeText:function(){return this.currentIndex+" of "+this.allPreviews.length},naviLeftClass:function(){return"xmodal-preview-navi-left"+(this.currentIndex>1?"":"-disabled")},naviRightClass:function(){return"xmodal-preview-navi-right"+(this.currentIndex<this.allPreviews.length?"":"-disabled")},recentPrinters:function(){var t=u.ipcServices.sendSync("getUserData",{moduleName:"print",key:"recentPrinters"});return t&&"string"==typeof t&&(t=JSON.parse(t)),t&&Array.isArray(t)?t.length&&1!=t.length?(t=t.length&&t.reduce(function(t,e){return Array.isArray(t)||(t=[t]),-1==t.map(function(t){return t.name}).indexOf(e.name)&&t.push(e),t}))||[]:t:[]},scanedPrinters:function(){return(0,c.getCurrentSupportedPrinters)().concat([{name:this.l10n.T("Save as PDF"),id:"saveAsPdf"},{name:this.l10n.T("Print via System"),id:"systemPrinter"}])},previewEffect:function(){var t=[];switch("portrait"==this.settings.orientation&&t.push("portrait"),this.pageSize){case"8.5*13":t.push("eightpointfive");break;case"Envelope #10":t.push("envel-ten");break;case"A3":case"A4":case"A5":case"JIS B5":case"B5 JIS":t.push("a-series");break;case"B5":case"Postcard Double Long Edge":t.push("b-series");break;case"Envelope C5":t.push("envel-cfive");break;case"Envelope DL":t.push("envel-dl");break;case"ROC 16K":t.push("roc");break;case"Postcard":t.push("postcard");break;case"Envelop Monarch":t.push("envel-mon");break;case"US Letter":t.push("us-letter");break;case"US Legal":t.push("us-legal");break;case"Executive":t.push("executive")}return t},previewBorderStyle:function(){var t,e={},n=void 0,r=void 0;t=this.marginNumber;var i=this.getPreviewSize();return n=i.width,r=i.height,t&&n&&r&&(n-=2*t,r-=2*t,e.width=n+"px",e.height=r+"px"),e},previewBorderBackground:function(){var t={};return t.backgroundColor=this.settings.pageSetup.background&&this.backgroundColor?this.backgroundColor:"#ffffff",t},previewHtml:function(){return this.currentIndex&&this.allPreviews.length>0?"data:image/svg+xml;utf8,"+this.allPreviews[this.currentIndex-1]:""},marginNumber:function(){switch(this.margins){case"Normal":return 10;case"Narrow":return 5;default:return 10}},printer:function(){return this.scanedPrinters[this.printerIndex]},pageSize:function(){return this.supportedPageSizes[this.pageSizeIndex]}},watch:{"settings.content":function(t){"workbook"==t&&"multiPage"==this.settings.pages&&(this.settings.pages="singlePage")},"settings.pageSetup.background":function(t,e){t!=e&&a.modalHelper.submit({type:"update",hasBackground:t})},"settings.orientation":function(){this.loadPreview()},imageData:function(){this.loadPreview()},printer:function(t){var e=this;"systemPrinter"===t.id?setTimeout(function(){return e._openSystemPrint()}):this.loadWinPageSize()},contentIndex:function(t){this.settings.content=["currentMap","workbook"][t],this.loadPreview()},pageSizeIndex:function(){this.loadPreview()},actualSizeBoolean:function(t){this.fitMapBoolean==this.actualSizeBoolean&&(this.fitMapBoolean=!this.actualSizeBoolean),t&&(this.settings.scale="actualSize"),this.loadPreview()},fitMapBoolean:function(t){this.fitMapBoolean==this.actualSizeBoolean&&(this.actualSizeBoolean=!this.fitMapBoolean),t&&(this.settings.scale="fitMap"),this.loadPreview()},allPreviews:function(){this.currentIndex=1}},methods:{isWin:function(){return"win32"==process.platform},close:function(){a.modalHelper.close()},_openSystemPrint:function(){this.settings.useSelectedPrinter=!1,this.settings.saveAsPdf=!1,this.doPrint()},clickPrint:function(){this.printer&&this.printer.name&&("saveAsPdf"===this.printer.id?this.pdfAsPrinter():this.pageSize&&(this.settings.selectedPrinter=this.printer,this.settings.useSelectedPrinter=!0,this.doPrint()))},doPrint:function(){this.parsePageSize(),a.modalHelper.submit({type:"finish",settings:this.settings})},pdfAsPrinter:function(){this.printer={name:"Save as PDF..."},this.settings.useSelectedPrinter=!1,this.settings.saveAsPdf=!0,this.doPrint()},getDeviceDPI:function(){if(!window.xdeviceDPI)if(window.screen.deviceXDPI&&window.screen.deviceYDPI)window.xdeviceDPI=[window.screen.deviceXDPI,window.screen.deviceYDPI];else{var t=document.createElement("div");t.style.cssText="width:1in;height:1in;position:absolute;left:0px;top:0px;z-index:99;visibility:hidden",document.body.appendChild(t),window.xdeviceDPI=[parseInt(t.offsetWidth),parseInt(t.offsetHeight)],t.parentNode.removeChild(t)}},getPreviewSize:function(){var t=void 0,e=void 0;if("landscape"==this.settings.orientation)switch(t=297,this.pageSize){case"8.5*13":e=194;break;case"Envelope #10":e=124;break;case"A3":case"A4":case"A5":case"JIS B5":case"B5 JIS":e=210;break;case"B5":case"Postcard Double Long Edge":e=214;break;case"Envelope C5":e=211;break;case"Envelope DL":e=248;break;case"ROC 16K":e=218;break;case"Postcard":e=201;break;case"Envelop Monarch":e=156;break;case"US Letter":e=230;break;case"US Legal":e=178;break;case"Executive":e=207;break;default:e=210}else if("portrait"==this.settings.orientation)switch(e=297,this.pageSize){case"8.5*13":t=194;break;case"Envelope #10":t=124;break;case"A3":case"A4":case"A5":case"JIS B5":case"B5 JIS":t=210;break;case"B5":case"Postcard Double Long Edge":t=214;break;case"Envelope C5":t=211;break;case"Envelope DL":t=248;break;case"ROC 16K":t=218;break;case"Postcard":t=201;break;case"Envelop Monarch":t=156;break;case"US Letter":t=230;break;case"US Legal":t=178;break;case"Executive":t=207;break;default:t=210}return{width:t,height:e}},_loadPreview:function(){var t=[],e="workbook"===this.settings.content?this.imageData:[this.imageData[this.currentSheetEditorIndex]];if(this.actualSizeBoolean){this.parsePageSize();var n=void 0,r=void 0;"landscape"==this.settings.orientation?(n=this.settings.pageSize.y-2*this.marginNumber,r=this.settings.pageSize.x-2*this.marginNumber):(n=this.settings.pageSize.x-2*this.marginNumber,r=this.settings.pageSize.y-2*this.marginNumber);var a=this.getPreviewSize(),s=a.width-2*this.marginNumber,u=a.height-2*this.marginNumber,c=n*window.xdeviceDPI[0]/25.4,l=r*window.xdeviceDPI[1]/25.4,h=e,d=Array.isArray(h),f=0;for(h=d?h:(0,i.default)(h);;){var p;if(d){if(f>=h.length)break;p=h[f++]}else{if((f=h.next()).done)break;p=f.value}for(var g=p,v=Math.ceil(g.width/c),m=Math.ceil(g.height/l),y=(v*c-g.width)/2,_=(m*l-g.height)/2,E=0;E<m;E++)for(var A=0;A<v;A++){var S=(0,o.default)(g.data).eq(2).attr("viewBox",A*c-y+" "+(E*l-_)+" "+c+" "+l).attr("width",s).attr("height",u);t.push(S[0].outerHTML)}}}else{var T=this.getPreviewSize(),x=T.width-2*this.marginNumber,b=T.height-2*this.marginNumber,w=e,C=Array.isArray(w),I=0;for(w=C?w:(0,i.default)(w);;){var L;if(C){if(I>=w.length)break;L=w[I++]}else{if((I=w.next()).done)break;L=I.value}var N=L;t.push((0,o.default)(N.data).eq(2).attr("width",x).attr("height",b)[0].outerHTML)}}this.allPreviews=t},loadPreview:function(){this._loadPreview()},loadWinPageSize:function(){var t=this;if("win32"===process.platform){var e=[];if(this.supportedPageSizes=[],this.printer&&this.printer.name)return"saveAsPdf"===this.printer.id?(this.supportedPageSizes=(0,r.default)(h),void(this.pageSizeIndex=this.supportedPageSizes.indexOf("A4"))):void this.$nextTick(function(){n(125).default.getSupportedPageSizesforPrinter(t.printer.name,function(n,r){if(n)t.supportedPageSizes=[];else{if(r&&r.length){var o=r,a=Array.isArray(o),s=0;for(o=a?o:(0,i.default)(o);;){var u;if(a){if(s>=o.length)break;u=o[s++]}else{if((s=o.next()).done)break;u=s.value}var c=u;h[c.PageMediaSizeName]&&e.push(h[c.PageMediaSizeName])}}t.supportedPageSizes=e;var l=e.indexOf("A4");t.pageSizeIndex=-1===l?0:l}})})}},parsePageSize:function(){switch(this.pageSize){case"8.5*13":this.settings.pageSize={x:216,y:330};break;case"Envelope #10":this.settings.pageSize={x:105,y:241};break;case"184*260mm":this.settings.pageSize={x:184,y:260};break;case"195*270mm":this.settings.pageSize={x:195,y:270};break;case"A3":this.settings.pageSize={x:297,y:420};break;case"A4":this.settings.pageSize={x:210,y:297};break;case"A5":this.settings.pageSize={x:148,y:210};break;case"B4":this.settings.pageSize={x:250,y:353};break;case"B5":this.settings.pageSize={x:176,y:250};break;case"B4 JIS":this.settings.pageSize={x:257,y:364};break;case"Envelope C5":this.settings.pageSize={x:162,y:229};break;case"Envelope DL":this.settings.pageSize={x:110,y:220};break;case"JIS B5":case"B5 JIS":this.settings.pageSize={x:182,y:257};break;case"ROC 16K":this.settings.pageSize={x:197,y:273};break;case"Postcard":this.settings.pageSize={x:100,y:148};break;case"Postcard Double Long Edge":this.settings.pageSize={x:148,y:200};break;case"Envelope Monarch":this.settings.pageSize={x:98,y:191};break;case"US Letter":this.settings.pageSize={x:216,y:279};break;case"US Legal":this.settings.pageSize={x:216,y:356};break;case"Executive":this.settings.pageSize={x:184,y:267}}}}}},function(t,e,n){t.exports={default:n(269),__esModule:!0}},function(t,e,n){n(270),t.exports=n(3).Object.values},function(t,e,n){var r=n(6),i=n(271)(!1);r(r.S,"Object",{values:function(t){return i(t)}})},function(t,e,n){var r=n(27),i=n(23),o=n(39).f;t.exports=function(t){return function(e){for(var n,a=i(e),s=r(a),u=s.length,c=0,l=[];u>c;)o.call(a,n=s[c++])&&l.push(t?[n,a[n]]:a[n]);return l}}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.modalHelper=void 0;var r,i=n(48),o=(r=i)&&r.__esModule?r:{default:r},a=n(18);var s=n(14).remote.getCurrentWindow(),u=process.platform,c="darwin"===process.platform,l=e.modalHelper={current:s,getModel:function(){return JSON.parse(s.__initdata||null)},submit:function(t){a.eventManager.emitC(s.id,"modal:submit",(0,o.default)(t))},showAfterTimeout:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;if("win32"===u){var e=s.getPosition();s.setPosition(-1e3,-1e3),s.show(),setTimeout(function(){s.setPosition(e[0],e[1])},t)}else setTimeout(function(){s.show()},t)},close:function(){this.onclose?this.onclose():c?s.hide():(s.getParentWindow().focus(),s.close())},onClose:function(t){this.onclose=t},onUpdate:function(t){a.eventManager.on(s.id,"update:model",function(e){t(JSON.parse(e))})},setSize:function(t,e){"win32"===process.platform?s.setSize(t,e+24):s.setSize(t,e)}};window.addEventListener("beforeunload",function(){(0,a.offEM)()}),window.c=s,window.addEventListener("keydown",function(t){27===t.keyCode&&l.close()})},function(t,e,n){n(274);var r=n(114)(n(275),n(276),null,null);r.options.__file="/project/src/renderer/dialogs/dialog.vue",r.esModule&&Object.keys(r.esModule).some(function(t){return"default"!==t&&"__esModule"!==t})&&console.error("named exports are not supported in *.vue files."),r.options.functional&&console.error("[vue-loader] dialog.vue: functional components are not supported with templates, they should use render functions."),t.exports=r.exports},function(t,e){},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r,i=n(51),o=(r=i)&&r.__esModule?r:{default:r};var a=void 0;if("win32"==o.default.platform()){var s=o.default.release();s&&(s.startsWith("6.0")||s.startsWith("6.1"))&&(a=!0)}e.default={props:{title:String},data:function(){return{isWin7:a,isMac:"darwin"===process.platform}},methods:{close:function(){this.$emit("close")}}}},function(t,e,n){t.exports={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"dialog-container",class:[{"win32d-dialog-container":!t.isMac},{"win7-style":t.isWin7}]},[t.isMac?t._e():n("div",{staticClass:"titlebar"},[n("div",{staticClass:"dialog-title"},[t._v("\n      "+t._s(t.title)+"\n    ")]),t._v(" "),n("div",{staticClass:"diaolog-closeicon",on:{click:t.close}})]),t._v(" "),n("div",{staticClass:"dialog-content"},[t._t("default")],2)])},staticRenderFns:[]},t.exports.render._withStripped=!0},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=f(n(82)),i=f(n(48)),o=f(n(25));e.getCurrentSupportedPrinters=v,e.printHandle=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{hasWatermark:!1},n=t.$store.state.editor,a=e.hasWatermark;n.sbEditor.initAllSheetEditor(),clearTimeout(t.getImageDataTimeout);var u=void 0;!function e(h,d){var f=[],p="",g=n.sbEditor,v=g.sheetEditors,y=g.getCurrentSheetEditor(),_=g.findSheetIndex(y.model.id);t.getImageDataTimeout=setTimeout(function(){var t=[],y=function(e){var n=v[e];t.push(n.exportImage({format:"SVG",hideCollapseOpen:!1,hideCollapseClose:!1,noBackground:d}).then(function(t){p||(p=t.height>t.width?"portrait":"landscape"),f[g.findSheetIndex(n.model.id)]=t}))};for(var E in v)y(E);o.default.all(t).then(function(){if(h){var t=s.default.utils,o=n.sbEditor.getCurrentSheetEditor().getSheetView(),d=t.styleManager.getStyleValue(o,s.default.constant.STYLE_KEYS.FILL_COLOR);c.remote.getCurrentWindow().modal.showModal("print",{title:"Print",imageData:Buffer.from((0,i.default)(f)).toString("hex"),backgroundColor:d,orientation:p,currentSheetEditorIndex:_},function(t,i){if("update"===i.type)u=t,e(!1,!i.hasBackground);else{var o=i.settings;o.margins={top:10,bottom:10,left:10,right:10};o.pageRanges&&(Array.isArray(o.pageRanges)&&3==o.pageRanges.length&&"-"==o.pageRanges[1]?o.pageRanges[2]<=o.pageRanges[0]&&(o.pageRanges[2]=String(Number(o.pageRanges[0]+1))):o.pageRanges=["1","-","2"]),t.done(),(0,l.prepare)(n,(0,r.default)({},o,{boundaryFillNone:"win32"===process.platform}),a).then(function(t){m(o,function(){setTimeout(function(){return t()},500)})})}})}else u&&(u.update({imageData:Buffer.from((0,i.default)(f)).toString("hex")}),u=void 0)})},0)}(!0)};var a=f(n(28)),s=f(n(278)),u=f(n(297)),c=n(14),l=n(298),h=n(18),d=n(121);function f(t){return t&&t.__esModule?t:{default:t}}var p=h.rootLogger.logger("printer"),g={'{"x":297,"y":420}':"ISOA3",'{"x":210,"y":297}':"ISOA4",'{"x":148,"y":210}':"ISOA5",'{"x":250,"y":353}':"ISOB4",'{"x":176,"y":250}':"ISOB5",'{"x":257,"y":364}':"JISB4",'{"x":182,"y":257}':"JISB5"};function v(){var t=c.remote.getCurrentWebContents().getPrinters(),e=[];return"win32"!==process.platform?t.forEach(function(t){if(t&&t.options){var n=void 0;t.options["printer-uri-supported"]&&t.options["printer-uri-supported"].startsWith("ipp:")?n=t.options["printer-uri-supported"]:t.options["device-uri"]&&(n=t.options["device-uri"]),n&&!e.find(function(t){return t.url===n})&&e.push({url:n,name:t.name})}}):t.forEach(function(t){e.push({name:t.name})}),e}var m=function(t,e){var r=function(){var t=window.matchMedia("print");t.addListener(function n(r){r.matches||(t.removeListener(n),e())})},s=v();if(t.useSelectedPrinter&&!t.saveAsPdf&&s.length>0){var l={pageSize:{width:1e3*t.pageSize.x,height:1e3*t.pageSize.y},printBackground:!0,landscape:"landscape"==t.orientation};if("win32"===process.platform){var h=[],f=n(125).default,m=new o.default(function(e,n){var r={printerName:t.selectedPrinter.name,pageSizeName:g[(0,i.default)(t.pageSize)]};f.setPageSizeforPrinter(r,function(t,r){t?n(t):e(r)})}),y=new o.default(function(e,n){var r={printerName:t.selectedPrinter.name,pageOrientation:"landscape"==t.orientation?"Landscape":"Portrait"};f.setPageOrientationforPrinter(r,function(t,r){t?n(t):e(r)})}),_=new o.default(function(e,n){var r=t.selectedPrinter.name;f.setDefaultPrinter(r,function(t,r){t?n(t):e(r)})});h.push(m),h.push(y),h.push(_),o.default.all(h).then(function(){r(),c.remote.getCurrentWebContents().print({silent:!0,printBackground:!0})})}else c.remote.getCurrentWebContents().printToPDF(l,function(n,i){p.debug("[Print to PDF]: ",n);var o=t.selectedPrinter.url||v()[0].url;if(r(),o){var a=function(t){var e={"operation-attributes-tag":{"document-format":"application/pdf","requesting-user-name":"XMind Ltd."}};return e["job-attributes-tag"]={copies:t.copies,"orientation-requested":t.orientation,media:function(t){function e(e,n){return t.x==e&&t.y==n}return e(216,330)?"na_foolscap_8.5x13in":e(105,241)?"na-number-10-envelope":e(297,420)?"iso_a3_297x420mm":e(210,297)?"iso_a4_210x297mm":e(148,210)?"iso_a5_148x210mm":e(250,353)?"iso_b4_250x353mm":e(176,250)?"iso_b5_176x250mm":e(257,364)?"jis_b4_257x364mm":e(162,229)?"iso-c5-envelope":e(110,220)?"iso_dl_110x220mm":e(182,257)?"jis_b5_182x257mm":e(197,273)?"roc_16k_7.75x10.75in":e(100,148)?"jpn_hagaki_100x148mm":e(148,200)?"jpn_oufuku_148x200mm":e(98,191)?"monarch-envelope":e(216,279)?"na_letter_8.5x11in":e(216,356)?"na_legal_8.5x14in":e(184,267)?"executive":"iso_a4_210x297mm"}(t.pageSize),sides:"one-sided"},e}(t);a.data=i,new u.default.Printer(o).execute("Print-Job",a,function(t,n){p.debug("[Print-Job Response]",t,n),e&&e()})}else c.remote.getCurrentWebContents().print({silent:!1,printBackground:!0})})}else!t.useSelectedPrinter&&t.saveAsPdf?c.remote.dialog.showSaveDialog(c.remote.getCurrentWindow(),{title:"Save",defaultPath:t.defaultPath,filters:[{name:"PDF",extensions:["pdf"]}]},function(n){if(n){d.saveDialogHelper.rememberRecent(n);var r={pageSize:{width:1e3*t.pageSize.x,height:1e3*t.pageSize.y},printBackground:!0,landscape:"landscape"==t.orientation};c.remote.getCurrentWebContents().printToPDF(r,function(t,r){if(t)return p.debug("[Print to PDF]: ",t);a.default.writeFile(n,r,function(t){if(t)return p.debug("[Print to PDF]: ",t)}),e&&e()})}else e&&e()}):(r(),c.remote.getCurrentWebContents().print({silent:!1,printBackground:!0}))}},function(module,exports,__webpack_require__){module.exports=function(t){var e={};function n(r){if(e[r])return e[r].exports;var i=e[r]={i:r,l:!1,exports:{}};return t[r].call(i.exports,i,i.exports,n),i.l=!0,i.exports}return n.m=t,n.c=e,n.i=function(t){return t},n.d=function(t,e,r){n.o(t,e)||Object.defineProperty(t,e,{configurable:!1,enumerable:!0,get:r})},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=294)}([function(t,e,n){"use strict";var r,i=(r=n(45))&&r.__esModule?r:{default:r},o=E(n(230)),a=E(n(231)),s=E(n(232)),u=E(n(235)),c=E(n(236)),l=E(n(238)),h=E(n(239)),d=E(n(240)),f=E(n(241)),p=E(n(242)),g=E(n(229)),v=E(n(233)),m=E(n(234)),y=E(n(237)),_=E(n(243));function E(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}t.exports=(0,i.default)({LANGS:{ZH_CN:"zh-CN",EN_US:"en-US",ZH_HK:"zh-HK",ZH_TW:"zh-TW",JA_JP:"ja-JP",DE_DE:"de-DE",FR_FR:"fr-FR"},PLATFORMS:{VANA:"vana",BROWNIE:"brownie",DOUGHNUT:"doughnut"}},o,a,s,u,c,l,h,d,f,p,g,v,m,y,_)},function(t,e){t.exports=__webpack_require__(115)},function(t,e,n){"use strict";e.__esModule=!0,e.default=function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}},function(t,e,n){t.exports={default:n(351),__esModule:!0}},function(t,e,n){"use strict";e.__esModule=!0;var r,i=(r=n(2))&&r.__esModule?r:{default:r},o=n(53),a=function(){function t(){(0,i.default)(this,t)}return t.prototype.getStyleValue=function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=this._getStyleSelector(t,n);return r&&r.getStyleValue(t,e,n)},t.prototype.getUserStyle=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=this._getStyleSelector(t,e);return n&&n.getUserStyle(t,e)},t.prototype.getUserStyleValue=function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=this._getStyleSelector(t,n);return r&&r.getUserStyleValue(t,e,n)},t.prototype.getClassList=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=this._getStyleSelector(t,e);return n&&n.getClassList(t,e)},t.prototype.getUserClassValue=function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=this._getStyleSelector(t,n);return r&&r.getUserClassValue(t,e,n)},t.prototype.getTheme=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=this._getStyleSelector(t,e);return n&&n.getTheme(t,e)},t.prototype.getThemeStyleValue=function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=this._getStyleSelector(t,n);return r&&r.getThemeStyleValue(t,e,n)},t.prototype.getDefaultStyleValue=function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=this._getStyleSelector(t,n);return r&&r.getDefaultStyleValue(t,e,n)},t.prototype.getClassName=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=this._getStyleSelector(t,e);return n&&n.getClassName(t,e)},t.prototype.getSuggestedClassName=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=this._getStyleSelector(t,e);return n&&n.getSuggestedClassName(t,e)},t.prototype.changeTheme=function(t,e,n){var r=this._getStyleSelector(t.getContext().getSheetView());return r&&r.changeTheme(t,e,n)},t.prototype.fixUserStyle=function(t,e){var n=this._getStyleSelector(t);return n&&n.fixUserStyle(t,e)},t.prototype.updateClassIntoTheme=function(t,e,n,r){var i=this._getStyleSelector(t.getContext().getSheetView());return i&&i.updateClassIntoTheme(t,e,n,r)},t.prototype.getComputedStyle=function(t,e){var n=this._getStyleSelector(t);return n&&n.getComputedStyle(t,e)},t.prototype._getStyleSelector=function(t){return arguments.length>1&&void 0!==arguments[1]&&arguments[1],(0,o.findStyleSelector)(t)},t.prototype.getFontInfo=function(t){var e=this._getStyleSelector(t);return e&&e.getFontInfo(t)},t}();e.default=new a},function(t,e,n){"use strict";(function(e){var r,i=(r=n(4))&&r.__esModule?r:{default:r},o=n(9),a=n(1),s=n(0).BROWSER_TYPE,u={},c=void 0,l=void 0,h=void 0,d={BREAK:"1",SKIP:"2",hexColorReg:/^#([A-Fa-f0-9]{6}|[A-Fa-f0-9]{3})$/,get browserType(){return void 0!==l?l:(t=navigator.userAgent,l=-1!==(t.indexOf("Opera")||t.indexOf("OPR"))?s.OPERA:-1!==t.indexOf("Edge")?s.EDGE:-1!==t.indexOf("Firefox")?s.FIREFOX:-1!==t.indexOf("Chrome")?s.CHROME:-1!==t.indexOf("Safari")?s.SAFARI:-1!==t.indexOf("MSIE")||1==!!document.documentMode?s.IE:s.UNKNOWN);var t},get isMac(){return navigator.userAgent.includes("Mac")},isIE:function(t){return this.browserType===s.IE},isEdge:function(){return this.browserType===s.EDGE},isSafari:function(){return this.browserType===s.SAFARI},isWebKit:function(){var t=navigator.userAgent;return t.includes("WebKit")&&!t.includes("Edge")},get isPassiveSupport(){if(void 0===h){h=!1;try{var t=Object.defineProperty({},"passive",{get:function(){h=!0}});window.addEventListener("test",null,t)}catch(t){}}return h},imgToBase64String:function(t){var e=document.createElement("canvas");return e.width=t.width,e.height=t.height,e.getContext("2d").drawImage(t,0,0,t.width,t.height),document.body.appendChild(e),e.toDataURL()},generateRect:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:4,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:2,r=((arguments.length>3&&void 0!==arguments[3]?arguments[3]:0)+1)/2,i=t.x,o=t.y,a=t.width,s=t.height,u=i-r-n,c=o-r-n,l=i+a+r+n,h=o-r-n,d=i+a+r+n,f=o+r+n+s,p=i-r-n,g=o+r+n+s;return"M "+(u+e)+" "+c+"L "+(l-e)+" "+h+"Q "+l+" "+h+"  "+l+" "+(h+e)+"L "+d+" "+(f-e)+"Q "+d+" "+f+"  "+(d-e)+" "+f+"L "+(p+e)+" "+g+"Q "+p+" "+g+"  "+p+" "+(g-e)+"L "+u+" "+(c+e)+"Q "+u+" "+c+"  "+(u+e)+" "+c},UUID:function(t,e){if(t&&u[t])return u[t];var n=(e?"xxxyxxxxxxxyxxxxxxxxxyxxxx":"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx").replace(/[xy]/g,function(t){var e=16*Math.random()|0;return("x"===t?e:3&e|8).toString(16)});return t?u[t]=n:n},getHexColor:function(t){var e=t;if(/^rgb/.test(e)){var n=function(t){return("0"+parseInt(t).toString(16)).slice(-2)};e="#"+n((e=e.match(/^rgba?\((\d+),\s*(\d+),\s*(\d+)/))[1])+n(e[2])+n(e[3])}return e},hexToRgb:function(t){var e=[];if(t=t.replace(" ",""),!/^#?([A-Fa-f0-9]{6}|[A-Fa-f0-9]{3})$/.test(t))throw new Error("wrong hex color format! check the argument");return 3===(t=t.slice(1,t.length)).length?e=(e=t.split("")).map(function(t,e){return parseInt(t+t,16)}):(e=t.split(""),e=["","",""].map(function(t,n){return parseInt(e[2*n]+e[2*n+1],16)})),e},hexToHsb:function(t){return d.rgbToHsb.apply(d,d.hexToRgb(t))},hsbToHex:function(t,e,n){var r=d.hsbToRbg(t,e,n);function i(t){return("0"+parseInt(t).toString(16)).slice(-2)}return"#"+i(r.R)+i(r.G)+i(r.B)},hsbToRbg:function(t,e,n){var r={R:0,G:0,B:0};if(t=t>=360?0:t,0==e)r.R=255*n,r.G=255*n,r.B=255*n;else{var i=Math.floor(t/60)%6,o=t/60-i,a=n*(1-e),s=n*(1-e*o),u=n*(1-e*(1-o));switch(i){case 0:r.R=n,r.G=u,r.B=a;break;case 1:r.R=s,r.G=n,r.B=a;break;case 2:r.R=a,r.G=n,r.B=u;break;case 3:r.R=a,r.G=s,r.B=n;break;case 4:r.R=u,r.G=a,r.B=n;break;case 5:r.R=n,r.G=a,r.B=s}r.R=255*r.R,r.G=255*r.G,r.B=255*r.B}return r},rgbToHsb:function(t,e,n){var r=Math.min(Math.min(t,e),n),i=Math.max(Math.max(t,e),n),o={H:0,S:0,B:0};r==i?o.H=0:i==t&&e>=n?o.H=(e-n)/(i-r)*60:i==t&&e<n?o.H=(e-n)/(i-r)*60+360:i==e?o.H=(n-t)/(i-r)*60+120:i==n&&(o.H=(t-e)/(i-r)*60+240),o.S=0==i?0:1-r/i;var a=t/255,s=e/255,u=n/255;return o.B=Math.max(Math.max(a,s),u),o.H=o.H>=360?0:o.H,o},getWindowSize:function(){var t,n,r=e;return r.innerWidth?t=r.innerWidth:document.body&&document.body.clientWidth&&(t=document.body.clientWidth),r.innerHeight?n=r.innerHeight:document.body&&document.body.clientHeight&&(n=document.body.clientHeight),document.documentElement&&document.documentElement.clientHeight&&document.documentElement.clientWidth&&(n=document.documentElement.clientHeight,t=document.documentElement.clientWidth),{winWidth:t,winHeight:n}},setAsyncExcute:function(t,e,n){var r=t.timer||{};r[e]&&clearTimeout(r[e]),r[e]=setTimeout(n,0),t.timer=r},throttle:function(t,e){var n,r=t,i=!0;return function(){var t=arguments,o=this;return i?(r.apply(o,t),i=!1):!n&&void(n=setTimeout(function(){clearTimeout(n),n=null,r.apply(o,t)},void 0===e?500:e))}},showBounds:function(t,e){var n=new SVG.Rect;n.attr(e),n.attr({"stroke-width":1,stroke:"blue",fill:"grey",opacity:.2}),n.style("pointer-events","none"),t.boundsLine&&t.boundsLine.remove(),t.svg.put(n),t.boundsLine=n},cookieUtil:{getItem:function(t){return t&&decodeURIComponent(document.cookie.replace(new RegExp("(?:(?:^|.*;)\\s*"+encodeURIComponent(t).replace(/[\-\.\+\*]/g,"\\$&")+"\\s*\\=\\s*([^;]*).*$)|^.*$"),"$1"))||null},setItem:function(t,e,n,r,i,o){if(!t||/^(?:expires|max\-age|path|domain|secure)$/i.test(t))return!1;var a="";if(n)switch(n.constructor){case Number:a=n===1/0?"; expires=Fri, 31 Dec 9999 23:59:59 GMT":"; max-age="+n;break;case String:a="; expires="+n;break;case Date:a="; expires="+n.toUTCString()}return document.cookie=encodeURIComponent(t)+"="+encodeURIComponent(e)+a+(i?"; domain="+i:"")+(r?"; path="+r:"")+(o?"; secure":""),!0},removeItem:function(t,e,n){return!!d.cookieUtil.hasItem(t)&&(document.cookie=encodeURIComponent(t)+"=; expires=Thu, 01 Jan 1970 00:00:00 GMT"+(n?"; domain="+n:"")+(e?"; path="+e:""),!0)},clear:function(){d.cookieUtil.keys().forEach(function(t){d.cookieUtil.removeItem(t,"/")})},hasItem:function(t){return!!t&&new RegExp("(?:^|;\\s*)"+encodeURIComponent(t).replace(/[\-\.\+\*]/g,"\\$&")+"\\s*\\=").test(document.cookie)},keys:function(){for(var t=document.cookie.replace(/((?:^|\s*;)[^\=]+)(?=;|$)|^\s*|\s*(?:\=[^;]*)?(?:\1|$)/g,"").split(/\s*(?:\=[^;]*)?;\s*/),e=t.length,n=0;n<e;n++)t[n]=decodeURIComponent(t[n]);return t}},get isMobile(){return void 0!==c?c:(t=navigator.userAgent.toLowerCase(),c=t.includes("ipad")||t.includes("android")||t.includes("mobile")||t.includes("phone"));var t},get isTouchAble(){return navigator.maxTouchPoints>0},urlNormalize:function(t){var e,n=0===t.indexOf("//");if(-1!==t.indexOf("://")){var r=t.split("://"),i=r[0];r.shift(),e=r.join("://")}else e=t;return e=d.pathNormalize(e),i?i+"://"+e:n?"/"+e:e},pathNormalize:function(t){var e="/"===t.charAt(0),n=t&&"/"===t[t.length-1];return(t=function(t,e){for(var n=[],r=0;r<t.length;r++){var i=t[r];i&&"."!==i&&(".."===i?n.length&&".."!==n[n.length-1]?n.pop():e&&n.push(".."):n.push(i))}return n}(t.split("/"),!e).join("/"))||e||(t="."),t&&n&&(t+="/"),(e?"/":"")+t},getXapResourceHash:function(t){return d.isXapResource(t)?t.match(new RegExp("xap:resources/(\\S*)\\.*\\S*$"))[1]:t},isXapResource:function(t){return"string"==typeof t&&0===t.indexOf("xap:resources/")},frameStabilize:function(t,e){var n,r=!1;return function(){n=Array.prototype.slice.apply(arguments),r||(r=!0,requestAnimationFrame(function(){t.apply(this,n),r=!1})),e&&"function"==typeof e&&e.apply(this,n)}},putElementSuitable:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=t.width(),i=t.height(),a=d.getWindowSize(),s=a.winWidth-("none"!==o("#right_side_bar")[0].style.display?o("#right-bar").width():0),u=a.winHeight,c=o("#top-bar").height?o("#top-bar").height():0,l=e.x,h=e.y,f="none",p="hidden";e.y+i>u?(h-=i+3*n)<c&&(h+=i-100,f="100px",p="scroll"):(f="none",p="hidden"),e.x+r>s?l-=e.x+r-s:e.x<0&&(l+=-e.x),t.css({"max-height":f,"overflow-y":p,left:l,top:h})},postorderIterate:function(t,e,n){return t.getChildrenBranchesByType(e).some(function(t){return d.postorderIterate(t,e,n)===d.BREAK})?d.BREAK:n(t)},preorderIterate:function(t,e,n){var r=n(t);if(r===d.BREAK||r===d.SKIP)return r;for(var i=t.getChildrenBranchesByType(e),o=0;o<i.length;o++)if((r=d.preorderIterate(i[o],e,n))===d.BREAK)return r},getType:function(t){return"branch"===t.type?i.default.getClassName(t):t.type},replaceId:function(t,e){var n={},r={},i=["root"];return function t(o){var s=i[i.length-2];for(var u in o.id&&("summary"===s?r[o.id]?o.id=r[o.id]:(n[r[o.id]]=e(),r[o.id]=n[r[o.id]],o.id=r[o.id]):"summaries"===s?(n[o.id]=e(),o.id=n[o.id],r[o.topicId]?o.topicId=r[o.topicId]:(n[r[o.topicId]]=e(),r[o.topicId]=n[r[o.topicId]],o.topicId=r[o.topicId])):(n[o.id]=e(),o.id=n[o.id])),o)a.isObject(o[u])&&(i.push(u),t(o[u]),i.pop())}(t),n},wrapReadOnly:function(t,e){e.forEach(function(e){var n=t.prototype[e];"function"==typeof n&&(t.prototype[e]=function(){if(!this.getContext().isReadOnly()){for(var t=arguments.length,e=Array(t),r=0;r<t;r++)e[r]=arguments[r];n.apply(this,e)}})})},isFunctionEnabled:function(t){return this.isMac?t.metaKey:t.ctrlKey},findCommonParent:function(t){if(!t||!t.length)return null;var e=t.sort(function(t,e){return t.getLayer()>e.getLayer()}),n=e[0].getLayer(),r=0;e.some(function(t,e){if(t.getLayer()!==n)return!0;r=e});var i=e.slice(0,r+1),o=i.map(function(t){return t.getBranchPath()});if(!e.slice(r+1).map(function(t){return t.getBranchPath()}).every(function(t){return o.some(function(e){return 0===t.indexOf(e)})}))return null;var a=i[0].parent();return i.every(function(t){return t.parent()===a})?"branch"!==a.type?null:{parent:a,subBranches:i}:null},setAnimation:function(t){var e=t.start,n=t.end,r=t.duration,i=t.during,o=t.after,a=Date.now(),s=!1;return requestAnimationFrame(function t(){if(!s){var u=Date.now()-a;i(function(t){var i,o=(i=u/r)*i;return e+(n-e)*o}()),u<r?requestAnimationFrame(t):(i(n),o&&o())}}),function(){s=!0}}};t.exports=d}).call(e,n(6))},function(t,e){var n;n=function(){return this}();try{n=n||Function("return this")()||(0,eval)("this")}catch(t){"object"==typeof window&&(n=window)}t.exports=n},function(t,e,n){var r;r=function(){var t=t||function(t,e){var n=Object.create||function(){function t(){}return function(e){var n;return t.prototype=e,n=new t,t.prototype=null,n}}(),r={},i=r.lib={},o=i.Base={extend:function(t){var e=n(this);return t&&e.mixIn(t),e.hasOwnProperty("init")&&this.init!==e.init||(e.init=function(){e.$super.init.apply(this,arguments)}),e.init.prototype=e,e.$super=this,e},create:function(){var t=this.extend();return t.init.apply(t,arguments),t},init:function(){},mixIn:function(t){for(var e in t)t.hasOwnProperty(e)&&(this[e]=t[e]);t.hasOwnProperty("toString")&&(this.toString=t.toString)},clone:function(){return this.init.prototype.extend(this)}},a=i.WordArray=o.extend({init:function(t,e){t=this.words=t||[],this.sigBytes=void 0!=e?e:4*t.length},toString:function(t){return(t||u).stringify(this)},concat:function(t){var e=this.words,n=t.words,r=this.sigBytes,i=t.sigBytes;if(this.clamp(),r%4)for(var o=0;o<i;o++){var a=n[o>>>2]>>>24-o%4*8&255;e[r+o>>>2]|=a<<24-(r+o)%4*8}else for(o=0;o<i;o+=4)e[r+o>>>2]=n[o>>>2];return this.sigBytes+=i,this},clamp:function(){var e=this.words,n=this.sigBytes;e[n>>>2]&=4294967295<<32-n%4*8,e.length=t.ceil(n/4)},clone:function(){var t=o.clone.call(this);return t.words=this.words.slice(0),t},random:function(e){for(var n,r=[],i=function(e){e=e;var n=987654321,r=4294967295;return function(){var i=((n=36969*(65535&n)+(n>>16)&r)<<16)+(e=18e3*(65535&e)+(e>>16)&r)&r;return i/=4294967296,(i+=.5)*(t.random()>.5?1:-1)}},o=0;o<e;o+=4){var s=i(4294967296*(n||t.random()));n=987654071*s(),r.push(4294967296*s()|0)}return new a.init(r,e)}}),s=r.enc={},u=s.Hex={stringify:function(t){for(var e=t.words,n=t.sigBytes,r=[],i=0;i<n;i++){var o=e[i>>>2]>>>24-i%4*8&255;r.push((o>>>4).toString(16)),r.push((15&o).toString(16))}return r.join("")},parse:function(t){for(var e=t.length,n=[],r=0;r<e;r+=2)n[r>>>3]|=parseInt(t.substr(r,2),16)<<24-r%8*4;return new a.init(n,e/2)}},c=s.Latin1={stringify:function(t){for(var e=t.words,n=t.sigBytes,r=[],i=0;i<n;i++){var o=e[i>>>2]>>>24-i%4*8&255;r.push(String.fromCharCode(o))}return r.join("")},parse:function(t){for(var e=t.length,n=[],r=0;r<e;r++)n[r>>>2]|=(255&t.charCodeAt(r))<<24-r%4*8;return new a.init(n,e)}},l=s.Utf8={stringify:function(t){try{return decodeURIComponent(escape(c.stringify(t)))}catch(t){throw new Error("Malformed UTF-8 data")}},parse:function(t){return c.parse(unescape(encodeURIComponent(t)))}},h=i.BufferedBlockAlgorithm=o.extend({reset:function(){this._data=new a.init,this._nDataBytes=0},_append:function(t){"string"==typeof t&&(t=l.parse(t)),this._data.concat(t),this._nDataBytes+=t.sigBytes},_process:function(e){var n=this._data,r=n.words,i=n.sigBytes,o=this.blockSize,s=i/(4*o),u=(s=e?t.ceil(s):t.max((0|s)-this._minBufferSize,0))*o,c=t.min(4*u,i);if(u){for(var l=0;l<u;l+=o)this._doProcessBlock(r,l);var h=r.splice(0,u);n.sigBytes-=c}return new a.init(h,c)},clone:function(){var t=o.clone.call(this);return t._data=this._data.clone(),t},_minBufferSize:0}),d=(i.Hasher=h.extend({cfg:o.extend(),init:function(t){this.cfg=this.cfg.extend(t),this.reset()},reset:function(){h.reset.call(this),this._doReset()},update:function(t){return this._append(t),this._process(),this},finalize:function(t){return t&&this._append(t),this._doFinalize()},blockSize:16,_createHelper:function(t){return function(e,n){return new t.init(n).finalize(e)}},_createHmacHelper:function(t){return function(e,n){return new d.HMAC.init(t,n).finalize(e)}}}),r.algo={});return r}(Math);return t},t.exports=r()},function(t,e,n){"use strict";(function(e){var r,i=s(n(30)),o=s(n(4)),a=n(0);function s(t){return t&&t.__esModule?t:{default:t}}var u=n(5),c=n(1),l=(n(9),n(14)),h=(e.SVG,/data:image[\s\S]*;base64/);function d(t,e){var n={};return t.x===e.x?n.x=t.x:t.y===e.y?n.y=t.y:(n.k=(t.y-e.y)/(t.x-e.x),n.b=t.y-t.x*n.k),n}var f,p,g={topicShapeToLine:(r={},r[a.TOPICSHAPE.RECT]=function(t){var e=[],n=t.topicView.shapeBounds.width,r=t.topicView.shapeBounds.height,i=t.getRealPosition();return e[0]={y:i.y-r/2,type:"line"},e[1]={x:i.x+n/2,type:"line"},e[2]={y:i.y+r/2,type:"line"},e[3]={x:i.x-n/2,type:"line"},e},r[a.TOPICSHAPE.ROUNDEDRECT]=function(t){return this[a.TOPICSHAPE.RECT](t)},r[a.TOPICSHAPE.ELLIPSE]=function(t){var e={},n=t.shapeBounds.width,r=t.shapeBounds.height,i=t.getRealPosition(),o=i.x,a=i.y,s=n/2,u=r/2;if(s<u){var c=s;s=u,u=c}return e[0]={x0:o,y0:a,a:s,b:u,type:"arc"},e},r[a.TOPICSHAPE.DIAMOND]=function(t){var e,n={},r=t.shapeBounds.width,i=t.shapeBounds.height,o=t.getRealPosition();return(e=d({x:o.x,y:o.y-i/2},{x:o.x-r/2,y:o.y})).type="line",n[0]=e,(e=d({x:o.x,y:o.y-i/2},{x:o.x+r/2,y:o.y})).type="line",n[1]=e,(e=d({x:o.x,y:o.y+i/2},{x:o.x+r/2,y:o.y})).type="line",n[2]=e,(e=d({x:o.x,y:o.y+i/2},{x:o.x-r/2,y:o.y})).type="line",n[3]=e,n},r[a.TOPICSHAPE.FISHHEADTORIGHT]=function(t){var e,n,r,i={},o=t.shapeBounds.width,a=t.shapeBounds.height,s=t.getRealPosition();return e={x:s.x-o/2,y:s.y-a/2},n={x:s.x+o/4,y:s.y-a/2},r={x:s.x+o/2,y:s.y},i[0]={p0:e,p1:n,p2:r,type:"bezier"},e={x:s.x-o/2,y:s.y+a/2},n={x:s.x+o/4,y:s.y+a/2},r={x:s.x+o/2,y:s.y},i[1]={p0:e,p1:n,p2:r,type:"bezier"},i[2]={x:s.x-o/2,type:"line"},i},r[a.TOPICSHAPE.FISHHEADTOLEFT]=function(t){var e,n,r,i={},o=t.shapeBounds.width,a=t.shapeBounds.height,s=t.getRealPosition();return e={x:s.x-o/2,y:s.y},n={x:s.x-o/4,y:s.y-a/2},r={x:s.x+o/2,y:s.y-a/2},i[0]={p0:e,p1:n,p2:r,type:"bezier"},e={x:s.x-o/2,y:s.y},n={x:s.x-o/4,y:s.y+a/2},r={x:s.x+o/2,y:s.y+a/2},i[1]={p0:e,p1:n,p2:r,type:"bezier"},i[2]={x:s.x+o/2,type:"line"},i},r[a.TOPICSHAPE.ELLISPEDIALOG]=function(t){return this[a.TOPICSHAPE.ELLIPSE](t)},r[a.TOPICSHAPE.RECTANGLEDIALOG]=function(t){return this[a.TOPICSHAPE.RECT](t)},r[a.TOPICSHAPE.UNDERLINE]=function(t){return this[a.TOPICSHAPE.RECT](t)},r[a.TOPICSHAPE.CIRCLE]=function(t){return this[a.TOPICSHAPE.ELLIPSE](t)},r[a.TOPICSHAPE.PARALLELOGRAM]=function(t){return this[a.TOPICSHAPE.RECT](t)},r[a.TOPICSHAPE.CLOUD]=function(t){return this[a.TOPICSHAPE.RECT](t)},r[a.CALLOUTSHAPE.RECT]=function(t){return this[a.TOPICSHAPE.RECT](t)},r[a.CALLOUTSHAPE.ROUNDEDRECT]=function(t){return this[a.TOPICSHAPE.RECT](t)},r[a.CALLOUTSHAPE.ELLIPSE]=function(t){return this[a.TOPICSHAPE.ELLIPSE](t)},r),calculateDistance:function(t,e){return Math.sqrt((e.x-t.x)*(e.x-t.x)+(e.y-t.y)*(e.y-t.y))},antiPointAt:function(t,e){var n=g.getRadian(t.pointAt(1e-4)),r=t.length(),i=Math.log(r)/Math.log(2)+1,o=g.getRadian(e);o=o<n?o+2*Math.PI:o;for(var a,s,u=0,c=0,l=r;u<i;)a=(l-c)/2+c,(s=(s=g.getRadian(t.pointAt(a)))<n?s+2*Math.PI:s)>o?l=a:c=a,u++;return a},getRadian:function(t){var e=t.x/Math.sqrt(t.x*t.x+t.y*t.y),n=Math.acos(e);return t.y<0?2*Math.PI-n:n},angleToRadian:function(t){return t/180*Math.PI},topicInsectLine:function(t,e){if(!t||!e||void 0==e.x||void 0==!e.y)throw new Error("incorrect arguments");var n=void 0,r=void 0,i=void 0,s=void 0,u=void 0,l=void 0,h=t.linePosition||t.getRealPosition();if(t.type===a.VIEW_TYPE.BRANCH){var d=t.topicView;n=d.topicShapeFill,t.isRotate()&&(s=d.topicGroup.transform(),u=Math.cos(g.angleToRadian(s.rotation)),l=Math.sin(g.angleToRadian(s.rotation))),o.default.getStyleValue(t,a.STYLE_KEYS.SHAPE_CLASS)===a.TOPICSHAPE.CLOUD&&(r=t.topicView.topicShapeFill.transform(),i=r)}else t.type===a.VIEW_TYPE.BOUNDARY&&(n=t.boundaryPath,i={x:-h.x,y:-h.y});if(!n||0===n.length())return e;var f,p={x:0,y:0};if(s){var v={x:s.cx,y:s.cy};p=N(p,v)}f={x:e.x-h.x,y:e.y-h.y};var m=L(n.pointAt(1e-4)),y=g.getRadian({x:m.x-p.x,y:m.y-p.y}),_=g.getRadian({x:f.x-p.x,y:f.y-p.y});_=_<y?_+2*Math.PI:_;for(var E=n.length(),A=Math.log(E)/Math.log(2)+1,S=0,T=0,x=E,b=(x-T)/2+T,w=void 0,C=void 0,I=function(){var t=L(n.pointAt((x-T)/4+T)),e=g.getRadian({x:t.x-p.x,y:t.y-p.y});e=e<y?e+2*Math.PI:e;var r=L(n.pointAt((x-T)/4*3+T)),i=g.getRadian({x:r.x-p.x,y:r.y-p.y});return(i=i<y?i+2*Math.PI:i)>e}()?1:-1;S<A;)b=(x-T)/2+T,w=L(n.pointAt(b)),(C=(C=g.getRadian({x:w.x-p.x,y:w.y-p.y}))<y?C+2*Math.PI:C)*I>_*I?x=b:T=b,S++;return c.extend({at:b},{x:w.x+h.x,y:w.y+h.y});function L(t){return r&&i&&(t.x=t.x*r.scaleX,t.y=t.y*r.scaleY),i&&(t.x+=i.x,t.y+=i.y),s&&N(t,{x:s.cx,y:s.cy}),t}function N(t,e){var n=t.x-e.x,r=t.y-e.y;return t.x=e.x+(n*u-r*l),t.y=e.y+(n*l+r*u),t}},getWindowSize:function(){var t,n,r=e;return r.innerWidth?t=r.innerWidth:document.body&&document.body.clientWidth&&(t=document.body.clientWidth),r.innerHeight?n=r.innerHeight:document.body&&document.body.clientHeight&&(n=document.body.clientHeight),document.documentElement&&document.documentElement.clientHeight&&document.documentElement.clientWidth&&(n=document.documentElement.clientHeight,t=document.documentElement.clientWidth),{winWidth:t,winHeight:n}},isIntersection:function(t,e){var n,r,i=!1;return"branch"===t.type&&(n=t.topicView.topicGroup.rbox(),(r=e.rbox()).x<n.x&&r.x+r.width<n.x||r.x>n.x+n.width&&r.x+r.width>n.x+n.width||r.y<n.y&&r.y+r.height<n.y||r.y>n.y+n.height&&r.y+r.height>n.y+n.height||(i=!0)),i},_getTopicShapeRealBound:function(t){var e=t.topicView.shapeBounds,n=t.topicView.topicGroup.trans,r=n.rotation,i=n.cx,o=n.cy;r&&(e=l.rotate(e,r,i,o));var a=t.getRealPosition();return{x:e.x+a.x,y:e.y+a.y,width:e.width,height:e.height}},isTopicIntersectWithPoint:function(t,e){if("branch"===t.type){var n=g._getTopicShapeRealBound(t);if(g.isBoundIntersectWithPoint(n,e))return!0}return!1},isBoundIntersectWithPoint:function(t,e){return e.x>t.x&&e.x<t.x+t.width&&e.y>t.y&&e.y<t.y+t.height},calcDirectionInTopic:function(t,e){var n=g._getTopicShapeRealBound(t),r=n.x+n.width/4,i=r+n.width/2,o=n.y+n.height/2;return e.x<r?"left":e.x>i?"right":e.y>o?"bottom":"top"},isSelected:function(t,e,n){if(r=t.parent().structureClass in{"org.xmind.ui.map.clockwise":!0,"org.xmind.ui.map.anticlockwise":!0,"org.xmind.ui.map":!0,"org.xmind.ui.map.unbalanced":!0}?1:0,u=t.topicView.topicGroup.rbox(),c=e.selectBoxGroup.rbox(),d=(l="UD"===n?["y","height"]:["x","width"])[1],i=c[h=l[0]]<u[h]+u[d]/2&&c[h]+c[d]>u[h]+u[d]/2,0===r?i:(a=[u.x+u.width/2,u.y+u.height/2],s=[c.x+c.width/2,c.y+c.height/2],o=Math.abs(a[0]-s[0])<=(u.width+c.width)/2&&Math.abs(a[1]-s[1])<=(u.height+c.height)/2,i&&o))return t.onMouseover(),!0;var r,i,o,a,s,u,c,l,h,d;t.onMouseout()},isBoxIntersect:function(t,e){var n=(t.x2>e.x2?t.x2:e.x2)-(t.x<e.x?t.x:e.x);return(t.y2>e.y2?t.y2:e.y2)-(t.y<e.y?t.y:e.y)<t.height+e.height&&n<t.width+e.width},cloneMarker:function(t){var e=t.editDomain().content().getCloneG(),n=(t.model,t.markerImage.clone());return e.add(n),e},cloneImage:function(t){var e=t.editDomain().content().getCloneG(),n=(t.model,t.image.clone());return e.add(n),e},getNumberText:function(t,e){var n="";switch(t){case a.NUMBERFORMAT.ARABIC:n+=e;break;case a.NUMBERFORMAT.ROMAN:var r={1000:"M",900:"CM",500:"D",400:"CD",100:"C",90:"XC",50:"L",40:"XL",10:"X",9:"IX",5:"V",4:"IV",1:"I"},i=[],o=c.keys(r).reverse();c.each(o,function(t){var n=Math.floor(e/t),o=e%t;c(n).times(function(){i.push(r[t])}),e=o}),n=i.join("");break;case a.NUMBERFORMAT.LOWERCASE:for(var s="a".charCodeAt(0),u="z".charCodeAt(0)-s+1;e>=0;)n=String.fromCharCode(e%u+s-1)+n,e=Math.floor(e/u)-1;break;case a.NUMBERFORMAT.UPPERCASE:for(s="A".charCodeAt(0),u="Z".charCodeAt(0)-s+1;e>=0;)n=String.fromCharCode(e%u+s-1)+n,e=Math.floor(e/u)-1}return n},capitalizeEachWord:function(t){return t.replace(/\w\S*/g,function(t){return t.charAt(0).toUpperCase()+t.substr(1).toLowerCase()})},newton:function(t,e){if(t||!(t.length<=1)){for(var n=e,r=n,i=1,o=0;Math.abs(i)>1e-8&&!(++o>=1e4);)i=(n=r-this.f(t,r)/this.df(t,r))-r,r=n;return n}},f:function(t,e){var n,r=0,i=t.length;for(n=0;n<i;n++)r+=t[n]*Math.pow(e,i-1-n);return r},df:function(t,e){var n,r=0,i=t.length;for(n=0;n<i;n++)r+=t[n]*(i-1-n)*Math.pow(e,t.length-2-n);return r},pointInPolygon:function(t,e){var n,r,i,o=e.length-1,a=!1,s=t.x,u=t.y;for(n=0;n<e.length;n++)r=e[n],i=e[o],(r.y<u&&i.y>=u||i.y<u&&r.y>=u)&&(r.x<=s||i.x<=s)&&r.x+(u-r.y)/(i.y-r.y)*(i.x-r.x)<s&&(a=!a),o=n;return a},convexHull:function(t){(t=t.slice()).sort(function(t,e){return t.x!=e.x?t.x-e.x:t.y-e.y});for(var e,n,r,i,o,a=t.length,s=[],u=0;u<2*a;u++){for(var c=u<a?u:2*a-1-u;s.length>=2&&(e=s[s.length-2],n=s[s.length-1],r=t[c],i=(e.x-n.x)*(r.y-n.y)-(e.y-n.y)*(r.x-n.x),o=(e.x-n.x)*(r.x-n.x)+(e.y-n.y)*(r.y-n.y),i<0||0==i&&o<=0);)s.pop();s.push(t[c])}return s.pop(),s},setFillColor:function(t,e,n,r){if(!r){var i=t.content().isGradient();return"none"===n||"$none$"===n?e.attr({opacity:0}):i?g._setAutoGradient(t,e,n):e.attr({fill:n,stroke:"none",opacity:1}),this}g._setGradientFill(t,e,r)},_setGradientFill:function(t,e,n){var r=t.svg,i=e.remember("fillGradient"),o=g.createOrUpdateGradient(r,n,i);e.remember("fillGradient",o),e.attr({fill:o})},_setAutoGradient:function(t,e,n){var r,i=t.svg,o=u.hexToHsb(n),a=c.extend({},o);o.B=Math.min(o.B+.05,1),a.B=Math.max(a.B-.05,0);var s=u.hsbToHex(o.H,o.S,o.B),l=u.hsbToHex(a.H,a.S,a.B);e.remember("gradient")?((r=e.remember("gradient")).get(0).update(0,s),r.get(1).update(1,l)):((r=i.gradient("linear",function(t){t.at(0,s),t.at(1,l)})).from(0,0).to(0,1),e.remember("gradient",r)),e.attr({fill:r,stroke:"none",opacity:1})},createOrUpdateGradient:function(t,e,n){var r=e.direction,i=e.stops,o=void 0;(o=n||t.gradient("linear")).update(function(t){i.forEach(function(e){t.at(e)})});var a=Math.sin(r*Math.PI/180),s=Math.cos(r*Math.PI/180),u=.5-s,c=.5-a,l=.5+s,h=.5+a;return o.from(u,c).to(l,h),o},getTransformedText:function(t,e){switch(e){case a.TEXTTRANSFORM.MANUAL:return t;case a.TEXTTRANSFORM.UPPERCASE:return t.toUpperCase();case a.TEXTTRANSFORM.LOWERCASE:return t.toLowerCase();case a.TEXTTRANSFORM.CAPITALIZE:return g.capitalizeEachWord(t);default:return t}},formUserMarkerIdMap:function(t){return m(t)},getXapInData:function(t,e){var n=m(e),r=c.uniq(v(t,n),!1,function(t){return t.path.join("/")}),i=function(t){return u.isXapResource(t.src)?[{path:["src"],content:[t.src]}]:[]}(t),o=function(t,e){return e[t.markerId]?[{path:["/","legend","markers",t.markerId,"resource"],content:e[t.markerId]}]:[]}(t,n);return[].concat(r,i,o)},getXapInSheetData:function(t){var e=m(t.legend);return c.uniq(v(t.rootTopic,e),!1,function(t){return t.path.join("/")}).map(function(t){var e=t.path;return"/"!==e[0]&&e.unshift("rootTopic"),t})},isBase64Url:function(t){return h.test(t)},replaceValueInObject:function(t,e,n){"/"===e[0]&&(e=e.slice(1));var r=e.reduce(function(t,n,r){return r===e.length-1?t:t[n]},t),i=r[e[e.length-1]];r[e[e.length-1]]=n(i)},b64toBlob:function(t,e,n){e=e||"",n=n||512;for(var r=atob(t),i=[],o=0;o<r.length;o+=n){for(var a=r.slice(o,o+n),s=new Array(a.length),u=0;u<a.length;u++)s[u]=a.charCodeAt(u);var c=new Uint8Array(s);i.push(c)}return new Blob(i,{type:e})},promiseQueue:function(t){var e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return new i.default(function(n,r){var i=-1;!function o(){var a=t[++i];e?a?a().then(o).catch(r):n():a?a().then(function(){return n()}).catch(o):r()}()})},arrayBufferToBase64:function(t){for(var e="",n=new Uint8Array(t),r=n.byteLength,i=0;i<r;i++)e+=String.fromCharCode(n[i]);return window.btoa(e)},base64ToArrayBuffer:function(t){for(var e=window.atob(t),n=e.length,r=new Uint8Array(n),i=0;i<n;i++)r[i]=e.charCodeAt(i);return r.buffer},nextTick:(f=[],p=!0,function(t){"function"==typeof t&&(f.push(t),p&&(p=!1,i.default.resolve().then(function(){p=!0;var t=f.slice(0);f.length=0;for(var e=0;e<t.length;e++)t[e]()})))}),calcCubicBezierBoundingBox:function(t,e,n,r){for(var i,o,a,s,u,c,l,h,d=t.x,f=t.y,p=n.x,g=n.y,v=r.x,m=r.y,y=e.x,_=e.y,E=[],A=[],S=[],T=0;T<2;++T)if(0==T?(o=6*d-12*p+6*v,i=-3*d+9*p-9*v+3*y,a=3*p-3*d):(o=6*f-12*g+6*m,i=-3*f+9*g-9*m+3*_,a=3*g-3*f),Math.abs(i)<1e-12){if(Math.abs(o)<1e-12)continue;0<(s=-a/o)&&s<1&&E.push(s)}else(l=o*o-4*a*i)<0||(0<(u=(-o+(h=Math.sqrt(l)))/(2*i))&&u<1&&E.push(u),0<(c=(-o-h)/(2*i))&&c<1&&E.push(c));for(var x,b=E.length;b--;)x=1-(s=E[b]),A[b]=x*x*x*d+3*x*x*s*p+3*x*s*s*v+s*s*s*y,S[b]=x*x*x*f+3*x*x*s*g+3*x*s*s*m+s*s*s*_;A.push(d,y),S.push(f,_);var w={x:Math.min.apply(0,A),y:Math.min.apply(0,S)},C=Math.max.apply(0,A),I=Math.max.apply(0,S);return{x:w.x,y:w.y,width:Math.abs(C-w.x),height:Math.abs(I-w.y)}}};function v(t,e){var n=function(t,e){var n=[];if(u.isXapResource(t.href)&&n.push({path:["href"],content:t.href}),t.markers&&t.markers.forEach(function(t){e[t.markerId]&&n.push({path:["/","legend","markers",t.markerId,"resource"],content:e[t.markerId]})}),t.image&&u.isXapResource(t.image.src)&&n.push({path:["image","src"],content:t.image.src}),t.extensions&&t.extensions.forEach(function(t,e){t.resourceRefs&&u.isXapResource(t.resourceRefs[0])&&n.push({path:["extensions",e,"resourceRefs",0],content:t.resourceRefs[0]})}),t.notes&&t.notes.html&&t.notes.html.content&&t.notes.html.content.paragraphs){var r=["notes","html","content","paragraphs"];t.notes.html.content.paragraphs.forEach(function(t,e){t.spans&&t.spans.forEach(function(t,i){u.isXapResource(t.image)&&n.push({path:r.concat([e,"spans",i,"image"]),content:t.image})})})}return n}(t,e),r=[];if(t.children){var i=t.children,o=function(t){return(i[t]||[]).reduce(function(n,r,i){return n.concat(v(r,e).map(function(e){return"/"===e.path[0]?e:(e.path=["children",t,i].concat(e.path),e)}))},[])};r=[].concat(o(a.TOPIC_TYPE.ATTACHED),o(a.TOPIC_TYPE.CALLOUT),o(a.TOPIC_TYPE.DETACHED),o(a.TOPIC_TYPE.SUMMARY))}return[].concat(n,r)}function m(t){var e={};if(t&&t.markers)for(var n in t.markers){var r=t.markers[n];u.isXapResource(r.resource)&&(e[n]=r.resource)}return e}e.sbUtil=g,t.exports=g}).call(e,n(6))},function(t,e){t.exports=__webpack_require__(54)},function(t,e,n){"use strict";var r,i=(r=n(4))&&r.__esModule?r:{default:r},o=n(0),a=n(1),s=n(13),u={CALLOUTPOSAVAILABLE:{isAvailable:!0,top:0,bottom:0,left:0,right:0},sortBoundaries:function(t){var e,n,r,i=t.length;for(t[0].parent().getChildrenBranchesByType().length,n=0;n<i-1;n++){var o=t[n].model.rangeStart,a=t[n].model.rangeEnd;for(r=n+1;r<i;r++){var s=t[r].model.rangeStart,u=t[r].model.rangeEnd;(o<s||o===s&&a>u)&&(e=t[n],t[n]=t[r],t[r]=e)}}return t},isLineTapered:function(t){var e=t.editDomain().content();return!!e&&!!t.isCentralBranch()&&"tapered"===i.default.getStyleValue(e,o.STYLE_KEYS.LINE_TAPERED)},setBoundaryPadding:function(t){var e=t.getChildrenBranchesByType("attached");a.each(e,function(e,n){e.boundaryBounds=a.extend({},e.bounds),t.boundaries.length&&c(t,e,n)});var n=t.getChildrenBranchesByType(["callout","summary","detached"]);a.each(n,function(t,e){t.boundaryBounds=a.extend({},t.bounds),t.boundaries.length&&c(t,t,e)})},restrictCalloutToRight:function(t,e){var n=t.parent().topicView.bounds,r=e.x+t.boundaryBounds.x+t.boundaryBounds.width-(n.x+n.width);return r<=0?u.CALLOUTPOSAVAILABLE:{isAvailable:!1,top:0,bottom:0,left:Math.abs(r),right:0}},restrictCalloutToLeft:function(t,e){var n=t.parent().topicView.bounds,r=e.x+t.boundaryBounds.x-n.x;return r>=0?u.CALLOUTPOSAVAILABLE:{isAvailable:!1,top:0,bottom:0,left:0,right:Math.abs(r)}},restrictCalloutToBottom:function(t,e){var n=t.parent().topicView.bounds,r=e.y+t.boundaryBounds.y+t.boundaryBounds.height-n.y;return r<=0?u.CALLOUTPOSAVAILABLE:{isAvailable:!1,top:Math.abs(r),bottom:0,left:0,right:0}},restrictCalloutToTop:function(t,e){var n=t.parent().topicView.bounds,r=e.y+t.boundaryBounds.y-(n.y+n.height);return r>=0?u.CALLOUTPOSAVAILABLE:{isAvailable:!1,top:0,bottom:Math.abs(r),left:0,right:0}},mergeCalloutOffset:function(){var t=[].slice.call(arguments),e={isAvailable:!0,top:0,bottom:0,left:0,right:0};return e.isAvailable=t.every(function(t){return t.isAvailable}),t.forEach(function(t){e.top+=t.top,e.bottom+=t.bottom,e.left+=t.left,e.right+=t.right}),e},calcBoundaryTitle:function(t){var e=t.boundaryTitleGroup.bbox().height;return!t.model.get("title")||t.shouldPreventTitle()||0===e?0:e-=5},mergeBounds:function(t,e){var n=a.extend({},e),r=t.reduce(function(t,e){return Math.max(t,e.position.x+e.boundaryBounds.x+e.boundaryBounds.width)},n.x+n.width);n.x=t.reduce(function(t,e){return Math.min(t,e.position.x+e.boundaryBounds.x)},n.x),n.width=r-n.x;var i=t.reduce(function(t,e){return Math.max(t,e.position.y+e.boundaryBounds.y+e.boundaryBounds.height)},n.y+n.height);return n.y=t.reduce(function(t,e){return Math.min(t,e.position.y+e.boundaryBounds.y)},n.y),n.height=i-n.y,n}};function c(t,e,n){var r=s.BOUNDARYGAP;e.outsidePadding={up:0,down:0,left:0,right:0};var i=e.getDirection();a.each(t.boundaries,function(o){var a=u.calcBoundaryTitle(o);if("master"===o.model.get("range"))return t.outsidePadding.up=r+a,t.outsidePadding.down=r,t.outsidePadding.left=r,t.outsidePadding.right=r,t.boundaryBounds.y-=r-a,t.boundaryBounds.height+=2*r+a,t.boundaryBounds.x-=r,void(t.boundaryBounds.width+=2*r);n>=o.model.rangeStart&&n<=o.model.rangeEnd&&("UD"===i?(e.outsidePadding.left+=r,e.outsidePadding.right+=r):(e.outsidePadding.up+=r+a,e.outsidePadding.down+=r)),n===o.model.rangeStart&&("UD"===i?"org.xmind.ui.map.anticlockwise"===t.getStructureClass()&&"left"===e.tag?e.outsidePadding.down+=r:"org.xmind.ui.map.clockwise"===t.getStructureClass()&&"left"===e.tag?e.outsidePadding.down+=r:e.outsidePadding.up+=r+a:e.outsidePadding.left+=r),n===o.model.rangeEnd&&("UD"===i?"org.xmind.ui.map.anticlockwise"===t.getStructureClass()&&"left"===e.tag?e.outsidePadding.up+=r+a:"org.xmind.ui.map.clockwise"===t.getStructureClass()&&"left"===e.tag?e.outsidePadding.up+=r+a:e.outsidePadding.down+=r:e.outsidePadding.right+=r)}),e.boundaryBounds.y-=e.outsidePadding.up,e.boundaryBounds.height+=e.outsidePadding.up+e.outsidePadding.down,e.boundaryBounds.x-=e.outsidePadding.left,e.boundaryBounds.width+=e.outsidePadding.right+e.outsidePadding.left}t.exports=u},function(t,e,n){t.exports={default:n(355),__esModule:!0}},function(t,e,n){"use strict";var r=n(42),i=n(184),o=n(90),a=n(439),s=n(74);function u(t){return t}function c(t,e){for(var n=0;n<t.length;++n)e[n]=255&t.charCodeAt(n);return e}e.newBlob=function(t,n){e.checkSupport("blob");try{return new Blob([t],{type:n})}catch(e){try{var r=new(self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder);return r.append(t),r.getBlob(n)}catch(t){throw new Error("Bug : can't construct the Blob.")}}};var l={stringifyByChunk:function(t,e,n){var r=[],i=0,o=t.length;if(o<=n)return String.fromCharCode.apply(null,t);for(;i<o;)"array"===e||"nodebuffer"===e?r.push(String.fromCharCode.apply(null,t.slice(i,Math.min(i+n,o)))):r.push(String.fromCharCode.apply(null,t.subarray(i,Math.min(i+n,o)))),i+=n;return r.join("")},stringifyByChar:function(t){for(var e="",n=0;n<t.length;n++)e+=String.fromCharCode(t[n]);return e},applyCanBeUsed:{uint8array:function(){try{return r.uint8array&&1===String.fromCharCode.apply(null,new Uint8Array(1)).length}catch(t){return!1}}(),nodebuffer:function(){try{return r.nodebuffer&&1===String.fromCharCode.apply(null,o.allocBuffer(1)).length}catch(t){return!1}}()}};function h(t){var n=65536,r=e.getTypeOf(t),i=!0;if("uint8array"===r?i=l.applyCanBeUsed.uint8array:"nodebuffer"===r&&(i=l.applyCanBeUsed.nodebuffer),i)for(;n>1;)try{return l.stringifyByChunk(t,r,n)}catch(t){n=Math.floor(n/2)}return l.stringifyByChar(t)}function d(t,e){for(var n=0;n<t.length;n++)e[n]=t[n];return e}e.applyFromCharCode=h;var f={};f.string={string:u,array:function(t){return c(t,new Array(t.length))},arraybuffer:function(t){return f.string.uint8array(t).buffer},uint8array:function(t){return c(t,new Uint8Array(t.length))},nodebuffer:function(t){return c(t,o.allocBuffer(t.length))}},f.array={string:h,array:u,arraybuffer:function(t){return new Uint8Array(t).buffer},uint8array:function(t){return new Uint8Array(t)},nodebuffer:function(t){return o.newBufferFrom(t)}},f.arraybuffer={string:function(t){return h(new Uint8Array(t))},array:function(t){return d(new Uint8Array(t),new Array(t.byteLength))},arraybuffer:u,uint8array:function(t){return new Uint8Array(t)},nodebuffer:function(t){return o.newBufferFrom(new Uint8Array(t))}},f.uint8array={string:h,array:function(t){return d(t,new Array(t.length))},arraybuffer:function(t){return t.buffer},uint8array:u,nodebuffer:function(t){return o.newBufferFrom(t)}},f.nodebuffer={string:h,array:function(t){return d(t,new Array(t.length))},arraybuffer:function(t){return f.nodebuffer.uint8array(t).buffer},uint8array:function(t){return d(t,new Uint8Array(t.length))},nodebuffer:u},e.transformTo=function(t,n){if(n||(n=""),!t)return n;e.checkSupport(t);var r=e.getTypeOf(n);return f[r][t](n)},e.getTypeOf=function(t){return"string"==typeof t?"string":"[object Array]"===Object.prototype.toString.call(t)?"array":r.nodebuffer&&o.isBuffer(t)?"nodebuffer":r.uint8array&&t instanceof Uint8Array?"uint8array":r.arraybuffer&&t instanceof ArrayBuffer?"arraybuffer":void 0},e.checkSupport=function(t){if(!r[t.toLowerCase()])throw new Error(t+" is not supported by this platform")},e.MAX_VALUE_16BITS=65535,e.MAX_VALUE_32BITS=-1,e.pretty=function(t){var e,n,r="";for(n=0;n<(t||"").length;n++)r+="\\x"+((e=t.charCodeAt(n))<16?"0":"")+e.toString(16).toUpperCase();return r},e.delay=function(t,e,n){a(function(){t.apply(n||null,e||[])})},e.inherits=function(t,e){var n=function(){};n.prototype=e.prototype,t.prototype=new n},e.extend=function(){var t,e,n={};for(t=0;t<arguments.length;t++)for(e in arguments[t])arguments[t].hasOwnProperty(e)&&void 0===n[e]&&(n[e]=arguments[t][e]);return n},e.prepareContent=function(t,n,o,a,u){return s.Promise.resolve(n).then(function(t){return r.blob&&(t instanceof Blob||-1!==["[object File]","[object Blob]"].indexOf(Object.prototype.toString.call(t)))&&"undefined"!=typeof FileReader?new s.Promise(function(e,n){var r=new FileReader;r.onload=function(t){e(t.target.result)},r.onerror=function(t){n(t.target.error)},r.readAsArrayBuffer(t)}):t}).then(function(n){var l,h=e.getTypeOf(n);return h?("arraybuffer"===h?n=e.transformTo("uint8array",n):"string"===h&&(u?n=i.decode(n):o&&!0!==a&&(n=c(l=n,r.uint8array?new Uint8Array(l.length):new Array(l.length)))),n):s.Promise.reject(new Error("Can't read the data of '"+t+"'. Is it in a supported JavaScript type (String, Blob, ArrayBuffer, etc) ?"))})}},function(t,e,n){"use strict";t.exports={PADDING:20,BOUNDARYGAP:10,MARGIN:0,ROTATEDCOS:Math.cos(Math.PI/9),ROTATEDSIN:Math.sin(Math.PI/9),ROTATEDTAN:Math.tan(Math.PI/9),COL_GAP:13,EXT_GAP:14,COL_RADIUS:6,EXT_RADIUS:8,MATRIX_PLUS_RADIUS:9,SUMMARYLINEMARGIN:{TOSUMMARY:10,TORANGE:10,TOBOUNDARY:5},LINECOLPOS:13}},function(t,e,n){"use strict";var r=n(22);function i(t,e){var n=Math.min(t.x,e.x),r=Math.min(t.y,e.y);return{x:n,y:r,width:Math.max(t.x+t.width,e.x+e.width)-n,height:Math.max(t.y+t.height,e.y+e.height)-r}}function o(t){var e=1/0,n=1/0,r=-1/0,i=-1/0;return t.forEach(function(t){t.x<e&&(e=t.x),t.x>r&&(r=t.x),t.y<n&&(n=t.y),t.y>i&&(i=t.y)}),{x:e,y:n,height:i-n,width:r-e}}t.exports={isEqual:function(t,e){return t.x===e.x&&t.y===e.y&&t.width===e.width&&t.height===e.height},isIntersect:function(t,e){return!(e.x>t.x+t.width||t.x>e.x+e.width||e.y>t.y+t.height||t.y>e.y+e.height)},isContainPoint:function(t,e){return!(e.x<t.x||e.x>t.x+t.width||e.y<t.y||e.y>t.y+t.height)},merge:i,mergeArr:function(t){if(!Array.isArray(t))throw"Wrong arguements";return 0===t.length?{x:0,y:0,width:0,height:0}:1===t.length?t[0]:t.reduce(function(t,e){return i(t,e)})},inflate:function(t,e){return{x:t.x-e,y:t.y-e,width:t.width+2*e,height:t.height+2*e}},move:function(t,e){return{x:e.x+t.x,y:e.y+t.y,width:t.width,height:t.height}},fromPoints:o,rotate:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;return o([{x:t.x,y:t.y},{x:t.x+t.width,y:t.y},{x:t.x+t.width,y:t.y+t.height},{x:t.x,y:t.y+t.height}].map(function(t){return r.rotateAroundDeg(t,{x:n,y:i},e)}))}}},function(t,e){var n=t.exports={version:"2.5.3"};"number"==typeof __e&&(__e=n)},function(t,e){t.exports=__webpack_require__(279)},function(t,e,n){t.exports={default:n(347),__esModule:!0}},function(t,e,n){var r;r=function(t){var e,n,r,i,o,a,s,u,c,l,h,d,f,p,g,v,m,y,_;t.lib.Cipher||(r=(n=t).lib,i=r.Base,o=r.WordArray,a=r.BufferedBlockAlgorithm,(s=n.enc).Utf8,u=s.Base64,c=n.algo.EvpKDF,l=r.Cipher=a.extend({cfg:i.extend(),createEncryptor:function(t,e){return this.create(this._ENC_XFORM_MODE,t,e)},createDecryptor:function(t,e){return this.create(this._DEC_XFORM_MODE,t,e)},init:function(t,e,n){this.cfg=this.cfg.extend(n),this._xformMode=t,this._key=e,this.reset()},reset:function(){a.reset.call(this),this._doReset()},process:function(t){return this._append(t),this._process()},finalize:function(t){return t&&this._append(t),this._doFinalize()},keySize:4,ivSize:4,_ENC_XFORM_MODE:1,_DEC_XFORM_MODE:2,_createHelper:function(){function t(t){return"string"==typeof t?_:m}return function(e){return{encrypt:function(n,r,i){return t(r).encrypt(e,n,r,i)},decrypt:function(n,r,i){return t(r).decrypt(e,n,r,i)}}}}()}),r.StreamCipher=l.extend({_doFinalize:function(){return this._process(!0)},blockSize:1}),h=n.mode={},d=r.BlockCipherMode=i.extend({createEncryptor:function(t,e){return this.Encryptor.create(t,e)},createDecryptor:function(t,e){return this.Decryptor.create(t,e)},init:function(t,e){this._cipher=t,this._iv=e}}),f=h.CBC=function(){var t=d.extend();function n(t,n,r){var i=this._iv;if(i){var o=i;this._iv=e}else o=this._prevBlock;for(var a=0;a<r;a++)t[n+a]^=o[a]}return t.Encryptor=t.extend({processBlock:function(t,e){var r=this._cipher,i=r.blockSize;n.call(this,t,e,i),r.encryptBlock(t,e),this._prevBlock=t.slice(e,e+i)}}),t.Decryptor=t.extend({processBlock:function(t,e){var r=this._cipher,i=r.blockSize,o=t.slice(e,e+i);r.decryptBlock(t,e),n.call(this,t,e,i),this._prevBlock=o}}),t}(),p=(n.pad={}).Pkcs7={pad:function(t,e){for(var n=4*e,r=n-t.sigBytes%n,i=r<<24|r<<16|r<<8|r,a=[],s=0;s<r;s+=4)a.push(i);var u=o.create(a,r);t.concat(u)},unpad:function(t){var e=255&t.words[t.sigBytes-1>>>2];t.sigBytes-=e}},r.BlockCipher=l.extend({cfg:l.cfg.extend({mode:f,padding:p}),reset:function(){l.reset.call(this);var t=this.cfg,e=t.iv,n=t.mode;if(this._xformMode==this._ENC_XFORM_MODE)var r=n.createEncryptor;else r=n.createDecryptor,this._minBufferSize=1;this._mode&&this._mode.__creator==r?this._mode.init(this,e&&e.words):(this._mode=r.call(n,this,e&&e.words),this._mode.__creator=r)},_doProcessBlock:function(t,e){this._mode.processBlock(t,e)},_doFinalize:function(){var t=this.cfg.padding;if(this._xformMode==this._ENC_XFORM_MODE){t.pad(this._data,this.blockSize);var e=this._process(!0)}else e=this._process(!0),t.unpad(e);return e},blockSize:4}),g=r.CipherParams=i.extend({init:function(t){this.mixIn(t)},toString:function(t){return(t||this.formatter).stringify(this)}}),v=(n.format={}).OpenSSL={stringify:function(t){var e=t.ciphertext,n=t.salt;if(n)var r=o.create([1398893684,1701076831]).concat(n).concat(e);else r=e;return r.toString(u)},parse:function(t){var e=u.parse(t),n=e.words;if(1398893684==n[0]&&1701076831==n[1]){var r=o.create(n.slice(2,4));n.splice(0,4),e.sigBytes-=16}return g.create({ciphertext:e,salt:r})}},m=r.SerializableCipher=i.extend({cfg:i.extend({format:v}),encrypt:function(t,e,n,r){r=this.cfg.extend(r);var i=t.createEncryptor(n,r),o=i.finalize(e),a=i.cfg;return g.create({ciphertext:o,key:n,iv:a.iv,algorithm:t,mode:a.mode,padding:a.padding,blockSize:t.blockSize,formatter:r.format})},decrypt:function(t,e,n,r){return r=this.cfg.extend(r),e=this._parse(e,r.format),t.createDecryptor(n,r).finalize(e.ciphertext)},_parse:function(t,e){return"string"==typeof t?e.parse(t,this):t}}),y=(n.kdf={}).OpenSSL={execute:function(t,e,n,r){r||(r=o.random(8));var i=c.create({keySize:e+n}).compute(t,r),a=o.create(i.words.slice(e),4*n);return i.sigBytes=4*e,g.create({key:i,iv:a,salt:r})}},_=r.PasswordBasedCipher=m.extend({cfg:m.cfg.extend({kdf:y}),encrypt:function(t,e,n,r){var i=(r=this.cfg.extend(r)).kdf.execute(n,t.keySize,t.ivSize);r.iv=i.iv;var o=m.encrypt.call(this,t,e,i.key,r);return o.mixIn(i),o},decrypt:function(t,e,n,r){r=this.cfg.extend(r),e=this._parse(e,r.format);var i=r.kdf.execute(n,t.keySize,t.ivSize,e.salt);return r.iv=i.iv,m.decrypt.call(this,t,e,i.key,r)}}))},t.exports=r(n(7),n(49))},function(t,e,n){"use strict";var r,i=(r=n(4))&&r.__esModule?r:{default:r},o=n(0),a=n(20),s=n(29),u=n(10),c=n(13),l=n(293),h=n(79),d=n(98),f=n(5),p=n(8),g=n(0),v=g.STRUCTURECLASS,m=g.DIRECTION,y=g.BRANCHCONNECTION,_=g.ATTACHED_EXPOSED_STRUCTURE,E=n(1),A=c.PADDING,S=(c.EXTCOLGAP,c.SUMMARYLINEMARGIN),T=u.isLineTapered,x=n(14),b=n(298),w={STRUCTURECLASS:"",isAttachedChildrenStructureImmutable:!1,getRangeGrowthDirection:function(){return m.DOWN},getSummaryDirection:function(){return m.RIGHT},getSourceOrientation:function(){return m.RIGHT},getChildTargetOrientation:function(t,e){return m.LEFT},isInSameRangeWithLast:function(t,e){return!(e<=0||e>=t.getChildrenBranchesByType().length)&&this.isInSameRange(t,e)},isInSameRange:function(t,e){var n,r,i;for(n=0;n<t.boundaries.length;n++)if(e-1>=(r=t.boundaries[n]).model.rangeStart&&e<=r.model.rangeEnd)return!0;for(n=0;n<t.summaries.length;n++)if(e-1>=(i=t.summaries[n]).model.rangeStart&&e<=i.model.rangeEnd)return!0;return!1},calBoundsAndChildrenPos:function(t){var e=E.extend({},t.bounds),n=E.extend({},t.topicView.bounds);E.each(t.boundaries,function(t){t.render()}),this.calChildrenBounds(t),this.layoutExtendCollapse(t,n),t.model.isCollapse()||(this.calAttachedChildrenPos(t,n),this.specialDeal(t,n),this.calSummaryChildrenPos(t,n),t.isInMatrix()||this.calCalloutChildrenPos(t,n),this.calDetachedChildrenPos(t,n)),t.bounds=n,e&&t.bounds.x===e.x&&t.bounds.y===e.y&&t.bounds.width===e.width&&t.bounds.height===e.height||t.trigger("change:bounds")},calChildrenBounds:function(t){t.calChildrenBounds()},calAttachedChildrenPos:function(t,e){throw new Error("calAttachedChildrenPos must be overrided")},calCalloutChildrenPos:function(t,e){var n=this;t.getChildrenBranchesByType(o.TOPIC_CALLOUT).forEach(function(r,i){var o=E.extend({x:0,y:0},r.model.get("position")),a=r.boundaryBounds,s=new b.OldHitDetect(r,{checkCoord:function(t){return function(t,e){var r=t.parent().getRealPosition(),i=t.boundaryBounds,o={x:e.left-r.x-i.x,y:e.top-r.y-i.y},a=n.checkCalloutPosition(t,o);return a.isAvailable||(a.left&&(e.left-=a.left,e.right-=a.left),a.right&&(e.left+=a.right,e.right+=a.right),a.top&&(e.top-=a.top,e.bottom-=a.top),a.bottom&&(e.top+=a.bottom,e.bottom+=a.bottom)),!0}(this.branch,t)}}),u=s.calCoords(),c=s.getChildPosList(t,!1),l=s.calPosition(u,c);o={x:o.x+l.left-u.left,y:o.y+l.top-u.top},r.setPosition(o.x,o.y);var h=Math.max(e.x+e.width,o.x+a.x+a.width),d=Math.max(e.y+e.height,o.y+a.y+a.height);e.x=Math.min(e.x,o.x+a.x),e.width=Math.max(e.width,h-e.x),e.y=Math.min(e.y,o.y+a.y),e.height=Math.max(e.height,d-e.y)})},calSummaryChildrenPos:function(t,e){var n=t.getChildrenBranchesByType(o.TOPIC_SUMMARY);n.length&&E.each(n,function(n,r){this.renderSummary(t,n,e)},this)},calDetachedChildrenPos:function(t,e){if(t.isCentralBranch()){var n=t.model.ownerSheet().isTopicOverlapping(),r=t.getChildrenBranchesByType(o.TOPIC_DETACHED);r.forEach(function(t){var e=t.model.getPosition();if(n&&e)return t.actualRealArea=b.getTopicRealArea(t),t.setPosition(e.x,e.y);var r=b.getActualArea(t);return t.actualRealArea=r,t.setPosition(r.x,r.y)}),E.extend(e,u.mergeBounds(r,e))}},_calDetachedChildrenPos:function(t,e){},isInBounds:function(t,e){var n,r,i;for(n=0;n<t.boundaries.length;n++)if(e>=(r=t.boundaries[n]).model.rangeStart&&e<=r.model.rangeEnd)return!0;for(n=0;n<t.summaries.length;n++)if(e>=(i=t.summaries[n]).model.rangeStart&&e<=i.model.rangeEnd)return!0;return!1},drawConnectLine:function(t,e){return e.isCalloutBranch()?s[y.CALLOUTLINE](e):this.drawAttachedConnectLine(t,e)},drawAttachedConnectLine:function(t,e){var n,r,i=t.topicLineStyle,o=this.STRUCTURECLASS;n=a[t.topicView.topicShapeStyle].getStartAnchorLocation(t,e),r=a[t.topicView.topicShapeStyle].getControlLocation(t,e);var u=a[e.topicView.topicShapeStyle].getEndAnchorLocation(this,e),c=v.ORGCHARTUP===o||v.ORGCHARTDOWN===o,l={startPos:n,colPos:r,endPos:u};s[i](e,l,T(t),c)},specialDeal:function(t,e){t.removeFishTail()},layoutExtendCollapse:function(t,e){var n=t,r=t.isRotate(),i=t.model.isCollapse(),s=e,u=this.getSourceOrientation();if(t.getChildrenBranchesByType()[0]){var l=a[t.topicView.topicShapeStyle].getExtColPosition(t),h=0;if(t.topicView.topicShapeStyle===o.TOPICSHAPE.PARALLELOGRAM&&(h=t.topicView.shapeBounds.height/4),n.collapseExtendView&&!n.collapseExtendView.isHide()){var d=c.EXT_RADIUS,f=c.COL_RADIUS,p=c.EXT_GAP,g=c.COL_GAP,v=i?p:g,y=i?d:f,_=2*y,E=t.topicView.shapeBounds;switch(u){case m.RIGHT:n.collapseExtendView.move(E.x+E.width+v-y,-y+l.y),n.collapseExtendView.drawConnection({x1:0,y1:y,x2:-v+y-h,y2:y}),!r&&i&&(s.width+=v+y);break;case m.LEFT:n.collapseExtendView.move(E.x-v-y,-y+l.y),n.collapseExtendView.drawConnection({x1:_,y1:y,x2:v+y+h,y2:y}),!r&&i&&(s.width+=v+y,s.x-=v+y);break;case m.DOWN:n.collapseExtendView.move(-y+l.x,E.y+E.height+v-y),n.collapseExtendView.drawConnection({x1:y,y1:0,x2:y,y2:-v+y}),!r&&i&&(s.height+=v+y);break;case m.UP:n.collapseExtendView.move(-y+l.x,E.y-v-y),n.collapseExtendView.drawConnection({x1:y,y1:_,x2:y,y2:v+y}),!r&&i&&(s.height+=v+y,s.y-=v+y)}n.collapseExtendView.renderHoverArea()}}},renderSummary:function(t,e,n){var r,a,s=t.getChildrenBranchesByType(o.TOPIC_ATTACHED).filter(function(t){return!0!==t._draged}),u=A+S.TOSUMMARY+S.TORANGE,c=e.summaryModel.rangeStart,h=e.summaryModel.rangeEnd,p=s.length,g=this.getSummaryDirection(t,c);if(!p)return!1;switch(g){case m.RIGHT:var v=0,y=0,_=Number.NEGATIVE_INFINITY,E=Number.MAX_VALUE,T=Number.NEGATIVE_INFINITY;for(y=c;y<=h;y++)_=Math.max(_,s[y].boundaryBounds.x+s[y].boundaryBounds.width+s[y].position.x),E=Math.min(E,s[y].boundaryBounds.y+s[y].position.y),T=Math.max(T,s[y].boundaryBounds.y+s[y].position.y+s[y].boundaryBounds.height);if(r=(T+E)/2,s[h]&&s[c]){e.setPosition(_-e.boundaryBounds.x+u,r);var x=Math.max(n.y+n.height,r+e.boundaryBounds.y+e.boundaryBounds.height);v=_+e.boundaryBounds.width+u,n.y=Math.min(n.y,r+e.boundaryBounds.y),n.height=x-n.y,n.width=Math.max(v-n.x,n.width),L(e,(T-E)/2),N(e,"UD")}break;case m.LEFT:var b=Number.MAX_VALUE;for(E=Number.MAX_VALUE,T=Number.NEGATIVE_INFINITY,I=c;I<=h;I++)b=Math.min(b,s[I].boundaryBounds.x+s[I].position.x),E=Math.min(E,s[I].boundaryBounds.y+s[I].position.y),T=Math.max(T,s[I].boundaryBounds.y+s[I].position.y+s[I].boundaryBounds.height);if(s[h]&&s[c]){r=(E+T)/2;var w=b-e.boundaryBounds.width-e.boundaryBounds.x-u;e.setPosition(w,r),x=Math.max(n.y+n.height,r+e.boundaryBounds.y+e.boundaryBounds.height),n.y=Math.min(n.y,r+e.boundaryBounds.y),n.height=x-n.y,C=n.x+n.width,n.x=Math.min(n.x,w+e.boundaryBounds.x),n.width=Math.max(C-n.x,n.width),L(e,(T-E)/2),N(e,"UD")}break;case m.DOWN:for(T=Number.NEGATIVE_INFINITY,I=c;I<=h;I++)T=Math.max(T,s[I].boundaryBounds.y+s[I].boundaryBounds.height+s[I].position.y);if(s[h]&&s[c]){a=(s[h].boundaryBounds.x+s[h].boundaryBounds.width+s[h].position.x+(s[c].boundaryBounds.x+s[c].position.x))/2,e.setPosition(a,T-e.boundaryBounds.y+u);var C=Math.max(n.x+n.width,a+e.boundaryBounds.x+e.boundaryBounds.width);n.x=Math.min(n.x,a+e.boundaryBounds.x),n.width=C-n.x,n.height=Math.max(n.height,T+u+e.boundaryBounds.height-n.y),L(e,(s[h].boundaryBounds.x+s[h].boundaryBounds.width+s[h].position.x-(s[c].boundaryBounds.x+s[c].position.x))/2,!0),N(e,"LR")}break;case m.UP:var I;for(E=Number.MAX_VALUE,I=c;I<=h;I++)E=Math.min(E,s[I].boundaryBounds.y+s[I].position.y);s[h]&&s[c]&&(a=(s[h].boundaryBounds.x+s[h].boundaryBounds.width+s[h].position.x+(s[c].boundaryBounds.x+s[c].position.x))/2,e.setPosition(a,E-u-e.boundaryBounds.height-e.boundaryBounds.y),C=Math.max(n.x+n.width,a+e.boundaryBounds.x+e.boundaryBounds.width),n.x=Math.min(n.x,a+e.boundaryBounds.x),n.width=C-n.x,x=n.y+n.height,n.y=Math.min(n.y,E-u-e.boundaryBounds.height),n.height=Math.max(n.height,x-n.y),L(e,(s[h].boundaryBounds.x+s[h].boundaryBounds.width+s[h].position.x-(s[c].boundaryBounds.x+s[c].position.x))/2,!0),N(e,"LR"))}function L(t,e,n){var r,a,s,u,c;if(g===m.RIGHT||g===m.LEFT){var h=g===m.RIGHT;r=t.linePosition.x+t.boundaryBounds.x+(h?0:1)*t.boundaryBounds.width-(h?1:-1)*S.TOSUMMARY,a=t.linePosition.y,s={startPos:{x:u=r-(h?1:-1)*A,y:a-e},middlePos:{x:r,y:a},endPos:{x:u,y:a+e}}}else if(g===m.UP||g===m.DOWN){var d=g===m.UP;s={startPos:{x:(r=t.linePosition.x)-e,y:c=(a=t.linePosition.y+t.boundaryBounds.y+(d?1:0)*t.boundaryBounds.height-(d?-1:1)*S.TOSUMMARY)+(d?1:-1)*A},middlePos:{x:r,y:a},endPos:{x:r+e,y:c}}}var f=i.default.getStyleValue(t.summaryView,o.STYLE_KEYS.SHAPE_CLASS);l[f](t,s,n)}function N(t,e){t.selectBox||(t.selectBox=new d({refView:t})),t.selectBox.render(e),t.stopListening(t,"afterRealPosChange"),t.listenTo(t,"afterRealPosChange",function(){f.setAsyncExcute(t,"summarySelectBox"+t.cid,function(){t.selectBox.render(e)})})}},getChildStructure:function(t,e){return t},getAvailableChildStructure:function(t,e){return _},getCalloutStructure:function(t,e){return this.getChildStructure(this.STRUCTURECLASS,0,t)},checkCalloutPosition:function(t,e){return u.CALLOUTPOSAVAILABLE},calcSpacingMajor:function(t){return parseInt(i.default.getStyleValue(t,o.STYLE_KEYS.SPACING_MAJOR)||0)},calcPolygons:function(t){return 0===t.getChildrenBranchesByType().length||t.model.isCollapse()?this.calcNoChildrenPolygons(t):this.calcChildrenPolygons(t)},calcNoChildrenPolygons:function(t){var e=[];return e=(e=e.concat(this.getPointsOfBase(t))).concat(this.getPointsOfNoChildren(t)),[{points:p.convexHull(e),relatedBranch:[],side:null}]},calcChildrenPolygons:function(t){var e=this.getPointsOfBase(t),n=this.getRangeGrowthDirection(),r=t.getChildrenBranchesByType();return e=(e=e.concat(h.getSidePointsWithGap(r[0],h.getOppositeDirection(n)))).concat(h.getSidePointsWithGap(r[r.length-1],n)),r.forEach(function(t){e.concat(h.getCornerPoints(t,t.position))}),[{points:p.convexHull(e),relatedBranch:r,side:null}]},getPointsOfBase:function(t){var e=this.getSourceOrientation();return(t.isCentralBranch()||t.isDetachedBranch())&&(e=h.getOppositeDirection(e)),h.getSidePoints(t,e).reverse()},getPointsOfNoChildren:function(t){return h.getPointsOfNoChildren(t,this.getSourceOrientation())},getChildrenSize:function(t){var e=t.getChildrenBranchesByType(o.TOPIC_ATTACHED);return x.mergeArr(e.map(function(t){return x.move(t.boundaryBounds,t.position)}))}};t.exports=w},function(t,e,n){"use strict";var r,i=s(n(3)),o=s(n(4)),a=n(0);function s(t){return t&&t.__esModule?t:{default:t}}var u=n(8),c=n(13),l=n(5),h=n(1),d=n(78),f=n(22),p=n(14),g=c.ROTATEDTAN,v=Math.sin(Math.PI/9),m=Math.cos(Math.PI/9),y=c.LINECOLPOS,_=[a.BRANCHCONNECTION.ROUNDEDELBOW,a.BRANCHCONNECTION.CURVE,a.BRANCHCONNECTION.ELBOW],E=_.concat([a.BRANCHCONNECTION.STRAIGHT,a.BRANCHCONNECTION.ARROWEDCURVE,a.BRANCHCONNECTION.FOLD,a.BRANCHCONNECTION.ROUNDEDFOLD]),A=E.concat([a.BRANCHCONNECTION.BIGHT]),S=function(t){var e=t.getStructureClass(),n=t.topicView.topicShapeStyle,r=t.topicLineStyle;return C(e)?function(t,e){return function(t){switch(t){case a.TOPICSHAPE.UNDERLINE:return _;case a.TOPICSHAPE.CLOUD:case a.TOPICSHAPE.PARALLELOGRAM:return A;default:return E}}(n).indexOf(e)>=0}(0,r)?"DIVER_LINE":function(t,e){return function(t){switch(t){case a.TOPICSHAPE.UNDERLINE:case a.TOPICSHAPE.DIAMOND:case a.TOPICSHAPE.HEXAGON:case a.TOPICSHAPE.PARALLELOGRAM:return[];default:return[a.BRANCHCONNECTION.BIGHT]}}(n).indexOf(e)>=0}(0,r)?"ORDER_LINE":"FOCUS_LINE":"FOCUS_LINE"},T=function(t,e){return{x:t.x+e.x,y:t.y+e.y}},x=function(t,e,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:n;switch(t=(0,i.default)({},t),e){case a.DIRECTION.LEFT:t.x-=n;break;case a.DIRECTION.RIGHT:t.x+=n;break;case a.DIRECTION.UP:t.y-=r;break;case a.DIRECTION.DOWN:t.y+=r}return t},b=function(t,e){var n=t.topicView.shapeBounds,r=n.x,i=n.y,o=n.width,s=n.height,u={x:0,y:0};switch(e){case a.DIRECTION.LEFT:u.x+=r;break;case a.DIRECTION.RIGHT:u.x+=r+o;break;case a.DIRECTION.UP:u.y+=i;break;case a.DIRECTION.DOWN:u.y+=i+s}return u},w=function(t,e){return T(t,e.linePosition)},C=function(t){return-1!==t.indexOf(a.STRUCTURECLASS.MAP)},I=function(t,e){switch(t.getStructureClass()){case a.STRUCTURECLASS.LOGICRIGHT:case a.STRUCTURECLASS.TIMELINEHORIZONTAL:return a.DIRECTION.RIGHT;case a.STRUCTURECLASS.LOGICLEFT:return a.DIRECTION.LEFT;case a.STRUCTURECLASS.ORGCHARTUP:case a.STRUCTURECLASS.TIMELINEHORIZONTALUP:return a.DIRECTION.UP;case a.STRUCTURECLASS.ORGCHARTDOWN:case a.STRUCTURECLASS.TREELEFT:case a.STRUCTURECLASS.TREERIGHT:case a.STRUCTURECLASS.TIMELINEVERTICAL:case a.STRUCTURECLASS.TIMELINEHORIZONTALDOWN:return a.DIRECTION.DOWN;default:return void 0===e?a.DIRECTION.RIGHT:e.linePosition.x<t.linePosition.x?a.DIRECTION.LEFT:a.DIRECTION.RIGHT}},L=function(t,e){switch(t.getStructureClass()){case a.STRUCTURECLASS.LOGICRIGHT:case a.STRUCTURECLASS.TREERIGHT:case a.STRUCTURECLASS.TIMELINEHORIZONTAL:case a.STRUCTURECLASS.TIMELINEHORIZONTALUP:case a.STRUCTURECLASS.TIMELINEHORIZONTALDOWN:return a.DIRECTION.LEFT;case a.STRUCTURECLASS.LOGICLEFT:case a.STRUCTURECLASS.TREELEFT:return a.DIRECTION.RIGHT;case a.STRUCTURECLASS.ORGCHARTUP:return a.DIRECTION.DOWN;case a.STRUCTURECLASS.ORGCHARTDOWN:return a.DIRECTION.UP;default:return void 0===e?a.DIRECTION.LEFT:e.linePosition.x<t.linePosition.x?a.DIRECTION.RIGHT:a.DIRECTION.LEFT}};function N(t,e){var n=t.topicView.bounds,r=t.linePosition,i=e.linePosition,o=i.x-r.x>0,a=o?(n.x+n.width)*(2/3):n.x*(2/3),s=o?.1:-.1,u=o?n.x:-n.x;return{x:function(t,e,n){e=Math.abs(e);var r=n/Math.abs(n);if((t=Math.abs(t))<O)return r*e;var i=n=Math.abs(n),o=((M*e+(1-M)*n)*R-(e-n)*O)/((1-M)*e+(M-2)*n);return r*((e-n)*(O+o)/(t+o)+i)}(i.y-r.y,a,s)+u,y:0}}var O=100,R=600,M=.1;function D(t,e){var n=t.getStructureClass(),r=t.topicView.bounds.height-5,i=e.linePosition.x>t.linePosition.x;i=[a.STRUCTURECLASS.MAPANTICLOCKWISE,a.STRUCTURECLASS.MAPFLOATINGANTICLOCKWISE].includes(n)?!i:i;var o=t.getChildrenBranchesByType(),s=o.length,u=0;o.forEach(function(e){e.linePosition.x>t.linePosition.x&&u++});var c=i?u:s-u,l=o.indexOf(e)-(i?0:u),h=0,d=Math.min(r/(c+1),3);h=c%2?(l-Math.floor(c/2))*d:(l-(c/2-.5))*d;var f=-1;return[a.STRUCTURECLASS.MAP,a.STRUCTURECLASS.MAPFLOATING].includes(n)&&(f=1),{x:0,y:h*=i?1:f}}function P(t){var e=parseInt(o.default.getStyleValue(t,a.STYLE_KEYS.BORDER_LINE_WIDTH)||0),n=t.topicView.shapeBounds;return{x:0,y:n.y+n.height-1*e/2}}function k(t,e){var n=I(t,e),r=-t.topicView.shapeBounds.height/4;return x({x:0,y:0},n,r,0)}var B={_getOffsetFns:function(t){switch(S(t)){case"DIVER_LINE":return[N];case"ORDER_LINE":return[D];default:return[]}},getStartAnchorLocation:function(t,e){var n=I(t,e),r=b(t,n),i=w(r,t);return n===a.DIRECTION.UP||n===a.DIRECTION.DOWN?i:this._getOffsetFns(t).map(function(n){return n(t,e)}).reduce(function(t,e){return T(t,e)},i)},getControlLocation:function(t,e){var n=this.getStartAnchorLocation(t,e);switch(S(t)){case"DIVER_LINE":case"ORDER_LINE":return n;default:var r=I(t,e),i=function(t,e,n){var r=t.topicView.topicShapeStyle===a.TOPICSHAPE.PARALLELOGRAM,i=t.topicLineStyle===a.BRANCHCONNECTION.BIGHT;if(t.isCentralBranch(),r){if(i)return e;var o=b(t,n);return w(o,t)}return e}(t,n,r),o=y*(t.topicLineStyle===a.BRANCHCONNECTION.BIGHT?0:1);return x(i,r,o)}},getEndAnchorLocation:function(t,e){var n=e.parent(),r=L(n,e),i=w(b(e,r),e);return x(i,r,-1)},getExtColPosition:function(t){var e=I(t);return b(t,e)},_prefInsets:function(t,e){t.model;var n=parseInt(o.default.getStyleValue(t,a.STYLE_KEYS.BORDER_LINE_WIDTH)||0);return{top:parseInt(o.default.getStyleValue(t,a.STYLE_KEYS.MARGIN_TOP)||0)+n,left:parseInt(o.default.getStyleValue(t,a.STYLE_KEYS.MARGIN_LEFT)||0)+n,bottom:parseInt(o.default.getStyleValue(t,a.STYLE_KEYS.MARGIN_BOTTOM)||0)+n,right:parseInt(o.default.getStyleValue(t,a.STYLE_KEYS.MARGIN_RIGHT)||0)+n}},prefInsets:function(t,e){return j(t,this._prefInsets(t,e))},render:function(t){return this._render(t),this._rotate(t),t},_render:function(t){var e=t.topicShape.remember("bounds"),n=Y(t.parent()),r=this.getDrawBounds(t.shapeBounds,n),i=t.topicShape.remember("topicShapeStyle");if(e&&!p.isEqual(e,r)||i!==this.type){var o=this._generateD(r);t.topicShape.remember("bounds",r),t.topicShape.attr({d:o,"stroke-width":n}),t.topicShapeFill.attr({d:o}),H(t),this.fillTopicShapeSelectBox(t,r)}return t},fillTopicShapeSelectBox:function(t,e){var n=Y(t.parent()),r=this._generateSelectD(e,n);t.topicShapeSelectBox.attr({d:r})},_generateSelectD:function(t,e){return l.generateRect(t,2,3,e)},_generateD:function(t){throw"Need impl"},_rotate:function(t){t.topicGroup.rotate(0)},updateBounds:function(t){},innerPointToOuterPoint:function(t,e){return{x:t.linePosition.x+e.x,y:t.linePosition.y+e.y}},getDrawBounds:function(t,e){var n=e/2;return{x:t.x+n,y:t.y+n,width:t.width-e,height:t.height-e}}},F=h.extend({},B,{_render:function(t,e){var n=t.topicShape.remember("bounds"),r=Y(t.parent()),i=this.getDrawBounds(t.shapeBounds,r);e&&(i.y+=r/2);var o=t.topicShape.remember("topicShapeStyle");if(!n||n.x!==i.x||n.y!==i.y||n.width!==i.width||n.height!==i.height||o!==a.TOPICSHAPE.UNDERLINE){var s;s=e?"M  "+i.x+" "+i.y+"L "+(i.x+i.width)+" "+i.y+"z":"M  "+i.x+" "+(i.y+i.height)+"L "+(i.x+i.width)+" "+(i.y+i.height)+"z",t.topicShape.remember("bounds",i),t.topicShape.attr({d:s});var u=d.rect(i);t.topicShapeFill.attr({d:u}),H(t),this.fillTopicShapeSelectBox(t,i)}return t},_prefInsets:function(t,e,n){var r=G(t),i=r.lm,o=r.rm,a=r.tm,s=r.bm,u=r.lw;return{top:a+n?u:0,left:i,bottom:s+n?0:u,right:o}},_getOffsetFns:function(t){switch(S(t)){case"DIVER_LINE":return[N];case"ORDER_LINE":return[D];default:return[P]}},getEndAnchorLocation:function(t,e){var n=e.parent(),r=L(n,e),i=w(b(e,r),e);if(r===a.DIRECTION.UP||r===a.DIRECTION.DOWN)return i;var o=P(e);return T(i,o)},getExtColPosition:function(t){var e=I(t),n=b(t,e);if(e===a.DIRECTION.UP||e===a.DIRECTION.DOWN)return n;var r=P(t);return T(n,r)},getDrawBounds:function(t,e){var n=e/2;return{x:t.x,y:t.y+n,width:t.width,height:t.height-e}}}),V=h.extend({},B,{type:a.TOPICSHAPE.ROUNDEDRECT,_generateD:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:5;return"M "+(t.x+e)+" "+t.y+"L "+(t.x+t.width-e)+" "+t.y+"Q "+(t.x+t.width)+" "+t.y+"  "+(t.x+t.width)+" "+(t.y+e)+"L "+(t.x+t.width)+" "+(t.y+t.height-e)+"Q "+(t.x+t.width)+" "+(t.y+t.height)+"  "+(t.x+t.width-e)+" "+(t.y+t.height)+"L "+(t.x+e)+" "+(t.y+t.height)+"Q "+t.x+" "+(t.y+t.height)+"  "+t.x+" "+(t.y+t.height-e)+"L "+t.x+" "+(t.y+e)+"Q "+t.x+" "+t.y+"  "+(t.x+e)+" "+t.y}}),U=((r={})[a.TOPICSHAPE.RECT]=h.extend({},B,{type:a.TOPICSHAPE.RECT,_generateD:d.rect}),r[a.TOPICSHAPE.ROUNDEDRECT]=V,r[a.TOPICSHAPE.ELLIPSERECT]=h.extend({},B,{type:a.TOPICSHAPE.ELLIPSERECT,_prefInsets:function(t,e){var n=G(t),r=n.tm,i=n.bm,o=n.lw,a=r+o,s=i+o,u=(a+e.height+s)/2;return{top:a,bottom:s,left:o+u,right:o+u}},_generateD:function(t){var e=t.x,n=t.y,r=t.width,i=t.height,o=t.height/2,a=e+o,s=e+r-o,u=n+i,c=o/.75,l=a-c,h=s+c;return"M "+a+" "+n+"\n        C "+l+" "+n+" "+l+" "+u+" "+a+" "+u+"\n        L "+s+" "+u+"\n        C "+h+" "+u+" "+h+" "+n+" "+s+" "+n+"\n        L "+a+" "+n}}),r[a.TOPICSHAPE.ELLIPSE]=h.extend({},B,{type:a.TOPICSHAPE.ELLIPSE,_prefInsets:function(t,e){t.model;var n=G(t),r=n.lm,i=n.rm,o=n.tm,a=n.bm,s=n.lw,c=n.fontSize,l=.5*e.width+2,h=.5*e.height+2,d=2*(1*l+h)/1,f=4*l*h/1,p=-l*l*h*h/1,g=u.newton([1,d,f,0,p],l/2),v=1*g,m=Math.round(v),y=Math.round(g),_=Math.max(1,m-5),E=Math.max(1,y-10);return{top:o+s+.5*c+_,left:r+s+1*c+E,bottom:a+s+.5*c+_,right:i+s+1*c+E}},_generateD:function(t){return"M "+t.x+" "+(t.y+t.y+t.height)+"A "+(t.x+t.width)+" "+(t.y+t.height)+" 0 1 1 "+t.x+" "+(t.y+t.y+t.height+.001)}}),r[a.TOPICSHAPE.DIAMOND]=h.extend({},B,{type:a.TOPICSHAPE.DIAMOND,_prefInsets:function(t,e){var n=Math.min(50,parseInt(o.default.getStyleValue(t,a.STYLE_KEYS.FONT_SIZE)||0)),r=parseInt(o.default.getStyleValue(t,a.STYLE_KEYS.BORDER_LINE_WIDTH)||0),i=.5*e.width,s=.5*e.height,u=Math.sqrt(s*i),c=parseInt(Math.round(u),10)+r;return{top:c+r+.1*n,left:c+r+.5*n,bottom:c+r+.1*n,right:c+r+.5*n}},_generateD:function(t){return"M "+(t.x+t.x+t.width)+" "+t.y+"L "+(t.x+t.width)+" "+(t.y+t.y+t.height)+"L "+(t.x+t.x+t.width)+" "+(t.y+t.height)+"L "+t.x+" "+(t.y+t.y+t.height)+"z"}}),r[a.TOPICSHAPE.HEXAGON]=h.extend({},B,{type:a.TOPICSHAPE.HEXAGON,_prefInsets:function(t,e){t.model;var n=Math.round(1/7*e.width),r=G(t),i=r.lm,o=r.rm,a=r.tm,s=r.bm,u=r.lw,c=r.fontSize;return{top:a+u+.1*c,left:u+Math.max(n,i),bottom:s+u+.1*c,right:u+Math.max(n,o)}},_generateD:d.hexagon}),r[a.TOPICSHAPE.ROUNDEDHEXGON]=h.extend({},B,{type:a.TOPICSHAPE.ROUNDEDHEXGON,_prefInsets:function(t,e){t.model;var n=Math.min(.5*e.height,.2*e.width);n=Math.round(n);var r=G(t),i=r.lm,o=r.rm,a=r.tm,s=r.bm,u=r.lw,c=r.fontSize;return{top:Math.max(a,n)+u+.1*c,left:u+i,bottom:Math.max(s,n)+u+.1*c,right:u+o}},_generateD:d.peakrect}),r[a.TOPICSHAPE.ELLIPTICRECTANGLE]=h.extend({},B,{type:a.TOPICSHAPE.ELLIPTICRECTANGLE,_prefInsets:function(t,e){t.model;var n=Math.min(.25*e.height,.2*e.width);n=Math.round(n);var r=G(t),i=r.lm,o=r.rm,a=r.tm,s=r.bm,u=r.lw,c=r.fontSize;return{top:Math.max(a,n)+u+.1*c,left:u+i,bottom:Math.max(s,n)+u+.1*c,right:u+o}},_generateD:d.convexrect}),r[a.TOPICSHAPE.FISHBONE_NE_UNDERLINE]=h.extend({},F,{_prefInsets:function(t,e,n){var r=G(t),i=r.lm,o=r.rm,a=r.tm,s=r.bm,u=r.lw,c=0,l=z(t);return t.getLayer()-l.getLayer()>1&&t.branchIndex()>0&&(c=(e.height+a+s+u)*g),{top:a+n?u:0,left:i+c,bottom:s+n?0:u,right:o}}}),r[a.TOPICSHAPE.FISHBONE_NW_UNDERLINE]=h.extend({},F,{_prefInsets:function(t,e,n){var r=G(t),i=r.lm,o=r.rm,a=r.tm,s=r.bm,u=r.lw,c=0,l=z(t);return t.getLayer()-l.getLayer()>1&&t.branchIndex()>0&&(c=(e.height+a+s+u)*g),{top:a+n?u:0,left:i,bottom:s+n?0:u,right:o+c}}}),r[a.TOPICSHAPE.FISHHEADTORIGHT]=h.extend({},B,{type:a.TOPICSHAPE.FISHHEADTORIGHT,_prefInsets:function(t,e){var n=G(t),r=n.lm,i=n.rm,o=n.tm,a=n.bm,s=n.lw,u=Math.max(o,a),c=.5*e.height;return{top:c+u+s,left:.8*r+s,bottom:c+u+s,right:.3*e.width+i+s}},_generateD:function(t){return"M "+t.x+" "+t.y+"Q "+(t.x+t.width/4*3)+" "+t.y+" "+(t.x+t.width)+" "+(t.y+t.y+t.height)+"Q "+(t.x+t.width/4*3)+" "+(t.y+t.height)+" "+t.x+" "+(t.y+t.height)+"Z"},getExtColPosition:function(t){return{x:t.topicView.shapeBounds.x,y:0}}}),r[a.TOPICSHAPE.FISHHEADTOLEFT]=h.extend({},B,{type:a.TOPICSHAPE.FISHHEADTOLEFT,_prefInsets:function(t,e){t.model;var n=G(t),r=n.lm,i=n.rm,o=n.tm,a=n.bm,s=n.lw,u=Math.max(o,a),c=.5*e.height;return{top:c+u+s,left:.3*e.width+r+s,bottom:c+u+s,right:.8*i+s}},_generateD:function(t){return"M "+t.x+" "+(t.y+t.y+t.height)+"Q "+(t.x+t.width/3)+" "+t.y+" "+(t.x+t.width)+" "+t.y+" L "+(t.x+t.width)+" "+(t.y+t.height)+"Q "+(t.x+t.width/3)+" "+(t.y+t.height)+" "+t.x+" "+(t.y+t.y+t.height)+"Z"},getExtColPosition:function(t){var e=t.topicView.shapeBounds;return{x:e.x+e.width,y:0}}}),r[a.TOPICSHAPE.FISHBONEROATEDNE]=h.extend({},F,{_render:function(t){F._render.call(this,t,!1)},_rotate:function(t){var e=t.shapeBounds;t.topicGroup.rotate(-70,e.x,e.y+e.height)},updateBounds:function(t){var e=t.bounds,n=e.height*m+e.width*v,r=e.height*v+e.width*m,i=e.x-e.height*m,o=e.y+e.height-r;e.x=i,e.y=o,e.width=n,e.height=r},getExtColPosition:function(t){var e=t.topicView.shapeBounds;return{x:e.x+e.width,y:0}},innerPointToOuterPoint:function(t,e){var n=t.topicView.shapeBounds,r=f.rotateAroundDeg(e,{x:n.x+n.width,y:n.y+n.height},70);return{x:r.x+t.linePosition.x,y:r.y+t.linePosition.y}},getEndAnchorLocation:function(t,e){var n=e.topicView.shapeBounds,r=e.linePosition.x,i=e.linePosition.y,s=parseInt(o.default.getStyleValue(e,a.STYLE_KEYS.BORDER_LINE_WIDTH)||0)/2;return{x:r+n.x-s*m,y:i+n.y+n.height-s*v}},getStartAnchorLocation:function(t,e,n){return this.getEndAnchorLocation(n,t)}}),r[a.TOPICSHAPE.FISHBONEROATEDSE]=h.extend({},F,{_render:function(t){F._render.call(this,t,!0)},_rotate:function(t){var e=t.shapeBounds;t.topicGroup.rotate(70,e.x,e.y)},_prefInsets:function(t,e){return F._prefInsets.call(this,t,e,!0)},updateBounds:function(t){var e=t.bounds,n=e.height*m+e.width*v,r=e.height*v+e.width*m;e.x=e.x-e.height*m,e.width=n,e.height=r},getExtColPosition:function(t){var e=t.topicView.shapeBounds;return{x:e.x+e.width,y:0}},innerPointToOuterPoint:function(t,e){var n=t.topicView.shapeBounds,r=f.rotateAroundDeg(e,{x:n.x+n.width,y:n.y+n.height},70);return{x:r.x+t.linePosition.x,y:r.y+t.linePosition.y}},getEndAnchorLocation:function(t,e){var n=e.topicView.shapeBounds,r=e.linePosition.x,i=e.linePosition.y,s=parseInt(o.default.getStyleValue(e,a.STYLE_KEYS.BORDER_LINE_WIDTH)||0)/2;return{x:r+n.x-s*m,y:i+n.y+s*v}},getStartAnchorLocation:function(t,e,n){return this.getEndAnchorLocation(n,t)}}),r[a.TOPICSHAPE.FISHBONEROATEDNW]=h.extend({},F,{_render:function(t){F._render.call(this,t)},_rotate:function(t){var e=t.shapeBounds;t.topicGroup.rotate(70,e.x+e.width,e.y+e.height)},updateBounds:function(t){var e=t.bounds,n=e.height*m+e.width*v,r=e.height*v+e.width*m,i=e.x+e.width*(1-v),o=e.y+e.height-e.width*m-e.height*v;e.x=i,e.y=o,e.width=n,e.height=r},getExtColPosition:function(t){return{x:t.topicView.shapeBounds.x,y:0}},innerPointToOuterPoint:function(t,e){var n=t.topicView.shapeBounds,r=f.rotateAroundDeg(e,{x:n.x+n.width,y:n.y+n.height},70);return{x:r.x+t.linePosition.x,y:r.y+t.linePosition.y}},getEndAnchorLocation:function(t,e){var n=e.topicView.shapeBounds,r=e.linePosition.x,i=e.linePosition.y,s=parseInt(o.default.getStyleValue(e,a.STYLE_KEYS.BORDER_LINE_WIDTH)||0)/2;return{x:r+n.x+n.width+s*m,y:i+n.y+n.height-s*v}},getStartAnchorLocation:function(t,e,n){return this.getEndAnchorLocation(n,t)}}),r[a.TOPICSHAPE.FISHBONEROATEDSW]=h.extend({},F,{_render:function(t){F._render.call(this,t,!0)},_rotate:function(t){var e=t.shapeBounds;t.topicGroup.rotate(-70,e.x+e.width,e.y)},_prefInsets:function(t,e){return F._prefInsets.call(this,t,e,!0)},updateBounds:function(t){var e=t.bounds,n=e.height*m+e.width*v,r=e.height*v+e.width*m;e.x=e.x+e.width*(1-v),e.width=n,e.height=r},getExtColPosition:function(t){return{x:t.topicView.shapeBounds.x,y:0}},innerPointToOuterPoint:function(t,e){var n=t.topicView.shapeBounds,r=f.rotateAroundDeg(e,{x:n.x+n.width,y:n.y+n.height},70);return{x:r.x+t.linePosition.x,y:r.y+t.linePosition.y}},getEndAnchorLocation:function(t,e){var n=e.topicView.shapeBounds,r=e.linePosition.x,i=e.linePosition.y,s=parseInt(o.default.getStyleValue(e,a.STYLE_KEYS.BORDER_LINE_WIDTH)||0)/2;return{x:r+n.x+n.width+s*m,y:i+n.y+s*v}},getStartAnchorLocation:function(t,e,n){return this.getEndAnchorLocation(n,t)}}),r[a.TOPICSHAPE.UNDERLINE]=F,r[a.TOPICSHAPE.CIRCLE]=h.extend({},B,{type:a.TOPICSHAPE.CIRCLE,_prefInsets:function(t,e){t.model;var n=e.width,r=e.height,i=Math.sqrt(n*n+r*r),o=G(t),a=o.lm,s=o.tm,u=o.lw,c=o.fontSize,l=(a+s)/2;return{top:(i-r)/2+l+u+.3*c,left:(i-n)/2+l+u+.3*c,bottom:(i-r)/2+l+u+.3*c,right:(i-n)/2+l+u+.3*c}},_generateD:function(t){var e=t.x+t.x+t.width,n=t.y+t.y+t.height,r=t.x+t.width;return"M "+e+" "+n+" m "+-r+" 0 a "+r+" , "+r+" 0 1 , 0 "+2*r+" , 0 a "+r+" , "+r+" 0 1 , 0 "+2*-r+" , 0 z"}}),r[a.TOPICSHAPE.PARALLELOGRAM]=h.extend({},B,{type:a.TOPICSHAPE.PARALLELOGRAM,_prefInsets:function(t,e){t.model;var n=G(t),r=n.lm,i=n.rm,o=n.tm,a=n.bm,s=n.lw,u=n.fontSize;return{top:o+s+.1*u,left:r+s+Math.round(.5*e.height)+1+.5*u,bottom:a+s+.1*u,right:i+s+Math.round(.5*e.height)+1+.5*u}},_generateD:function(t){return"M "+(t.x+t.y+t.height)+" "+t.y+"L "+(t.x+t.width)+" "+t.y+"L "+(t.x+t.width+t.y)+" "+(t.y+t.height)+"L "+t.x+" "+(t.y+t.height)+"z"},_getOffsetFns:function(t){switch(S(t)){case"DIVER_LINE":return[N];case"ORDER_LINE":return[D];default:return[k]}},getEndAnchorLocation:function(t,e){var n=e.parent(),r=L(n,e),i=w(b(e,r),e);if(r===a.DIRECTION.UP||r===a.DIRECTION.DOWN)return i;var o=-e.topicView.shapeBounds.height/4-1;return x(i,r,o)}}),r[a.TOPICSHAPE.NOBORDER]=h.extend({},B,{_render:function(t){var e=t.shapeBounds,n="M "+e.x+" "+e.y+"L "+(e.x+e.width)+" "+e.y+"L "+(e.x+e.width)+" "+(e.y+e.height)+"L "+e.x+" "+(e.y+e.height)+"z";return t.topicShapeFill.attr({d:n}),t.topicShape.attr({d:""}),this.fillTopicShapeSelectBox(t,e),t}}),r[a.TOPICSHAPE.CLOUD]=h.extend({},B,{type:a.TOPICSHAPE.CLOUD,_prefInsets:function(t,e){this.innerElementsSize=e;var n=G(t.parent()),r=n.lm,i=n.rm,o=n.tm,a=n.bm,s=n.lw;return j(t,{top:(o+s+e.height)/.51*.22,left:(r+s+e.width)/(.83-.16)*.17,bottom:(a+s+e.height)/.51*.27,right:(i+s+e.width)/(.83-.16)*.16})},_render:function(t){var e=this.getDrawBounds(t.shapeBounds,Y(t.parent())),n="M229.823,73.419c2.342-4.322,3.641-9.058,3.641-14.028\n              c0-20.24-21.44-36.649-47.887-36.649c-4.902,0-9.632,0.566-14.085,1.614C165.82,10.213,149.615,0,130.496,0\n              c-19.97,0-36.765,11.141-41.694,26.266c-5.084-1.629-10.577-2.519-16.31-2.519c-26.075,0-47.212,18.393-47.212,41.082\n              c0,3.175,0.428,6.262,1.211,9.231C11.567,79.329,1,92.346,1,107.581c0,19.898,18.017,36.028,40.243,36.028\n              c2.364,0,4.676-0.192,6.928-0.543c-0.261,1.574-0.408,3.177-0.408,4.807c0,19.952,20.131,36.127,44.964,36.127\n              c15.491,0,29.151-6.295,37.237-15.874c7.448,4.606,16.745,7.347,26.836,7.347c23.002,0,41.903-14.215,44.077-32.398\n              c2.337,0.346,4.734,0.535,7.182,0.535c23.715,0,42.941-16.878,42.941-37.698C251,92.067,242.493,79.973,229.823,73.419z";t.topicShape.attr({d:n}),t.topicShapeFill.attr({d:n}),H(t,this.innerElementsSize.width/250*1.5,this.innerElementsSize.height/184*2,!0);var r=e.x,i=e.y;t.topicShape.translate(r,i),t.topicShapeFill.translate(r,i),this.fillTopicShapeSelectBox(t,e)}}),r[a.CALLOUTSHAPE.RECT]=h.extend({},B,{_prefInsets:function(t,e){return U[a.TOPICSHAPE.RECT]._prefInsets(t,e)},_render:function(t){return U[a.TOPICSHAPE.RECT]._render(t)}}),r[a.CALLOUTSHAPE.ROUNDEDRECT]=h.extend({},V,{type:a.CALLOUTSHAPE.ROUNDEDRECT}),r[a.CALLOUTSHAPE.ELLIPSE]=h.extend({},B,{_prefInsets:function(t,e){return U[a.TOPICSHAPE.ELLIPSE]._prefInsets(t,e)},_render:function(t){return U[a.TOPICSHAPE.ELLIPSE]._render(t)}}),r);function H(t,e,n,r){r?(t.topicShape.scale(e,n),t.topicShapeFill.scale(e,n)):(t.topicShapeSelectBox.attr("transform",null),t.topicShape.attr("transform",null),t.topicShapeFill.attr("transform",null),t.topicShapeGroup.attr("transform",null))}function Y(t){return parseInt(o.default.getStyleValue(t,a.STYLE_KEYS.BORDER_LINE_WIDTH)||0)}function G(t){return{fontSize:Math.min(50,parseInt(o.default.getStyleValue(t,a.STYLE_KEYS.FONT_SIZE)||0)),lm:parseInt(o.default.getStyleValue(t,a.STYLE_KEYS.MARGIN_LEFT)||0),rm:parseInt(o.default.getStyleValue(t,a.STYLE_KEYS.MARGIN_RIGHT)||0),tm:parseInt(o.default.getStyleValue(t,a.STYLE_KEYS.MARGIN_TOP)||0),bm:parseInt(o.default.getStyleValue(t,a.STYLE_KEYS.MARGIN_BOTTOM)||0),lw:parseInt(o.default.getStyleValue(t,a.STYLE_KEYS.BORDER_LINE_WIDTH)||0)}}function j(t,e){return e}function z(t){return[a.TOPICSHAPE.FISHHEADTORIGHT,a.TOPICSHAPE.FISHHEADTOLEFT].includes(t.topicView.getShapeStyle())?t:t.parent()&&z(t.parent())}U[a.TOPICSHAPE.MATRIXMAIN]=h.extend({},U[a.TOPICSHAPE.NOBORDER]),t.exports=U},function(t,e,n){"use strict";var r=o(n(341)),i=o(n(3));function o(t){return t&&t.__esModule?t:{default:t}}var a=n(5),s=n(0),u=s.CONFIG,c=s.VIEW_TYPE,l=s.MODULE_NAME,h=s.PLATFORMS,d=s.EVENTS,f=n(16),p=n(9),g=n(1),v=f.View.extend({type:null,initSVGStructure:function(){},initEventsListener:function(){},parent:function(t){if(void 0===t)return this._parent;var e=this._parent;return e===t?this:(e&&this.stopListening(e),this.beforeAncestorChange(),this._parent=t,this.afterAncestorChange(),t&&(this.listenTo(t,d.BEFORE_ANCESTOR_CHANGE,this.beforeAncestorChange),this.listenTo(t,d.AFTER_ANCESTOR_CHANGE,this.afterAncestorChange)),this)},beforeAncestorChange:function(){this.trigger(d.BEFORE_ANCESTOR_CHANGE)},afterAncestorChange:function(){this.trigger(d.AFTER_ANCESTOR_CHANGE)},getRealFileSource:function(t){if(!t)throw new Error("");return a.urlNormalize(this.config(u.URL_PREFIX)+t)},editDomain:function(){var t=this.parent();return t&&t.editDomain?t.editDomain():null},getContext:function(){var t=this.parent();return t&&t.getContext?t.getContext():null},getModule:function(){var t=this.getContext();return t&&t.getModule.apply(t,arguments)},getAdapter:function(t){},setElement:function(t){var e=this.type,n=this.$el;return t.sbView=this,e&&(n&&n.removeClass(e),p(t).addClass(e)),v.__super__.setElement.apply(this,arguments)},getNextEventTarget:function(t){return t.parentNode},callService:function(t){for(var e=this.getContext(),n=arguments.length,r=Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];return e.callService.apply(e,[t].concat(r))},config:function(t){var e=this.getContext();return e.config.apply(e,arguments)},isShowFashionStyle:function(){return this.getContext().isShowFashionStyle()},style:function(t,e){if(!(e in this.__style))throw"class name not exist.";var n=t.__cls;if(n!==e){var r=this.__style[e],o=this.__style[n]||{},a=e.split("__"),s=a[0],u=(a[1],this.__style[s]||{});for(var c in r=(0,i.default)({},u,r),o)c in r||(r[c]=null);t.style(r),t.__cls=e}},isTypeOf:function(t){return-1!==this.getTypeList().indexOf(t)},getTypeList:function(){if(!this.__typeArr){for(var t=this,e=[];t.type;)e.push(t.type),t=(0,r.default)(t);this.__typeArr=g.uniq(e)}return this.__typeArr.slice()},_dispatchContextMenu:function(t){var e=void 0,n={bubbles:!0,detail:100};if("mouseup"===t.type||"mousedown"===t.type?e=m("contextmenu",g.extend(n,g.pick(t,"clientX","clientY","pageX","pageY","screenX","screenY","relatedTarget","region","buttons","button","metaKey","altKey","shiftKey","ctrlKey"))):"touchend"===t.type?e=m("contextmenu",g.extend(n,g.pick(t.changedTouches[0],"clientX","clientY","pageX","pageY","screenX","screenY"),g.pick(t,"relatedTarget","region","buttons","button","metaKey","altKey","shiftKey","ctrlKey"))):console.error("context menu",t),[c.BRANCH,c.BOUNDARY,c.RELATIONSHIP,c.IMAGE].includes(this.type)){var r=this.getContext().getModule(l.SELECTION);r.getSelections().includes(this)||r.selectSingle(this)}this.el.dispatchEvent(e)},_pressContextMenuCheckHandle:function(){var t=this,e=this.config(u.PLATFORM),n=e===h.BROWNIE,r=e===h.DOUGHNUT;if(!n&&!r){var i=p(document),o=!1;i.on("touchmove.menu",function(){o=!0}),i.on("touchend.menu",function(e){o||t._dispatchContextMenu(e),i.off(".menu")})}}});function m(t,e){try{return new MouseEvent(t,e)}catch(r){var n=document.createEvent("MouseEvent");return n.initMouseEvent(t,e.bubbles,e.cancelable,window,e.detail,e.screenX,e.screenY,e.clientX,e.clientY,e.ctrlKey,e.altKey,e.shiftKey,e.metaKey,e.button,null),n}}t.exports=v},function(t,e,n){"use strict";var r,i=(r=n(338))&&r.__esModule?r:{default:r};function o(t,e){var n=Math.sin(e),r=Math.cos(e);return{x:t.x*r-t.y*n,y:t.x*n+t.y*r}}function a(t,e,n){var r={x:t.x-e.x,y:t.y-e.y};return r=o(r,n),{x:e.x+r.x,y:e.y+r.y}}function s(t){return t/180*Math.PI}t.exports={Point:function(t,e){return{x:t,y:e}},distance:function(t,e){return(0,i.default)(t.x-e.x,t.y-e.y)},rotate:o,rotateDeg:function(t,e){return o(t,s(e))},rotateAround:a,rotateAroundDeg:function(t,e,n){return a(t,e,s(n))},normalize:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=(0,i.default)(t.x,t.y)/e;return{x:t.x/n,y:t.y/n}},diff:function(t,e){return{x:e.x-t.x,y:e.y-t.y}},add:function(t,e){return{x:t.x+e.x,y:t.y+e.y}},equal:function(t,e){return t.x===e.x&&t.y===e.y},isPointLike:function(t){return!!t&&"number"==typeof t.x&&"number"==typeof t.y},isPointInPolygon:function(t,e){var n=void 0,r=e.length-1,i=!1,o=t.x,a=t.y,s=void 0,u=void 0;for(n=0;n<e.length;n++)s=e[n],u=e[r],(s.y<a&&u.y>=a||u.y<a&&s.y>=a)&&(s.x<=o||u.x<=o)&&s.x+(a-s.y)/(u.y-s.y)*(u.x-s.x)<o&&(i=!i),r=n;return i}}},function(t,e,n){var r=n(24),i=n(15),o=n(56),a=n(48),s=function(t,e,n){var u,c,l,h=t&s.F,d=t&s.G,f=t&s.S,p=t&s.P,g=t&s.B,v=t&s.W,m=d?i:i[e]||(i[e]={}),y=m.prototype,_=d?r:f?r[e]:(r[e]||{}).prototype;for(u in d&&(n=e),n)(c=!h&&_&&void 0!==_[u])&&u in m||(l=c?_[u]:n[u],m[u]=d&&"function"!=typeof _[u]?n[u]:g&&c?o(l,r):v&&_[u]==l?function(t){var e=function(e,n,r){if(this instanceof t){switch(arguments.length){case 0:return new t;case 1:return new t(e);case 2:return new t(e,n)}return new t(e,n,r)}return t.apply(this,arguments)};return e.prototype=t.prototype,e}(l):p&&"function"==typeof l?o(Function.call,l):l,p&&((m.virtual||(m.virtual={}))[u]=l,t&s.R&&y&&!y[u]&&a(y,u,l)))};s.F=1,s.G=2,s.S=4,s.P=8,s.B=16,s.W=32,s.U=64,s.R=128,t.exports=s},function(t,e){var n=t.exports="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();"number"==typeof __g&&(__g=n)},function(t,e,n){"use strict";e.__esModule=!0;var r=a(n(342)),i=a(n(339)),o=a(n(35));function a(t){return t&&t.__esModule?t:{default:t}}e.default=function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+(void 0===e?"undefined":(0,o.default)(e)));t.prototype=(0,i.default)(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(r.default?(0,r.default)(t,e):t.__proto__=e)}},function(t,e,n){"use strict";e.__esModule=!0;var r,i=(r=n(35))&&r.__esModule?r:{default:r};e.default=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!==(void 0===e?"undefined":(0,i.default)(e))&&"function"!=typeof e?t:e}},function(t,e,n){var r=n(108)("wks"),i=n(87),o=n(24).Symbol,a="function"==typeof o;(t.exports=function(t){return r[t]||(r[t]=a&&o[t]||(a?o:i)("Symbol."+t))}).store=r},function(t,e){var n,r,i=t.exports={};function o(){throw new Error("setTimeout has not been defined")}function a(){throw new Error("clearTimeout has not been defined")}function s(t){if(n===setTimeout)return setTimeout(t,0);if((n===o||!n)&&setTimeout)return n=setTimeout,setTimeout(t,0);try{return n(t,0)}catch(e){try{return n.call(null,t,0)}catch(e){return n.call(this,t,0)}}}!function(){try{n="function"==typeof setTimeout?setTimeout:o}catch(t){n=o}try{r="function"==typeof clearTimeout?clearTimeout:a}catch(t){r=a}}();var u,c=[],l=!1,h=-1;function d(){l&&u&&(l=!1,u.length?c=u.concat(c):h=-1,c.length&&f())}function f(){if(!l){var t=s(d);l=!0;for(var e=c.length;e;){for(u=c,c=[];++h<e;)u&&u[h].run();h=-1,e=c.length}u=null,l=!1,function(t){if(r===clearTimeout)return clearTimeout(t);if((r===a||!r)&&clearTimeout)return r=clearTimeout,clearTimeout(t);try{r(t)}catch(e){try{return r.call(null,t)}catch(e){return r.call(this,t)}}}(t)}}function p(t,e){this.fun=t,this.array=e}function g(){}i.nextTick=function(t){var e=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)e[n-1]=arguments[n];c.push(new p(t,e)),1!==c.length||l||s(f)},p.prototype.run=function(){this.fun.apply(null,this.array)},i.title="browser",i.browser=!0,i.env={},i.argv=[],i.version="",i.versions={},i.on=g,i.addListener=g,i.once=g,i.off=g,i.removeListener=g,i.removeAllListeners=g,i.emit=g,i.prependListener=g,i.prependOnceListener=g,i.listeners=function(t){return[]},i.binding=function(t){throw new Error("process.binding is not supported")},i.cwd=function(){return"/"},i.chdir=function(t){throw new Error("process.chdir is not supported")},i.umask=function(){return 0}},function(t,e,n){"use strict";(function(e){var r,i,o=(i=n(4))&&i.__esModule?i:{default:i},a=n(0),s=n(8),u=e.SVG,c=n(78),l=((r={})[a.BRANCHCONNECTION.NONE]=function(t){t.connection.attr({d:""})},r[a.BRANCHCONNECTION.STRAIGHT]=function(t,e,n,r){var i,s=parseInt(o.default.getStyleValue(t.parent(),a.STYLE_KEYS.LINE_WIDTH)||1);i=n?c.taperedStraight(e,s):c.straight(e);var u=t.connection,l=o.default.getStyleValue(t,a.STYLE_KEYS.LINE_COLOR);u.attr({d:i,stroke:l,fill:n?l:"none","stroke-width":n?0:s,"marker-end":"none"})},r[a.BRANCHCONNECTION.CURVE]=function(t,e,n,r){var i,s=parseInt(o.default.getStyleValue(t.parent(),a.STYLE_KEYS.LINE_WIDTH)||1);i=r?n?c.taperedCurveVertical(e,s):c.curveVertical(e):n?c.taperedCurveHorizon(e,s):c.curveHorizon(e);var u=t.connection,l=o.default.getStyleValue(t,a.STYLE_KEYS.LINE_COLOR);u.attr({d:i,stroke:l,fill:n?l:"none","stroke-width":n?0:s,"marker-end":"none"})},r[a.BRANCHCONNECTION.ELBOW]=h({verticalBrush:c.elbowVertical,horizonBrush:c.elbowHorizon,taperedHorizonBrush:c.taperedElbowHorizon,taperedVerticalBrush:c.taperedElbowVertical}),r[a.BRANCHCONNECTION.FOLD]=h({verticalBrush:c.skewElbowVertical,horizonBrush:c.skewElbowHorizon,taperedHorizonBrush:c.taperedSkewElbowHorizon,taperedVerticalBrush:c.taperedSkewElbowVertical}),r[a.BRANCHCONNECTION.FOLD2]=h({verticalBrush:c.skewElbowVertical,horizonBrush:c.skewElbowHorizon,taperedHorizonBrush:c.taperedSkewElbowHorizon,taperedVerticalBrush:c.taperedSkewElbowVertical}),r[a.BRANCHCONNECTION.ROUNDEDFOLD]=h({verticalBrush:c.hornVertical,horizonBrush:c.hornHorizon,taperedHorizonBrush:c.taperedHornHorizon,taperedVerticalBrush:c.taperedHornVertical}),r[a.BRANCHCONNECTION.BIGHT]=h({verticalBrush:c.sinusVertical,horizonBrush:c.sinusHorizon,taperedHorizonBrush:c.taperedSinusHorizon,taperedVerticalBrush:c.taperedSinusVertical}),r[a.BRANCHCONNECTION.ARROWEDCURVE]=function(t,e,n,r){var i=e.endPos.x,s=e.endPos.y,l=parseInt(o.default.getStyleValue(t.parent(),a.STYLE_KEYS.LINE_WIDTH)||1),h=s>0?3*l:-3*l,d=i>0?3*l:-3*l,f=l<2;n&&(d*=1.25),n&&(h*=1.25),f&&(d*=1.5),f&&(h*=1.5);var p;p=r?n?c.taperedCurveVertical(e,l,h)+"M "+i+" "+(s-h)+"L "+i+" "+(s-.99*h):c.curveVertical(e,h):n?c.taperedCurveHorizon(e,l,d)+"M "+(i-d)+" "+s+"L "+(i-.99*d)+" "+s:c.curveHorizon(e,d);var g=t.connection,v=function(t,e,n){var r,i;if(r=i=n,e.arrowMarker)r!==e.arrowSize&&(e.arrowSize=r,e.arrowMarker.attr({markerWidth:r,markerHeight:i}));else{var o=t.svg.marker(r,i).ref(0,4).attr({viewBox:"0 0 8 8",markerUnits:"userSpaceOnUse"}),a=new u.Path;a.attr({d:"M 0 0 L 8 4 L 0 8 Z"}),o.add(a),e.arrowMarker=o,e.arrowSize=r}return e.arrowMarker}(t.editDomain(),g,Math.abs(r?h:d)),m=o.default.getStyleValue(t,a.STYLE_KEYS.LINE_COLOR);g.attr({d:p,stroke:m,fill:n?m:"none","stroke-width":n?0:l});var y=t._draged;v.get(0).attr("fill",y?"red":m),g.getPath().marker("end",v)},r[a.BRANCHCONNECTION.ROUNDEDELBOW]=function(t,e,n,r){var i,s=parseInt(o.default.getStyleValue(t,a.STYLE_KEYS.LINE_CORNER)||0),u=parseInt(o.default.getStyleValue(t.parent(),a.STYLE_KEYS.LINE_WIDTH)||1);i=r?n?c.taperedRoundedElbowVertical(e,u,s):c.roundedElbowVertical(e,s):n?c.taperedRoundedElbowHorizon(e,u,s):c.roundedElbowHorizon(e,s);var l=t.connection,h=o.default.getStyleValue(t,a.STYLE_KEYS.LINE_COLOR);l.attr({d:i,"marker-end":"none",fill:n?h:"none",stroke:h,"stroke-width":n?0:u})},r[a.BRANCHCONNECTION.HORIZONTAL]=function(t,e,n){var r,i=e.startPos.x,s=e.startPos.y,u=e.endPos.x,c=e.startPos.y,l=parseInt(o.default.getStyleValue(t.parent(),a.STYLE_KEYS.LINE_WIDTH)||1);r="M "+i+" "+s+"L "+u+" "+c;var h=t.connection,d=o.default.getStyleValue(t,a.STYLE_KEYS.LINE_COLOR);h.attr({d:r,stroke:d,fill:"none","stroke-width":l,"marker-end":"none"})},r[a.BRANCHCONNECTION.CALLOUTLINE]=function(t){var e=t.parent(),n=t.linePosition,r=e.linePosition,i=s.topicInsectLine(t,r),u=s.topicInsectLine(e,n),c=t.topicView.topicShape,l=c.length(),h=i.at,d=h-8;d<0&&(d+=l);var f=h+8;f>l&&(f-=l);var p=c.pointAt(d),g=c.pointAt(f);p.y>0?p.y-=1:p.y+=1,g.y>0?g.y-=1:g.y+=1;var v={x:parseInt(p.x+t.linePosition.x),y:parseInt(p.y+t.linePosition.y)},m={x:parseInt(g.x+t.linePosition.x),y:parseInt(g.y+t.linePosition.y)},y="M "+v.x+" "+v.y+" L "+parseInt(u.x)+" "+parseInt(u.y)+" L "+m.x+" "+m.y;t.connection.attr({d:y,stroke:o.default.getStyleValue(t,a.STYLE_KEYS.BORDER_LINE_COLOR),"stroke-width":parseInt(o.default.getStyleValue(t,a.STYLE_KEYS.BORDER_LINE_WIDTH)||1),fill:o.default.getStyleValue(t,a.STYLE_KEYS.FILL_COLOR),"marker-end":"none"}),t.setTopicShapeMasking(v,m)},r);function h(t){var e=t.horizonBrush,n=t.verticalBrush,r=t.taperedHorizonBrush,i=t.taperedVerticalBrush;return function(t,s,u,c){var l,h=parseInt(o.default.getStyleValue(t.parent(),a.STYLE_KEYS.LINE_WIDTH)||1);l=c?u?i(s,h):n(s):u?r(s,h):e(s);var d=t.connection,f=o.default.getStyleValue(t,a.STYLE_KEYS.LINE_COLOR);d.attr({d:l,stroke:f,fill:u?f:"none","stroke-width":u?0:h,"marker-end":"none"})}}t.exports=l}).call(e,n(6))},function(t,e,n){t.exports={default:n(357),__esModule:!0}},function(t,e,n){"use strict";function r(t){this.name=t||"default",this.streamInfo={},this.generatedError=null,this.extraStreamInfo={},this.isPaused=!0,this.isFinished=!1,this.isLocked=!1,this._listeners={data:[],end:[],error:[]},this.previous=null}r.prototype={push:function(t){this.emit("data",t)},end:function(){if(this.isFinished)return!1;this.flush();try{this.emit("end"),this.cleanUp(),this.isFinished=!0}catch(t){this.emit("error",t)}return!0},error:function(t){return!this.isFinished&&(this.isPaused?this.generatedError=t:(this.isFinished=!0,this.emit("error",t),this.previous&&this.previous.error(t),this.cleanUp()),!0)},on:function(t,e){return this._listeners[t].push(e),this},cleanUp:function(){this.streamInfo=this.generatedError=this.extraStreamInfo=null,this._listeners=[]},emit:function(t,e){if(this._listeners[t])for(var n=0;n<this._listeners[t].length;n++)this._listeners[t][n].call(this,e)},pipe:function(t){return t.registerPrevious(this)},registerPrevious:function(t){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.streamInfo=t.streamInfo,this.mergeStreamInfo(),this.previous=t;var e=this;return t.on("data",function(t){e.processChunk(t)}),t.on("end",function(){e.end()}),t.on("error",function(t){e.error(t)}),this},pause:function(){return!this.isPaused&&!this.isFinished&&(this.isPaused=!0,this.previous&&this.previous.pause(),!0)},resume:function(){if(!this.isPaused||this.isFinished)return!1;this.isPaused=!1;var t=!1;return this.generatedError&&(this.error(this.generatedError),t=!0),this.previous&&this.previous.resume(),!t},flush:function(){},processChunk:function(t){this.push(t)},withStreamInfo:function(t,e){return this.extraStreamInfo[t]=e,this.mergeStreamInfo(),this},mergeStreamInfo:function(){for(var t in this.extraStreamInfo)this.extraStreamInfo.hasOwnProperty(t)&&(this.streamInfo[t]=this.extraStreamInfo[t])},lock:function(){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.isLocked=!0,this.previous&&this.previous.lock()},toString:function(){var t="Worker "+this.name;return this.previous?this.previous+" -> "+t:t}},t.exports=r},function(t,e,n){t.exports={default:n(348),__esModule:!0}},function(t,e,n){"use strict";var r=/data:image[\s\S]*;base64/;t.exports={isDef:function(t){return void 0!==t&&null!==t},isUndef:function(t){return void 0===t||null===t},inArray:function(t,e){return-1!==t.indexOf(e)},flatten:function(t){return t.reduce(function(t,e){return t.concat(e)},[])},throttle:function(t,e){var n=t,r=void 0,i=!0;return function(){for(var t=arguments.length,o=Array(t),a=0;a<t;a++)o[a]=arguments[a];var s=this;return i?(n.apply(s,o),i=!1):!r&&void(r=setTimeout(function(){clearTimeout(r),r=null,n.apply(s,o)},void 0===e?500:e))}},isBase64Url:function(t){return r.test(t)},frameStabilize:function(t,e){var n=!1,r=void 0;return function(){r=Array.prototype.slice.apply(arguments),n||(n=!0,requestAnimationFrame(function(){t.apply(this,r),n=!1})),e&&"function"==typeof e&&e.apply(this,r)}}}},function(t,e,n){"use strict";var r=n(21).extend({afterAncestorChange:function(){var t=this.model;if(t&&t.id){var e=this.editDomain();e&&(e.model2View[t.id]=this)}r.__super__.afterAncestorChange.apply(this,arguments)}});t.exports=r},function(t,e,n){"use strict";e.__esModule=!0;var r=a(n(343)),i=a(n(99)),o="function"==typeof i.default&&"symbol"==typeof r.default?function(t){return typeof t}:function(t){return t&&"function"==typeof i.default&&t.constructor===i.default&&t!==i.default.prototype?"symbol":typeof t};function a(t){return t&&t.__esModule?t:{default:t}}e.default="function"==typeof i.default&&"symbol"===o(r.default)?function(t){return void 0===t?"undefined":o(t)}:function(t){return t&&"function"==typeof i.default&&t.constructor===i.default&&t!==i.default.prototype?"symbol":void 0===t?"undefined":o(t)}},function(t,e,n){var r=n(41);t.exports=function(t){if(!r(t))throw TypeError(t+" is not an object!");return t}},function(t,e,n){"use strict";var r=n(0).COMPONENT_TYPE,i=n(131).extend({componentType:r.BASE_COMPONENT,initialize:function(t,e){e&&this.ownerSheet(e.sheet)},initEventsListener:function(){},ownerWorkbook:function(t){return t&&(this._ownerWorkbook=t),this._ownerWorkbook},ownerSheet:function(t){return t?(this._ownerSheet=t,this._ownerSheet):this._ownerSheet},parent:function(t){return void 0!==t&&(this.trigger("beforeParentChange"),this._parent=t,this.trigger("afterParentChange")),this._parent},getUndo:function(){return this.ownerSheet().getUndo()},hasAncestor:function(){var t=this.parent();return t?t.hasAncestor():null}});t.exports=i},function(t,e,n){t.exports={default:n(350),__esModule:!0}},function(t,e,n){var r=n(36),i=n(162),o=n(111),a=Object.defineProperty;e.f=n(40)?Object.defineProperty:function(t,e,n){if(r(t),e=o(e,!0),r(n),i)try{return a(t,e,n)}catch(t){}if("get"in n||"set"in n)throw TypeError("Accessors not supported!");return"value"in n&&(t[e]=n.value),t}},function(t,e,n){t.exports=!n(46)(function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a})},function(t,e){t.exports=function(t){return"object"==typeof t?null!==t:"function"==typeof t}},function(t,e,n){"use strict";(function(t){if(e.base64=!0,e.array=!0,e.string=!0,e.arraybuffer="undefined"!=typeof ArrayBuffer&&"undefined"!=typeof Uint8Array,e.nodebuffer=void 0!==t,e.uint8array="undefined"!=typeof Uint8Array,"undefined"==typeof ArrayBuffer)e.blob=!1;else{var r=new ArrayBuffer(0);try{e.blob=0===new Blob([r],{type:"application/zip"}).size}catch(t){try{var i=new(self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder);i.append(r),e.blob=0===i.getBlob("application/zip").size}catch(t){e.blob=!1}}}try{e.nodestream=!!n(187).Readable}catch(t){e.nodestream=!1}}).call(e,n(55).Buffer)},function(t,e,n){"use strict";var r="undefined"!=typeof Uint8Array&&"undefined"!=typeof Uint16Array&&"undefined"!=typeof Int32Array;function i(t,e){return Object.prototype.hasOwnProperty.call(t,e)}e.assign=function(t){for(var e=Array.prototype.slice.call(arguments,1);e.length;){var n=e.shift();if(n){if("object"!=typeof n)throw new TypeError(n+"must be non-object");for(var r in n)i(n,r)&&(t[r]=n[r])}}return t},e.shrinkBuf=function(t,e){return t.length===e?t:t.subarray?t.subarray(0,e):(t.length=e,t)};var o={arraySet:function(t,e,n,r,i){if(e.subarray&&t.subarray)t.set(e.subarray(n,n+r),i);else for(var o=0;o<r;o++)t[i+o]=e[n+o]},flattenChunks:function(t){var e,n,r,i,o,a;for(r=0,e=0,n=t.length;e<n;e++)r+=t[e].length;for(a=new Uint8Array(r),i=0,e=0,n=t.length;e<n;e++)o=t[e],a.set(o,i),i+=o.length;return a}},a={arraySet:function(t,e,n,r,i){for(var o=0;o<r;o++)t[i+o]=e[n+o]},flattenChunks:function(t){return[].concat.apply([],t)}};e.setTyped=function(t){t?(e.Buf8=Uint8Array,e.Buf16=Uint16Array,e.Buf32=Int32Array,e.assign(e,o)):(e.Buf8=Array,e.Buf16=Array,e.Buf32=Array,e.assign(e,a))},e.setTyped(r)},function(t,e,n){"use strict";var r,i=(r=n(3))&&r.__esModule?r:{default:r},o=n(8),a=n(247),s=function(t){return t.cells[1]},u=function(t){var e=s(t);return t.isTranspose?e.columns:e.rows},c=function(t,e){return u(t)[e]},l=function(t,e,n){return c(t,e)[n]};t.exports={isUndef:function(t){return void 0===t||null===t},posAdd:function(t,e){return{x:t.x+e.x,y:t.y+e.y}},posSub:function(t,e){return{x:t.x-e.x,y:t.y-e.y}},brighten:function(t){if("none"===t)return"none";var e=a(t).toHsv();return e.v=Math.min(e.v+.1,.99),a(e).toRgbString()},getMainCell:function(t){return t.cells[0]},getMatrix:s,getRows:u,getRow:c,getCell:l,getColumn:function(t,e){return u(t).map(function(t){return t[e]})},getCellInfoByPos:function(t,e){var n=null;return u(t).forEach(function(r,a){0!==a&&r.forEach(function(r,s){if(0!==s){var u,c,h,d,f,p=(c=(u=(0,i.default)({},r.pos,r.size)).x,h=u.y,d=u.width,[{x:c,y:h},{x:c,y:h+(f=u.height)},{x:c+d,y:h+f},{x:c+d,y:h}]);if(o.pointInPolygon(e,p)){var g=l(t,a,0),v=l(t,0,s),m=g.item.parent(),y=v.item.text,_=r.getItems();n={headBranch:m,label:y,items:_}}}})}),n},getBranchRowSize:function(t,e){e+=1;var n=s(t);return t.isTranspose?n.getColumnSize(e):n.getRowSize(e)},getHeadItemPos:function(t,e){return l(t,e+=1,0).itemPos},getLabelRow:function(t){return c(t,0).slice(1)}}},function(t,e,n){"use strict";e.__esModule=!0;var r,i=(r=n(3))&&r.__esModule?r:{default:r};e.default=i.default||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t}},function(t,e){t.exports=function(t){try{return!!t()}catch(t){return!0}}},function(t,e){var n={}.hasOwnProperty;t.exports=function(t,e){return n.call(t,e)}},function(t,e,n){var r=n(39),i=n(71);t.exports=n(40)?function(t,e,n){return r.f(t,e,i(1,n))}:function(t,e,n){return t[e]=n,t}},function(t,e,n){var r;r=function(t){var e,n,r,i,o,a,s;return r=(n=(e=t).lib).Base,i=n.WordArray,a=(o=e.algo).MD5,s=o.EvpKDF=r.extend({cfg:r.extend({keySize:4,hasher:a,iterations:1}),init:function(t){this.cfg=this.cfg.extend(t)},compute:function(t,e){for(var n=this.cfg,r=n.hasher.create(),o=i.create(),a=o.words,s=n.keySize,u=n.iterations;a.length<s;){c&&r.update(c);var c=r.update(t).finalize(e);r.reset();for(var l=1;l<u;l++)c=r.finalize(c),r.reset();o.concat(c)}return o.sigBytes=4*s,o}}),e.EvpKDF=function(t,e,n){return s.create(n).compute(t,e)},t.EvpKDF},t.exports=r(n(7),n(117),n(116))},function(t,e,n){"use strict";var r=n(92),i=Object.keys||function(t){var e=[];for(var n in t)e.push(n);return e};t.exports=h;var o=n(73);o.inherits=n(75);var a=n(206),s=n(124);o.inherits(h,a);for(var u=i(s.prototype),c=0;c<u.length;c++){var l=u[c];h.prototype[l]||(h.prototype[l]=s.prototype[l])}function h(t){if(!(this instanceof h))return new h(t);a.call(this,t),s.call(this,t),t&&!1===t.readable&&(this.readable=!1),t&&!1===t.writable&&(this.writable=!1),this.allowHalfOpen=!0,t&&!1===t.allowHalfOpen&&(this.allowHalfOpen=!1),this.once("end",d)}function d(){this.allowHalfOpen||this._writableState.ended||r(f,this)}function f(t){t.end()}Object.defineProperty(h.prototype,"destroyed",{get:function(){return void 0!==this._readableState&&void 0!==this._writableState&&this._readableState.destroyed&&this._writableState.destroyed},set:function(t){void 0!==this._readableState&&void 0!==this._writableState&&(this._readableState.destroyed=t,this._writableState.destroyed=t)}}),h.prototype._destroy=function(t,e){this.push(null),this.end(),r(e,t)}},function(t,e,n){"use strict";var r,i=u(n(11)),o=u(n(17)),a=n(0),s=u(n(141));function u(t){return t&&t.__esModule?t:{default:t}}var c=n(16),l=n(37),h=n(1),d=n(5),f=((r={})[a.STYLE_KEYS.SHAPE_CLASS]="summaryLineClass",r[a.STYLE_KEYS.LINE_WIDTH]="summaryLineWidth",r[a.STYLE_KEYS.LINE_COLOR]="summaryLineColor",r),p={type:1,"fo:margin-left":1,"fo:margin-right":1,"fo:margin-top":1,"fo:margin-bottom":1,"shape-corner":1,"spacing-major":1,"spacing-minor":1,"line-corner":1},g=l.extend({componentType:a.COMPONENT_TYPE.STYLE_COMPONENT,initialize:function(){for(var t=arguments.length,e=Array(t),n=0;n<t;n++)e[n]=arguments[n];g.__super__.initialize.apply(this,e)},classList:function(){if(this._classList)return this._classList;this._classList=[];var t=this.get("class");return t&&"string"==typeof t&&(this._classList=t.split(" ").filter(function(t){return""!==t})),this._classList},addClass:function(t,e){var n=this;if(t&&!t.includes(" ")){var r=this.classList();null==t||r.includes(t)||(r.splice(e,0,t),this.set("class",r.join(" ")),this.trigger("changeClass",t),this.getUndo().add({undo:function(){n.removeClass(t)},redo:function(){n.addClass(t,e)}}),this.styleChanged())}},removeClass:function(t){var e=this,n=this.classList();if(null!=t&&n.includes(t)){var r=n.indexOf(t);n.splice(r,1),n.length>0?this.set("class",n.join(" ")):this.unset("class"),this.trigger("changeClass",t),this.getUndo().add({undo:function(){e.addClass(t,r)},redo:function(){e.removeClass(t)}}),this.styleChanged()}},getUserClassValue:function(t){var e=this.classList(),n=this.ownerSheet().theme(),r=void 0;if(n){var i=e,a=Array.isArray(i),s=0;for(i=a?i:(0,o.default)(i);;){var u;if(a){if(s>=i.length)break;u=i[s++]}else{if((s=i.next()).done)break;u=s.value}var c=u,l=n.getStyleValue(c,t);l&&(r=l)}}return r},style:function(){return this._style},initStyle:function(t){if(t&&t.properties&&!h.isEmpty(t))return this._style=new v(t),this._style},addStyle:function(t,e){var n=new v({id:d.UUID(),properties:{}});e&&(n.get("properties")[t]=e),this._style=n},changeStyle:function(t,e){var n=this,r=t,i=this.getStyleValue(t);if(i!==e){var o=this.style();if(e&&t===a.STYLE_KEYS.TEXT_DECORATION){var s=e.split(":"),u=s[0],c=s[1];e=c,c?"add"===u?("none"!==i&&i||(i=""),e=i.includes(e)?i:i+" "+e):"rm"===u&&(i||(i=""),""===(e=i.includes(e)&&i.replace(e,"").trim())&&(e="none")):e=u.trim()}o?e?o.get("properties")[t]=e:delete o.get("properties")[t]:this.addStyle(t,e),this.componentType===a.COMPONENT_TYPE.SUMMARY&&f[t]&&(t=f[t]),this.trigger("changeStyle",t,e),this.getUndo().add({undo:function(){n.changeStyle(r,i)},redo:function(){n.changeStyle(r,e)}}),this.styleChanged()}},setStyleObj:function(t,e){var n=this,r=this.get("style"),i=!1;t&&t.properties&&!h.isEmpty(t)?(t.id=t.id||d.UUID(),this.set("style",t),this.initStyle(t),i=!0):!r||h.isEmpty(r)||(this._style=null,this.unset("style"),i=!0),i&&(e||this.trigger("setStyleObject",t),this.styleChanged(),this.getUndo().add({undo:function(){n.setStyleObj(r,e)},redo:function(){n.setStyleObj(t,e)}}))},getStyleValue:function(t){var e=this.style();if(e)return e.getValue(t)},getComputedStyleProperties:function(){var t=this,e=this.getClassName(s.default),n=(0,i.default)(s.default[e]).reduce(function(t,n){return t[n]=s.default[e][n],t},{}),r=this.ownerSheet().theme();e=this.getClassName(r);var o=((this.ownerSheet().get("theme")||{})[e]||{}).properties||{},a=(this.get("style")||{}).properties||{};return h.uniq([].concat((0,i.default)(n),(0,i.default)(o),(0,i.default)(a))).reduce(function(e,n){return n in p||(e[n]=t.getStyleValue(n,{origin:!0})),e},{})}}),v=c.Model.extend({componentType:a.COMPONENT_TYPE.STYLE,keys:function(){var t=this.get("properties");return t?(0,i.default)(t):[]},getValue:function(t){var e=this.get("properties");return e&&e[t]}});t.exports=g},function(t,e,n){"use strict";e.__esModule=!0;var r=u(n(11)),i=u(n(17)),o=u(n(2)),a=u(n(141)),s=n(0);function u(t){return t&&t.__esModule?t:{default:t}}var c=[s.STYLE_KEYS.FONT_FAMILY],l=function(){function t(){(0,o.default)(this,t)}return t.prototype.getStyleValue=function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};e=this.protectedHandleKey(t,e,n);var r=void 0;if(c.includes(e))return this._getSpecialHandleValue(t,e,n);if(!n.ignoreUser){if(!n.ignoreLayeredBeforeUser&&(r=this.getLayeredStyleValue(t,s.STYLE_LAYER.BEFORE_USER,e),this.isValidValue(t,e,r)))return r;if(r=this.getUserStyleValue(t,e),this.isValidValue(t,e,r))return r}if(!n.ignoreClass){if(!n.ignoreParent&&(r=this.getParentStyleValue(t,e,s.STYLE_PARENT_GROUP.BEFORE_CLASS_GROUP,n),this.isValidValue(t,e,r)))return r;if(!n.ignoreLayeredBeforeClass&&(r=this.getLayeredStyleValue(t,s.STYLE_LAYER.BEFORE_CLASS,e),this.isValidValue(t,e,r)))return r;if(r=this.getUserClassValue(t,e),this.isValidValue(t,e,r))return r}if(!n.ignoreTheme){if(!n.ignoreParent&&(r=this.getParentStyleValue(t,e,s.STYLE_PARENT_GROUP.BEFORE_THEME_GROUP,n),this.isValidValue(t,e,r)))return r;if(!n.ignoreLayeredBeforeTheme&&(r=this.getLayeredStyleValue(t,s.STYLE_LAYER.BEFORE_THEME,e),this.isValidValue(t,e,r)))return r;if(r=this.getThemeStyleValue(t,e),this.isValidValue(t,e,r))return r}if(!n.ignoreDefault){if(!n.ignoreParent&&(r=this.getParentStyleValue(t,e,s.STYLE_PARENT_GROUP.BEFORE_DEFAULT_GROUP,n),this.isValidValue(t,e,r)))return r;if(n.defaultStyleProvider&&(r=n.defaultStyleProvider.getValue(t,e),this.isValidValue(t,e,r)||n.defaultStyleProvider.isKeyInteresting(t,e)))return r;if(!n.ignoreLayeredBeforeDefault&&(r=this.getLayeredStyleValue(t,s.STYLE_LAYER.BEFORE_DEFAULT,e),this.isValidValue(t,e,r)))return r;if(r=this.getDefaultStyleValue(t,e),this.isValidValue(t,e,r))return r}return r},t.prototype._getSpecialHandleValue=function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(e===s.STYLE_KEYS.FONT_FAMILY)return this._getSpecialHandleFontFamily(t,n)},t.prototype._getSpecialHandleFontFamily=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=s.STYLE_KEYS.FONT_FAMILY,r=[];e.ignoreUser||(e.ignoreLayeredBeforeUser||r.push(this.getLayeredStyleValue(t,s.STYLE_LAYER.BEFORE_USER,n,e)),r.push(this.getUserStyleValue(t,n,e))),e.ignoreParent||r.push(this.getParentStyleValue(t,n,s.STYLE_PARENT_GROUP.BEFORE_CLASS_GROUP,e)),e.ignoreClass||(e.ignoreLayeredBeforeClass||r.push(this.getLayeredStyleValue(t,s.STYLE_LAYER.BEFORE_CLASS,n,e)),r.push(this.getUserClassValue(t,n,e))),e.ignoreParent||r.push(this.getParentStyleValue(t,n,s.STYLE_PARENT_GROUP.BEFORE_THEME_GROUP,e)),e.ignoreTheme||(e.ignoreLayeredBeforeTheme||r.push(this.getLayeredStyleValue(t,s.STYLE_LAYER.BEFORE_THEME,n,e)),r.push(this.getThemeStyleValue(t,n,e))),e.ignoreParent||r.push(this.getParentStyleValue(t,n,s.STYLE_PARENT_GROUP.BEFORE_DEFAULT_GROUP,e));var i=t.getContext().getSheetView(),o=this.protectedFindStyleSelector(i).getStyleValue(i,s.STYLE_KEYS.CJK_FONT_FAMILY);return r.push(o),r.push(t.getContext().config(s.CONFIG.CJK_FONT_FAMILY)),e.ignoreDefault||(e.ignoreLayeredBeforeDefault||r.push(this.getLayeredStyleValue(t,s.STYLE_LAYER.BEFORE_DEFAULT,n,e)),r.push(this.getDefaultStyleValue(t,n,e))),(r=(r=(r=r.filter(function(t){return t&&"$system$"!==t})).concat(["Nunito Sans","Microsoft YaHei","PingFang SC","Microsoft JhengHei"])).reduce(function(t,e){return t.concat(e.split(","))},[])).map(function(t){return"'"===t[0]||'"'===t[0]?t:"'"+t+"'"}).concat("sans-serif").join(",")},t.prototype.protectedHandleKey=function(t,e){return arguments.length>2&&void 0!==arguments[2]&&arguments[2],e},t.prototype.getUserStyle=function(t){return arguments.length>1&&void 0!==arguments[1]&&arguments[1],this.protectedGetModel(t).style()},t.prototype.getUserStyleValue=function(t,e){return arguments.length>2&&void 0!==arguments[2]&&arguments[2],this.protectedGetModel(t).getStyleValue(e)},t.prototype.getClassList=function(t){return arguments.length>1&&void 0!==arguments[1]&&arguments[1],this.protectedGetModel(t).classList()},t.prototype.getUserClassValue=function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=this.getClassList(t,n),o=this.getTheme(t,n),a=void 0;if(o){var s=r,u=Array.isArray(s),c=0;for(s=u?s:(0,i.default)(s);;){var l;if(u){if(c>=s.length)break;l=s[c++]}else{if((c=s.next()).done)break;l=c.value}var h=l,d=o.getStyleValue(h,e);this.isValidValue(t,e,d)&&(a=d)}}return a},t.prototype.getTheme=function(t){return arguments.length>1&&void 0!==arguments[1]&&arguments[1],this.protectedGetModel(t).ownerSheet().theme()||a.default},t.prototype.getThemeStyleValue=function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=this.getSuggestedClassName(t,n),i=this.getTheme(t,n);return i&&i.getStyleValue(r,e)},t.prototype.getDefaultStyleValue=function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=this.getClassName(t,n);return a.default[r]&&a.default[r][e]},t.prototype.getLayeredStyleValue=function(t,e,n){arguments.length>3&&void 0!==arguments[3]&&arguments[3];var r=this._getOverridedStyleManager(t);return r&&r.getStyleValue(e,n,t)},t.prototype._getOverridedStyleManager=function(t){return t.getModule(s.MODULE_NAME.OVERRIDE_STYLE)},t.prototype.getComputedStyle=function(t,e){var n=this,r={};return this.protectedGetComputedStyleKeys(t,e).forEach(function(i){var o=n.getStyleValue(t,i,e);o&&(r[i]=o)}),r},t.prototype.protectedGetComputedStyleKeys=function(t){},t.prototype.protectedGetModel=function(t){return t.model},t.prototype.protectedFindStyleSelector=function(t){},t.prototype.getParentStyleValue=function(t,e,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},i=this.getLayeredStyleValue(t,s.STYLE_LAYER.BEFORE_PARENT,e);return this.isValidValue(t,e,i)?i:this.protectedParentStyleValue(t,n,e,r)},t.prototype.protectedParentStyleValue=function(t,e){arguments.length>2&&void 0!==arguments[2]&&arguments[2]},t.prototype.isValidValue=function(t,e,n){return null!==n&&void 0!==n&&""!==n},t.prototype.getClassName=function(t){arguments.length>1&&void 0!==arguments[1]&&arguments[1]},t.prototype.getSuggestedClassName=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return this.getClassName(t,e)},t.prototype.changeTheme=function(t,e,n){},t.prototype.updateClassIntoTheme=function(t,e,n,r){},t.prototype.removeClassFromTheme=function(t){arguments.length>1&&void 0!==arguments[1]&&arguments[1]},t.prototype.getFontInfo=function(t){var e,n=this,i=((e={})[s.STYLE_KEYS.FONT_WEIGHT]="fontWeight",e[s.STYLE_KEYS.TEXT_COLOR]="color",e[s.STYLE_KEYS.FONT_SIZE]="fontSize",e[s.STYLE_KEYS.FONT_FAMILY]="fontFamily",e[s.STYLE_KEYS.FONT_STYLE]="fontStyle",e[s.STYLE_KEYS.TEXT_DECORATION]="textDecoration",e[s.STYLE_KEYS.TEXT_ALIGN]="textAlign",e),o={};return(0,r.default)(i).forEach(function(e){o[i[e]]=n.getStyleValue(t,e)}),o},t.prototype.fixUserStyle=function(t){},t}();e.default=l},function(t,e,n){"use strict";e.__esModule=!0,e.findStyleSelector=e.allStyleSelectors=void 0;var r=n(0),i=l(n(325)),o=l(n(321)),a=l(n(322)),s=l(n(324)),u=l(n(323)),c=l(n(52));function l(t){return t&&t.__esModule?t:{default:t}}var h={topic:i.default,boundary:o.default,relationship:a.default,summary:s.default,sheet:u.default,mindmap:new c.default};e.allStyleSelectors=h,e.findStyleSelector=function(t){switch(t.type){case r.VIEW_TYPE.BRANCH:return h.topic;case r.VIEW_TYPE.BOUNDARY:return h.boundary;case r.VIEW_TYPE.RELATIONSHIP:return h.relationship;case r.VIEW_TYPE.SHEET:return h.sheet;case r.VIEW_TYPE.SUMMARY:return h.summary}return h.mindmap}},function(t,e,n){t.exports={default:n(346),__esModule:!0}},function(t,e,n){"use strict";(function(t){var r=n(345),i=n(422),o=n(183);function a(){return u.TYPED_ARRAY_SUPPORT?2147483647:1073741823}function s(t,e){if(a()<e)throw new RangeError("Invalid typed array length");return u.TYPED_ARRAY_SUPPORT?(t=new Uint8Array(e)).__proto__=u.prototype:(null===t&&(t=new u(e)),t.length=e),t}function u(t,e,n){if(!(u.TYPED_ARRAY_SUPPORT||this instanceof u))return new u(t,e,n);if("number"==typeof t){if("string"==typeof e)throw new Error("If encoding is specified then the first argument must be a string");return h(this,t)}return c(this,t,e,n)}function c(t,e,n,r){if("number"==typeof e)throw new TypeError('"value" argument must not be a number');return"undefined"!=typeof ArrayBuffer&&e instanceof ArrayBuffer?function(t,e,n,r){if(e.byteLength,n<0||e.byteLength<n)throw new RangeError("'offset' is out of bounds");if(e.byteLength<n+(r||0))throw new RangeError("'length' is out of bounds");return e=void 0===n&&void 0===r?new Uint8Array(e):void 0===r?new Uint8Array(e,n):new Uint8Array(e,n,r),u.TYPED_ARRAY_SUPPORT?(t=e).__proto__=u.prototype:t=d(t,e),t}(t,e,n,r):"string"==typeof e?function(t,e,n){if("string"==typeof n&&""!==n||(n="utf8"),!u.isEncoding(n))throw new TypeError('"encoding" must be a valid string encoding');var r=0|p(e,n),i=(t=s(t,r)).write(e,n);return i!==r&&(t=t.slice(0,i)),t}(t,e,n):function(t,e){if(u.isBuffer(e)){var n=0|f(e.length);return 0===(t=s(t,n)).length?t:(e.copy(t,0,0,n),t)}if(e){if("undefined"!=typeof ArrayBuffer&&e.buffer instanceof ArrayBuffer||"length"in e)return"number"!=typeof e.length||(r=e.length)!=r?s(t,0):d(t,e);if("Buffer"===e.type&&o(e.data))return d(t,e.data)}var r;throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")}(t,e)}function l(t){if("number"!=typeof t)throw new TypeError('"size" argument must be a number');if(t<0)throw new RangeError('"size" argument must not be negative')}function h(t,e){if(l(e),t=s(t,e<0?0:0|f(e)),!u.TYPED_ARRAY_SUPPORT)for(var n=0;n<e;++n)t[n]=0;return t}function d(t,e){var n=e.length<0?0:0|f(e.length);t=s(t,n);for(var r=0;r<n;r+=1)t[r]=255&e[r];return t}function f(t){if(t>=a())throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+a().toString(16)+" bytes");return 0|t}function p(t,e){if(u.isBuffer(t))return t.length;if("undefined"!=typeof ArrayBuffer&&"function"==typeof ArrayBuffer.isView&&(ArrayBuffer.isView(t)||t instanceof ArrayBuffer))return t.byteLength;"string"!=typeof t&&(t=""+t);var n=t.length;if(0===n)return 0;for(var r=!1;;)switch(e){case"ascii":case"latin1":case"binary":return n;case"utf8":case"utf-8":case void 0:return U(t).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*n;case"hex":return n>>>1;case"base64":return H(t).length;default:if(r)return U(t).length;e=(""+e).toLowerCase(),r=!0}}function g(t,e,n){var r=t[e];t[e]=t[n],t[n]=r}function v(t,e,n,r,i){if(0===t.length)return-1;if("string"==typeof n?(r=n,n=0):n>2147483647?n=2147483647:n<-2147483648&&(n=-2147483648),n=+n,isNaN(n)&&(n=i?0:t.length-1),n<0&&(n=t.length+n),n>=t.length){if(i)return-1;n=t.length-1}else if(n<0){if(!i)return-1;n=0}if("string"==typeof e&&(e=u.from(e,r)),u.isBuffer(e))return 0===e.length?-1:m(t,e,n,r,i);if("number"==typeof e)return e&=255,u.TYPED_ARRAY_SUPPORT&&"function"==typeof Uint8Array.prototype.indexOf?i?Uint8Array.prototype.indexOf.call(t,e,n):Uint8Array.prototype.lastIndexOf.call(t,e,n):m(t,[e],n,r,i);throw new TypeError("val must be string, number or Buffer")}function m(t,e,n,r,i){var o,a=1,s=t.length,u=e.length;if(void 0!==r&&("ucs2"===(r=String(r).toLowerCase())||"ucs-2"===r||"utf16le"===r||"utf-16le"===r)){if(t.length<2||e.length<2)return-1;a=2,s/=2,u/=2,n/=2}function c(t,e){return 1===a?t[e]:t.readUInt16BE(e*a)}if(i){var l=-1;for(o=n;o<s;o++)if(c(t,o)===c(e,-1===l?0:o-l)){if(-1===l&&(l=o),o-l+1===u)return l*a}else-1!==l&&(o-=o-l),l=-1}else for(n+u>s&&(n=s-u),o=n;o>=0;o--){for(var h=!0,d=0;d<u;d++)if(c(t,o+d)!==c(e,d)){h=!1;break}if(h)return o}return-1}function y(t,e,n,r){n=Number(n)||0;var i=t.length-n;r?(r=Number(r))>i&&(r=i):r=i;var o=e.length;if(o%2!=0)throw new TypeError("Invalid hex string");r>o/2&&(r=o/2);for(var a=0;a<r;++a){var s=parseInt(e.substr(2*a,2),16);if(isNaN(s))return a;t[n+a]=s}return a}function _(t,e,n,r){return Y(U(e,t.length-n),t,n,r)}function E(t,e,n,r){return Y(function(t){for(var e=[],n=0;n<t.length;++n)e.push(255&t.charCodeAt(n));return e}(e),t,n,r)}function A(t,e,n,r){return E(t,e,n,r)}function S(t,e,n,r){return Y(H(e),t,n,r)}function T(t,e,n,r){return Y(function(t,e){for(var n,r,i,o=[],a=0;a<t.length&&!((e-=2)<0);++a)r=(n=t.charCodeAt(a))>>8,i=n%256,o.push(i),o.push(r);return o}(e,t.length-n),t,n,r)}function x(t,e,n){return 0===e&&n===t.length?r.fromByteArray(t):r.fromByteArray(t.slice(e,n))}function b(t,e,n){n=Math.min(t.length,n);for(var r=[],i=e;i<n;){var o,a,s,u,c=t[i],l=null,h=c>239?4:c>223?3:c>191?2:1;if(i+h<=n)switch(h){case 1:c<128&&(l=c);break;case 2:128==(192&(o=t[i+1]))&&(u=(31&c)<<6|63&o)>127&&(l=u);break;case 3:o=t[i+1],a=t[i+2],128==(192&o)&&128==(192&a)&&(u=(15&c)<<12|(63&o)<<6|63&a)>2047&&(u<55296||u>57343)&&(l=u);break;case 4:o=t[i+1],a=t[i+2],s=t[i+3],128==(192&o)&&128==(192&a)&&128==(192&s)&&(u=(15&c)<<18|(63&o)<<12|(63&a)<<6|63&s)>65535&&u<1114112&&(l=u)}null===l?(l=65533,h=1):l>65535&&(l-=65536,r.push(l>>>10&1023|55296),l=56320|1023&l),r.push(l),i+=h}return function(t){var e=t.length;if(e<=w)return String.fromCharCode.apply(String,t);for(var n="",r=0;r<e;)n+=String.fromCharCode.apply(String,t.slice(r,r+=w));return n}(r)}e.Buffer=u,e.SlowBuffer=function(t){return+t!=t&&(t=0),u.alloc(+t)},e.INSPECT_MAX_BYTES=50,u.TYPED_ARRAY_SUPPORT=void 0!==t.TYPED_ARRAY_SUPPORT?t.TYPED_ARRAY_SUPPORT:function(){try{var t=new Uint8Array(1);return t.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},42===t.foo()&&"function"==typeof t.subarray&&0===t.subarray(1,1).byteLength}catch(t){return!1}}(),e.kMaxLength=a(),u.poolSize=8192,u._augment=function(t){return t.__proto__=u.prototype,t},u.from=function(t,e,n){return c(null,t,e,n)},u.TYPED_ARRAY_SUPPORT&&(u.prototype.__proto__=Uint8Array.prototype,u.__proto__=Uint8Array,"undefined"!=typeof Symbol&&Symbol.species&&u[Symbol.species]===u&&Object.defineProperty(u,Symbol.species,{value:null,configurable:!0})),u.alloc=function(t,e,n){return function(t,e,n,r){return l(e),e<=0?s(t,e):void 0!==n?"string"==typeof r?s(t,e).fill(n,r):s(t,e).fill(n):s(t,e)}(null,t,e,n)},u.allocUnsafe=function(t){return h(null,t)},u.allocUnsafeSlow=function(t){return h(null,t)},u.isBuffer=function(t){return!(null==t||!t._isBuffer)},u.compare=function(t,e){if(!u.isBuffer(t)||!u.isBuffer(e))throw new TypeError("Arguments must be Buffers");if(t===e)return 0;for(var n=t.length,r=e.length,i=0,o=Math.min(n,r);i<o;++i)if(t[i]!==e[i]){n=t[i],r=e[i];break}return n<r?-1:r<n?1:0},u.isEncoding=function(t){switch(String(t).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},u.concat=function(t,e){if(!o(t))throw new TypeError('"list" argument must be an Array of Buffers');if(0===t.length)return u.alloc(0);var n;if(void 0===e)for(e=0,n=0;n<t.length;++n)e+=t[n].length;var r=u.allocUnsafe(e),i=0;for(n=0;n<t.length;++n){var a=t[n];if(!u.isBuffer(a))throw new TypeError('"list" argument must be an Array of Buffers');a.copy(r,i),i+=a.length}return r},u.byteLength=p,u.prototype._isBuffer=!0,u.prototype.swap16=function(){var t=this.length;if(t%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var e=0;e<t;e+=2)g(this,e,e+1);return this},u.prototype.swap32=function(){var t=this.length;if(t%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var e=0;e<t;e+=4)g(this,e,e+3),g(this,e+1,e+2);return this},u.prototype.swap64=function(){var t=this.length;if(t%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var e=0;e<t;e+=8)g(this,e,e+7),g(this,e+1,e+6),g(this,e+2,e+5),g(this,e+3,e+4);return this},u.prototype.toString=function(){var t=0|this.length;return 0===t?"":0===arguments.length?b(this,0,t):function(t,e,n){var r=!1;if((void 0===e||e<0)&&(e=0),e>this.length)return"";if((void 0===n||n>this.length)&&(n=this.length),n<=0)return"";if((n>>>=0)<=(e>>>=0))return"";for(t||(t="utf8");;)switch(t){case"hex":return L(this,e,n);case"utf8":case"utf-8":return b(this,e,n);case"ascii":return C(this,e,n);case"latin1":case"binary":return I(this,e,n);case"base64":return x(this,e,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return N(this,e,n);default:if(r)throw new TypeError("Unknown encoding: "+t);t=(t+"").toLowerCase(),r=!0}}.apply(this,arguments)},u.prototype.equals=function(t){if(!u.isBuffer(t))throw new TypeError("Argument must be a Buffer");return this===t||0===u.compare(this,t)},u.prototype.inspect=function(){var t="",n=e.INSPECT_MAX_BYTES;return this.length>0&&(t=this.toString("hex",0,n).match(/.{2}/g).join(" "),this.length>n&&(t+=" ... ")),"<Buffer "+t+">"},u.prototype.compare=function(t,e,n,r,i){if(!u.isBuffer(t))throw new TypeError("Argument must be a Buffer");if(void 0===e&&(e=0),void 0===n&&(n=t?t.length:0),void 0===r&&(r=0),void 0===i&&(i=this.length),e<0||n>t.length||r<0||i>this.length)throw new RangeError("out of range index");if(r>=i&&e>=n)return 0;if(r>=i)return-1;if(e>=n)return 1;if(e>>>=0,n>>>=0,r>>>=0,i>>>=0,this===t)return 0;for(var o=i-r,a=n-e,s=Math.min(o,a),c=this.slice(r,i),l=t.slice(e,n),h=0;h<s;++h)if(c[h]!==l[h]){o=c[h],a=l[h];break}return o<a?-1:a<o?1:0},u.prototype.includes=function(t,e,n){return-1!==this.indexOf(t,e,n)},u.prototype.indexOf=function(t,e,n){return v(this,t,e,n,!0)},u.prototype.lastIndexOf=function(t,e,n){return v(this,t,e,n,!1)},u.prototype.write=function(t,e,n,r){if(void 0===e)r="utf8",n=this.length,e=0;else if(void 0===n&&"string"==typeof e)r=e,n=this.length,e=0;else{if(!isFinite(e))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");e|=0,isFinite(n)?(n|=0,void 0===r&&(r="utf8")):(r=n,n=void 0)}var i=this.length-e;if((void 0===n||n>i)&&(n=i),t.length>0&&(n<0||e<0)||e>this.length)throw new RangeError("Attempt to write outside buffer bounds");r||(r="utf8");for(var o=!1;;)switch(r){case"hex":return y(this,t,e,n);case"utf8":case"utf-8":return _(this,t,e,n);case"ascii":return E(this,t,e,n);case"latin1":case"binary":return A(this,t,e,n);case"base64":return S(this,t,e,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return T(this,t,e,n);default:if(o)throw new TypeError("Unknown encoding: "+r);r=(""+r).toLowerCase(),o=!0}},u.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var w=4096;function C(t,e,n){var r="";n=Math.min(t.length,n);for(var i=e;i<n;++i)r+=String.fromCharCode(127&t[i]);return r}function I(t,e,n){var r="";n=Math.min(t.length,n);for(var i=e;i<n;++i)r+=String.fromCharCode(t[i]);return r}function L(t,e,n){var r=t.length;(!e||e<0)&&(e=0),(!n||n<0||n>r)&&(n=r);for(var i="",o=e;o<n;++o)i+=V(t[o]);return i}function N(t,e,n){for(var r=t.slice(e,n),i="",o=0;o<r.length;o+=2)i+=String.fromCharCode(r[o]+256*r[o+1]);return i}function O(t,e,n){if(t%1!=0||t<0)throw new RangeError("offset is not uint");if(t+e>n)throw new RangeError("Trying to access beyond buffer length")}function R(t,e,n,r,i,o){if(!u.isBuffer(t))throw new TypeError('"buffer" argument must be a Buffer instance');if(e>i||e<o)throw new RangeError('"value" argument is out of bounds');if(n+r>t.length)throw new RangeError("Index out of range")}function M(t,e,n,r){e<0&&(e=65535+e+1);for(var i=0,o=Math.min(t.length-n,2);i<o;++i)t[n+i]=(e&255<<8*(r?i:1-i))>>>8*(r?i:1-i)}function D(t,e,n,r){e<0&&(e=4294967295+e+1);for(var i=0,o=Math.min(t.length-n,4);i<o;++i)t[n+i]=e>>>8*(r?i:3-i)&255}function P(t,e,n,r,i,o){if(n+r>t.length)throw new RangeError("Index out of range");if(n<0)throw new RangeError("Index out of range")}function k(t,e,n,r,o){return o||P(t,0,n,4),i.write(t,e,n,r,23,4),n+4}function B(t,e,n,r,o){return o||P(t,0,n,8),i.write(t,e,n,r,52,8),n+8}u.prototype.slice=function(t,e){var n,r=this.length;if(t=~~t,e=void 0===e?r:~~e,t<0?(t+=r)<0&&(t=0):t>r&&(t=r),e<0?(e+=r)<0&&(e=0):e>r&&(e=r),e<t&&(e=t),u.TYPED_ARRAY_SUPPORT)(n=this.subarray(t,e)).__proto__=u.prototype;else{var i=e-t;n=new u(i,void 0);for(var o=0;o<i;++o)n[o]=this[o+t]}return n},u.prototype.readUIntLE=function(t,e,n){t|=0,e|=0,n||O(t,e,this.length);for(var r=this[t],i=1,o=0;++o<e&&(i*=256);)r+=this[t+o]*i;return r},u.prototype.readUIntBE=function(t,e,n){t|=0,e|=0,n||O(t,e,this.length);for(var r=this[t+--e],i=1;e>0&&(i*=256);)r+=this[t+--e]*i;return r},u.prototype.readUInt8=function(t,e){return e||O(t,1,this.length),this[t]},u.prototype.readUInt16LE=function(t,e){return e||O(t,2,this.length),this[t]|this[t+1]<<8},u.prototype.readUInt16BE=function(t,e){return e||O(t,2,this.length),this[t]<<8|this[t+1]},u.prototype.readUInt32LE=function(t,e){return e||O(t,4,this.length),(this[t]|this[t+1]<<8|this[t+2]<<16)+16777216*this[t+3]},u.prototype.readUInt32BE=function(t,e){return e||O(t,4,this.length),16777216*this[t]+(this[t+1]<<16|this[t+2]<<8|this[t+3])},u.prototype.readIntLE=function(t,e,n){t|=0,e|=0,n||O(t,e,this.length);for(var r=this[t],i=1,o=0;++o<e&&(i*=256);)r+=this[t+o]*i;return r>=(i*=128)&&(r-=Math.pow(2,8*e)),r},u.prototype.readIntBE=function(t,e,n){t|=0,e|=0,n||O(t,e,this.length);for(var r=e,i=1,o=this[t+--r];r>0&&(i*=256);)o+=this[t+--r]*i;return o>=(i*=128)&&(o-=Math.pow(2,8*e)),o},u.prototype.readInt8=function(t,e){return e||O(t,1,this.length),128&this[t]?-1*(255-this[t]+1):this[t]},u.prototype.readInt16LE=function(t,e){e||O(t,2,this.length);var n=this[t]|this[t+1]<<8;return 32768&n?4294901760|n:n},u.prototype.readInt16BE=function(t,e){e||O(t,2,this.length);var n=this[t+1]|this[t]<<8;return 32768&n?4294901760|n:n},u.prototype.readInt32LE=function(t,e){return e||O(t,4,this.length),this[t]|this[t+1]<<8|this[t+2]<<16|this[t+3]<<24},u.prototype.readInt32BE=function(t,e){return e||O(t,4,this.length),this[t]<<24|this[t+1]<<16|this[t+2]<<8|this[t+3]},u.prototype.readFloatLE=function(t,e){return e||O(t,4,this.length),i.read(this,t,!0,23,4)},u.prototype.readFloatBE=function(t,e){return e||O(t,4,this.length),i.read(this,t,!1,23,4)},u.prototype.readDoubleLE=function(t,e){return e||O(t,8,this.length),i.read(this,t,!0,52,8)},u.prototype.readDoubleBE=function(t,e){return e||O(t,8,this.length),i.read(this,t,!1,52,8)},u.prototype.writeUIntLE=function(t,e,n,r){t=+t,e|=0,n|=0,r||R(this,t,e,n,Math.pow(2,8*n)-1,0);var i=1,o=0;for(this[e]=255&t;++o<n&&(i*=256);)this[e+o]=t/i&255;return e+n},u.prototype.writeUIntBE=function(t,e,n,r){t=+t,e|=0,n|=0,r||R(this,t,e,n,Math.pow(2,8*n)-1,0);var i=n-1,o=1;for(this[e+i]=255&t;--i>=0&&(o*=256);)this[e+i]=t/o&255;return e+n},u.prototype.writeUInt8=function(t,e,n){return t=+t,e|=0,n||R(this,t,e,1,255,0),u.TYPED_ARRAY_SUPPORT||(t=Math.floor(t)),this[e]=255&t,e+1},u.prototype.writeUInt16LE=function(t,e,n){return t=+t,e|=0,n||R(this,t,e,2,65535,0),u.TYPED_ARRAY_SUPPORT?(this[e]=255&t,this[e+1]=t>>>8):M(this,t,e,!0),e+2},u.prototype.writeUInt16BE=function(t,e,n){return t=+t,e|=0,n||R(this,t,e,2,65535,0),u.TYPED_ARRAY_SUPPORT?(this[e]=t>>>8,this[e+1]=255&t):M(this,t,e,!1),e+2},u.prototype.writeUInt32LE=function(t,e,n){return t=+t,e|=0,n||R(this,t,e,4,4294967295,0),u.TYPED_ARRAY_SUPPORT?(this[e+3]=t>>>24,this[e+2]=t>>>16,this[e+1]=t>>>8,this[e]=255&t):D(this,t,e,!0),e+4},u.prototype.writeUInt32BE=function(t,e,n){return t=+t,e|=0,n||R(this,t,e,4,4294967295,0),u.TYPED_ARRAY_SUPPORT?(this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=255&t):D(this,t,e,!1),e+4},u.prototype.writeIntLE=function(t,e,n,r){if(t=+t,e|=0,!r){var i=Math.pow(2,8*n-1);R(this,t,e,n,i-1,-i)}var o=0,a=1,s=0;for(this[e]=255&t;++o<n&&(a*=256);)t<0&&0===s&&0!==this[e+o-1]&&(s=1),this[e+o]=(t/a>>0)-s&255;return e+n},u.prototype.writeIntBE=function(t,e,n,r){if(t=+t,e|=0,!r){var i=Math.pow(2,8*n-1);R(this,t,e,n,i-1,-i)}var o=n-1,a=1,s=0;for(this[e+o]=255&t;--o>=0&&(a*=256);)t<0&&0===s&&0!==this[e+o+1]&&(s=1),this[e+o]=(t/a>>0)-s&255;return e+n},u.prototype.writeInt8=function(t,e,n){return t=+t,e|=0,n||R(this,t,e,1,127,-128),u.TYPED_ARRAY_SUPPORT||(t=Math.floor(t)),t<0&&(t=255+t+1),this[e]=255&t,e+1},u.prototype.writeInt16LE=function(t,e,n){return t=+t,e|=0,n||R(this,t,e,2,32767,-32768),u.TYPED_ARRAY_SUPPORT?(this[e]=255&t,this[e+1]=t>>>8):M(this,t,e,!0),e+2},u.prototype.writeInt16BE=function(t,e,n){return t=+t,e|=0,n||R(this,t,e,2,32767,-32768),u.TYPED_ARRAY_SUPPORT?(this[e]=t>>>8,this[e+1]=255&t):M(this,t,e,!1),e+2},u.prototype.writeInt32LE=function(t,e,n){return t=+t,e|=0,n||R(this,t,e,4,2147483647,-2147483648),u.TYPED_ARRAY_SUPPORT?(this[e]=255&t,this[e+1]=t>>>8,this[e+2]=t>>>16,this[e+3]=t>>>24):D(this,t,e,!0),e+4},u.prototype.writeInt32BE=function(t,e,n){return t=+t,e|=0,n||R(this,t,e,4,2147483647,-2147483648),t<0&&(t=4294967295+t+1),u.TYPED_ARRAY_SUPPORT?(this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=255&t):D(this,t,e,!1),e+4},u.prototype.writeFloatLE=function(t,e,n){return k(this,t,e,!0,n)},u.prototype.writeFloatBE=function(t,e,n){return k(this,t,e,!1,n)},u.prototype.writeDoubleLE=function(t,e,n){return B(this,t,e,!0,n)},u.prototype.writeDoubleBE=function(t,e,n){return B(this,t,e,!1,n)},u.prototype.copy=function(t,e,n,r){if(n||(n=0),r||0===r||(r=this.length),e>=t.length&&(e=t.length),e||(e=0),r>0&&r<n&&(r=n),r===n)return 0;if(0===t.length||0===this.length)return 0;if(e<0)throw new RangeError("targetStart out of bounds");if(n<0||n>=this.length)throw new RangeError("sourceStart out of bounds");if(r<0)throw new RangeError("sourceEnd out of bounds");r>this.length&&(r=this.length),t.length-e<r-n&&(r=t.length-e+n);var i,o=r-n;if(this===t&&n<e&&e<r)for(i=o-1;i>=0;--i)t[i+e]=this[i+n];else if(o<1e3||!u.TYPED_ARRAY_SUPPORT)for(i=0;i<o;++i)t[i+e]=this[i+n];else Uint8Array.prototype.set.call(t,this.subarray(n,n+o),e);return o},u.prototype.fill=function(t,e,n,r){if("string"==typeof t){if("string"==typeof e?(r=e,e=0,n=this.length):"string"==typeof n&&(r=n,n=this.length),1===t.length){var i=t.charCodeAt(0);i<256&&(t=i)}if(void 0!==r&&"string"!=typeof r)throw new TypeError("encoding must be a string");if("string"==typeof r&&!u.isEncoding(r))throw new TypeError("Unknown encoding: "+r)}else"number"==typeof t&&(t&=255);if(e<0||this.length<e||this.length<n)throw new RangeError("Out of range index");if(n<=e)return this;var o;if(e>>>=0,n=void 0===n?this.length:n>>>0,t||(t=0),"number"==typeof t)for(o=e;o<n;++o)this[o]=t;else{var a=u.isBuffer(t)?t:U(new u(t,r).toString()),s=a.length;for(o=0;o<n-e;++o)this[o+e]=a[o%s]}return this};var F=/[^+\/0-9A-Za-z-_]/g;function V(t){return t<16?"0"+t.toString(16):t.toString(16)}function U(t,e){var n;e=e||1/0;for(var r=t.length,i=null,o=[],a=0;a<r;++a){if((n=t.charCodeAt(a))>55295&&n<57344){if(!i){if(n>56319){(e-=3)>-1&&o.push(239,191,189);continue}if(a+1===r){(e-=3)>-1&&o.push(239,191,189);continue}i=n;continue}if(n<56320){(e-=3)>-1&&o.push(239,191,189),i=n;continue}n=65536+(i-55296<<10|n-56320)}else i&&(e-=3)>-1&&o.push(239,191,189);if(i=null,n<128){if((e-=1)<0)break;o.push(n)}else if(n<2048){if((e-=2)<0)break;o.push(n>>6|192,63&n|128)}else if(n<65536){if((e-=3)<0)break;o.push(n>>12|224,n>>6&63|128,63&n|128)}else{if(!(n<1114112))throw new Error("Invalid code point");if((e-=4)<0)break;o.push(n>>18|240,n>>12&63|128,n>>6&63|128,63&n|128)}}return o}function H(t){return r.toByteArray(function(t){if((t=function(t){return t.trim?t.trim():t.replace(/^\s+|\s+$/g,"")}(t).replace(F,"")).length<2)return"";for(;t.length%4!=0;)t+="=";return t}(t))}function Y(t,e,n,r){for(var i=0;i<r&&!(i+n>=e.length||i>=t.length);++i)e[i+n]=t[i];return i}}).call(e,n(6))},function(t,e,n){var r=n(82);t.exports=function(t,e,n){if(r(t),void 0===e)return t;switch(n){case 1:return function(n){return t.call(e,n)};case 2:return function(n,r){return t.call(e,n,r)};case 3:return function(n,r,i){return t.call(e,n,r,i)}}return function(){return t.apply(e,arguments)}}},function(t,e,n){var r=n(163),i=n(83);t.exports=function(t){return r(i(t))}},function(t,e,n){var r;r=function(t){return n=(e=t).lib.WordArray,e.enc.Base64={stringify:function(t){var e=t.words,n=t.sigBytes,r=this._map;t.clamp();for(var i=[],o=0;o<n;o+=3)for(var a=(e[o>>>2]>>>24-o%4*8&255)<<16|(e[o+1>>>2]>>>24-(o+1)%4*8&255)<<8|e[o+2>>>2]>>>24-(o+2)%4*8&255,s=0;s<4&&o+.75*s<n;s++)i.push(r.charAt(a>>>6*(3-s)&63));var u=r.charAt(64);if(u)for(;i.length%4;)i.push(u);return i.join("")},parse:function(t){var e=t.length,r=this._map,i=this._reverseMap;if(!i){i=this._reverseMap=[];for(var o=0;o<r.length;o++)i[r.charCodeAt(o)]=o}var a=r.charAt(64);if(a){var s=t.indexOf(a);-1!==s&&(e=s)}return function(t,e,r){for(var i=[],o=0,a=0;a<e;a++)if(a%4){var s=r[t.charCodeAt(a-1)]<<a%4*2,u=r[t.charCodeAt(a)]>>>6-a%4*2;i[o>>>2]|=(s|u)<<24-o%4*8,o++}return n.create(i,o)}(t,e,i)},_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/="},t.enc.Base64;var e,n},t.exports=r(n(7))},function(t,e,n){var r;r=function(t){return function(e){var n=t,r=n.lib,i=r.WordArray,o=r.Hasher,a=n.algo,s=[];!function(){for(var t=0;t<64;t++)s[t]=4294967296*e.abs(e.sin(t+1))|0}();var u=a.MD5=o.extend({_doReset:function(){this._hash=new i.init([1732584193,4023233417,2562383102,271733878])},_doProcessBlock:function(t,e){for(var n=0;n<16;n++){var r=e+n,i=t[r];t[r]=16711935&(i<<8|i>>>24)|4278255360&(i<<24|i>>>8)}var o=this._hash.words,a=t[e+0],u=t[e+1],f=t[e+2],p=t[e+3],g=t[e+4],v=t[e+5],m=t[e+6],y=t[e+7],_=t[e+8],E=t[e+9],A=t[e+10],S=t[e+11],T=t[e+12],x=t[e+13],b=t[e+14],w=t[e+15],C=o[0],I=o[1],L=o[2],N=o[3];I=d(I=d(I=d(I=d(I=h(I=h(I=h(I=h(I=l(I=l(I=l(I=l(I=c(I=c(I=c(I=c(I,L=c(L,N=c(N,C=c(C,I,L,N,a,7,s[0]),I,L,u,12,s[1]),C,I,f,17,s[2]),N,C,p,22,s[3]),L=c(L,N=c(N,C=c(C,I,L,N,g,7,s[4]),I,L,v,12,s[5]),C,I,m,17,s[6]),N,C,y,22,s[7]),L=c(L,N=c(N,C=c(C,I,L,N,_,7,s[8]),I,L,E,12,s[9]),C,I,A,17,s[10]),N,C,S,22,s[11]),L=c(L,N=c(N,C=c(C,I,L,N,T,7,s[12]),I,L,x,12,s[13]),C,I,b,17,s[14]),N,C,w,22,s[15]),L=l(L,N=l(N,C=l(C,I,L,N,u,5,s[16]),I,L,m,9,s[17]),C,I,S,14,s[18]),N,C,a,20,s[19]),L=l(L,N=l(N,C=l(C,I,L,N,v,5,s[20]),I,L,A,9,s[21]),C,I,w,14,s[22]),N,C,g,20,s[23]),L=l(L,N=l(N,C=l(C,I,L,N,E,5,s[24]),I,L,b,9,s[25]),C,I,p,14,s[26]),N,C,_,20,s[27]),L=l(L,N=l(N,C=l(C,I,L,N,x,5,s[28]),I,L,f,9,s[29]),C,I,y,14,s[30]),N,C,T,20,s[31]),L=h(L,N=h(N,C=h(C,I,L,N,v,4,s[32]),I,L,_,11,s[33]),C,I,S,16,s[34]),N,C,b,23,s[35]),L=h(L,N=h(N,C=h(C,I,L,N,u,4,s[36]),I,L,g,11,s[37]),C,I,y,16,s[38]),N,C,A,23,s[39]),L=h(L,N=h(N,C=h(C,I,L,N,x,4,s[40]),I,L,a,11,s[41]),C,I,p,16,s[42]),N,C,m,23,s[43]),L=h(L,N=h(N,C=h(C,I,L,N,E,4,s[44]),I,L,T,11,s[45]),C,I,w,16,s[46]),N,C,f,23,s[47]),L=d(L,N=d(N,C=d(C,I,L,N,a,6,s[48]),I,L,y,10,s[49]),C,I,b,15,s[50]),N,C,v,21,s[51]),L=d(L,N=d(N,C=d(C,I,L,N,T,6,s[52]),I,L,p,10,s[53]),C,I,A,15,s[54]),N,C,u,21,s[55]),L=d(L,N=d(N,C=d(C,I,L,N,_,6,s[56]),I,L,w,10,s[57]),C,I,m,15,s[58]),N,C,x,21,s[59]),L=d(L,N=d(N,C=d(C,I,L,N,g,6,s[60]),I,L,S,10,s[61]),C,I,f,15,s[62]),N,C,E,21,s[63]),o[0]=o[0]+C|0,o[1]=o[1]+I|0,o[2]=o[2]+L|0,o[3]=o[3]+N|0},_doFinalize:function(){var t=this._data,n=t.words,r=8*this._nDataBytes,i=8*t.sigBytes;n[i>>>5]|=128<<24-i%32;var o=e.floor(r/4294967296),a=r;n[15+(i+64>>>9<<4)]=16711935&(o<<8|o>>>24)|4278255360&(o<<24|o>>>8),n[14+(i+64>>>9<<4)]=16711935&(a<<8|a>>>24)|4278255360&(a<<24|a>>>8),t.sigBytes=4*(n.length+1),this._process();for(var s=this._hash,u=s.words,c=0;c<4;c++){var l=u[c];u[c]=16711935&(l<<8|l>>>24)|4278255360&(l<<24|l>>>8)}return s},clone:function(){var t=o.clone.call(this);return t._hash=this._hash.clone(),t}});function c(t,e,n,r,i,o,a){var s=t+(e&n|~e&r)+i+a;return(s<<o|s>>>32-o)+e}function l(t,e,n,r,i,o,a){var s=t+(e&r|n&~r)+i+a;return(s<<o|s>>>32-o)+e}function h(t,e,n,r,i,o,a){var s=t+(e^n^r)+i+a;return(s<<o|s>>>32-o)+e}function d(t,e,n,r,i,o,a){var s=t+(n^(e|~r))+i+a;return(s<<o|s>>>32-o)+e}n.MD5=o._createHelper(u),n.HmacMD5=o._createHmacHelper(u)}(Math),t.MD5},t.exports=r(n(7))},function(t,e,n){"use strict";for(var r=n(12),i=n(42),o=n(90),a=n(31),s=new Array(256),u=0;u<256;u++)s[u]=u>=252?6:u>=248?5:u>=240?4:u>=224?3:u>=192?2:1;function c(){a.call(this,"utf-8 decode"),this.leftOver=null}function l(){a.call(this,"utf-8 encode")}s[254]=s[254]=1,e.utf8encode=function(t){return i.nodebuffer?o.newBufferFrom(t,"utf-8"):function(t){var e,n,r,o,a,s=t.length,u=0;for(o=0;o<s;o++)55296==(64512&(n=t.charCodeAt(o)))&&o+1<s&&56320==(64512&(r=t.charCodeAt(o+1)))&&(n=65536+(n-55296<<10)+(r-56320),o++),u+=n<128?1:n<2048?2:n<65536?3:4;for(e=i.uint8array?new Uint8Array(u):new Array(u),a=0,o=0;a<u;o++)55296==(64512&(n=t.charCodeAt(o)))&&o+1<s&&56320==(64512&(r=t.charCodeAt(o+1)))&&(n=65536+(n-55296<<10)+(r-56320),o++),n<128?e[a++]=n:n<2048?(e[a++]=192|n>>>6,e[a++]=128|63&n):n<65536?(e[a++]=224|n>>>12,e[a++]=128|n>>>6&63,e[a++]=128|63&n):(e[a++]=240|n>>>18,e[a++]=128|n>>>12&63,e[a++]=128|n>>>6&63,e[a++]=128|63&n);return e}(t)},e.utf8decode=function(t){return i.nodebuffer?r.transformTo("nodebuffer",t).toString("utf-8"):function(t){var e,n,i,o,a=t.length,u=new Array(2*a);for(n=0,e=0;e<a;)if((i=t[e++])<128)u[n++]=i;else if((o=s[i])>4)u[n++]=65533,e+=o-1;else{for(i&=2===o?31:3===o?15:7;o>1&&e<a;)i=i<<6|63&t[e++],o--;o>1?u[n++]=65533:i<65536?u[n++]=i:(i-=65536,u[n++]=55296|i>>10&1023,u[n++]=56320|1023&i)}return u.length!==n&&(u.subarray?u=u.subarray(0,n):u.length=n),r.applyFromCharCode(u)}(t=r.transformTo(i.uint8array?"uint8array":"array",t))},r.inherits(c,a),c.prototype.processChunk=function(t){var n=r.transformTo(i.uint8array?"uint8array":"array",t.data);if(this.leftOver&&this.leftOver.length){if(i.uint8array){var o=n;(n=new Uint8Array(o.length+this.leftOver.length)).set(this.leftOver,0),n.set(o,this.leftOver.length)}else n=this.leftOver.concat(n);this.leftOver=null}var a=function(t,e){var n;for((e=e||t.length)>t.length&&(e=t.length),n=e-1;n>=0&&128==(192&t[n]);)n--;return n<0?e:0===n?e:n+s[t[n]]>e?n:e}(n),u=n;a!==n.length&&(i.uint8array?(u=n.subarray(0,a),this.leftOver=n.subarray(a,n.length)):(u=n.slice(0,a),this.leftOver=n.slice(a,n.length))),this.push({data:e.utf8decode(u),meta:t.meta})},c.prototype.flush=function(){this.leftOver&&this.leftOver.length&&(this.push({data:e.utf8decode(this.leftOver),meta:{}}),this.leftOver=null)},e.Utf8DecodeWorker=c,r.inherits(l,a),l.prototype.processChunk=function(t){this.push({data:e.utf8encode(t.data),meta:t.meta})},e.Utf8EncodeWorker=l},function(t,e){t.exports=__webpack_require__(2)},function(t,e,n){"use strict";var r,i=(r=n(2))&&r.__esModule?r:{default:r},o=function(){function t(e){(0,i.default)(this,t),this.context=e,this.centralBranch=this.context.getSheetView().centralBranchView}return t.prototype.dragStart=function(){},t.prototype.dragMoving=function(){},t.prototype.dragFinish=function(){},t.prototype.getDragOverView=function(t){return null},t}();t.exports=o},function(t,e,n){"use strict";var r=o(n(99)),i=o(n(17));function o(t){return t&&t.__esModule?t:{default:t}}n(1);var a=n(0),s=a.STRUCTURECLASS,u=a.TOPIC_ATTACHED,c=a.TOPIC_CALLOUT,l=a.TOPIC_SUMMARY,h=a.TOPIC_DETACHED,d=n(8),f=n(5),p=function(t,e){return f.postorderIterate(t,[h,c,l,u],function(t){if(!t.shouldHide()&&e(t))return f.BREAK})};t.exports={traverseBranch:p,traverseBranchArr:function(t,e){var n=t,r=Array.isArray(n),o=0;for(n=r?n:(0,i.default)(n);;){var a;if(r){if(o>=n.length)break;a=n[o++]}else{if((o=n.next()).done)break;a=o.value}if(p(a,e)===f.BREAK)return f.BREAK}},rememberRightNum:function(t){for(;"branch"===t.type;)t.isMapLike()&&(t.numRightInDraging=t.getStructureObject().calcNumRight(t)),t=t.parent()},getWrapperSelectBoxInfo:function(t){var e=t.branchIndex(),n=t.parent();return[].concat(n.boundaries,n.summaries).map(function(t){var r=t.model,i=r.rangeStart,o=r.rangeEnd;if(i!==o&&i<=e&&o>=e)return[t,i,o,n]}).filter(function(t){return t})},posRelativeToBranch:function(t,e){var n=e.getRealPosition();return{x:t.x-n.x,y:t.y-n.y}},updateBranchIndex:function(t,e,n){var r=t.parent(),i=t.branchIndex(),o=r.getChildrenBranchesByType(),a=r.model.unBalancedInfo();if(a&&r.getStructureClass()===s.MAPUNBALANCED){var u=parseInt(a.content);n&&e<=u&&i+1>u?r.model.setUnBalancedInfoContent(u+1):!n&&e+1>=u&&i+1<=u&&r.model.setUnBalancedInfoContent(u-1)}r.isMapLike()&&(u=r.numRightInDraging,n&&e<=u&&i+1>u?r.numRightInDraging=u+1:!n&&e+1>=u&&i+1<=u&&(r.numRightInDraging=u-1)),o.splice(i,1),o.splice(e,0,t),r.isCentralBranch()&&r.sheetView.isMultiLineColors()&&function t(e){e===r||e._draged||e.topicView.render(),e.getChildrenBranchesByType().forEach(function(e){t(e)})}(r),r.layout({afterward:function(){var t=r.getPolyPointsArr();r.updatePolygon();var e=r.getPolyPointsArr();t&&e.forEach(function(e,n){var r=t.find(function(t){return t.side===e.side});e.points=d.convexHull(e.points.concat(r.points))})}})},removeRightNum:function(t){for(;"branch"===t.type;)t.isMapLike()&&delete t.numRightInDraging,t=t.parent()},dragCancel:(0,r.default)()}},function(t,e,n){"use strict";var r,i=n(0).STRUCTURECLASS,o=n(302),a=n(301),s=n(316),u=n(315),c=n(306),l=n(307),h=n(135),d=n(304),f=n(303),p=n(305),g=n(311),v=n(313),m=n(312),y=n(314),_=n(296),E=n(299),A=n(300),S=n(297),T=n(308),x=n(309),b=n(137),w=n(138),C=n(295),I=n(310),L=((r={})[i.LOGICRIGHT]=o,r[i.LOGICLEFT]=a,r[i.TREERIGHT]=s,r[i.TREELEFT]=u,r[i.ORGCHARTDOWN]=c,r[i.ORGCHARTUP]=l,r[i.MAPCLOCKWISE]=h,r[i.MAPANTICLOCKWISE]=d,r[i.MAP]=f,r[i.MAPUNBALANCED]=p,r[i.MAPFLOATING]=f,r[i.MAPFLOATINGANTICLOCKWISE]=d,r[i.MAPFLOATINGCLOCKWISE]=h,r[i.TIMELINEHORIZONTAL]=g,r[i.TIMELINEHORIZONTALUP]=v,r[i.TIMELINEHORIZONTALDOWN]=m,r[i.TIMELINEVERTICAL]=y,r[i.FISHBONELEFTHEADED]=_,r[i.LEFTHEADEDNENORMAL]=E,r[i.LEFTHEADEDSENORMAL]=A,r[i.FISHBONERIGHTHEADED]=S,r[i.RIGHTHEADEDNWNORMAL]=T,r[i.RIGHTHEADEDSWNORMAL]=x,r[i.SPREADSHEET]=b,r[i.SPREADSHEETROW]=w,r[i.COLUMNSPREADSHEET]=C,r[i.SPREADSHEETCOLUMN]=I,r[i.LOGICCHARTRIGHT]=o,r[i.LOGICCHARTLEFT]=a,r);t.exports=L},function(t,e,n){"use strict";(function(e){function r(t){return t&&t.__esModule?t:{default:t}}r(n(4)),r(n(14));var i=e.SVG,o=n(1),a=n(9),s=n(0),u=(s.CLASS_TYPE,s.SERVICE_NAME,s.TOPIC_TYPE),c=(n(13),n(0)),l=c.DIRECTION,h=c.STRUCTURECLASS,d=c.SIMILAR_STRUCTURE_MAP,f=n(33).isDef;t.exports={getTopicSVGStructureCopy:function(t){var e=t.topicView,n=new i.G,r=e.topicGroup.attr();delete r.id;var s=n.attr(r),u=e.topicShapeGroup.attr();delete u.id;var c=s.put((new i.G).attr(u)),l=e.topicShape.attr();delete l.id,c.put((new i.Path).attr(l));var h=e.topicShapeFill.attr();delete h.id,c.put((new i.Path).attr(h));var d=e.s$topicInnerElementGroup.attr();delete d.id;for(var f=s.put((new i.G).attr(d)),p=a(e.titleText.node).clone(),g=[p];g.length>0;){var v=g.pop();v.attr("id",null),o.each(v.children(),function(t,e,n){return g.unshift(n.eq(e))})}return p.attr("id",null),f.node.appendChild(p[0]),n},getViewStructure:function(t,e){if(t.isCentralBranch())return f(e)?e:h.MAP;var n=t.parent(),r=n.getStructureClass(),i=n.getStructureObject();if(t.isDetachedBranch())return f(e)?e:t.getRealPosition().x<n.getRealPosition().x?h.LOGICLEFT:h.LOGICRIGHT;if(t.isCalloutBranch())return i.getCalloutStructure(n,t);var o=t.summaryIndex();if(t.isSummaryBranch()&&-1!==o){var a=n.summaries[o].model.rangeStart;return function(t){switch(i.getSummaryDirection(n,a)){case l.LEFT:return h.LOGICLEFT;case l.RIGHT:return h.LOGICRIGHT;case l.UP:return h.ORGCHARTUP;case l.DOWN:return h.ORGCHARTDOWN}}()}if(f(e)){var s=i.getAvailableChildStructure(n,t);if(s.indexOf(e)>-1)return e;var u=d[e];if(f(u)&&s.indexOf(u)>-1)return u;var c=t.branchIndex();return i.getChildStructure(r,c,n)}var p=t.branchIndex();return i.getChildStructure(r,p,n)},getAllChildrenBranchViewList:function t(e,n){var r=n?[e]:[],i=e.getChildrenBranchesByType([u.DETACHED,u.ATTACHED,u.CALLOUT,u.SUMMARY]);return i.length?(r.push.apply(r,i),i.forEach(function(e){r.push.apply(r,t(e))}),r):r}}}).call(e,n(6))},function(t,e,n){"use strict";var r=n(1),i=n(0).TOPIC_SUMMARY;t.exports=function t(e,n){var o,a,s=n.createComponent("topic",e);r.each(e.children||{},function(e,o){o!==i&&r.each(e,function(e){r.isEmpty(e)||s.addChildTopic(t(e,n),{type:o},!0)})}),r.each(e.boundaries||{},function(t){r.isEmpty(t)||(o=s.addBoundary(t,!0))&&t.style&&!r.isEmpty(t.style)&&o.initStyle(t.style)}),r.each(e.summaries||{},function(t){r.isEmpty(t)||(a=s.addSummary(t,!0))&&t.style&&!r.isEmpty(t.style)&&a.initStyle(t.style)}),r.each((e.children||{})[i],function(e){r.isEmpty(e)||s.summaries().some(function(t){return t.get("topicId")===e.id})&&s.addChildTopic(t(e,n),{type:i},!0)}),r.each(e.markers||{},function(t){r.isEmpty(t)||s.addMarker(t,!0)});var u={"org.xmind.ui.taskInfo":s.addTaskInfo,"org.xmind.ui.audionotes":s.addAudioNotes,"org.xmind.ui.map.unbalanced":s.addMapUnbalanced};return r.each(e.extensions||{},function(t){!r.isEmpty(t)&&t.provider&&u[t.provider]&&u[t.provider].bind(s)(t,!0)}),e.style&&!r.isEmpty(e.style)&&s.initStyle(e.style),s}},function(t,e,n){"use strict";(function(e,r){var i,o,a=v(n(54)),s=v(n(45)),u=v(n(3)),c=v(n(11)),l=v(n(4)),h=n(0),d=v(n(332)),f=n(333),p=v(n(334)),g=v(n(151));function v(t){return t&&t.__esModule?t:{default:t}}var m=n(156),y=n(150),_=n(337),E=n(95),A=n(9),S=n(20),T=n(33),x=T.isDef,b=(T.isUndef,n(8)),w=n(21),C=n(1),I=e.SVG,L=((i={})[h.STRUCTURECLASS.FISHBONERIGHTHEADED]=h.TOPICSHAPE.FISHHEADTORIGHT,i[h.STRUCTURECLASS.FISHBONELEFTHEADED]=h.TOPICSHAPE.FISHHEADTOLEFT,i[h.STRUCTURECLASS.RIGHTHEADEDNWNORMAL]=h.TOPICSHAPE.FISHBONE_NW_UNDERLINE,i[h.STRUCTURECLASS.RIGHTHEADEDSWNORMAL]=h.TOPICSHAPE.UNDERLINE,i[h.STRUCTURECLASS.LEFTHEADEDNENORMAL]=h.TOPICSHAPE.FISHBONE_NE_UNDERLINE,i[h.STRUCTURECLASS.LEFTHEADEDSENORMAL]=h.TOPICSHAPE.UNDERLINE,i),N=w.extend({type:h.VIEW_TYPE.TOPIC,__style:{topicShapeSelectBox:{"stroke-width":"2px",stroke:"#2ebdff",fill:"none"},topicShapeSelectBox__mouseover:{"stroke-opacity":"0.5",stroke:"#2ebdff"},topicShapeSelectBox__selected:{"stroke-opacity":"1",fill:"none"},topicShapeSelectBox__deFocus:{"stroke-opacity":"1",stroke:"#9f9f9f",fill:"none"},topicShapeSelectBox__intersected:{"stroke-width":"2px",stroke:"#2ebdff",fill:"none"},topicShape:{},topicShape__intersected:{"stroke-width":"5px",stroke:"#2ebdff"}},initialize:function(){var t=this;this.shapeBounds={},this.bounds={},this.markers={},this.classicCardItemList=[],this.topicShapeStyle=null,this.numberingView=null,this.titleView=null,this.markersView=null,this.vanaMoreView=null,this.vanaLabelsView=null,this.on("afterAncestorChange",function(){t.getContext()&&(t.model.isCallout()||t.config(h.CONFIG.NO_TOPIC_CUSTOM_WIDTH_BTN)||void 0!==t.topicCustomWidthControlBar||(t.topicCustomWidthControlBar=new d.default(t),t.topicGroup.put(t.topicCustomWidthControlBar.getSvg())))}),this.gridLayout=new f.GridLayout,this.initSVGStructure(),this.initEventsListener()},initSVGStructure:function(){this.topicGroup=(new I.G).data("name","topic"),this.topicShapeGroup=(new I.G).data("name","topic-shape-group"),this.topicShapeFill=this.topicShapeGroup.put(new I.Path).data("name","topic-shape-fill"),this.topicShape=this.topicShapeGroup.put(new I.Path).data("name","topic-shape").attr("fill","none"),this.s$topicInnerElementGroup=this.topicShapeGroup.put((new I.G).data("name","inner-element-group")),this.topicGroup.put(this.topicShapeGroup),this.titleText=null,this.topicShapeSelectBox=(new I.Path).data("name","topic-shape-select-box").hide(),this.style(this.topicShapeSelectBox,"topicShapeSelectBox"),this.topicGroup.put(this.topicShapeSelectBox)},initEventsListener:function(){var t=this.model,e=t.modelEvents;"readonly"!==r.env.SB_MODE&&(this.listenTo(t,e.addMarker,this.onAddMarker),this.listenTo(t,e.removeMarker,this.onRemoveMarker),this.listenTo(t,e.changeMarker,this.onChangeMarker),this.listenTo(t,"addImage",this.onAddImage),this.listenTo(t,"removeImage",this.onRemoveImage),this.listenTo(t,"changeImage",this.onChangeImage),this.listenTo(t,"resizeImage",this.onResizeImage),this.listenTo(t,"alignImage",this.onAlignImage),this.listenTo(t,"change:title",this.refresh),this.listenTo(t,"setStyleObject",this.refresh),this.listenTo(t,e.changeCustomWidth,this.refresh),this.listenTo(t,e.labelsChanged,this.onLabelsChanged),this.listenTo(t,e.informationChanged,this.onInformationChanged))},initPendantView:function(){var t=this.model;this.addTitleView(new _),this.parent().getNumberingText()&&this.addNumberingView(new m),t.get("image")&&this.addImageView(new y)},initFashionInformationIcons:function(){var t=this.getInformationData();if(this.markersView&&(this.markersView.remove(),this.markersView=null),this.vanaMoreView&&(this.vanaMoreView.remove(),this.vanaMoreView=null),t){var e=t.markersInfo;x(e)&&(this.markersView=new p.default(e,this)),delete t.markersInfo,(0,c.default)(t).length>0&&(this.vanaMoreView=new g.default(t),this.vanaMoreView.parent(this))}},initFashionLabelsUnitCard:function(){if(this.vanaLabelsView&&this.vanaLabelsView.remove(),this.vanaLabelsView=null,!this.isMatrixItem()){var t=this.model.getLabel();t&&(this.vanaLabelsView=new E(t.split(","),this))}},initStyle:function(){this.setBorderWidth(),this.setBorderColor(),this.setFillColor()},render:function(t,e){t||e?this.changeHooks[t].call(this,l.default.getStyleValue(this.parent(),t)):this.initStyle(),this.renderTopicAllElem(),this._isRender=!0},renderTopicAllElem:function(){var t=this.getShapeStyle();return this.topicShapeStyle=t,this.renderAllElemWithGrid(),S[this.topicShapeStyle].render(this),S[this.topicShapeStyle].updateBounds(this),this.topicCustomWidthControlBar&&this.topicCustomWidthControlBar.render(),this.trigger("topicviewboundschange",(0,u.default)({},this.bounds)),this},renderAllElemWithGrid:function(t){var e=this;void 0===t&&(t=this.model.customWidth()),this.initFashionInformationIcons(),this.initFashionLabelsUnitCard(),this.image&&(this.topicShapeGroup.put(this.image.getSvg()),this.image.render()),this.vanaLabelsView&&(this.topicGroup.put(this.vanaLabelsView.getSvg()),this.vanaLabelsView.render()),this.getInnerViewList().forEach(function(t){e.s$topicInnerElementGroup.put(t.getSvg()),t.render()});var n=this.getFashionTopicGrid();if(t){this.gridLayout.computeSize(n);var r=this.getTopicMinWidth();(function t(e,n){var r=n-e.bounds.width;if(e.children){if(e.direction===f.Grid.directionOption.HORIZON)e.children.forEach(function(e){t(e,e.getSize().width+r)});else if(e.direction===f.Grid.directionOption.VERTICAL){var i=Math.max.apply(Math,e.children.map(function(t){return t.getSize().width}));e.children.forEach(function(e){t(e,i+r)})}}else e.setWidthFn&&(e.setWidthFn(n),e.updateBounds())})(n,t>=r?t:r),this.gridLayout.computeSize(n)}else this.titleView&&(this.titleView.titleWidth(0),this.titleView.render()),this.gridLayout.computeSize(n),this.vanaLabelsView&&(this.vanaLabelsView.setParentWidth(n.bounds.width),this.vanaLabelsView.render());this.shapeBounds=n.children[0].bounds,this.bounds=n.bounds,function t(e){e.children&&e.children.forEach(function(e){return t(e)});var n=e.getPosition().x,r=e.getPosition().y;e.move(n,r)}(n)},getTopicMinWidth:function(){var t=this,e=this.titleView,n=function(){for(var e,n=arguments.length,r=Array(n),i=0;i<n;i++)r[i]=arguments[i];return(e=t.getContext()).callService.apply(e,[h.SERVICE_NAME.GET_TEXT_SIZE].concat(r))}("AAA",e.fontInfo),r=e.bounds.width;e.bounds.width=n.width;var i=void 0;this.vanaLabelsView&&(i=this.vanaLabelsView.bounds.width,this.vanaLabelsView.bounds.width=38);var o=this.getFashionTopicGrid();this.gridLayout.computeSize(o);var a=o.getSize().width;return e.bounds.width=r,this.vanaLabelsView&&(this.vanaLabelsView.bounds.width=i),a},getFashionTopicGrid:function(){var t=this,e=f.Grid.alignOption,n=f.Grid.directionOption,r=this.getInnerViewList().map(function(t){var e=new f.Entity({bounds:function(){return t.bounds},move:function(e,n){t.move(e,n)}});return t.type===h.VIEW_TYPE.TITLE?new f.StretchCell(e,function(e){t.titleWidth(e),t.render()}):new f.Cell(e)}),i=new f.Grid({entity:new f.Entity({move:function(e,n){t.s$topicInnerElementGroup.translate(e,n)}}),align:e.MIDDLE,direction:n.HORIZON,childSpacing:10,children:r}),o=new f.Grid((0,u.default)({entity:new f.Entity({move:function(e,n){t.topicShapeGroup.translate(e,n)}}),align:f.Grid.alignOption.MIDDLE,childSpacing:10,padding:function(e){return S[t.topicShapeStyle].prefInsets(t.parent(),e)}},function(e){var n=f.Grid.directionOption.VERTICAL,r=[e],i=t.image,o=new f.Entity({bounds:function(){return i.bounds},move:function(t,e){i.move(t,e)}});if(i)switch(t.model.get("image").align){case"left":n=f.Grid.directionOption.HORIZON,r.unshift(new f.Cell(o));break;case"right":n=f.Grid.directionOption.HORIZON,r.push(new f.Cell(o));break;case"bottom":r.push(new f.Cell(o));break;case"top":default:r.unshift(new f.Cell(o))}return{direction:n,children:r}}(i))),a=[o];if(this.vanaLabelsView){var c=new f.Entity({bounds:function(){return t.vanaLabelsView.bounds},move:function(e,n){t.vanaLabelsView.move(e,n)}});a.push(new f.StretchCell(c,function(e){t.vanaLabelsView.setParentWidth(e),t.vanaLabelsView.render()}))}return new f.Grid({entity:new f.Entity({move:function(e,n){t.topicGroup.translate(e,n)}}),align:f.Grid.alignOption.LEFT,direction:f.Grid.directionOption.VERTICAL,childSpacing:4,children:a,boundsXY:function(t){var e=o.bounds,n=e.x,r=e.y;return(0,s.default)({},t,{x:n,y:r})}})},getInnerViewList:function(){return[this.numberingView,this.markersView,this.titleView,this.vanaMoreView].filter(x)},getInformationData:function(){var t=this.model,e=t.getNotes(),n=t.getComments(),r=t.getHref(),i=t.getTaskInfo(),o=t.markers(),a=t.getAudioNotes(),s={};i&&(i.content||[]).forEach(function(t){return s[t.name]=!0});var l={};return r&&(0,u.default)(l,{hrefInfo:r}),a&&(0,u.default)(l,{audioNotesInfo:a}),o.length&&(0,u.default)(l,{markersInfo:o}),e&&e.plain&&(0,u.default)(l,{notesInfo:e}),n&&n.length&&(0,u.default)(l,{commentsInfo:n}),(s["assigned-to"]||s["start-date"]||s["end-date"])&&(0,u.default)(l,{taskInfo:i.content}),0===(0,c.default)(l).length?null:l},getShapeStyle:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.getStructureClass(),e=L[t]||l.default.getStyleValue(this.parent(),h.STYLE_KEYS.SHAPE_CLASS);return S[e]||(e=l.default.getDefaultStyleValue(this.parent(),h.STYLE_KEYS.SHAPE_CLASS)),e},refresh:function(){if(this.render(),this.model.isCollapse()&&(this.parent()._isLayout=!1),this.parent().isLeafBranch()||this.model.isCollapse())this.parent().trigger("change:bounds");else{var t=this.parent().getMatrixStructureBranch();x(t)?t.layout():this.parent().layout()}},showSelectBox:function(){this.topicShapeSelectBox.show(),this.style(this.topicShapeSelectBox,"topicShapeSelectBox__mouseover")},hideSelectBox:function(){this.topicShapeSelectBox.hide(),this.topicCustomWidthControlBar&&this.topicCustomWidthControlBar.hide()},activateSelectBox:function(){this.topicShapeSelectBox.show(),this.style(this.topicShapeSelectBox,"topicShapeSelectBox__selected"),this.topicCustomWidthControlBar&&this.topicCustomWidthControlBar.show()},deFocusSelectBox:function(){this.topicShapeSelectBox.show(),this.style(this.topicShapeSelectBox,"topicShapeSelectBox__deFocus"),this.topicCustomWidthControlBar&&this.topicCustomWidthControlBar.disabled()},showIntersection:function(){this.topicShapeSelectBox.show(),this.style(this.topicShapeSelectBox,"topicShapeSelectBox__intersected")},hideIntersection:function(){this.topicShapeSelectBox.hide(),this.style(this.topicShapeSelectBox,"topicShapeSelectBox")},onAddMarker:function(t,e){this.onInformationChanged()},onChangeMarker:function(t,e){this.onInformationChanged()},onRemoveMarker:function(t){this.onInformationChanged()},onLabelsChanged:function(){this.refresh()},onInformationChanged:function(t){this.refresh()},showOrHideLabel:function(){this.label&&(this.isLabelVisible()?(this.renderTopicAllElem(),this.label.labelGroup.show()):(this.label.labelGroup.hide(),this.bounds=C.extend({},this.shapeBounds)))},isLabelVisible:function(){if(this.isFishboneStructure())return!1;var t=this.parent().parent();if(t&&"branch"===t.type){var e=[h.STRUCTURECLASS.SPREADSHEETROW,h.STRUCTURECLASS.SPREADSHEETCOLUMN],n=t.getStructureClass();if(C.indexOf(e,n)>=0)return!1}return!0},addImageView:function(t){var e=this;t.parent(this),this.image=t,this.topicGroup.put(t.imageGroup),this.listenTo(t,"reRenderImage",this.refresh),this.listenTo(t,"resize",function(t){e.model.resizeImage(t)})},onResizeImage:function(t){this.image.resize(t),this.refresh()},onAddImage:function(t){this.addImageView(new y(t?{model:{src:t,type:"image"}}:{})),this.refresh()},removeImageView:function(t){t.remove()},onRemoveImage:function(t){var e=this.image;e&&this.removeImageView(e),this.refresh()},onChangeImage:function(t){this.image.reRender=!1,this.image.base64Src=t,this.refresh()},onAlignImage:function(){this.refresh()},addTitleView:function(t){this.titleView=t,this.titleTextGroup=t.titleTextGroup,this.titleText=t.titleText,t.parent(this)},hideTitle:function(){this.titleView.hide()},showTitle:function(){this.titleView.show()},addNumberingView:function(t){return this.numberingView=t,t.parent(this),this},setTextTransform:function(t){this.model.changeStyle(h.STYLE_KEYS.TEXT_TRANSFORM,t)},getTextTransform:function(){return l.default.getStyleValue(this.parent(),h.STYLE_KEYS.TEXT_TRANSFORM)||h.TEXTTRANSFORM.MANUAL},getStructureClass:function(){return this.parent().getStructureClass()},setTopicShape:function(t){var e=this.topicShapeStyle;return e!==t&&(this.topicShape.remember("topicShapeStyle",e),this.titleView.titleWidth(0),this.model.customWidth(0),this.topicCustomWidthControlBar&&this.topicCustomWidthControlBar.hide()),t},setBorderWidth:function(){this.topicShape.attr({"stroke-width":parseInt(l.default.getStyleValue(this.parent(),h.STYLE_KEYS.BORDER_LINE_WIDTH)||0)})},setFillColor:function(t){var e=this.editDomain();t=l.default.getStyleValue(this.parent(),h.STYLE_KEYS.FILL_COLOR);var n=l.default.getStyleValue(this.parent(),h.STYLE_KEYS.FILL_GRADIENT);if(!n&&this.topicShapeFill.remember("fillGradient")&&(this.topicShapeFill.remember("fillGradient").remove(),this.topicShapeFill.forget("fillGradient")),!this.model.isCollapse()){var r=this.getStructureClass();r!==h.STRUCTURECLASS.SPREADSHEET&&r!==h.STRUCTURECLASS.COLUMNSPREADSHEET&&r!==h.STRUCTURECLASS.SPREADSHEETROW&&r!==h.STRUCTURECLASS.SPREADSHEETCOLUMN||(t="none")}return b.setFillColor(e,this.topicShapeFill,t,n),this},setLineColor:function(t){this.topicShape.attr({stroke:t})},setLineWidth:function(t){this.topicShape.attr({"stroke-width":t})},setTextColor:function(t){this.numberingView&&this.numberingView.render(),this.vanaMoreView&&this.vanaMoreView.render(),this.titleView.render()},setFontSize:function(t){this.titleText.attr({"font-size":t})},setFontWeight:function(t){this.titleText.attr({"font-weight":t})},setFontStyle:function(t){this.titleText.attr({"font-style":t})},setTextDecoration:function(t){this.titleText.attr({"text-decoration":t})},setFontFamily:function(t){(0,a.default)(this.titleText.node.querySelectorAll("tspan")).forEach(function(e){A(e).css("font-family",t)})},setBorderColor:function(){var t=l.default.getStyleValue(this.parent(),h.STYLE_KEYS.BORDER_LINE_COLOR),e=l.default.getStyleValue(this.parent(),h.STYLE_KEYS.BORDER_GRADIENT),n=null,r=this.topicShape.remember("borderGradient");!e&&r&&(r.remove(),this.topicShape.forget("borderGradient")),e&&(n=b.createOrUpdateGradient(this.editDomain().svg,e,r),this.topicShape.remember("borderGradient",n)),this.topicShape.attr({fill:"none",stroke:n||t})},isFishboneStructure:function(){var t=this.getStructureClass(),e=[h.STRUCTURECLASS.LEFTHEADEDNENORMAL,h.STRUCTURECLASS.LEFTHEADEDSENORMAL,h.STRUCTURECLASS.RIGHTHEADEDNWNORMAL,h.STRUCTURECLASS.RIGHTHEADEDSWNORMAL];return C.indexOf(e,t)>=0},infoItemDisplayChanged:function(t,e){this.refresh()},isMatrixItem:function(){var t=this.parent().parent(),e=t.getStructureClass&&t.getStructureClass();return e===h.STRUCTURECLASS.SPREADSHEETROW||e===h.STRUCTURECLASS.SPREADSHEETCOLUMN},changeHooks:(o={},o[h.STYLE_KEYS.FILL_COLOR]=function(){this.setFillColor()},o[h.STYLE_KEYS.LINE_COLOR]=function(t){this.setLineColor(t)},o[h.STYLE_KEYS.LINE_WIDTH]=function(t){this.setLineWidth(t)},o[h.STYLE_KEYS.BORDER_LINE_COLOR]=function(){this.setBorderColor()},o[h.STYLE_KEYS.BORDER_LINE_WIDTH]=function(t){this.setBorderWidth(t)},o[h.STYLE_KEYS.TEXT_COLOR]=function(t){this.setTextColor(t)},o[h.STYLE_KEYS.FONT_SIZE]=function(t){this.setFontSize(t)},o[h.STYLE_KEYS.FONT_WEIGHT]=function(t){this.setFontWeight(t)},o[h.STYLE_KEYS.FONT_STYLE]=function(t){this.setFontStyle(t)},o[h.STYLE_KEYS.TEXT_DECORATION]=function(t){this.setTextDecoration(t)},o[h.STYLE_KEYS.FONT_FAMILY]=function(t){this.setFontFamily(t)},o),remove:function(){this.stopListening(),this.$el.remove();var t=this.topicShapeFill.remember("fillGradient");t&&t.remove();var e=this.topicShape.remember("borderGradient");e&&e.remove()}});t.exports=N}).call(e,n(6),n(28))},function(t,e){var n={}.toString;t.exports=function(t){return n.call(t).slice(8,-1)}},function(t,e){t.exports={}},function(t,e,n){var r=n(171),i=n(103);t.exports=Object.keys||function(t){return r(t,i)}},function(t,e){t.exports=function(t,e){return{enumerable:!(1&t),configurable:!(2&t),writable:!(4&t),value:e}}},function(t,e,n){var r=n(83);t.exports=function(t){return Object(r(t))}},function(t,e,n){(function(t){function n(t){return Object.prototype.toString.call(t)}e.isArray=function(t){return Array.isArray?Array.isArray(t):"[object Array]"===n(t)},e.isBoolean=function(t){return"boolean"==typeof t},e.isNull=function(t){return null===t},e.isNullOrUndefined=function(t){return null==t},e.isNumber=function(t){return"number"==typeof t},e.isString=function(t){return"string"==typeof t},e.isSymbol=function(t){return"symbol"==typeof t},e.isUndefined=function(t){return void 0===t},e.isRegExp=function(t){return"[object RegExp]"===n(t)},e.isObject=function(t){return"object"==typeof t&&null!==t},e.isDate=function(t){return"[object Date]"===n(t)},e.isError=function(t){return"[object Error]"===n(t)||t instanceof Error},e.isFunction=function(t){return"function"==typeof t},e.isPrimitive=function(t){return null===t||"boolean"==typeof t||"number"==typeof t||"string"==typeof t||"symbol"==typeof t||void 0===t},e.isBuffer=t.isBuffer}).call(e,n(55).Buffer)},function(t,e,n){"use strict";var r;r="undefined"!=typeof Promise?Promise:n(453),t.exports={Promise:r}},function(t,e){"function"==typeof Object.create?t.exports=function(t,e){t.super_=e,t.prototype=Object.create(e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}})}:t.exports=function(t,e){t.super_=e;var n=function(){};n.prototype=e.prototype,t.prototype=new n,t.prototype.constructor=t}},function(t,e,n){"use strict";var r,i=a(n(2)),o=a(n(30));function a(t){return t&&t.__esModule?t:{default:t}}var s=n(0),u=n(1),c=s.CONFIG,l=s.EVENTS,h=u.invert(c),d=((r={})[c.XAP_LOADER]=function(){return new o.default(function(t){t("")})},r[c.URL_PREFIX]="",r[c.FONT_URL_PREFIX]="",r[c.LANGUAGE]=s.LANGS.EN_US,r[c.MAX_SCALE]=1/0,r[c.MIN_SCALE]=0,r[c.NO_KEYBIND]=!1,r[c.KEYBINDING_SERVICE]=function(t,e){return null},r[c.NO_EDIT_RECEIVER]=!1,r[c.READONLY]=!1,r[c.HIDE_COLLAPSE_BTN]=!0,r[c.NO_TOPIC_CUSTOM_WIDTH_BTN]=!0,r[c.INFO_ITEM_STYLE]=s.INFO_ITEM_STYLE_TYPE.FASHION,r[c.CLIPBOARD_READER]=function(){return null},r[c.DEFERED_EVENTS]=[l.UNDO_STATE_CHANGE,l.AFTER_ADD_TOPIC,l.AFTER_REMOVE_TOPIC,l.SELECTION_CHANGED,l.SCALE_CHANGED],r[c.PADDING_FACTOR]=1,r[c.DEFERED_TIME]=250,r[c.FAKE_IMAGE]=!1,r[c.LOGGER]={info:console.info,warn:console.warn,error:console.error,debug:console.debug},r),f=new(function(){function t(e){(0,i.default)(this,t),this.data={}}return t.prototype.merge=function(t){for(var e in t)this.set(e,t[e])},t.prototype.get=function(t){return this.data[t]},t.prototype.set=function(t,e){t in h&&(this.data[t]=e)},t}())(d);f.merge(d),t.exports=f},function(t,e,n){"use strict";(function(e){var r=o(n(4)),i=(n(5),o(n(9)));function o(t){return t&&t.__esModule?t:{default:t}}var a=n(0),s=a.STRUCTURECLASS,u=a.DIRECTION,c=a.TOPIC_ATTACHED,l=a.CLASS_TYPE,h=a.VIEW_TYPE,d=n(10).isLineTapered,f=n(8),p=(n(1),e.SVG,function(t,e){var n=t.indexOf(e);n>-1&&t.splice(n,1)}),g=[l.CALLOUT_TOPIC,l.SUMMARY_TOPIC,l.CENTRAL_TOPIC];t.exports={showPolygon:function(t,e){},attachBranchTo:function(t,e,n,r,i){var o=e.model.unBalancedInfo(),a=e.numRightInDraging;i&&e.isMapLike()&&void 0!==a&&(e.numRightInDraging=a+1),i&&o&&e.getStructureClass()===s.MAPUNBALANCED&&(a=parseInt(o.content),e.model.setUnBalancedInfoContent(a+1));var u=t.connection.getPath(),l=d(e);l||u.style({stroke:"#2ebdff","stroke-opacity":"0.5",fill:"none"}),e.getChildrenBranchesByType().splice(n,0,t),t.model._type=c,r&&t.move(r.x,r.y),e.branchContainer.add(t.svg),e.connectionContainer.add(t.connection.connectionPath),t._parent=e,t.model.parent(e.model),e.isCentralBranch()&&e.sheetView.isMultiLineColors()&&function t(n){n===e||n._draged||n.topicView.render(),n.getChildrenBranchesByType().forEach(function(e){t(e)})}(e),e.layout({afterward:function(){var t=e.getPolyPointsArr();e.updatePolygon();var n=e.getPolyPointsArr();t&&n.forEach(function(e,n){var r=t.find(function(t){return t.side===e.side});e.points=f.convexHull(e.points.concat(r.points))}),l&&u.style({stroke:"#2ebdff","stroke-opacity":"0.5",fill:"#2ebdff","fill-opacity":"0.5"})}})},detachBranch:function(t,e){if(-1!==t.branchIndex()){var n=t.parent(),r=n.getChildrenBranchesByType(),i=t.branchIndex();r.splice(i,1);var o=n.model.unBalancedInfo(),a=n.numRightInDraging;n.isMapLike()&&void 0!==a&&i+1<=a&&(n.numRightInDraging=a-1),o&&n.getStructureClass()===s.MAPUNBALANCED&&i+1<=(a=parseInt(o.content))&&n.model.setUnBalancedInfoContent(a-1),n.isCentralBranch()&&n.sheetView.isMultiLineColors()&&function t(e){e!==n&&e.topicView.render(),e.getChildrenBranchesByType().forEach(function(e){t(e)})}(n),t.svg.remove(),t.connection.remove(),e||n.layout({afterward:n.updatePolygon.bind(n)})}},getTargetIndex:function(t,e,n,r){var i=n.side,o=n.relatedBranch,a=e.getChildrenBranchesByType().slice(),c=o.slice();if(p(a,t),p(c,t),0===c.length)return function(t){var n=e.getStructureClass()===s.MAPANTICLOCKWISE;return"right"===i&&n||"left"===i&&!n?t.length:0}(a);var l=function(t){var n=o[0].branchIndex();return e.getRangeGrowthDirection(n)}(),h=l===u.UP||l===u.DOWN?"y":"x",d=l===u.DOWN||l===u.RIGHT?1:-1,f=c.map(function(t){return{branchIndex:a.indexOf(t),pos:t.getRealPosition()}});f.sort(function(t,e){return t.branchIndex-e.branchIndex});var g=r[h]*d,v=function(t,e){var n=0;return t.forEach(function(t,r){t<e&&(n=r+1)}),n}(f.map(function(t){return t.pos[h]*d}),g),m=f.length;return v===m?f[m-1].branchIndex+1:f[v].branchIndex},dragThreshold:function(t,e,n){var r="press"===t.type,o=n.getDragEventClientPosition(t,r);if(!o)return console.error("pointer");var a={x:o.x,y:o.y};if(n.isMobilePlatform())return e(a);var s=r?"touchmove.threshold":"mousemove.threshold",u=r?"touchend.threshold":"mouseup.threshold",c=(0,i.default)(document);c.on(s,function(t){t.preventDefault(),r&&n.setScrollDisable();var i="touchmove"===t.type?t.changedTouches[0]:t,s=o.x-i.clientX,u=o.y-i.clientY;s*s+u*u>=25&&(c.off(".threshold"),e(a))}),c.on(u,function(t){r&&n.setScrollEnable(),c.off(".threshold")})},filterMultiDragBranches:function(t){return function(t){var e=[],n={path:"never"};return t.map(function(t){return{branch:t,path:t.getBranchPath(),toString:function(){return this.path}}}).sort().forEach(function(t){t.path.startsWith(n.path)||(n=t,e.push(n.branch))}),e}(t.filter(function(t){return t.type===h.BRANCH&&!g.includes(r.default.getClassName(t))}))}}}).call(e,n(6))},function(t,e,n){"use strict";var r=n(22),i=function(t,e){return{x:t,y:e}},o={crosspoint:function(t,e,n){if(r.equal(t,e))return t;var i=r.diff(t,e);return i=r.normalize(i,n),i=r.rotate(i,Math.PI/2),r.add(t,i)},pivot:function(t,e){return{x:2*t.x-e.x,y:2*t.y-e.y}},flexSidePoint:function(t,e,n,i){if(r.equal(t,e)||t.y===e.y&&e.y===n.y||t.x===e.x&&e.x===n.x)return o.crosspoint(e,n,i);var a=r.diff(t,e),s=r.diff(e,n);a=r.normalize(a),s=r.normalize(s);var u=r.add(a,s);if(u=r.normalize(u,i),u=r.rotate(u,Math.PI/2),isNaN(u.x))throw"Hey";return r.add(e,u)},flexCorner:function(t,e,n,i){var o=r.diff(e,t),a=r.diff(e,n);return o=r.normalize(o,i),a=r.normalize(a,i),[r.add(e,o),r.add(e,a)]},flexCornerEaseIn:function(t,e,n,i){var o=r.diff(e,t),a=r.diff(e,n);return o=r.normalize(o,2*i),a=r.normalize(a,i),[r.add(e,o),r.add(e,a)]}},a=2/3;function s(t,e,n){var r=e.startPos,i=e.colPos,a=e.endPos,s=3*n,u=2*n,c=n,l=o.crosspoint(r,i,s/2),h=o.flexSidePoint(r,i,t,s/2),d=o.flexSidePoint(i,t,a,u/2),f=o.crosspoint(a,t,c/2),p=o.pivot(a,f),g=o.pivot(t,d),v=o.pivot(i,h),m=o.pivot(r,l);return"M "+l.x+" "+l.y+"L "+h.x+" "+h.y+"L "+d.x+" "+d.y+"L "+p.x+" "+p.y+"L "+f.x+" "+f.y+"L "+g.x+" "+g.y+"L "+v.x+" "+v.y+"L "+m.x+" "+m.y+" Z"}function u(t,e){var n=e.startPos,r=e.colPos,i=e.endPos,a=Math.abs(i.x-r.x),s=Math.abs(i.y-r.y),u=Math.min(a,s)/4,c=o.flexCornerEaseIn(r,t,i,u);return"M "+n.x+" "+n.y+"L "+r.x+" "+r.y+"L "+c[0].x+" "+c[0].y+"Q "+t.x+" "+t.y+" "+c[1].x+" "+c[1].y+"L "+i.x+" "+i.y}function c(t,e,n){var r=e.startPos,i=e.colPos,a=e.endPos,s=Math.abs(a.x-i.x),u=Math.abs(a.y-i.y),c=Math.max(Math.min(s,u)/4,8),l=3*n,h=2*n,d=n,f=o.flexSidePoint(i,t,a,h/2),p=o.pivot(t,f),g=o.crosspoint(r,i,l/2),v=o.pivot(r,g),m=o.flexSidePoint(r,i,t,l/2),y=o.pivot(i,m),_=o.crosspoint(a,t,d/2),E=o.pivot(a,_),A=o.flexCornerEaseIn(m,f,E,c),S=o.flexCornerEaseIn(y,p,_,c);return"M "+g.x+" "+g.y+"L "+m.x+" "+m.y+"L "+A[0].x+" "+A[0].y+"Q "+f.x+" "+f.y+" "+A[1].x+" "+A[1].y+"L "+E.x+" "+E.y+"L "+_.x+" "+_.y+"L "+S[1].x+" "+S[1].y+"Q "+p.x+" "+p.y+" "+S[0].x+" "+S[0].y+"L "+y.x+" "+y.y+"L "+v.x+" "+v.y}t.exports={rect:function(t){return"M "+t.x+" "+t.y+"L "+(t.x+t.width)+" "+t.y+"L "+(t.x+t.width)+" "+(t.y+t.height)+"L "+t.x+" "+(t.y+t.height)+"z"},hexagon:function(t){var e=t.x,n=t.width/9+t.x,r=8*t.width/9+t.x,i=t.width+t.x,o=t.y,a=t.y+t.height/2,s=t.y+t.height;return"M "+e+" "+a+"L "+n+" "+o+"L "+r+" "+o+"L "+i+" "+a+"L "+r+" "+s+"L "+n+" "+s+"Z"},peakrect:function(t){var e=t.x,n=t.x+t.width/2,r=t.x+t.width,a=Math.min(t.height/6,.2*t.width),s=t.y+a,u=t.y+t.height-a,c=i(e,s),l=i(r,s),h=i(r,u),d=i(e,u),f=i(n,s-a),p=i(n,u+a),g=o.flexCorner(d,c,f,4),v=o.flexCorner(f,l,h,4),m=o.flexCorner(l,h,p,4),y=o.flexCorner(p,d,c,4),_=o.flexCorner(c,f,l,4),E=o.flexCorner(h,p,d,4);return"M "+g[0].x+" "+g[0].y+"Q "+e+" "+s+" "+g[1].x+" "+g[1].y+"L "+_[0].x+" "+_[0].y+"Q "+f.x+" "+f.y+" "+_[1].x+" "+_[1].y+"L "+v[0].x+" "+v[0].y+"Q "+r+" "+s+" "+v[1].x+" "+v[1].y+"L "+m[0].x+" "+m[0].y+"Q "+r+" "+u+" "+m[1].x+" "+m[1].y+"L "+E[0].x+" "+E[0].y+"Q "+p.x+" "+p.y+" "+E[1].x+" "+E[1].y+"L "+y[0].x+" "+y[0].y+"Q "+e+" "+u+" "+y[1].x+" "+y[1].y+"Z"},convexrect:function(t){var e=t.x,n=t.x+t.width/2,r=t.x+t.width,a=Math.min(t.height/3,.2*t.width),s=t.y+a/2,u=t.y+t.height-a/2,c=i(e,s),l=i(r,s),h=i(r,u),d=i(e,u),f=i(n,s-a),p=i(n,u+a),g=o.flexCorner(d,c,f,5),v=o.flexCorner(f,l,h,5),m=o.flexCorner(l,h,p,5),y=o.flexCorner(p,d,c,5);return"M "+g[0].x+" "+g[0].y+"Q "+e+" "+s+" "+g[1].x+" "+g[1].y+"Q "+n+" "+(s-a)+" "+v[0].x+" "+v[0].y+"Q "+r+" "+s+" "+v[1].x+" "+v[1].y+"L "+m[0].x+" "+m[0].y+"Q "+r+" "+u+" "+m[1].x+" "+m[1].y+"Q "+n+" "+(u+a)+" "+y[0].x+" "+y[0].y+"Q "+e+" "+u+" "+y[1].x+" "+y[1].y+"Z"},straight:function(t){var e=t.startPos,n=t.colPos,r=t.endPos;return"M "+e.x+" "+e.y+"L "+n.x+" "+n.y+"L "+r.x+" "+r.y},curveHorizon:function(t){var e=t.startPos,n=t.colPos,r=t.endPos,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,o=(r.x-n.x)/5+n.x;return"M "+e.x+" "+e.y+"L "+n.x+" "+n.y+"Q "+o+" "+r.y+" "+(r.x-i)+" "+r.y},curveVertical:function(t){var e=t.startPos,n=t.colPos,r=t.endPos,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return"M "+e.x+" "+e.y+"L "+n.x+" "+n.y+"Q "+r.x+" "+n.y+" "+r.x+" "+(r.y-i)},elbowVertical:function(t){var e=t.startPos,n=t.colPos,r=t.endPos;return"M "+e.x+" "+e.y+"L "+n.x+" "+n.y+"L "+r.x+" "+n.y+"L "+r.x+" "+r.y},elbowHorizon:function(t){var e=t.startPos,n=t.colPos,r=t.endPos;return"M "+e.x+" "+e.y+"L "+n.x+" "+n.y+"L "+n.x+" "+r.y+"L "+r.x+" "+r.y},roundedElbowHorizon:function(t,e){var n=t.startPos,r=t.colPos,i=t.endPos,o=Math.abs(r.y-i.y)<e?0:1,a=i.x>r.x?1:-1,s=i.y>r.y?1:-1,u={x:r.x,y:i.y};e=Math.min(e,Math.abs(i.x-r.x));var c=u.x,l=u.y-s*e*o,h=u.x+a*e,d=u.y;return"M "+n.x+" "+n.y+"L "+r.x+" "+r.y+"L "+c+" "+l+"Q "+u.x+" "+u.y+" "+h+" "+d+"L "+i.x+" "+i.y},roundedElbowVertical:function(t,e){var n=t.startPos,r=t.colPos,i=t.endPos,o=Math.abs(r.x-i.x)<e?0:1,a=i.x>r.x?1:-1,s=i.y>r.y?1:-1,u={x:i.x,y:r.y};e=Math.min(e,Math.abs(i.y-r.y));var c=u.x-a*e*o,l=u.y,h=u.x,d=u.y+s*e;return"M "+n.x+" "+n.y+"L "+r.x+" "+r.y+"L "+c+" "+l+"Q "+u.x+" "+u.y+" "+h+" "+d+"L "+i.x+" "+i.y},skewElbowHorizon:function(t){var e=t.startPos,n=t.colPos,r=t.endPos,i=(r.x-n.x)*a+n.x,o=r.y;return"M "+e.x+" "+e.y+"L "+n.x+" "+n.y+"L "+i+" "+o+"L "+r.x+" "+r.y},skewElbowVertical:function(t){var e=t.startPos,n=t.colPos,r=t.endPos,i=r.x,o=(r.y-n.y)*a+n.y;return"M "+e.x+" "+e.y+"L "+n.x+" "+n.y+"L "+i+" "+o+"L "+r.x+" "+r.y},hornHorizon:function(t){var e=t.startPos,n=t.colPos,r=t.endPos;return u({x:.5*(r.x-n.x)+n.x,y:r.y},{startPos:e,colPos:n,endPos:r})},hornVertical:function(t){var e=t.startPos,n=t.colPos,r=t.endPos;return u({x:r.x,y:.5*(r.y-n.y)+n.y},{startPos:e,colPos:n,endPos:r})},sinusHorizon:function(t){var e=t.startPos,n=t.colPos,r=t.endPos,i=r.x-n.x,o=(r.x+n.x)/2;return"M "+e.x+" "+e.y+"L "+n.x+" "+n.y+"C "+(r.x-i/4)+" "+n.y+" "+o+" "+r.y+" "+r.x+" "+r.y},sinusVertical:function(t){var e=t.startPos,n=t.colPos,r=t.endPos,i=r.y-n.y,o=(r.y+n.y)/2;return"M "+e.x+" "+e.y+"L "+n.x+" "+n.y+"C "+n.x+" "+(r.y-i/4)+" "+r.x+" "+o+" "+r.x+" "+r.y},taperedStraight:function(t,e){var n=t.startPos,r=t.colPos,i=t.endPos,a=3*e,s=e,u=o.crosspoint(n,r,a/2),c=o.crosspoint(r,i,a/2),l=o.crosspoint(i,r,s/2),h=o.pivot(i,l),d=o.pivot(r,c),f=o.pivot(n,u);return"M "+u.x+" "+u.y+"L "+c.x+" "+c.y+"L "+h.x+" "+h.y+"L "+l.x+" "+l.y+"L "+d.x+" "+d.y+"L "+f.x+" "+f.y+" Z"},taperedCurveHorizon:function(t,e){var n=t.startPos,r=t.colPos,i=t.endPos,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;i.x-=a;var s=(i.x-r.x)/3+r.x,u=3*e,c=e,l=o.crosspoint(n,r,u/2),h=o.crosspoint(r,i,u/2),d=o.crosspoint(i,r,c/2),f=o.pivot(i,d),p=o.pivot(r,h),g=o.pivot(n,l),v=(h.x-p.x)/2,m=(f.y-d.y)/2;return"M "+l.x+" "+l.y+"L "+h.x+" "+h.y+"Q "+(s+v)+" "+(i.y+m)+" "+f.x+" "+f.y+"L "+d.x+" "+d.y+"Q "+(s-v)+" "+(i.y-m)+" "+p.x+" "+p.y+"L "+g.x+" "+g.y+" Z"},taperedCurveVertical:function(t,e){var n=t.startPos,r=t.colPos,i=t.endPos,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;i.y-=a;var s=3*e,u=e,c=o.crosspoint(n,r,s/2),l=o.crosspoint(r,i,s/2),h=o.crosspoint(i,r,u/2),d=o.pivot(i,h),f=o.pivot(r,l),p=o.pivot(n,c),g=(l.x-f.x)/2,v=(d.y-h.y)/2;return"M "+c.x+" "+c.y+"L "+l.x+" "+l.y+"Q "+(i.x+g)+" "+(r.y+v)+" "+d.x+" "+d.y+"L "+h.x+" "+h.y+"Q "+(i.x-g)+" "+(r.y-v)+" "+f.x+" "+f.y+"L "+p.x+" "+p.y+" Z"},taperedElbowHorizon:function(t,e){var n=t.startPos,r=t.colPos,i=t.endPos,o=n.y===r.y&&r.y===i.y?0:1,a=i.x>r.x?1:-1,s=i.y>r.y?1:-1,u=r.x!==n.x?1:0,c=r.y!==n.y?1:0,l=3*e/2,h=e/2,d=r.x,f=i.y;return"M "+(n.x+c*l)+" "+(n.y-s*u*l)+"L "+(r.x+a*l*o)+" "+(n.y-s*u*l)+"L "+(d+a*l*o)+" "+(f-s*h)+"L "+i.x+" "+(i.y-s*h)+"L "+i.x+" "+(i.y+s*h)+"L "+(d-a*l*o)+" "+(f+s*h)+"L "+(r.x-a*l*o)+" "+(n.y+s*u*l)+"L "+(n.x-c*l)+" "+(n.y+s*u*l)},taperedElbowVertical:function(t,e){var n=t.startPos,r=t.colPos,i=t.endPos,o=n.x===r.x&&r.x===i.x?0:1,a=i.x>r.x?1:-1,s=i.y>r.y?1:-1,u=3*e/2,c=e/2,l=i.x,h=r.y;return"M "+(n.x+a*u)+" "+n.y+"L "+(n.x+a*u)+" "+(r.y-s*u*o)+"L "+(l+a*c)+" "+(h-s*u*o)+"L "+(i.x+a*c)+" "+i.y+"L "+(i.x-a*c)+" "+i.y+"L "+(l-a*c)+" "+(h+s*u*o)+"L "+(n.x-a*u)+" "+(r.y+s*u*o)+"L "+(n.x-a*u)+" "+n.y},taperedRoundedElbowHorizon:function(t,e,n){var r=t.startPos,i=t.colPos,o=t.endPos,a=Math.abs(i.y-o.y)<n?0:1,s=o.x>i.x?1:-1,u=o.y>i.y?1:-1,c=i.x!==r.x?1:0,l=i.y!==r.y?1:0,h=3*e/2,d=e/2,f=i.x,p=o.y,g=n+e/2,v=n-e/2;return"M "+(r.x+l*h)+" "+(r.y-u*c*h)+"L "+(i.x+s*h*a)+" "+(r.y-u*c*h)+"L "+(f+s*h*a)+" "+(p-u*d-u*v*a)+"Q "+(f+s*h*a)+" "+(p-u*d)+" "+(f+s*h*a+s*v*a)+" "+(p-u*d)+"L "+o.x+" "+(o.y-u*d)+"L "+o.x+" "+(o.y+u*d)+"L "+(f-s*h*a+s*g*a)+" "+(p+u*d)+"Q "+(f-s*h*a)+" "+(p+u*d)+" "+(f-s*h*a)+" "+(p+u*d-u*g*a)+"L "+(i.x-s*h*a)+" "+(r.y+u*c*h)+"L "+(r.x-l*h)+" "+(r.y+u*c*h)},taperedRoundedElbowVertical:function(t,e,n){var r=t.startPos,i=t.colPos,o=t.endPos,a=Math.abs(i.x-o.x)<n?0:1,s=o.x>i.x?1:-1,u=o.y>i.y?1:-1,c=3*e/2,l=e/2,h=o.x,d=i.y,f=n+e/2,p=n-e/2;return"M "+(r.x+s*c)+" "+r.y+"L "+(r.x+s*c)+" "+(i.y-u*c*a)+"L "+(h+s*l-s*f*a)+" "+(d-u*c*a)+"Q "+(h+s*l)+" "+(d-u*c*a)+" "+(h+s*l)+" "+(d-u*c*a+u*f)+"L "+(o.x+s*l)+" "+o.y+"L "+(o.x-s*l)+" "+o.y+"L "+(h-s*l)+" "+(d+u*c*a+u*p*a)+"Q "+(h-s*l)+" "+(d+u*c*a)+" "+(h-s*l-s*p)+" "+(d+u*c*a)+"L "+(r.x-s*c)+" "+(i.y+u*c*a)+"L "+(r.x-s*c)+" "+r.y},taperedSkewElbowHorizon:function(t,e){var n=t.endPos,r=t.colPos;return s({x:(n.x-r.x)*a+r.x,y:n.y},t,e)},taperedSkewElbowVertical:function(t,e){var n=t.endPos,r=t.colPos;return s({x:n.x,y:(n.y-r.y)*a+r.y},t,e)},taperedHornHorizon:function(t,e){var n=t.startPos,r=t.colPos,i=t.endPos;return c({x:.5*(i.x-r.x)+r.x,y:i.y},{startPos:n,colPos:r,endPos:i},e)},taperedHornVertical:function(t,e){var n=t.startPos,r=t.colPos,i=t.endPos;return c({x:i.x,y:.5*(i.y-r.y)+r.y},{startPos:n,colPos:r,endPos:i},e)},taperedSinusHorizon:function(t,e){var n=t.startPos,r=t.colPos,i=t.endPos,o=i.x-r.x,a=(i.x+r.x)/2,s=i.x>r.x?1:-1,u=i.y>r.y?1:-1,c=3*e,l=e,h=c/2,d=l/2,f="";return r.y!==n.y&&(f="M "+n.x+" "+n.y+"L "+(n.x-s*h)+" "+n.y+"L "+(r.x-s*h)+" "+(r.y+u*h)+"L "+(r.x+s*h)+" "+(r.y+u*h)+"L "+(n.x+s*h)+" "+n.y+"Z"),f+"M "+r.x+" "+r.y+"L "+r.x+" "+(r.y+u*h)+"C "+(i.x-o/4-s*c)+" "+(r.y+u*h)+" "+(a-s*l)+" "+(i.y+u*d)+" "+i.x+" "+(i.y+u*d)+"L "+i.x+" "+(i.y-u*d)+"C "+(a+s*l)+" "+(i.y-u*d)+" "+(i.x-o/4)+" "+(r.y-u*h)+" "+r.x+" "+(r.y-u*h)+"Z"},taperedSinusVertical:function(t,e){t.startPos;var n=t.colPos,r=t.endPos,i=r.y-n.y,o=(r.y+n.y)/2,a=r.x>n.x?1:-1,s=r.y>n.y?1:-1,u=3*e,c=e,l=u/2,h=c/2;return"M "+n.x+" "+n.y+"L "+(n.x+a*l)+" "+n.y+"C "+(n.x+a*l)+" "+(r.y-i/4-s*u)+"  "+(r.x+a*h)+" "+(o-s*c)+"  "+(r.x+a*h)+" "+r.y+"L "+(r.x-a*h)+" "+r.y+"C "+(r.x-a*h)+" "+(o+s*c)+"  "+(n.x-a*l)+" "+(r.y-i/4)+" "+(n.x-a*l)+" "+n.y+"Z"}}},function(t,e,n){"use strict";var r=n(0).DIRECTION,i=n(1),o={virtualConnLen:40,getCornerPoints:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{top:0,left:0,bottom:0,right:0},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{x:0,y:0},r=t.topicView.bounds,i=e.top,o=e.left,a=e.bottom,s=e.right;return[{x:r.x-o+n.x,y:r.y-i+n.y},{x:r.x+r.width+s+n.x,y:r.y-i+n.y},{x:r.x+r.width+s+n.x,y:r.y+r.height+a+n.y},{x:r.x-o+n.x,y:r.y+r.height+a+n.y}]},getSidePoints:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{x:0,y:0},i=t.topicView.bounds,o=[];switch(e){case r.UP:o.push({x:n.x+i.x,y:n.y+i.y}),o.push({x:n.x+i.x+i.width,y:n.y+i.y});break;case r.DOWN:o.push({x:n.x+i.x+i.width,y:n.y+i.y+i.height}),o.push({x:n.x+i.x,y:n.y+i.y+i.height});break;case r.LEFT:o.push({x:n.x+i.x,y:n.y+i.y+i.height}),o.push({x:n.x+i.x,y:n.y+i.y});break;case r.RIGHT:o.push({x:n.x+i.x+i.width,y:n.y+i.y}),o.push({x:n.x+i.x+i.width,y:n.y+i.y+i.height})}return o},getSidePointsWithGap:function(t,e){var n=t.position,a=t.topicView.bounds,s=i.extend({},n);switch(e){case r.LEFT:s.x+=a.x;break;case r.RIGHT:s.x+=a.width+a.x;break;case r.UP:s.y+=a.y;break;case r.DOWN:s.y+=a.y+a.height}return o.getSidePoints(t,e,s)},getPointsOfUDChildren:function(t,e){var n,r,i=[],o=e?1:-1;t.sort(function(t,e){return o*t.position.y<o*e.position.y?1:-1});var a=e?0:1;return t.forEach(function(t,e){t._draged||(n=t.position,r=t.topicView.bounds,i.push({x:n.x+r.x+a*r.width,y:n.y+r.y+(1-a)*r.height}),i.push({x:n.x+r.x+a*r.width,y:n.y+r.y+a*r.height}))}),i},getPointsOfLRChildren:function(t,e){var n,r,i=[];return e=e?1:-1,t.sort(function(t,n){return e*t.position.x>e*n.position.x?1:-1}),t.forEach(function(t,o){t._draged||(n=t.position,r=t.topicView.bounds,i.push({x:n.x-e*r.width/2,y:n.y-e*(r.y+r.height)}),i.push({x:n.x+e*r.width/2,y:n.y-e*(r.y+r.height)}))}),i},getPointsOfNoChildren:function(t,e){var n=[],i=t.topicView.bounds;switch(e){case r.LEFT:n.push({x:0-i.width-40,y:0+2*i.height/3}),n.push({x:0-i.width-40,y:0-2*i.height/3});break;case r.RIGHT:n.push({x:0+i.width+40,y:0-2*i.height/3}),n.push({x:0+i.width+40,y:0+2*i.height/3});break;case r.UP:n.push({x:0-2*i.width/3,y:0+i.y-40}),n.push({x:0+2*i.width/3,y:0+i.y-40});break;case r.DOWN:n.push({x:0+2*i.width/3,y:0+(i.y+i.height)+40}),n.push({x:0-2*i.width/3,y:0+(i.y+i.height)+40})}return n},getOppositeDirection:function(t){return t===r.LEFT?r.RIGHT:t===r.RIGHT?r.LEFT:t===r.UP?r.DOWN:t===r.DOWN?r.UP:void 0}};t.exports=o},function(t,e,n){"use strict";(function(e,r){var i,o=l(n(3)),a=l(n(17)),s=l(n(4)),u=n(0),c=l(n(22));function l(t){return t&&t.__esModule?t:{default:t}}var h=n(8),d=n(14),f=n(10),p=n(33).isUndef,g=n(13),v=n(65),m=n(64),y=n(5),_=n(20),E=n(67),A=n(145),S=n(158),T=n(149),x=n(147),b=n(148),w=n(1),C=n(34),I=[u.TOPIC_TYPE.ATTACHED,u.TOPIC_TYPE.SUMMARY,u.TOPIC_TYPE.DETACHED,u.TOPIC_TYPE.CALLOUT],L=e.SVG,N=f.sortBoundaries,O=g.BOUNDARYGAP,R=f.calcBoundaryTitle,M=C.extend({type:u.VIEW_TYPE.BRANCH,centralHasLayout:!1,sbEvents:{dblclick:"onDblClick",mouseover:"onMouseover",mouseout:"onMouseout",mouseup:"onMouseup",mousedown:"onMousedown",contextmenu:"_onContextMenu"},hammerEvents:{press:"_onPress"},initialize:function(t){var e=this,n=t.topicView;this._isLayout=!1,this._isHiding=!1,this.position={x:0,y:0},this.actualRealArea=null,this.linePosition={x:0,y:0},this.outsidePadding={left:0,right:0,up:0,down:0},this.bounds={x:0,y:0,width:0,height:0},this.boundaryBounds={x:0,y:0,width:0,height:0},this._isMoving=!1,this._ignoreChildBranchBoundsChange=!1,this.topicView=n;var i=n.model;this.model=i,this.childrenBranches={},this.summaries=[],this.boundaries=[],this.svg=(new L.G).data("name","branch"),this.svg.add(n.topicGroup),n.parent(this),this.setElement(this.svg.node),this.connection=new b({branchView:this}),"readonly"!==r.env.SB_MODE&&(this.listenTo(i,"addTopic",this.onAddTopic),this.listenTo(i,"removeTopic",this.onRemoveTopic),this.listenTo(i,"moveChildTopic",this.onMoveChildTopic),this.listenTo(i,"addBoundary",this.onAddBoundaryView),this.listenTo(i,"removeBoundary",this.onRemoveBoundary),this.listenTo(i,"changeBoundary",this.layout),this.listenTo(i,"addSummary",this.onAddSummary),this.listenTo(i,"removeSummary",this.onRemoveSummary),this.listenTo(i,"addNumbering",this.onAddNumbering),this.listenTo(i,"changeNumbering",this.onChangeNumbering),this.listenTo(i,"changeStructureClass",this.onStructureChange),this.listenTo(i,"changeStyle",this.onChangeStyle),this.listenTo(i,"changeClass",this.onStyleReset),this.listenTo(i,"setStyleObject",this.onStyleReset),this.listenTo(i,"change:position",this.onPositionChange),this.listenTo(i,"unbalancedInfoUpdated",function(){e.layout()})),this.listenTo(n,"topicviewboundschange",this.setBounds),this.listenTo(i,"change:branch",this.onCollapseChange),this.listenTo(this,"initAllView",this.initAllView),this.on("afterRealPosChange",function(){return e.setMaskingRegion(!0)}),this.isSelected=!1,this.isDeFocus=!1;var o=this;Object.defineProperty(this,"collapse",{get:function(){return o._collapse},set:function(t){o._collapse=t;var e=parseInt(s.default.getStyleValue(o,u.STYLE_KEYS.BORDER_LINE_WIDTH)||0),n=o.collapseExtendView,r=o.topicView,i=_[r.topicShapeStyle];if(o.collapse){if(n&&n.bounds&&!n.isHide()){var a=d.merge(r.shapeBounds,n.bounds),c=i.getDrawBounds(a,e);i.fillTopicShapeSelectBox(r,c),r.topicCustomWidthControlBar&&r.topicCustomWidthControlBar.render()}}else{var l=i.getDrawBounds(r.shapeBounds,e);i.fillTopicShapeSelectBox(r,l),r.topicCustomWidthControlBar&&r.topicCustomWidthControlBar.render()}}})},afterAncestorChange:function(){var t=this;if(this._parent){"sheet"===this._parent.type?this.sheetView=this._parent:this.sheetView=this._parent.sheetView;var e=this.sheetView;this.boundaryContainer=e.boundaryContainer,this.branchContainer=e.branchContainer,this.connectionContainer=e.connectionContainer,this.matrixContainer=e.matrixContainer,this.connectionContainer.add(this.connection.connectionPath),this.isSummaryBranch()&&this.connectionContainer.add(this.connection.connectionSelectBox);var n=this.editDomain().eventBus;this.listenTo(n,"selecting.mouseMultiSelect",this.isMultiSelect),this.listenTo(this.sheetView.model,"change:infoItemDisplay",function(){for(var e=arguments.length,n=Array(e),r=0;r<e;r++)n[r]=arguments[r];t.topicView.infoItemDisplayChanged.apply(t.topicView,n)}),this.listenTo(n,"dragStart.dragManager",function(){t.shouldHide()||t.updatePolygon()})}else this.sheetView=null;M.__super__.afterAncestorChange.apply(this,arguments)},onChangeStyle:function(t,e){this.changeHooks[t]&&this.changeHooks[t].call(this,s.default.getStyleValue(this,t)),this.fishTail&&this.fishTail.changeStyle(t,e)},changeHooks:(i={},i[u.STYLE_KEYS.LINE_WIDTH]=function(t){this.reRenderTopic(u.STYLE_KEYS.BORDER_LINE_WIDTH,t),this.collapseExtendView&&this.collapseExtendView.render(u.STYLE_KEYS.LINE_WIDTH,t),this.setBranchLineWidth(t),this.layoutDeep()},i[u.STYLE_KEYS.BORDER_LINE_WIDTH]=function(t){this.topicView.render(u.STYLE_KEYS.BORDER_LINE_WIDTH,t),this.setBorderWidth(t)},i[u.STYLE_KEYS.FILL_COLOR]=function(t){this.setFillColor(t)},i[u.STYLE_KEYS.FILL_GRADIENT]=function(t){this.setFillColor(t)},i[u.STYLE_KEYS.LINE_COLOR]=function(t){this.reRenderTopic([u.STYLE_KEYS.BORDER_LINE_COLOR],t),this.setBranchLineColor(t)},i[u.STYLE_KEYS.BORDER_GRADIENT]=function(t){this.setBorderColor(t)},i[u.STYLE_KEYS.BORDER_LINE_COLOR]=function(t){this.setBorderColor(t)},i[u.STYLE_KEYS.LINE_CLASS]=function(){this.setBranchLineStyle()},i[u.STYLE_KEYS.SHAPE_CLASS]=function(t){this.setTopicShape(t)},i[u.STYLE_KEYS.CALLOUT_SHAPE_CLASS]=function(t){this.setTopicShape(t)},i[u.STYLE_KEYS.TEXT_COLOR]=function(t){this.setTextColor(t)},i[u.STYLE_KEYS.FONT_SIZE]=function(t){this.setFontSize(t)},i[u.STYLE_KEYS.FONT_WEIGHT]=function(t){this.setFontWeight(t)},i[u.STYLE_KEYS.FONT_STYLE]=function(t){this.setFontStyle(t)},i[u.STYLE_KEYS.TEXT_DECORATION]=function(t){this.setTextDecoration(t)},i[u.STYLE_KEYS.TEXT_ALIGN]=function(){this.setTextAlign()},i[u.STYLE_KEYS.FONT_FAMILY]=function(t){this.setFontFamily(t)},i.summaryLineClass=function(t){this.setSummaryTopicLineStyle(t)},i.summaryLineWidth=function(t){this.setSummaryTopicLineWidth(t)},i.summaryLineColor=function(t){this.setSummaryTopicLineColor(t)},i[u.STYLE_KEYS.TEXT_TRANSFORM]=function(t){this.setTextTransform(t)},i),onStyleReset:function(){this.renderByThemeChange(),this.refresh()},setBounds:function(t){this._isLayout=!1,this.setMaskingRegion(!0)},setMaskingRegion:function(t){var e=this.parent();function n(t){var e=t.topicView,n="",r=0,i=0;if(e.getShapeStyle()===u.TOPICSHAPE.CLOUD){n=e.topicShapeFill.attr("transform")||"";var o=e.topicShapeGroup.transform();r+=o.x,i+=o.y}if(t.model.type()===u.TOPIC_TYPE.DETACHED){var a=t.svg.transform();r+=a.x,i+=a.y}return"translate("+r+" "+i+") "+n}if(!0!==t&&e.isMapLike&&e.isMapLike()){if(!e.connectionMasking){var r={x:-1e4,y:-1e4,width:2e4,height:2e4},i=e.editDomain().svg,o="M "+r.x+" "+r.y+" L"+(r.x+r.width)+" "+r.y+" L"+(r.x+r.width)+" "+(r.y+r.height)+" L"+r.x+" "+(r.y+r.height),a=e.topicView.topicShapeFill.attr("d"),s=n(e);e.clipRegion=(new L.Path).attr({d:a+" "+o,fill:"black","clip-rule":"evenodd",transform:s});var c=i.clip().add(e.clipRegion);e.connectionMasking=c}this.model.type()===u.TOPIC_TYPE.ATTACHED&&this.connection.connectionPath.clipWith(e.connectionMasking)}if(this.connectionMasking&&t){var l={x:-1e4,y:-1e4,width:2e4,height:2e4},h="M "+l.x+" "+l.y+" L"+(l.x+l.width)+" "+l.y+" L"+(l.x+l.width)+" "+(l.y+l.height)+" L"+l.x+" "+(l.y+l.height),d=this.topicView.topicShapeFill.attr("d"),f=n(this);this.clipRegion.attr({d:d+" "+h,transform:f})}},setTopicShapeMasking:function(t,e){var n=this.editDomain(),r=this.topicView.topicShape,i=this.svg.transform();this.topicShapeMasking&&this.topicShapeMasking.remove();var o=Math.abs(t.x-e.x),a=Math.abs(t.y-e.y),c=this._rectToPath({x:-1e4,y:-1e4,width:2e4,height:2e4}),l=Math.min(t.x,e.x),h=Math.min(t.y,e.y),d=parseInt(s.default.getStyleValue(this,u.STYLE_KEYS.BORDER_LINE_WIDTH)),f={x:l-i.x.value,y:h-i.y.value,width:o||d,height:a||d},p=this._rectToPath(f),g=(new L.Path).attr({d:p+" "+c,fill:"black","clip-rule":"evenodd"});this.topicShapeMasking=n.svg.clip().add(g),r.clipWith(this.topicShapeMasking)},_rectToPath:function(t){return"M "+t.x+" "+t.y+" L"+(t.x+t.width)+" "+t.y+" L"+(t.x+t.width)+" "+(t.y+t.height)+" L"+t.x+" "+(t.y+t.height)},initAllView:function(){var t=this,e=this.topicView,n=this.model;this.updateStructure();var r=function(e){n.children(e).forEach(function(n){var r=new M({topicView:new E({model:n}),model:n});t.addChildBranch(r,{type:e},!0)})};r(u.TOPIC_TYPE.ATTACHED),this.isCentralBranch()&&r(u.TOPIC_TYPE.DETACHED),r(u.TOPIC_TYPE.CALLOUT),n.boundaries().forEach(function(e){t.addBoundaryView(new A({model:e}))}),n.summaries().forEach(function(e){n.children(u.TOPIC_TYPE.SUMMARY).forEach(function(n){if(e.get("topicId")===n.get("id")){var r=new S({model:e});t.addSummaryView(r);var i=new M({topicView:new E({model:n}),model:n});t.addChildBranch(i,{type:u.TOPIC_TYPE.SUMMARY,summaryModel:e,summaryView:r},!0)}})}),e.initPendantView(),this.initStyle()},onPositionChange:function(){this.refresh()},getChildrenBranchesByType:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:u.TOPIC_TYPE.ATTACHED;if(Array.isArray(e)){var n=[];return e.forEach(function(e){n=[].concat(n,t.getChildrenBranchesByType(e))}),n}if(-1===I.indexOf(e))return[];var r=this.childrenBranches[e];return r||(this.childrenBranches[e]=r=[]),r},getDescendantBranchesByType:function(){for(var t=arguments.length,e=Array(t),n=0;n<t;n++)e[n]=arguments[n];0===(e=e.reduce(function(t,e){return t.concat(e)},[])).length&&e.push(u.TOPIC_TYPE.ATTACHED);var r=[];return function t(n){r.push(n),n.getChildrenBranchesByType(e).forEach(function(e){return t(e)})}(this),r.shift(),r},setTopicShape:function(t){this.topicView.setTopicShape(t),this.topicView.refresh()},setBranchLineStyle:function(){var t=this;this.topicLineStyle=s.default.getStyleValue(this,u.STYLE_KEYS.LINE_CLASS);var e=this.getChildrenBranchesByType(u.TOPIC_TYPE.ATTACHED);if(e.length){var n=this.getStructureClass();e.forEach(function(e){m[n].drawConnectLine(t,e),e.setBranchLineStyle()})}this.layout()},setSummaryTopicLineStyle:function(t){this.summaryLineStyle=t,this.refresh()},setSummaryTopicLineWidth:function(){this.refresh()},setSummaryTopicLineColor:function(){this.refresh()},setFontSize:function(t){this.topicView.setFontSize(t),this.topicView.refresh()},setFontWeight:function(t){this.topicView.setFontWeight(t),this.topicView.refresh()},setFontStyle:function(t){this.topicView.setFontStyle(t),this.topicView.refresh()},setTextDecoration:function(t){this.topicView.setTextDecoration(t),this.topicView.refresh()},setTextAlign:function(){this.topicView.refresh()},setFontFamily:function(t){this.topicView.setFontFamily(t),this.topicView.refresh()},addBoundaryView:function(t){t.parent(this);var e,n,r,i=this.boundaries.length,o=-1,s=t.model,u=s.rangeStart,c=s.rangeEnd;if(this.boundaries.length>0&&N(this.boundaries),-1===u&&-1===c)i=0;else{var l=this.boundaries.entries(),h=Array.isArray(l),d=0;for(l=h?l:(0,a.default)(l);;){var f;if(h){if(d>=l.length)break;f=l[d++]}else{if((d=l.next()).done)break;f=d.value}var p=f,g=p[0],v=p[1].model,m=v.rangeStart,y=v.rangeEnd;(u<m||u===m&&c>y)&&(i=g)}}return i!==this.boundaries.length?o=this.boundaryContainer.index(this.boundaries[i].boundaryGroup):(n=(e=this).boundaryContainer,o=function t(e){var r=[],i=-1,o=e,s=Array.isArray(o),u=0;for(o=s?o:(0,a.default)(o);;){var c;if(s){if(u>=o.length)break;c=o[u++]}else{if((u=o.next()).done)break;c=u.value}var l,h=c,d=h.boundaries;r=r.concat(h.getChildrenBranchesByType(I));var f=d,p=Array.isArray(f),g=0;for(f=p?f:(0,a.default)(f);;){var v;if(p){if(g>=f.length)break;v=f[g++]}else{if((g=f.next()).done)break;v=g.value}var m=v;l=n.index(m.boundaryGroup),(-1===i||-1!==l&&l<i)&&(i=l)}}return-1!==i?i:r.length?t(r):i}(e.getChildrenBranchesByType(I))),r=-1===o?this.boundaryContainer.children().length:o,this.boundaries.splice(i,0,t),this.boundaryContainer.add(t.boundaryGroup,r),this},addSummaryView:function(t){return t.parent(this),this.summaries.push(t),this},_findSummaryView:function(t){var e=this.summaries,n=Array.isArray(e),r=0;for(e=n?e:(0,a.default)(e);;){var i;if(n){if(r>=e.length)break;i=e[r++]}else{if((r=e.next()).done)break;i=r.value}var o=i;if(o.model.get("topicId")===t.model.get("id"))return o}},addChildBranch:function(t){var e=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=arguments[2];t.parent(this);var i=n.type,o=void 0===i?u.TOPIC_TYPE.ATTACHED:i;"summary"===o&&(t.summaryModel=n.summaryModel,t.summaryView=n.summaryView||this._findSummaryView(t),t.summaryLineStyle=t.summaryLineStyle||s.default.getStyleValue(t.summaryView,u.STYLE_KEYS.SHAPE_CLASS),t.listenTo(t.summaryModel,"changeStyle",t.onChangeStyle),t.listenTo(t.summaryModel,"setStyleObject",function(){e.layout()}));var a=this.getChildrenBranchesByType(o);void 0!==n.at?a.splice(n.at,0,t):a.push(t),this.branchContainer.add(t.svg);var c=t.model.get("position");if(c&&c.x&&c.y&&(t.isCalloutBranch()||t.isDetachedBranch())){t.setPosition(t.model.get("position"));var l=t.getRealPosition();t.move(l.x,l.y)}else{var h=n.position;h=h&&h.x&&h.y?h:this.linePosition,t.move(h.x,h.y)}return t.trigger("initAllView"),this.isCentralBranch()&&this.sheetView.isMultiLineColors()&&function t(n){n!==e&&n.topicView.initStyle(),n.getChildrenBranchesByType().forEach(function(e){t(e)})}(this),t.topicView.render(),this.listenTo(t,"change:bounds",this.onChildBranchBoundsChange),t.connection.endView=this,!r&&this.model.isCollapse()&&(this.model.extendBranch(),this.collapseExtendView&&this.collapseExtendView.render()),!r&&t.getComputedNumberFormat()&&t.getComputedNumberFormat()!==u.NUMBERFORMAT.NONE&&this.refreshTopicWithNumbering(n.at||0),this},removeChildBranch:function(t,e){var n=this,r=this.getChildrenBranchesByType(e),i=r.indexOf(t);if(!(i<0)){this.stopListening(t),t.remove(),r.splice(i,1),t.parent(null),this.isCentralBranch()&&this.sheetView.isMultiLineColors()&&function t(e){e!==n&&e.topicView.render(),e.getChildrenBranchesByType().forEach(function(e){t(e)})}(this);var o=this.getModule(u.MODULE_NAME.SELECTION);o&&(i>0?o.selectSingle(r[i-1]):o.selectSingle(this))}},removeSummaryBranch:function(t){var e=this.summariesBranches.indexOf(t);this.stopListening(t),t.remove(),t.connection.remove(),this.summariesBranches.splice(e,1),t.parent(null),this.refresh()},setPosition:function(){if(arguments.length<=0)throw new Error("invalid arguments in setPosition");"[object Object]"===Object.prototype.toString.call(arguments[0])?(this.position.x=arguments[0].x,this.position.y=arguments[0].y):(this.position.x=arguments[0],this.position.y=arguments[1])},move:function(t,e){this.svg.translate(t,e),this.linePosition.x=t,this.linePosition.y=e},moveWithAnimation:function(t,e){var n=this,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i=r.noAnimation,o=r.after,a=r.during,s=this.getModule(u.MODULE_NAME.SEMAPHORE),c=this.parent();if(c&&"branch"===c.type){var l={x:t-this.linePosition.x,y:e-this.linePosition.y};!this._isMoving&&s&&s.increase(u.UI_STATUS.ANIMATION),this._isMoving=!0;var h=w.extend({},this.linePosition),d=this.svg.animate(250).move(t,e),f=function(){n._isMoving=!1,o&&o(),n.trigger("afterRealPosChange",l,n),s&&s.decrease(u.UI_STATUS.ANIMATION)};d.during(function(r){var i=w.extend({},n.linePosition);n.linePosition.x=h.x+(t-h.x)*r,n.linePosition.y=h.y+(e-h.y)*r,n.isSummaryBranch()||Math.abs(n.linePosition.x-c.linePosition.x-n.position.x)<.05&&Math.abs(n.linePosition.y-c.linePosition.y-n.position.y)<.05&&(Math.abs(n.linePosition.x-t)>.05||Math.abs(n.linePosition.y-e)>.05)?n.connection.dmove(n.linePosition.x-i.x,n.linePosition.y-i.y):n.drawConnectionWithParent(),n.getChildrenBranchesByType().forEach(function(t){t._isMoving||t.drawConnectionWithParent()}),c.structureClass===u.STRUCTURECLASS.TIMELINEHORIZONTAL&&c.getChildrenBranchesByType().forEach(function(t){t===n||t._isMoving||t.drawConnectionWithParent()}),a&&a(r)}).after(f),(i||this.isDetachedBranch()||this.config(u.CONFIG.NO_ANIMATION))&&(d.to(1),f(),d.stop())}},drawConnectionWithParent:function(){var t=this.parent();this.editDomain()&&(!t||t.type!==u.VIEW_TYPE.BRANCH||this.isSummaryBranch()||this.isDetachedBranch()||(m[t.getStructureClass()].drawConnectLine(t,this),this.setMaskingRegion()))},render:function(){this.boundaries.length&&(N(this.boundaries),this.renderBoundaryView()),this.renderMatrixView()},renderMatrixView:function(){void 0!==this.matrixView&&(this.matrixView.render(),this.matrixView.getSvg().front())},layout:function(t){var e=this.getModule(u.MODULE_NAME.LAYOUT),n=this.isMatrixHeadCellBranch()?this.parent():this;return e&&e.layout(n,t)},calChildrenBounds:function(){var t;this._ignoreChildBranchBoundsChange=!0,w.each(this.getChildrenBranchesByType(),function(e){t=e.getStructureClass(),e.topicView.topicShapeStyle===e.topicView.getShapeStyle(t)||e._draged||e.topicView.render(),!e.isMatrixBranch()&&e.isInMatrix()?e._calBoundsAndChildrenPos():e._isLayout&&t===e._structureBefore||e._calBoundsAndChildrenPos()}),w.each(this.getChildrenBranchesByType(u.TOPIC_TYPE.SUMMARY),function(t){t._calBoundsAndChildrenPos()}),w.each(this.getChildrenBranchesByType(u.TOPIC_TYPE.CALLOUT),function(t){t._calBoundsAndChildrenPos()}),w.each(this.getChildrenBranchesByType(u.TOPIC_TYPE.DETACHED),function(e){e._isLayout&&t===e.getStructureBefore()||e._calBoundsAndChildrenPos()}),this._ignoreChildBranchBoundsChange=!1},_calBoundsAndChildrenPos:function(){if(!this._draged&&!this.shouldHide()){this.matrixView&&this.matrixView.removeSelf();var t=this.getStructureClass();this.isCentralBranch()||(t!==u.STRUCTURECLASS.SPREADSHEETROW&&t!==u.STRUCTURECLASS.SPREADSHEETCOLUMN&&this.getChildrenBranchesByType(u.TOPIC_TYPE.ATTACHED).length&&!this.isMapLike()?this.showCollapseExtendView():this.collapseExtendView&&this.hideCollpaseExtendView()),this.model.isCollapse()&&this.collapseBranch(),this._structureBefore&&this._structureBefore!==t&&this.setLayoutFalse(),this._isLayout=!0,m[t].calBoundsAndChildrenPos(this),this._structureBefore=t}},renderBoundaryView:function(){var t=this,e=this.getChildrenBranchesByType(u.TOPIC_TYPE.ATTACHED).filter(function(t){return!0!==t._draged});e.forEach(function(t){t.insection={left:0,right:0,up:0,down:0},t.boundaryBoundsCopy=(0,o.default)({},t.bounds||t.topicView.bounds)}),this.boundaries.forEach(function(n){"master"===n.model.get("range")?function(e){t.insection={left:O,right:O,up:O,down:O},t.boundaryBoundsCopy=(0,o.default)({},t.bounds||t.topicView.bounds);var n=t.getRealPosition();t.boundaryBoundsCopy.y-=t.insection.up,t.boundaryBoundsCopy.height+=t.insection.up+t.insection.down,t.boundaryBoundsCopy.x-=t.insection.left,t.boundaryBoundsCopy.width+=t.insection.right+t.insection.left;var r=t.boundaryBoundsCopy.x+n.x,i=t.boundaryBoundsCopy.y+n.y,a=t.boundaryBoundsCopy.x+t.boundaryBoundsCopy.width+n.x,s=t.boundaryBoundsCopy.y+t.boundaryBoundsCopy.height+n.y,u={x:r,y:i},c={x:a,y:s},l={x:r,y:i,width:a-r,height:s-i};e.render(u,c,l)}(n):function(n){for(var r=n.model,i=r.rangeStart,o=r.rangeEnd,a=R(n),s=void 0,c=void 0,l=void 0,h=void 0,d=void 0,f=t.getDirection(),p=i;p<=o;p++)p>=i&&p<=o&&("UD"===f?(e[p].insection.left=O,e[p].insection.right=O):(e[p].insection.up=O+a,e[p].insection.down=O)),p===i&&("UD"===f?t.getRangeGrowthDirection(p)===u.DIRECTION.UP?e[p].insection.down=O:e[p].insection.up=O+a:e[p].insection.left=O),p===o&&("UD"===f?t.getRangeGrowthDirection(p)===u.DIRECTION.DOWN?e[p].insection.down=O:e[p].insection.up=O+a:e[p].insection.right=O),e[p].boundaryBoundsCopy.y-=e[p].insection.up,e[p].boundaryBoundsCopy.height+=e[p].insection.up+e[p].insection.down,e[p].boundaryBoundsCopy.x-=e[p].insection.left,e[p].boundaryBoundsCopy.width+=e[p].insection.right+e[p].insection.left;var g=void 0;if(i===o)g=(s=e[i]).getRealPosition(),c=s.boundaryBoundsCopy.x+g.x,l=s.boundaryBoundsCopy.y+g.y,h=s.boundaryBoundsCopy.x+g.x+s.boundaryBoundsCopy.width,d=s.boundaryBoundsCopy.y+g.y+s.boundaryBoundsCopy.height;else{if(!(i<o))return t.model.removeBoundary(n),t;for(var v=i;v<=o;v++)g=(s=e[v]).getRealPosition(),c||(c=s.boundaryBoundsCopy.x+g.x),l||(l=s.boundaryBoundsCopy.y+g.y),h||(h=s.boundaryBoundsCopy.x+g.x+s.boundaryBoundsCopy.width),d||(d=s.boundaryBoundsCopy.y+g.y+s.boundaryBoundsCopy.height),c=Math.min(c,s.boundaryBoundsCopy.x+g.x),l=Math.min(l,s.boundaryBoundsCopy.y+g.y),h=Math.max(h,s.boundaryBoundsCopy.x+g.x+s.boundaryBoundsCopy.width),d=Math.max(d,s.boundaryBoundsCopy.y+g.y+s.boundaryBoundsCopy.height)}var m={x:c,y:l},y={x:h,y:d};n.render(m,y,s)}(n)})},onChildBranchBoundsChange:function(){if(this._ignoreChildBranchBoundsChange)return this;this.layout()},remove:function(){var t=this.model,e=this.getChildrenBranchesByType(I);w.each(e,function(t){t.remove()},this),e.splice(0);var n=this.editDomain();n&&n.selectionManager&&n.selectionManager.removeFromSelection(this),this.boundaries.slice().forEach(function(t){t.remove()}),this.svg.remove(),this.connection.remove(),this.stopListening(),this.topicView.remove(),n&&n.model2View&&delete n.model2View[t.id],this.connectionMasking&&this.connectionMasking.remove(),this.matrixView&&this.matrixView.removeSelf(),this.collapseExtendView&&this.collapseExtendView.remove(),this.selectBox&&this.selectBox.remove()},select:function(){var t=this;this.isSelected=!0;var e=this.getModule(u.MODULE_NAME.SEMAPHORE);e&&e.isStatusActive(u.UI_STATUS.DE_FOCUS)?this.getProxy().displayDeFocus():this.getProxy().displaySelect(),this._showSummarySelectBox(!1);var n=this.getModule(u.MODULE_NAME.MOVE_VIEW_PORT);n&&n.showBranchInViewPort(this,this.onBranchHasInViewPort);var r=this.getModule(u.MODULE_NAME.EDIT_RECEIVER);r&&r.locateInputToCurrentComponent(this),this.once("afterRealPosChange",function(){t.parent()&&r&&r.locateInputToCurrentComponent(t)})},deselect:function(){this.isSelected=!1,this.getProxy().displayDeselect(),this._hideSumarySelectBox()},onIntersect:function(){this.topicView.showIntersection()},onLeave:function(){this.topicView.hideIntersection()},onBranchHasInViewPort:function(){},_onPress:function(t){if(t.stopPropagation(),!(t&&"collapse-extend-hover-area"===t.target.getAttribute("data-name")||(this._pressContextMenuCheckHandle(),this.isCentralBranch()||this.isSummaryBranch()))){var e=this.getModule(u.MODULE_NAME.DRAG);e&&e.prepareStartDrag(t,this)}},onMousedown:function(t){if(t.stopPropagation(),!t||"collapse-extend-hover-area"!==t.target.getAttribute("data-name")){if(3===t.which)return this._dispatchContextMenu(t);if(1===t.which&&(!t||"topic-custom-width-control-bar"!==t.target.getAttribute("data-name")))if(this.isCentralBranch()){var e=this.getModule(u.MODULE_NAME.MOVE_VIEW_PORT);e&&e.onDragViewPort(t,this)}else if(!this.isSummaryBranch()){var n=this.getModule(u.MODULE_NAME.DRAG);n&&n.prepareStartDrag(t,this)}}},_onContextMenu:function(t){t.preventDefault(),t.stopPropagation(),100!==t.detail&&t.stopImmediatePropagation()},onMouseup:function(t){t&&"collapse-extend-hover-area"===t.target.getAttribute("data-name")||this.editDomain().eventBus.trigger("branchMouseUp",this)},_onTouchEnd:function(){this.editDomain().eventBus.trigger("branchTouchEnd",this)},onMouseover:function(t){t&&1===t.which||this.isSelected||(t&&"collapse-extend-hover-area"!==t.target.getAttribute("data-name")&&this.getProxy().displayHover(),this.collapseExtendView&&this.getProxy()===this&&this.collapseExtendView.hover())},_showSummarySelectBox:function(t){this.selectBox&&(this.selectBox.show().transparent(t),this.connection.activate(t))},_hideSumarySelectBox:function(){this.selectBox&&(this.selectBox.hide(),this.connection.deactivate())},onMouseout:function(t){this.isSelected||this.getProxy().displayDehover()},onDblClick:function(t){if(t&&t.stopPropagation(),!t||"collapse-extend-hover-area"!==t.target.getAttribute("data-name")){var e=this.editDomain();e&&e.selectionManager&&e.selectionManager.selectSingle(this)}},changeSelection:function(t){var e,n=this.editDomain();if(n&&n.selectionManager){n.selectionManager.selectNone(),e=n.model2View[t.get("id")];var r=this.getModule(u.MODULE_NAME.SELECTION);r&&r.selectSingle(e)}},onAddTopic:function(t,e,n){var r=this,i=new E({model:t}),o=new M({topicView:i,model:t});this.addChildBranch(o,e,n),e.noAnimation&&(o._noAnimation=!0);var a=this.getMatrixStructureBranch(),s=function(){e.init||r.changeSelection(t)};a?a.layoutDeep({afterward:s}):this.layout({afterward:s})},onRemoveTopic:function(t,e){var n=e.type||u.TOPIC_TYPE.ATTACHED,r=this.getChildrenBranchesByType(n),i=w.find(r,function(e){return e.model===t});if(i){var o=i.getComputedNumberFormat();if(this.removeChildBranch(i,n),o&&o!==u.NUMBERFORMAT.NONE){var a=e.at||0;this.refreshTopicWithNumbering(a),this.layoutDeep()}else this.layout()}},onMoveChildTopic:function(t,e){var n=this.childrenBranches[u.TOPIC_TYPE.ATTACHED];if(t>=0&&t<=n.length-1&&e>=0&&e<=n.length-1){var r=n.splice(t,1);n.splice.apply(n,[e,0].concat(r)),this.layout()}},onChangeNumbering:function(){this.renderByThemeChange()},onAddNumbering:function(t){this.renderByThemeChange()},removeBoundaryView:function(t){t.remove()},onAddBoundaryView:function(t){this.addBoundaryView(new A({model:t})),this.refresh()},onRemoveBoundary:function(t){var e=w.find(this.boundaries,function(e){return e.model===t});e&&(this.removeBoundaryView(e),this.refresh())},removeSummaryView:function(t){t&&(t.remove(),this.refresh())},onAddSummary:function(t){this.addSummaryView(new S({model:t})),this.refresh()},onRemoveSummary:function(t){var e=w.find(this.summaries,function(e){return e.model===t});e&&this.removeSummaryView(e)},addCollapseExtendView:function(t){this.collapseExtendView=t,t.parent(this),t.render(),this.topicView.topicGroup.add(t.ecg),this.svg.add(t.getHoverAreaSvg()),t.getHoverAreaSvg().back()},showCollapseExtendView:function(){this.collapseExtendView?this.collapseExtendView.show():this.addCollapseExtendView(new x({model:this.model}))},hideCollpaseExtendView:function(){this.collapseExtendView&&this.collapseExtendView.hide()},getRealPosition:function(){for(var t=(0,o.default)({},this.position),e=this.parent();e&&e.type===u.VIEW_TYPE.BRANCH&&!e.isCentralBranch();)t.x+=e.position.x,t.y+=e.position.y,e=e.parent();return t},getClientRect:function(){var t=this.topicView.bounds,e=c.default.add(this.getRealPosition(),t),n=this.editDomain().getPositionTransfer().realToClient(e);return{x:n.x,y:n.y,width:t.width,height:t.height}},getTopicWidth:function(){return this.topicView.bounds.width},getTopicCustomWidth:function(){return this.model.customWidth()||0},updateStructure:function(){var t=this.model.getStructureClass();this._changeStructure(t)},_changeStructure:function(t,e){this.parent()&&this.parent().structureClass!==t||(this.tag=null);var n=v.getViewStructure(this,t),r=this.structureClass;r!==n&&(this.structureClass=n,e&&e(r,n))},onStructureChange:function(t){var e=this;this._changeStructure(t,function(t,n){var r=[u.STRUCTURECLASS.FISHBONELEFTHEADED,u.STRUCTURECLASS.FISHBONERIGHTHEADED,u.STRUCTURECLASS.SPREADSHEET,u.STRUCTURECLASS.COLUMNSPREADSHEET];-1===w.indexOf(r,t)&&-1===w.indexOf(r,n)||(e.topicView.render(),e.refreshTopicWithLabel(),e.collapseExtendView&&e.collapseExtendView.render()),(e.getMatrixStructureBranch()||e).layoutDeep()})},getStructureClass:function(){return p(this.structureClass)&&this.updateStructure(),this.structureClass},getStructureObject:function(){return m[this.getStructureClass()]},getStructureBefore:function(){return this._structureBefore},setBorderWidth:function(t){var e=this.topicView;e.setBorderWidth(t),e.refresh()},initStyle:function(){var t=this;w.each(this.getChildrenBranchesByType(),function(e){e.connection.attr({stroke:s.default.getStyleValue(e,u.STYLE_KEYS.LINE_COLOR),"stroke-width":parseInt(s.default.getStyleValue(t,u.STYLE_KEYS.LINE_WIDTH)||0)})},this),this.topicLineStyle=s.default.getStyleValue(this,u.STYLE_KEYS.LINE_CLASS)},setMultiLineColors:function(t){this.getChildrenBranchesByType().length&&(w.each(this.getChildrenBranchesByType(),function(t){var e=s.default.getStyleValue(t,u.STYLE_KEYS.LINE_COLOR),n=t.connection;n.attr({stroke:e}),n.arrowMarker&&n.arrowMarker.get(0).attr("fill",e),t.setMultiLineColors()}),t&&this.isCentralBranch()&&w.each(this.getChildrenBranchesByType(),function(t){t.connection.attr({fill:s.default.getStyleValue(t,u.STYLE_KEYS.LINE_COLOR)})}),this.collapseExtendView&&this.collapseExtendView.render("lineColor"))},setBranchLineWidth:function(){w.each(this.getChildrenBranchesByType(),function(t){t.setBranchLineWidth(),t.connection.render()})},setTextColor:function(t){this.topicView.setTextColor(t);var e=this.getStructureClass();return e!==u.STRUCTURECLASS.SPREADSHEET&&e!==u.STRUCTURECLASS.COLUMNSPREADSHEET||this.matrixView.syncLabelStyle(),this},setFillColor:function(t){this.topicView.setFillColor(t),this.model.isCallout()&&this.connection.attr({fill:t});var e=function(t){for(var e=3;e>0;){if(t.matrixView)return t.matrixView;t=t.parent(),e--}}(this);e&&e.drawBg()},setBranchLineColor:function(){s.default.getClassName(this)!==u.CLASS_TYPE.SUMMARY_TOPIC&&(this.connection.render(),this.collapseExtendView&&this.collapseExtendView.render(u.STYLE_KEYS.LINE_COLOR,s.default.getStyleValue(this,u.STYLE_KEYS.LINE_COLOR))),w.each(this.getChildrenBranchesByType(I),function(t){t.setBranchLineColor()})},setBorderColor:function(t){this.topicView.setBorderColor(t);var e=this.getStructureClass();e!==u.STRUCTURECLASS.SPREADSHEET&&e!==u.STRUCTURECLASS.COLUMNSPREADSHEET||this.matrixView.drawBg()},setTextTransform:function(t){this.topicView.refresh()},getTextTransform:function(){return s.default.getStyleValue(this,u.STYLE_KEYS.TEXT_TRANSFORM)||u.TEXTTRANSFORM.MANUAL},getDirection:function(){var t;switch(this.getStructureClass()){case u.STRUCTURECLASS.ORGCHARTDOWN:case u.STRUCTURECLASS.ORGCHARTUP:case u.STRUCTURECLASS.TIMELINEHORIZONTAL:case u.STRUCTURECLASS.FISHBONELEFTHEADED:case u.STRUCTURECLASS.FISHBONERIGHTHEADED:t="LR";break;case u.STRUCTURECLASS.RIGHTHEADEDSWNORMAL:case u.STRUCTURECLASS.RIGHTHEADEDNWNORMAL:case u.STRUCTURECLASS.LEFTHEADEDNENORMAL:case u.STRUCTURECLASS.LEFTHEADEDSENORMAL:default:t="UD"}return t},getBrotherDirection:function(){var t=this.parent();return"branch"!==t.type?"LR":t.getDirection()},isMapLike:function(){return-1!==this.getStructureClass().search(u.STRUCTURECLASS.MAP)},isFishbone:function(){return-1!==this.getStructureClass().search("fishbone")},isRotate:function(){return!1},getRangeGrowthDirection:function(t){return m[this.getStructureClass()].getRangeGrowthDirection(this,t)},changeTag:function(t){this.tag!==t&&(this.tag&&(this.preTag=this.tag),this.tag=t)},getTag:function(){return this.tag},onCollapseChange:function(){this.model.isCollapse()?this.collapseBranch():this.extendBranch()},collapseBranch:function(){if(!this.collapse){this.collapse=!0,this.bounds=(0,o.default)({},this.topicView.bounds),this.fishTail&&this.fishTail.hide();var t=this.getMatrixStructureBranch();this._isLayout=!1,t?t.layoutDeep():this.parent().layout()}},extendBranch:function(){this.collapse=!1,this.fishTail&&this.fishTail.show();var t=this.getMatrixStructureBranch();t?t.layoutDeep():this.layoutDeep()},shouldHide:function(){return!this.isCentralBranch()&&(!(!this.isCalloutBranch()||!this.isInMatrix())||(this.isMatrixCellBranch()?this.parent().shouldHide():!!this.parent().collapse||this.parent().shouldHide()))},isBoundariesHide:function(){return this.collapse||this.shouldHide()},isMatrixViewHide:function(){return this.collapse||this.shouldHide()},_hide:function(t){var e=this,n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],r=t.x,i=t.y;this._isHiding||this.moveWithAnimation(r,i,{during:function(t){e.connection.attr({opacity:1-parseFloat(t)}),e.svg.attr("opacity",1-parseFloat(t))},after:function(){e._draged?(e.svg.hide(),e.connection.hide()):(e.svg.remove(),e.connection.getPath().remove()),e._isHiding=!0},noAnimation:n})},_show:function(t){var e=this,n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],r=t.x,i=t.y;this._isHiding?(e._draged?(e.svg.show(),e.connection.show()):(e.parent().svg.after(e.svg),e.connectionContainer.add(e.connection.getPath())),e._isHiding=!1,this.moveWithAnimation(r,i,{during:function(t){e.connection.attr({opacity:t}),e.svg.attr("opacity",t)},noAnimation:n})):this.moveWithAnimation(r,i,{noAnimation:n})},_getHidePos:function(){if(this.shouldHide())return this.parent()._getHidePos();var t=_[this.topicView.topicShapeStyle].getExtColPosition(this);return _[this.topicView.topicShapeStyle].innerPointToOuterPoint(this,t)},_showOrHideSelf:function(t){if(this.shouldHide()){var e=this._getHidePos();this._hide(e,t)}else{var n=this.getRealPosition();this._show(n,t),this.render()}},_showOrHideBoundaries:function(){this.isBoundariesHide()?this.boundaries.forEach(function(t){"master"!==t.model.get("range")&&t.boundaryGroup.hide()}):this.boundaries.forEach(function(t){t.boundaryGroup.show()})},_showOrHideMatrixView:function(){this.isMatrixViewHide()&&this.matrixView&&this.matrixView.removeSelf()},_showOrHideRelationShipViews:function(){var t=function(t){return void 0===t||null===t},e=this.model.get("id"),n=this.sheetView.relationships,r=this.editDomain();n.forEach(function(n){var i=n.model,o=i.get("end1Id"),a=i.get("end2Id");if(o===e||a===e){var s=r.model2View[o],u=r.model2View[a],c=t(s)||t(u)||s.shouldHide()||u.shouldHide();n.showOrHide(c)}})},refreshView:function(t){return this.shouldHide()&&this._isHiding?y.SKIP:this._draged?(this._showOrHideSelf(t),y.SKIP):(this._showOrHideRelationShipViews(),this._showOrHideBoundaries(),this._showOrHideMatrixView(),void this._showOrHideSelf(t))},refreshTopicWithLabel:function(){w.each(this.getChildrenBranchesByType(),function(t){w.each(t.getChildrenBranchesByType(),function(t){t.topicView.showOrHideLabel()})})},refreshTopicWithNumbering:function(t){for(var e=this.getChildrenBranchesByType(),n=e.length;t<n;)e[t].topicView.render(),e[t].refreshTopicWithNumbering(0),t++},refresh:function(){var t=this.getMatrixStructureBranch();t?t.layoutDeep():this.isCentralBranch()?this.layoutDeep():(this._isLayout=!1,this.trigger("change:bounds"))},branchIndex:function(){var t=this.parent();if(t&&"branch"===t.type){var e=t.getChildrenBranchesByType();return w.indexOf(e,this)}return-1},summaryIndex:function(){var t=this.parent();if(t&&"branch"===t.type){var e=t.getChildrenBranchesByType(u.TOPIC_TYPE.SUMMARY);return w.indexOf(e,this)}return-1},floatingIndex:function(){var t=this.parent();if(t&&"branch"===t.type){var e=t.getChildrenBranchesByType(u.TOPIC_TYPE.DETACHED);return w.indexOf(e,this)}return-1},isAttached:function(){return-1!==this.branchIndex()},getNumberingText:function(){var t="",e=this.getPrefixText(),n=this.getNumberText(),r=this.getSuffixText();return e&&n&&(t+=e,n&&(t+=" ")),n&&(t+=n),r&&(n&&(t+=" "),t+=r),t},getNumberText:function(){var t=this.branchIndex();if(-1!==t){var e=this.getComputedNumberFormat();if(e===u.NUMBERFORMAT.NONE)return"";var n=this.parent().getNumberText(),r=h.getNumberText(e,t+1);return n&&(r=n+this.getNumberSeparatorText(this.getComputedNumberSeparator())+r),r}},getNumberSeparatorText:function(t){switch(t){case u.NUMBERSEPARATOR.COMMA:return",";case u.NUMBERSEPARATOR.DOT:return".";case u.NUMBERSEPARATOR.HYPHEN:return"-";case u.NUMBERSEPARATOR.DASH:return"_";case u.NUMBERSEPARATOR.OBLIQUE:return"/";default:return"."}},getPrefixText:function(){var t=this.getNumbering();if(t)return t.prefix},getSuffixText:function(){var t=this.getNumbering();if(t)return t.suffix},getPreOrSufNumber:function(t,e){return""===t?"":t||e},getNumbering:function(){if(this.isAttached())return this.parent().model.get("numbering")},getComputedNumberFormat:function(){if(this.isAttached())return this.getNumberFormat()||this.parent().getComputedNumberFormat()},getNumberFormat:function(){var t=this.getNumbering();if(t)return t.numberFormat},getComputedNumberSeparator:function(){if(this.isAttached())return this.getNumberSeparator()||this.parent().getComputedNumberSeparator()},getNumberSeparator:function(){var t=this.getNumbering();if(t)return t.numberSeparator},isCentralBranch:function(){return this.model.type()===u.TOPIC_TYPE.ROOT},isAttachedBranch:function(){return this.model.type()===u.TOPIC_TYPE.ATTACHED},isSummaryBranch:function(){return this.model.type()===u.TOPIC_TYPE.SUMMARY},isDetachedBranch:function(){return this.model.type()===u.TOPIC_TYPE.DETACHED},isCalloutBranch:function(){return this.model.type()===u.TOPIC_TYPE.CALLOUT},isLeafBranch:function(){if(!this.isCentralBranch()&&!this.getChildrenBranchesByType().length)return!0},isMatrixBranch:function(){var t=this.getStructureClass();return t===u.STRUCTURECLASS.COLUMNSPREADSHEET||t===u.STRUCTURECLASS.SPREADSHEET},getMatrixStructureBranch:function(){return function t(e,n){return e.type!==u.VIEW_TYPE.BRANCH?null:e.isMatrixBranch()?e:0===n||e.isDetachedBranch()?null:t(e.parent(),n-1)}(this,arguments.length>0&&void 0!==arguments[0]?arguments[0]:-1)},isInMatrix:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:-1;return null!==this.getMatrixStructureBranch(t)},isMatrixHeadCellBranch:function(){var t=this.parent();return t.type===u.VIEW_TYPE.BRANCH&&this.isAttachedBranch()&&t.isMatrixBranch()},isMatrixCellBranch:function(){var t=this.parent();if(t.isDetachedBranch())return!1;if(t.type!==u.VIEW_TYPE.BRANCH)return!1;var e=t.parent();return e.type===u.VIEW_TYPE.BRANCH&&this.isAttachedBranch()&&e.isMatrixBranch()},layoutDeep:function(t){this.setLayoutFalse(),this.layout(t)},setLayoutFalse:function(){this._isLayout=!1,this.topicLineStyle=s.default.getStyleValue(this,u.STYLE_KEYS.LINE_CLASS),w.each(this.getChildrenBranchesByType([u.TOPIC_TYPE.ATTACHED,u.TOPIC_TYPE.DETACHED,u.TOPIC_TYPE.CALLOUT,u.TOPIC_TYPE.SUMMARY]),function(t){t.getChildrenBranchesByType().length&&t.setLayoutFalse()})},reRenderTopic:function(t,e){this.topicView.render(t,e),this.fishTail&&this.fishTail.changeStyle(t,e),this.collapseExtendView&&this.collapseExtendView.render(t,e),w.each(this.getChildrenBranchesByType(),function(n){n.reRenderTopic(t,e)},this)},reRenderBoundary:function(t,e){w.each(this.boundaries,function(t){t.setFillColor()},this),w.each(this.getChildrenBranchesByType(),function(n){n.reRenderBoundary(t,e)},this)},renderByThemeChange:function(){this._isLayout=!1,this.topicLineStyle=s.default.getStyleValue(this,u.STYLE_KEYS.LINE_CLASS),this.topicView.render(),this.collapseExtendView&&this.collapseExtendView.render(),this.fishTail&&this.fishTail.initStyle(),w.each(this.getChildrenBranchesByType([u.TOPIC_TYPE.ATTACHED,u.TOPIC_TYPE.DETACHED,u.TOPIC_TYPE.CALLOUT,u.TOPIC_TYPE.SUMMARY]),function(t){t.topicLineStyle=s.default.getStyleValue(t,u.STYLE_KEYS.LINE_CLASS),t.drawConnectionWithParent(),t.renderByThemeChange()})},getTextClientStyle:function(){var t={fontSize:parseInt(s.default.getStyleValue(this,u.STYLE_KEYS.FONT_SIZE)||0),fontFamily:s.default.getStyleValue(this,u.STYLE_KEYS.FONT_FAMILY),fontWeight:s.default.getStyleValue(this,u.STYLE_KEYS.FONT_WEIGHT),textAlign:s.default.getStyleValue(this,u.STYLE_KEYS.TEXT_ALIGN)},e=this.topicView.titleText.node.getBoundingClientRect(),n=e.top,r=e.left;return(0,o.default)({top:n,left:r},t)},hideTitle:function(){this.topicView.hideTitle()},showTitle:function(){this.topicView.showTitle()},saveEdit:function(t){this.model.changeTitle(t)},getEditContent:function(){return this.model.getTitle()},getLayer:function(){return this.isCentralBranch()||!this.parent()?1:this.parent().getLayer()+1},isMultiSelect:function(t,e){var n=this.getModule(u.MODULE_NAME.SELECTION);n&&(!n.isUnselectable(this)&&h.isBoxIntersect(t,this.topicView.topicGroup.rbox())?n.addSelection(this):e||n.removeFromSelection(this))},updatePolygon:function(){return this._polyPointsArr=m[this.getStructureClass()].calcPolygons(this),this},getPolyPointsArr:function(){return this._polyPointsArr},isFishBoneSpecial:function(){var t=this.model,e=t.type(),n=t.getStructureClass()||this.getStructureClass();return!!n&&(!(!n.includes("fishbone")||"root"!==e&&"attached"!==e)||void 0)},getFishTail:function(){return this.fishTail||(this.fishTail=new T({model:this.model}),this.fishTail.addToBranch(this)),this.fishTail},removeFishTail:function(){this.fishTail&&(this.fishTail.remove(),this.fishTail=null)},getBrotherDefaultTitle:function(){var t=this.model,e=s.default.getClassName(this);if(e===u.CLASS_TYPE.FLOATING_TOPIC)return this.getContext().getTranslatedText("DEFAULT_FLOATING_TOPIC_TITLE");var n=t.parent().children(u.TOPIC_TYPE.ATTACHED).length+1;return e===u.CLASS_TYPE.MAIN_TOPIC?this.getContext().getTranslatedText("DEFAULT_MAIN_TOPIC_TITLE")+" "+n:this.getContext().getTranslatedText("DEFAULT_SUBTOPIC_TITLE")+" "+n},getChildDefaultTitle:function(){var t=this.model,e=s.default.getClassName(this),n=t.children(u.TOPIC_TYPE.ATTACHED).length+1;return e===u.CLASS_TYPE.CENTRAL_TOPIC?this.getContext().getTranslatedText("DEFAULT_MAIN_TOPIC_TITLE")+" "+n:this.getContext().getTranslatedText("DEFAULT_SUBTOPIC_TITLE")+" "+n},getAdapter:function(t){switch(t){case u.ADAPTERS.SUMMARY_VIEW:if(this.isSummaryBranch())return this.summaryView}},createDragView:function(){},getBranchPath:function(){var t="";switch(this.model.type()){case u.TOPIC_TYPE.ROOT:return"0";case u.TOPIC_TYPE.SUMMARY:t=".S"+this.summaryIndex();break;case u.TOPIC_TYPE.DETACHED:t=".F"+this.floatingIndex();break;case u.TOPIC_TYPE.CALLOUT:t=".C";break;default:t="."+this.branchIndex()}return this.parent().getBranchPath()+t},getAvailableStructure:function(){if(this.isCentralBranch()||this.isDetachedBranch())return u.EXPOSED_STRUCTURE;if(this.isSummaryBranch()||this.isCalloutBranch())return[];var t=this.parent();return t.getStructureObject().getAvailableChildStructure(t,this)},setProxy:function(t){var e=this.getProxy();this._proxy=t,this.isSelected?(e.displayDeselect(),this.isDeFocus?t.displayDeFocus():t.displaySelect()):e.displayDehover()},getProxy:function(){return this._proxy||this},deleteProxy:function(){this.isSelected&&(this.getProxy().displayDeselect(),this.displaySelect()),delete this._proxy},displayHover:function(){this.topicView.showSelectBox(),this._showSummarySelectBox(!0),this.collapseExtendView&&this.collapseExtendView.hover()},displayDehover:function(){this.topicView.hideSelectBox(),this._hideSumarySelectBox(),this.collapseExtendView&&this.collapseExtendView.dehover()},displaySelect:function(){this.topicView.activateSelectBox(),this.collapseExtendView&&this.collapseExtendView.hover()},displayDeselect:function(){this.topicView.hideSelectBox(),this.collapseExtendView&&this.collapseExtendView.dehover()},displayDeFocus:function(){this.topicView.deFocusSelectBox()},getSvg:function(){return this.svg}});if(y.isEdge()||y.isIE()){var D=function(){};M.prototype.setMaskingRegion=D,M.prototype.setTopicShapeMasking=D}y.wrapReadOnly(M,["_showSummarySelectBox"]),t.exports=M}).call(e,n(6),n(28))},function(t,e,n){"use strict";(function(e){var r=a(n(3)),i=a(n(38)),o=a(n(11));function a(t){return t&&t.__esModule?t:{default:t}}var s=n(21),u=n(0).SERVICE_NAME,c=n(144).str2NodesArr,l=e.SVG,h={fontWeight:"font-weight",fontFamily:"font-family",fontStyle:"font-style",fontSize:"font-size",color:"fill",textDecoration:"text-decoration"},d={left:"start",center:"middle",right:"end"},f=function(t){var e={};return(0,o.default)(t).filter(function(t){return h[t]}).map(function(n){e[h[n]]=t[n]}),e},p=s.extend({_init:function(){this.bounds={},this.textSvg=new l.Text,this.fontInfo={fontFamily:"Helvetica, Arial, sans-serif",textAlign:"left",fontSize:12},this.textSvg.style("cursor","default")},_render:function(t){var e=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(n.fontSize){var o=(0,i.default)(n.fontSize||0);n=(0,r.default)({},n,{fontSize:o})}(0,r.default)(this.fontInfo,n),n=this.fontInfo;var a=this._getResolveText(t,this.fontInfo),s=1.3*n.fontSize,l=void 0;l=(l="string"==typeof a?c(a,n):a).map(function(t){return 0===t.length?[{content:" ",style:n}]:t}),this.textSvg.text(function(t){l.forEach(function(e,r){var i=0===r?parseInt(n.fontSize||0):s;e.forEach(function(e,n){var r=f(e.style),o=t.tspan(""+e.content).attr(r);o.style({"white-space":"pre"}),0===n&&o.dy(i).x(0)})})}),this._setAttr(n);var h=l.length*s,d=l.reduce(function(t,n){var r=e.callService(u.GET_NODES_SIZE,n).width;return Math.max(t,r)},0);this.bounds={x:0,y:0,width:d,height:h}},getTextSvg:function(){return this.textSvg},move:function(t,e){var n=this.bounds.width,r=this.fontInfo.textAlign;"center"===r&&(t+=n/2),"right"===r&&(t+=n),this.textSvg.attr({transform:"translate("+t+" "+e+")"})},_getResolveText:function(t,e){return t},_setAttr:function(t){var e=f(t);this.textSvg.attr(e);var n=t.textAlign;n&&this.textSvg.attr({"text-anchor":d[n]})},_calBounds:function(t,e){var n=this.callService("getTextSize",t,e),r=n.width,i=n.height;return{x:0,y:""===t?0:.3*parseInt(e.fontSize||0),width:r,height:i}},hide:function(){this.textSvg.attr({opacity:0})},show:function(){this.textSvg.attr({opacity:1})}});t.exports=p}).call(e,n(6))},function(t,e){t.exports=function(t){if("function"!=typeof t)throw TypeError(t+" is not a function!");return t}},function(t,e){t.exports=function(t){if(void 0==t)throw TypeError("Can't call method on  "+t);return t}},function(t,e){t.exports=!0},function(t,e){e.f={}.propertyIsEnumerable},function(t,e,n){var r=n(39).f,i=n(47),o=n(27)("toStringTag");t.exports=function(t,e,n){t&&!i(t=n?t:t.prototype,o)&&r(t,o,{configurable:!0,value:e})}},function(t,e){var n=0,r=Math.random();t.exports=function(t){return"Symbol(".concat(void 0===t?"":t,")_",(++n+r).toString(36))}},function(t,e,n){"use strict";var r=n(379)(!0);n(166)(String,"String",function(t){this._t=String(t),this._i=0},function(){var t,e=this._t,n=this._i;return n>=e.length?{value:void 0,done:!0}:(t=r(e,n),this._i+=t.length,{value:t,done:!1})})},function(t,e,n){var r;r=function(t){var e,n,r,i,o;return n=(e=t).lib,r=n.Base,i=n.WordArray,(o=e.x64={}).Word=r.extend({init:function(t,e){this.high=t,this.low=e}}),o.WordArray=r.extend({init:function(t,e){t=this.words=t||[],this.sigBytes=void 0!=e?e:8*t.length},toX32:function(){for(var t=this.words,e=t.length,n=[],r=0;r<e;r++){var o=t[r];n.push(o.high),n.push(o.low)}return i.create(n,this.sigBytes)},clone:function(){for(var t=r.clone.call(this),e=t.words=this.words.slice(0),n=e.length,i=0;i<n;i++)e[i]=e[i].clone();return t}}),t},t.exports=r(n(7))},function(t,e,n){"use strict";(function(e){t.exports={isNode:void 0!==e,newBufferFrom:function(t,n){return new e(t,n)},allocBuffer:function(t){return e.alloc?e.alloc(t):new e(t)},isBuffer:function(t){return e.isBuffer(t)},isStream:function(t){return t&&"function"==typeof t.on&&"function"==typeof t.pause&&"function"==typeof t.resume}}}).call(e,n(55).Buffer)},function(t,e){var n=t.exports="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();"number"==typeof __g&&(__g=n)},function(t,e,n){"use strict";(function(e){!e.version||0===e.version.indexOf("v0.")||0===e.version.indexOf("v1.")&&0!==e.version.indexOf("v1.8.")?t.exports=function(t,n,r,i){if("function"!=typeof t)throw new TypeError('"callback" argument must be a function');var o,a,s=arguments.length;switch(s){case 0:case 1:return e.nextTick(t);case 2:return e.nextTick(function(){t.call(null,n)});case 3:return e.nextTick(function(){t.call(null,n,r)});case 4:return e.nextTick(function(){t.call(null,n,r,i)});default:for(o=new Array(s-1),a=0;a<o.length;)o[a++]=arguments[a];return e.nextTick(function(){t.apply(null,o)})}}:t.exports=e.nextTick}).call(e,n(28))},function(t,e,n){var r=n(55),i=r.Buffer;function o(t,e){for(var n in t)e[n]=t[n]}function a(t,e,n){return i(t,e,n)}i.from&&i.alloc&&i.allocUnsafe&&i.allocUnsafeSlow?t.exports=r:(o(r,e),e.Buffer=a),o(i,a),a.from=function(t,e,n){if("number"==typeof t)throw new TypeError("Argument must not be a number");return i(t,e,n)},a.alloc=function(t,e,n){if("number"!=typeof t)throw new TypeError("Argument must be a number");var r=i(t);return void 0!==e?"string"==typeof n?r.fill(e,n):r.fill(e):r.fill(0),r},a.allocUnsafe=function(t){if("number"!=typeof t)throw new TypeError("Argument must be a number");return i(t)},a.allocUnsafeSlow=function(t){if("number"!=typeof t)throw new TypeError("Argument must be a number");return r.SlowBuffer(t)}},function(t,e,n){"use strict";var r=a(n(4)),i=n(0),o=a(n(5));function a(t){return t&&t.__esModule?t:{default:t}}var s=n(19),u=n(10),c=n(20),l=n(79),h=n(13),d=n(1),f=n(8),p=u.sortBoundaries,g=u.setBoundaryPadding,v=h.LINECOLPOS,m=d.extend({},s,{calcChildrenBoundaryBounds:function(t){var e=t;(e.isCentralBranch()||e.isDetachedBranch())&&(e.boundaries.length&&p(e.boundaries),g(t))},getBalanceTreeHeight:function(t){if(t.isCentralBranch()||t.isDetachedBranch()){var e,n=parseInt(r.default.getStyleValue(t,i.STYLE_KEYS.SPACING_MINOR)||0),o=this.calcNumRight(t),a=t.getChildrenBranchesByType(),s=a.length,u=0,c=0,l=0,h=0,d=Math.min(o,a.length);for(e=0;e<d;e++)e<o-1&&(u+=n),u+=a[e].boundaryBounds.height,l=l<a[e].boundaryBounds.width?a[e].boundaryBounds.width:l;for(e=o;e<s;e++)e<s-1&&(c+=n),c+=a[e].boundaryBounds.height,h=h<a[e].boundaryBounds.width?a[e].boundaryBounds.width:h;return{pos:d,rightHeightTotal:u,leftHeightTotal:c,rightWidthTotal:l,leftWidthTotal:h,widthTotal:h+t.boundaryBounds.width+l+2*n,heightTotal:u>c?u:c}}},calcNumRight:function(t){if(void 0!==t.numRightInDraging)return t.numRightInDraging;var e,n,r,i,o=this.getTotalWeight(t)/2,a=-1,s=0,u=0,c=t.getChildrenBranchesByType(),l=c.length;for(e=0;e<l;e++)if(u+=this.getWeight(c[e]),i=e+1,!this.isInSameRangeWithLast(t,e+1)){if((n=s+u)>=o)return a>=0&&n-o>o-s?(r=a+1,1===e&&0===a&&(this.isInSameRangeWithLast(t,e)||this.isWithinThreshold(c[0],l)&&this.isWithinThreshold(c[e],l))?2:r):0===e&&this.isWithinThreshold(c[e],l)&&(2===l||l>2&&!this.isInSameRangeWithLast(t,2))&&this.isWithinThreshold(c[1],l)?2:i;s=n,u=0,a=e}return e},getTotalWeight:function(t){var e=0;return d.each(t.getChildrenBranchesByType(),function(t){e+=this.getWeight(t)},this),e},getWeight:function(t){return t.boundaryBounds.height+h.PADDING/2*3},isWithinThreshold:function(t,e){return this.getWeight(t)<200*(Math.log(e)+1)},calChildrenBounds:function(t){s.calChildrenBounds.apply(this,arguments),t.boundaries.length&&u.sortBoundaries(t.boundaries),u.setBoundaryPadding(t),o.default.preorderIterate(t,[i.TOPIC_ATTACHED],function(t){return t.updateStructure()}),s.calChildrenBounds.apply(this,arguments)},calSidePos:function(t){var e=t.side,n=t.spacingMajor,r=t.spacingMinor,i=t.children,o=t.newBounds,a=t.isUpToDown,s=t.offsetY,u=void 0===s?0:s;if(i&&0!==i.length){var l=this.getMinSumTopicSpacing(r,i,o),h=l,d=[0];i.forEach(function(t,e){if(0!==e){var n=i[e-1];d[e]=Math.max(d[e-1]+n.boundaryBounds.y+n.boundaryBounds.height+r-t.boundaryBounds.y,d[e-1]+n.topicView.bounds.y+n.topicView.bounds.height+h/(i.length-e)-t.topicView.bounds.y),h-=d[e]+t.topicView.bounds.y-(d[e-1]+n.topicView.bounds.y+n.topicView.bounds.height)}});var f=i[0],p=i[i.length-1],g=c[f.topicView.topicShapeStyle].getEndAnchorLocation(this,f).y-f.linePosition.y,v=c[p.topicView.topicShapeStyle].getEndAnchorLocation(this,p).y-p.linePosition.y,m=-(g+d[0]+v+d[i.length-1])/2;f===p&&(m=(a?-1:1)*l/2-f.topicView.bounds.y-(a?1:0)*f.topicView.bounds.height);var y;y="left"===e?o.x-n:o.x+o.width+n,i.forEach(function(t,n){t.changeTag(e);var r=m+d[n],i=t.model;i.isFree()&&!t._draged&&i.get("position")?t.setPosition(i.get("position")):"left"===e?t.setPosition(y-t.boundaryBounds.x-t.boundaryBounds.width,r+u):t.setPosition(y-t.boundaryBounds.x,r+u)})}},calBounds:function(t,e){var n=t.getChildrenBranchesByType(i.TOPIC_ATTACHED);return d.extend(e,u.mergeBounds(n,e))},getCalloutStructure:function(t,e){return(e.model.get("position")||{x:0,y:0}).x<=0?i.STRUCTURECLASS.LOGICLEFT:i.STRUCTURECLASS.LOGICRIGHT},_getMinSumTopicSpacing:function(t,e){var n=e.length;return n<=2?4*t:4*t*(Math.log(n)/Math.log(20)+1)},getMinSumTopicSpacing:function(t,e,n){var r=80;return n.height>230&&(r=Math.min(180,n.height-230+r)),e.length<=2?r:e.reduce(function(t,n,r){return 0!==r&&r!==e.length-1?t-n.boundaryBounds.height:t},r)},calcPolygons:function(t){var e=[],n=[],r=void 0,o=[],a=[],s=[];return t.getChildrenBranchesByType().forEach(function(t,e){t.position.x<0?a.push(t):s.push(t)}),e=e.concat(this.getPointsOfBase(t)),0===a.length?e=e.concat(this.getPointsOfNoChildren(t,i.DIRECTION.LEFT)):(r=l.getPointsOfUDChildren(a,!0),r=(r=l.getSidePointsWithGap(a[0],i.DIRECTION.DOWN).concat(r)).concat(l.getSidePointsWithGap(a[a.length-1],i.DIRECTION.UP)),e=e.concat(r)),o.push({points:f.convexHull(e),relatedBranch:a,side:"left"}),n=n.concat(this.getPointsOfBase(t)),0===s.length?n=n.concat(this.getPointsOfNoChildren(t,i.DIRECTION.RIGHT)):(r=l.getPointsOfUDChildren(s,!1),r=(r=l.getSidePointsWithGap(s[0],i.DIRECTION.UP).concat(r)).concat(l.getSidePointsWithGap(s[s.length-1],i.DIRECTION.DOWN)),n=n.concat(r)),o.push({points:f.convexHull(n),relatedBranch:s,side:"right"}),o},getPointsOfBase:function(t){return[{x:0,y:t.topicView.bounds.y-60},{x:0,y:t.topicView.bounds.y+t.topicView.bounds.height}]},getPointsOfNoChildren:function(t,e){return l.getPointsOfNoChildren(t,e)},calcSpacingMajor:function(t){return[i.BRANCHCONNECTION.FOLD,i.BRANCHCONNECTION.ROUNDEDFOLD,i.BRANCHCONNECTION.BIGHT].includes(t.topicLineStyle)?3*v:s.calcSpacingMajor.call(this,t)},_isRight:function(t,e){return t<this.calcNumRight(e)},getAvailableChildStructure:function(t,e){var n=e.branchIndex();return this._isRight(n,t)?i.RIGHT_EXPOSED_STRUCTURE:i.LEFT_EXPOSED_STRUCTURE}});t.exports=m},function(t,e,n){"use strict";(function(e){var r=n(21),i=n(0),o=i.VIEW_TYPE,a=i.SERVICE_NAME,s=i.COMMON_FONT_FAMILY,u=e.SVG,c=s,l={fontSize:12,fontFamily:c},h=r.extend({type:o.LABEL,sbEvents:{mouseover:"onMouseOver",click:"onClick"},initialize:function(t,e){this.parent(e),this.labelsInfo=t,this.s$labelsCardGroup=null,this.bounds={x:0,y:0,width:0,height:0},this.parentWidth=0,this.initSVGStructure(),this.setElement(this.s$labelsCardGroup.node),this.labelUnitArr=[]},initSVGStructure:function(){this.s$labelsCardGroup=(new u.G).attr("data","labels-card-group")},setParentWidth:function(t){this.parentWidth=t},render:function(){var t=this,e=1,n=Math.max(this.parentWidth,38),r=!1,i=this.labelsInfo.length;this.labelUnitArr.forEach(function(t){t.remove()}),this.labelUnitArr.length=0,this.labelsInfo.forEach(function(o,s){if(r)return!1;var u=void 0,c=!1;(u=t.callService(a.GET_TEXT_SIZE,o,l).width+12)>t.parentWidth&&(u=t.parentWidth),u<38&&(u=38);var h=t.callService(a.WRAP_TEXT_WITH_ELLIPSIS,o,l,u-12);n-4<u&&n!==u&&(e+=1,n=Math.max(t.parentWidth,38)),3===e&&i>1&&50+u>n&&(r=!0,c=!0,h=i+"+",o=[].concat(t.labelsInfo).splice(s).join(", "),u=t.callService(a.GET_TEXT_SIZE,h,l).width+12);var f=new d({originLabelUnitText:o,labelUnitText:h,finalWidth:u,parentLabelsView:t,isSpecialUtil:c});f.move(Math.max(t.parentWidth,38)-n,22*(e-1)),t.s$labelsCardGroup.add(f.getSvg()),t.labelUnitArr.push(f),n=n-u-4,i-=1}),this.bounds.width=Math.max(this.parentWidth,38),this.bounds.height=20*e+2*(e-1)},onMouseOver:function(t){t.stopPropagation()},move:function(t,e){this.s$labelsCardGroup.translate(t,e)},getSvg:function(){return this.s$labelsCardGroup},remove:function(){this.s$labelsCardGroup.remove()}}),d=r.extend({type:o.LABELUNIT,sbEvents:{mouseover:"onMouseOver",mouseout:"onMouseOut",mouseenter:"onMouseEnter",mousedown:"_onMouseDown",click:"onClick",contextmenu:"_onContextMenu"},hammerEvents:{press:"_onPress"},initialize:function(t){var e=t.originLabelUnitText,n=t.labelUnitText,r=t.finalWidth,i=t.parentLabelsView,o=t.isSpecialUtil;this.parent(i),this.originLabelUnitText=e,this.isSpecialUtil=o,this.s$labelUnitGroup=null,this.s$labelUnitbackgound=null,this.s$labelUnitText=null,this.initSVGStructure(n,r),this.setElement(this.s$labelUnitGroup.node)},initSVGStructure:function(t,e){this.s$labelUnitGroup=(new u.G).attr({data:"label-unit"}),this.s$labelUnitbackgound=(new u.Rect).size(e,20).radius(8).fill("rgba(255, 255, 255, 0.7)").stroke("rgba(0, 0, 0, 0.1)"),this.s$labelUnitText=(new u.Text).plain(t).fill("#434b54").attr({"font-size":12,"font-family":c,"alignment-baseline":"middle"}).x(6).y(11),this.s$labelUnitGroup.add(this.s$labelUnitbackgound),this.s$labelUnitGroup.add(this.s$labelUnitText)},onClick:function(t){t.stopPropagation()},onMouseOver:function(t){t.stopPropagation(),1!==t.which&&(this.s$labelUnitbackgound.attr({fill:"rgba(255, 255, 255, 0.7)",stroke:"rgba(0, 0, 0, 0.3)","stroke-width":1}),this.s$labelUnitText.attr("color","#434b54"))},onMouseOut:function(){this.s$labelUnitbackgound.attr({fill:"rgba(255, 255, 255, 0.7)",stroke:"rgba(0, 0, 0, 0.1)"}),this.s$labelUnitText.attr("color","#434b54")},onMouseEnter:function(t){t.stopPropagation()},_onPress:function(t){t.stopPropagation()},_onMouseDown:function(t){t.stopPropagation()},_onContextMenu:function(t){t.stopPropagation()},move:function(t,e){this.s$labelUnitGroup.translate(t,e)},getSvg:function(){return this.s$labelUnitGroup}});h.LabelUnitView=d,t.exports=h}).call(e,n(6))},function(t,e,n){"use strict";(function(e,r){var i,o=(i=n(3))&&i.__esModule?i:{default:i},a=n(34),s=n(22),u=n(0),c=u.MODULE_NAME,l=u.SERVICE_NAME,h=u.VIEW_TYPE,d=u.COMMON_FONT_FAMILY,f=n(1),p=e.SVG,g=a.extend({type:h.LEGEND,sbEvents:{dblclick:"onDbClick"},__style:{legend:{cursor:"-webkit-grab"},legend_dragging:{cursor:"-webkit-grabbing"},rect:{stroke:"#d1d1d1","stroke-width":1,fill:"rgba(255, 255, 255, 0.5)"},title:{"font-weight":500,color:"#2b2f33","font-size":16}},initialize:function(t){var e=t.parentView;this.parent(e),this.model=e.model.getLegendModel(),this.bounds={x:0,y:0,width:0,height:0},this._cachedBounds={x:0,y:0,width:0,height:0},this.markerMap=this.getModule(c.MARKER_MAP),this.proxyMarkerList=[],this.legendMarkerList=[],this.initSVGStructure(),this.initEventsListener(),this.parseLiveMarkerMap(),this.render(),this.setDraggable(),this.setLegendPosition()},initSVGStructure:function(){this.s$svg=(new p.G).data("name","legend"),this.style(this.s$svg,"legend"),this.s$rectSVG=(new p.Rect).width(160).height(80).radius(6),this.style(this.s$rectSVG,"rect"),this.s$svg.add(this.s$rectSVG),this.s$titleSVG=(new p.Text).text(this.getContext().getTranslatedText("LEGEND_TITLE")),this.style(this.s$titleSVG,"title"),this.s$svg.add(this.s$titleSVG),this.s$hrLine=(new p.Path).stroke("#d1d1d1"),this.s$svg.add(this.s$hrLine),this.s$markerListContainer=(new p.G).x(15).y(41),this.s$svg.add(this.s$markerListContainer);var t=this.editDomain();t.container.add(this.s$svg),t.legendView=this,this.setElement(this.s$svg.node)},initEventsListener:function(){var t=this.model.modelEvents;"readonly"!==r.env.SB_MODE&&(this.listenTo(this.model,t.legendAddMarker,this.addMarker),this.listenTo(this.model,t.legendRemoveMarker,this.removeMarker),this.listenTo(this.model,t.legendMarkerDescChanged,this.render),this.listenTo(this.model,"change:visibility",this.onVisibilityChange),this.listenTo(this.model,"change:position",this.setLegendPosition))},parseLiveMarkerMap:function(){var t=this.model.liveMarkerMap;for(var e in t)t.hasOwnProperty(e)&&0!==t[e]&&(this.proxyMarkerList[this.markerMap.indexOf(e)]=e)},updateLegendMarkerList:function(){this.legendMarkerList=this.proxyMarkerList.filter(function(t){return t})},createMarkerListSVG:function(){var t=this;this.s$markerListContainer.clear();var e=[];this.legendMarkerList.forEach(function(n,r){var i=new v(n,{parentView:t});e.push(i.bounds),i.move(0,34*r),t.s$markerListContainer.add(i.getSvg())});var n=Math.max.apply(Math,e.map(function(t){return t.width})),r=e.reduce(function(t,e){return t+e.height},0)-14,i=Math.max(n+30,160),o=Math.max(r+41+18,80);this.setLegendWidth(i),this.setLegendHeight(o),this._updateBounds({width:i,height:o})},_updateBounds:function(t){var e;e="visible"!==this.model.get("visibility")?{x:0,y:0,width:0,height:0}:(0,o.default)({},this.bounds,t),f.isEqual(e,this.bounds)||(this.bounds=e,this.trigger("change:bounds",this.bounds))},render:function(){this.updateLegendMarkerList(),this.createMarkerListSVG(),"visible"!==this.model.get("visibility")&&this.$el.css("display","none")},setDraggable:function(){var t=this,e=this.getModule(c.SVG_DRAGGABLE);if(e){var n=this.s$svg;e.draggable(n).dragStart(function(){t.style(n,"legend_dragging")}).dragEnd(function(){t.style(n,"legend"),t.model.setLegendPosition({x:n.x(),y:n.y()})})}},addMarker:function(t){this.proxyMarkerList[this.markerMap.indexOf(t)]=t,this.render()},removeMarker:function(t){this.proxyMarkerList[this.markerMap.indexOf(t)]=!1,this.render()},setLegendWidth:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:160;this.s$rectSVG.width(t),this.s$hrLine.attr("d","M 0 30 L "+t+" 30");var e=this.s$titleSVG.length();this.s$titleSVG.x((t-e)/2)},setLegendHeight:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:80;this.s$rectSVG.height(t)},getLegendDefaultPosition:function(){var t=this.editDomain(),e=t.getCanvasControl().getScrollContainerSize(),n=e.left+e.width-20-this.bounds.width,r=e.top+20;return t.getPositionTransfer().clientToReal({x:n,y:r})},setLegendPosition:function(){var t=this.model.get("position");s.isPointLike(t)||(t=this.getLegendDefaultPosition()),this.s$svg.x(t.x).y(t.y),this._updateBounds(t)},onVisibilityChange:function(){var t="visible"===this.model.get("visibility");this.$el.css("display",t?"":"none"),t?(this.render(),this.setLegendPosition()):this._updateBounds()},getCSheet:function(){return this.parent().model},onDbClick:function(t){t.stopPropagation()}}),v=a.extend({type:h.LEGENDMARKERLIST,sbEvents:{dblclick:"onDbClick"},initialize:function(t,e){var n=e.parentView;this.parent(n),this.markerId=t,this.markerMap=this.getModule(c.MARKER_MAP),this.userMarkerDescMap=this.parent().model.get("markers")||{},this.markerDescText=this.userMarkerDescMap[t]&&this.userMarkerDescMap[t].name||this.markerMap.getMarkerString(t)||t,this.bounds={width:0,height:0},this.initSVGStructure(),this.calcBounds()},initSVGStructure:function(){var t=this,e=this.markerId;this.s$container=new p.G,this.s$markerImage=(new p.Image).width(20).height(20),this.markerMap.getMarkerUrl(this.config.bind(this),e).then(function(e){return t.s$markerImage.load(e)}),this.s$container.add(this.s$markerImage),this.s$markerDescText=new p.Text,this.s$markerDescText.text(this.wrapTextWithEllipsis(this.markerDescText)),this.s$markerDescText.attr({color:"#2b2f33",x:34,y:-3,"font-size":14,"font-family":d}),this.s$container.add(this.s$markerDescText),this.setElement(this.s$container.node)},calcBounds:function(){var t=34+Math.min(this.getTextWidth(this.markerDescText),200);this.bounds={width:t,height:34}},wrapTextWithEllipsis:function(t){return this.callService(l.WRAP_TEXT_WITH_ELLIPSIS,t,{fontSize:14,fontFamily:d},200)},getTextWidth:function(t){return this.callService(l.GET_TEXT_SIZE,t,{fontSize:14,fontFamily:d}).width},move:function(t,e){this.s$container.translate(t,e)},getSvg:function(){return this.s$container},getTextClientStyle:function(){var t=this.s$markerDescText.node.getBoundingClientRect();return{left:t.left,top:t.top,fontSize:14}},saveEdit:function(t){t!==this.markerDescText&&this.parent().model.setUserMarkerDescription(this.markerId,t)},getEditContent:function(){return this.markerDescText}});g.LegendMarkerListView=v,t.exports=g}).call(e,n(6),n(28))},function(t,e,n){"use strict";(function(e,r){var i,o=l(n(3)),a=l(n(4)),s=n(0),u=l(n(335)),c=n(8);function l(t){return t&&t.__esModule?t:{default:t}}var h=n(34),d=e.SVG,f=n(8),p=n(292),g=n(320),v=n(5),m=n(1),y=n(22),_=n(14);function E(t){t.hide()}var A="cursor:crosshair;cursor:-webkit-grab;",S={rx:20,ry:20,fill:"transparent",x:0,y:0},T=h.extend({type:"relationship",sbEvents:{dblclick:"onDblClick",mouseover:"onMouseover",mouseout:"onMouseout",mouseup:"onMouseup",mousedown:"_onMouseDown",contextmenu:"_onContextMenu","mousedown .controlPoint":"onControlPointMouseDown","mouseup .controlPoint":"onControlPointMouseUp"},hammerEvents:{press:"_onPress"},__style:{relationship:{fill:"none"},controlPoint:{fill:"#FFFFFF",stroke:"#2ebdff"},actionPath:{stroke:"#2ebdff",fill:"none","stroke-opacity":"0"},actionPath__hover:{"stroke-opacity":"0.5"},actionPath__selected:{"stroke-opacity":"0.75"},holder:{stroke:"#2ebdff"},holder__hover:{"stroke-opacity":"1"},holder__selected:{"stroke-opacity":"1"},relationshipShadowAction:{"stroke-opacity":"0",stroke:"none",fill:"none"}},initialize:function(t){var e=this,n=t.virtual,i=this.model;this.arrowSelector=null,this.relativeDistance1={},this.relativeDistance2={},this.bounds={x:0,y:0,width:0,height:0},this.titleBounds={x:0,y:0,width:0,height:0},this.position={x:0,y:0},this.hideCount=0,this.svg=(new d.G).data("name","relationship"),this.path=this.svg.put(new d.Path).data("name","relationship-path"),this.style(this.path,"relationship"),this.actionPath=this.svg.put(new d.Path).data("name","relationship-action-path"),this.style(this.actionPath,"actionPath"),this.s$shadowActionPath=this.svg.put(new d.Path).data("name","relationship-shadow-action-path"),this.style(this.s$shadowActionPath,"relationshipShadowAction"),this.titleView=new u.default,this.titleView.parent(this),this.titleText=this.svg.put(this.titleView.getTextSvg()),this.controlPointGroup=this.svg.put(new d.G).data("name","controlPoint-group"),this.controlLine1=this.controlPointGroup.put(new d.Path).data("name","controlLine-1"),this.startPoint1=this.controlPointGroup.put(new d.Ellipse).data("name","startPoint-1").attr("style",A),this.controlPoint1Package=this.controlPointGroup.put(new d.G).data("name","controlPoint-1-package").attr("style",A),this.controlPoint1=this.controlPoint1Package.put(new d.Ellipse).data("name","controlPoint-1");var o=(new d.Ellipse).data("name","shadow-controlPoint-1").attr(S);this.controlPoint1Package.put(o),this.controlLine2=this.controlPointGroup.put(new d.Path).data("name","controlLine-2"),this.startPoint2=this.controlPointGroup.put(new d.Ellipse).data("name","startPoint-2").attr("style",A),this.controlPoint2Package=this.controlPointGroup.put(new d.G).data("name","controlPoint-2-package").attr("style",A),this.controlPoint2=this.controlPoint2Package.put(new d.Ellipse).data("name","controlPoint-2");var a=(new d.Ellipse).data("name","shadow-controlPoint-2").attr(S);this.controlPoint2Package.put(a),this.lineType=s.RELATIONSHIPSHAPE.CURVED,this.end1View=null,this.end2View=null,this.on("afterAncestorChange",function(){e.editDomain()&&!0!==n&&(e._initMask(),e._updateState(),e.updateBranchViews())}),"readonly"!==r.env.SB_MODE&&(this.listenTo(i,"change:title",this.onChangeTitle),this.listenTo(i,"change:end1Id change:end2Id",this.updateBranchViews),this.setElement(this.svg.node),this.listenTo(this.model,"changeStyle",this.onChangeStyle),this.listenTo(this.model,"change:endPoint",this.onChangeEndPoint),this.listenTo(this.model,"setStyleObject",function(){return e.render()})),this.listenTo(this.model,"refresh",this.render),this.isSelected=!1,this.hadBindDraggable=!1,this.lineWidth=1,this.posInfo=null,this.hadInit=!1},_initMask:function(){var t=this.editDomain().svg;this.clipRegion=(new d.Path).attr({fill:"black","clip-rule":"evenodd"}),this.masking=t.clip().add(this.clipRegion),this.path.clipWith(this.masking)},initStyle:function(){this.setLineStyle(a.default.getStyleValue(this,s.STYLE_KEYS.SHAPE_CLASS),!0),this.setLinePattern(a.default.getStyleValue(this,s.STYLE_KEYS.LINE_PATTERN)),this.setLineWidth(a.default.getStyleValue(this,s.STYLE_KEYS.LINE_WIDTH)),this.arrowSelector=new g(this),this.arrowSelector.setBeginArrowType(a.default.getStyleValue(this,s.STYLE_KEYS.ARROW_BEGIN_CLASS)),this.arrowSelector.setEndArrowType(a.default.getStyleValue(this,s.STYLE_KEYS.ARROW_END_CLASS)),this.setLineColor(a.default.getStyleValue(this,s.STYLE_KEYS.LINE_COLOR)),this.hadInit=!0},changeHooks:(i={},i[s.STYLE_KEYS.LINE_COLOR]=function(t){this.setLineColor(t)},i[s.STYLE_KEYS.SHAPE_CLASS]=function(t){this.setLineStyle(t)},i[s.STYLE_KEYS.LINE_PATTERN]=function(t){this.setLinePattern(t)},i[s.STYLE_KEYS.LINE_WIDTH]=function(t){this.setLineWidth(t),this.render()},i[s.STYLE_KEYS.FONT_SIZE]=function(t){this.setFontSize(t)},i[s.STYLE_KEYS.FONT_WEIGHT]=function(t){this.setFontWeight(t)},i[s.STYLE_KEYS.FONT_STYLE]=function(t){this.setFontStyle(t)},i[s.STYLE_KEYS.TEXT_DECORATION]=function(t){this.setTextDecoration(t)},i[s.STYLE_KEYS.FONT_FAMILY]=function(t){this.setFontFamily(t)},i[s.STYLE_KEYS.TEXT_COLOR]=function(t){this.setTextColor(t)},i[s.STYLE_KEYS.ARROW_BEGIN_CLASS]=function(t){this.arrowSelector.setBeginArrowType(t),this.render(!0)},i[s.STYLE_KEYS.ARROW_END_CLASS]=function(t){this.arrowSelector.setEndArrowType(t),this.render(!0)},i[s.STYLE_KEYS.TEXT_TRANSFORM]=function(){this.renderTitleText()},i),onChangeStyle:function(t,e){this.changeHooks[t].call(this,a.default.getStyleValue(this,t))},onChangeTitle:function(){this.renderTitleText(),this._updateBounds2()},updateBranchViews:function(){var t=this.editDomain(),e=this.model,n=null,r=null;t&&(t.model2View[e.get("end1Id")]&&(n=t.model2View[e.get("end1Id")]),t.model2View[e.get("end2Id")]&&(r=t.model2View[e.get("end2Id")])),n!==this.end1View&&(this.end1View&&this.stopListening(this.end1View,"afterRealPosChange change:bounds"),n&&this.listenTo(n,"afterRealPosChange change:bounds",this.onEndViewDimensionChange),this.end1View=n),r!==this.end2View&&(this.end2View&&this.stopListening(this.end2View,"afterRealPosChange change:bounds"),r&&this.listenTo(r,"afterRealPosChange change:bounds",this.onEndViewDimensionChange),this.end2View=r)},onEndViewDimensionChange:function(){var t=this;this.hadInit&&(0,c.nextTick)(function(){t.render(!0)})},getTextTransform:function(){return a.default.getStyleValue(this,s.STYLE_KEYS.TEXT_TRANSFORM)},renderTitleText:function(){var t=this.path.pointAt(this.path.length()/2);this.titleView.render();var e=t.x-this.titleView.bounds.width/2,n=t.y-this.titleView.bounds.height/2;this._titleRealPos={x:e,y:n},this.titleView.move(e,n),this.renderGlobalMask(this._titleRealPos)},renderGlobalMask:function(t){var e=function(t){return"M "+t.x+" "+t.y+"\n        L"+(t.x+t.width)+" "+t.y+"\n        L"+(t.x+t.width)+" "+(t.y+t.height)+"\n        L"+t.x+" "+(t.y+t.height)},n=this.bounds,r={width:n.width+400,height:n.height+400,x:n.x-200,y:n.y-200};this.titleBounds=(0,o.default)({},this.titleView.bounds,t);var i=e(r),a=e(this.titleBounds);this.clipRegion.attr({d:i+" "+a})},_updateBounds1:function(t){var e=t.insectPoint1,n=t.insectPoint2,r=t.controlPoint1,i=t.controlPoint2;this.bounds=_.inflate(p[this.lineType].calcBoundingBox(e,n,r,i),parseInt(a.default.getStyleValue(this,s.STYLE_KEYS.LINE_WIDTH)||0))},_updateBounds2:function(){var t=_.merge(this.bounds,this.titleBounds);t.x=this.titleBounds.x,t.y=this.titleBounds.y,m.isEqual(t,this.bounds)||(this.bounds=t,this.trigger("change:bounds",this.bounds))},render:function(t){var e=this;t||this.initStyle();var n=this.model,r=this.editDomain();if(this.end1View=r.model2View[n.get("end1Id")],this.end2View=r.model2View[n.get("end2Id")],this.end1View&&this.end2View){var i=this.posInfo=this._caclPosFromModel();(0,c.nextTick)(function(){e._render(i),e._updateBounds1(i),e.renderTitleText(),e._updateBounds2()}),t||this.hadBindDraggable||(this.hadBindDraggable=!0,this._bindControlDraggable(),this._bindEndDraggable(i))}},_render:function(t){var e,n,r=t.insectPoint1,i=t.insectPoint2,o=t.controlPoint1,a=t.controlPoint2;this.controlPoint1.attr({rx:4,ry:4,x:0,y:0,"stroke-width":2}),this.style(this.controlPoint1,"controlPoint"),this.controlPoint1Package.translate(o.x,o.y),this.controlPoint2.attr({rx:4,ry:4,x:0,y:0,"stroke-width":2}),this.style(this.controlPoint2,"controlPoint"),this.controlPoint2Package.translate(a.x,a.y),this.startPoint1.attr({rx:3,ry:3,"stroke-width":1}).cx(r.x).cy(r.y),this.style(this.startPoint1,"controlPoint"),this.startPoint2.attr({rx:3,ry:3,"stroke-width":1}).cx(i.x).cy(i.y),this.style(this.startPoint2,"controlPoint"),this.relativeDistance1={x:o.x-2-r.x,y:o.y-2-r.y},this.relativeDistance2={x:a.x-2-i.x,y:a.y-2-i.y},e="M "+r.x+" "+r.y+"L "+o.x+" "+o.y,this.controlLine1.attr({d:e,"stroke-width":2}),this.style(this.controlLine1,"holder"),n="M "+i.x+" "+i.y+"L "+a.x+" "+a.y,this.controlLine2.attr({d:n,"stroke-width":2}),this.style(this.controlLine2,"holder"),p[this.lineType].updatePath(this,r,i,o,a)},_caclPosFromModel:function(){var t,e,n=this.model,r=this.end1View,i=this.end2View,o=r.getRealPosition(),a=i.getRealPosition(),u=n.get("controlPoints")||{},c=u[0]||{},l=u[1]||{};this.lineType!==s.RELATIONSHIPSHAPE.CURVED&&(c={x:c.x,y:c.y},l={x:l.x,y:l.y});var h=void 0!==c.amount&&void 0!==c.angle,d=void 0!==c.x&&void 0!==c.y,p=void 0!==l.amount&&void 0!==l.angle,g=void 0!==l.x&&void 0!==l.y,v=void 0,m=void 0;return(h||p)&&(v=f.topicInsectLine(r,a),m=f.topicInsectLine(i,o)),d?c={x:o.x+c.x,y:o.y+c.y}:h?(t={x:(m.x-v.x)*c.amount+v.x,y:(m.y-v.y)*c.amount+v.y},c=y.rotateAround(t,v,c.angle)):(t={x:(a.x-o.x)/3+o.x,y:(a.y-o.y)/3+o.y},c=y.rotateAround(t,o,0)),g?l={x:a.x+l.x,y:a.y+l.y}:p?(e={x:(v.x-m.x)*l.amount+m.x,y:(v.y-m.y)*l.amount+m.y},l=y.rotateAround(e,m,l.angle)):(e={x:(a.x-o.x)/3*2+o.x,y:(a.y-o.y)/3*2+o.y},l=y.rotateAround(e,a,0)),{insectPoint1:this._intersectPointWithTopic(c,"start"),insectPoint2:this._intersectPointWithTopic(l,"end"),controlPoint1:c,controlPoint2:l}},_bindControlDraggable:function(){var t=void 0,e=void 0,n=void 0,r=void 0,i=this,o=void 0,a=void 0,u=void 0,c=void 0,l=void 0,h=void 0,d=void 0,f=void 0,g=function(){o=i.end1View,a=i.end2View,u=o.getRealPosition(),c=a.getRealPosition();var t=i.posInfo;l=t.insectPoint1,h=t.insectPoint2,d=t.controlPoint1,f=t.controlPoint2},v=this.getModule(s.MODULE_NAME.SVG_DRAGGABLE);v&&v.draggable(i.controlPoint1Package).dragStart(g).dragMove(function(e){var n=e.x,r=e.y;d.x=n,d.y=r,i.controlPoint1.attr({rx:8,ry:8}),l=i._intersectPointWithTopic(d,"start"),p[i.lineType].updatePath(i,l,h,d,f),i.renderTitleText(),i.startPoint1.cx(l.x).cy(l.y),i.relativeDistance1={x:d.x-2-l.x,y:d.y-2-l.y},t="M "+l.x+" "+l.y+"L "+d.x+" "+d.y,i.controlLine1.attr({d:t})}).dragEnd(function(t,e){E(i.callService("getViewPortCover")),i.controlPoint1.attr({rx:4,ry:4}),n={x:d.x-u.x,y:d.y-u.y},i.model.changeControlPosition({0:n})}),v&&v.draggable(i.controlPoint2Package,{draggingMask:!0}).dragStart(g).dragMove(function(t,n){var r=t.x,o=t.y;f.x=r,f.y=o,i.controlPoint2.attr({rx:8,ry:8}),p[i.lineType].updatePath(i,l,h,d,f),i.renderTitleText(),h=i._intersectPointWithTopic(f,"end"),i.startPoint2.cx(h.x).cy(h.y),i.relativeDistance2={x:f.x-2-h.x,y:f.y-2-h.y},e="M "+h.x+" "+h.y+"L "+f.x+" "+f.y,i.controlLine2.attr({d:e})}).dragEnd(function(t,e){E(i.callService("getViewPortCover")),i.controlPoint2.attr({rx:4,ry:4}),r={x:f.x-c.x,y:f.y-c.y},i.model.changeControlPosition({1:r})})},_bindEndDraggable:function(){var t,e=this,n=void 0,r=void 0,i=this,o=void 0,a=void 0,u=void 0,c=void 0,l="branchMouseUp boundaryMouseUp branchTouchEnd",h=this.getModule(s.MODULE_NAME.SVG_DRAGGABLE),d=function(){e.end1View,e.end2View};h&&h.draggable(i.startPoint1).dragMove(function(t,e){var s=t.x,u=t.y;o={x:s+i.relativeDistance1.x,y:u+i.relativeDistance1.y},a={x:i.controlPoint2Package.trans.x,y:i.controlPoint2Package.trans.y},i.startPoint1.move(s-4,u-4),c=i._intersectPointWithTopic(a,"end"),i.startPoint2.cx(c.x).cy(c.y),n="M "+s+" "+u+"L "+o.x+" "+o.y,r="M "+c.x+" "+c.y+"L "+(a.x+2)+" "+(a.y+2),i.controlLine1.attr({d:n}),i.controlLine2.attr({d:r}),i.controlPoint1Package.translate(o.x-2,o.y-2),p[i.lineType].updatePath(i,{x:s,y:u},c,o,a),i.renderTitleText()}).dragStart(function(e,n){d(),i.listenTo(i.editDomain().eventBus,l,function(e){t=e,i.stopListening(null,l)}),i.svg.style("pointer-events","none")}).dragEnd(function(e,n){setTimeout(function(){i.stopListening(null,l),t&&t!==i.end1View&&t!==i.end2View?i.model.changeEndPoint({end1Id:t.model.get("id")}):i.render(),t=null},0),i.svg.style("pointer-events",null)}),h&&h.draggable(i.startPoint2).dragMove(function(t,e){var s=t.x,c=t.y;o={x:i.controlPoint1Package.trans.x,y:i.controlPoint1Package.trans.y},a={x:s+i.relativeDistance2.x,y:c+i.relativeDistance2.y},i.startPoint2.move(s-4,c-4),u=i._intersectPointWithTopic(o,"start"),i.startPoint1.cx(u.x).cy(u.y),r="M "+s+" "+c+"L "+a.x+" "+a.y,n="M "+u.x+" "+u.y+"L "+(o.x+2)+" "+(o.y+2),i.controlLine1.attr({d:n}),i.controlLine2.attr({d:r}),i.controlPoint2Package.translate(a.x-2,a.y-2),p[i.lineType].updatePath(i,u,{x:s,y:c},o,a),i.renderTitleText()}).dragStart(function(e,n){d(),i.listenTo(i.editDomain().eventBus,l,function(e){t=e,i.stopListening(null,l)}),i.svg.style("pointer-events","none")}).dragEnd(function(e,n){setTimeout(function(){i.stopListening(null,l),t&&t!==i.end1View&&t!==i.end2View?i.model.changeEndPoint({end2Id:t.model.get("id")}):i.render(),t=null},0),i.svg.style("pointer-events",null)})},_intersectPointWithTopic:function(t,e){var n;n="start"===e?this.end1View:this.end2View;var r=s.STYLE_KEYS.LINE_WIDTH;n.type===s.VIEW_TYPE.BRANCH&&(r=s.STYLE_KEYS.BORDER_LINE_WIDTH);var i=parseInt(a.default.getStyleValue(n,r)),o=this.arrowSelector.getTip(e),u=this.lineWidth*o+i/2,c=f.topicInsectLine(n,t),l=y.diff(c,t);return 0===l.x&&0===l.y?c:(l=y.normalize(l,u),y.add(c,l))},onControlPointMouseDown:function(t){var e=t.currentTarget,n=e.getAttribute("rx"),r=e.getAttribute("ry");n&&r&&(e.setAttribute("rx",2*n),e.setAttribute("ry",2*r))},onControlPointMouseUp:function(t){var e=t.currentTarget,n=e.getAttribute("rx"),r=e.getAttribute("ry");n&&r&&(e.setAttribute("rx",n/2),e.setAttribute("ry",r/2))},createRelationshipByMouse:function(t,e){var n=e,r=f.topicInsectLine(t,n),i=n.x-r.x,o=n.y-r.y,a=30*Math.PI/180,s={x:i/3,y:o/3};s=y.rotate(s,a);var u={x:r.x+s.x,y:r.y+s.y},c={x:n.x-s.x,y:n.y-s.y};this.svg.attr("style","pointer-events: none"),p[this.lineType].updatePath(this,r,n,u,c)},onDblClick:function(t){return t.stopPropagation(),!1},onMouseover:function(t){return t.stopPropagation(),1!==t.which&&(this.isHovering=!0,this._updateState(),!1)},onMouseout:function(t){return t.stopPropagation(),this.isHovering=!1,this._updateState(),!1},onMouseup:function(t){},onMousemove:function(t){return t.stopPropagation(),!1},_onMouseDown:function(t){if(t.stopPropagation(),3===t.which)return this._dispatchContextMenu(t)},_onContextMenu:function(t){t.preventDefault(),t.stopPropagation(),100!==t.detail&&t.stopImmediatePropagation()},_onPress:function(t){t.stopPropagation(),this._pressContextMenuCheckHandle()},select:function(){return this.isSelected=!0,this._updateState(),this},deselect:function(){return this.isSelected=!1,this._updateState(),this},saveEdit:function(t){this.model.changeTitle(t)},getTextClientStyle:function(){var t=this.model,e=this.titleText.node,n=t.get("title")||"",r={fontSize:parseInt(a.default.getStyleValue(this,s.STYLE_KEYS.FONT_SIZE)||0),fontFamily:a.default.getStyleValue(this,s.STYLE_KEYS.FONT_FAMILY)},i=e.getBoundingClientRect(),u=i.top,c=i.left,l=this.getContext().callService("getTextSize",n,r),h=l.width,d=l.height;return(0,o.default)({top:u,left:c,width:h,height:d},r)},getEditContent:function(){return this.model.get("title")||""},remove:function(){var t=this.parent(),e=this;m.each(t.relationships,function(n,r){n===e&&t.relationships.splice(r,1)});var n=this.editDomain();n&&n.selectionManager&&n.selectionManager.removeFromSelection(this),n&&n.model2View&&delete n.model2View[this.model.id],this.stopListening(),this.parent(null),this.masking&&this.masking.remove(),this.svg.remove(),this.arrowSelector&&this.arrowSelector.dispose()},setLineStyle:function(t,e){this.lineType=t,!e&&this.render("byChangeStyle")},setLineColor:function(t){this.path.attr({stroke:t}),this.arrowSelector.setArrowColor(t)},setLinePattern:function(t){var e;switch(this.linePattern=t,t){case"dash":e="9, 3";break;case"dot":e="3, 3";break;case"dash-dot":e="9, 3, 3, 3";break;case"dash-dot-dot":e="9, 3, 3, 3, 3, 3";break;default:e=""}this.path.attr({"stroke-dasharray":e})},setLineWidth:function(t){this.path.attr({"stroke-width":parseInt(t)}),this.lineWidth=parseInt(t);var e=this.lineWidth+5;this.actionPath.attr({"stroke-width":e});var n=e+5;this.s$shadowActionPath.attr({"stroke-width":n})},setTextColor:function(t){this.titleView.render()},setFontSize:function(t){this.renderTitleText()},setFontWeight:function(t){this.renderTitleText()},setFontStyle:function(t){this.titleView.render()},setTextDecoration:function(t){this.titleView.render()},setFontFamily:function(t){this.titleView.render()},_shoudControlPointHide:function(){return!this.isSelected&&!this.isHovering},_shouldTitleHide:function(){return!this.model.get("title")&&!this.isSelected&&!this.isHovering},_showOrHideControlPoint:function(){this._shoudControlPointHide()?this.hideControlPoint():this.showControlPoint()},showControlPoint:function(){this.controlPointGroup.show()},hideControlPoint:function(){this.controlPointGroup.hide()},_showOrHideTitle:function(){this._shouldTitleHide()?(this.hideTitle(),this.masking.hide()):(this.showTitle(),this.masking.show())},showTitle:function(){this.titleText.attr({opacity:1})},hideTitle:function(){this.titleText.attr({opacity:0})},_updateActionStyle:function(){var t="actionPath";this.isSelected?t="actionPath__selected":this.isHovering&&(t="actionPath__hover"),this.style(this.actionPath,t)},_updateState:function(){this._showOrHideControlPoint(),this._showOrHideTitle(),this._updateActionStyle()},showOrHide:function(t){var e=t?"hide":"show";this.svg[e]()},onChangeEndPoint:function(){this.render()},getInfoString:function(){return this.model.get("title")||""},getRealPosition:function(){return this._titleRealPos},getClientRect:function(){var t=this.titleView.bounds,e=y.add(this._titleRealPos,t),n=this.editDomain().getPositionTransfer().realToClient(e);return{x:n.x,y:n.y,width:t.width,height:t.height}}});v.wrapReadOnly(T,["onMouseover","select"]),t.exports=T}).call(e,n(6),n(28))},function(t,e,n){"use strict";(function(e){var r,i=(r=n(4))&&r.__esModule?r:{default:r},o=n(8),a=n(21),s=n(0),u=s.VIEW_TYPE,c=s.SERVICE_NAME,l=s.MODULE_NAME,h=s.STYLE_KEYS,d=(s.MASTER_RANGE,e.SVG),f=8,p=24,g=2,v=4,m=.5;function y(t){var e=t.width,n=t.height,r=t.x,i=t.y;return"M "+(r-g+v)+" "+(i-g)+"L "+(r+e+g-v)+" "+(i-g)+"Q "+(r+e+g)+" "+(i-g)+"  "+(r+e+g)+" "+(i-g+v)+"L "+(r+e+g)+" "+(i+n+g-v)+"Q "+(r+e+g)+" "+(i+n+g)+"  "+(r+e+g-v)+" "+(i+n+g)+"L "+(r-g+v)+" "+(i+n+g)+"Q "+(r-g)+" "+(i+n+g)+"  "+(r-g)+" "+(i+n+g-v)+"L "+(r-g)+" "+(i-g+v)+"Q "+(r-g)+" "+(i-g)+"  "+(r-g+v)+" "+(i-g)+"z"}function _(t,e,n){if(t){var r=n?p:f,i=(1-m)/2,o=1-i,a=e.width,s=e.height,u=e.x,c=e.y;switch(n&&("up"===t||"down"===t?(a+=80,u-=40):(s+=80,c-=40)),t){case"up":return"M "+(u+a*i)+" "+(c-g)+"L "+(u+a*o)+" "+(c-g)+"L "+(u+a*o)+" "+(c-g-r+2)+"Q "+(u+a*o)+" "+(c-g-r)+"  "+(u+a*o-2)+" "+(c-g-r)+"L "+(u+a*i+2)+" "+(c-g-r)+"Q "+(u+a*i)+" "+(c-g-r)+"  "+(u+a*i)+" "+(c-g-r+2)+"L "+(u+a*i)+" "+(c-g)+"z";case"down":return"M "+(u+a*i)+" "+(c+s+g)+"L "+(u+a*o)+" "+(c+s+g)+"L "+(u+a*o)+" "+(c+s+g+r-2)+"Q "+(u+a*o)+" "+(c+s+g+r)+"  "+(u+a*o-2)+" "+(c+s+g+r)+"L "+(u+a*i+2)+" "+(c+s+g+r)+"Q "+(u+a*i)+" "+(c+s+g+r)+"  "+(u+a*i)+" "+(c+s+g+r-2)+"L "+(u+a*i)+" "+(c+s+g)+"z";case"left":return"M "+(u-g)+" "+(c+s*i)+"L "+(u-g-r+2)+" "+(c+s*i)+"Q "+(u-g-r)+" "+(c+s*i)+"  "+(u-g-r)+" "+(c+s*i+2)+"L "+(u-g-r)+" "+(c+s*o-2)+"Q "+(u-g-r)+" "+(c+s*o)+"  "+(u-g-r+2)+" "+(c+s*o)+"L "+(u-g)+" "+(c+s*o)+"z";case"right":return"M "+(u+a+g)+" "+(c+s*i)+"L "+(u+a+g+r-2)+" "+(c+s*i)+"Q "+(u+a+g+r)+" "+(c+s*i)+"  "+(u+a+g+r)+" "+(c+s*i+2)+"L "+(u+a+g+r)+" "+(c+s*o-2)+"Q "+(u+a+g+r)+" "+(c+s*o)+"  "+(u+a+g+r-2)+" "+(c+s*o)+"L "+(u+a+g)+" "+(c+s*o)+"z"}}}function E(t,e){var n=e.width,r=e.height,i=e.x,o=e.y,a=i+n/2-5,s=i+n/2+5,u=o+r*(1-m)/2+(1-1/3)/2*r*m,c=o+r*(1-m)/2+(1-(1-1/3)/2)*r*m,l=f/3;if(t)switch(t){case"up":return{line1:"M "+a+" "+(o-g-f+l)+" L "+s+" "+(o-g-f+l),line2:"M "+a+" "+(o-g-l)+" L "+s+" "+(o-g-l)};case"down":return{line1:"M "+a+" "+(o+r+g+l)+" L "+s+" "+(o+r+g+l),line2:"M "+a+" "+(o+r+g+f-l)+" L "+s+" "+(o+r+g+f-l)};case"left":return{line1:"M"+(i-g-f+l)+" "+u+" L "+(i-g-f+l)+" "+c,line2:"M"+(i-g-l)+" "+u+" L "+(i-g-l)+" "+c};case"right":return{line1:"M"+(i+l+n+g)+" "+u+"L "+(i+l+n+g)+" "+c,line2:"M"+(i+f-l+n+g)+" "+u+"L "+ +(i+f-l+n+g)+" "+c}}}var A=a.extend({type:u.SELECTBOX,sbEvents:{click:"onClick",mouseover:"onMouseover"},initialize:function(t){var e=t.refView;this.relationBranch={},this.refView=e,this.rangeStart=null,this.rangeEnd=null,this._direction=null,this.initSVGStructure()},initSVGStructure:function(){this.selectBoxGroup=(new d.G).data("name","select-box-group").hide(),this.selectBox=this.selectBoxGroup.put(new d.Path).data("name","select-box"),this.selectBoxOneG=(new d.G).data("name","select-box-one-g"),this.selectBoxTwoG=(new d.G).data("name","select-box-two-g"),this.selectBoxOne=(new d.Path).data("name","select-box-one"),this._s$ShadowSelectBoxOne=(new d.Path).data("name","shadow-select-box-one"),this.selectBoxTwo=(new d.Path).data("name","select-box-two"),this._s$ShadowSelectBoxTwo=(new d.Path).data("name","shadow-select-box-two"),this.selectBoxOneInline1=(new d.Path).data("name","select-box-one-inline"),this.selectBoxOneInline2=(new d.Path).data("name","select-box-one-inline"),this.selectBoxTwoInline1=(new d.Path).data("name","select-box-two-inline"),this.selectBoxTwoInline2=(new d.Path).data("name","select-box-two-inline"),this.selectBoxOneG.add(this.selectBoxOne),this.selectBoxOneG.add(this.selectBoxOneInline1),this.selectBoxOneG.add(this.selectBoxOneInline2),this.selectBoxOneG.add(this._s$ShadowSelectBoxOne),this.selectBoxTwoG.add(this.selectBoxTwo),this.selectBoxTwoG.add(this.selectBoxTwoInline1),this.selectBoxTwoG.add(this.selectBoxTwoInline2),this.selectBoxTwoG.add(this._s$ShadowSelectBoxTwo),this.selectBoxGroup.add(this.selectBoxOneG).add(this.selectBoxTwoG),this.setElement(this.selectBoxGroup.node)},_generateDragMovingBox:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;return"M "+(t.x+n-5)+" "+(t.y+r-5)+"L "+(t.x+n+e.width+5)+" "+(t.y+r-5)+"L "+(t.x+n+e.width+5)+" "+(t.y+r+e.height+5)+"L "+(t.x+n-5)+" "+(t.y+r+e.height+5)+"z"},transparent:function(t){var e=t?.5:"1",n=t?"rgba(#2ebdff, 0.5)":null;return this.selectBoxGroup.style("opacity",e),this.selectBox.style("stroke",n),this},hide:function(){return this.selectBoxGroup.hide(),this},show:function(){return this.selectBoxGroup.show(),this},render:function(t){var e=this.refView;if(!t||!e.parent())return!1;this._direction=t,e.type===u.BRANCH&&e.editDomain().content().addSelectBoxView(this),this._setSelectRange(),this._renderStaticArea(),this._renderDraggableArea()},_renderStaticArea:function(){var t=y(this._getSelectBoxSize());this.selectBox.attr({d:t,"stroke-width":2,stroke:"#2ebdff",fill:"none"})},_renderDraggableArea:function(){if("master"!==this.refView.model.get("range")){var t=this._getSelectBoxSize(),e=y(this._getSelectBoxSize()),n=void 0,r=void 0,i=void 0,o=void 0,a=void 0,s=void 0;"UD"===this._direction?(n=_("up",t),r=_("down",t),_("up",t,!0),_("down",t,!0),i=E("up",t).line1,o=E("up",t).line2,a=E("down",t).line1,s=E("down",t).line2):"LR"===this._direction&&(n=_("left",t),r=_("right",t),_("left",t,!0),_("right",t,!0),i=E("left",t).line1,o=E("left",t).line2,a=E("right",t).line1,s=E("right",t).line2);var u="UD"===this._direction?"row-resize":"col-resize";this.selectBox.attr({d:e,"stroke-width":2,stroke:"#2ebdff","stroke-opacity":1,fill:"none"}),this.selectBoxOne.attr({d:n,"stroke-width":2,stroke:"#2ebdff",fill:"#2ebdff",cursor:u}),this.selectBoxOneInline1.attr({d:i,"stroke-width":1,stroke:"white"}),this.selectBoxOneInline2.attr({d:o,"stroke-width":1,stroke:"white"}),this.selectBoxTwo.attr({d:r,"stroke-width":2,stroke:"#2ebdff",fill:"#2ebdff",cursor:u}),this.selectBoxTwoInline1.attr({d:a,"stroke-width":1,stroke:"white"}),this.selectBoxTwoInline2.attr({d:s,"stroke-width":1,stroke:"white"}),this._registerDragEvents()}},_setSelectRange:function(){var t=this.refView.type;if(t===u.BOUNDARY){var e=this.refView.model;this.rangeStart=e.rangeStart,this.rangeEnd=e.rangeEnd}if(t===u.BRANCH){var n=this.refView.summaryModel;this.rangeStart=n.rangeStart,this.rangeEnd=n.rangeEnd}},_getSelectBoxSize:function(){var t=this.refView,e=t.type;if(e===u.BOUNDARY){var n=t.boundaryPath.bbox(),r=n.width,o=n.height,a=n.x,s=n.y,c=parseInt(i.default.getStyleValue(t,h.LINE_WIDTH)||0);return{width:r+2+c,height:o+2+c,x:a-1-c/2,y:s-1-c/2}}if(e===u.BRANCH){for(var l=t.parent().getChildrenBranchesByType(),d=Number.MAX_VALUE,f=Number.MAX_VALUE,p=Number.NEGATIVE_INFINITY,g=Number.NEGATIVE_INFINITY,v=this.rangeStart;v<=this.rangeEnd;v++){var m=l[v];d=Math.min(d,m.bounds.x+m.getRealPosition().x),g=Math.max(g,m.bounds.x+m.getRealPosition().x+m.bounds.width),f=Math.min(f,m.bounds.y+m.getRealPosition().y),p=Math.max(p,m.bounds.y+m.getRealPosition().y+m.bounds.height)}return{x:d-1,y:f-1,width:g-d+2,height:p-f+2}}},_registerDragEvents:function(){var t=this,e=this.refView.parent();if(this._direction&&e.type===u.BRANCH)var n=this.refView.getModule(l.SVG_DRAGGABLE),r=n&&n.draggable(this.selectBoxOneG).dragStart(function(){t._onDragStart(r,1)}).dragMove(function(e){t._onDragMoving(e.x,e.y,1)}).dragEnd(function(){t._onDragEnd()}),i=n&&n.draggable(this.selectBoxTwoG).dragStart(function(){t._onDragStart(i,2)}).dragMove(function(e){t._onDragMoving(e.x,e.y,2)}).dragEnd(function(){t._onDragEnd()})},_onDragStart:function(t,e){var n=this._getDragMoveMaxDistance(),r=1===e?"one":"two",i="UD"===this._direction;t.updateConstraint({x:!i,y:i,minX:n[r+"GForwardMax"],maxX:n[r+"GBackMax"],minY:n[r+"GForwardMax"],maxY:n[r+"GBackMax"]}),this.refView.callService(c.GET_VIEW_PORT_COVER).show().css("cursor",i?"row-resize":"col-resize")},_onDragMoving:function(t,e,n){var r=this,i=this.refView.getModule(l.SELECT_DRAG);i.hasStarted()||i.trigger("start",this,this.refView,this._direction),this.refView.parent().getChildrenBranchesByType().forEach(function(t){o.isSelected(t,r,r._direction)?(i.trigger("addSelectedBranch",t),r.relationBranch[t.cid]=!0):(i.trigger("removeSelectedBranch",t),delete r.relationBranch[t.cid])});var a="UD"===this._direction,s=a?e:t,u=1===n,c=this._getSelectBoxSize(),h=c.width,d=c.height,f=void 0,p=void 0;a?(f=h,p=u?d-s:d+s):(f=u?h-s:h+s,p=d);var g=u?a?[0,s]:[s,0]:[],v=this._generateDragMovingBox.apply(this,[c,{width:f,height:p}].concat(g));this.selectBox.attr({d:v})},_onDragEnd:function(){this.refView.callService(c.GET_VIEW_PORT_COVER).hide().css("cursor","");var t=this.refView.getModule(l.SELECT_DRAG);t.hasStarted()&&t.trigger("end")},_getDragMoveMaxDistance:function(){var t=this,e=this.refView.parent().getChildrenBranchesByType(),n="UD"===this._direction?["y","height"]:["x","width"],r=n[0],i=n[1],o=[],a=[],s=[],u=[];e.forEach(function(e,n){var c=e.getRealPosition(),l=e.bounds;o.push(l[r]+c[r]),a.push(l[r]+c[r]+l[i]),t.rangeStart<=n&&n<=t.rangeEnd&&(s.push(l[r]+c[r]),u.push(l[r]+c[r]+l[i]))});var c=this._getSelectBoxBBox(),l=Math.min.apply(Math,o)-c[r]-g-f,h=Math.max.apply(Math,s)-g-c[r],d=Math.min.apply(Math,u)-c[r+"2"]+g,p=Math.max.apply(Math,a)-c[r+"2"]+g+f;return{oneGForwardMax:l,oneGBackMax:h,twoGForwardMax:d+f,twoGBackMax:p+f}},_getSelectBoxBBox:function(){var t=this.selectBox.bbox();return"UD"===this._direction?(t.height=t.height+2*f,t.y=t.y-f,t.y2=t.y2+f):(t.width=t.width+2*f,t.x=t.x-f,t.x2=t.x2+f),t},remove:function(){this.selectBoxGroup.remove()},onClick:function(){return!1}});t.exports=A}).call(e,n(6))},function(t,e,n){t.exports={default:n(358),__esModule:!0}},function(t,e,n){"use strict";e.__esModule=!0;var r,i=(r=n(30))&&r.__esModule?r:{default:r};e.default=function(t){return function(){var e=t.apply(this,arguments);return new i.default(function(t,n){return function r(o,a){try{var s=e[o](a),u=s.value}catch(t){return void n(t)}if(!s.done)return i.default.resolve(u).then(function(t){r("next",t)},function(t){r("throw",t)});t(u)}("next")})}}},function(t,e,n){t.exports=n(469)},function(t,e,n){var r=n(41),i=n(24).document,o=r(i)&&r(i.createElement);t.exports=function(t){return o?i.createElement(t):{}}},function(t,e){t.exports="constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf".split(",")},function(t,e,n){"use strict";var r=n(82);t.exports.f=function(t){return new function(t){var e,n;this.promise=new t(function(t,r){if(void 0!==e||void 0!==n)throw TypeError("Bad Promise constructor");e=t,n=r}),this.resolve=r(e),this.reject=r(n)}(t)}},function(t,e,n){var r=n(36),i=n(373),o=n(103),a=n(107)("IE_PROTO"),s=function(){},u=function(){var t,e=n(102)("iframe"),r=o.length;for(e.style.display="none",n(161).appendChild(e),e.src="javascript:",(t=e.contentWindow.document).open(),t.write("<script>document.F=Object<\/script>"),t.close(),u=t.F;r--;)delete u.prototype[o[r]];return u()};t.exports=Object.create||function(t,e){var n;return null!==t?(s.prototype=r(t),n=new s,s.prototype=null,n[a]=t):n=u(),void 0===e?n:i(n,e)}},function(t,e){e.f=Object.getOwnPropertySymbols},function(t,e,n){var r=n(108)("keys"),i=n(87);t.exports=function(t){return r[t]||(r[t]=i(t))}},function(t,e,n){var r=n(24),i=r["__core-js_shared__"]||(r["__core-js_shared__"]={});t.exports=function(t){return i[t]||(i[t]={})}},function(t,e){var n=Math.ceil,r=Math.floor;t.exports=function(t){return isNaN(t=+t)?0:(t>0?r:n)(t)}},function(t,e,n){var r=n(109),i=Math.min;t.exports=function(t){return t>0?i(r(t),9007199254740991):0}},function(t,e,n){var r=n(41);t.exports=function(t,e){if(!r(t))return t;var n,i;if(e&&"function"==typeof(n=t.toString)&&!r(i=n.call(t)))return i;if("function"==typeof(n=t.valueOf)&&!r(i=n.call(t)))return i;if(!e&&"function"==typeof(n=t.toString)&&!r(i=n.call(t)))return i;throw TypeError("Can't convert object to primitive value")}},function(t,e,n){var r=n(24),i=n(15),o=n(84),a=n(113),s=n(39).f;t.exports=function(t){var e=i.Symbol||(i.Symbol=o?{}:r.Symbol||{});"_"==t.charAt(0)||t in e||s(e,t,{value:a.f(t)})}},function(t,e,n){e.f=n(27)},function(t,e,n){var r=n(160),i=n(27)("iterator"),o=n(69);t.exports=n(15).getIteratorMethod=function(t){if(void 0!=t)return t[i]||t["@@iterator"]||o[r(t)]}},function(t,e,n){n(384);for(var r=n(24),i=n(48),o=n(69),a=n(27)("toStringTag"),s="CSSRuleList,CSSStyleDeclaration,CSSValueList,ClientRectList,DOMRectList,DOMStringList,DOMTokenList,DataTransferItemList,FileList,HTMLAllCollection,HTMLCollection,HTMLFormElement,HTMLSelectElement,MediaList,MimeTypeArray,NamedNodeMap,NodeList,PaintRequestList,Plugin,PluginArray,SVGLengthList,SVGNumberList,SVGPathSegList,SVGPointList,SVGStringList,SVGTransformList,SourceBufferList,StyleSheetList,TextTrackCueList,TextTrackList,TouchList".split(","),u=0;u<s.length;u++){var c=s[u],l=r[c],h=l&&l.prototype;h&&!h[a]&&i(h,a,c),o[c]=o.Array}},function(t,e,n){var r;r=function(t){var e,n,r;n=(e=t).lib.Base,r=e.enc.Utf8,e.algo.HMAC=n.extend({init:function(t,e){t=this._hasher=new t.init,"string"==typeof e&&(e=r.parse(e));var n=t.blockSize,i=4*n;e.sigBytes>i&&(e=t.finalize(e)),e.clamp();for(var o=this._oKey=e.clone(),a=this._iKey=e.clone(),s=o.words,u=a.words,c=0;c<n;c++)s[c]^=1549556828,u[c]^=909522486;o.sigBytes=a.sigBytes=i,this.reset()},reset:function(){var t=this._hasher;t.reset(),t.update(this._iKey)},update:function(t){return this._hasher.update(t),this},finalize:function(t){var e=this._hasher,n=e.finalize(t);return e.reset(),e.finalize(this._oKey.clone().concat(n))}})},t.exports=r(n(7))},function(t,e,n){var r;r=function(t){var e,n,r,i,o,a;return n=(e=t).lib,r=n.WordArray,i=n.Hasher,o=[],a=e.algo.SHA1=i.extend({_doReset:function(){this._hash=new r.init([1732584193,4023233417,2562383102,271733878,3285377520])},_doProcessBlock:function(t,e){for(var n=this._hash.words,r=n[0],i=n[1],a=n[2],s=n[3],u=n[4],c=0;c<80;c++){if(c<16)o[c]=0|t[e+c];else{var l=o[c-3]^o[c-8]^o[c-14]^o[c-16];o[c]=l<<1|l>>>31}var h=(r<<5|r>>>27)+u+o[c];h+=c<20?1518500249+(i&a|~i&s):c<40?1859775393+(i^a^s):c<60?(i&a|i&s|a&s)-1894007588:(i^a^s)-899497514,u=s,s=a,a=i<<30|i>>>2,i=r,r=h}n[0]=n[0]+r|0,n[1]=n[1]+i|0,n[2]=n[2]+a|0,n[3]=n[3]+s|0,n[4]=n[4]+u|0},_doFinalize:function(){var t=this._data,e=t.words,n=8*this._nDataBytes,r=8*t.sigBytes;return e[r>>>5]|=128<<24-r%32,e[14+(r+64>>>9<<4)]=Math.floor(n/4294967296),e[15+(r+64>>>9<<4)]=n,t.sigBytes=4*e.length,this._process(),this._hash},clone:function(){var t=i.clone.call(this);return t._hash=this._hash.clone(),t}}),e.SHA1=i._createHelper(a),e.HmacSHA1=i._createHmacHelper(a),t.SHA1},t.exports=r(n(7))},function(t,e){function n(){this._events=this._events||{},this._maxListeners=this._maxListeners||void 0}function r(t){return"function"==typeof t}function i(t){return"object"==typeof t&&null!==t}function o(t){return void 0===t}t.exports=n,n.EventEmitter=n,n.prototype._events=void 0,n.prototype._maxListeners=void 0,n.defaultMaxListeners=10,n.prototype.setMaxListeners=function(t){if("number"!=typeof t||t<0||isNaN(t))throw TypeError("n must be a positive number");return this._maxListeners=t,this},n.prototype.emit=function(t){var e,n,a,s,u,c;if(this._events||(this._events={}),"error"===t&&(!this._events.error||i(this._events.error)&&!this._events.error.length)){if((e=arguments[1])instanceof Error)throw e;var l=new Error('Uncaught, unspecified "error" event. ('+e+")");throw l.context=e,l}if(o(n=this._events[t]))return!1;if(r(n))switch(arguments.length){case 1:n.call(this);break;case 2:n.call(this,arguments[1]);break;case 3:n.call(this,arguments[1],arguments[2]);break;default:s=Array.prototype.slice.call(arguments,1),n.apply(this,s)}else if(i(n))for(s=Array.prototype.slice.call(arguments,1),a=(c=n.slice()).length,u=0;u<a;u++)c[u].apply(this,s);return!0},n.prototype.addListener=function(t,e){var a;if(!r(e))throw TypeError("listener must be a function");return this._events||(this._events={}),this._events.newListener&&this.emit("newListener",t,r(e.listener)?e.listener:e),this._events[t]?i(this._events[t])?this._events[t].push(e):this._events[t]=[this._events[t],e]:this._events[t]=e,i(this._events[t])&&!this._events[t].warned&&(a=o(this._maxListeners)?n.defaultMaxListeners:this._maxListeners)&&a>0&&this._events[t].length>a&&(this._events[t].warned=!0,console.error("(node) warning: possible EventEmitter memory leak detected. %d listeners added. Use emitter.setMaxListeners() to increase limit.",this._events[t].length),"function"==typeof console.trace&&console.trace()),this},n.prototype.on=n.prototype.addListener,n.prototype.once=function(t,e){if(!r(e))throw TypeError("listener must be a function");var n=!1;function i(){this.removeListener(t,i),n||(n=!0,e.apply(this,arguments))}return i.listener=e,this.on(t,i),this},n.prototype.removeListener=function(t,e){var n,o,a,s;if(!r(e))throw TypeError("listener must be a function");if(!this._events||!this._events[t])return this;if(a=(n=this._events[t]).length,o=-1,n===e||r(n.listener)&&n.listener===e)delete this._events[t],this._events.removeListener&&this.emit("removeListener",t,e);else if(i(n)){for(s=a;s-- >0;)if(n[s]===e||n[s].listener&&n[s].listener===e){o=s;break}if(o<0)return this;1===n.length?(n.length=0,delete this._events[t]):n.splice(o,1),this._events.removeListener&&this.emit("removeListener",t,e)}return this},n.prototype.removeAllListeners=function(t){var e,n;if(!this._events)return this;if(!this._events.removeListener)return 0===arguments.length?this._events={}:this._events[t]&&delete this._events[t],this;if(0===arguments.length){for(e in this._events)"removeListener"!==e&&this.removeAllListeners(e);return this.removeAllListeners("removeListener"),this._events={},this}if(r(n=this._events[t]))this.removeListener(t,n);else if(n)for(;n.length;)this.removeListener(t,n[n.length-1]);return delete this._events[t],this},n.prototype.listeners=function(t){return this._events&&this._events[t]?r(this._events[t])?[this._events[t]]:this._events[t].slice():[]},n.prototype.listenerCount=function(t){if(this._events){var e=this._events[t];if(r(e))return 1;if(e)return e.length}return 0},n.listenerCount=function(t,e){return t.listenerCount(e)}},function(t,e,n){"use strict";var r=n(74),i=n(195),o=n(194),a=n(193);function s(t,e,n,r,i){this.compressedSize=t,this.uncompressedSize=e,this.crc32=n,this.compression=r,this.compressedContent=i}o=n(194),s.prototype={getContentWorker:function(){var t=new i(r.Promise.resolve(this.compressedContent)).pipe(this.compression.uncompressWorker()).pipe(new o("data_length")),e=this;return t.on("end",function(){if(this.streamInfo.data_length!==e.uncompressedSize)throw new Error("Bug : uncompressed data size mismatch")}),t},getCompressedWorker:function(){return new i(r.Promise.resolve(this.compressedContent)).withStreamInfo("compressedSize",this.compressedSize).withStreamInfo("uncompressedSize",this.uncompressedSize).withStreamInfo("crc32",this.crc32).withStreamInfo("compression",this.compression)}},s.createWorkerFrom=function(t,e,n){return t.pipe(new a).pipe(new o("uncompressedSize")).pipe(e.compressWorker(n)).pipe(new o("compressedSize")).withStreamInfo("compression",e)},t.exports=s},function(t,e,n){"use strict";var r=n(12),i=function(){for(var t,e=[],n=0;n<256;n++){t=n;for(var r=0;r<8;r++)t=1&t?3988292384^t>>>1:t>>>1;e[n]=t}return e}();t.exports=function(t,e){return void 0!==t&&t.length?"string"!==r.getTypeOf(t)?function(t,e,n,r){var o=i,a=0+n;t^=-1;for(var s=0;s<a;s++)t=t>>>8^o[255&(t^e[s])];return-1^t}(0|e,t,t.length):function(t,e,n,r){var o=i,a=0+n;t^=-1;for(var s=0;s<a;s++)t=t>>>8^o[255&(t^e.charCodeAt(s))];return-1^t}(0|e,t,t.length):0}},function(t,e,n){t.exports=!n(200)(function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a})},function(t,e){t.exports=function(t){return"object"==typeof t?null!==t:"function"==typeof t}},function(t,e,n){"use strict";t.exports={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"}},function(t,e,n){"use strict";(function(e,r,i){var o=n(92);function a(t){var e=this;this.next=null,this.entry=null,this.finish=function(){!function(t,e,n){var r=t.entry;for(t.entry=null;r;){var i=r.callback;e.pendingcb--,i(void 0),r=r.next}e.corkedRequestsFree?e.corkedRequestsFree.next=t:e.corkedRequestsFree=t}(e,t)}}t.exports=y;var s,u=!e.browser&&["v0.10","v0.9."].indexOf(e.version.slice(0,5))>-1?r:o;y.WritableState=m;var c=n(73);c.inherits=n(75);var l,h={deprecate:n(474)},d=n(209),f=n(93).Buffer,p=i.Uint8Array||function(){},g=n(208);function v(){}function m(t,e){s=s||n(50),t=t||{},this.objectMode=!!t.objectMode,e instanceof s&&(this.objectMode=this.objectMode||!!t.writableObjectMode);var r=t.highWaterMark,i=this.objectMode?16:16384;this.highWaterMark=r||0===r?r:i,this.highWaterMark=Math.floor(this.highWaterMark),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1;var c=!1===t.decodeStrings;this.decodeStrings=!c,this.defaultEncoding=t.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(t){!function(t,e){var n=t._writableState,r=n.sync,i=n.writecb;if(function(t){t.writing=!1,t.writecb=null,t.length-=t.writelen,t.writelen=0}(n),e)!function(t,e,n,r,i){--e.pendingcb,n?(o(i,r),o(x,t,e),t._writableState.errorEmitted=!0,t.emit("error",r)):(i(r),t._writableState.errorEmitted=!0,t.emit("error",r),x(t,e))}(t,n,r,e,i);else{var a=S(n);a||n.corked||n.bufferProcessing||!n.bufferedRequest||A(t,n),r?u(E,t,n,a,i):E(t,n,a,i)}}(e,t)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.bufferedRequestCount=0,this.corkedRequestsFree=new a(this)}function y(t){if(s=s||n(50),!(l.call(y,this)||this instanceof s))return new y(t);this._writableState=new m(t,this),this.writable=!0,t&&("function"==typeof t.write&&(this._write=t.write),"function"==typeof t.writev&&(this._writev=t.writev),"function"==typeof t.destroy&&(this._destroy=t.destroy),"function"==typeof t.final&&(this._final=t.final)),d.call(this)}function _(t,e,n,r,i,o,a){e.writelen=r,e.writecb=a,e.writing=!0,e.sync=!0,n?t._writev(i,e.onwrite):t._write(i,o,e.onwrite),e.sync=!1}function E(t,e,n,r){n||function(t,e){0===e.length&&e.needDrain&&(e.needDrain=!1,t.emit("drain"))}(t,e),e.pendingcb--,r(),x(t,e)}function A(t,e){e.bufferProcessing=!0;var n=e.bufferedRequest;if(t._writev&&n&&n.next){var r=e.bufferedRequestCount,i=new Array(r),o=e.corkedRequestsFree;o.entry=n;for(var s=0,u=!0;n;)i[s]=n,n.isBuf||(u=!1),n=n.next,s+=1;i.allBuffers=u,_(t,e,!0,e.length,i,"",o.finish),e.pendingcb++,e.lastBufferedRequest=null,o.next?(e.corkedRequestsFree=o.next,o.next=null):e.corkedRequestsFree=new a(e)}else{for(;n;){var c=n.chunk,l=n.encoding,h=n.callback;if(_(t,e,!1,e.objectMode?1:c.length,c,l,h),n=n.next,e.writing)break}null===n&&(e.lastBufferedRequest=null)}e.bufferedRequestCount=0,e.bufferedRequest=n,e.bufferProcessing=!1}function S(t){return t.ending&&0===t.length&&null===t.bufferedRequest&&!t.finished&&!t.writing}function T(t,e){t._final(function(n){e.pendingcb--,n&&t.emit("error",n),e.prefinished=!0,t.emit("prefinish"),x(t,e)})}function x(t,e){var n=S(e);return n&&(function(t,e){e.prefinished||e.finalCalled||("function"==typeof t._final?(e.pendingcb++,e.finalCalled=!0,o(T,t,e)):(e.prefinished=!0,t.emit("prefinish")))}(t,e),0===e.pendingcb&&(e.finished=!0,t.emit("finish"))),n}c.inherits(y,d),m.prototype.getBuffer=function(){for(var t=this.bufferedRequest,e=[];t;)e.push(t),t=t.next;return e},function(){try{Object.defineProperty(m.prototype,"buffer",{get:h.deprecate(function(){return this.getBuffer()},"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.","DEP0003")})}catch(t){}}(),"function"==typeof Symbol&&Symbol.hasInstance&&"function"==typeof Function.prototype[Symbol.hasInstance]?(l=Function.prototype[Symbol.hasInstance],Object.defineProperty(y,Symbol.hasInstance,{value:function(t){return!!l.call(this,t)||t&&t._writableState instanceof m}})):l=function(t){return t instanceof this},y.prototype.pipe=function(){this.emit("error",new Error("Cannot pipe, not readable"))},y.prototype.write=function(t,e,n){var r,i=this._writableState,a=!1,s=(r=t,(f.isBuffer(r)||r instanceof p)&&!i.objectMode);return s&&!f.isBuffer(t)&&(t=function(t){return f.from(t)}(t)),"function"==typeof e&&(n=e,e=null),s?e="buffer":e||(e=i.defaultEncoding),"function"!=typeof n&&(n=v),i.ended?function(t,e){var n=new Error("write after end");t.emit("error",n),o(e,n)}(this,n):(s||function(t,e,n,r){var i=!0,a=!1;return null===n?a=new TypeError("May not write null values to stream"):"string"==typeof n||void 0===n||e.objectMode||(a=new TypeError("Invalid non-string/buffer chunk")),a&&(t.emit("error",a),o(r,a),i=!1),i}(this,i,t,n))&&(i.pendingcb++,a=function(t,e,n,r,i,o){if(!n){var a=function(t,e,n){return t.objectMode||!1===t.decodeStrings||"string"!=typeof e||(e=f.from(e,n)),e}(e,r,i);r!==a&&(n=!0,i="buffer",r=a)}var s=e.objectMode?1:r.length;e.length+=s;var u=e.length<e.highWaterMark;if(u||(e.needDrain=!0),e.writing||e.corked){var c=e.lastBufferedRequest;e.lastBufferedRequest={chunk:r,encoding:i,isBuf:n,callback:o,next:null},c?c.next=e.lastBufferedRequest:e.bufferedRequest=e.lastBufferedRequest,e.bufferedRequestCount+=1}else _(t,e,!1,s,r,i,o);return u}(this,i,s,t,e,n)),a},y.prototype.cork=function(){this._writableState.corked++},y.prototype.uncork=function(){var t=this._writableState;t.corked&&(t.corked--,t.writing||t.corked||t.finished||t.bufferProcessing||!t.bufferedRequest||A(this,t))},y.prototype.setDefaultEncoding=function(t){if("string"==typeof t&&(t=t.toLowerCase()),!(["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((t+"").toLowerCase())>-1))throw new TypeError("Unknown encoding: "+t);return this._writableState.defaultEncoding=t,this},y.prototype._write=function(t,e,n){n(new Error("_write() is not implemented"))},y.prototype._writev=null,y.prototype.end=function(t,e,n){var r=this._writableState;"function"==typeof t?(n=t,t=null,e=null):"function"==typeof e&&(n=e,e=null),null!==t&&void 0!==t&&this.write(t,e),r.corked&&(r.corked=1,this.uncork()),r.ending||r.finished||function(t,e,n){e.ending=!0,x(t,e),n&&(e.finished?o(n):t.once("finish",n)),e.ended=!0,t.writable=!1}(this,r,n)},Object.defineProperty(y.prototype,"destroyed",{get:function(){return void 0!==this._writableState&&this._writableState.destroyed},set:function(t){this._writableState&&(this._writableState.destroyed=t)}}),y.prototype.destroy=g.destroy,y.prototype._undestroy=g.undestroy,y.prototype._destroy=function(t,e){this.end(),e(t)}}).call(e,n(28),n(473).setImmediate,n(6))},function(t,e,n){(e=t.exports=n(206)).Stream=e,e.Readable=e,e.Writable=n(124),e.Duplex=n(50),e.Transform=n(207),e.PassThrough=n(464)},function(t,e,n){"use strict";var r=s(n(101)),i=s(n(100)),o=s(n(318)),a=n(0);function s(t){return t&&t.__esModule?t:{default:t}}s(n(65));var u=n(129),c=n(159),l=n(157),h=n(9),d=n(1),f=n(244),p=n(245),g=n(227),v=n(0),m=n(142),y=d.invert(a.EVENTS),_={},E=u.extend({events:{},initialize:function(t){var e=this;if(this.removableCallback=[],!t.el)throw new Error("must indicate el argument in Editor initialization");E.__super__.initialize.apply(this,arguments),this._option=d.extend({},t),this._$rootContainer=h("<div class='sb-container'></div>").css({position:"relative"}),this._$svgContainer=h("<div class='mm-editor'></div>").appendTo(this._$rootContainer).css({width:"100%",height:"100%",position:"relative"}),this._$appToolsContainer=h("<div class='app-tools-container'></div>").appendTo(this._$rootContainer).css({position:"absolute",left:"0px",top:"0px"}),t.scrollContainer?this._scrollContainer=t.scrollContainer:(this.config(a.CONFIG.FAKE_IMAGE)?this.$el.css({overflow:"hidden"}):this.$el.css({overflow:"scroll"}),this._scrollContainer=this.$el[0]),this.$el.append(this._$rootContainer),this.$el.attr("tabindex","-1"),this.$el.css({outline:"none"}),this._serviceMap=p(this),this._deferedEventArgsMap={},function(t){var e=f.hammerCreator(t),n=e.onHammer,r=e.offHammer;this._onGesture=n,this._offGesture=r;var i=f.eventCreator(t),o=i.onEvent,a=i.offEvent;this._onEvent=o,this._offEvent=a}.call(this,this._$rootContainer[0]),f.initViewEvent(this.onEvent.bind(this)),f.initViewHammer(this.onGesture.bind(this)),function(){for(var t in this._moduleMap={},_){var e=_[t];this._moduleMap[e.identifier.toLowerCase()]=new e(this)}}.call(this),this._actionChain=g(this),this.model=this._option.sheetModel||this.model,this.listenTo(this.model,"all",function(){for(var t=arguments.length,n=Array(t),r=0;r<t;r++)n[r]=arguments[r];n[0]in y&&e.trigger.apply(e,n)}),this.listenTo(this.model,a.EVENTS.AFTER_SHEET_CONTENT_CHANGE,d.debounce(function(){e.trigger(a.EVENTS.AFTER_MODIFY_STATUS_CHANGE)},0)),this.model.setTextTranslator(this.getTranslatedText.bind(this)),this.initEventsListener()},initEventsListener:function(){var t=this;this.on(a.EVENTS.AFTER_UI_STATUS_ACTIVATE,function(e){e===a.UI_STATUS.DE_FOCUS&&t._setAllSelectionFocusStatus(!0)}),this.on(a.EVENTS.AFTER_UI_STATUS_DEACTIVATE,function(e){e===a.UI_STATUS.DE_FOCUS&&t._setAllSelectionFocusStatus(!1)}),this.on(a.EVENTS.SCALE_CHANGED,function(){var e=t.getModule(a.MODULE_NAME.EDIT_RECEIVER);e&&e.repairPosition()})},_setAllSelectionFocusStatus:function(t){this.getModule(a.MODULE_NAME.SELECTION).selections.forEach(function(e){e.type===a.VIEW_TYPE.BRANCH&&(t?e.getProxy().displayDeFocus():e.getProxy().displaySelect(),e.isDeFocus=t)})},getScrollContainer:function(){return this._scrollContainer},_preventDefault:function(t){t.preventDefault()},trigger:function(){for(var t=this,e=arguments.length,n=Array(e),r=0;r<e;r++)n[r]=arguments[r];var i=n[0];if(-1!==this.config(a.CONFIG.DEFERED_EVENTS).indexOf(i)){var o=n.slice();o[0]=i+":sync",u.prototype.trigger.apply(this,o),this._deferedEventArgsMap[i]||setTimeout(function(){var e=t._deferedEventArgsMap[i];u.prototype.trigger.apply(t,e),delete t._deferedEventArgsMap[i]},this.config(a.CONFIG.DEFERED_TIME)),this._deferedEventArgsMap[i]=n}else u.prototype.trigger.apply(this,n)},onGesture:function(t,e,n){!this.config(a.CONFIG.FAKE_IMAGE)&&this._onGesture.apply(this,arguments)},offGesture:function(t,e,n){this._offGesture.apply(this,arguments)},onEvent:function(t,e,n){!this.config(a.CONFIG.FAKE_IMAGE)&&this._onEvent.apply(this,arguments)},offEvent:function(t,e,n){this._offEvent.apply(this,arguments)},getOuterDOM:function(){return this.el},getRootDOM:function(){return this._$rootContainer[0]},getAppToolsContainer:function(){return this._$appToolsContainer},getSVGContainer:function(){return this._$svgContainer},getSheetCornerClientPosition:function(){var t=this.getSheetView().bounds,e=this.getSVGView().getPositionTransfer(),n=e.realToClient({x:t.x,y:t.y}),r=e.realToClient({x:t.width+t.x,y:t.height+t.y});return{top:n.y,right:r.x,bottom:r.y,left:n.x}},initInnerView:function(){if(this.model){var t=new c({context:this,el:this._$svgContainer[0]});this._svgView=t;var e=new l({model:this.model});t.content(e),this.trigger(a.EVENTS.SHEET_CONTENT_LOADED)}},getSVGView:function(){return this._svgView},getSheetModel:function(){return this.model},getSheetView:function(){return this._svgView.content()},isSheetModified:function(){return this.getModule(a.MODULE_NAME.MODIFY_CHECK).checkIsModified()},getModule:function(t){var e=this._moduleMap[t.toLowerCase()];return void 0===e&&this.config(a.CONFIG.LOGGER).warn("unknown module: "+t),e},callService:function(t){for(var e=arguments.length,n=Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];return this._serviceMap[t].apply(this,n)},execAction:function(){var t=(0,i.default)(r.default.mark(function t(e){var n,i,o,s,u,c=arguments;return r.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(!(n=this._actionChain.actionMap[e])){t.next=21;break}for(i=c.length,o=Array(i>1?i-1:0),s=1;s<i;s++)o[s-1]=c[s];if(n.isStatusNormal.apply(n,o)){t.next=5;break}return t.abrupt("return");case 5:if(!(u=this._actionChain.preActionMap[e])){t.next=18;break}return t.prev=7,t.next=10,u();case 10:return t.abrupt("return",n.doExecute.apply(n,o));case 13:t.prev=13,t.t0=t.catch(7),console.log("pre action reject");case 16:t.next=19;break;case 18:return t.abrupt("return",n.doExecute.apply(n,o));case 19:t.next=22;break;case 21:this.config(a.CONFIG.LOGGER).warn("action "+e+" unFound");case 22:case"end":return t.stop()}},t,this,[[7,13]])}));return function(e){return t.apply(this,arguments)}}(),queryActionStatus:function(t){var e=this._actionChain.actionMap[t];if(e){for(var n=arguments.length,r=Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];return e.queryStatus.apply(e,r)}this.config(a.CONFIG.LOGGER).warn("action "+t+" unFound")},getChildEditors:function(){return null},getTranslatedText:function(t){var e=this.config(v.CONFIG.LANGUAGE);return m.translate(e,t)},getActiveUIStatus:function(){return this.getModule(a.MODULE_NAME.SEMAPHORE).getActiveUIStatus()},_remove:function(){this.removableCallback.forEach(function(t){t()})},isShowFashionStyle:function(){var t=this.config(a.CONFIG.INFO_ITEM_STYLE);return t===a.INFO_ITEM_STYLE_TYPE.FASHION||t!==a.INFO_ITEM_STYLE_TYPE.CLASSIC&&t!==a.INFO_ITEM_STYLE_TYPE.ACC_TO_JSON&&void 0},getContentBound:function(){return this.getSheetView().bounds},exportImage:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return o.default.export(this,t)},activateOverridedStyle:function(t,e,n){this.getModule(a.MODULE_NAME.OVERRIDE_STYLE).insertOverridedStyle(t,e,n),this.getSheetView().refresh(),this.trigger(a.EVENTS.SE_OVERRIDE_STYLE_CHANGED)},deactivateOverridedStyle:function(t){this.getModule(a.MODULE_NAME.OVERRIDE_STYLE).removeOverridedStyle(t),this.getSheetView().refresh(),this.trigger(a.EVENTS.SE_OVERRIDE_STYLE_CHANGED)},getSelections:function(){var t=this.getModule("selectionmanager");return t?t.selections.slice():[]},getComponentViewById:function(t){return this.getSVGView().model2View[t]},getZoomPencentage:function(){return this.getSVGView().getScale()},getTransform:function(){return d.pick(this.getSVGView().container.transform(),"x","y","scaleX","scaleY")},isReadOnly:function(){return!0===this.config(v.CONFIG.READONLY)},setScrollDisable:function(){this.getScrollContainer().style.overflow="hidden"},setScrollEnable:function(){this.getScrollContainer().style.overflow="scroll"},isDoughnutPlatform:function(){return this.config(a.CONFIG.PLATFORM)===a.PLATFORMS.DOUGHNUT},isBrowniePlatform:function(){return this.config(a.CONFIG.PLATFORM)===a.PLATFORMS.BROWNIE},isVanaPlatform:function(){return this.config(a.CONFIG.PLATFORM)===a.PLATFORMS.VANA},isMobilePlatform:function(){return this.isBrowniePlatform()||this.isDoughnutPlatform()},getDoughnutExportInfo:function(){return window.DonutExportInfo||{}},getDragEventClientPosition:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.isMobilePlatform(),n=void 0;void 0===e&&(e=this.isMobilePlatform()),n=e?(t.changedTouches||t.changedPointers)[0]:t;var r=void 0;if(this.isDoughnutPlatform()){var i=window.headerHeight||window.screen.availHeight-document.body.offsetHeight;r={x:n.screenX,y:n.screenY-i}}else if(this.isBrowniePlatform()){var o=this.getSVGView().getDeviceNativeScale();r={x:n.clientX*o,y:n.clientY*o}}else r={x:n.clientX,y:n.clientY};return r}},{registerModule:function(t){if(!t.identifier)throw new Error("a module haven't name");_[t.identifier.toLowerCase()]=t}});t.exports=E},function(module,exports,__webpack_require__){"use strict";(function(global){var __WEBPACK_AMD_DEFINE_RESULT__,_promise=__webpack_require__(30),_promise2=_interopRequireDefault(_promise),_stringify=__webpack_require__(32),_stringify2=_interopRequireDefault(_stringify),_typeof2=__webpack_require__(35),_typeof3=_interopRequireDefault(_typeof2);function _interopRequireDefault(t){return t&&t.__esModule?t:{default:t}}!function(window){var SVG=window.SVG=function(t){if(SVG.supported)return t=new SVG.Doc(t),SVG.parser||SVG.prepare(t),t};if(SVG.ns="http://www.w3.org/2000/svg",SVG.xmlns="http://www.w3.org/2000/xmlns/",SVG.xlink="http://www.w3.org/1999/xlink",SVG.did=1e3,SVG.eid=function(t){return"Svgjs"+t.charAt(0).toUpperCase()+t.slice(1)+SVG.did++},SVG.create=function(t){var e=document.createElementNS(this.ns,t);return e.setAttribute("id",this.eid(t)),e},SVG.extend=function(){var t,e,n,r;for(e=(t=[].slice.call(arguments)).pop(),r=t.length-1;r>=0;r--)if(t[r])for(n in e)t[r].prototype[n]=e[n];SVG.Set&&SVG.Set.inherit&&SVG.Set.inherit()},SVG.prepare=function(t){var e=document.getElementsByTagName("body")[0],n=(e?new SVG.Doc(e):t.nested()).size(2,0),r=SVG.create("path");n.node.appendChild(r),SVG.parser={body:e||t.parent,draw:n.style("opacity:0;position:fixed;left:100%;top:100%;overflow:hidden"),poly:n.polyline().node,path:r}},SVG.supported=!!document.createElementNS&&!!document.createElementNS(SVG.ns,"svg").createSVGRect,!SVG.supported)return!1;SVG.get=function(t){var e=document.getElementById(idFromReference(t)||t);if(e)return e.instance},SVG.invent=function(t){var e="function"==typeof t.create?t.create:function(){this.constructor.call(this,SVG.create(t.create))};return t.inherit&&(e.prototype=new t.inherit),t.extend&&SVG.extend(e,t.extend),t.construct&&SVG.extend(t.parent||SVG.Container,t.construct),e},SVG.regex={unit:/^(-?[\d\.]+)([a-z%]{0,2})$/,hex:/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i,rgb:/rgb\((\d+),(\d+),(\d+)\)/,reference:/#([a-z0-9\-_]+)/i,isHex:/^#[a-f0-9]{3,6}$/i,isRgb:/^rgb\(/,isCss:/[^:]+:[^;]+;?/,isBlank:/^(\s+)?$/,isNumber:/^-?[\d\.]+$/,isPercent:/^-?[\d\.]+%$/,isImage:/\.(jpg|jpeg|png|gif)(\?[^=]+.*)?/i,isEvent:/^[\w]+:[\w]+$/},SVG.defaults={matrix:"1 0 0 1 0 0",attrs:{"fill-opacity":1,"stroke-opacity":1,"stroke-width":0,"stroke-linejoin":"miter","stroke-linecap":"butt",fill:"#000000",stroke:"#000000",opacity:1,x:0,y:0,cx:0,cy:0,width:0,height:0,r:0,rx:0,ry:0,offset:0,"stop-opacity":1,"stop-color":"#000000","font-size":16,"font-family":"Helvetica, Arial, sans-serif","text-anchor":"start"},trans:function(){return{x:0,y:0,scaleX:1,scaleY:1,rotation:0,skewX:0,skewY:0,matrix:this.matrix,a:1,b:0,c:0,d:1,e:0,f:0}}},SVG.Color=function(t){var e;this.r=0,this.g=0,this.b=0,"string"==typeof t?SVG.regex.isRgb.test(t)?(e=SVG.regex.rgb.exec(t.replace(/\s/g,"")),this.r=parseInt(e[1]),this.g=parseInt(e[2]),this.b=parseInt(e[3])):SVG.regex.isHex.test(t)&&(e=SVG.regex.hex.exec(fullHex(t)),this.r=parseInt(e[1],16),this.g=parseInt(e[2],16),this.b=parseInt(e[3],16)):"object"===(void 0===t?"undefined":(0,_typeof3.default)(t))&&(this.r=t.r,this.g=t.g,this.b=t.b)},SVG.extend(SVG.Color,{toString:function(){return this.toHex()},toHex:function(){return"#"+compToHex(this.r)+compToHex(this.g)+compToHex(this.b)},toRgb:function(){return"rgb("+[this.r,this.g,this.b].join()+")"},brightness:function(){return this.r/255*.3+this.g/255*.59+this.b/255*.11},morph:function(t){return this.destination=new SVG.Color(t),this},at:function(t){return this.destination?(t=t<0?0:t>1?1:t,new SVG.Color({r:~~(this.r+(this.destination.r-this.r)*t),g:~~(this.g+(this.destination.g-this.g)*t),b:~~(this.b+(this.destination.b-this.b)*t)})):this}}),SVG.Color.test=function(t){return t+="",SVG.regex.isHex.test(t)||SVG.regex.isRgb.test(t)},SVG.Color.isRgb=function(t){return t&&"number"==typeof t.r&&"number"==typeof t.g&&"number"==typeof t.b},SVG.Color.isColor=function(t){return SVG.Color.isRgb(t)||SVG.Color.test(t)},SVG.Array=function(t,e){0==(t=(t||[]).valueOf()).length&&e&&(t=e.valueOf()),this.value=this.parse(t)},SVG.extend(SVG.Array,{morph:function(t){if(this.destination=this.parse(t),this.value.length!=this.destination.length){for(var e=this.value[this.value.length-1],n=this.destination[this.destination.length-1];this.value.length>this.destination.length;)this.destination.push(n);for(;this.value.length<this.destination.length;)this.value.push(e)}return this},settle:function(){for(var t=0,e=this.value.length,n=[];t<e;t++)-1==n.indexOf(this.value[t])&&n.push(this.value[t]);return this.value=n},at:function(t){if(!this.destination)return this;for(var e=0,n=this.value.length,r=[];e<n;e++)r.push(this.value[e]+(this.destination[e]-this.value[e])*t);return new SVG.Array(r)},toString:function(){return this.value.join(" ")},valueOf:function(){return this.value},parse:function(t){return t=t.valueOf(),Array.isArray(t)?t:this.split(t)},split:function(t){return t.replace(/\s+/g," ").replace(/^\s+|\s+$/g,"").split(" ")},reverse:function(){return this.value.reverse(),this}}),SVG.PointArray=function(){this.constructor.apply(this,arguments)},SVG.PointArray.prototype=new SVG.Array,SVG.extend(SVG.PointArray,{toString:function(){for(var t=0,e=this.value.length,n=[];t<e;t++)n.push(this.value[t].join(","));return n.join(" ")},at:function(t){if(!this.destination)return this;for(var e=0,n=this.value.length,r=[];e<n;e++)r.push([this.value[e][0]+(this.destination[e][0]-this.value[e][0])*t,this.value[e][1]+(this.destination[e][1]-this.value[e][1])*t]);return new SVG.PointArray(r)},parse:function(t){if(t=t.valueOf(),Array.isArray(t))return t;for(var e,n=0,r=(t=this.split(t)).length,i=[];n<r;n++)e=t[n].split(","),i.push([parseFloat(e[0]),parseFloat(e[1])]);return i},move:function(t,e){var n=this.bbox();if(t-=n.x,e-=n.y,!isNaN(t)&&!isNaN(e))for(var r=this.value.length-1;r>=0;r--)this.value[r]=[this.value[r][0]+t,this.value[r][1]+e];return this},size:function(t,e){var n,r=this.bbox();for(n=this.value.length-1;n>=0;n--)this.value[n][0]=(this.value[n][0]-r.x)*t/r.width+r.x,this.value[n][1]=(this.value[n][1]-r.y)*e/r.height+r.y;return this},bbox:function(){return SVG.parser.poly.setAttribute("points",this.toString()),SVG.parser.poly.getBBox()}}),SVG.PathArray=function(t,e){this.constructor.call(this,t,e)},SVG.PathArray.prototype=new SVG.Array,SVG.extend(SVG.PathArray,{toString:function(){return arrayToString(this.value)},move:function(t,e){var n=this.bbox();if(t-=n.x,e-=n.y,!isNaN(t)&&!isNaN(e))for(var r,i=this.value.length-1;i>=0;i--)"M"==(r=this.value[i][0])||"L"==r||"T"==r?(this.value[i][1]+=t,this.value[i][2]+=e):"H"==r?this.value[i][1]+=t:"V"==r?this.value[i][1]+=e:"C"==r||"S"==r||"Q"==r?(this.value[i][1]+=t,this.value[i][2]+=e,this.value[i][3]+=t,this.value[i][4]+=e,"C"==r&&(this.value[i][5]+=t,this.value[i][6]+=e)):"A"==r&&(this.value[i][6]+=t,this.value[i][7]+=e);return this},size:function(t,e){var n,r,i=this.bbox();for(n=this.value.length-1;n>=0;n--)"M"==(r=this.value[n][0])||"L"==r||"T"==r?(this.value[n][1]=(this.value[n][1]-i.x)*t/i.width+i.x,this.value[n][2]=(this.value[n][2]-i.y)*e/i.height+i.y):"H"==r?this.value[n][1]=(this.value[n][1]-i.x)*t/i.width+i.x:"V"==r?this.value[n][1]=(this.value[n][1]-i.y)*e/i.height+i.y:"C"==r||"S"==r||"Q"==r?(this.value[n][1]=(this.value[n][1]-i.x)*t/i.width+i.x,this.value[n][2]=(this.value[n][2]-i.y)*e/i.height+i.y,this.value[n][3]=(this.value[n][3]-i.x)*t/i.width+i.x,this.value[n][4]=(this.value[n][4]-i.y)*e/i.height+i.y,"C"==r&&(this.value[n][5]=(this.value[n][5]-i.x)*t/i.width+i.x,this.value[n][6]=(this.value[n][6]-i.y)*e/i.height+i.y)):"A"==r&&(this.value[n][1]=this.value[n][1]*t/i.width,this.value[n][2]=this.value[n][2]*e/i.height,this.value[n][6]=(this.value[n][6]-i.x)*t/i.width+i.x,this.value[n][7]=(this.value[n][7]-i.y)*e/i.height+i.y);return this},parse:function(t){if(t instanceof SVG.PathArray)return t.valueOf();var e,n,r,i,o,a,s,u,c,l,h,d=0,f=0;for(SVG.parser.path.setAttribute("d","string"==typeof t?t:arrayToString(t)),e=0,n=(h=SVG.parser.path.pathSegList).numberOfItems;e<n;++e)"M"==(c=(l=h.getItem(e)).pathSegTypeAsLetter)||"L"==c||"H"==c||"V"==c||"C"==c||"S"==c||"Q"==c||"T"==c||"A"==c?("x"in l&&(d=l.x),"y"in l&&(f=l.y)):("x1"in l&&(o=d+l.x1),"x2"in l&&(s=d+l.x2),"y1"in l&&(a=f+l.y1),"y2"in l&&(u=f+l.y2),"x"in l&&(d+=l.x),"y"in l&&(f+=l.y),"m"==c?h.replaceItem(SVG.parser.path.createSVGPathSegMovetoAbs(d,f),e):"l"==c?h.replaceItem(SVG.parser.path.createSVGPathSegLinetoAbs(d,f),e):"h"==c?h.replaceItem(SVG.parser.path.createSVGPathSegLinetoHorizontalAbs(d),e):"v"==c?h.replaceItem(SVG.parser.path.createSVGPathSegLinetoVerticalAbs(f),e):"c"==c?h.replaceItem(SVG.parser.path.createSVGPathSegCurvetoCubicAbs(d,f,o,a,s,u),e):"s"==c?h.replaceItem(SVG.parser.path.createSVGPathSegCurvetoCubicSmoothAbs(d,f,s,u),e):"q"==c?h.replaceItem(SVG.parser.path.createSVGPathSegCurvetoQuadraticAbs(d,f,o,a),e):"t"==c?h.replaceItem(SVG.parser.path.createSVGPathSegCurvetoQuadraticSmoothAbs(d,f),e):"a"==c?h.replaceItem(SVG.parser.path.createSVGPathSegArcAbs(d,f,l.r1,l.r2,l.angle,l.largeArcFlag,l.sweepFlag),e):"z"!=c&&"Z"!=c||(d=r,f=i)),"M"!=c&&"m"!=c||(r=d,i=f);for(t=[],e=0,n=(h=SVG.parser.path.pathSegList).numberOfItems;e<n;++e)d=[c=(l=h.getItem(e)).pathSegTypeAsLetter],"M"==c||"L"==c||"T"==c?d.push(l.x,l.y):"H"==c?d.push(l.x):"V"==c?d.push(l.y):"C"==c?d.push(l.x1,l.y1,l.x2,l.y2,l.x,l.y):"S"==c?d.push(l.x2,l.y2,l.x,l.y):"Q"==c?d.push(l.x1,l.y1,l.x,l.y):"A"==c&&d.push(l.r1,l.r2,l.angle,0|l.largeArcFlag,0|l.sweepFlag,l.x,l.y),t.push(d);return t},bbox:function(){return SVG.parser.path.setAttribute("d",this.toString()),SVG.parser.path.getBBox()}}),SVG.Number=function(t){if(this.value=0,this.unit="","number"==typeof t)this.value=isNaN(t)?0:isFinite(t)?t:t<0?-3.4e38:3.4e38;else if("string"==typeof t){var e=t.match(SVG.regex.unit);e&&(this.value=parseFloat(e[1]),"%"==e[2]?this.value/=100:"s"==e[2]&&(this.value*=1e3),this.unit=e[2])}else t instanceof SVG.Number&&(this.value=t.value,this.unit=t.unit)},SVG.extend(SVG.Number,{toString:function(){return("%"==this.unit?~~(1e8*this.value)/1e6:"s"==this.unit?this.value/1e3:this.value)+this.unit},valueOf:function(){return this.value},plus:function(t){return this.value=this+new SVG.Number(t),this},minus:function(t){return this.plus(-new SVG.Number(t))},times:function(t){return this.value=this*new SVG.Number(t),this},divide:function(t){return this.value=this/new SVG.Number(t),this},to:function(t){return"string"==typeof t&&(this.unit=t),this},morph:function(t){return this.destination=new SVG.Number(t),this},at:function(t){return this.destination?new SVG.Number(this.destination).minus(this).times(t).plus(this):this}}),SVG.ViewBox=function(t){var e,n,r,i,o=1,a=1,s=t.bbox(),u=(t.attr("viewBox")||"").match(/-?[\d\.]+/g),c=t,l=t;for(r=new SVG.Number(t.width()),i=new SVG.Number(t.height());"%"==r.unit;)o*=r.value,r=new SVG.Number(c instanceof SVG.Doc?c.parent.offsetWidth:c.parent.width()),c=c.parent;for(;"%"==i.unit;)a*=i.value,i=new SVG.Number(l instanceof SVG.Doc?l.parent.offsetHeight:l.parent.height()),l=l.parent;this.x=s.x,this.y=s.y,this.width=r*o,this.height=i*a,this.zoom=1,u&&(e=parseFloat(u[0]),n=parseFloat(u[1]),r=parseFloat(u[2]),i=parseFloat(u[3]),this.zoom=this.width/this.height>r/i?this.height/i:this.width/r,this.x=e,this.y=n,this.width=r,this.height=i)},SVG.extend(SVG.ViewBox,{toString:function(){return this.x+" "+this.y+" "+this.width+" "+this.height}}),SVG.BBox=function(t){var e;if(this.x=0,this.y=0,this.width=0,this.height=0,t){try{e=t.node.getBBox()}catch(n){e={x:t.node.clientLeft,y:t.node.clientTop,width:t.node.clientWidth,height:t.node.clientHeight}}this.x=e.x+t.trans.x,this.y=e.y+t.trans.y,this.width=e.width*t.trans.scaleX,this.height=e.height*t.trans.scaleY}boxProperties(this)},SVG.extend(SVG.BBox,{merge:function(t){var e=new SVG.BBox;return e.x=Math.min(this.x,t.x),e.y=Math.min(this.y,t.y),e.width=Math.max(this.x+this.width,t.x+t.width)-e.x,e.height=Math.max(this.y+this.height,t.y+t.height)-e.y,boxProperties(e),e}}),SVG.RBox=function(t){var e,n,r={};if(this.x=0,this.y=0,this.width=0,this.height=0,t){for(e=t.doc().parent,n=t.doc().viewbox().zoom,r=t.node.getBoundingClientRect(),this.x=r.left,this.y=r.top,this.x-=e.offsetLeft,this.y-=e.offsetTop;e=e.offsetParent;)this.x-=e.offsetLeft,this.y-=e.offsetTop;for(e=t;e=e.parent;)"svg"==e.type&&e.viewbox&&(n*=e.viewbox().zoom,this.x-=e.x()||0,this.y-=e.y()||0)}this.x/=n,this.y/=n,this.width=r.width/n,this.height=r.height/n,this.x+="number"==typeof window.scrollX?window.scrollX:window.pageXOffset,this.y+="number"==typeof window.scrollY?window.scrollY:window.pageYOffset,boxProperties(this)},SVG.extend(SVG.RBox,{merge:function(t){var e=new SVG.RBox;return e.x=Math.min(this.x,t.x),e.y=Math.min(this.y,t.y),e.width=Math.max(this.x+this.width,t.x+t.width)-e.x,e.height=Math.max(this.y+this.height,t.y+t.height)-e.y,boxProperties(e),e}}),SVG.Element=SVG.invent({create:function(t){this._stroke=SVG.defaults.attrs.stroke,this.trans=SVG.defaults.trans(),(this.node=t)&&(this.type=t.nodeName,this.node.instance=this)},extend:{x:function(t){return null!=t&&((t=new SVG.Number(t)).value/=this.trans.scaleX),this.attr("x",t)},y:function(t){return null!=t&&((t=new SVG.Number(t)).value/=this.trans.scaleY),this.attr("y",t)},cx:function(t){return null==t?this.x()+this.width()/2:this.x(t-this.width()/2)},cy:function(t){return null==t?this.y()+this.height()/2:this.y(t-this.height()/2)},move:function(t,e){return this.x(t).y(e)},center:function(t,e){return this.cx(t).cy(e)},width:function(t){return this.attr("width",t)},height:function(t){return this.attr("height",t)},size:function(t,e){var n=proportionalSize(this.bbox(),t,e);return this.width(new SVG.Number(n.width)).height(new SVG.Number(n.height))},clone:function(){var t,e,n=this.type;return t="rect"==n||"ellipse"==n?this.parent[n](0,0):"line"==n?this.parent[n](0,0,0,0):"image"==n?this.parent[n](this.src):"text"==n?this.parent[n](this.content):"path"==n?this.parent[n](this.attr("d")):"polyline"==n||"polygon"==n?this.parent[n](this.attr("points")):"g"==n?this.parent.group():this.parent[n](),delete(e=this.attr()).id,t.attr(e),t.trans=this.trans,t.transform({})},remove:function(){return this.parent&&this.parent.removeElement(this),this},replace:function(t){return this.after(t).remove(),t},addTo:function(t){return t.put(this)},putIn:function(t){return t.add(this)},doc:function(t){return this._parent(t||SVG.Doc)},attr:function(t,e,n){if(null==t){for(t={},n=(e=this.node.attributes).length-1;n>=0;n--)t[e[n].nodeName]=SVG.regex.isNumber.test(e[n].nodeValue)?parseFloat(e[n].nodeValue):e[n].nodeValue;return t}if("object"==(void 0===t?"undefined":(0,_typeof3.default)(t)))for(e in t)this.attr(e,t[e]);else if(null===e)this.node.removeAttribute(t);else{if(null==e)return null==(e=this.node.attributes[t])?SVG.defaults.attrs[t]:SVG.regex.isNumber.test(e.nodeValue)?parseFloat(e.nodeValue):e.nodeValue;if("style"==t)return this.style(e);"stroke-width"==t?this.attr("stroke",parseFloat(e)>0?this._stroke:null):"stroke"==t&&(this._stroke=e),"fill"!=t&&"stroke"!=t||(SVG.regex.isImage.test(e)&&(e=this.doc().defs().image(e,0,0)),e instanceof SVG.Image&&(e=this.doc().defs().pattern(0,0,function(){this.add(e)}))),"number"==typeof e?e=new SVG.Number(e):SVG.Color.isColor(e)?e=new SVG.Color(e):Array.isArray(e)&&(e=new SVG.Array(e)),"leading"==t?this.leading&&this.leading(e):"string"==typeof n?this.node.setAttributeNS(n,t,e.toString()):this.node.setAttribute(t,e.toString()),!this.rebuild||"font-size"!=t&&"x"!=t||this.rebuild(t,e)}return this},transform:function(t,e){if(0==arguments.length)return this.trans;if("string"==typeof t)return arguments.length<2?this.trans[t]:((n={})[t]=e,this.transform(n));var n=[];for(e in t=parseMatrix(t))null!=t[e]&&(this.trans[e]=t[e]);return this.trans.matrix=this.trans.a+" "+this.trans.b+" "+this.trans.c+" "+this.trans.d+" "+this.trans.e+" "+this.trans.f,(t=this.trans).matrix!=SVG.defaults.matrix&&n.push("matrix("+t.matrix+")"),0!=t.rotation&&n.push("rotate("+t.rotation+" "+(null==t.cx?this.bbox().cx:t.cx)+" "+(null==t.cy?this.bbox().cy:t.cy)+")"),1==t.scaleX&&1==t.scaleY||n.push("scale("+t.scaleX+" "+t.scaleY+")"),0!=t.skewX&&n.push("skewX("+t.skewX+")"),0!=t.skewY&&n.push("skewY("+t.skewY+")"),0==t.x&&0==t.y||n.push("translate("+new SVG.Number(t.x/t.scaleX)+" "+new SVG.Number(t.y/t.scaleY)+")"),0==n.length?this.node.removeAttribute("transform"):this.node.setAttribute("transform",n.join(" ")),this},style:function(t,e){if(0==arguments.length)return this.node.style.cssText||"";if(arguments.length<2)if("object"==(void 0===t?"undefined":(0,_typeof3.default)(t)))for(e in t)this.style(e,t[e]);else{if(!SVG.regex.isCss.test(t))return this.node.style[camelCase(t)];t=t.split(";");for(var n=0;n<t.length;n++)e=t[n].split(":"),this.style(e[0].replace(/\s+/g,""),e[1])}else this.node.style[camelCase(t)]=null===e||SVG.regex.isBlank.test(e)?"":e;return this},id:function(t){return this.attr("id",t)},bbox:function(){return new SVG.BBox(this)},rbox:function(){return new SVG.RBox(this)},inside:function(t,e){var n=this.bbox();return t>n.x&&e>n.y&&t<n.x+n.width&&e<n.y+n.height},show:function(){return this.style("display","")},hide:function(){return this.style("display","none")},visible:function(){return"none"!=this.style("display")},toString:function(){return this.attr("id")},classes:function(){var t=this.node.getAttribute("class");return null===t?[]:t.trim().split(/\s+/)},hasClass:function(t){return-1!=this.classes().indexOf(t)},addClass:function(t){var e;return this.hasClass(t)||((e=this.classes()).push(t),this.node.setAttribute("class",e.join(" "))),this},removeClass:function(t){var e;return this.hasClass(t)&&(e=this.classes().filter(function(e){return e!=t}),this.node.setAttribute("class",e.join(" "))),this},toggleClass:function(t){return this.hasClass(t)?this.removeClass(t):this.addClass(t),this},reference:function(t){return SVG.get(this.attr()[t])},_parent:function(t){for(var e=this;null!=e&&!(e instanceof t);)e=e.parent;return e}}}),SVG.Parent=SVG.invent({create:function(t){this.constructor.call(this,t)},inherit:SVG.Element,extend:{children:function(){return this._children||(this._children=[])},add:function(t,e){return this.has(t)||(e=null==e?this.children().length:e,t.parent&&t.parent.children().splice(t.parent.index(t),1),this.children().splice(e,0,t),this.node.insertBefore(t.node,this.node.childNodes[e]||null),t.parent=this),this._defs&&(this.node.removeChild(this._defs.node),this.node.appendChild(this._defs.node)),this},put:function(t,e){return this.add(t,e),t},has:function(t){return this.index(t)>=0},index:function(t){return this.children().indexOf(t)},get:function(t){return this.children()[t]},first:function(){return this.children()[0]},last:function(){return this.children()[this.children().length-1]},each:function(t,e){var n,r,i=this.children();for(n=0,r=i.length;n<r;n++)i[n]instanceof SVG.Element&&t.apply(i[n],[n,i]),e&&i[n]instanceof SVG.Container&&i[n].each(t,e);return this},removeElement:function(t){return this.children().splice(this.index(t),1),this.node.removeChild(t.node),t.parent=null,this},clear:function(){for(var t=this.children().length-1;t>=0;t--)this.removeElement(this.children()[t]);return this._defs&&this._defs.clear(),this},defs:function(){return this.doc().defs()}}}),SVG.Container=SVG.invent({create:function(t){this.constructor.call(this,t)},inherit:SVG.Parent,extend:{viewbox:function(t){return 0==arguments.length?new SVG.ViewBox(this):(t=1==arguments.length?[t.x,t.y,t.width,t.height]:[].slice.call(arguments),this.attr("viewBox",t))}}}),SVG.FX=SVG.invent({create:function(t){this.target=t},extend:{animate:function(t,e,n){var r,i,o,a,s=this.target,u=this;return"object"==(void 0===t?"undefined":(0,_typeof3.default)(t))&&(n=t.delay,e=t.ease,t=t.duration),t="="==t?t:null==t?1e3:new SVG.Number(t).valueOf(),e=e||"<>",u.to=function(t){var n;if(t=t<0?0:t>1?1:t,null==r){for(a in r=[],u.attrs)r.push(a);if(s.morphArray&&(u._plot||r.indexOf("points")>-1)){var c,l=new s.morphArray(u._plot||u.attrs.points||s.array);u._size&&l.size(u._size.width.to,u._size.height.to),c=l.bbox(),u._x?l.move(u._x.to,c.y):u._cx&&l.move(u._cx.to-c.width/2,c.y),c=l.bbox(),u._y?l.move(c.x,u._y.to):u._cy&&l.move(c.x,u._cy.to-c.height/2),delete u._x,delete u._y,delete u._cx,delete u._cy,delete u._size,u._plot=s.array.morph(l)}}if(null==i)for(a in i=[],u.trans)i.push(a);if(null==o)for(a in o=[],u.styles)o.push(a);for(t="<>"==e?-Math.cos(t*Math.PI)/2+.5:">"==e?Math.sin(t*Math.PI/2):"<"==e?1-Math.cos(t*Math.PI/2):"-"==e?t:"function"==typeof e?e(t):t,u._plot?s.plot(u._plot.at(t)):(u._x?s.x(u._x.at(t)):u._cx&&s.cx(u._cx.at(t)),u._y?s.y(u._y.at(t)):u._cy&&s.cy(u._cy.at(t)),u._size&&s.size(u._size.width.at(t),u._size.height.at(t))),u._viewbox&&s.viewbox(u._viewbox.x.at(t),u._viewbox.y.at(t),u._viewbox.width.at(t),u._viewbox.height.at(t)),u._leading&&s.leading(u._leading.at(t)),n=r.length-1;n>=0;n--)s.attr(r[n],at(u.attrs[r[n]],t));for(n=i.length-1;n>=0;n--)s.transform(i[n],at(u.trans[i[n]],t));for(n=o.length-1;n>=0;n--)s.style(o[n],at(u.styles[o[n]],t));u._during&&u._during.call(s,t,function(e,n){return at({from:e,to:n},t)})},"number"==typeof t&&(this.timeout=svgSetTimeout(function(){var r=(new Date).getTime();u.situation={interval:1e3/60,start:r,play:!0,finish:r+t,duration:t},u.render=function(){if(!0===u.situation.play){var r=(new Date).getTime(),i=r>u.situation.finish?1:(r-u.situation.start)/t;u.to(i),r>u.situation.finish?(u._plot&&s.plot(new SVG.PointArray(u._plot.destination).settle()),!0===u._loop||"number"==typeof u._loop&&u._loop>1?("number"==typeof u._loop&&--u._loop,u.animate(t,e,n)):u._after?u._after.apply(s,[u]):u.stop()):requestAnimationFrame(u.render)}},u.render()},new SVG.Number(n).valueOf())),this},bbox:function(){return this.target.bbox()},attr:function(t,e){if("object"==(void 0===t?"undefined":(0,_typeof3.default)(t)))for(var n in t)this.attr(n,t[n]);else{var r=this.target.attr(t);this.attrs[t]=SVG.Color.isColor(r)?new SVG.Color(r).morph(e):SVG.regex.unit.test(r)?new SVG.Number(r).morph(e):{from:r,to:e}}return this},transform:function(t,e){if(1==arguments.length)for(e in delete(t=parseMatrix(t)).matrix,t)this.trans[e]={from:this.target.trans[e],to:t[e]};else{var n={};n[t]=e,this.transform(n)}return this},style:function(t,e){if("object"==(void 0===t?"undefined":(0,_typeof3.default)(t)))for(var n in t)this.style(n,t[n]);else this.styles[t]={from:this.target.style(t),to:e};return this},x:function(t){return this._x=new SVG.Number(this.target.x()).morph(t),this},y:function(t){return this._y=new SVG.Number(this.target.y()).morph(t),this},cx:function(t){return this._cx=new SVG.Number(this.target.cx()).morph(t),this},cy:function(t){return this._cy=new SVG.Number(this.target.cy()).morph(t),this},move:function(t,e){return this.x(t).y(e)},center:function(t,e){return this.cx(t).cy(e)},size:function(t,e){if(this.target instanceof SVG.Text)this.attr("font-size",t);else{var n=this.target.bbox();this._size={width:new SVG.Number(n.width).morph(t),height:new SVG.Number(n.height).morph(e)}}return this},plot:function(t){return this._plot=t,this},leading:function(t){return this.target._leading&&(this._leading=new SVG.Number(this.target._leading).morph(t)),this},viewbox:function(t,e,n,r){if(this.target instanceof SVG.Container){var i=this.target.viewbox();this._viewbox={x:new SVG.Number(i.x).morph(t),y:new SVG.Number(i.y).morph(e),width:new SVG.Number(i.width).morph(n),height:new SVG.Number(i.height).morph(r)}}return this},update:function(t){return this.target instanceof SVG.Stop&&(null!=t.opacity&&this.attr("stop-opacity",t.opacity),null!=t.color&&this.attr("stop-color",t.color),null!=t.offset&&this.attr("offset",new SVG.Number(t.offset))),this},during:function(t){return this._during=t,this},after:function(t){return this._after=t,this},loop:function(t){return this._loop=t||!0,this},stop:function(t){return!0===t?(this.animate(0),this._after&&this._after.apply(this.target,[this])):(svgClearTimeout(this.timeout),this.attrs={},this.trans={},this.styles={},this.situation={},delete this._x,delete this._y,delete this._cx,delete this._cy,delete this._size,delete this._plot,delete this._loop,delete this._after,delete this._during,delete this._leading,delete this._viewbox),this},pause:function(){return!0===this.situation.play&&(this.situation.play=!1,this.situation.pause=(new Date).getTime()),this},play:function(){if(!1===this.situation.play){var t=(new Date).getTime()-this.situation.pause;this.situation.finish+=t,this.situation.start+=t,this.situation.play=!0,this.render()}return this}},parent:SVG.Element,construct:{animate:function(t,e,n){return(this.fx||(this.fx=new SVG.FX(this))).stop().animate(t,e,n)},stop:function(t){return this.fx&&this.fx.stop(t),this},pause:function(){return this.fx&&this.fx.pause(),this},play:function(){return this.fx&&this.fx.play(),this}}}),SVG.extend(SVG.Element,SVG.FX,{dx:function(t){return this.x((this.target||this).x()+t)},dy:function(t){return this.y((this.target||this).y()+t)},dmove:function(t,e){return this.dx(t).dy(e)}}),["click","dblclick","mousedown","mouseup","mouseover","mouseout","mousemove","touchstart","touchmove","touchleave","touchend","touchcancel"].forEach(function(t){SVG.Element.prototype[t]=function(e){var n=this;return this.node["on"+t]="function"==typeof e?function(){return e.apply(n,arguments)}:null,this}}),SVG.events={},SVG.listeners=[],SVG.handlerMap=[],SVG.listenerId=0,SVG.registerEvent=function(t){SVG.events[t]||(SVG.events[t]=new CustomEvent(t))},SVG.on=function(t,e,n,r){var i=n.bind(r||t.instance||t),o=(SVG.handlerMap.indexOf(t)+1||SVG.handlerMap.push(t))-1,a=e.split(".")[0],s=e.split(".")[1]||"*";SVG.listeners[o]=SVG.listeners[o]||{},SVG.listeners[o][a]=SVG.listeners[o][a]||{},SVG.listeners[o][a][s]=SVG.listeners[o][a][s]||{},n._svgjsListenerId||(n._svgjsListenerId=++SVG.listenerId),SVG.listeners[o][a][s][n._svgjsListenerId]=i,t.addEventListener(a,i,!1)},SVG.off=function(t,e,n){var r=SVG.handlerMap.indexOf(t),i=e&&e.split(".")[0],o=e&&e.split(".")[1];if(-1!=r)if(n){if("function"==typeof n&&(n=n._svgjsListenerId),!n)return;SVG.listeners[r][i]&&SVG.listeners[r][i][o||"*"]&&(t.removeEventListener(i,SVG.listeners[r][i][o||"*"][n],!1),delete SVG.listeners[r][i][o||"*"][n])}else if(o&&i){if(SVG.listeners[r][i]&&SVG.listeners[r][i][o]){for(n in SVG.listeners[r][i][o])SVG.off(t,[i,o].join("."),n);delete SVG.listeners[r][i][o]}}else if(o)for(e in SVG.listeners[r])for(namespace in SVG.listeners[r][e])o===namespace&&SVG.off(t,[e,o].join("."));else if(i){if(SVG.listeners[r][i]){for(namespace in SVG.listeners[r][i])SVG.off(t,[i,namespace].join("."));delete SVG.listeners[r][i]}}else{for(e in SVG.listeners[r])SVG.off(t,e);delete SVG.listeners[r]}},SVG.extend(SVG.Element,{on:function(t,e){return SVG.on(this.node,t,e),this},off:function(t,e){return SVG.off(this.node,t,e),this}}),SVG.Defs=SVG.invent({create:"defs",inherit:SVG.Container}),SVG.G=SVG.invent({create:"g",inherit:SVG.Container,extend:{x:function(t){return null==t?this.trans.x:this.transform("x",t)},y:function(t){return null==t?this.trans.y:this.transform("y",t)},cx:function(t){return null==t?this.bbox().cx:this.x(t-this.bbox().width/2)},cy:function(t){return null==t?this.bbox().cy:this.y(t-this.bbox().height/2)}},construct:{group:function(){return this.put(new SVG.G)}}}),SVG.extend(SVG.Element,{siblings:function(){return this.parent.children()},position:function(){return this.parent.index(this)},next:function(){return this.siblings()[this.position()+1]},previous:function(){return this.siblings()[this.position()-1]},forward:function(){var t=this.position();return this.parent.removeElement(this).put(this,t+1)},backward:function(){var t=this.position();return t>0&&this.parent.removeElement(this).add(this,t-1),this},front:function(){return this.parent.removeElement(this).put(this)},back:function(){return this.position()>0&&this.parent.removeElement(this).add(this,0),this},before:function(t){t.remove();var e=this.position();return this.parent.add(t,e),this},after:function(t){t.remove();var e=this.position();return this.parent.add(t,e+1),this}}),SVG.Mask=SVG.invent({create:function(){this.constructor.call(this,SVG.create("mask")),this.targets=[]},inherit:SVG.Container,extend:{remove:function(){for(var t=this.targets.length-1;t>=0;t--)this.targets[t]&&this.targets[t].unmask();return delete this.targets,this.parent.removeElement(this),this}},construct:{mask:function(){return this.defs().put(new SVG.Mask)}}}),SVG.extend(SVG.Element,{maskWith:function(t){return this.masker=t instanceof SVG.Mask?t:this.parent.mask().add(t),this.masker.targets.push(this),this.attr("mask",'url("#'+this.masker.attr("id")+'")')},unmask:function(){return delete this.masker,this.attr("mask",null)}}),SVG.Clip=SVG.invent({create:function(){this.constructor.call(this,SVG.create("clipPath")),this.targets=[]},inherit:SVG.Container,extend:{remove:function(){for(var t=this.targets.length-1;t>=0;t--)this.targets[t]&&this.targets[t].unclip();return delete this.targets,this.parent.removeElement(this),this}},construct:{clip:function(){return this.defs().put(new SVG.Clip)}}}),SVG.extend(SVG.Element,{clipWith:function(t){return this.clipper=t instanceof SVG.Clip?t:this.parent.clip().add(t),this.clipper.targets.push(this),this.attr("clip-path",'url("#'+this.clipper.attr("id")+'")')},unclip:function(){return delete this.clipper,this.attr("clip-path",null)}}),SVG.Gradient=SVG.invent({create:function(t){this.constructor.call(this,SVG.create(t+"Gradient")),this.type=t},inherit:SVG.Container,extend:{from:function(t,e){return"radial"==this.type?this.attr({fx:new SVG.Number(t),fy:new SVG.Number(e)}):this.attr({x1:new SVG.Number(t),y1:new SVG.Number(e)})},to:function(t,e){return"radial"==this.type?this.attr({cx:new SVG.Number(t),cy:new SVG.Number(e)}):this.attr({x2:new SVG.Number(t),y2:new SVG.Number(e)})},radius:function(t){return"radial"==this.type?this.attr({r:new SVG.Number(t)}):this},at:function(t,e,n){return this.put(new SVG.Stop).update(t,e,n)},update:function(t){return this.clear(),"function"==typeof t&&t.call(this,this),this},fill:function(){return"url(#"+this.id()+")"},toString:function(){return this.fill()}},construct:{gradient:function(t,e){return this.defs().gradient(t,e)}}}),SVG.extend(SVG.Defs,{gradient:function(t,e){return this.put(new SVG.Gradient(t)).update(e)}}),SVG.Stop=SVG.invent({create:"stop",inherit:SVG.Element,extend:{update:function(t){return("number"==typeof t||t instanceof SVG.Number)&&(t={offset:arguments[0],color:arguments[1],opacity:arguments[2]}),null!=t.opacity&&this.attr("stop-opacity",t.opacity),null!=t.color&&this.attr("stop-color",t.color),null!=t.offset&&this.attr("offset",new SVG.Number(t.offset)),this}}}),SVG.Pattern=SVG.invent({create:"pattern",inherit:SVG.Container,extend:{fill:function(){return"url(#"+this.id()+")"},update:function(t){return this.clear(),"function"==typeof t&&t.call(this,this),this},toString:function(){return this.fill()}},construct:{pattern:function(t,e,n){return this.defs().pattern(t,e,n)}}}),SVG.extend(SVG.Defs,{pattern:function(t,e,n){return this.put(new SVG.Pattern).update(n).attr({x:0,y:0,width:t,height:e,patternUnits:"userSpaceOnUse"})}}),SVG.Doc=SVG.invent({create:function(t){this.parent="string"==typeof t?document.getElementById(t):t,this.constructor.call(this,"svg"==this.parent.nodeName?this.parent:SVG.create("svg")),this.attr({xmlns:SVG.ns,version:"1.1",width:"100%",height:"100%"}).attr("xmlns:xlink",SVG.xlink,SVG.xmlns),this._defs=new SVG.Defs,this._defs.parent=this,this.node.appendChild(this._defs.node),this.doSpof=!1,this.parent!=this.node&&this.stage()},inherit:SVG.Container,extend:{stage:function(){var t=this;return this.parent.appendChild(this.node),t.spof(),SVG.on(window,"resize",function(){t.spof()}),this},defs:function(){return this._defs},spof:function(){if(this.doSpof){var t=this.node.getScreenCTM();t&&this.style("left",-t.e%1+"px").style("top",-t.f%1+"px")}return this},fixSubPixelOffset:function(){return this.doSpof=!0,this}}}),SVG.Shape=SVG.invent({create:function(t){this.constructor.call(this,t)},inherit:SVG.Element}),SVG.Symbol=SVG.invent({create:"symbol",inherit:SVG.Container,construct:{symbol:function(){return this.defs().put(new SVG.Symbol)}}}),SVG.Use=SVG.invent({create:"use",inherit:SVG.Shape,extend:{element:function(t){return this.target=t,this.attr("href","#"+t,SVG.xlink)}},construct:{use:function(t){return this.put(new SVG.Use).element(t)}}}),SVG.Rect=SVG.invent({create:"rect",inherit:SVG.Shape,construct:{rect:function(t,e){return this.put((new SVG.Rect).size(t,e))}}}),SVG.Ellipse=SVG.invent({create:"ellipse",inherit:SVG.Shape,extend:{x:function(t){return null==t?this.cx()-this.attr("rx"):this.cx(t+this.attr("rx"))},y:function(t){return null==t?this.cy()-this.attr("ry"):this.cy(t+this.attr("ry"))},cx:function(t){return null==t?this.attr("cx"):this.attr("cx",new SVG.Number(t).divide(this.trans.scaleX))},cy:function(t){return null==t?this.attr("cy"):this.attr("cy",new SVG.Number(t).divide(this.trans.scaleY))},width:function(t){return null==t?2*this.attr("rx"):this.attr("rx",new SVG.Number(t).divide(2))},height:function(t){return null==t?2*this.attr("ry"):this.attr("ry",new SVG.Number(t).divide(2))},size:function(t,e){var n=proportionalSize(this.bbox(),t,e);return this.attr({rx:new SVG.Number(n.width).divide(2),ry:new SVG.Number(n.height).divide(2)})}},construct:{circle:function(t){return this.ellipse(t,t)},ellipse:function(t,e){return this.put(new SVG.Ellipse).size(t,e).move(0,0)}}}),SVG.Line=SVG.invent({create:"line",inherit:SVG.Shape,extend:{x:function(t){var e=this.bbox();return null==t?e.x:this.attr({x1:this.attr("x1")-e.x+t,x2:this.attr("x2")-e.x+t})},y:function(t){var e=this.bbox();return null==t?e.y:this.attr({y1:this.attr("y1")-e.y+t,y2:this.attr("y2")-e.y+t})},cx:function(t){var e=this.bbox().width/2;return null==t?this.x()+e:this.x(t-e)},cy:function(t){var e=this.bbox().height/2;return null==t?this.y()+e:this.y(t-e)},width:function(t){var e=this.bbox();return null==t?e.width:this.attr(this.attr("x1")<this.attr("x2")?"x2":"x1",e.x+t)},height:function(t){var e=this.bbox();return null==t?e.height:this.attr(this.attr("y1")<this.attr("y2")?"y2":"y1",e.y+t)},size:function(t,e){var n=proportionalSize(this.bbox(),t,e);return this.width(n.width).height(n.height)},plot:function(t,e,n,r){return this.attr({x1:t,y1:e,x2:n,y2:r})}},construct:{line:function(t,e,n,r){return this.put((new SVG.Line).plot(t,e,n,r))}}}),SVG.Polyline=SVG.invent({create:"polyline",inherit:SVG.Shape,construct:{polyline:function(t){return this.put(new SVG.Polyline).plot(t)}}}),SVG.Polygon=SVG.invent({create:"polygon",inherit:SVG.Shape,construct:{polygon:function(t){return this.put(new SVG.Polygon).plot(t)}}}),SVG.extend(SVG.Polyline,SVG.Polygon,{morphArray:SVG.PointArray,plot:function(t){return this.attr("points",this.array=new SVG.PointArray(t,[[0,0]]))},move:function(t,e){return this.attr("points",this.array.move(t,e))},x:function(t){return null==t?this.bbox().x:this.move(t,this.bbox().y)},y:function(t){return null==t?this.bbox().y:this.move(this.bbox().x,t)},width:function(t){var e=this.bbox();return null==t?e.width:this.size(t,e.height)},height:function(t){var e=this.bbox();return null==t?e.height:this.size(e.width,t)},size:function(t,e){var n=proportionalSize(this.bbox(),t,e);return this.attr("points",this.array.size(n.width,n.height))}}),SVG.Path=SVG.invent({create:"path",inherit:SVG.Shape,extend:{plot:function(t){return this.attr("d",this.array=new SVG.PathArray(t,[["M",0,0]]))},move:function(t,e){return this.attr("d",this.array.move(t,e))},x:function(t){return null==t?this.bbox().x:this.move(t,this.bbox().y)},y:function(t){return null==t?this.bbox().y:this.move(this.bbox().x,t)},size:function(t,e){var n=proportionalSize(this.bbox(),t,e);return this.attr("d",this.array.size(n.width,n.height))},width:function(t){return null==t?this.bbox().width:this.size(t,this.bbox().height)},height:function(t){return null==t?this.bbox().height:this.size(this.bbox().width,t)}},construct:{path:function(t){return this.put(new SVG.Path).plot(t)}}}),SVG.Image=SVG.invent({create:"image",inherit:SVG.Shape,extend:{load:function(t){if(!t)return this;var e=this,n=document.createElement("img");return n.onload=function(){var r=e.doc(SVG.Pattern);0==e.width()&&0==e.height()&&e.size(n.width,n.height),r&&0==r.width()&&0==r.height()&&r.size(e.width(),e.height()),"function"==typeof e._loaded&&e._loaded.call(e,{width:n.width,height:n.height,ratio:n.width/n.height,url:t})},this.attr("href",n.src=this.src=t,SVG.xlink)},loaded:function(t){return this._loaded=t,this}},construct:{image:function(t,e,n){return this.put(new SVG.Image).load(t).size(e||0,n||e||0)}}}),SVG.Text=SVG.invent({create:function(){this.constructor.call(this,SVG.create("text")),this._leading=new SVG.Number(1.3),this._rebuild=!0,this._build=!1,this.attr("font-family",SVG.defaults.attrs["font-family"])},inherit:SVG.Shape,extend:{x:function(t){return null==t?this.attr("x"):(this.textPath||this.lines.each(function(){this.newLined&&this.x(t)}),this.attr("x",t))},y:function(t){var e=this.attr("y"),n="number"==typeof e?e-this.bbox().y:0;return null==t?"number"==typeof e?e-n:e:this.attr("y","number"==typeof t?t+n:t)},cx:function(t){return null==t?this.bbox().cx:this.x(t-this.bbox().width/2)},cy:function(t){return null==t?this.bbox().cy:this.y(t-this.bbox().height/2)},text:function(t){if(void 0===t)return this.content;if(this.clear().build(!0),"function"==typeof t)t.call(this,this);else for(var e=0,n=(t=(this.content=t).split("\n")).length;e<n;e++)this.tspan(t[e]).newLine();return this.build(!1).rebuild()},size:function(t){return this.attr("font-size",t).rebuild()},leading:function(t){return null==t?this._leading:(this._leading=new SVG.Number(t),this.rebuild())},rebuild:function(t){if("boolean"==typeof t&&(this._rebuild=t),this._rebuild){var e=this;this.lines.each(function(){this.newLined&&(this.textPath||this.attr("x",e.attr("x")),this.attr("dy",e._leading*new SVG.Number(e.attr("font-size"))))})}return this},build:function(t){return this._build=!!t,this}},construct:{text:function(t){return this.put(new SVG.Text).text(t)},plain:function(t){return this.put(new SVG.Text).plain(t)}}}),SVG.TSpan=SVG.invent({create:"tspan",inherit:SVG.Shape,extend:{text:function(t){return"function"==typeof t?t.call(this,this):this.plain(t),this},dx:function(t){return this.attr("dx",t)},dy:function(t){return this.attr("dy",t)},newLine:function(){var t=this.doc(SVG.Text);return this.newLined=!0,this.dy(t._leading*t.attr("font-size")).attr("x",t.x())}}}),SVG.extend(SVG.Text,SVG.TSpan,{plain:function(t){return!1===this._build&&this.clear(),this.node.appendChild(document.createTextNode(this.content=t)),this},tspan:function(t){var e=(this.textPath||this).node,n=new SVG.TSpan;return!1===this._build&&this.clear(),e.appendChild(n.node),n.parent=this,this instanceof SVG.Text&&this.lines.add(n),n.text(t)},clear:function(){for(var t=(this.textPath||this).node;t.hasChildNodes();)t.removeChild(t.lastChild);return this instanceof SVG.Text&&(delete this.lines,this.lines=new SVG.Set,this.content=""),this},length:function(){return this.node.getComputedTextLength()}}),SVG.TextPath=SVG.invent({create:"textPath",inherit:SVG.Element,parent:SVG.Text,construct:{path:function(t){for(this.textPath=new SVG.TextPath;this.node.hasChildNodes();)this.textPath.node.appendChild(this.node.firstChild);return this.node.appendChild(this.textPath.node),this.track=this.doc().defs().path(t),this.textPath.parent=this,this.textPath.attr("href","#"+this.track,SVG.xlink),this},plot:function(t){return this.track&&this.track.plot(t),this}}}),SVG.Nested=SVG.invent({create:function(){this.constructor.call(this,SVG.create("svg")),this.style("overflow","visible")},inherit:SVG.Container,construct:{nested:function(){return this.put(new SVG.Nested)}}}),SVG.A=SVG.invent({create:"a",inherit:SVG.Container,extend:{to:function(t){return this.attr("href",t,SVG.xlink)},show:function(t){return this.attr("show",t,SVG.xlink)},target:function(t){return this.attr("target",t)}},construct:{link:function(t){return this.put(new SVG.A).to(t)}}}),SVG.extend(SVG.Element,{linkTo:function(t){var e=new SVG.A;return"function"==typeof t?t.call(e,e):e.to(t),this.parent.put(e).put(this)}}),SVG.Marker=SVG.invent({create:"marker",inherit:SVG.Container,extend:{width:function(t){return this.attr("markerWidth",t)},height:function(t){return this.attr("markerHeight",t)},ref:function(t,e){return this.attr("refX",t).attr("refY",e)},update:function(t){return this.clear(),"function"==typeof t&&t.call(this,this),this},toString:function(){return"url(#"+this.id()+")"}},construct:{marker:function(t,e,n){return this.defs().marker(t,e,n)}}}),SVG.extend(SVG.Defs,{marker:function(t,e,n){return this.put(new SVG.Marker).size(t,e).ref(t/2,e/2).viewbox(0,0,t,e).attr("orient","auto").update(n)}}),SVG.extend(SVG.Line,SVG.Polyline,SVG.Polygon,SVG.Path,{marker:function(t,e,n,r){var i=["marker"];return"all"!=t&&i.push(t),i=i.join("-"),t=arguments[1]instanceof SVG.Marker?arguments[1]:this.doc().marker(e,n,r),this.attr(i,t)}});var sugar={stroke:["color","width","opacity","linecap","linejoin","miterlimit","dasharray","dashoffset"],fill:["color","opacity","rule"],prefix:function(t,e){return"color"==e?t:t+"-"+e}},svgSetTimeout,svgClearTimeout;function camelCase(t){return t.toLowerCase().replace(/-(.)/g,function(t,e){return e.toUpperCase()})}function fullHex(t){return 4==t.length?["#",t.substring(1,2),t.substring(1,2),t.substring(2,3),t.substring(2,3),t.substring(3,4),t.substring(3,4)].join(""):t}function compToHex(t){var e=t.toString(16);return 1==e.length?"0"+e:e}function proportionalSize(t,e,n){return null!=e&&null!=n||(null==n?n=t.height/t.width*e:null==e&&(e=t.width/t.height*n)),{width:e,height:n}}function at(t,e){return"number"==typeof t.from?t.from+(t.to-t.from)*e:t instanceof SVG.Color||t instanceof SVG.Number?t.at(e):e<1?t.from:t.to}function arrayToString(t){for(var e=0,n=t.length,r="";e<n;e++)r+=t[e][0],null!=t[e][1]&&(r+=t[e][1],null!=t[e][2]&&(r+=" ",r+=t[e][2],null!=t[e][3]&&(r+=" ",r+=t[e][3],r+=" ",r+=t[e][4],null!=t[e][5]&&(r+=" ",r+=t[e][5],r+=" ",r+=t[e][6],null!=t[e][7]&&(r+=" ",r+=t[e][7])))));return r+" "}function boxProperties(t){t.x2=t.x+t.width,t.y2=t.y+t.height,t.cx=t.x+t.width/2,t.cy=t.y+t.height/2}function parseMatrix(t){if(t.matrix){var e=t.matrix.replace(/\s/g,"").split(",");6==e.length&&(t.a=parseFloat(e[0]),t.b=parseFloat(e[1]),t.c=parseFloat(e[2]),t.d=parseFloat(e[3]),t.e=parseFloat(e[4]),t.f=parseFloat(e[5]))}return t}function idFromReference(t){var e=t.toString().match(SVG.regex.reference);if(e)return e[1]}["fill","stroke"].forEach(function(t){var e,n={};n[t]=function(n){if("string"==typeof n||SVG.Color.isRgb(n)||n&&"function"==typeof n.fill)this.attr(t,n);else for(e=sugar[t].length-1;e>=0;e--)null!=n[sugar[t][e]]&&this.attr(sugar.prefix(t,sugar[t][e]),n[sugar[t][e]]);return this},SVG.extend(SVG.Element,SVG.FX,n)}),SVG.extend(SVG.Element,SVG.FX,{rotate:function(t,e,n){return this.transform({rotation:t||0,cx:e,cy:n})},skew:function(t,e){return this.transform({skewX:t||0,skewY:e||0})},scale:function(t,e){return this.transform({scaleX:t,scaleY:null==e?t:e})},translate:function(t,e){return this.transform({x:t,y:e})},matrix:function(t){return this.transform({matrix:t})},opacity:function(t){return this.attr("opacity",t)}}),SVG.extend(SVG.Rect,SVG.Ellipse,SVG.FX,{radius:function(t,e){return this.attr({rx:t,ry:e||t})}}),SVG.extend(SVG.Path,{length:function(){return this.node.getTotalLength()},pointAt:function(t){return this.node.getPointAtLength(t)}}),SVG.extend(SVG.Parent,SVG.Text,SVG.FX,{font:function(t){for(var e in t)"leading"==e?this.leading(t[e]):"anchor"==e?this.attr("text-anchor",t[e]):"size"==e||"family"==e||"weight"==e||"stretch"==e||"variant"==e||"style"==e?this.attr("font-"+e,t[e]):this.attr(e,t[e]);return this}}),SVG.Set=SVG.invent({create:function(){this.clear()},extend:{add:function(){var t,e,n=[].slice.call(arguments);for(t=0,e=n.length;t<e;t++)this.members.push(n[t]);return this},remove:function(t){var e=this.index(t);return e>-1&&this.members.splice(e,1),this},each:function(t){for(var e=0,n=this.members.length;e<n;e++)t.apply(this.members[e],[e,this.members]);return this},clear:function(){return this.members=[],this},has:function(t){return this.index(t)>=0},index:function(t){return this.members.indexOf(t)},get:function(t){return this.members[t]},first:function(){return this.get(0)},last:function(){return this.get(this.members.length-1)},valueOf:function(){return this.members},bbox:function(){var t=new SVG.BBox;if(0==this.members.length)return t;var e=this.members[0].rbox();return t.x=e.x,t.y=e.y,t.width=e.width,t.height=e.height,this.each(function(){t=t.merge(this.rbox())}),t}},construct:{set:function(){return new SVG.Set}}}),SVG.SetFX=SVG.invent({create:function(t){this.set=t}}),SVG.Set.inherit=function(){var t=[];for(var e in SVG.Shape.prototype)"function"==typeof SVG.Shape.prototype[e]&&"function"!=typeof SVG.Set.prototype[e]&&t.push(e);for(var e in t.forEach(function(t){SVG.Set.prototype[t]=function(){for(var e=0,n=this.members.length;e<n;e++)this.members[e]&&"function"==typeof this.members[e][t]&&this.members[e][t].apply(this.members[e],arguments);return"animate"==t?this.fx||(this.fx=new SVG.SetFX(this)):this}}),t=[],SVG.FX.prototype)"function"==typeof SVG.FX.prototype[e]&&"function"!=typeof SVG.SetFX.prototype[e]&&t.push(e);t.forEach(function(t){SVG.SetFX.prototype[t]=function(){for(var e=0,n=this.set.members.length;e<n;e++)this.set.members[e].fx[t].apply(this.set.members[e].fx,arguments);return this}})},SVG.extend(SVG.Element,{data:function(t,e,n){if("object"==(void 0===t?"undefined":(0,_typeof3.default)(t)))for(e in t)this.data(e,t[e]);else if(arguments.length<2)try{return JSON.parse(this.attr("data-"+t))}catch(e){return this.attr("data-"+t)}else this.attr("data-"+t,null===e?null:!0===n||"string"==typeof e||"number"==typeof e?e:(0,_stringify2.default)(e));return this}}),SVG.extend(SVG.Element,{remember:function(t,e){if("object"==(0,_typeof3.default)(arguments[0]))for(var e in t)this.remember(e,t[e]);else{if(1==arguments.length)return this.memory()[t];this.memory()[t]=e}return this},forget:function(){if(0==arguments.length)this._memory={};else for(var t=arguments.length-1;t>=0;t--)delete this.memory()[arguments[t]];return this},memory:function(){return this._memory||(this._memory={})}}),__WEBPACK_AMD_DEFINE_RESULT__=function(){return SVG}.call(exports,__webpack_require__,exports,module),void 0===__WEBPACK_AMD_DEFINE_RESULT__||(module.exports=__WEBPACK_AMD_DEFINE_RESULT__),function(t){for(var e,n,r,i=0,o=["moz","webkit"],a=window.requestAnimationFrame,s=window.cancelAnimationFrame,u=0;u<o.length&&!window.requestAnimationFrame;++u)a=t[o[u]+"RequestAnimationFrame"],s=t[o[u]+"CancelAnimationFrame"]||t[o[u]+"CancelRequestAnimationFrame"];a=a||function(e){var n=(new Date).getTime(),r=Math.max(0,16-(n-i)),o=t.setTimeout(function(){e(n+r)},r);return i=n+r,o},s=s||t.clearTimeout,n={},r=0,t.requestAnimationFrame=function(t){if(!n[t._animId]&&"function"==typeof t)return t._animId=r++,n[t._animId]=t,e||(e=a(function(){var t=[];for(var r in n)t.push(n[r]);n={},e=void 0,t.forEach(function(t){t()})})),t._animId},t.cancelAnimationFrame=function(t){return delete n[t]}}(window),function(){var taskQueue=[],seq=0,isWaitOrRuning=!1;svgSetTimeout=function svgSetTimeout(func,delay){return 0===delay?(func._taskSeq=seq.toString(),seq++,taskQueue.push(func),isWaitOrRuning||(isWaitOrRuning=!0,_promise2.default.resolve().then(function(){for(var task=0;taskQueue.length>0;)if(task=taskQueue.shift(),"function"==typeof task)task();else{if("string"!=typeof task)throw new Error(task.toString()+"is illegal parameter of svgSetTimeout");eval(task)}isWaitOrRuning=!1})),func._taskSeq):setTimeout(func,delay)},svgClearTimeout=function(t){var e;if(taskQueue.some(function(n,r){if(n._taskSeq===t)return e=r,!0}))taskQueue.splice(e,1);else if("number"==typeof t)return clearTimeout(t)}}()}(global)}).call(exports,__webpack_require__(6))},function(t,e,n){"use strict";var r,i=u(n(35)),o=u(n(11)),a=u(n(3)),s=n(140);function u(t){return t&&t.__esModule?t:{default:t}}var c=n(51),l=n(5),h=n(66),d=n(256),f=n(1),p=n(16),g=n(142),v=n(0),m=v.TOPIC_TYPE,y=v.EVENTS,_=v.MODEL_TYPE,E=v.INFOITEM_TYPE_SHORT,A=v.INFOITEM_TYPE_FULL,S=v.LANGS,T=[m.ATTACHED,m.SUMMARY,m.DETACHED,m.CALLOUT],x=((r={})[E.LABEL]={newTypeName:A.LABEL,defaultMode:"card"},r[E.HREF]={newTypeName:A.HREF,defaultMode:"icon"},r[E.NOTE]={newTypeName:A.NOTE,defaultMode:"icon"},r[E.TASK]={newTypeName:A.TASK,defaultMode:"icon"},r[E.AUDIO]={newTypeName:A.AUDIO,defaultMode:"icon"},r),b=c.extend({componentType:_.SHEET,modelEvents:{topicAddMarker:"topicAddMarker",topicChangeMarker:"topicChangeMarker",topicRemoveMarker:"topicRemoveMarker"},initialize:function(t){var e=this;arguments.length>1&&void 0!==arguments[1]&&arguments[1],this.set(t),this._idMap={},this._sheetComponentFactory=new d(this),this.eventBus=(0,a.default)({},p.Events),this._undo=new s.Undo({limit:1/0}),this._undo.on(y.UNDO_STATE_CHANGE,function(){return e.trigger(y.UNDO_STATE_CHANGE)}),this.legendModel=null,this.initInnerModel()},setTextTranslator:function(t){this._textTranslator=t},getTranslatedText:function(t){return this._textTranslator?this._textTranslator(t):g.translate(S.ZH_CN,t)},registerComponent:function(t){var e=t.get("id");return this._idMap[e]=!0,this},generateComponentId:function(){for(var t=l.UUID();this._idMap[t];)t=l.UUID();return t},ownerSheet:function(){return this},createComponent:function(){for(var t=this._sheetComponentFactory,e=arguments.length,n=Array(e),r=0;r<e;r++)n[r]=arguments[r];return t.create.apply(t,n)},initInnerModel:function(){var t=this;return this.initLegendModel(),this.rootTopic(h(this.get("rootTopic"),this)),f.each(this.get("relationships"),function(e){if(!f.isEmpty(e)){var n=t.addRelationship(e,!0);n&&e.style&&!f.isEmpty(e.style)&&n.initStyle(e.style)}}),this.enableOldFreePosition(),this.get("style")&&!f.isEmpty(this.get("style"))&&this.initStyle(this.get("style")),this.get("theme")&&!f.isEmpty(this.get("theme"))&&this.addTheme(this.get("theme"),!0),this},initLegendModel:function(){this.legendModel=this.createComponent(_.LEGEND,this.get("legend"),{parentModel:this})},getLegendModel:function(){return this.legendModel},rootTopic:function(t){var e=this,n=function(t){t&&(t._type=m.ROOT,t.parent(e)),e._rootTopic=t,e.trigger("replaceRootTopic",t,e)},r=this._rootTopic||null;return void 0===t?(r||n(r=this.createComponent("topic")),r):(t=t||null)===r?this:(r&&r.parent(null),n(t),this)},relationships:function(){return this._relationships||(this._relationships=[]),this._relationships},addRelationship:function(t,e){var n,r=this,i=void 0,o=void 0,a=void 0;return n=t.cid,i=n?t:this.createComponent("relationship",t),n&&(t=i.toJSON()),o=this.relationships(),e||((a=this.get("relationships"))?a.push(t):this.set("relationships",[t]),this.trigger(y.AFTER_SHEET_CONTENT_CHANGE)),i.parent(this),o.push(i),this.trigger("addRelationship",i,this),e||this.getUndo().add({undo:function(){return r.removeRelationship(i)},redo:function(){return r.addRelationship(i)}},"R-add"),i},removeRelationship:function(t){var e=this,n=this.relationships(),r=n.indexOf(t);return r<0?this:(this.get("relationships").splice(r,1),this.trigger(y.AFTER_SHEET_CONTENT_CHANGE),n.splice(r,1),t.parent(null),this.trigger("removeRelationship",t),this.getUndo().add({undo:function(){return e.addRelationship(t)},redo:function(){return e.removeRelationship(t)}},"R-remove"),this)},theme:function(){return this._theme},_createThemeComponent:function(t){var e=this.createComponent("theme",t);return this.set("theme",e.toJSON()),e},addTheme:function(t,e){var n=this._createThemeComponent(t),r=n.attributes;return f.each(r,function(t,e){f.isEmpty(t)||n.addProperties(e,t)}),this._theme=n,n.parent(this),e||this.trigger("addTheme",n),n},changeTheme:function(t){var e=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=this.theme(),i=void 0;if(this.getUndo().add({undo:function(){e.changeTheme(i,!1)},redo:function(){e.changeTheme(t)}},"changeTheme"),r){i=r.toJSON();var a=this._createThemeComponent(t),s=a.attributes;(0,o.default)(s).forEach(function(t){var e=s[t];f.isEmpty(e)||a.addProperties(t,e)}),this._theme=a,a.parent(this),n.fixUserStyleWhenChangeTheme&&n.fixUserStyleWhenChangeTheme(),this.trigger("changeTheme",a)}else this.addTheme(t);this.set("theme",t),this.trigger(y.AFTER_THEME_CHANGED),this.trigger(y.AFTER_SHEET_CONTENT_CHANGE)},clearAllSelfStyle:function(){for(var t=[this.rootTopic()],e=function(){var e=t.pop();e.summaries().forEach(function(t){return t.setStyleObj(null)}),e.boundaries().forEach(function(t){return t.setStyleObj(null)}),e.setStyleObj(null),T.forEach(function(n){t=t.concat(e.children(n))})};t.length;)e();this.relationships().forEach(function(t){return t.setStyleObj(null)}),this.setStyleObj(null)},haveSelfStyle:function(){for(var t=[this.rootTopic()],e=function(t){return t.some(function(t){return t.style()})},n=function(){var n=t.pop();return n.style()?{v:!0}:e(n.boundaries())||e(n.summaries())?{v:!0}:void T.forEach(function(e){t=t.concat(n.children(e))})};t.length;){var r=n();if("object"===(void 0===r?"undefined":(0,i.default)(r)))return r.v}return e(this.relationships())},styleChanged:function(){var t=this.style();t?this.set("style",t.toJSON()):this.unset("style"),this.trigger(y.AFTER_SHEET_CONTENT_CHANGE)},sheetChanged:function(t){this.set("rootTopic",t.toJSON()),this.trigger(y.AFTER_SHEET_CONTENT_CHANGE)},changeInfoItemDisplay:function(t,e){var n=this,r=this.get("settings");r||(this.set("settings",{"info-items/info-item":[]}),r=this.get("settings")),r["info-items/info-item"]||r["infoItems/infoItem"]||(r["info-items/info-item"]=[]);var i=void 0,o=r["info-items/info-item"]?(i=!0)&&r["info-items/info-item"]:r["infoItems/infoItem"],a=i?x[t].newTypeName:t,s={},u=o.some(function(t){if(t.type===a)return s=t,!0}),c=s.mode;if(c===e)return!1;!c&&(c="icon"),s.mode=e,u||(s.type=a,o.push(s)),this.trigger("change:infoItemDisplay",t,e),this.trigger(y.AFTER_SHEET_CONTENT_CHANGE),this.getUndo().add({undo:function(){n.changeInfoItemDisplay(t,c)},redo:function(){n.changeInfoItemDisplay(t,e)}})},hasAncestor:function(){return!0},getUndo:function(){return this._undo},toggleFreePosition:function(t){var e="free"===this.get("topicPositioning");e&&!(void 0===t?!e:t)&&this.traverseTopic([m.ATTACHED],function(t){var e=t.get("position");e&&e.x&&e.y&&t.changePosition()}),this._changePositioning(t?"free":"fixed")},_changePositioning:function(t){var e=this,n=this.get("topicPositioning");this.set("topicPositioning",t),this.trigger(y.AFTER_SHEET_CONTENT_CHANGE),t===n||!n&&"fixed"===t||this.getUndo().add({undo:function(){e._changePositioning(n)},redo:function(){e._changePositioning(t)}})},isFreePositionEnabled:function(){return"free"===this.get("topicPositioning")},enableOldFreePosition:function(){if(void 0===this.get("topicPositioning")){for(var t=this.rootTopic().children(),e=0;e<t.length;e++)if(t[e].get("position"))return void this.set("topicPositioning","free");this.set("topicPositioning","fixed")}},changeOverlap:function(t){var e,n,r=this,i=this.get("topicOverlapping");(e=t)===(n=i)||!e&&"none"===n||"none"===e&&!n||(this.set("topicOverlapping",t),this.trigger(y.AFTER_SHEET_CONTENT_CHANGE),this.getUndo().add({undo:function(){return r.changeOverlap(i)},redo:function(){return r.changeOverlap(t)}}))},isTopicOverlapping:function(){return"overlap"===this.get("topicOverlapping")},traverseTopic:function(t,e){this.rootTopic().traverseTopic(t,e)},traverseStyleComponent:function(t){for(var e=[this.rootTopic()],n=function(){var n=e.pop();t(n),n.summaries().forEach(function(e){return t(e)}),n.boundaries().forEach(function(e){return t(e)}),T.forEach(function(t){e=e.concat(n.children(t))})};e.length;)n();this.relationships().forEach(function(e){return t(e)}),t(this)},collapseBranchesToLevel:function(t){this.traverseTopic([m.ATTACHED,m.DETACHED,m.SUMMARY,m.CALLOUT],function(e){e.getLayer()===t&&e.collapseBranch()})},extendAllBranches:function(){this.traverseTopic([m.ATTACHED,m.DETACHED,m.SUMMARY,m.CALLOUT],function(t){t.extendBranch()})}});t.exports=b},function(t,e,n){"use strict";var r=n(16),i=n(0),o=n(1),a=n(76),s=a.constructor,u=i.EVENTS,c=i.ACTION_STATUS,l=r.View.extend({initialize:function(t){this._parent=t.parent,this._config=new s,this._config.merge(t)},onGesture:function(t,e,n){throw new Error("must be overrided")},offGesture:function(t,e,n){throw new Error("must be overrided")},onEvent:function(t,e,n){throw new Error("must be overrided")},offEvent:function(t,e,n){throw new Error("must be overrided")},execAction:function(t){throw new Error("must implement execAction function in AbstractEditor")},queryActionStatus:function(t){throw new Error("must implement queryActionStatus in AbstractEditor")},isActionExecutable:function(t){for(var e=arguments.length,n=Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];return this.queryActionStatus.apply(this,arguments)===c.NORMAL},getChildEditors:function(){throw new Error("must implement getChildrenEditor in AbstractEditor")},remove:function(){Array.isArray(this.getChildEditors())&&this.getChildEditors().forEach(function(t){t.remove()}),this.trigger(u.BEFORE_EDITOR_REMOVE,this),l.__super__.remove.apply(this,arguments),this._remove(),this.trigger(u.EDITOR_REMOVED,this)},getSelections:function(){throw new Error("must implement getSelections in AbstractEditor")},_remove:function(){},parent:function(t){if(void 0===t)return this._parent;this._parent=t},config:function(){if(this._config=this._config||new s,o.isObject(arguments.length<=0?void 0:arguments[0]))return this._config.merge(arguments.length<=0?void 0:arguments[0]),this;if(2===arguments.length){var t=arguments.length<=0?void 0:arguments[0],e=arguments.length<=1?void 0:arguments[1];this._config.set(t,e)}else if(1===arguments.length&&"string"==typeof(arguments.length<=0?void 0:arguments[0])){var n=arguments.length<=0?void 0:arguments[0],r=this._config.get(n);return void 0!==r&&null!==r?r:this.parent()?this.parent().config(n):a.get(n)}},getComponentViewById:function(t){},getActiveUIStatus:function(){return[]},getZoomPencentage:function(){throw new Error("must implement it")},getTransform:function(){throw new Error("must implement it")}});t.exports=l},function(t,e,n){"use strict";var r=a(n(17)),i=a(n(3)),o=a(n(11));function a(t){return t&&t.__esModule?t:{default:t}}var s=n(5),u=n(0),c=u.ACTION_STATUS,l=u.EVENTS,h=u.VIEW_TYPE,d=u.MODULE_NAME,f=u.TOPIC_DETACHED,p=n(21),g=n(226),v=c.NORMAL,m=c.DISABLE;t.exports=function(t){var e={selectionExisting:function(){for(var e=arguments.length,n=Array(e),r=0;r<e;r++)n[r]=arguments[r];return function(){var e=t.getModule(d.SELECTION).selections,r=[].concat(e);return n.every(function(t){return r=r.filter(t)}),r.length?v:m}},onlyOneSelection:function(){for(var e=arguments.length,n=Array(e),r=0;r<e;r++)n[r]=arguments[r];return function(){var e=t.getModule(d.SELECTION).selections,r=[].concat(e);return 1!==r.length?m:(n.every(function(t){return r=r.filter(t)}),1===r.length?v:m)}},everySelectionIs:function(){for(var e=arguments.length,n=Array(e),r=0;r<e;r++)n[r]=arguments[r];return function(){var e=t.getModule(d.SELECTION).getSelections();return n.every(function(t){return e.every(t)})?v:m}},extendAction:function(e){var n={preActionMap:e.preActionMap,actionMap:{},postActionMap:e.postActionMap},a={},u=s.throttle(function(){t.trigger(l.ACTION_STATUS_MAY_CHANGED,(0,o.default)(a)),a={}},0),c=e.actionMap,h=function(e){var r=c[e];r.statusRelatedEvent&&t.on(r.statusRelatedEvent,function(){t.trigger(l.ACTION_STATUS_MAY_CHANGED+":"+e),a[e]=!0,u()}),n.actionMap[e]=(0,i.default)({},g,r)},d=(0,o.default)(c),f=Array.isArray(d),p=0;for(d=f?d:(0,r.default)(d);;){var v;if(f){if(p>=d.length)break;v=d[p++]}else{if((p=d.next()).done)break;v=p.value}h(v)}return n},some:function(){for(var t=arguments.length,e=Array(t),n=0;n<t;n++)e[n]=arguments[n];return function(){for(var t=arguments.length,n=Array(t),r=0;r<t;r++)n[r]=arguments[r];return e.some(function(t){return t.apply(void 0,n)===v})?v:m}},every:function(){for(var t=arguments.length,e=Array(t),n=0;n<t;n++)e[n]=arguments[n];return function(){for(var t=arguments.length,n=Array(t),r=0;r<t;r++)n[r]=arguments[r];return e.every(function(t){return t.apply(void 0,n)===v})?v:m}},hasTargetView:function(){for(var t=arguments.length,e=Array(t),n=0;n<t;n++)e[n]=arguments[n];return function(){var t,n=(t=arguments.length-1,arguments.length<=t?void 0:arguments[t]),r=n&&n instanceof p,i=n&&e.every(function(t){return t(n)});return r&&i?v:m}},hasTargetViewInObject:function(){for(var t=arguments.length,e=Array(t),n=0;n<t;n++)e[n]=arguments[n];return function(){var t=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).targetView,n=t&&t instanceof p,r=t&&e.every(function(e){return e(t)});return n&&r?v:m}},firstSelectionIs:function(){for(var e=arguments.length,n=Array(e),r=0;r<e;r++)n[r]=arguments[r];return function(){var e=t.getModule(d.SELECTION).selections;if(!n.length)return e.length?v:m;var r=e[0],i=r&&n.every(function(t){return t(r)});return r&&i?v:m}},notInUIStatus:function(e){return function(){return-1===t.getActiveUIStatus().indexOf(e)?v:m}},alignQuery:function(){var e=t.getModule(d.SELECTION).selections;if(e.length<2)return m;for(var n=!1,r=0;r<e.length;r++){var i=e[r];if(i.type!==h.BRANCH)return m;n||i.model.type()!==f||(n=!0)}return n?v:m},divideQuery:function(){var e=t.getModule(d.SELECTION).selections;if(e.length<3)return m;for(var n=0,r=0;r<e.length;r++){var i=e[r];i.type===h.BRANCH&&i.model.type()===f&&n++}return n>=3?v:m}},n={branchViewSelected:e.selectionExisting(function(t){return t.type===h.BRANCH}),relationshipViewSelected:e.selectionExisting(function(t){return t.type===h.RELATIONSHIP}),boundaryViewSelected:e.selectionExisting(function(t){return t.type===h.BOUNDARY}),someViewSelected:e.selectionExisting()};return(0,i.default)(e,n)}},function(t,e,n){"use strict";var r,i=(r=n(32))&&r.__esModule?r:{default:r},o=n(16).Model;t.exports=o.extend({getUndo:function(){},toJSON:function(){return JSON.parse((0,i.default)(this.attributes))}})},function(t,e,n){"use strict";var r=s(n(30)),i=s(n(17)),o=s(n(38)),a=s(n(32));function s(t){return t&&t.__esModule?t:{default:t}}var u=n(0),c=u.TOPIC_ATTACHED,l=u.TOPIC_SUMMARY,h=u.TOPIC_DETACHED,d=u.TOPIC_CALLOUT,f="\r\n",p=new RegExp(f+"$"),g=n(8),v=/data:image[\s\S]*;base64,/,m={linefeed:f,formChildIdMap:function(t,e){t&&t.getChildrenBranchesByType([c,h,d,l]).forEach(function(t,n){var r=t.model.get("id");r&&(e[r]=!0),m.formChildIdMap(t,e)})},serializeBranch:function(t){var e="";return function t(n,r){n.isSelected&&(e+=r+n.model.get("title")+f,n.getChildrenBranchesByType([c,h,d,l]).forEach(function(e,n){t(e,r+"\t")}))}(t,""),e.replace(p,"")},serializeBranchToString:function(t){var e="";return function t(n,r){e+=r+(n.title?n.title:"")+f;var i=[];n.children&&(n.children[c]&&i.push.apply(i,n.children[c]),n.children[h]&&i.push.apply(i,n.children[h]),n.children[d]&&i.push.apply(i,n.children[d]),n.children[l]&&i.push.apply(i,n.children[l])),i.forEach(function(e,n){t(e,r+"\t")})}(t,""),e.replace(p,"")},toJson:function(t){var e={};return n(t,e),JSON.parse((0,a.default)(e));function n(t,e){var n=t.getChildrenBranchesByType(c);for(var o in t.model.attributes)t.collapse?e[o]=t.model.attributes[o]:"boundaries"!==o?"summaries"!==o?"children"!==o&&(e[o]=t.model.attributes[o]):e.summaries=r(t,n,"summaries"):e.boundaries=r(t,n,"boundaries");i(t,e,c),i(t,e,d),i(t,e,h),e.summaries&&e.summaries.length>0&&i(t,e,l)}function r(t,e,n){return t.model.attributes[n].filter(function(t){if(t.range)try{for(var n=t.range.substr(1,4).split(","),r=(0,o.default)(n[0]),i=(0,o.default)(n[1]),a=r;a<=i;a++){var s=e[a];if(!m.isAllSelected(s))return!1}return!0}catch(t){}return!1})}function i(t,e,r){var i=t.getChildrenBranchesByType(r);i&&i.forEach(function(t,i){if(t.isSelected||r===l){e.children||(e.children={}),e.children[r]||(e.children[r]=[]);var o={};e.children[r].push(o),n(t,o)}})}},isAllSelected:function(t){if(!t.isSelected)return!1;if(t.collapse)return!0;var e=t.getChildrenBranchesByType(c),n=Array.isArray(e),r=0;for(e=n?e:(0,i.default)(e);;){var o;if(n){if(r>=e.length)break;o=e[r++]}else{if((r=e.next()).done)break;o=r.value}var a=o,s=m.isAllSelected(a);if(!s)return s}return!0},deserialize:function(t,e){var n=[],r=[];return t.split(/\r\n|\n|\r/).forEach(function(t,i){if(""!==t){var o=t.match(/^\t*/)[0].length,a=t.substr(o),s=m.createTopicData(a,e),u=n.pop();if(u)if(o>n.length)m.appendChildTopic(u,s),n.push(u),n.push(s);else{for(;o<n.length;)n.pop();o===n.length&&((u=n[n.length-1])?m.appendChildTopic(u,s):r.push(s),n.push(s))}else r.push(s),n.push(s)}}),r},createTopicData:function(t,e){return{id:e.generateComponentId(),title:t}},appendChildTopic:function(t,e){t.children||(t.children={});var n=t.children;n.attached||(n.attached=[]),n.attached.push(e)},loadUrlAsBuffer:function(t){return new r.default(function(e,n){if(g.isBase64Url(t))e(g.base64ToArrayBuffer(t.slice(t.match(v)[0].length)));else if(0===t.indexOf("blob:"))n("can not load blob objectUrl");else{var r=new XMLHttpRequest;r.onload=function(t){e(r.response)},r.onerror=function(e){console.warn("load xap url fail",t,e),n("load xap url fail",t,e)},r.onabort=function(t){n("Abort loading xap.")},r.open("GET",t),r.responseType="arraybuffer",r.send()}})},normalizeUrlToBase64:function(t){return new r.default(function(e,n){if(g.isBase64Url(t))e(t);else if(0===t.indexOf("blob:"));else{var r=new XMLHttpRequest;r.addEventListener("readystatechange",function(i){if(r.readyState===XMLHttpRequest.DONE)if(200===r.status){var o=r.response;e(g.arrayBufferToBase64(o))}else console.warn("load xap url fail",t,i),n("load xap url fail",t,i)}),r.open("GET",t),r.responseType="arraybuffer",r.send()}})}};t.exports=m},function(t,e,n){"use strict";(function(e){var r=u(n(17)),i=u(n(2)),o=u(n(26)),a=u(n(25)),s=u(n(4));function u(t){return t&&t.__esModule?t:{default:t}}var c=n(62),l=n(63),h=l.dragCancel,d=l.traverseBranch,f=l.traverseBranchArr,p=l.updateBranchIndex,g=n(77),v=g.showPolygon,m=g.getTargetIndex,y=n(0),_=y.STRUCTURECLASS,E=y.TOPIC_TYPE,A=y.CLASS_TYPE,S=y.EVENTS,T=(n(8),n(22)),x=n(273),b=n(272),w=e.SVG,C=function(t){function e(n){(0,i.default)(this,e);var r=(0,o.default)(this,t.call(this,n));return r.placeholder=null,r._modelKeeper=null,r.rightNumTracker=null,r.modificationChecker=null,r.isFree=!1,r.dontAttach=!1,r.startPos=null,r.stashInfo={},r}return(0,a.default)(e,t),e.prototype.dragStart=function(t){this.context.trigger(S.SE_BRANCH_DRAG_START);var e=t.dragedView,n=t.selections,r=t.pos;this.startPos=r,e.editDomain().eventBus.trigger("dragStart.dragManager",e);var i=e.model,o=e.branchIndex(),a=e.parent(),u=i.type()===E.ATTACHED,c=[];0!==n.length?c=n.map(function(t){return t.model}):(c=[e.model],n=[e]),this.modificationChecker=new I(n,this.isFree),this._modelKeeper=new b(i,c,[].concat(n)),this.rightNumTracker=new L(a,n);var l=!1;if(a.isMapLike()&&u){var h=a.getStructureObject().calcNumRight(a);l=e.branchIndex()<h}return this.stashInfo={newIndex:o,newParent:e.isDetachedBranch()?null:a},this.dontAttach=i.ownerSheet().isFreePositionEnabled()&&s.default.getClassName(e)===A.FLOATING_TOPIC,this._oldBranchSvg=e.svg,this._oldBranchSvg.style("display","none"),e.svg=new w.G,c.forEach(function(t){return t.removeSelf()}),this.placeholder=new x(this.context,a),u&&this.placeholder.attachTo(a,o,e.linePosition,l),{}},e.prototype._traverseMatrix=function(t){var e=this,n=t.pos;d(this.centralBranch,function(r){if(!r._draged&&r.matrixView){var i=r.matrixView.getCellByPos(n);if(null!==i)return i.headBranch===e.placeholder.fakeBranchView?void 0:(t.cellInfo=i,!0)}})},e.prototype.getDragOverView=function(t){var e=this;t.cellInfo=void 0,this._traverseMatrix(t);var n=t.pos,i=t.cellInfo,o=i?i.items:[this.centralBranch],a=null;if(f(o,function(i){if(!i._draged){v(i);var o=e.context.getSVGView().getPositionTransfer().realToRelative(n,i),s=void 0,u=i.getPolyPointsArr(),c=Array.isArray(u),l=0;for(u=c?u:(0,r.default)(u);;){var h;if(c){if(l>=u.length)break;h=u[l++]}else{if((l=u.next()).done)break;h=l.value}var d=h;if(T.isPointInPolygon(o,d.points)){s=d;break}}return!!s&&(t.polygon=s,a=i,!0)}}),void 0!==i&&null===a){var s={side:null,relatedBranch:i.items};a=i.headBranch,t.polygon=s}return a},e.prototype.dragMoving=function(t){var e=t.pos,n=t.dropView,r=t.polygon,i=t.cellInfo;if(this.dontAttach)this.stashInfo.newIndex=null;else{if(null===n)return this.stashInfo.newParent=null,this.stashInfo.newIndex=null,void this.placeholder.detach();var o=void 0,a=this.placeholder.fakeBranchView.model.getLabel();i&&i.headBranch===n&&i.label!==a?(this.placeholder.fakeBranchView.model.changeLabel(i.label),o=!0):o=!1;var s=m(this.placeholder.fakeBranchView,n,r,e),u="right"===r.side;n.getStructureClass().match("anticlockwise")&&(u=!u),this.stashInfo.newParent?this.stashInfo.newParent!==n?(this.stashInfo.newParent=n,this.stashInfo.newIndex=s,this.placeholder.detach(),this.placeholder.attachTo(n,s,e,u)):this.stashInfo.newIndex!==s?(this.stashInfo.newIndex=s,p(this.placeholder.fakeBranchView,s,u)):o&&p(this.placeholder.fakeBranchView,s,u):(this.stashInfo.newParent=n,this.stashInfo.newIndex=s,this.placeholder.attachTo(n,s,e,u))}},e.prototype.dragFinish=function(t){this.context.trigger(S.SE_BRANCH_DRAG_END),this._oldBranchSvg.remove();var e=t.pos,n=t.cellInfo,r=this.stashInfo,i=r.newParent,o=r.newIndex,a=void 0,s=i&&i.model.unBalancedInfo();s&&i.getStructureClass()===_.MAPUNBALANCED&&(a=null!=o&&o+1<=parseInt(s.content)),this.rightNumTracker.remove(),this.placeholder.detach(!0);var u={at:o,side:a?"right":"left",position:e,noAnimation:!0},c=T.diff(this.startPos,e),l=null;return i?this.isFree?(this._modelKeeper.setPositionOffset(c),this._modelKeeper.setAddChildTopicOption(u),l=this.centralBranch):(this._modelKeeper.setAddChildTopicOption(u),l=i):(this._modelKeeper.setPositionOffset(c),this._modelKeeper.setAddChildTopicOption({type:E.DETACHED,noAnimation:!0}),l=this.centralBranch),this._modelKeeper.mount(l,n),this.modificationChecker.isDirty(l,o)?void 0:h},e}(c),I=function(){function t(e,n){(0,i.default)(this,t);var r=e[0],o=r.parent(),a=e.every(function(t){return t.parent()===o}),s=e.every(function(t){return t.model.type()===E.ATTACHED});this.indArr=[];var u=a&&s&&this._isAllNeibour(e);this.preParent=o;var c=u&&this._rangeCouldChange();this.couldBeUnchangedAfterDrag=u&&!c&&!n,this.slotIndex=-1,this.couldBeUnchangedAfterDrag&&(this.slotIndex=r.branchIndex())}return t.prototype._isAllNeibour=function(t){var e=t.map(function(t){return t.branchIndex()}).sort();this.indArr=e;var n=e[0];return e.slice(1).every(function(t){var e=n;return n=t,t-e==1})},t.prototype._rangeCouldChange=function(){var t=this.indArr[0],e=this.indArr.slice(-1)[0],n=this.preParent,r=n.boundaries;return(r=r.concat(n.summaries)).some(function(n){var r=n.model,i=r.rangeStart,o=r.rangeEnd;return t<=o&&t>i&&e>=o||e>=i&&e<o&&t<=i})},t.prototype.isDirty=function(t,e){return!(this.couldBeUnchangedAfterDrag&&this.preParent===t&&this.slotIndex===e)},t}(),L=function(){function t(e,n){var r=this;(0,i.default)(this,t),this.oldParentBranch=e,this._mapLikeParents=[];var o={};n.forEach(function(t){var e=t.parent();if(t.model.type()===E.ATTACHED&&e.isMapLike()){e.numRightInDraging=e.getStructureObject().calcNumRight(e);var n=e.cid;n in o||(o[n]=0,r._mapLikeParents.push(e)),t.branchIndex()<e.numRightInDraging&&o[n]++}}),this._mapLikeParents.forEach(function(t){var e=o[t.cid];t.numRightInDraging-=e})}return t.prototype.remove=function(){this._mapLikeParents.forEach(function(t){return delete t.numRightInDraging})},t}();t.exports=C}).call(e,n(6))},function(t,e,n){"use strict";var r=a(n(3)),i=a(n(4)),o=n(0);function a(t){return t&&t.__esModule?t:{default:t}}var s=n(19),u=n(10),c=n(20),l=n(1),h=u.setBoundaryPadding,d=(0,r.default)({},s,{calAttachedChildrenPos:function(t,e,n){var r,a,s,u,h=t.getChildrenBranchesByType(o.TOPIC_ATTACHED),d=parseInt(i.default.getStyleValue(t,o.STYLE_KEYS.SPACING_MAJOR)||0),f=parseInt(i.default.getStyleValue(t,o.STYLE_KEYS.SPACING_MINOR)||0),p=parseInt(i.default.getStyleValue(t,o.STYLE_KEYS.BORDER_LINE_WIDTH)||0),g=this.getChildrenSize(t,n),v=0;if(h.length){t.topicLineStyle===o.BRANCHCONNECTION.ARROWEDCURVE&&(v=30);var m=h[0],y=h[h.length-1],_=c[t.topicView.topicShapeStyle].getControlLocation(t,m).y-t.linePosition.y,E=c[m.topicView.topicShapeStyle].getEndAnchorLocation(this,m).y-m.linePosition.y,A=c[y.topicView.topicShapeStyle].getEndAnchorLocation(this,y).y-y.linePosition.y;d=this.calcSpacingMajor(t),n?r=e.x+e.width+d+v:(r=e.x-d-v,e.x=r-g.width),a=(y.boundaryBounds.y+y.boundaryBounds.height-E-A-m.boundaryBounds.y-g.height)/2+m.boundaryBounds.y+_,u=a,l.each(h,function(t){n?t.setPosition(r-t.boundaryBounds.x,u-t.boundaryBounds.y):t.setPosition(r-t.boundaryBounds.x-t.boundaryBounds.width,u-t.boundaryBounds.y),u+=t.boundaryBounds.height+f+p}),s=Math.max(e.y+e.height,a+g.height),e.y=Math.min(e.y,a),e.height=s-e.y,e.width=e.width+d+g.width+v}},getChildrenSize:function(t,e){var n=parseInt(i.default.getStyleValue(t,o.STYLE_KEYS.SPACING_MINOR)||0),r=parseInt(i.default.getStyleValue(t,o.STYLE_KEYS.BORDER_LINE_WIDTH)||0),a=0,s=0,u=t.getChildrenBranchesByType(o.TOPIC_ATTACHED);return h(t),l.each(u,function(t,e){a+=t.boundaryBounds.height+n+r,s=Math.max(s,t.boundaryBounds.width)}),a>0&&(a-=n+r),{height:a,width:s}},calcSpacingMajor:function(t){var e=t.topicLineStyle,n=parseInt(i.default.getStyleValue(t,o.STYLE_KEYS.SPACING_MAJOR)||0);return t.getChildrenBranchesByType(o.TOPIC_ATTACHED),[o.BRANCHCONNECTION.CURVE,o.BRANCHCONNECTION.STRAIGHT,o.BRANCHCONNECTION.ARROWEDCURVE,o.BRANCHCONNECTION.FOLD,o.BRANCHCONNECTION.ROUNDEDFOLD,o.BRANCHCONNECTION.BIGHT].includes(e)?2*n:n}});t.exports=d},function(t,e,n){"use strict";var r,i=(r=n(4))&&r.__esModule?r:{default:r},o=n(0),a=n(94),s=n(1).extend({},a,{STRUCTURECLASS:o.STRUCTURECLASS.MAPCLOCKWISE,calAttachedChildrenPos:function(t,e){var n=t.getChildrenBranchesByType(o.TOPIC_ATTACHED);this.calcChildrenBoundaryBounds(t);var r=this.calcSpacingMajor(t),a=parseInt(i.default.getStyleValue(t,o.STYLE_KEYS.SPACING_MINOR)||0),s=this.calcNumRight(t);if(n.length&&(t.isCentralBranch()||t.isDetachedBranch())){var u=n.slice(0,s),c=n.slice(s).reverse();this.calSidePos({side:"right",spacingMajor:r,spacingMinor:a,newBounds:e,children:u,isUpToDown:!0}),this.calSidePos({side:"left",spacingMajor:r,spacingMinor:a,newBounds:e,children:c,isUpToDown:!1}),this.calBounds(t,e)}},getRangeGrowthDirection:function(t,e){return e<this.calcNumRight(t)?o.DIRECTION.DOWN:o.DIRECTION.UP},getSummaryDirection:function(t,e){return this.getChildTargetOrientation(t,e)===o.DIRECTION.LEFT?o.DIRECTION.RIGHT:o.DIRECTION.LEFT},getSourceOrientation:function(){return o.DIRECTION.NONE},getChildTargetOrientation:function(t,e){return e<this.calcNumRight(t)?o.DIRECTION.LEFT:o.DIRECTION.RIGHT},getChildStructure:function(t,e,n){return e<this.calcNumRight(n)?o.STRUCTURECLASS.LOGICRIGHT:o.STRUCTURECLASS.LOGICLEFT}});t.exports=s},function(t,e,n){"use strict";var r,i=(r=n(4))&&r.__esModule?r:{default:r},o=n(0),a=n(19),s=n(10),u=n(20),c=n(1),l=s.setBoundaryPadding,h=c.extend({},a,{getChildrenSize:function(t,e){var n=0,r=0,a=parseInt(i.default.getStyleValue(t,o.STYLE_KEYS.SPACING_MINOR)||0),s=parseInt(i.default.getStyleValue(t,o.STYLE_KEYS.BORDER_LINE_WIDTH)||0),u=t.getChildrenBranchesByType(o.TOPIC_TYPE.ATTACHED);return l(t),c.each(u,function(t,e){r+=t.boundaryBounds.width+a+s,n=Math.max(n,t.boundaryBounds.height)}),r>0&&(r-=a+s),{height:n,width:r}},calAttachedChildrenPos:function(t,e,n){var r=t.getChildrenBranchesByType(o.TOPIC_TYPE.ATTACHED),a=this.calcSpacingMajor(t),s=parseInt(i.default.getStyleValue(t,o.STYLE_KEYS.SPACING_MINOR)||0),c=parseInt(i.default.getStyleValue(t,o.STYLE_KEYS.BORDER_LINE_WIDTH)||0),l=this.getChildrenSize(t,n);if(r.length>0){var h=t.topicLineStyle===o.BRANCHCONNECTION.ARROWEDCURVE?3*c:0,d=r[0],f=r[r.length-1],p=u[t.topicView.topicShapeStyle].getControlLocation(t,d).x-t.linePosition.x,g=u[d.topicView.topicShapeStyle].getEndAnchorLocation(this,d).x-d.linePosition.x,v=u[f.topicView.topicShapeStyle].getEndAnchorLocation(this,f).x-f.linePosition.x,m=(f.boundaryBounds.x+f.boundaryBounds.width-g-v-d.boundaryBounds.x-l.width)/2+d.boundaryBounds.x+p,y=void 0;n?y=e.y+e.height+a+h:(y=e.y-a-h,e.y=Math.min(e.y,y-l.height)),e.x=Math.min(e.x,m);var _=m;r.forEach(function(t){var e=t.boundaryBounds,r=e.x,i=e.y,o=e.width,a=e.height,u=_-r,l=n?y-i:y-i-a;t.setPosition(u,l),_+=o+s+c}),e.width=Math.max(e.width,l.width),e.height=e.height+a+l.height+h}},calcSpacingMajor:function(t){var e=t.topicLineStyle,n=parseInt(i.default.getStyleValue(t,o.STYLE_KEYS.SPACING_MAJOR)||0);return t.getChildrenBranchesByType(o.TOPIC_TYPE.ATTACHED),[o.BRANCHCONNECTION.CURVE,o.BRANCHCONNECTION.STRAIGHT,o.BRANCHCONNECTION.ARROWEDCURVE,o.BRANCHCONNECTION.FOLD,o.BRANCHCONNECTION.ROUNDEDFOLD,o.BRANCHCONNECTION.BIGHT].includes(e)?2*n:n}});t.exports=h},function(t,e,n){"use strict";var r,i=(r=n(3))&&r.__esModule?r:{default:r},o=n(19),a=n(29),s=n(1),u=n(10),c=n(155),l=n(0),h=l.STRUCTURECLASS,d=l.BRANCHCONNECTION,f=l.DIRECTION,p=n(143),g=p.createColumnMap,v=p.createMatrixGrid,m=p.initGrid,y=p.createPlusViews,_=p.createLabelViews,E=p.createCellViews,A=n(44),S=A.posSub,T=A.getMainCell,x=s.extend({},o,{_needTranspose:!1,STRUCTURECLASS:h.SPREADSHEET,isAttachedChildrenStructureImmutable:!0,calChildrenBounds:function(t){t.getChildrenBranchesByType().forEach(function(t){t.calChildrenBounds()}),t.model.isCollapse()||(this.calMatrix(t),t.calChildrenBounds())},calMatrix:function(t){var e=g(t),n=e.keyArr;t.model.setMatrixLabelInfos(n);var r=new c;t.matrixView=r,t.matrixContainer.add(r.getSvg()),r.parent(t);var i=_(e,t);i.forEach(function(t){return r.addLabelView(t)}),i.forEach(function(t){return t.render()});var o=this._needTranspose,a=v(t,e,o);m(a),r.setMatrixGrid(a),r.setColumnMap(e);var s=E(a);s.forEach(function(t){return r.addCellView(t)}),s.forEach(function(t){return t.afterMounted(t)}),y(a,t).forEach(function(t){return r.addPlusView(t)})},calAttachedChildrenPos:function(t,e){u.setBoundaryPadding(t);var n=t.matrixView;if(void 0!==n){var r=n.getSize(),o=T(n.matrixGrid),a=S(e,o.itemPos);(0,i.default)(e,r,a)}},getSummaryDirection:function(){return f.RIGHT},getChildStructure:function(){return h.SPREADSHEETROW},drawAttachedConnectLine:function(t,e){a[d.NONE](e)},getAvailableChildStructure:function(t,e){return[]}});t.exports=x},function(t,e,n){"use strict";var r,i=(r=n(3))&&r.__esModule?r:{default:r},o=n(19),a=n(29),s=n(1),u=n(0),c=u.STRUCTURECLASS,l=u.BRANCHCONNECTION,h=u.DIRECTION,d=n(44),f=d.getBranchRowSize,p=d.getHeadItemPos,g=d.posSub,v=s.extend({},o,{STRUCTURECLASS:c.SPREADSHEETROW,calBoundsAndChildrenPos:function(t){var e=s.extend({},t.topicView.bounds);t.boundaries.forEach(function(t){t.render()}),this.layoutExtendCollapse(t,e),this.calAttachedChildrenPos(t,e),this.calSummaryChildrenPos(t,e),this.calDetachedChildrenPos(t),t.bounds=e,t.trigger("change:bounds")},calAttachedChildrenPos:function(t,e){if(void 0!==t.parent().matrixView){var n=t.parent().matrixView.matrixGrid,r=function(t){for(var e=t.parent().getChildrenBranchesByType(),n=0;n<e.length;n++)if(e[n]===t)return n}(t),o=f(n,r),a=p(n,r),s=g(e,a);(0,i.default)(e,o,s)}},getSummaryDirection:function(){return h.RIGHT},getChildStructure:function(){return c.LOGICRIGHT},drawAttachedConnectLine:function(t,e){a[l.NONE](e)},calcPolygons:function(t){return[{points:[],relatedBranch:[],side:null}]}});t.exports=v},function(t,e,n){"use strict";var r,i=(r=n(4))&&r.__esModule?r:{default:r},o=n(0),a=n(19),s=n(13),u=n(10),c=n(1),l=s.PADDING,h=s.BOUNDARYGAP,d=u.sortBoundaries,f=u.setBoundaryPadding,p=c.extend({},a,{getChildrenSize:function(t,e){var n=parseInt(i.default.getStyleValue(t,o.STYLE_KEYS.SPACING_MINOR)||0),r=parseInt(i.default.getStyleValue(t,o.STYLE_KEYS.BORDER_LINE_WIDTH)||0),a=0,s=0,u=t.getChildrenBranchesByType(o.TOPIC_ATTACHED);return f(t),c.each(u,function(t,e){a+=t.boundaryBounds.height+n+r,s=Math.max(s,t.boundaryBounds.width)}),a>0&&(a-=n+r),{height:a,width:s}},calAttachedChildrenPos:function(t,e,n){var r,a,s=t.getChildrenBranchesByType(),u=h,f=parseInt(i.default.getStyleValue(t,o.STYLE_KEYS.SPACING_MINOR)||0),p=parseInt(i.default.getStyleValue(t,o.STYLE_KEYS.BORDER_LINE_WIDTH)||0),g=this.getChildrenSize(t,n),v=0;if(t.boundaries.length&&d(t.boundaries),s.length){t.topicLineStyle===o.BRANCHCONNECTION.ARROWEDCURVE&&(v=30),n?(r=u+v,t.isCentralBranch()&&(r+=30),a=e.y+e.height+2*l):(r=-u-v,t.isCentralBranch()&&(r-=30),a=e.y+e.height+2*l,e.x=Math.min(r-g.width,e.x));var m=Math.max(e.y+e.height,a+g.height);e.y=Math.min(e.y,a),e.height=m-e.y,e.width=Math.max(e.width,e.width/2+u+g.width+v),c.each(s,function(t){n?t.setPosition(r-t.boundaryBounds.x,a-t.boundaryBounds.y):t.setPosition(r-t.boundaryBounds.x-t.boundaryBounds.width,a-t.boundaryBounds.y),a+=t.boundaryBounds.height+f+p},this)}}});t.exports=p},function(t,e,n){"use strict";e.__esModule=!0,e.UndoManager=e.Undo=void 0;var r=s(n(26)),i=s(n(25)),o=s(n(2)),a=n(33);function s(t){return t&&t.__esModule?t:{default:t}}var u=n(0).EVENTS,c=n(317),l=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{limit:20};(0,o.default)(this,t),this.opt=e,this.undostack=[],this._index=0,this._blocking=!1}return t.prototype.addEmptyStep=function(){this.undostack=this.undostack.slice(0,this._index),this.undostack.push([]),this.undostack.length>this.opt.limit&&(this.undostack=this.undostack.slice(1)),this._index=this.undostack.length},t.prototype.addEntry=function(t,e){if(!this._blocking){e&&this.addEmptyStep();var n=this.undostack.length-1;this.undostack[n].push(t)}},t.prototype.pop=function(){var t=this.undostack.pop();return this._index=Math.min(this._index,this.undostack.length),t},t.prototype.clearRedo=function(){this.undostack=this.undostack.slice(0,this._index)},t.prototype.isReadyUndo=function(){return 0!==this._index},t.prototype.isReadyRedo=function(){return this._index!==this.undostack.length},t.prototype.undo=function(){if(this.isReadyUndo()){this._blocking=!0,this._index--;for(var t=this.undostack[this._index],e=t.length-1;e>=0;e--)t[e].undo();return this._blocking=!1,t}},t.prototype.redo=function(){if(this.isReadyRedo()){this._blocking=!0;var t=this.undostack[this._index];return t.forEach(function(t){return t.redo()}),this._index++,this._blocking=!1,t}},t.prototype.getIndex=function(){return this._index},t.prototype.getUndoAction=function(){return this.undostack[this._index-1]},t.prototype.getRedoAction=function(){return this.undostack[this._index]},t}(),h="CREATE";e.Undo=function(t){function e(n){(0,o.default)(this,e);var i=(0,r.default)(this,t.call(this,n));return i.undoStack=new l(n),i.state=h,i.keepMode=!1,i.recording=!0,i}return(0,i.default)(e,t),e.prototype.isExecuting=function(){return"EXECUTING"===this.state},e.prototype.setState=function(t){clearTimeout(this.TIMEOUT_ID),this.state=t},e.prototype.timeoutInit=function(){var t=this;clearTimeout(this.TIMEOUT_ID),this.TIMEOUT_ID=setTimeout(function(){t.initState()},0)},e.prototype.initState=function(){this.setState(h)},e.prototype.openKeepMode=function(){this.keepMode=!0,this.initState()},e.prototype.closeKeepMode=function(){this.keepMode=!1,this.initState(),this.triggerUndoState()},e.prototype.setRecord=function(t){this.recording=t},e.prototype.add=function(t,e){if(this.recording){switch(t.type=e,this.state){case h:this.undoStack.addEntry(t,!0),this.setState("ACCEPT"),this.trigger("undoPushed",this.getUndoAction()),this.keepMode||this.timeoutInit();break;case"ACCEPT":this.undoStack.addEntry(t),this.keepMode||this.timeoutInit();break;case"EXECUTING":default:return}this.triggerUndoState()}},e.prototype.pop=function(){this.undoStack.pop(),this.initState(),this.trigger("undoPoped"),this.triggerUndoState()},e.prototype.clearRedo=function(){this.undoStack.clearRedo(),this.initState(),this.triggerUndoState()},e.prototype.undo=function(){this.setState("EXECUTING"),this.undoStack.undo(),this.initState(),this.triggerUndoState()},e.prototype.redo=function(){this.setState("EXECUTING"),this.undoStack.redo(),this.initState(),this.triggerUndoState()},e.prototype.isReadyUndo=function(){return this.undoStack.isReadyUndo()},e.prototype.isReadyRedo=function(){return this.undoStack.isReadyRedo()},e.prototype.triggerUndoState=function(){this.trigger(u.UNDO_STATE_CHANGE)},e.prototype.getIndex=function(){return this.undoStack.getIndex()},e.prototype.getUndoAction=function(){return this.undoStack.getUndoAction()},e.prototype.getRedoAction=function(){return this.undoStack.getRedoAction()},e}(c),e.UndoManager=function(t){function e(){(0,o.default)(this,e);var n=(0,r.default)(this,t.call(this));return n.curTimeStamp=0,n._undoObjArr=[],n}return(0,i.default)(e,t),e.prototype.addUndoObj=function(t){var e=this;this._undoObjArr.push(t),this.listenTo(t,"undoPushed",function(t){t._timeStamp=e.curTimeStamp,e.curTimeStamp++})},e.prototype.removeUndoObj=function(t){var e=this._undoObjArr.indexOf(t);e>0&&(this._undoObjArr.splice(e,1),this.stopListening(t))},e.prototype.getUndoObj=function(){var t,e,n=this._undoObjArr,r=n.map(function(t){return t.getUndoAction()}).map(function(t){return(0,a.isUndef)(t)?-1/0:t._timeStamp});return n[(t=-1/0,e=0,r.forEach(function(n,r){n>t&&(t=n,e=r)}),e)]},e.prototype.getRedoObj=function(){var t,e,n=this._undoObjArr,r=n.map(function(t){return t.getRedoAction()}).map(function(t){return(0,a.isUndef)(t)?1/0:t._timeStamp});return n[(t=1/0,e=0,r.forEach(function(n,r){n<t&&(t=n,e=r)}),e)]},e}(c)},function(t,e,n){"use strict";var r,i,o,a,s,u,c,l,h,d,f;e.__esModule=!0;var p=n(0),g=((f={})[p.CLASS_TYPE.CENTRAL_TOPIC]=((r={})[p.STYLE_KEYS.FONT_WEIGHT]="normal",r[p.STYLE_KEYS.TEXT_COLOR]="#FFFFFF",r[p.STYLE_KEYS.FONT_FAMILY]="$system$",r[p.STYLE_KEYS.FONT_STYLE]="normal",r[p.STYLE_KEYS.FONT_SIZE]="28pt",r[p.STYLE_KEYS.TEXT_DECORATION]="none",r[p.STYLE_KEYS.SHAPE_CLASS]="org.xmind.topicShape.roundedRect",r[p.STYLE_KEYS.FILL_COLOR]="#2A7AC2",r[p.STYLE_KEYS.LINE_CLASS]="org.xmind.branchConnection.curve",r[p.STYLE_KEYS.LINE_COLOR]="#333333",r[p.STYLE_KEYS.LINE_WIDTH]="2pt",r[p.STYLE_KEYS.TEXT_ALIGN]="center",r[p.STYLE_KEYS.TEXT_TRANSFORM]="manual",r[p.STYLE_KEYS.BORDER_LINE_COLOR]="none",r[p.STYLE_KEYS.BORDER_LINE_WIDTH]="0pt",r[p.STYLE_KEYS.LINE_CORNER]="16pt",r[p.STYLE_KEYS.MARGIN_LEFT]="29pt",r[p.STYLE_KEYS.MARGIN_RIGHT]="29pt",r[p.STYLE_KEYS.MARGIN_TOP]="15pt",r[p.STYLE_KEYS.MARGIN_BOTTOM]="15pt",r[p.STYLE_KEYS.SPACING_MAJOR]="50pt",r[p.STYLE_KEYS.SPACING_MINOR]="35pt",r),f[p.CLASS_TYPE.MAIN_TOPIC]=((i={})[p.STYLE_KEYS.FONT_WEIGHT]="normal",i[p.STYLE_KEYS.TEXT_COLOR]="#333333",i[p.STYLE_KEYS.FONT_FAMILY]="$system$",i[p.STYLE_KEYS.FONT_STYLE]="normal",i[p.STYLE_KEYS.FONT_SIZE]="16pt",i[p.STYLE_KEYS.TEXT_DECORATION]="none",i[p.STYLE_KEYS.SHAPE_CLASS]="org.xmind.topicShape.roundedRect",i[p.STYLE_KEYS.FILL_COLOR]="#E8E8E8",i[p.STYLE_KEYS.LINE_CLASS]="org.xmind.branchConnection.roundedElbow",i[p.STYLE_KEYS.LINE_COLOR]="#333333",i[p.STYLE_KEYS.LINE_WIDTH]="1pt",i[p.STYLE_KEYS.TEXT_ALIGN]="left",i[p.STYLE_KEYS.TEXT_TRANSFORM]="manual",i[p.STYLE_KEYS.BORDER_LINE_COLOR]="#333333",i[p.STYLE_KEYS.BORDER_LINE_WIDTH]="1pt",i[p.STYLE_KEYS.SHAPE_CORNER]="5pt",i[p.STYLE_KEYS.LINE_CORNER]="8pt",i[p.STYLE_KEYS.MARGIN_LEFT]="18pt",i[p.STYLE_KEYS.MARGIN_RIGHT]="18pt",i[p.STYLE_KEYS.MARGIN_TOP]="10pt",i[p.STYLE_KEYS.MARGIN_BOTTOM]="10pt",i[p.STYLE_KEYS.SPACING_MAJOR]="26pt",i[p.STYLE_KEYS.SPACING_MINOR]="6pt",i),f[p.CLASS_TYPE.CALLOUT_TOPIC]=((o={})[p.STYLE_KEYS.FONT_WEIGHT]="normal",o[p.STYLE_KEYS.TEXT_COLOR]="#FFFFFF",o[p.STYLE_KEYS.FONT_FAMILY]="$system$",o[p.STYLE_KEYS.FONT_STYLE]="italic",o[p.STYLE_KEYS.FONT_SIZE]="12pt",o[p.STYLE_KEYS.TEXT_DECORATION]="none",o[p.STYLE_KEYS.CALLOUT_SHAPE_CLASS]="org.xmind.calloutTopicShape.balloon.roundedRect",o[p.STYLE_KEYS.BORDER_LINE_COLOR]="none",o[p.STYLE_KEYS.BORDER_LINE_WIDTH]="1pt",o[p.STYLE_KEYS.SHAPE_CORNER]="5pt",o[p.STYLE_KEYS.FILL_COLOR]="#333333",o[p.STYLE_KEYS.LINE_CLASS]="org.xmind.branchConnection.curve",o[p.STYLE_KEYS.LINE_COLOR]="#333333",o[p.STYLE_KEYS.LINE_WIDTH]="1pt",o[p.STYLE_KEYS.TEXT_ALIGN]="center",o[p.STYLE_KEYS.TEXT_TRANSFORM]="manual",o[p.STYLE_KEYS.LINE_CORNER]="8pt",o[p.STYLE_KEYS.MARGIN_LEFT]="6pt",o[p.STYLE_KEYS.MARGIN_RIGHT]="6pt",o[p.STYLE_KEYS.MARGIN_TOP]="6pt",o[p.STYLE_KEYS.MARGIN_BOTTOM]="6pt",o[p.STYLE_KEYS.SPACING_MAJOR]="26pt",o[p.STYLE_KEYS.SPACING_MINOR]="8pt",o),f[p.CLASS_TYPE.SUB_TOPIC]=((a={})[p.STYLE_KEYS.FONT_WEIGHT]="normal",a[p.STYLE_KEYS.TEXT_COLOR]="#0A0E16",a[p.STYLE_KEYS.FONT_FAMILY]="$system$",a[p.STYLE_KEYS.FONT_STYLE]="normal",a[p.STYLE_KEYS.FONT_SIZE]="12pt",a[p.STYLE_KEYS.TEXT_DECORATION]="none",a[p.STYLE_KEYS.SHAPE_CLASS]="org.xmind.topicShape.underline",a[p.STYLE_KEYS.FILL_COLOR]="none",a[p.STYLE_KEYS.LINE_CLASS]="org.xmind.branchConnection.roundedElbow",a[p.STYLE_KEYS.LINE_COLOR]="#232323",a[p.STYLE_KEYS.LINE_WIDTH]="1pt",a[p.STYLE_KEYS.TEXT_ALIGN]="center",a[p.STYLE_KEYS.TEXT_TRANSFORM]="manual",a[p.STYLE_KEYS.BORDER_LINE_COLOR]="#232323",a[p.STYLE_KEYS.BORDER_LINE_WIDTH]="1pt",a[p.STYLE_KEYS.SHAPE_CORNER]="3pt",a[p.STYLE_KEYS.LINE_CORNER]="8pt",a[p.STYLE_KEYS.MARGIN_LEFT]="6pt",a[p.STYLE_KEYS.MARGIN_RIGHT]="6pt",a[p.STYLE_KEYS.MARGIN_TOP]="6pt",a[p.STYLE_KEYS.MARGIN_BOTTOM]="6pt",a[p.STYLE_KEYS.SPACING_MAJOR]="26pt",a[p.STYLE_KEYS.SPACING_MINOR]="8pt",a),f[p.CLASS_TYPE.FLOATING_TOPIC]=((s={})[p.STYLE_KEYS.FONT_WEIGHT]="normal",s[p.STYLE_KEYS.TEXT_COLOR]="#FFFFFF",s[p.STYLE_KEYS.FONT_FAMILY]="$system$",s[p.STYLE_KEYS.FONT_STYLE]="normal",s[p.STYLE_KEYS.FONT_SIZE]="14pt",s[p.STYLE_KEYS.TEXT_DECORATION]="none",s[p.STYLE_KEYS.SHAPE_CLASS]="org.xmind.calloutTopicShape.balloon.roundedRect",s[p.STYLE_KEYS.SHAPE_CORNER]="8pt",s[p.STYLE_KEYS.FILL_COLOR]="#333333",s[p.STYLE_KEYS.LINE_CLASS]="org.xmind.branchConnection.roundedElbow",s[p.STYLE_KEYS.LINE_COLOR]="#333333",s[p.STYLE_KEYS.LINE_WIDTH]="1pt",s[p.STYLE_KEYS.LINE_CORNER]="8pt",s[p.STYLE_KEYS.TEXT_ALIGN]="center",s[p.STYLE_KEYS.TEXT_TRANSFORM]="manual",s[p.STYLE_KEYS.BORDER_LINE_COLOR]="#333333",s[p.STYLE_KEYS.BORDER_LINE_WIDTH]="0pt",s[p.STYLE_KEYS.MARGIN_LEFT]="11pt",s[p.STYLE_KEYS.MARGIN_RIGHT]="11pt",s[p.STYLE_KEYS.MARGIN_TOP]="11pt",s[p.STYLE_KEYS.MARGIN_BOTTOM]="11pt",s[p.STYLE_KEYS.SPACING_MAJOR]="26pt",s[p.STYLE_KEYS.SPACING_MINOR]="8pt",s),f[p.CLASS_TYPE.SUMMARY_TOPIC]=((u={})[p.STYLE_KEYS.FONT_WEIGHT]="normal",u[p.STYLE_KEYS.TEXT_COLOR]="#FFFFFF",u[p.STYLE_KEYS.FONT_FAMILY]="$system$",u[p.STYLE_KEYS.FONT_STYLE]="italic",u[p.STYLE_KEYS.FONT_SIZE]="14pt",u[p.STYLE_KEYS.TEXT_DECORATION]="none",u[p.STYLE_KEYS.SHAPE_CLASS]="org.xmind.topicShape.roundedRect",u[p.STYLE_KEYS.SHAPE_CORNER]="5pt",u[p.STYLE_KEYS.FILL_COLOR]="#333333",u[p.STYLE_KEYS.MARGIN_LEFT]="5pt",u[p.STYLE_KEYS.MARGIN_RIGHT]="5pt",u[p.STYLE_KEYS.MARGIN_TOP]="6pt",u[p.STYLE_KEYS.MARGIN_BOTTOM]="6pt",u[p.STYLE_KEYS.LINE_CLASS]="org.xmind.branchConnection.roundedElbow",u[p.STYLE_KEYS.LINE_COLOR]="#232323",u[p.STYLE_KEYS.LINE_CORNER]="8pt",u[p.STYLE_KEYS.LINE_WIDTH]="1pt",u[p.STYLE_KEYS.TEXT_ALIGN]="center",u[p.STYLE_KEYS.TEXT_TRANSFORM]="manual",u[p.STYLE_KEYS.SPACING_MAJOR]="26pt",u[p.STYLE_KEYS.SPACING_MINOR]="8pt",u[p.STYLE_KEYS.BORDER_LINE_COLOR]="none",u[p.STYLE_KEYS.BORDER_LINE_WIDTH]="1pt",u),f[p.CLASS_TYPE.BOUNDARY]=((c={})[p.STYLE_KEYS.SHAPE_CLASS]="org.xmind.boundaryShape.roundedRect",c[p.STYLE_KEYS.SHAPE_CORNER]="20pt",c[p.STYLE_KEYS.FILL_COLOR]="#D5E9FC",c[p.STYLE_KEYS.LINE_COLOR]="#2A7AC2",c[p.STYLE_KEYS.LINE_WIDTH]="2pt",c[p.STYLE_KEYS.LINE_PATTERN]="dash",c[p.STYLE_KEYS.OPACITY]="0.2",c[p.STYLE_KEYS.FONT_FAMILY]="$system$",c[p.STYLE_KEYS.FONT_WEIGHT]="normal",c[p.STYLE_KEYS.TEXT_COLOR]="#333333",c[p.STYLE_KEYS.FONT_STYLE]="italic",c[p.STYLE_KEYS.FONT_SIZE]="12pt",c[p.STYLE_KEYS.MARGIN_LEFT]="10pt",c[p.STYLE_KEYS.MARGIN_RIGHT]="10pt",c[p.STYLE_KEYS.MARGIN_TOP]="6pt",c[p.STYLE_KEYS.MARGIN_BOTTOM]="6pt",c[p.STYLE_KEYS.TEXT_DECORATION]="none",c[p.STYLE_KEYS.TEXT_ALIGN]="left",c[p.STYLE_KEYS.TEXT_TRANSFORM]="manual",c),f[p.CLASS_TYPE.RELATIONSHIP]=((l={})[p.STYLE_KEYS.SHAPE_CLASS]="org.xmind.relationshipShape.curved",l[p.STYLE_KEYS.LINE_COLOR]="#2A7AC2",l[p.STYLE_KEYS.LINE_WIDTH]="2pt",l[p.STYLE_KEYS.LINE_PATTERN]="dash",l[p.STYLE_KEYS.ARROW_BEGIN_CLASS]="org.xmind.arrowShape.none",l[p.STYLE_KEYS.ARROW_END_CLASS]="org.xmind.arrowShape.triangle",l[p.STYLE_KEYS.FONT_FAMILY]="$system$",l[p.STYLE_KEYS.FONT_WEIGHT]="normal",l[p.STYLE_KEYS.TEXT_COLOR]="#333333",l[p.STYLE_KEYS.FONT_STYLE]="italic",l[p.STYLE_KEYS.FONT_SIZE]="12pt",l[p.STYLE_KEYS.TEXT_DECORATION]="none",l[p.STYLE_KEYS.TEXT_ALIGN]="center",l[p.STYLE_KEYS.TEXT_TRANSFORM]="manual",l),f[p.CLASS_TYPE.SUMMARY]=((h={})[p.STYLE_KEYS.SHAPE_CLASS]="org.xmind.summaryShape.square",h[p.STYLE_KEYS.LINE_COLOR]="#007ac8",h[p.STYLE_KEYS.LINE_WIDTH]="2pt",h[p.STYLE_KEYS.LINE_PATTERN]="solid",h[p.STYLE_KEYS.LINE_CORNER]="8pt",h),f[p.CLASS_TYPE.MAP]=((d={})[p.STYLE_KEYS.FILL_COLOR]="#ffffff",d[p.STYLE_KEYS.GRADIENT_COLOR]="none",d),f.getStyleValue=function(t,e){return g[t]&&g[t][e]},f.hasClass=function(t){return!!g[t]},f);e.default=g},function(t,e,n){"use strict";var r,i=n(0).LANGS,o=((r={})[i.EN_US]={DEFAULT_CALLOUT_TOPIC_TITLE:"Callout",DEFAULT_FLOATING_TOPIC_TITLE:"Floating Topic",DEFAULT_MAIN_TOPIC_TITLE:"Main Topic",DEFAULT_SUBTOPIC_TITLE:"Subtopic",DEFAULT_SUMMARY_TOPIC_TITLE:"Summary",DEFAULT_RELATIONSHIP_TITLE:"Relationship",LEGEND_TITLE:"Legend",LABEL_TITLE:"Label",RECORD_TITLE_PREFIX:"Record"},r[i.ZH_CN]={DEFAULT_CALLOUT_TOPIC_TITLE:"",DEFAULT_FLOATING_TOPIC_TITLE:"",DEFAULT_MAIN_TOPIC_TITLE:"",DEFAULT_SUBTOPIC_TITLE:"",DEFAULT_SUMMARY_TOPIC_TITLE:"",DEFAULT_RELATIONSHIP_TITLE:"",LEGEND_TITLE:"",LABEL_TITLE:"",RECORD_TITLE_PREFIX:""},r[i.ZH_HK]={DEFAULT_CALLOUT_TOPIC_TITLE:"",DEFAULT_FLOATING_TOPIC_TITLE:"",DEFAULT_MAIN_TOPIC_TITLE:"",DEFAULT_SUBTOPIC_TITLE:"",DEFAULT_SUMMARY_TOPIC_TITLE:"",DEFAULT_RELATIONSHIP_TITLE:"",LEGEND_TITLE:"",LABEL_TITLE:"",RECORD_TITLE_PREFIX:""},r[i.ZH_TW]={DEFAULT_CALLOUT_TOPIC_TITLE:"",DEFAULT_FLOATING_TOPIC_TITLE:"",DEFAULT_MAIN_TOPIC_TITLE:"",DEFAULT_SUBTOPIC_TITLE:"",DEFAULT_SUMMARY_TOPIC_TITLE:"",DEFAULT_RELATIONSHIP_TITLE:"",LEGEND_TITLE:"",LABEL_TITLE:"",RECORD_TITLE_PREFIX:""},r[i.JA_JP]={DEFAULT_CALLOUT_TOPIC_TITLE:"",DEFAULT_FLOATING_TOPIC_TITLE:"",DEFAULT_MAIN_TOPIC_TITLE:"",DEFAULT_SUBTOPIC_TITLE:"",DEFAULT_SUMMARY_TOPIC_TITLE:"",DEFAULT_RELATIONSHIP_TITLE:"",LEGEND_TITLE:"",LABEL_TITLE:"",RECORD_TITLE_PREFIX:""},r[i.DE_DE]={DEFAULT_CALLOUT_TOPIC_TITLE:"Anmerkung",DEFAULT_FLOATING_TOPIC_TITLE:"Freitext",DEFAULT_MAIN_TOPIC_TITLE:"Hauptknoten",DEFAULT_SUBTOPIC_TITLE:"Unterknoten",DEFAULT_SUMMARY_TOPIC_TITLE:"Zusammenfassung",DEFAULT_RELATIONSHIP_TITLE:"Verbindung",LEGEND_TITLE:"Legende",LABEL_TITLE:"Beschriftung",RECORD_TITLE_PREFIX:"Aufnahme"},r[i.FR_FR]={DEFAULT_CALLOUT_TOPIC_TITLE:"Bulle",DEFAULT_FLOATING_TOPIC_TITLE:"Sujet Flottant",DEFAULT_MAIN_TOPIC_TITLE:"Sujet principal",DEFAULT_SUBTOPIC_TITLE:"Sous-sujet",DEFAULT_SUMMARY_TOPIC_TITLE:"Rsum",DEFAULT_RELATIONSHIP_TITLE:"Relation",LEGEND_TITLE:"Lgende",LABEL_TITLE:"Etiquette",RECORD_TITLE_PREFIX:"Enregistrement Audio"},r);t.exports={translate:function(t,e){var n=o[t];if(n)return n[e]||(console.warn("word '"+e+"' of language '"+t+"' hasn't been translated"),e);throw new Error("unsupported language: "+t)}}},function(t,e,n){"use strict";var r=s(n(11)),i=s(n(3)),o=s(n(4)),a=n(0);function s(t){return t&&t.__esModule?t:{default:t}}var u=n(153),c=n(154),l=n(146),h=n(328),d=h.Matrix,f=h.Container,p=h.Cell,g=h.ColumnMap,v=h.LEFT,m=h.MIDDLE,y=n(44),_=y.isUndef,E=y.posSub,A=n(13),S=A.MATRIX_PLUS_RADIUS,T=A.MATRIX_PLUS_RADIUS,x=function(t){return t.type===a.VIEW_TYPE.BRANCH||t.parent(),{}},b=function(t){var e,n,r,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},o=i.branch,a=i.labelView,s=i.parentCell,u=i.labelText,c={align:v},l={align:m},h=void 0;switch(t){case"CHILD_CELL":return(h=new p(o,c))._view=o,h._parentCell=s,h._events=_(o)?(e=s.item,n=u,{dblclick:r=function(t){var r=e.model.createEmptyTopic({title:e.parent().getChildDefaultTitle()});e.model.addChildTopic(r,{noAnimation:!0}),r.changeLabel(n)},doubletap:r}):x(h._view),h;case"HEAD_CELL":return(h=new p(o.topicView,c))._parentCell=s,h._view=o,h._events=x(h._view),h;case"MAIN_CELL":return(h=new p(o.topicView,c))._view=o,h._events=x(h._view),h;case"LABEL_CELL":return(h=new p(a,l))._events={},h._view=a,h;case"NULL_CELL":default:return(h=new p)._isNull=!0,h}};t.exports={createColumnMap:function(t){var e=t.getChildrenBranchesByType(),n=new g(e.length);e.forEach(function(t,e){(t._draged?[]:t.getChildrenBranchesByType()).forEach(function(t){var r=(t.model.get("labels")||[]).join(",");n.getCell(e,r).items.push(t)})}),0===n.getColumns().length&&e.forEach(function(t,e){n.getCell(e,"")});var r=t.model.getMatrixLabelInfos();return n.setKeyArr(r),n},createMatrixGrid:function(t,e,n){var r=t.getChildrenBranchesByType(),o=b("MAIN_CELL",{branch:t}),a=function(t,e){var n=b("NULL_CELL"),r=t.getColumns().map(function(t){var e=t._keyView;return delete t._keyView,b("LABEL_CELL",{labelView:e})});return[n].concat(r)}(e),s=function(t,e,n){return r.map(function(n,r){var o=b("HEAD_CELL",{branch:n,parentCell:e}),a=t.getColumns().map(function(t){var e=t.cells[r].items,n={labelText:t.key,parentCell:o},a=e.map(function(t){var e=(0,i.default)({branch:t},n);return b("CHILD_CELL",e)});if(0===a.length){var s=b("CHILD_CELL",n);a.push(s)}return new f(a)});return[o].concat(a)})}(e,o),u=[a].concat(s),c=new d(u,n),l=new f([o,c]);return l.isTranspose=n,l},initGrid:function(t){var e=t.getMinSize();t.setSize(e),t.setPos({x:0,y:0}),t.cells[1].getCells().forEach(function(t){return function(t){if(!_(t.item)){var e=t.item;_(e.setPosition)&&(e=e.parent());var n=function(t){var e=t.getAbsPos();if(_(t._parentCell))return e;var n=t._parentCell.getAbsPos();return E(e,n)}(t);e.setPosition(n)}}(t)})},createPlusViews:function(t,e){var n=t.cells[1],r=n.rows.length,o=n.rows[0].length,a=n.rows[0][o-1].view.bounds,s=n.rows[r-1][0].view.bounds,u=2*S,l={width:u,height:u},h=T,d=(0,i.default)({},a,l,{x:a.x+a.width+h}),f=(0,i.default)({},s,l,{y:s.y+s.height+h}),p=function(){!function(t){var e=function(t){var e=t.model,n=t.getChildDefaultTitle(),r=e.createEmptyTopic({title:n});return e.addChildTopic(r)},n=t.getChildrenBranchesByType();0===n.length&&e(t);var r,i=e(n[0]||e(t)),o=function(t,e){for(var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,r=t+" "+n;e.indexOf(r)>=0;)r=t+" "+ ++n;return r}(t.getContext().getTranslatedText("LABEL_TITLE"),r=t.matrixView.columnMap.keyArr.filter(function(t){return""!==t}),r.length+1);i.changeLabel(o)}(e)},g=function(){var t;(t=e).getContext().execAction("addSubTopic",t)};if(t.isTranspose){var v=p;p=g,g=v}return[new c(d,p),new c(f,g)]},createLabelViews:function(t,e){var n=function(t,e){var n={};return(0,r.default)(e).forEach(function(r){var i=e[r],a=o.default.getStyleValue(t,i,{ignoreUser:!0,ignoreClass:!0});void 0!==a&&(n[r]=parseInt(a))}),n},i=e.getChildrenBranchesByType(),s=0===i.length,c={fontSize:a.STYLE_KEYS.FONT_SIZE},l={marginTop:a.STYLE_KEYS.MARGIN_TOP,marginBottom:a.STYLE_KEYS.MARGIN_BOTTOM,marginLeft:a.STYLE_KEYS.MARGIN_LEFT,marginRight:a.STYLE_KEYS.MARGIN_RIGHT},h=s?{}:n(i[0],c),d=s?{}:n(i[0],l);return t.getColumns().map(function(t){var e=t.key,n=t.cells,r=new u(e,n,h,d);return t._keyView=r,r})},createCellViews:function(t){return t.getCells().map(function(t){var e=(0,i.default)(t.pos,t.size),n=new l(e,t._view,t._events,t._isNull);return t.view=n,n})},PLUS_VIEW_PADDING:T}},function(t,e,n){"use strict";var r=a(n(2)),i=a(n(38)),o=a(n(11));function a(t){return t&&t.__esModule?t:{default:t}}var s,u=[new RegExp("^[-]*$")],c=[new RegExp("^[ -/]*$"),new RegExp("^[:-@]*$"),new RegExp("^[[-`]*$"),new RegExp("^[{-~]*$"),new RegExp("^[-]*$"),new RegExp("^[-]*$")],l=String.fromCharCode.apply(String,[32,9,12288]).split(""),h=function(t){return t[t.length-1]},d=function(t){return 0===t.length},f=function(t){return t.reduce(function(t,e){return t.concat(e)},[])},p=(s=document.createElement("canvas").getContext("2d"),function(t,e){var n,r=e.fontStyle,o=e.fontWeight,a=e.fontSize,u=e.fontFamily;/\dpt\b/.test(o)&&(o=parseInt(o)),n=a=(0,i.default)(a);var c=1;a<12&&(c=a/12,a=12);var l=[r,o,a+"px",u];s.font=l.filter(function(t){return t}).join(" ");var h=t.split("\n"),d=h.map(function(t){return s.measureText(t).width});return{width:Math.max.apply(Math,d)*c,height:h.length*n}}),g=function(t){var e=0,n=0;return t.forEach(function(t){var r=p(t.content,t.style),i=r.width,o=r.height;e+=i,n=Math.max(n,o)}),{width:e,height:n}},v=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];(0,r.default)(this,t),this.nodes=e}return t.prototype.getNodes=function(){return this.nodes},t.prototype.isEmpty=function(){return 0===this.nodes.length},t.prototype.insert=function(t){this.nodes.push(t)},t.prototype.insertNodes=function(t){this.nodes=this.nodes.concat(t)},t.prototype.getWidth=function(){return g(this.nodes).width},t.prototype.getContent=function(){return this.nodes.reduce(function(t,e){return t+e.content},"")},t}();t.exports={combineNodes:function(t){if(d(t))return[];var e=[t.shift()];return t.forEach(function(t){var n=e.pop();if(function(t,e){var n=t.style,r=e.style;return void 0===n||void 0===r||function(t,e){var n=(0,o.default)(t),r=(0,o.default)(e);if(n.length!==r.length)return!1;for(var i=0;i<n.length;i++){var a=n[i];if(t[a]!==e[a])return!1}return!0}(n,r)}(n,t)){var r=function(t,e){var n=t.style||e.style;return{content:t.content+e.content,style:n}}(n,t);e.push(r)}else e.push(n),e.push(t)}),e},separateNodes:function(t){var e=t.map(function(t){var e=t.content,n=t.style;return e.split("").map(function(t){return{content:t,style:n}})});return f(e)},nodesArrJoin:function(t){return t.reduce(function(t,e){return[].concat(t,e)},[])},nodesSplit:function(t,e,n){var r=function(t,e){return t.indexOf(e)>=0};if(d(e))return[t];if(r(e,""))return t.map(function(t){return[t]});var i=[];return i.push([]),n?t.forEach(function(n,o){if(h(i).push(n),r(e,n.content)){var a=t[o+1];void 0===a||r(e,a.content)||i.push([])}}):t.forEach(function(t,n){r(e,t.content)?i.push([]):h(i).push(t)}),i},strArrJoin:function(t){return t.join("")},strSplit:function(t,e){return function t(e,n){if(n=[].concat(n),d(n))return[e];var r=n.shift(),i=e.split(r).map(function(e){return t(e,n)});return f(function(t,e){for(var n=[],r=0,i=t.length;r<i;r++)n.push(t[r]),n.push(e);return n.pop(),n}(i,r))}(t,e)},nodes2Str:function(t){return t.reduce(function(t,e){return t+e.content},"")},str2NodesArr:function(t,e){return t.split("\n").map(function(t){return""===t?[]:[{content:t,style:e}]})},nodes2Words:function(t){var e=/[CPA]:C|[CP]:A/,n=t.map(function(t){var e,n=t.content;return e=n,u.some(function(t){return t.test(e)})?"C":function(t){return l.indexOf(t)>=0||c.some(function(e){return e.test(t)})}(n)?"P":"A"}),r=n.map(function(t,r){if(0===r)return!0;var i=n[r-1]+":"+t;return e.test(i)}),i=[];return t.forEach(function(t,e){r[e]&&i.push(new v),h(i).insert(t)}),i},sepWord:function(t){return t.nodes.map(function(t){return new v([t])})},combineWords:function(t){var e=new v;return t.forEach(function(t){return e.insertNodes(t.nodes)}),e},getTextSize:p,getNodesSize:g}},function(t,e,n){"use strict";(function(e,r){var i,o,a=d(n(3)),s=d(n(17)),u=d(n(54)),c=d(n(4)),l=n(0),h=d(n(22));function d(t){return t&&t.__esModule?t:{default:t}}var f=n(34),p=n(98),g=n(291),v=n(1),m=n(8),y=n(5),_=((i={})[l.BOUNDARYSHAPE.ROUNDEDPOLYGON]=!0,i[l.BOUNDARYSHAPE.POLYGON]=!0,i[l.BOUNDARYSHAPE.NEWBOUNDARY1]=!0,i),E=e.SVG,A=f.extend({type:l.VIEW_TYPE.BOUNDARY,sbEvents:{dblclick:"onDblClick",mouseover:"onMouseover",mouseout:"onMouseout",mouseup:"onMouseup",mousedown:"_onMouseDown",contextmenu:"_onContextMenu"},hammerEvents:{press:"_onPress"},__style:{boundaryActionPath:{fill:"none",stroke:"#1E80E7","stroke-opacity":"0"},boundaryActionPath__mouseover:{"stroke-opacity":"0.5"}},initialize:function(){var t=this;this.selectBox=null,this.position={x:0,y:0},this.bounds={x:0,y:0,height:0,width:0},this.boundaryGroup=(new E.G).data("name","boundary-group"),this.boundaryPath=(new E.Path).data("name","boundary-path"),this.boundaryActionPath=(new E.Path).data("name","boundary-action-path"),this.style(this.boundaryActionPath,"boundaryActionPath"),this.boundaryTitleGroup=(new E.G).data("name","boundary-title-group"),this.boundaryTitle=(new E.Text).data("name","boundary-title"),this.boundaryTitleBG=(new E.Rect).data("name","boundary-title-bg"),this.boundaryTitleGroup.add(this.boundaryTitleBG),this.boundaryTitleGroup.add(this.boundaryTitle),this.boundaryGroup.add(this.boundaryPath).add(this.boundaryActionPath).add(this.boundaryTitleGroup),this.setElement(this.boundaryGroup.node),"readonly"!==r.env.SB_MODE&&(this.listenTo(this.model,"changeStyle",this.onChangeStyle),this.listenTo(this.model,"setStyleObject",function(){return t.parent().refresh()}),this.listenTo(this.model,"change:title",this.onChangeBoundaryTitle),this.listenTo(this.model,"change:range",this.onRangeChange)),this.isSelected=!1,this.selectBox=new p({refView:this}),this.on("afterAncestorChange",function(){t.editDomain()&&t.editDomain().content().selectBoxContainer.add(t.selectBox.selectBoxGroup)})},initStyle:function(){this.setLineColor(c.default.getStyleValue(this,l.STYLE_KEYS.LINE_COLOR)),this.setFillColor(c.default.getStyleValue(this,l.STYLE_KEYS.FILL_COLOR)),this.setBorderWidth(parseInt(c.default.getStyleValue(this,l.STYLE_KEYS.LINE_WIDTH)||0)),this.setOpacity(c.default.getStyleValue(this,l.STYLE_KEYS.OPACITY)),this.setLinePattern(c.default.getStyleValue(this,l.STYLE_KEYS.LINE_PATTERN),{auto:!0}),this.boundaryShape=c.default.getStyleValue(this,l.STYLE_KEYS.SHAPE_CLASS)},changeHooks:(o={},o[l.STYLE_KEYS.SHAPE_CLASS]=function(t){this.setBoundaryShape(t)},o[l.STYLE_KEYS.FILL_COLOR]=function(t){this.setFillColor(t)},o[l.STYLE_KEYS.LINE_PATTERN]=function(t){this.setLinePattern(t)},o[l.STYLE_KEYS.LINE_COLOR]=function(t){this.setLineColor(t)},o[l.STYLE_KEYS.LINE_WIDTH]=function(t){this.setBorderWidth(t)},o[l.STYLE_KEYS.OPACITY]=function(t){this.setOpacity(t)},o[l.STYLE_KEYS.FONT_WEIGHT]=function(t){this.setFontWeight(t)},o[l.STYLE_KEYS.FONT_STYLE]=function(t){this.setFontStyle(t)},o[l.STYLE_KEYS.FONT_SIZE]=function(){this.parent().refresh()},o[l.STYLE_KEYS.TEXT_COLOR]=function(t){this.setTextColor(t)},o[l.STYLE_KEYS.TEXT_DECORATION]=function(t){this.setTextDecoration(t)},o[l.STYLE_KEYS.TEXT_ALIGN]=function(){this.setTextAlign()},o[l.STYLE_KEYS.TEXT_TRANSFORM]=function(){this.onChangeBoundaryTitle()},o),onChangeBoundaryTitle:function(){this.render(),this.parent().refresh()},renderTitle:function(){var t=this.model,e=m.getTransformedText(t.get("title")||"",c.default.getStyleValue(this,l.STYLE_KEYS.TEXT_TRANSFORM)),n=this.boundaryTitleGroup,r=this.boundaryTitleBG,i=this.boundaryTitle;if(!e||this.shouldPreventTitle())return n.hide(),this;i.text(e),i.attr({fill:c.default.getStyleValue(this,l.STYLE_KEYS.TEXT_COLOR),"font-family":c.default.getStyleValue(this,l.STYLE_KEYS.FONT_FAMILY),"font-size":parseInt(c.default.getStyleValue(this,l.STYLE_KEYS.FONT_SIZE)||0),"font-style":c.default.getStyleValue(this,l.STYLE_KEYS.FONT_STYLE),"font-weight":c.default.getStyleValue(this,l.STYLE_KEYS.FONT_WEIGHT),"text-decoration":c.default.getStyleValue(this,l.STYLE_KEYS.TEXT_DECORATION)});var o=c.default.getStyleValue(this,l.STYLE_KEYS.TEXT_ALIGN),a={left:"start",center:"middle",right:"end"};(0,u.default)(this.boundaryTitle.node.querySelectorAll("tspan")).forEach(function(t){t.setAttribute("text-anchor",a[o])});var s=i.bbox();r.attr({width:s.width+20,height:s.height+10}),this.setBoundaryTitleBGFillColor(),this.setBoundaryTitleBGStrokeColor(),this.setBoundaryTitleBGStrokeWidth();var h=r.bbox(),d=h.cx,f=h.cy;"center"===o&&(d+=s.width/2),"right"===o&&(d+=s.width),i.cx(d).cy(f),n.show()},onRangeChange:function(){this.resetBoundaryPosition(),this.parent().refresh()},resetBoundaryPosition:function(){var t=this.parent(),e=this.model,n=null,r=-1,i=null,o=-1,a=t.boundaries.entries(),u=Array.isArray(a),c=0;for(a=u?a:(0,s.default)(a);;){var l;if(u){if(c>=a.length)break;l=a[c++]}else{if((c=a.next()).done)break;l=c.value}var h=l,d=h[0],f=h[1];if(f.model.get("id")===e.get("id")){n=f,r=d;break}}if(n){var p=e.rangeStart,g=e.rangeEnd,v=t.boundaries.entries(),m=Array.isArray(v),y=0;for(v=m?v:(0,s.default)(v);;){var _;if(m){if(y>=v.length)break;_=v[y++]}else{if((y=v.next()).done)break;_=y.value}var E=_,A=E[0],S=E[1];if(S.model.get("id")!==e.get("id")){var T=S.model,x=T.rangeStart,b=T.rangeEnd;(p<x||p===x&&g>=b)&&(i=S,o=A)}}i&&(i.boundaryGroup.before(n.boundaryGroup),t.boundaries.splice(o,0,n),r>o?t.boundaries.splice(r+1,1):t.boundaries.splice(r,1))}},onChangeStyle:function(t){this.changeHooks[t]&&this.changeHooks[t].call(this,c.default.getStyleValue(this,t))},select:function(){return this.isSelected=!0,this.selectBox.show().transparent(!1),this},deselect:function(){return this.isSelected=!1,this.selectBox.hide(),this},onDblClick:function(){},onMouseover:function(t){this.isSelected||1===t.which||(this.style(this.boundaryActionPath,"boundaryActionPath__mouseover"),this.selectBox.show().transparent(!0))},_onMouseDown:function(t){if(t.stopPropagation(),3===t.which)return this._dispatchContextMenu(t)},onMouseup:function(t){this.editDomain().eventBus.trigger("boundaryMouseUp",this)},_onPress:function(t){t.stopPropagation(),this._pressContextMenuCheckHandle()},onMouseout:function(t){t.stopPropagation(),this.style(this.boundaryActionPath,"boundaryActionPath"),this.isSelected||this.selectBox.hide()},_onContextMenu:function(t){t.preventDefault(),t.stopPropagation(),100!==t.detail&&t.stopImmediatePropagation()},remove:function(){var t=this.parent();v.each(t.boundaries,function(e,n){e===this&&t.boundaries.splice(n,1)},this);var e=this.editDomain();e&&e.selectionManager&&e.selectionManager.removeFromSelection(this),e&&e.model2View&&delete e.model2View[this.model.id],this.parent(null),this.boundaryGroup.remove(),this.selectBox.remove(),this.stopListening()},setBoundaryShape:function(t){this.boundaryShape=t,this.render(this.min,this.max),this.parent().refresh()},setLinePattern:function(t){var e;switch(this.linePattern=t,t){case"dash":e="9, 3";break;case"dot":e="3, 3";break;case"dash-dot":e="9, 3, 3, 3";break;case"dash-dot-dot":e="9, 3, 3, 3, 3, 3";break;default:e=""}this.boundaryPath.attr({"stroke-dasharray":e})},setBorderWidth:function(t){this.boundaryPath.attr({"stroke-width":t});var e=parseInt(t)+5;this.boundaryActionPath.attr({"stroke-width":e}),this.setBoundaryTitleBGStrokeWidth(t)},setOpacity:function(t){this.boundaryPath.attr({"fill-opacity":t})},setFontWeight:function(t){this.boundaryTitle.attr({"font-weight":t}),this.renderTitle()},setFontStyle:function(t){this.boundaryTitle.attr({"font-style":t})},setTextDecoration:function(t){this.boundaryTitle.attr({"text-decoration":t})},setTextAlign:function(){this.renderTitle()},setTextColor:function(t){this.boundaryTitle.attr({fill:t})},setLineColor:function(t){this.boundaryPath.attr("stroke",t),this.setBoundaryTitleBGStrokeColor(t)},setFillColor:function(){var t=this.editDomain().content().isGradient(),e=c.default.getStyleValue(this,l.STYLE_KEYS.FILL_COLOR);if(t){var n=this.parent().svg.gradient("linear",function(t){t.at(0,"#fff"),t.at(1,e)});n.from(0,0).to(0,1),this.boundaryPath.attr({fill:n})}else this.boundaryPath.attr({fill:e});return this.setBoundaryTitleBGFillColor(e),this},setBoundaryTitleBGFillColor:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:c.default.getStyleValue(this,l.STYLE_KEYS.FILL_COLOR);this.boundaryTitleBG.attr({fill:t})},setBoundaryTitleBGStrokeColor:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:c.default.getStyleValue(this,l.STYLE_KEYS.LINE_COLOR);this.boundaryTitleBG.attr({stroke:t})},setBoundaryTitleBGStrokeWidth:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:parseInt(c.default.getStyleValue(this,l.STYLE_KEYS.LINE_WIDTH)||0);this.boundaryTitleBG.attr({"stroke-width":t})},getRealPosition:function(){var t=v.extend({},this.position);return this.parent().isCentralBranch()?this.position:t},getClientRect:function(){var t=(0,a.default)({},this.bounds);t.x=-t.width/2,t.y=-t.height/2;var e=h.default.add(this.getRealPosition(),t),n=this.editDomain().getPositionTransfer().realToClient(e);return{x:n.x,y:n.y,width:t.width,height:t.height}},render:function(t,e){var n=this.parent();if(n&&(this.initStyle(),this.renderTitle(),t&&e)){var r=(0,a.default)({},t);g[this.boundaryShape](this,r,e),this.boundaryTitleGroup.move(r.x-5,r.y-5),this.setPosition((r.x+e.x)/2,(r.y+e.y)/2),this.bounds.x=r.x,this.bounds.y=r.y,this.bounds.width=e.x-r.x,this.bounds.height=e.y-r.y,this.selectBox.render(n.getDirection()),this.min=t,this.max=e,this._isRender=!0,this.trigger("afterRealPosChange")}},setPosition:function(t,e){if(void 0!==t&&void 0!==e)return this.position.x=t,this.position.y=e,this.position},getPosition:function(){return this.position},move:function(t,e){return t===this.position.x&&e===this.position.y?this:(this.boundaryGroup.translate(t,e),this.position.x=t,this.position.y=e,this.trigger("change:position",v.extend({},this.position),this),this)},getEditContent:function(){return this.model.get("title")||""},saveEdit:function(t){this.model.changeTitle(t)},getTextClientStyle:function(){var t=this.boundaryGroup.node.getBoundingClientRect(),e=t.top,n=t.left,r=t.width,i=t.height,o=this.boundaryTitle.node,s={fontSize:o.getAttribute("font-size")||12,fontFamily:o.getAttribute("font-family")};return(0,a.default)({top:e,left:n,width:r,height:i},s)},hideTitle:function(){this.boundaryTitle.attr({opacity:0})},showTitle:function(){this.boundaryTitle.attr({opacity:1})},shouldPreventTitle:function(){return _[this.boundaryShape]},shouldHide:function(){return this.parent().isBoundariesHide()}});y.wrapReadOnly(A,["onMouseover","select"]),t.exports=A}).call(e,n(6),n(28))},function(t,e,n){"use strict";(function(e){var r,i=(r=n(3))&&r.__esModule?r:{default:r},o=n(34),a=e.SVG,s=n(44),u=s.isUndef,c=s.posSub,l=s.posAdd,h=n(5).isMobile,d=o.extend({type:"cell",sbEvents:{dblclick:"eventHandler"},hammerEvents:{doubletap:"gestureHandler"},initialize:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];this.bounds=t,this.isNull=r,this._view=e,this._isFront=!1,this._cellEvents=n,this.svg=new a.G,this.initPath(t);var i=this.getSvg().node;this.setElement(i);var o=this.bounds,s=o.x,u=o.y;this.svg.translate(s,u)},afterMounted:function(){var t=this._view;u(t)||t.setProxy(this)},initPath:function(t){var e=this.bounds,n=(e.x,e.y,e.width),r="M 0 0 l "+n+" 0 l 0 "+e.height+" l "+-n+" 0 Z";this.borderPath=(new a.Path).attr({d:r}),this.fillPath=(new a.Path).attr({d:r}),this.selectedPath=(new a.Path).attr({d:r,display:"none",fill:"none",stroke:"rgb(94, 187, 254)","data-name":"cell-select-box"}),this.svg.add(this.fillPath).add(this.borderPath).add(this.selectedPath)},render:function(t){this.drawLine(t)},drawLine:function(t){var e=t.color,n=t.borderWidth,r=t.borderColor,i="none"===e?{opacity:0}:{opacity:1,fill:e};this.borderPath.attr({fill:"none",stroke:r,"stroke-width":n}),this.fillPath.attr(i),this.selectedPath.attr({"stroke-width":4})},eventHandler:function(t){if(!h){var e=this._cellEvents[t.type];if(!u(e))return e(t);this.defaultHandler(t)}},gestureHandler:function(t){var e=this._cellEvents[t.type];if(!u(e))return e(t)},defaultHandler:function(t){this.isNull||("mouseover"===t.type?this.displayHover():"mouseout"===t.type&&this.displayDehover())},getSvg:function(){return this.svg},createDragView:function(){var t=this.editDomain().content().getCloneG(),e=this.bounds,n=e.width,r=e.height,o={x:-n/2,y:-r/2},s=this.getRealPosition(),u=c(s,o),l=u.x,h=u.y,d="M "+o.x+" "+o.y+" l "+n+" 0 l 0 "+r+" l "+-n+" 0 Z",f=new a.Path;return f.attr((0,i.default)({d:d},{fill:"#f44336",stroke:"#f44336","stroke-width":"3"})),t.add(f),t.move(l,h),t},getRealPosition:function(){var t=this.parent().getRealPosition();return l(this.bounds,t)},removeSelf:function(){this.parent(null),this.getSvg().remove(),this._view&&this._view.deleteProxy(),delete this._view},displaySelect:function(){this._front(),this.selectedPath.attr({display:"block",stroke:"rgb(94, 187, 254)"})},displayDeselect:function(){this._back(),this.selectedPath.attr({display:"none"})},displayHover:function(){this._front(),this.selectedPath.attr({display:"block",stroke:"rgb(154, 213, 255)"})},displayDehover:function(){this._back(),this.selectedPath.attr({display:"none"})},displayDeFocus:function(){this._front(),this.selectedPath.attr({display:"block",stroke:"#9f9f9f"})},_front:function(){if(!this._isFront){this._isFront=!0;var t=this.getSvg();t.parent&&t.front()}},_back:function(){if(this._isFront){this._isFront=!1;var t=this.getSvg();t.parent&&t.back()}},getSelectedPath:function(){return this.selectedPath},getNextEventTarget:function(t){return u(this._view)?t.parentNode:this._view.getSvg().node}});t.exports=d}).call(e,n(6))},function(t,e,n){"use strict";(function(e){var r,i=u(n(38)),o=u(n(4)),a=n(0),s=u(n(64));function u(t){return t&&t.__esModule?t:{default:t}}var c=n(5),l=n(14),h=n(20),d=n(13),f=n(21),p=e.SVG,g=d.EXT_RADIUS,v=d.COL_RADIUS,m=Math.max(g,v),y={fontFamily:"Helvetica, Arial, sans-serif",fontSize:10,fontWeight:300},_={fontFamily:"Helvetica, Arial, sans-serif",fontSize:12,fontWeight:500},E=f.extend({type:"collapseextend",sbEvents:{click:"onClick",mousedown:"onMouseDown",dblclick:"onDblClick",mouseover:"onMouseover",mouseout:"onMouseout"},hammerEvents:{tap:"_onTap"},changeHooks:(r={},r[a.STYLE_KEYS.LINE_COLOR]="setLineColor",r[a.STYLE_KEYS.LINE_WIDTH]="setLineWidth",r),initialize:function(){var t=this;this.ecg=(new p.G).style("cursor","hand").hide(),this.connectPath=this.ecg.put(new p.Line(0,0,-6,9)).attr({"stroke-width":"0"}),this._initFoldBtn(),this._initExtBtn(),this._initActionArea(),this._initHoverArea(),this.setElement(this.ecg.node),this.listenTo(this.model,"change:branch",function(){t.render()}),this.listenTo(this.model,a.EVENTS.SE_BRANCH_COLLAPSE_TOGGLE,function(e){var n=t.parent(),r=t.getContext();r&&r.trigger(a.EVENTS.SE_BRANCH_COLLAPSE_TOGGLE,[{target:n,oldValue:!e,newValue:e}])}),Object.defineProperty(this,"bounds",{get:function(){return this._bounds},set:function(t){this._bounds=t;var e=this.parent(),n=parseInt(o.default.getStyleValue(e,a.STYLE_KEYS.BORDER_LINE_WIDTH)||0),r=e.topicView,i=h[r.topicShapeStyle];if(e.collapse){if(this.bounds&&!this.isHide()){var s=l.merge(r.shapeBounds,this.bounds),u=i.getDrawBounds(s,n);i.fillTopicShapeSelectBox(r,u),r.topicCustomWidthControlBar&&r.topicCustomWidthControlBar.render()}}else{var c=i.getDrawBounds(r.shapeBounds,n);i.fillTopicShapeSelectBox(r,c),r.topicCustomWidthControlBar&&r.topicCustomWidthControlBar.render()}}})},_initActionArea:function(){this._s$actionArea=this.ecg.circle(3*m).data("name","action-area").fill("none"),this._s$actionArea.node.style.pointerEvents="visible"},_initHoverArea:function(){this._svgHoverArea=(new p.G).rect().data("name","collapse-extend-hover-area").opacity(0)},render:function(t,e){void 0===t||"function"!=typeof this[this.changeHooks[t]]?this.isHide()?this.ecg.hide():(this.ecg.show(),this.model.isCollapse()?(this._renderExtBtn(),this.setLineWidth(this._getLineWidth())):(this._renderFoldBtn(),this.setLineWidth(0)),this.setLineColor(o.default.getStyleValue(this.parent(),a.STYLE_KEYS.LINE_COLOR))):this[this.changeHooks[t]](o.default.getStyleValue(this.parent(),t))},_initFoldBtn:function(){var t=v,e="M 2, "+t+" L "+(2*t-2)+", "+t;this.foldG=this.ecg.put(new p.G),this.circleFill=this.foldG.circle(2*t),this.ecCircle=this.foldG.circle(2*t).fill("none"),this.path=this.foldG.put(new p.Path).attr({d:e})},_initExtBtn:function(){var t=g;this.extG=this.ecg.put(new p.G),this.EcircleFill=this.extG.circle(2*t),this.EecCircle=this.extG.circle(2*t).fill("none").stroke({width:1}),this.Etext=this.extG.put(new p.Text)},_renderFoldBtn:function(){this.ecg.data("name","collapse-extended"),this.extG.hide(),this.config(a.CONFIG.HIDE_COLLAPSE_BTN)?(this._s$actionArea.hide(),this._hideFoldBtn(),this._svgHoverArea.hide()):(this._s$actionArea.show(),this._s$actionArea.x(-m/2).y(-m/2-1),this.renderHoverArea(),this._svgHoverArea.show(),this.parent().isSelected?this._showFoldBtn():this._hideFoldBtn())},_renderExtBtn:function(){this.ecg.data("name","collapse-folded"),this.extG.show(),this._svgHoverArea.hide(),this._hideFoldBtn(),this._s$actionArea.show(),this._s$actionArea.x(-m/2).y(-m/2);var t=this.parent().model.getDescendantList().length,e=void 0,n=void 0;t>99?(e="",n=_):(e=t+"",n=y),this.Etext.text(e).attr({"font-size":parseInt(n.fontSize||0),"font-family":n.fontFamily,"font-weight":n.fontWeight});var r=this.callService(a.SERVICE_NAME.GET_TEXT_SIZE,e,n),i=r.width,o=r.height,s=(2*g-i)/2,u=g-o+.5;this.Etext.translate(s,u)},_showFoldBtn:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:120;this.foldG.animate(t,"-").scale(1,1).translate(0,0)},_hideFoldBtn:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;this.foldG.animate(t,"-").scale(.001,.001).translate(v,v)},renderHoverArea:function(){var t=this.parent(),e=t.topicView.shapeBounds,n=s.default[t.getStructureClass()],r=n.calcSpacingMajor(t),i=n.getSourceOrientation(),o=void 0,u=void 0,c=void 0,l=void 0;i===a.DIRECTION.RIGHT?(o=e.width/2,u=-e.height/2,c=e.height,l=r):i===a.DIRECTION.LEFT?(o=-e.width/2-r,u=-e.height/2,c=e.height,l=r):i===a.DIRECTION.UP?(o=-e.width/2,u=-e.height/2-r,c=r,l=e.width):i===a.DIRECTION.DOWN&&(o=-e.width/2,u=e.height/2,c=r,l=e.width),this._svgHoverArea.attr({x:o,y:u,height:c,width:l})},setLineColor:function(t){var e=o.default.getStyleValue(this.getContext().getSheetView(),a.STYLE_KEYS.FILL_COLOR);this.circleFill.fill(e),this.ecCircle.stroke(t),this.path.stroke(t),this.EcircleFill.fill(e),this.EecCircle.stroke(t),this.Etext.attr({fill:t}),this.connectPath.stroke(t)},_getLineWidth:function(){return(0,i.default)(o.default.getStyleValue(this.parent(),a.STYLE_KEYS.LINE_WIDTH)||0)},setLineWidth:function(t){t=(0,i.default)(t)||0;var e=Math.max(0,t);this.connectPath.attr({"stroke-width":e})},onClick:function(t){c.isMobile||this.model.toggleCollapse()},_onTap:function(){this.model.toggleCollapse()},onDblClick:function(t){return t.stopPropagation(),!1},onMouseover:function(t){1!==t.which&&(this.ecCircle.attr({fill:o.default.getStyleValue(this.parent(),a.STYLE_KEYS.LINE_COLOR),"fill-opacity":.15}),this.EecCircle.attr({fill:o.default.getStyleValue(this.parent(),a.STYLE_KEYS.LINE_COLOR),"fill-opacity":.15}))},onMouseout:function(t){this.ecCircle.fill("none"),this.ecCircle.attr({"fill-opacity":null}),this.EecCircle.fill("none"),this.EecCircle.attr({"fill-opacity":null})},move:function(t,e){this.ecg.translate(t,e);var n=2*m;return this.bounds={x:t,y:e,width:n,height:n},this},drawConnection:function(t){return this.connectPath.attr(t),this},show:function(){this.model.isCollapse()&&!this.config(a.CONFIG.HIDE_COLLAPSE_BTN)&&(this.ecg.show(),this._hide=!1)},hide:function(){this.ecg.hide(),this._hide=!0},isHide:function(){return this._hide},hover:function(){this.isHide()||this.model.isCollapse()||this.config(a.CONFIG.HIDE_COLLAPSE_BTN)||this._showFoldBtn()},dehover:function(){this.isHide()||this.model.isCollapse()||this._hideFoldBtn()},getHoverAreaSvg:function(){return this._svgHoverArea}});t.exports=E}).call(e,n(6))},function(t,e,n){"use strict";(function(e){var r,i=(r=n(3))&&r.__esModule?r:{default:r},o=n(21),a=e.SVG,s=n(1),u=n(0),c=u.TOPIC_TYPE,l=u.VIEW_TYPE,h=o.extend({type:l.CONNECTION,sbEvents:{click:"onClick",mouseover:"onMouseover",mouseout:"onMouseout"},initialize:function(t){var e=t.branchView;this.startView=e,this.endView=null,this.connectionPath=(new a.Path).data("name","connection").attr("stroke-linecap","round"),this.translate={x:0,y:0},this.parent(this.startView),e.model.type()===c.SUMMARY&&(this.connectionSelectBox=(new a.Path).data("name","connection-select-box").attr("opacity","0")),this.connectionSelectBox&&this.setElement(this.connectionSelectBox.node)},render:function(){this.startView.drawConnectionWithParent()},attr:function(t){if(arguments.length>1)throw"Dont use this way";if(s.isObject(t)&&void 0!==t.d&&(this.translate={x:0,y:0},this.connectionPath.transform(this.translate)),"0"===t["stroke-width"]&&this.startView.model.type()!==c.CALLOUT&&(t.d=""),this.connectionPath.attr.call(this.connectionPath,t),this.connectionSelectBox){var e=parseInt(t["stroke-width"]);isNaN(e)?e=void 0:e+=5,this.connectionSelectBox.attr.call(this.connectionSelectBox,(0,i.default)({},t,{"stroke-width":e,opacity:void 0}))}return this},activate:function(t){this.connectionSelectBox&&this.connectionSelectBox.attr("opacity",t?"0.2":"0.5")},deactivate:function(){this.connectionSelectBox&&this.connectionSelectBox.attr("opacity","0")},onClick:function(t){this.editDomain().selectionManager.selectSingle(this.startView)},onMouseover:function(t){this.startView.onMouseover(t)},onMouseout:function(t){this.startView.onMouseout(t)},remove:function(){return this.arrowMarker&&(this.arrowMarker.remove(),this.arrowMarker=void 0),this.connectionSelectBox&&this.connectionSelectBox.remove(),this.connectionPath.remove(),this},dmove:function(t,e){return this.translate.x+=t,this.translate.y+=e,this.connectionPath.transform(this.translate),this.connectionSelectBox&&this.connectionSelectBox.transform(this.translate),this},show:function(){this.connectionPath.show(),this.connectionSelectBox&&this.connectionSelectBox.show()},hide:function(){this.connectionPath.hide(),this.connectionSelectBox&&this.connectionSelectBox.hide()},getPath:function(){return this.connectionPath}});t.exports=h}).call(e,n(6))},function(t,e,n){"use strict";(function(e){var r,i,o=(i=n(4))&&i.__esModule?i:{default:i},a=n(0),s=n(8),u=n(21),c=n(10),l=e.SVG,h=u.extend({type:"fishtail",initialize:function(){this.svg=(new l.G).data("name","fish-tail").style("pointer-events","none"),this.fishTailFill=this.svg.put(new l.Path).data("name","fish-tail-fill"),this.fishTailBorder=this.svg.put((new l.Path).data("name","fish-tail-border")),this.fishTailBorder.fill("none"),this.fishBackbone=this.svg.put(new l.Path).data("name","fish-backbone"),this.bounds={x:0,y:0,width:0,height:0},this.position={x:0,y:0},this.setElement(this.svg.node)},addToBranch:function(t){this.parent(t),t.topicView.topicGroup.before(this.svg),this.initStyle()},parent:function(t){if(void 0===t)return this._parent;this._parent=t},changeHooks:(r={},r[a.STYLE_KEYS.FILL_COLOR]=function(t){this.setFillColor(),this.setBorderColor()},r[a.STYLE_KEYS.BORDER_LINE_WIDTH]=function(){this.setBorderWidth(),this.setBorderColor()},r[a.STYLE_KEYS.BORDER_LINE_COLOR]=function(){this.setBorderColor()},r),changeStyle:function(t,e){var n=this.changeHooks[t];if("function"==typeof n){var r=[].slice.call(arguments,1);n.apply(this,r)}},initStyle:function(){this.setBorderColor(),this.setBorderWidth(),this.setFillColor()},render:function(t,e){this.direction=t;var n,r=this.parent().topicView.bounds;if(t===a.DIRECTION.LEFT)n="M 0 0 L 80 "+r.y+" L 80 "+(r.y+r.height)+"z",this.bounds={x:0,y:r.y,height:r.height,width:100};else{if(t!==a.DIRECTION.RIGHT)return void console.log("unexpected argument");n="M 0 0 L -80 "+r.y+" L "+-80+" "+(r.y+r.height)+"z",this.bounds={x:-100,y:r.y,height:r.height,width:100}}this.fishTailBorder.attr({d:n}),this.fishTailFill.attr({d:n}),this.position.x=e.x,this.position.y=e.y,this.svg.move(e.x,e.y),this.drawBackbone(t)},remove:function(){this.parent(null),this.svg.remove()},setBorderWidth:function(){var t=parseInt(o.default.getStyleValue(this.parent(),a.STYLE_KEYS.BORDER_LINE_WIDTH)||0);t<=.5&&(t=1),this.fishTailBorder.attr({"stroke-width":t}),this.fishBackbone.attr({"stroke-width":t})},setBorderColor:function(){var t=o.default.getStyleValue(this.parent(),a.STYLE_KEYS.BORDER_LINE_COLOR);(parseInt(o.default.getStyleValue(this.parent(),a.STYLE_KEYS.BORDER_LINE_WIDTH)||0)<=.5||"none"===t)&&(t=o.default.getStyleValue(this.parent(),a.STYLE_KEYS.FILL_COLOR)),this.fishTailBorder.attr({stroke:t}),this.fishBackbone.attr({stroke:t,fill:t})},setFillColor:function(){s.setFillColor(this.parent().editDomain(),this.fishTailFill,o.default.getStyleValue(this.parent(),a.STYLE_KEYS.FILL_COLOR))},drawBackbone:function(t){t=t||this.direction;var e=this.parent().topicView.bounds,n=c.isLineTapered(this.parent())?10:0;if(t===a.DIRECTION.LEFT){var r=e.x+e.width-this.position.x;this.fishBackbone.attr({d:"M "+r+" "+-n+" L 0 0 L "+r+" "+n+" z"})}else{if(t!==a.DIRECTION.RIGHT)throw new Error("unexpected argument");var i=e.x-this.position.x;this.fishBackbone.attr({d:"M "+i+" "+-n+" L 0 0 L "+i+" "+n+" z"})}},show:function(){this.svg.show()},hide:function(){this.svg.hide()}});t.exports=h}).call(e,n(6))},function(t,e,n){"use strict";(function(e){var r,i=(r=n(22))&&r.__esModule?r:{default:r},o=n(8),a=n(34),s=n(9),u=e.SVG,c=n(5),l=(n(212),n(1)),h=n(0),d=h.CONFIG,f=h.UI_STATUS,p=h.MODULE_NAME,g=h.VIEW_TYPE,v=h.EVENTS,m=n(336),y=200,_=a.extend({type:g.IMAGE,sbEvents:{mousedown:"onMousedown",dblclick:"onDblClick",mouseover:"onMouseover",mouseout:"onMouseout",mouseup:"onMouseup",contextmenu:"_onContextMenu"},hammerEvents:{press:"onPress"},initialize:function(){var t=this;this.moving=!0,this.bounds={x:0,y:0,width:0,height:0},this.position={x:0,y:0},this.imageGroup=(new u.G).data("name","image-group"),this._s$linkWrapper=this.imageGroup.put((new u.A).attr("onclick","return false")),this.once(v.AFTER_ANCESTOR_CHANGE,function(){return t._initLinkWrapperHref()}),this.loadImage=this._s$linkWrapper.put(new u.Image).data("name","topic-img-load"),this.image=this._s$linkWrapper.put(new u.Image).data("name","topic-img").attr("preserveAspectRatio","none").hide(),this.resizeBox=new m({originImage:this.image,refView:this}),this.resizeBox.parent(this),this.imageGroup.add(this.resizeBox.svg),this.setElement(this.imageGroup.node),this.listenTo(this.resizeBox,"resize",function(e){t.trigger("resize",e)}),this.isSelected=!1,this._imageDefaultSize=null},select:function(){return this.isSelected=!0,this.resizeBox.active(),this},deselect:function(){return this.isSelected=!1,this.resizeBox.hide(),this},onMouseover:function(t){t.stopPropagation(),this.resizeBox.isActive||1===t.which||this.resizeBox.show()},onMouseout:function(t){t.stopPropagation(),!this.resizeBox.isActive&&this.resizeBox.hide(),this.isSelected||this.resizeBox.hide()},onDblClick:function(t){t.stopPropagation()},onMouseup:function(t){t.stopPropagation()},onMousedown:function(t){if(t.stopPropagation(),3===t.which)return this._dispatchContextMenu(t);if(1===t.which){var e=t.target||t.srcElement;if("image"===e.nodeName||"fullBox"===e.getAttribute("data-name")){var n=this.getModule(p.DRAG);n&&n.prepareStartDrag(t,this)}}},onPress:function(t){t.stopPropagation(),this._pressContextMenuCheckHandle();var e=t.target||t.srcElement;if("image"===e.nodeName||"fullBox"===e.getAttribute("data-name")){var n=this.getModule(p.DRAG);n&&n.prepareStartDrag(t,this)}},_onContextMenu:function(t){t.preventDefault(),t.stopPropagation(),100!==t.detail&&t.stopImmediatePropagation()},resize:function(t){var e=t.width,n=t.height;if(void 0===e||void 0===n)return this.respondToReset();this.bounds={x:-e/2,y:-n/2,width:e,height:n},this.image.size(e,n).center(0,0),this.resizeBox.size(e,n)},respondToReset:function(){this.getContext().model.getUndo().isExecuting()||this._imageDefaultSize&&this.trigger("resize",this._imageDefaultSize)},render:function(t){var e=this;if(!this.reRender){var n=this.parent().model.getImageData();if(!l.isEmpty(n)&&(t||(this.loadImage.load(c.urlNormalize(this.config(d.URL_PREFIX)+"images/ref_by_js/loading_image.svg")),this.loadImage.x(-32).y(-32),this.resizeBox.size(64,64),this.bounds={x:-32,y:-32,width:64,height:64}),n.src)){var r=this.getModule(p.SEMAPHORE);r.increase(f.LOADING_IMAGE),this.base64Src?this.image.load(this.base64Src).loaded(i.bind(this)):c.isXapResource(n.src)?this.config(d.XAP_LOADER)(n.src).then(function(t){e.image.load(t).loaded(i.bind(e))}):this.image.load(n.src).loaded(i.bind(this)),s(this.image.node).on("error",function(){r.decrease(f.LOADING_IMAGE)})}}function i(t){var e=void 0,i=void 0;if(t.width>y){var o=t.width/y;e=y,i=t.height/o}else i=t.height,e=t.width;this._imageDefaultSize={width:e,height:i};var a=n.width||e,s=n.height||i,u=a/2,c=s/2;a&&s&&(this.image.size(a,s).x(-u).y(-c),this.resizeBox.size(a,s),this.reRender=!0,this.bounds={x:-u,y:-c,width:a,height:s},this.image.show(),this.loadImage.remove(),a===n.width&&s===n.height?this.trigger("reRenderImage"):this.selientlyModifySize(a,s)),r.decrease(f.LOADING_IMAGE)}},_initLinkWrapperHref:function(){var t=this.parent().model.getImageData();if(!l.isEmpty(t)){var e=encodeURI(t.src);0===e.indexOf("xap:resources/")&&(e=e.replace("xap:resources/","http://localhost/")),this._s$linkWrapper.node.setAttribute("href",e),this._s$linkWrapper.node.setAttributeNS("http://www.w3.org/1999/xlink","href",e)}},selientlyModifySize:function(t,e){if(this.getContext()&&this.getContext().model){var n=this.getContext().model.getUndo();n.setRecord(!1),this.trigger("resize",{width:t,height:e}),n.setRecord(!0)}},renderBase64:function(t){},remove:function(){var t=this.parent(),e=t.editDomain();e&&e.selectionManager&&e.selectionManager.removeFromSelection(this),delete t.image,this.parent(null),this.imageGroup.remove(),this.resizeBox.parent(null),this.resizeBox.remove(),e&&e.model2View},move:function(t,e){return t===this.position.x&&e===this.position.y?this:(this.imageGroup.translate(t,e),this.position.x=t,this.position.y=e,this.trigger("change:position",l.extend({},this.position),this),this)},getSvg:function(){return this.imageGroup},getRealPosition:function(){var t=l.extend({},this.position),e=this.parent(),n=(e=e.parent()).getRealPosition();return t.x+=n.x,t.y+=n.y,t},createDragView:function(){var t=o.cloneImage(this),e=this.getRealPosition();return t.move(e.x,e.y),t},getClientRect:function(){var t=this.bounds,e=i.default.add(this.getRealPosition(),t),n=this.editDomain().getPositionTransfer().realToClient(e);return{x:n.x,y:n.y,width:t.width,height:t.height}}});c.wrapReadOnly(_,["select","onMouseover"]),t.exports=_}).call(e,n(6))},function(t,e,n){"use strict";e.__esModule=!0;var r,i,o=d(n(3)),a=d(n(38)),s=d(n(11)),u=d(n(4)),c=d(n(5)),l=d(n(34)),h=n(0);function d(t){return t&&t.__esModule?t:{default:t}}var f=h.VIEW_TYPE.NOTE,p=h.VIEW_TYPE.TASK,g=h.VIEW_TYPE.COMMENT,v=h.VIEW_TYPE.HREF,m=h.VIEW_TYPE.ATTACHMENT,y=h.VIEW_TYPE.AUDIO,_=((r={fill:"none",stroke:"rgb(46, 189, 255)","stroke-width":"1px"}).fill="rgb(46, 189, 255)",r["fill-opacity"]="0.3",r.display="none",r),E="jump",A=((i={})[m]="",i[y]="",i[g]="",i[v]="",i[E]="",i[f]="",i[p]="",i.more="",i),S=l.default.extend({type:h.VIEW_TYPE.INFORMATION_ICON,sbEvents:{mousedown:"onMousedown",mouseover:"onMouseover",mouseout:"onMouseout",contextmenu:"_onContextMenu"},initialize:function(t){this.iconType=function(t){var e=(0,s.default)(t);if(e.length>1)return"more";var n=e[0];return function(t,e){var n={notesInfo:f,taskInfo:p,commentsInfo:g,audioNotesInfo:y};if("hrefInfo"===e){var r=t.split(":")[0];return"file"===r||"xap"===r?m:"xmind"===r?E:v}return n[e]}(t[n],n)}(t),this._hovering=!1},afterAncestorChange:function(){if(this.getContext()){var t,e,n=(t=this.parent().parent(),e=u.default.getStyleValue(t,h.STYLE_KEYS.FONT_SIZE)||0,(0,a.default)(e)+2);this.iconSize=n,this.bounds={x:0,y:0,width:n,height:n},this.initSVGStructure(),this.setElement(this.getSvg().node)}},initSVGStructure:function(){var t=this.iconSize,e=this.iconType,n=new SVG.G,r=new SVG.Path,i=new SVG.Text;i.text(A[e]).attr({"font-size":t,"font-family":"information-iconfont",transform:"translate(0 "+-t/12*5+")"}).addClass("icon-information");var a=c.default.generateRect(this.bounds,2,0,0);r.attr((0,o.default)({d:a},_)),n.add(i),n.add(r),this.s$Group=n,this.s$Select=r,this.s$Icon=i},render:function(){var t,e;this.s$Icon.attr({fill:(t=this.parent(),e=t.parent(),u.default.getStyleValue(e,h.STYLE_KEYS.TEXT_COLOR))})},onMousedown:function(t){if(t.stopPropagation(),3===t.which)return this._dispatchContextMenu(t)},_onContextMenu:function(t){t.preventDefault(),t.stopPropagation(),100!==t.detail&&t.stopImmediatePropagation()},onMouseover:function(t){this._hovering||1!==t.which&&(this._hovering=!0,this.s$Select.attr({display:""}))},onMouseout:function(t){this._hovering=!1,this.s$Select.attr({display:"none"})},getSvg:function(){return this.s$Group},getBranchView:function(){var t=this.parent();return t&&t.parent()},remove:function(){this.getSvg().remove()},move:function(t,e){this.getSvg().translate(t,e)}});e.default=S},function(t,e,n){"use strict";e.__esModule=!0;var r,i=u(n(3)),o=u(n(5)),a=n(0),s=u(n(34));function u(t){return t&&t.__esModule?t:{default:t}}var c=((r={fill:"none",stroke:"rgb(46, 189, 255)","stroke-width":"1px"}).fill="rgb(46, 189, 255)",r["fill-opacity"]="0.3",r.display="none",r),l=s.default.extend({type:a.VIEW_TYPE.MARKER,sbEvents:{mousedown:"onMousedown",mouseover:"onMouseover",mouseout:"onMouseout",contextmenu:"_onContextMenu"},initialize:function(t,e,n){this.markerId=t,this.markerMap=e,this.markerIconSize=n,this._hovering=!1,this._stable=!1},afterAncestorChange:function(){if(this.getContext()){var t=this.markerIconSize;this.bounds={x:0,y:0,width:t,height:t},this.initSVGStructure(),this.setElement(this.s$Group.node)}},initSVGStructure:function(){var t=this.markerId,e=this.markerIconSize,n=function(t,e){var n=t.getMarkerInfo(e),r=t.getMarkerGroupInfo(e);return!n||"true"===n.hidden||"true"===r.hidden}(this.markerMap,t),r=new SVG.Path,a=new SVG.Image,s=new SVG.G,u=o.default.generateRect(this.bounds,2,1,0);if(r.attr((0,i.default)({d:u},c)),this.markerMap.getMarkerUrl(this.config.bind(this),t).then(function(t){return a.load(t)}),a.size(e,e),s.add(a),s.add(r),!n){var l=e+1,h=(new SVG.Ellipse).size(l,l).cx(e/2).cy(e/2).fill("none").stroke("#fff").attr("stroke-width",1);s.add(h)}this.s$Select=r,this.s$Group=s},setStable:function(t){this._stable=t},onMouseover:function(t){this._hovering||1!==t.which&&(this._hovering=!0,this.s$Select.attr({display:""}),this._stable||this.getSvg().forward())},onMouseout:function(t){this._hovering&&(this._hovering=!1,this.s$Select.attr({display:"none"}),this._stable||this.getSvg().backward())},onMousedown:function(t){if(t.stopPropagation(),3===t.which)return this._dispatchContextMenu(t)},_onContextMenu:function(t){t.preventDefault(),t.stopPropagation(),100!==t.detail&&t.stopImmediatePropagation()},getSvg:function(){return this.s$Group},getMarkerId:function(){return this.markerId},getBranchView:function(){var t=this.parent(),e=t&&t.parent();return e&&e.parent()}});e.default=l},function(t,e,n){"use strict";(function(e){var r,i=(r=n(3))&&r.__esModule?r:{default:r};n(33);var o=e.SVG,a=n(81),s=n(44),u=s.getLabelRow,c=(s.getColumn,n(0).VIEW_TYPE),l={fontSize:12,fontFamily:"Helvetica, Arial, sans-serif",fontWeight:"normal",fontStyle:"normal"},h=a.extend({type:c.MATRIX_LABEL,model:{getStyle:function(t){return{textAlign:"left"}[t]},hasAncestor:function(){return null}},sbEvents:{mousedown:"onMousedown",mouseover:"onMouseOver",mouseout:"onMouseOut"},initialize:function(t,e,n,r){this._init(),this.text=t,this.bounds={},this._cells=e,this.isSelected=!1,this.fontInfo=(0,i.default)({},l,n),this.fontColor="#000",this.marginInfo=r,this.initSelfSVG();var o=this.getSvg().node;this.setElement(o)},setFontColor:function(t){this.fontColor=t;var e={fill:this.fontColor};this.getTextSvg().attr(e)},getFontInfo:function(){var t=this.fontColor,e=this.fontInfo;return(0,i.default)({fontColor:t},e)},render:function(){var t=this.text;this._render(t,this.fontInfo);var e=this.marginInfo,n=e.marginLeft,r=e.marginRight,i=e.marginTop,o=e.marginBottom;this.bounds={x:this.bounds.x-n,y:this.bounds.y-i,width:n+this.bounds.width+r,height:i+this.bounds.height+o}},removeSelf:function(){var t=this.editDomain();t&&t.selectionManager&&t.selectionManager.removeFromSelection(this),this._cells=null,this.parent(null),this.getSvg().remove()},setPosition:function(t){var e=t.x,n=t.y;this.wrapperGroup.translate(e,n)},initSelfSVG:function(){this.wrapperGroup=new o.G,this.wrapperGroup.add(this.getTextSvg())},getEditContent:function(){return this.text||this.getContext().getTranslatedText("LABEL_TITLE")},getTextClientStyle:function(){var t=this.getTextSvg().node.getBoundingClientRect(),e=t.top,n=t.left,r=this.bounds,o=r.width,a=r.height;return(0,i.default)({top:e,left:n,width:o,height:a},this.fontInfo)},saveEdit:function(t){var e=this.text;this._cells.forEach(function(e){e.items.forEach(function(e){e.model.changeLabel(t)})});var n=this.parent(),r=n.parent();n.columnMap.setKey(e,t);var i=n.columnMap.keyArr;r.model.setMatrixLabelInfos(i),r.layoutDeep()},getSvg:function(){return this.wrapperGroup},setProxy:function(t){this._proxy=t},getProxy:function(){return this._proxy||null},deleteProxy:function(){delete this._proxy},_getCellView:function(){var t=this.parent(),e=t.labelViews.indexOf(this);return u(t.matrixGrid)[e].view},createDragView:function(){return this._getCellView().createDragView()},getClientRect:function(){var t=this._getCellView(),e=t.bounds,n=t.getRealPosition(),r=this.editDomain().getPositionTransfer().realToClient(n);return{x:r.x,y:r.y,width:e.width,height:e.height}},getRealPosition:function(){return this._getCellView().getRealPosition()},removeColumnItems:function(){this._cells.forEach(function(t){t.items.forEach(function(t){t.model.removeSelf()})})},isEmpty:function(){var t=0;return this._cells.forEach(function(e){e.items.forEach(function(e){t++})}),0===t},onMousedown:function(t){(1===t.which||t.isPress)&&this.getModule("dragmanager").prepareStartDrag(t,this)},onMouseOver:function(t){this.isSelected||this.getProxy()&&this.getProxy().displayHover()},onMouseOut:function(t){this.isSelected||this.getProxy()&&this.getProxy().displayDehover()},select:function(){this.isSelected=!0,this.getProxy()&&this.getProxy().displaySelect()},deselect:function(){this.isSelected=!1,this.getProxy()&&this.getProxy().displayDeselect()}});t.exports=h}).call(e,n(6))},function(t,e,n){"use strict";(function(e){var r=n(21),i=n(13),o=n(0).VIEW_TYPE,a=e.SVG,s=i.MATRIX_PLUS_RADIUS,u=r.extend({type:o.MATRIX_PLUS,sbEvents:{click:"onClick"},hammerEvents:{tap:"onTap"},initialize:function(t,e){this.bounds=t,this._clickEvent=e,this.ecg=(new a.G).style("cursor","pointer").attr({"data-name":"matrix-plus-box"}),this.circleFill=this.ecg.circle(2*s).fill("rgb(94, 187, 254)"),this.ecCircle=this.ecg.circle(2*s).attr({fill:"none",stroke:"#fff"}),this.path=this.ecg.put(new a.Path),this.ecg.circle(4*s).fill("none").x(-s).y(-s).node.style.pointerEvents="visible",this.svg=this.ecg;var n=this.getSvg().node;this.setElement(n)},render:function(){var t=this.bounds,e=t.x,n=t.y;this.svg.translate(e,n),this.drawLine()},getSvg:function(){return this.svg},drawLine:function(){var t="M 5,"+s+" L"+(2*s-5)+","+s+"M "+s+",5 L"+s+","+(2*s-5);this.path.attr({d:t,stroke:"#fff","stroke-linecap":"round"})},removeSelf:function(){this.parent(null),this.getSvg().remove()},onClick:function(t){this._clickEvent(t)},onTap:function(t){this._clickEvent(t)}});t.exports=u}).call(e,n(6))},function(t,e,n){"use strict";(function(e){var r=a(n(38)),i=a(n(4)),o=n(0);function a(t){return t&&t.__esModule?t:{default:t}}var s=n(21),u=e.SVG,c=n(143).PLUS_VIEW_PADDING,l=n(44),h=l.getCellInfoByPos,d=l.posSub,f=l.brighten,p=o.VIEW_TYPE.MATRIX_LABEL,g=function(t){t.type===o.VIEW_TYPE.TOPIC&&(t=t.parent());var e=i.default.getStyleValue(t,o.STYLE_KEYS.FILL_COLOR);return"$none$"===e?"none":e},v=s.extend({type:"matrix",sbEvents:{dblclick:"onDblClick"},initialize:function(){this.labelViews=[],this.cellViews=[],this.plusViews=[],this.initSelfSVG();var t=this.getSvg().node;this.setElement(t)},render:function(){var t=this.getRealPosition();this.move(t),this.drawBg(),this.plusViews.forEach(function(t){return t.render()}),this.syncLabelStyle()},setMatrixGrid:function(t){this.matrixGrid=t},setColumnMap:function(t){this.columnMap=t},initSelfSVG:function(){this.svg=new u.G,this.cells=new u.G,this.svg.put(this.cells)},addCellView:function(t){var e=t.getSvg();this.cells.add(e),this.cellViews.push(t),t.parent(this)},addPlusView:function(t){var e=t.getSvg();this.getSvg().add(e),this.plusViews.push(t),t.parent(this)},addLabelView:function(t){var e=t.getSvg();this.getSvg().add(e),this.labelViews.push(t),t.parent(this)},drawBg:function(){var t=this.parent(),e=(0,r.default)(i.default.getStyleValue(t,o.STYLE_KEYS.BORDER_LINE_WIDTH)||0),n=i.default.getStyleValue(t,o.STYLE_KEYS.BORDER_LINE_COLOR),a=g(t),s=f(a);this.matrixGrid.getCells().forEach(function(t){var r=function(t){return t.view.isNull?s:void 0===t.item?"none":t.item.type===p?s:g(t.item)}(t);t.view.render({color:r,borderWidth:e,borderColor:n})})},move:function(t){var e=t.x,n=t.y;this.getSvg().translate(e,n)},getSize:function(){var t=this.matrixGrid.size,e=t.width,n=t.height,r=this.plusViews[0].bounds.width,i=this.plusViews[1].bounds.height;return{width:e+r+c,height:n+i+c}},removeSelf:function(){this.labelViews.forEach(function(t){return t.removeSelf()}),this.cellViews.forEach(function(t){return t.removeSelf()}),this.plusViews.forEach(function(t){return t.removeSelf()});var t=this.parent();this.getSvg().remove(),this.parent(null),delete t.matrixView,delete this.matrixGrid,delete this.columnMap},getSvg:function(){return this.svg},onDblClick:function(t){return!1},syncLabelStyle:function(){var t=this.parent(),e=i.default.getStyleValue(t,o.STYLE_KEYS.TEXT_COLOR);this.labelViews.forEach(function(t){return t.setFontColor(e)})},getRealPosition:function(){var t=this.matrixGrid.cells[0].getAbsPos(),e=this.parent().getRealPosition();return d(e,t)},getCellByPos:function(t){var e=this.matrixGrid,n=this.getRealPosition(),r=d(t,n);return h(e,r)}});t.exports=v}).call(e,n(6))},function(t,e,n){"use strict";(function(e){var r,i=(r=n(4))&&r.__esModule?r:{default:r},o=n(81),a=e.SVG,s=o.extend({type:"numbering",initialize:function(){this._init(),this.numberingGroup=(new a.G).data("name","numbering-class"),this.numberingText=this.getTextSvg(),this.numberingGroup.put(this.numberingText)},render:function(){var t=this.parent().parent(),e=t.getNumberingText(),n=i.default.getFontInfo(t);this._render(e,n)},getSvg:function(){return this.numberingGroup}});t.exports=s}).call(e,n(6))},function(t,e,n){"use strict";(function(e,r){var i,o,a=(o=n(4))&&o.__esModule?o:{default:o},s=n(0),u=n(5),c=n(34),l=n(67),h=n(80),d=n(97),f=n(64),p=n(96),g=n(9),v=n(1),m=n(22),y=n(14),_=e.SVG,E=c.extend({type:"sheet",initialize:function(){var t=this;this.initSVGStructure(),this.initEventsListener(),this.relationships=[],this.bounds={x:0,y:0,width:0,height:0},this.centralTopicView=null,this.centralBranchView=null,this.on("afterAncestorChange",function(){t.getContext()&&t.getModule(s.MODULE_NAME.MARKER_MAP).addUserMarker(t.model.get("legend"))})},initSVGStructure:function(){this.svg=(new _.G).data("name","sheet"),this.matrixContainer=this.svg.group().data("name","matrix-container"),this.boundaryContainer=this.svg.group().data("name","boundary-container"),this.connectionContainer=this.svg.group().data("name","connection-container"),this.branchContainer=this.svg.group().data("name","branch-container"),this.relationshipContainer=this.svg.group().data("name","relationship-container"),this.selectBoxContainer=this.svg.group().data("name","select-box-container"),this.otherContainer=this.svg.group().data("name","other-container"),this._cloneG=this.svg.group().data("name","cloneG").opacity(.5)},initEventsListener:function(){var t=this.model.sheet||this.model;"readonly"!==r.env.SB_MODE&&(this.listenTo(t,"addRelationship",this.onAddRelationship),this.listenTo(t,"removeRelationship",this.onRemoveRelationship),this.listenTo(t,"changeStyle",this.onChangeStyle),this.listenTo(t,"addTheme",this.refresh),this.listenTo(t,"changeTheme",this.refresh),this.listenTo(t,"setStyleObject",this.refresh),this.listenTo(t,"change:topicPositioning",this.layoutCentralBranch),this.listenTo(t,"change:topicOverlapping",this.layoutCentralBranch))},changeHooks:(i={},i[s.STYLE_KEYS.MULTI_LINE_COLORS]=function(){this.setMultiLineColors()},i[s.STYLE_KEYS.LINE_TAPERED]=function(t){this.setLineTapered(t)},i[s.STYLE_KEYS.GRADIENT_COLOR]=function(){this.setColorGradient()},i[s.STYLE_KEYS.FILL_COLOR]=function(t){this.setBackgroundColor(t),this.centralBranchView.setBranchLineColor()},i[s.STYLE_KEYS.OPACITY]=function(t){this.setOpacity(t)},i[s.STYLE_KEYS.CJK_FONT_FAMILY]=function(){this.centralBranchView.renderByThemeChange(),this.centralBranchView.layout(),this.renderRelationship()},i),onChangeStyle:function(t,e){this.changeHooks[t].call(this,a.default.getStyleValue(this,t))},initStyle:function(){var t=a.default.getStyleValue(this,s.STYLE_KEYS.BACKGROUND);t&&this.setWallpaper(u.getXapResourceHash(t)),this.setBackgroundColor(a.default.getStyleValue(this,s.STYLE_KEYS.FILL_COLOR))},render:function(){var t=this;this.initStyle();var e=void 0,n=void 0;this.model.sheet?(e=this.model.sheet,n=this.model.centralTopicModel||e.rootTopic()):n=(e=this.model).rootTopic(),this.centralTopicView=new l({model:n}),this.centralBranchView=new h({topicView:this.centralTopicView,model:n}),this.centralBranchView.parent(this),this.branchContainer.add(this.centralBranchView.svg),this.listenTo(this.centralBranchView,"change:bounds",function(){t._updateBounds()}),this.centralBranchView.trigger("initAllView"),v.each(this.model.relationships(),function(t){this.addRelationship(new d({model:t}))},this),this.centralTopicView.render(),this.getModule("layout").config("isSync",!0),this.centralBranchView.layout(),this.getModule("layout").config("isSync",!1),this.renderRelationship();var r=this.model.getLegendModel();if("visible"===r.get("visibility")){var i=r.get("position");m.isPointLike(i)?this.initLegend():setTimeout(function(){return t.initLegend()},0)}return this},getCentralBranchView:function(){return this.centralBranchView},_updateBounds:function(){var t=y.mergeArr([this.centralBranchView].concat(this.relationships,[this.legendView]).filter(function(t){return t}).map(function(t){return t.bounds}));v.isEqual(t,this.bounds)||(this.bounds=t,this.trigger("change:bounds",t))},refresh:function(){return this.initStyle(),this.centralBranchView.renderByThemeChange(),this.centralBranchView.initStyle(),this.centralBranchView.layout(),this.renderRelationship(),this},renderRelationship:function(){v.each(this.relationships,function(t){t.render()})},remove:function(){var t=this.model;this.centralTopicView.remove();var e=this.editDomain();return this.svg.remove(),this.stopListening(),e&&e.model2View&&delete e.model2View[t.id],this},addRelationship:function(t){var e=this;t.parent(this),this.relationshipContainer.add(t.svg),this.relationships.push(t),"readonly"!==r.env.SB_MODE&&this.listenTo(t,"change:bounds",function(){e._updateBounds()})},onAddRelationship:function(t){var e=new d({model:t});return this.addRelationship(e),e.render(),this},removeRelationship:function(t){t.remove(),this.stopListening(t)},onRemoveRelationship:function(t){var e=v.find(this.relationships,function(e){return e.model===t});e&&this.removeRelationship(e)},setLineTapered:function(){var t=this.centralBranchView.getStructureClass(),e=this.centralBranchView;e.fishTail&&e.fishTail.drawBackbone(),v.each(e.getChildrenBranchesByType(),function(n){t!==s.STRUCTURECLASS.TIMELINEHORIZONTAL&&f[t].drawConnectLine(e,n)})},setMultiLineColors:function(){this.centralBranchView.setMultiLineColors(this.isLineTapered()),this.centralBranchView.reRenderTopic(s.STYLE_KEYS.BORDER_LINE_COLOR)},setColorGradient:function(){this.centralBranchView.reRenderTopic(s.STYLE_KEYS.FILL_COLOR),this.centralBranchView.reRenderBoundary(s.STYLE_KEYS.FILL_COLOR)},setWallpaper:function(t){if(t&&!t.startsWith("platform:/plugin")){var e=this.editDomain().svg;g(e.node).siblings(".wallpaper").css({"background-image":"url("+t+")"}),this.setOpacity(a.default.getStyleValue(this,s.STYLE_KEYS.OPACITY))}},setBackgroundColor:function(){var t=a.default.getStyleValue(this,s.STYLE_KEYS.FILL_COLOR)||"";"none"===t&&(t="transparent");var e=this.editDomain().svg;g(e.node).css({"background-color":t})},setOpacity:function(t){t=void 0===t?1:t;var e=this.editDomain().svg;g(e.node).siblings(".wallpaper").css({opacity:t})},addSelectBoxView:function(t){this.selectBoxContainer.add(t.selectBoxGroup)},removeSelectBoxView:function(){},isLineTapered:function(){return"tapered"===a.default.getStyleValue(this,s.STYLE_KEYS.LINE_TAPERED)},isMultiLineColors:function(){var t=a.default.getStyleValue(this,s.STYLE_KEYS.MULTI_LINE_COLORS);if(t&&"none"!==t)return!0},isGradient:function(){return"gradient"===a.default.getStyleValue(this,s.STYLE_KEYS.GRADIENT_COLOR)},getCloneG:function(){return this._cloneG},getDragViewContainer:function(){return this._cloneG},clearDragViewContainer:function(){this._cloneG.translate(0,0).clear()},initLegend:function(){var t=this;this.legendView||(this.legendView=new p({parentView:this}),this._updateBounds(),"readonly"!==r.env.SB_MODE&&this.listenTo(this.legendView,"change:bounds",function(){t._updateBounds()}))},layoutCentralBranch:function(){this.centralBranchView.layout()}});t.exports=E}).call(e,n(6),n(28))},function(t,e,n){"use strict";(function(e){var r=n(0),i=n(21),o=n(1),a=i.extend({type:r.VIEW_TYPE.SUMMARY,initialize:function(){"readonly"!==e.env.SB_MODE&&this.listenTo(this.model,"change:range",this.onRangeChange)},remove:function(){var t=this,e=this.parent();o.each(e.summaries,function(n,r){n===t&&e.summaries.splice(r,1)});var n=t.editDomain();n&&n.selectionManager&&n.selectionManager.removeFromSelection(t),n&&n.model2View&&delete n.model2View[t.model.id],this.stopListening(),t.parent(null)},onRangeChange:function(){this.parent().refresh()}});t.exports=a}).call(e,n(28))},function(t,e,n){"use strict";var r=o(n(2)),i=o(n(3));function o(t){return t&&t.__esModule?t:{default:t}}var a=n(21),s=n(5),u=n(9),c=n(1),l=n(16),h=n(0),d=h.EVENTS,f=h.VIEW_TYPE,p=h.MODULE_NAME,g=h.UI_STATUS,v=h.CONFIG,m=(h.PLATFORMS,n(327)),y=n(331),_=n(5),E=a.extend({type:f.SVG,lifeCircleEvents:{contentMount:"contentMount",scaleChanged:"scaleChanged"},sbEvents:{click:"onClick",dblclick:"onDblClick",wheel:"onMouseWheel",mouseup:"onMouseup",mousedown:"onMouseDown",touchmove:"_onTouchMove",contextmenu:"onContextMenu",touchend:"onTouchEnd"},hammerEvents:{press:"_onPress",doubletap:"_onDoubleTap",pinchstart:"_onPinchStart",pinchmove:c.throttle(function(t){this._onPinch(t)},50),pinchend:"_onPinchEnd"},initialize:function(t){if(!t.context)throw new Error("must indicate el argument in SVGView initialization");this._deviceNativeScale=1,this.fingerScaleHandler=new A(this),this.initWheelScaleProcessFlag=!1,this.endWheelScaleProcessFlag=null,this._context=t.context,this.model2View={},this.isScaled=!1,this.currentScale=1,this.clickCount=0,this._pinchStartScale=null,this.selectionManager=this._context.getModule("selectionmanager"),this.eventBus=(0,i.default)({},l.Events),this._$scrollContainer=u(this._context.getScrollContainer()),this.inertialPanning=new m,this._initSVGStructure(),this._canvasControl=new y(this)},_initSVGStructure:function(){this.$el.append('<div class="wallpaper"></div>'),this.svg=SVG(this.el).spof().style({display:"block"}),this.container=this.svg.group().data("name","container"),this.container.translate(this.$el.width()/2,this.$el.height()/2),this._multiSelectG=this.svg.group().data("name","multi-select-box_container")},getContext:function(){return this._context},getCanvasControl:function(){return this._canvasControl},move:function(t,e,n){this._canvasControl.move(t,e,n)},getSheetTranslate:function(){return this._canvasControl.positionTransfer.realToSbContainer({x:0,y:0})},getPositionTransfer:function(){return this._canvasControl.positionTransfer},getMultiSelectG:function(){return this._multiSelectG},content:function(t){return void 0===t?this._content||null:t===this._content?this:(t=t||null,this._content&&(this._content.remove(),this._content.parent(null)),this._content=t,t&&(t.parent(this),this.container.add(t.svg,0)),this.el.parentNode&&this.render(),this.trigger(this.lifeCircleEvents.contentMount),this)},render:function(){var t=this.content();return t&&t.render(),this.eventBus.trigger("centralRenderOk"),this},editDomain:function(){return this},onClick:function(){var t=this;this.clickCount++,setTimeout(function(){t.clickCount=0},500)},onDblClick:function(t){t.target===this.svg.node&&(2===this.clickCount?(this.clickCount=0,this.createFloatingTopic({x:t.clientX,y:t.clientY})):this.clickCount=0)},_onDoubleTap:function(t){this._context.isMobilePlatform()||t.target===this.svg.node&&this.createFloatingTopic({x:t.center.x,y:t.center.y})},createFloatingTopic:function(t){if(-1===this.getContext().getActiveUIStatus().indexOf(g.ADD_FLOATINGTOPIC)){var e=this.content().model.rootTopic(),n=e.createEmptyTopic({title:this.getContext().getTranslatedText("DEFAULT_FLOATING_TOPIC_TITLE")});n.set("position",this.getPositionTransfer().clientToReal(t)),e.addChildTopic(n,{type:"detached"})}},onMouseDown:function(t){var e=this;if(t.target===this.svg.node){if(3===t.which){var n=this.getModule(p.MOVE_VIEW_PORT);n&&n.onDragViewPort(t,this,function(t){e._dispatchContextMenu(t)})}if(1===t.which){if(s.isMac&&t.ctrlKey)return this._dispatchContextMenu(t);var r=!s.isMac&&t.ctrlKey,i=s.isMac&&t.metaKey,o=t.shiftKey,a=this.getModule(p.MOUSE_BOX_SELECT);r||i||o?a&&a.start({x:t.clientX,y:t.clientY},!0):a&&a.start({x:t.clientX,y:t.clientY})}}},_onTouchMove:function(t){this._context.isMobilePlatform()||this._pinchStartScale&&(t.preventDefault(),t.stopPropagation(),t.stopImmediatePropagation())},onTouchEnd:function(){this._context.isMobilePlatform()||(this._pinchStartScale=null,this._context.setScrollEnable())},_onPress:function(t){t.target===this.svg.node&&this._pressContextMenuCheckHandle()},_onPinchStart:function(){this._context.isMobilePlatform()||(this._pinchStartScale=this.currentScale,this._context.setScrollDisable())},_onPinch:function(t){!this._context.isMobilePlatform()&&this._pinchStartScale&&(t.preventDefault(),this.setScale(100*this._pinchStartScale*t.scale*.98))},_onPinchEnd:function(){this._context.isMobilePlatform()||(this._pinchStartScale=null,this._context.setScrollEnable())},onContextMenu:function(t){t.preventDefault(),100!==t.detail&&t.stopImmediatePropagation()},isEnableScaleByWheel:function(t){return t.ctrlKey&&!s.isMac||(t.ctrlKey||t.metaKey)&&s.isMac},onMouseWheel:function(t){if(t.stopPropagation(),this.isEnableScaleByWheel(t))return t.preventDefault(),this.setScaleByWheel(t)},setScaleByWheel:function(t){var e=this,n=t.originalEvent,r=n.deltaX;n.deltaY,0===Math.abs(r)&&(this.initWheelScaleProcessFlag||(this.fingerScaleHandler.initProcess(this.currentScale),this.initWheelScaleProcessFlag=!0),clearTimeout(this.endWheelScaleProcessFlag),this.fingerScaleHandler.startProcess(t.originalEvent),this.endWheelScaleProcessFlag=setTimeout(function(){e.endWheelScaleProcessFlag=null,e.initWheelScaleProcessFlag=!1,e.fingerScaleHandler.endProcess()},500))},setScale:function(t,e){var n=this;if(t=this._scaleFilter(t),this.currentScale!==t/100){var r=function(t){n.currentScale=t/100,n.container.scale(n.currentScale)},i=function(){n._isScaleMoving=!1,n._scaleClearFn=void 0,n.getContext().trigger(d.SCALE_CHANGED,t),n.trigger(n.lifeCircleEvents.scaleChanged)};this._isScaleMoving&&this._scaleClearFn&&this._scaleClearFn(),e?(this._isScaleMoving=!0,this._scaleClearFn=_.setAnimation({start:100*this.currentScale,end:t,duration:300,during:r,after:i})):(r(t),i())}},getScale:function(){return Math.round(100*this.currentScale)},_scaleFilter:function(t){var e=parseFloat(this.config(v.MAX_SCALE)),n=parseFloat(this.config(v.MIN_SCALE));return t>e&&(t=e),t<n&&(t=n),t},setDeviceNativeScale:function(t){this._deviceNativeScale=t},getDeviceNativeScale:function(){return this._deviceNativeScale}}),A=function(){function t(e){(0,r.default)(this,t),this.svgView=e,this.scaleEvent=null,this.startScaleValue=null,this.movingTempScaleValue=null}return t.prototype.initProcess=function(t,e){this.startScaleValue=t;var n=this.svgView.getModule(p.SEMAPHORE);n&&n.increase(g.PINCH)},t.prototype.startProcess=function(t){this.scaleEvent=t,this.movingTempScaleValue=this.svgView.currentScale,this.updateScaleValue()},t.prototype.endProcess=function(){this.scaleEvent=null,this.startScaleValue=null,this.movingTempScaleValue=null,this.svgView.getModule(p.SEMAPHORE).decrease(g.PINCH)},t.prototype.updateScaleValue=function(){var t=s.isMac?.02:.003,e=(1-this.scaleEvent.deltaY*t)*this.svgView.currentScale*100;this.svgView.setScale(e)},t}();s.wrapReadOnly(E,["createFloatingTopic"]),t.exports=E},function(t,e,n){var r=n(68),i=n(27)("toStringTag"),o="Arguments"==r(function(){return arguments}());t.exports=function(t){var e,n,a;return void 0===t?"Undefined":null===t?"Null":"string"==typeof(n=function(t,e){try{return t[e]}catch(t){}}(e=Object(t),i))?n:o?r(e):"Object"==(a=r(e))&&"function"==typeof e.callee?"Arguments":a}},function(t,e,n){var r=n(24).document;t.exports=r&&r.documentElement},function(t,e,n){t.exports=!n(40)&&!n(46)(function(){return 7!=Object.defineProperty(n(102)("div"),"a",{get:function(){return 7}}).a})},function(t,e,n){var r=n(68);t.exports=Object("z").propertyIsEnumerable(0)?Object:function(t){return"String"==r(t)?t.split(""):Object(t)}},function(t,e,n){var r=n(69),i=n(27)("iterator"),o=Array.prototype;t.exports=function(t){return void 0!==t&&(r.Array===t||o[i]===t)}},function(t,e,n){var r=n(36);t.exports=function(t,e,n,i){try{return i?e(r(n)[0],n[1]):e(n)}catch(e){var o=t.return;throw void 0!==o&&r(o.call(t)),e}}},function(t,e,n){"use strict";var r=n(84),i=n(23),o=n(175),a=n(48),s=n(47),u=n(69),c=n(368),l=n(86),h=n(170),d=n(27)("iterator"),f=!([].keys&&"next"in[].keys()),p=function(){return this};t.exports=function(t,e,n,g,v,m,y){c(n,e,g);var _,E,A,S=function(t){if(!f&&t in w)return w[t];switch(t){case"keys":case"values":return function(){return new n(this,t)}}return function(){return new n(this,t)}},T=e+" Iterator",x="values"==v,b=!1,w=t.prototype,C=w[d]||w["@@iterator"]||v&&w[v],I=!f&&C||S(v),L=v?x?S("entries"):I:void 0,N="Array"==e&&w.entries||C;if(N&&(A=h(N.call(new t)))!==Object.prototype&&A.next&&(l(A,T,!0),r||s(A,d)||a(A,d,p)),x&&C&&"values"!==C.name&&(b=!0,I=function(){return C.call(this)}),r&&!y||!f&&!b&&w[d]||a(w,d,I),u[e]=I,u[T]=p,v)if(_={values:x?I:S("values"),keys:m?I:S("keys"),entries:L},y)for(E in _)E in w||o(w,E,_[E]);else i(i.P+i.F*(f||b),e,_);return _}},function(t,e,n){var r=n(27)("iterator"),i=!1;try{var o=[7][r]();o.return=function(){i=!0},Array.from(o,function(){throw 2})}catch(t){}t.exports=function(t,e){if(!e&&!i)return!1;var n=!1;try{var o=[7],a=o[r]();a.next=function(){return{done:n=!0}},o[r]=function(){return a},t(o)}catch(t){}return n}},function(t,e,n){var r=n(85),i=n(71),o=n(57),a=n(111),s=n(47),u=n(162),c=Object.getOwnPropertyDescriptor;e.f=n(40)?c:function(t,e){if(t=o(t),e=a(e,!0),u)try{return c(t,e)}catch(t){}if(s(t,e))return i(!r.f.call(t,e),t[e])}},function(t,e,n){var r=n(171),i=n(103).concat("length","prototype");e.f=Object.getOwnPropertyNames||function(t){return r(t,i)}},function(t,e,n){var r=n(47),i=n(72),o=n(107)("IE_PROTO"),a=Object.prototype;t.exports=Object.getPrototypeOf||function(t){return t=i(t),r(t,o)?t[o]:"function"==typeof t.constructor&&t instanceof t.constructor?t.constructor.prototype:t instanceof Object?a:null}},function(t,e,n){var r=n(47),i=n(57),o=n(362)(!1),a=n(107)("IE_PROTO");t.exports=function(t,e){var n,s=i(t),u=0,c=[];for(n in s)n!=a&&r(s,n)&&c.push(n);for(;e.length>u;)r(s,n=e[u++])&&(~o(c,n)||c.push(n));return c}},function(t,e,n){var r=n(23),i=n(15),o=n(46);t.exports=function(t,e){var n=(i.Object||{})[t]||Object[t],a={};a[t]=e(n),r(r.S+r.F*o(function(){n(1)}),"Object",a)}},function(t,e){t.exports=function(t){try{return{e:!1,v:t()}}catch(t){return{e:!0,v:t}}}},function(t,e,n){var r=n(36),i=n(41),o=n(104);t.exports=function(t,e){if(r(t),i(e)&&e.constructor===t)return e;var n=o.f(t);return(0,n.resolve)(e),n.promise}},function(t,e,n){t.exports=n(48)},function(t,e,n){var r=n(36),i=n(82),o=n(27)("species");t.exports=function(t,e){var n,a=r(t).constructor;return void 0===a||void 0==(n=r(a)[o])?e:i(n)}},function(t,e){t.exports="\t\n\v\f\r \u2028\u2029\ufeff"},function(t,e,n){var r,i,o,a=n(56),s=n(366),u=n(161),c=n(102),l=n(24),h=l.process,d=l.setImmediate,f=l.clearImmediate,p=l.MessageChannel,g=l.Dispatch,v=0,m={},y=function(){var t=+this;if(m.hasOwnProperty(t)){var e=m[t];delete m[t],e()}},_=function(t){y.call(t.data)};d&&f||(d=function(t){for(var e=[],n=1;arguments.length>n;)e.push(arguments[n++]);return m[++v]=function(){s("function"==typeof t?t:Function(t),e)},r(v),v},f=function(t){delete m[t]},"process"==n(68)(h)?r=function(t){h.nextTick(a(y,t,1))}:g&&g.now?r=function(t){g.now(a(y,t,1))}:p?(o=(i=new p).port2,i.port1.onmessage=_,r=a(o.postMessage,o,1)):l.addEventListener&&"function"==typeof postMessage&&!l.importScripts?(r=function(t){l.postMessage(t+"","*")},l.addEventListener("message",_,!1)):r="onreadystatechange"in c("script")?function(t){u.appendChild(c("script")).onreadystatechange=function(){u.removeChild(this),y.call(t)}}:function(t){setTimeout(a(y,t,1),0)}),t.exports={set:d,clear:f}},function(t,e){},function(t,e,n){var r;r=function(t){return t},t.exports=r(n(7),n(89),n(402),n(400),n(58),n(59),n(117),n(181),n(418),n(182),n(420),n(419),n(417),n(116),n(413),n(49),n(18),n(403),n(405),n(404),n(407),n(406),n(408),n(409),n(410),n(412),n(411),n(401),n(399),n(421),n(416),n(415),n(414))},function(t,e,n){var r;r=function(t){return function(e){var n=t,r=n.lib,i=r.WordArray,o=r.Hasher,a=n.algo,s=[],u=[];!function(){function t(t){for(var n=e.sqrt(t),r=2;r<=n;r++)if(!(t%r))return!1;return!0}function n(t){return 4294967296*(t-(0|t))|0}for(var r=2,i=0;i<64;)t(r)&&(i<8&&(s[i]=n(e.pow(r,.5))),u[i]=n(e.pow(r,1/3)),i++),r++}();var c=[],l=a.SHA256=o.extend({_doReset:function(){this._hash=new i.init(s.slice(0))},_doProcessBlock:function(t,e){for(var n=this._hash.words,r=n[0],i=n[1],o=n[2],a=n[3],s=n[4],l=n[5],h=n[6],d=n[7],f=0;f<64;f++){if(f<16)c[f]=0|t[e+f];else{var p=c[f-15],g=(p<<25|p>>>7)^(p<<14|p>>>18)^p>>>3,v=c[f-2],m=(v<<15|v>>>17)^(v<<13|v>>>19)^v>>>10;c[f]=g+c[f-7]+m+c[f-16]}var y=r&i^r&o^i&o,_=(r<<30|r>>>2)^(r<<19|r>>>13)^(r<<10|r>>>22),E=d+((s<<26|s>>>6)^(s<<21|s>>>11)^(s<<7|s>>>25))+(s&l^~s&h)+u[f]+c[f];d=h,h=l,l=s,s=a+E|0,a=o,o=i,i=r,r=E+(_+y)|0}n[0]=n[0]+r|0,n[1]=n[1]+i|0,n[2]=n[2]+o|0,n[3]=n[3]+a|0,n[4]=n[4]+s|0,n[5]=n[5]+l|0,n[6]=n[6]+h|0,n[7]=n[7]+d|0},_doFinalize:function(){var t=this._data,n=t.words,r=8*this._nDataBytes,i=8*t.sigBytes;return n[i>>>5]|=128<<24-i%32,n[14+(i+64>>>9<<4)]=e.floor(r/4294967296),n[15+(i+64>>>9<<4)]=r,t.sigBytes=4*n.length,this._process(),this._hash},clone:function(){var t=o.clone.call(this);return t._hash=this._hash.clone(),t}});n.SHA256=o._createHelper(l),n.HmacSHA256=o._createHmacHelper(l)}(Math),t.SHA256},t.exports=r(n(7))},function(t,e,n){var r;r=function(t){return function(){var e=t,n=e.lib.Hasher,r=e.x64,i=r.Word,o=r.WordArray,a=e.algo;function s(){return i.create.apply(i,arguments)}var u=[s(1116352408,3609767458),s(1899447441,602891725),s(3049323471,3964484399),s(3921009573,2173295548),s(961987163,4081628472),s(1508970993,3053834265),s(2453635748,2937671579),s(2870763221,3664609560),s(3624381080,2734883394),s(310598401,1164996542),s(607225278,1323610764),s(1426881987,3590304994),s(1925078388,4068182383),s(2162078206,991336113),s(2614888103,633803317),s(3248222580,3479774868),s(3835390401,2666613458),s(4022224774,944711139),s(264347078,2341262773),s(604807628,2007800933),s(770255983,1495990901),s(1249150122,1856431235),s(1555081692,3175218132),s(1996064986,2198950837),s(2554220882,3999719339),s(2821834349,766784016),s(2952996808,2566594879),s(3210313671,3203337956),s(3336571891,1034457026),s(3584528711,2466948901),s(113926993,3758326383),s(338241895,168717936),s(666307205,1188179964),s(773529912,1546045734),s(1294757372,1522805485),s(1396182291,2643833823),s(1695183700,2343527390),s(1986661051,1014477480),s(2177026350,1206759142),s(2456956037,344077627),s(2730485921,1290863460),s(2820302411,3158454273),s(3259730800,3505952657),s(3345764771,106217008),s(3516065817,3606008344),s(3600352804,1432725776),s(4094571909,1467031594),s(275423344,851169720),s(430227734,3100823752),s(506948616,1363258195),s(659060556,3750685593),s(883997877,3785050280),s(958139571,3318307427),s(1322822218,3812723403),s(1537002063,2003034995),s(1747873779,3602036899),s(1955562222,1575990012),s(2024104815,1125592928),s(2227730452,2716904306),s(2361852424,442776044),s(2428436474,593698344),s(2756734187,3733110249),s(3204031479,2999351573),s(3329325298,3815920427),s(3391569614,3928383900),s(3515267271,566280711),s(3940187606,3454069534),s(4118630271,4000239992),s(116418474,1914138554),s(174292421,2731055270),s(289380356,3203993006),s(460393269,320620315),s(685471733,587496836),s(852142971,1086792851),s(1017036298,365543100),s(1126000580,2618297676),s(1288033470,3409855158),s(1501505948,4234509866),s(1607167915,987167468),s(1816402316,1246189591)],c=[];!function(){for(var t=0;t<80;t++)c[t]=s()}();var l=a.SHA512=n.extend({_doReset:function(){this._hash=new o.init([new i.init(1779033703,4089235720),new i.init(3144134277,2227873595),new i.init(1013904242,4271175723),new i.init(2773480762,1595750129),new i.init(1359893119,2917565137),new i.init(2600822924,725511199),new i.init(528734635,4215389547),new i.init(1541459225,327033209)])},_doProcessBlock:function(t,e){for(var n=this._hash.words,r=n[0],i=n[1],o=n[2],a=n[3],s=n[4],l=n[5],h=n[6],d=n[7],f=r.high,p=r.low,g=i.high,v=i.low,m=o.high,y=o.low,_=a.high,E=a.low,A=s.high,S=s.low,T=l.high,x=l.low,b=h.high,w=h.low,C=d.high,I=d.low,L=f,N=p,O=g,R=v,M=m,D=y,P=_,k=E,B=A,F=S,V=T,U=x,H=b,Y=w,G=C,j=I,z=0;z<80;z++){var W=c[z];if(z<16)var K=W.high=0|t[e+2*z],Q=W.low=0|t[e+2*z+1];else{var q=c[z-15],X=q.high,$=q.low,J=(X>>>1|$<<31)^(X>>>8|$<<24)^X>>>7,Z=($>>>1|X<<31)^($>>>8|X<<24)^($>>>7|X<<25),tt=c[z-2],et=tt.high,nt=tt.low,rt=(et>>>19|nt<<13)^(et<<3|nt>>>29)^et>>>6,it=(nt>>>19|et<<13)^(nt<<3|et>>>29)^(nt>>>6|et<<26),ot=c[z-7],at=ot.high,st=ot.low,ut=c[z-16],ct=ut.high,lt=ut.low;K=(K=(K=J+at+((Q=Z+st)>>>0<Z>>>0?1:0))+rt+((Q+=it)>>>0<it>>>0?1:0))+ct+((Q+=lt)>>>0<lt>>>0?1:0),W.high=K,W.low=Q}var ht,dt=B&V^~B&H,ft=F&U^~F&Y,pt=L&O^L&M^O&M,gt=N&R^N&D^R&D,vt=(L>>>28|N<<4)^(L<<30|N>>>2)^(L<<25|N>>>7),mt=(N>>>28|L<<4)^(N<<30|L>>>2)^(N<<25|L>>>7),yt=(B>>>14|F<<18)^(B>>>18|F<<14)^(B<<23|F>>>9),_t=(F>>>14|B<<18)^(F>>>18|B<<14)^(F<<23|B>>>9),Et=u[z],At=Et.high,St=Et.low,Tt=G+yt+((ht=j+_t)>>>0<j>>>0?1:0),xt=mt+gt;G=H,j=Y,H=V,Y=U,V=B,U=F,B=P+(Tt=(Tt=(Tt=Tt+dt+((ht+=ft)>>>0<ft>>>0?1:0))+At+((ht+=St)>>>0<St>>>0?1:0))+K+((ht+=Q)>>>0<Q>>>0?1:0))+((F=k+ht|0)>>>0<k>>>0?1:0)|0,P=M,k=D,M=O,D=R,O=L,R=N,L=Tt+(vt+pt+(xt>>>0<mt>>>0?1:0))+((N=ht+xt|0)>>>0<ht>>>0?1:0)|0}p=r.low=p+N,r.high=f+L+(p>>>0<N>>>0?1:0),v=i.low=v+R,i.high=g+O+(v>>>0<R>>>0?1:0),y=o.low=y+D,o.high=m+M+(y>>>0<D>>>0?1:0),E=a.low=E+k,a.high=_+P+(E>>>0<k>>>0?1:0),S=s.low=S+F,s.high=A+B+(S>>>0<F>>>0?1:0),x=l.low=x+U,l.high=T+V+(x>>>0<U>>>0?1:0),w=h.low=w+Y,h.high=b+H+(w>>>0<Y>>>0?1:0),I=d.low=I+j,d.high=C+G+(I>>>0<j>>>0?1:0)},_doFinalize:function(){var t=this._data,e=t.words,n=8*this._nDataBytes,r=8*t.sigBytes;return e[r>>>5]|=128<<24-r%32,e[30+(r+128>>>10<<5)]=Math.floor(n/4294967296),e[31+(r+128>>>10<<5)]=n,t.sigBytes=4*e.length,this._process(),this._hash.toX32()},clone:function(){var t=n.clone.call(this);return t._hash=this._hash.clone(),t},blockSize:32});e.SHA512=n._createHelper(l),e.HmacSHA512=n._createHmacHelper(l)}(),t.SHA512},t.exports=r(n(7),n(89))},function(t,e){var n={}.toString;t.exports=Array.isArray||function(t){return"[object Array]"==n.call(t)}},function(t,e,n){"use strict";var r=n(12),i=n(42),o="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";e.encode=function(t){for(var e,n,i,a,s,u,c,l=[],h=0,d=t.length,f=d,p="string"!==r.getTypeOf(t);h<t.length;)f=d-h,p?(e=t[h++],n=h<d?t[h++]:0,i=h<d?t[h++]:0):(e=t.charCodeAt(h++),n=h<d?t.charCodeAt(h++):0,i=h<d?t.charCodeAt(h++):0),a=e>>2,s=(3&e)<<4|n>>4,u=f>1?(15&n)<<2|i>>6:64,c=f>2?63&i:64,l.push(o.charAt(a)+o.charAt(s)+o.charAt(u)+o.charAt(c));return l.join("")},e.decode=function(t){var e,n,r,a,s,u,c=0,l=0;if("data:"===t.substr(0,"data:".length))throw new Error("Invalid base64 input, it looks like a data url.");var h,d=3*(t=t.replace(/[^A-Za-z0-9\+\/\=]/g,"")).length/4;if(t.charAt(t.length-1)===o.charAt(64)&&d--,t.charAt(t.length-2)===o.charAt(64)&&d--,d%1!=0)throw new Error("Invalid base64 input, bad content length.");for(h=i.uint8array?new Uint8Array(0|d):new Array(0|d);c<t.length;)e=o.indexOf(t.charAt(c++))<<2|(a=o.indexOf(t.charAt(c++)))>>4,n=(15&a)<<4|(s=o.indexOf(t.charAt(c++)))>>2,r=(3&s)<<6|(u=o.indexOf(t.charAt(c++))),h[l++]=e,64!==s&&(h[l++]=n),64!==u&&(h[l++]=r);return h}},function(t,e,n){"use strict";var r=n(31);e.STORE={magic:"\0\0",compressWorker:function(t){return new r("STORE compression")},uncompressWorker:function(){return new r("STORE decompression")}},e.DEFLATE=n(425)},function(t,e,n){"use strict";e.base64=!1,e.binary=!1,e.dir=!1,e.createFolders=!0,e.date=null,e.compression=null,e.compressionOptions=null,e.comment=null,e.unixPermissions=null,e.dosPermissions=null},function(t,e,n){t.exports=n(472)},function(t,e,n){"use strict";var r=n(189);function i(t){r.call(this,t);for(var e=0;e<this.data.length;e++)t[e]=255&t[e]}n(12).inherits(i,r),i.prototype.byteAt=function(t){return this.data[this.zero+t]},i.prototype.lastIndexOfSignature=function(t){for(var e=t.charCodeAt(0),n=t.charCodeAt(1),r=t.charCodeAt(2),i=t.charCodeAt(3),o=this.length-4;o>=0;--o)if(this.data[o]===e&&this.data[o+1]===n&&this.data[o+2]===r&&this.data[o+3]===i)return o-this.zero;return-1},i.prototype.readAndCheckSignature=function(t){var e=t.charCodeAt(0),n=t.charCodeAt(1),r=t.charCodeAt(2),i=t.charCodeAt(3),o=this.readData(4);return e===o[0]&&n===o[1]&&r===o[2]&&i===o[3]},i.prototype.readData=function(t){if(this.checkOffset(t),0===t)return[];var e=this.data.slice(this.zero+this.index,this.zero+this.index+t);return this.index+=t,e},t.exports=i},function(t,e,n){"use strict";var r=n(12);function i(t){this.data=t,this.length=t.length,this.index=0,this.zero=0}i.prototype={checkOffset:function(t){this.checkIndex(this.index+t)},checkIndex:function(t){if(this.length<this.zero+t||t<0)throw new Error("End of data reached (data length = "+this.length+", asked index = "+t+"). Corrupted zip ?")},setIndex:function(t){this.checkIndex(t),this.index=t},skip:function(t){this.setIndex(this.index+t)},byteAt:function(t){},readInt:function(t){var e,n=0;for(this.checkOffset(t),e=this.index+t-1;e>=this.index;e--)n=(n<<8)+this.byteAt(e);return this.index+=t,n},readString:function(t){return r.transformTo("string",this.readData(t))},readData:function(t){},lastIndexOfSignature:function(t){},readAndCheckSignature:function(t){},readDate:function(){var t=this.readInt(4);return new Date(Date.UTC(1980+(t>>25&127),(t>>21&15)-1,t>>16&31,t>>11&31,t>>5&63,(31&t)<<1))}},t.exports=i},function(t,e,n){"use strict";var r=n(188);function i(t){r.call(this,t)}n(12).inherits(i,r),i.prototype.readData=function(t){if(this.checkOffset(t),0===t)return new Uint8Array(0);var e=this.data.subarray(this.zero+this.index,this.zero+this.index+t);return this.index+=t,e},t.exports=i},function(t,e,n){"use strict";var r=n(12),i=n(42),o=n(188),a=n(434),s=n(433),u=n(190);t.exports=function(t){var e=r.getTypeOf(t);return r.checkSupport(e),"string"!==e||i.uint8array?"nodebuffer"===e?new s(t):i.uint8array?new u(r.transformTo("uint8array",t)):new o(r.transformTo("array",t)):new a(t)}},function(t,e,n){"use strict";e.LOCAL_FILE_HEADER="PK",e.CENTRAL_FILE_HEADER="PK",e.CENTRAL_DIRECTORY_END="PK",e.ZIP64_CENTRAL_DIRECTORY_LOCATOR="PK",e.ZIP64_CENTRAL_DIRECTORY_END="PK",e.DATA_DESCRIPTOR="PK\b"},function(t,e,n){"use strict";var r=n(31),i=n(120);function o(){r.call(this,"Crc32Probe"),this.withStreamInfo("crc32",0)}n(12).inherits(o,r),o.prototype.processChunk=function(t){this.streamInfo.crc32=i(t.data,this.streamInfo.crc32||0),this.push(t)},t.exports=o},function(t,e,n){"use strict";var r=n(12),i=n(31);function o(t){i.call(this,"DataLengthProbe for "+t),this.propName=t,this.withStreamInfo(t,0)}r.inherits(o,i),o.prototype.processChunk=function(t){if(t){var e=this.streamInfo[this.propName]||0;this.streamInfo[this.propName]=e+t.data.length}i.prototype.processChunk.call(this,t)},t.exports=o},function(t,e,n){"use strict";var r=n(12),i=n(31);function o(t){i.call(this,"DataWorker");var e=this;this.dataIsReady=!1,this.index=0,this.max=0,this.data=null,this.type="",this._tickScheduled=!1,t.then(function(t){e.dataIsReady=!0,e.data=t,e.max=t&&t.length||0,e.type=r.getTypeOf(t),e.isPaused||e._tickAndRepeat()},function(t){e.error(t)})}r.inherits(o,i),o.prototype.cleanUp=function(){i.prototype.cleanUp.call(this),this.data=null},o.prototype.resume=function(){return!!i.prototype.resume.call(this)&&(!this._tickScheduled&&this.dataIsReady&&(this._tickScheduled=!0,r.delay(this._tickAndRepeat,[],this)),!0)},o.prototype._tickAndRepeat=function(){this._tickScheduled=!1,this.isPaused||this.isFinished||(this._tick(),this.isFinished||(r.delay(this._tickAndRepeat,[],this),this._tickScheduled=!0))},o.prototype._tick=function(){if(this.isPaused||this.isFinished)return!1;var t=null,e=Math.min(this.max,this.index+16384);if(this.index>=this.max)return this.end();switch(this.type){case"string":t=this.data.substring(this.index,e);break;case"uint8array":t=this.data.subarray(this.index,e);break;case"array":case"nodebuffer":t=this.data.slice(this.index,e)}return this.index=e,this.push({data:t,meta:{percent:this.max?this.index/this.max*100:0}})},t.exports=o},function(t,e,n){"use strict";(function(e){var r=n(12),i=n(435),o=n(31),a=n(184),s=n(42),u=n(74),c=null;if(s.nodestream)try{c=n(431)}catch(t){}function l(t,e,n){var a=e;switch(e){case"blob":case"arraybuffer":a="uint8array";break;case"base64":a="string"}try{this._internalType=a,this._outputType=e,this._mimeType=n,r.checkSupport(a),this._worker=t.pipe(new i(a)),t.lock()}catch(t){this._worker=new o("error"),this._worker.error(t)}}l.prototype={accumulate:function(t){return function(t,n){return new u.Promise(function(i,o){var s=[],u=t._internalType,c=t._outputType,l=t._mimeType;t.on("data",function(t,e){s.push(t),n&&n(e)}).on("error",function(t){s=[],o(t)}).on("end",function(){try{var t=function(t,e,n){switch(t){case"blob":return r.newBlob(r.transformTo("arraybuffer",e),n);case"base64":return a.encode(e);default:return r.transformTo(t,e)}}(c,function(t,n){var r,i=0,o=null,a=0;for(r=0;r<n.length;r++)a+=n[r].length;switch(t){case"string":return n.join("");case"array":return Array.prototype.concat.apply([],n);case"uint8array":for(o=new Uint8Array(a),r=0;r<n.length;r++)o.set(n[r],i),i+=n[r].length;return o;case"nodebuffer":return e.concat(n);default:throw new Error("concat : unsupported type '"+t+"'")}}(u,s),l);i(t)}catch(t){o(t)}s=[]}).resume()})}(this,t)},on:function(t,e){var n=this;return"data"===t?this._worker.on(t,function(t){e.call(n,t.data,t.meta)}):this._worker.on(t,function(){r.delay(e,arguments,n)}),this},resume:function(){return r.delay(this._worker.resume,[],this._worker),this},pause:function(){return this._worker.pause(),this},toNodejsStream:function(t){if(r.checkSupport("nodestream"),"nodebuffer"!==this._outputType)throw new Error(this._outputType+" is not supported by this method");return new c(this,{objectMode:"nodebuffer"!==this._outputType},t)}},t.exports=l}).call(e,n(55).Buffer)},function(t,e){var n=t.exports={version:"2.3.0"};"number"==typeof __e&&(__e=n)},function(t,e,n){var r=n(440);t.exports=function(t,e,n){if(r(t),void 0===e)return t;switch(n){case 1:return function(n){return t.call(e,n)};case 2:return function(n,r){return t.call(e,n,r)};case 3:return function(n,r,i){return t.call(e,n,r,i)}}return function(){return t.apply(e,arguments)}}},function(t,e,n){var r=n(122),i=n(91).document,o=r(i)&&r(i.createElement);t.exports=function(t){return o?i.createElement(t):{}}},function(t,e){t.exports=function(t){try{return!!t()}catch(t){return!0}}},function(t,e,n){"use strict";var r=n(43),i=!0,o=!0;try{String.fromCharCode.apply(null,[0])}catch(t){i=!1}try{String.fromCharCode.apply(null,new Uint8Array(1))}catch(t){o=!1}for(var a=new r.Buf8(256),s=0;s<256;s++)a[s]=s>=252?6:s>=248?5:s>=240?4:s>=224?3:s>=192?2:1;function u(t,e){if(e<65537&&(t.subarray&&o||!t.subarray&&i))return String.fromCharCode.apply(null,r.shrinkBuf(t,e));for(var n="",a=0;a<e;a++)n+=String.fromCharCode(t[a]);return n}a[254]=a[254]=1,e.string2buf=function(t){var e,n,i,o,a,s=t.length,u=0;for(o=0;o<s;o++)55296==(64512&(n=t.charCodeAt(o)))&&o+1<s&&56320==(64512&(i=t.charCodeAt(o+1)))&&(n=65536+(n-55296<<10)+(i-56320),o++),u+=n<128?1:n<2048?2:n<65536?3:4;for(e=new r.Buf8(u),a=0,o=0;a<u;o++)55296==(64512&(n=t.charCodeAt(o)))&&o+1<s&&56320==(64512&(i=t.charCodeAt(o+1)))&&(n=65536+(n-55296<<10)+(i-56320),o++),n<128?e[a++]=n:n<2048?(e[a++]=192|n>>>6,e[a++]=128|63&n):n<65536?(e[a++]=224|n>>>12,e[a++]=128|n>>>6&63,e[a++]=128|63&n):(e[a++]=240|n>>>18,e[a++]=128|n>>>12&63,e[a++]=128|n>>>6&63,e[a++]=128|63&n);return e},e.buf2binstring=function(t){return u(t,t.length)},e.binstring2buf=function(t){for(var e=new r.Buf8(t.length),n=0,i=e.length;n<i;n++)e[n]=t.charCodeAt(n);return e},e.buf2string=function(t,e){var n,r,i,o,s=e||t.length,c=new Array(2*s);for(r=0,n=0;n<s;)if((i=t[n++])<128)c[r++]=i;else if((o=a[i])>4)c[r++]=65533,n+=o-1;else{for(i&=2===o?31:3===o?15:7;o>1&&n<s;)i=i<<6|63&t[n++],o--;o>1?c[r++]=65533:i<65536?c[r++]=i:(i-=65536,c[r++]=55296|i>>10&1023,c[r++]=56320|1023&i)}return u(c,r)},e.utf8border=function(t,e){var n;for((e=e||t.length)>t.length&&(e=t.length),n=e-1;n>=0&&128==(192&t[n]);)n--;return n<0?e:0===n?e:n+a[t[n]]>e?n:e}},function(t,e,n){"use strict";t.exports=function(t,e,n,r){for(var i=65535&t|0,o=t>>>16&65535|0,a=0;0!==n;){n-=a=n>2e3?2e3:n;do{o=o+(i=i+e[r++]|0)|0}while(--a);i%=65521,o%=65521}return i|o<<16|0}},function(t,e,n){"use strict";t.exports={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8}},function(t,e,n){"use strict";var r=function(){for(var t,e=[],n=0;n<256;n++){t=n;for(var r=0;r<8;r++)t=1&t?3988292384^t>>>1:t>>>1;e[n]=t}return e}();t.exports=function(t,e,n,i){var o=r,a=i+n;t^=-1;for(var s=i;s<a;s++)t=t>>>8^o[255&(t^e[s])];return-1^t}},function(t,e,n){"use strict";t.exports=function(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}},function(t,e,n){"use strict";(function(e,r){var i=n(92);t.exports=_;var o,a=n(183);_.ReadableState=y,n(118).EventEmitter;var s=function(t,e){return t.listeners(e).length},u=n(209),c=n(93).Buffer,l=e.Uint8Array||function(){},h=n(73);h.inherits=n(75);var d=n(479),f=void 0;f=d&&d.debuglog?d.debuglog("stream"):function(){};var p,g=n(465),v=n(208);h.inherits(_,u);var m=["error","close","destroy","pause","resume"];function y(t,e){o=o||n(50),t=t||{},this.objectMode=!!t.objectMode,e instanceof o&&(this.objectMode=this.objectMode||!!t.readableObjectMode);var r=t.highWaterMark,i=this.objectMode?16:16384;this.highWaterMark=r||0===r?r:i,this.highWaterMark=Math.floor(this.highWaterMark),this.buffer=new g,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.destroyed=!1,this.defaultEncoding=t.defaultEncoding||"utf8",this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,t.encoding&&(p||(p=n(210).StringDecoder),this.decoder=new p(t.encoding),this.encoding=t.encoding)}function _(t){if(o=o||n(50),!(this instanceof _))return new _(t);this._readableState=new y(t,this),this.readable=!0,t&&("function"==typeof t.read&&(this._read=t.read),"function"==typeof t.destroy&&(this._destroy=t.destroy)),u.call(this)}function E(t,e,n,r,i){var o,a=t._readableState;return null===e?(a.reading=!1,function(t,e){if(!e.ended){if(e.decoder){var n=e.decoder.end();n&&n.length&&(e.buffer.push(n),e.length+=e.objectMode?1:n.length)}e.ended=!0,x(t)}}(t,a)):(i||(o=function(t,e){var n,r;return r=e,c.isBuffer(r)||r instanceof l||"string"==typeof e||void 0===e||t.objectMode||(n=new TypeError("Invalid non-string/buffer chunk")),n}(a,e)),o?t.emit("error",o):a.objectMode||e&&e.length>0?("string"==typeof e||a.objectMode||Object.getPrototypeOf(e)===c.prototype||(e=function(t){return c.from(t)}(e)),r?a.endEmitted?t.emit("error",new Error("stream.unshift() after end event")):A(t,a,e,!0):a.ended?t.emit("error",new Error("stream.push() after EOF")):(a.reading=!1,a.decoder&&!n?(e=a.decoder.write(e),a.objectMode||0!==e.length?A(t,a,e,!1):w(t,a)):A(t,a,e,!1))):r||(a.reading=!1)),function(t){return!t.ended&&(t.needReadable||t.length<t.highWaterMark||0===t.length)}(a)}function A(t,e,n,r){e.flowing&&0===e.length&&!e.sync?(t.emit("data",n),t.read(0)):(e.length+=e.objectMode?1:n.length,r?e.buffer.unshift(n):e.buffer.push(n),e.needReadable&&x(t)),w(t,e)}Object.defineProperty(_.prototype,"destroyed",{get:function(){return void 0!==this._readableState&&this._readableState.destroyed},set:function(t){this._readableState&&(this._readableState.destroyed=t)}}),_.prototype.destroy=v.destroy,_.prototype._undestroy=v.undestroy,_.prototype._destroy=function(t,e){this.push(null),e(t)},_.prototype.push=function(t,e){var n,r=this._readableState;return r.objectMode?n=!0:"string"==typeof t&&((e=e||r.defaultEncoding)!==r.encoding&&(t=c.from(t,e),e=""),n=!0),E(this,t,e,!1,n)},_.prototype.unshift=function(t){return E(this,t,null,!0,!1)},_.prototype.isPaused=function(){return!1===this._readableState.flowing},_.prototype.setEncoding=function(t){return p||(p=n(210).StringDecoder),this._readableState.decoder=new p(t),this._readableState.encoding=t,this};var S=8388608;function T(t,e){return t<=0||0===e.length&&e.ended?0:e.objectMode?1:t!=t?e.flowing&&e.length?e.buffer.head.data.length:e.length:(t>e.highWaterMark&&(e.highWaterMark=function(t){return t>=S?t=S:(t--,t|=t>>>1,t|=t>>>2,t|=t>>>4,t|=t>>>8,t|=t>>>16,t++),t}(t)),t<=e.length?t:e.ended?e.length:(e.needReadable=!0,0))}function x(t){var e=t._readableState;e.needReadable=!1,e.emittedReadable||(f("emitReadable",e.flowing),e.emittedReadable=!0,e.sync?i(b,t):b(t))}function b(t){f("emit readable"),t.emit("readable"),N(t)}function w(t,e){e.readingMore||(e.readingMore=!0,i(C,t,e))}function C(t,e){for(var n=e.length;!e.reading&&!e.flowing&&!e.ended&&e.length<e.highWaterMark&&(f("maybeReadMore read 0"),t.read(0),n!==e.length);)n=e.length;e.readingMore=!1}function I(t){f("readable nexttick read 0"),t.read(0)}function L(t,e){e.reading||(f("resume read 0"),t.read(0)),e.resumeScheduled=!1,e.awaitDrain=0,t.emit("resume"),N(t),e.flowing&&!e.reading&&t.read(0)}function N(t){var e=t._readableState;for(f("flow",e.flowing);e.flowing&&null!==t.read(););}function O(t,e){return 0===e.length?null:(e.objectMode?n=e.buffer.shift():!t||t>=e.length?(n=e.decoder?e.buffer.join(""):1===e.buffer.length?e.buffer.head.data:e.buffer.concat(e.length),e.buffer.clear()):n=function(t,e,n){var r;return t<e.head.data.length?(r=e.head.data.slice(0,t),e.head.data=e.head.data.slice(t)):r=t===e.head.data.length?e.shift():n?function(t,e){var n=e.head,r=1,i=n.data;for(t-=i.length;n=n.next;){var o=n.data,a=t>o.length?o.length:t;if(a===o.length?i+=o:i+=o.slice(0,t),0==(t-=a)){a===o.length?(++r,n.next?e.head=n.next:e.head=e.tail=null):(e.head=n,n.data=o.slice(a));break}++r}return e.length-=r,i}(t,e):function(t,e){var n=c.allocUnsafe(t),r=e.head,i=1;for(r.data.copy(n),t-=r.data.length;r=r.next;){var o=r.data,a=t>o.length?o.length:t;if(o.copy(n,n.length-t,0,a),0==(t-=a)){a===o.length?(++i,r.next?e.head=r.next:e.head=e.tail=null):(e.head=r,r.data=o.slice(a));break}++i}return e.length-=i,n}(t,e),r}(t,e.buffer,e.decoder),n);var n}function R(t){var e=t._readableState;if(e.length>0)throw new Error('"endReadable()" called on non-empty stream');e.endEmitted||(e.ended=!0,i(M,e,t))}function M(t,e){t.endEmitted||0!==t.length||(t.endEmitted=!0,e.readable=!1,e.emit("end"))}function D(t,e){for(var n=0,r=t.length;n<r;n++)if(t[n]===e)return n;return-1}_.prototype.read=function(t){f("read",t),t=parseInt(t,10);var e=this._readableState,n=t;if(0!==t&&(e.emittedReadable=!1),0===t&&e.needReadable&&(e.length>=e.highWaterMark||e.ended))return f("read: emitReadable",e.length,e.ended),0===e.length&&e.ended?R(this):x(this),null;if(0===(t=T(t,e))&&e.ended)return 0===e.length&&R(this),null;var r,i=e.needReadable;return f("need readable",i),(0===e.length||e.length-t<e.highWaterMark)&&f("length less than watermark",i=!0),e.ended||e.reading?f("reading or ended",i=!1):i&&(f("do read"),e.reading=!0,e.sync=!0,0===e.length&&(e.needReadable=!0),this._read(e.highWaterMark),e.sync=!1,e.reading||(t=T(n,e))),null===(r=t>0?O(t,e):null)?(e.needReadable=!0,t=0):e.length-=t,0===e.length&&(e.ended||(e.needReadable=!0),n!==t&&e.ended&&R(this)),null!==r&&this.emit("data",r),r},_.prototype._read=function(t){this.emit("error",new Error("_read() is not implemented"))},_.prototype.pipe=function(t,e){var n=this,o=this._readableState;switch(o.pipesCount){case 0:o.pipes=t;break;case 1:o.pipes=[o.pipes,t];break;default:o.pipes.push(t)}o.pipesCount+=1,f("pipe count=%d opts=%j",o.pipesCount,e);var u=e&&!1===e.end||t===r.stdout||t===r.stderr?y:c;function c(){f("onend"),t.end()}o.endEmitted?i(u):n.once("end",u),t.on("unpipe",function e(r,i){f("onunpipe"),r===n&&i&&!1===i.hasUnpiped&&(i.hasUnpiped=!0,f("cleanup"),t.removeListener("close",v),t.removeListener("finish",m),t.removeListener("drain",l),t.removeListener("error",g),t.removeListener("unpipe",e),n.removeListener("end",c),n.removeListener("end",y),n.removeListener("data",p),h=!0,!o.awaitDrain||t._writableState&&!t._writableState.needDrain||l())});var l=function(t){return function(){var e=t._readableState;f("pipeOnDrain",e.awaitDrain),e.awaitDrain&&e.awaitDrain--,0===e.awaitDrain&&s(t,"data")&&(e.flowing=!0,N(t))}}(n);t.on("drain",l);var h=!1,d=!1;function p(e){f("ondata"),d=!1,!1!==t.write(e)||d||((1===o.pipesCount&&o.pipes===t||o.pipesCount>1&&-1!==D(o.pipes,t))&&!h&&(f("false write response, pause",n._readableState.awaitDrain),n._readableState.awaitDrain++,d=!0),n.pause())}function g(e){f("onerror",e),y(),t.removeListener("error",g),0===s(t,"error")&&t.emit("error",e)}function v(){t.removeListener("finish",m),y()}function m(){f("onfinish"),t.removeListener("close",v),y()}function y(){f("unpipe"),n.unpipe(t)}return n.on("data",p),function(t,e,n){if("function"==typeof t.prependListener)return t.prependListener(e,n);t._events&&t._events[e]?a(t._events[e])?t._events[e].unshift(n):t._events[e]=[n,t._events[e]]:t.on(e,n)}(t,"error",g),t.once("close",v),t.once("finish",m),t.emit("pipe",n),o.flowing||(f("pipe resume"),n.resume()),t},_.prototype.unpipe=function(t){var e=this._readableState,n={hasUnpiped:!1};if(0===e.pipesCount)return this;if(1===e.pipesCount)return t&&t!==e.pipes?this:(t||(t=e.pipes),e.pipes=null,e.pipesCount=0,e.flowing=!1,t&&t.emit("unpipe",this,n),this);if(!t){var r=e.pipes,i=e.pipesCount;e.pipes=null,e.pipesCount=0,e.flowing=!1;for(var o=0;o<i;o++)r[o].emit("unpipe",this,n);return this}var a=D(e.pipes,t);return-1===a?this:(e.pipes.splice(a,1),e.pipesCount-=1,1===e.pipesCount&&(e.pipes=e.pipes[0]),t.emit("unpipe",this,n),this)},_.prototype.on=function(t,e){var n=u.prototype.on.call(this,t,e);if("data"===t)!1!==this._readableState.flowing&&this.resume();else if("readable"===t){var r=this._readableState;r.endEmitted||r.readableListening||(r.readableListening=r.needReadable=!0,r.emittedReadable=!1,r.reading?r.length&&x(this):i(I,this))}return n},_.prototype.addListener=_.prototype.on,_.prototype.resume=function(){var t=this._readableState;return t.flowing||(f("resume"),t.flowing=!0,function(t,e){e.resumeScheduled||(e.resumeScheduled=!0,i(L,t,e))}(this,t)),this},_.prototype.pause=function(){return f("call pause flowing=%j",this._readableState.flowing),!1!==this._readableState.flowing&&(f("pause"),this._readableState.flowing=!1,this.emit("pause")),this},_.prototype.wrap=function(t){var e=this._readableState,n=!1,r=this;for(var i in t.on("end",function(){if(f("wrapped end"),e.decoder&&!e.ended){var t=e.decoder.end();t&&t.length&&r.push(t)}r.push(null)}),t.on("data",function(i){f("wrapped data"),e.decoder&&(i=e.decoder.write(i)),(!e.objectMode||null!==i&&void 0!==i)&&(e.objectMode||i&&i.length)&&(r.push(i)||(n=!0,t.pause()))}),t)void 0===this[i]&&"function"==typeof t[i]&&(this[i]=function(e){return function(){return t[e].apply(t,arguments)}}(i));for(var o=0;o<m.length;o++)t.on(m[o],r.emit.bind(r,m[o]));return r._read=function(e){f("wrapped _read",e),n&&(n=!1,t.resume())},r},_._fromList=O}).call(e,n(6),n(28))},function(t,e,n){"use strict";t.exports=o;var r=n(50),i=n(73);function o(t){if(!(this instanceof o))return new o(t);r.call(this,t),this._transformState=new function(t){this.afterTransform=function(e,n){return function(t,e,n){var r=t._transformState;r.transforming=!1;var i=r.writecb;if(!i)return t.emit("error",new Error("write callback called multiple times"));r.writechunk=null,r.writecb=null,null!==n&&void 0!==n&&t.push(n),i(e);var o=t._readableState;o.reading=!1,(o.needReadable||o.length<o.highWaterMark)&&t._read(o.highWaterMark)}(t,e,n)},this.needTransform=!1,this.transforming=!1,this.writecb=null,this.writechunk=null,this.writeencoding=null}(this);var e=this;this._readableState.needReadable=!0,this._readableState.sync=!1,t&&("function"==typeof t.transform&&(this._transform=t.transform),"function"==typeof t.flush&&(this._flush=t.flush)),this.once("prefinish",function(){"function"==typeof this._flush?this._flush(function(t,n){a(e,t,n)}):a(e)})}function a(t,e,n){if(e)return t.emit("error",e);null!==n&&void 0!==n&&t.push(n);var r=t._writableState,i=t._transformState;if(r.length)throw new Error("Calling transform done when ws.length != 0");if(i.transforming)throw new Error("Calling transform done when still transforming");return t.push(null)}i.inherits=n(75),i.inherits(o,r),o.prototype.push=function(t,e){return this._transformState.needTransform=!1,r.prototype.push.call(this,t,e)},o.prototype._transform=function(t,e,n){throw new Error("_transform() is not implemented")},o.prototype._write=function(t,e,n){var r=this._transformState;if(r.writecb=n,r.writechunk=t,r.writeencoding=e,!r.transforming){var i=this._readableState;(r.needTransform||i.needReadable||i.length<i.highWaterMark)&&this._read(i.highWaterMark)}},o.prototype._read=function(t){var e=this._transformState;null!==e.writechunk&&e.writecb&&!e.transforming?(e.transforming=!0,this._transform(e.writechunk,e.writeencoding,e.afterTransform)):e.needTransform=!0},o.prototype._destroy=function(t,e){var n=this;r.prototype._destroy.call(this,t,function(t){e(t),n.emit("close")})}},function(t,e,n){"use strict";var r=n(92);function i(t,e){t.emit("error",e)}t.exports={destroy:function(t,e){var n=this,o=this._readableState&&this._readableState.destroyed,a=this._writableState&&this._writableState.destroyed;o||a?e?e(t):!t||this._writableState&&this._writableState.errorEmitted||r(i,this,t):(this._readableState&&(this._readableState.destroyed=!0),this._writableState&&(this._writableState.destroyed=!0),this._destroy(t||null,function(t){!e&&t?(r(i,n,t),n._writableState&&(n._writableState.errorEmitted=!0)):e&&e(t)}))},undestroy:function(){this._readableState&&(this._readableState.destroyed=!1,this._readableState.reading=!1,this._readableState.ended=!1,this._readableState.endEmitted=!1),this._writableState&&(this._writableState.destroyed=!1,this._writableState.ended=!1,this._writableState.ending=!1,this._writableState.finished=!1,this._writableState.errorEmitted=!1)}}},function(t,e,n){t.exports=n(118).EventEmitter},function(t,e,n){"use strict";var r=n(93).Buffer,i=r.isEncoding||function(t){switch((t=""+t)&&t.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};function o(t){var e;switch(this.encoding=function(t){var e=function(t){if(!t)return"utf8";for(var e;;)switch(t){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return t;default:if(e)return;t=(""+t).toLowerCase(),e=!0}}(t);if("string"!=typeof e&&(r.isEncoding===i||!i(t)))throw new Error("Unknown encoding: "+t);return e||t}(t),this.encoding){case"utf16le":this.text=u,this.end=c,e=4;break;case"utf8":this.fillLast=s,e=4;break;case"base64":this.text=l,this.end=h,e=3;break;default:return this.write=d,void(this.end=f)}this.lastNeed=0,this.lastTotal=0,this.lastChar=r.allocUnsafe(e)}function a(t){return t<=127?0:t>>5==6?2:t>>4==14?3:t>>3==30?4:-1}function s(t){var e=this.lastTotal-this.lastNeed,n=function(t,e,n){if(128!=(192&e[0]))return t.lastNeed=0,"".repeat(n);if(t.lastNeed>1&&e.length>1){if(128!=(192&e[1]))return t.lastNeed=1,"".repeat(n+1);if(t.lastNeed>2&&e.length>2&&128!=(192&e[2]))return t.lastNeed=2,"".repeat(n+2)}}(this,t,e);return void 0!==n?n:this.lastNeed<=t.length?(t.copy(this.lastChar,e,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal)):(t.copy(this.lastChar,e,0,t.length),void(this.lastNeed-=t.length))}function u(t,e){if((t.length-e)%2==0){var n=t.toString("utf16le",e);if(n){var r=n.charCodeAt(n.length-1);if(r>=55296&&r<=56319)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=t[t.length-2],this.lastChar[1]=t[t.length-1],n.slice(0,-1)}return n}return this.lastNeed=1,this.lastTotal=2,this.lastChar[0]=t[t.length-1],t.toString("utf16le",e,t.length-1)}function c(t){var e=t&&t.length?this.write(t):"";if(this.lastNeed){var n=this.lastTotal-this.lastNeed;return e+this.lastChar.toString("utf16le",0,n)}return e}function l(t,e){var n=(t.length-e)%3;return 0===n?t.toString("base64",e):(this.lastNeed=3-n,this.lastTotal=3,1===n?this.lastChar[0]=t[t.length-1]:(this.lastChar[0]=t[t.length-2],this.lastChar[1]=t[t.length-1]),t.toString("base64",e,t.length-n))}function h(t){var e=t&&t.length?this.write(t):"";return this.lastNeed?e+this.lastChar.toString("base64",0,3-this.lastNeed):e}function d(t){return t.toString(this.encoding)}function f(t){return t&&t.length?this.write(t):""}e.StringDecoder=o,o.prototype.write=function(t){if(0===t.length)return"";var e,n;if(this.lastNeed){if(void 0===(e=this.fillLast(t)))return"";n=this.lastNeed,this.lastNeed=0}else n=0;return n<t.length?e?e+this.text(t,n):this.text(t,n):e||""},o.prototype.end=function(t){var e=t&&t.length?this.write(t):"";return this.lastNeed?e+"".repeat(this.lastTotal-this.lastNeed):e},o.prototype.text=function(t,e){var n=function(t,e,n){var r=e.length-1;if(r<n)return 0;var i=a(e[r]);return i>=0?(i>0&&(t.lastNeed=i-1),i):--r<n?0:(i=a(e[r]))>=0?(i>0&&(t.lastNeed=i-2),i):--r<n?0:(i=a(e[r]))>=0?(i>0&&(2===i?i=0:t.lastNeed=i-3),i):0}(this,t,e);if(!this.lastNeed)return t.toString("utf8",e);this.lastTotal=n;var r=t.length-(n-this.lastNeed);return t.copy(this.lastChar,0,r),t.toString("utf8",e,r)},o.prototype.fillLast=function(t){if(this.lastNeed<=t.length)return t.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);t.copy(this.lastChar,this.lastTotal-this.lastNeed,0,t.length),this.lastNeed-=t.length}},function(t,e){function n(t,e){for(var n in t)e[n]=t[n]}function r(t,e){var r=t.prototype;if(Object.create){var i=Object.create(e.prototype);r.__proto__=i}if(!(r instanceof e)){function o(){}o.prototype=e.prototype,n(r,o=new o),t.prototype=r=o}r.constructor!=t&&("function"!=typeof t&&console.error("unknow Class:"+t),r.constructor=t)}var i="http://www.w3.org/1999/xhtml",o={},a=o.ELEMENT_NODE=1,s=o.ATTRIBUTE_NODE=2,u=o.TEXT_NODE=3,c=o.CDATA_SECTION_NODE=4,l=o.ENTITY_REFERENCE_NODE=5,h=o.ENTITY_NODE=6,d=o.PROCESSING_INSTRUCTION_NODE=7,f=o.COMMENT_NODE=8,p=o.DOCUMENT_NODE=9,g=o.DOCUMENT_TYPE_NODE=10,v=o.DOCUMENT_FRAGMENT_NODE=11,m=o.NOTATION_NODE=12,y={},_={},E=(y.INDEX_SIZE_ERR=(_[1]="Index size error",1),y.DOMSTRING_SIZE_ERR=(_[2]="DOMString size error",2),y.HIERARCHY_REQUEST_ERR=(_[3]="Hierarchy request error",3)),A=(y.WRONG_DOCUMENT_ERR=(_[4]="Wrong document",4),y.INVALID_CHARACTER_ERR=(_[5]="Invalid character",5),y.NO_DATA_ALLOWED_ERR=(_[6]="No data allowed",6),y.NO_MODIFICATION_ALLOWED_ERR=(_[7]="No modification allowed",7),y.NOT_FOUND_ERR=(_[8]="Not found",8)),S=(y.NOT_SUPPORTED_ERR=(_[9]="Not supported",9),y.INUSE_ATTRIBUTE_ERR=(_[10]="Attribute in use",10));function T(t,e){if(e instanceof Error)var n=e;else n=this,Error.call(this,_[t]),this.message=_[t],Error.captureStackTrace&&Error.captureStackTrace(this,T);return n.code=t,e&&(this.message=this.message+": "+e),n}function x(){}function b(t,e){this._node=t,this._refresh=e,w(this)}function w(t){var e=t._node._inc||t._node.ownerDocument._inc;if(t._inc!=e){var r=t._refresh(t._node);nt(t,"length",r.length),n(r,t),t._inc=e}}function C(){}function I(t,e){for(var n=t.length;n--;)if(t[n]===e)return n}function L(t,e,n,r){if(r?e[I(e,r)]=n:e[e.length++]=n,t){n.ownerElement=t;var i=t.ownerDocument;i&&(r&&k(i,t,r),function(t,e,n){i&&i._inc++,"http://www.w3.org/2000/xmlns/"==n.namespaceURI&&(e._nsMap[n.prefix?n.localName:""]=n.value)}(0,t,n))}}function N(t,e,n){var r=I(e,n);if(!(r>=0))throw T(A,new Error(t.tagName+"@"+n));for(var i=e.length-1;r<i;)e[r]=e[++r];if(e.length=i,t){var o=t.ownerDocument;o&&(k(o,t,n),n.ownerElement=null)}}function O(t){if(this._features={},t)for(var e in t)this._features=t[e]}function R(){}function M(t){return("<"==t?"&lt;":">"==t&&"&gt;")||"&"==t&&"&amp;"||'"'==t&&"&quot;"||"&#"+t.charCodeAt()+";"}function D(t,e){if(e(t))return!0;if(t=t.firstChild)do{if(D(t,e))return!0}while(t=t.nextSibling)}function P(){}function k(t,e,n,r){t&&t._inc++,"http://www.w3.org/2000/xmlns/"==n.namespaceURI&&delete e._nsMap[n.prefix?n.localName:""]}function B(t,e,n){if(t&&t._inc){t._inc++;var r=e.childNodes;if(n)r[r.length++]=n;else{for(var i=e.firstChild,o=0;i;)r[o++]=i,i=i.nextSibling;r.length=o}}}function F(t,e){var n=e.previousSibling,r=e.nextSibling;return n?n.nextSibling=r:t.firstChild=r,r?r.previousSibling=n:t.lastChild=n,B(t.ownerDocument,t),e}function V(t,e,n){var r=e.parentNode;if(r&&r.removeChild(e),e.nodeType===v){var i=e.firstChild;if(null==i)return e;var o=e.lastChild}else i=o=e;var a=n?n.previousSibling:t.lastChild;i.previousSibling=a,o.nextSibling=n,a?a.nextSibling=i:t.firstChild=i,null==n?t.lastChild=o:n.previousSibling=o;do{i.parentNode=t}while(i!==o&&(i=i.nextSibling));return B(t.ownerDocument||t,t),e.nodeType==v&&(e.firstChild=e.lastChild=null),e}function U(){this._nsMap={}}function H(){}function Y(){}function G(){}function j(){}function z(){}function W(){}function K(){}function Q(){}function q(){}function X(){}function $(){}function J(){}function Z(t,e){var n=[],r=9==this.nodeType?this.documentElement:this,i=r.prefix,o=r.namespaceURI;if(o&&null==i&&null==(i=r.lookupPrefix(o)))var a=[{namespace:o,prefix:null}];return et(this,n,t,e,a),n.join("")}function tt(t,e,n){var r=t.prefix||"",i=t.namespaceURI;if(!r&&!i)return!1;if("xml"===r&&"http://www.w3.org/XML/1998/namespace"===i||"http://www.w3.org/2000/xmlns/"==i)return!1;for(var o=n.length;o--;){var a=n[o];if(a.prefix==r)return a.namespace!=i}return!0}function et(t,e,n,r,o){if(r){if(!(t=r(t)))return;if("string"==typeof t)return void e.push(t)}switch(t.nodeType){case a:o||(o=[]),o.length;var h=t.attributes,m=h.length,y=t.firstChild,_=t.tagName;n=i===t.namespaceURI||n,e.push("<",_);for(var E=0;E<m;E++)"xmlns"==(A=h.item(E)).prefix?o.push({prefix:A.localName,namespace:A.value}):"xmlns"==A.nodeName&&o.push({prefix:"",namespace:A.value});for(E=0;E<m;E++){var A;if(tt(A=h.item(E),0,o)){var S=A.prefix||"",T=A.namespaceURI,x=S?" xmlns:"+S:" xmlns";e.push(x,'="',T,'"'),o.push({prefix:S,namespace:T})}et(A,e,n,r,o)}if(tt(t,0,o)&&(S=t.prefix||"",T=t.namespaceURI,x=S?" xmlns:"+S:" xmlns",e.push(x,'="',T,'"'),o.push({prefix:S,namespace:T})),y||n&&!/^(?:meta|link|img|br|hr|input)$/i.test(_)){if(e.push(">"),n&&/^script$/i.test(_))for(;y;)y.data?e.push(y.data):et(y,e,n,r,o),y=y.nextSibling;else for(;y;)et(y,e,n,r,o),y=y.nextSibling;e.push("</",_,">")}else e.push("/>");return;case p:case v:for(y=t.firstChild;y;)et(y,e,n,r,o),y=y.nextSibling;return;case s:return e.push(" ",t.name,'="',t.value.replace(/[<&"]/g,M),'"');case u:return e.push(t.data.replace(/[<&]/g,M));case c:return e.push("<![CDATA[",t.data,"]]>");case f:return e.push("\x3c!--",t.data,"--\x3e");case g:var b=t.publicId,w=t.systemId;if(e.push("<!DOCTYPE ",t.name),b)e.push(' PUBLIC "',b),w&&"."!=w&&e.push('" "',w),e.push('">');else if(w&&"."!=w)e.push(' SYSTEM "',w,'">');else{var C=t.internalSubset;C&&e.push(" [",C,"]"),e.push(">")}return;case d:return e.push("<?",t.target," ",t.data,"?>");case l:return e.push("&",t.nodeName,";");default:e.push("??",t.nodeName)}}function nt(t,e,n){t[e]=n}y.INVALID_STATE_ERR=(_[11]="Invalid state",11),y.SYNTAX_ERR=(_[12]="Syntax error",12),y.INVALID_MODIFICATION_ERR=(_[13]="Invalid modification",13),y.NAMESPACE_ERR=(_[14]="Invalid namespace",14),y.INVALID_ACCESS_ERR=(_[15]="Invalid access",15),T.prototype=Error.prototype,n(y,T),x.prototype={length:0,item:function(t){return this[t]||null},toString:function(t,e){for(var n=[],r=0;r<this.length;r++)et(this[r],n,t,e);return n.join("")}},b.prototype.item=function(t){return w(this),this[t]},r(b,x),C.prototype={length:0,item:x.prototype.item,getNamedItem:function(t){for(var e=this.length;e--;){var n=this[e];if(n.nodeName==t)return n}},setNamedItem:function(t){var e=t.ownerElement;if(e&&e!=this._ownerElement)throw new T(S);var n=this.getNamedItem(t.nodeName);return L(this._ownerElement,this,t,n),n},setNamedItemNS:function(t){var e,n=t.ownerElement;if(n&&n!=this._ownerElement)throw new T(S);return e=this.getNamedItemNS(t.namespaceURI,t.localName),L(this._ownerElement,this,t,e),e},removeNamedItem:function(t){var e=this.getNamedItem(t);return N(this._ownerElement,this,e),e},removeNamedItemNS:function(t,e){var n=this.getNamedItemNS(t,e);return N(this._ownerElement,this,n),n},getNamedItemNS:function(t,e){for(var n=this.length;n--;){var r=this[n];if(r.localName==e&&r.namespaceURI==t)return r}return null}},O.prototype={hasFeature:function(t,e){var n=this._features[t.toLowerCase()];return!(!n||e&&!(e in n))},createDocument:function(t,e,n){var r=new P;if(r.implementation=this,r.childNodes=new x,r.doctype=n,n&&r.appendChild(n),e){var i=r.createElementNS(t,e);r.appendChild(i)}return r},createDocumentType:function(t,e,n){var r=new W;return r.name=t,r.nodeName=t,r.publicId=e,r.systemId=n,r}},R.prototype={firstChild:null,lastChild:null,previousSibling:null,nextSibling:null,attributes:null,parentNode:null,childNodes:null,ownerDocument:null,nodeValue:null,namespaceURI:null,prefix:null,localName:null,insertBefore:function(t,e){return V(this,t,e)},replaceChild:function(t,e){this.insertBefore(t,e),e&&this.removeChild(e)},removeChild:function(t){return F(this,t)},appendChild:function(t){return this.insertBefore(t,null)},hasChildNodes:function(){return null!=this.firstChild},cloneNode:function(t){return function t(e,n,r){var i=new n.constructor;for(var o in n){var u=n[o];"object"!=typeof u&&u!=i[o]&&(i[o]=u)}switch(n.childNodes&&(i.childNodes=new x),i.ownerDocument=e,i.nodeType){case a:var c=n.attributes,l=i.attributes=new C,h=c.length;l._ownerElement=i;for(var d=0;d<h;d++)i.setAttributeNode(t(e,c.item(d),!0));break;case s:r=!0}if(r)for(var f=n.firstChild;f;)i.appendChild(t(e,f,r)),f=f.nextSibling;return i}(this.ownerDocument||this,this,t)},normalize:function(){for(var t=this.firstChild;t;){var e=t.nextSibling;e&&e.nodeType==u&&t.nodeType==u?(this.removeChild(e),t.appendData(e.data)):(t.normalize(),t=e)}},isSupported:function(t,e){return this.ownerDocument.implementation.hasFeature(t,e)},hasAttributes:function(){return this.attributes.length>0},lookupPrefix:function(t){for(var e=this;e;){var n=e._nsMap;if(n)for(var r in n)if(n[r]==t)return r;e=e.nodeType==s?e.ownerDocument:e.parentNode}return null},lookupNamespaceURI:function(t){for(var e=this;e;){var n=e._nsMap;if(n&&t in n)return n[t];e=e.nodeType==s?e.ownerDocument:e.parentNode}return null},isDefaultNamespace:function(t){return null==this.lookupPrefix(t)}},n(o,R),n(o,R.prototype),P.prototype={nodeName:"#document",nodeType:p,doctype:null,documentElement:null,_inc:1,insertBefore:function(t,e){if(t.nodeType==v){for(var n=t.firstChild;n;){var r=n.nextSibling;this.insertBefore(n,e),n=r}return t}return null==this.documentElement&&t.nodeType==a&&(this.documentElement=t),V(this,t,e),t.ownerDocument=this,t},removeChild:function(t){return this.documentElement==t&&(this.documentElement=null),F(this,t)},importNode:function(t,e){return function t(e,n,r){var i;switch(n.nodeType){case a:(i=n.cloneNode(!1)).ownerDocument=e;case v:break;case s:r=!0}if(i||(i=n.cloneNode(!1)),i.ownerDocument=e,i.parentNode=null,r)for(var o=n.firstChild;o;)i.appendChild(t(e,o,r)),o=o.nextSibling;return i}(this,t,e)},getElementById:function(t){var e=null;return D(this.documentElement,function(n){if(n.nodeType==a&&n.getAttribute("id")==t)return e=n,!0}),e},createElement:function(t){var e=new U;return e.ownerDocument=this,e.nodeName=t,e.tagName=t,e.childNodes=new x,(e.attributes=new C)._ownerElement=e,e},createDocumentFragment:function(){var t=new X;return t.ownerDocument=this,t.childNodes=new x,t},createTextNode:function(t){var e=new G;return e.ownerDocument=this,e.appendData(t),e},createComment:function(t){var e=new j;return e.ownerDocument=this,e.appendData(t),e},createCDATASection:function(t){var e=new z;return e.ownerDocument=this,e.appendData(t),e},createProcessingInstruction:function(t,e){var n=new $;return n.ownerDocument=this,n.tagName=n.target=t,n.nodeValue=n.data=e,n},createAttribute:function(t){var e=new H;return e.ownerDocument=this,e.name=t,e.nodeName=t,e.localName=t,e.specified=!0,e},createEntityReference:function(t){var e=new q;return e.ownerDocument=this,e.nodeName=t,e},createElementNS:function(t,e){var n=new U,r=e.split(":"),i=n.attributes=new C;return n.childNodes=new x,n.ownerDocument=this,n.nodeName=e,n.tagName=e,n.namespaceURI=t,2==r.length?(n.prefix=r[0],n.localName=r[1]):n.localName=e,i._ownerElement=n,n},createAttributeNS:function(t,e){var n=new H,r=e.split(":");return n.ownerDocument=this,n.nodeName=e,n.name=e,n.namespaceURI=t,n.specified=!0,2==r.length?(n.prefix=r[0],n.localName=r[1]):n.localName=e,n}},r(P,R),U.prototype={nodeType:a,hasAttribute:function(t){return null!=this.getAttributeNode(t)},getAttribute:function(t){var e=this.getAttributeNode(t);return e&&e.value||""},getAttributeNode:function(t){return this.attributes.getNamedItem(t)},setAttribute:function(t,e){var n=this.ownerDocument.createAttribute(t);n.value=n.nodeValue=""+e,this.setAttributeNode(n)},removeAttribute:function(t){var e=this.getAttributeNode(t);e&&this.removeAttributeNode(e)},appendChild:function(t){return t.nodeType===v?this.insertBefore(t,null):function(t,e){var n=e.parentNode;if(n){var r=t.lastChild;n.removeChild(e),r=t.lastChild}return r=t.lastChild,e.parentNode=t,e.previousSibling=r,e.nextSibling=null,r?r.nextSibling=e:t.firstChild=e,t.lastChild=e,B(t.ownerDocument,t,e),e}(this,t)},setAttributeNode:function(t){return this.attributes.setNamedItem(t)},setAttributeNodeNS:function(t){return this.attributes.setNamedItemNS(t)},removeAttributeNode:function(t){return this.attributes.removeNamedItem(t.nodeName)},removeAttributeNS:function(t,e){var n=this.getAttributeNodeNS(t,e);n&&this.removeAttributeNode(n)},hasAttributeNS:function(t,e){return null!=this.getAttributeNodeNS(t,e)},getAttributeNS:function(t,e){var n=this.getAttributeNodeNS(t,e);return n&&n.value||""},setAttributeNS:function(t,e,n){var r=this.ownerDocument.createAttributeNS(t,e);r.value=r.nodeValue=""+n,this.setAttributeNode(r)},getAttributeNodeNS:function(t,e){return this.attributes.getNamedItemNS(t,e)},getElementsByTagName:function(t){return new b(this,function(e){var n=[];return D(e,function(r){r===e||r.nodeType!=a||"*"!==t&&r.tagName!=t||n.push(r)}),n})},getElementsByTagNameNS:function(t,e){return new b(this,function(n){var r=[];return D(n,function(i){i===n||i.nodeType!==a||"*"!==t&&i.namespaceURI!==t||"*"!==e&&i.localName!=e||r.push(i)}),r})}},P.prototype.getElementsByTagName=U.prototype.getElementsByTagName,P.prototype.getElementsByTagNameNS=U.prototype.getElementsByTagNameNS,r(U,R),H.prototype.nodeType=s,r(H,R),Y.prototype={data:"",substringData:function(t,e){return this.data.substring(t,t+e)},appendData:function(t){t=this.data+t,this.nodeValue=this.data=t,this.length=t.length},insertData:function(t,e){this.replaceData(t,0,e)},appendChild:function(t){throw new Error(_[E])},deleteData:function(t,e){this.replaceData(t,e,"")},replaceData:function(t,e,n){n=this.data.substring(0,t)+n+this.data.substring(t+e),this.nodeValue=this.data=n,this.length=n.length}},r(Y,R),G.prototype={nodeName:"#text",nodeType:u,splitText:function(t){var e=this.data,n=e.substring(t);e=e.substring(0,t),this.data=this.nodeValue=e,this.length=e.length;var r=this.ownerDocument.createTextNode(n);return this.parentNode&&this.parentNode.insertBefore(r,this.nextSibling),r}},r(G,Y),j.prototype={nodeName:"#comment",nodeType:f},r(j,Y),z.prototype={nodeName:"#cdata-section",nodeType:c},r(z,Y),W.prototype.nodeType=g,r(W,R),K.prototype.nodeType=m,r(K,R),Q.prototype.nodeType=h,r(Q,R),q.prototype.nodeType=l,r(q,R),X.prototype.nodeName="#document-fragment",X.prototype.nodeType=v,r(X,R),$.prototype.nodeType=d,r($,R),J.prototype.serializeToString=function(t,e,n){return Z.call(t,e,n)},R.prototype.toString=Z;try{Object.defineProperty&&(Object.defineProperty(b.prototype,"length",{get:function(){return w(this),this.$$length}}),Object.defineProperty(R.prototype,"textContent",{get:function(){return function t(e){switch(e.nodeType){case a:case v:var n=[];for(e=e.firstChild;e;)7!==e.nodeType&&8!==e.nodeType&&n.push(t(e)),e=e.nextSibling;return n.join("");default:return e.nodeValue}}(this)},set:function(t){switch(this.nodeType){case a:case v:for(;this.firstChild;)this.removeChild(this.firstChild);(t||String(t))&&this.appendChild(this.ownerDocument.createTextNode(t));break;default:this.data=t,this.value=t,this.nodeValue=t}}}),nt=function(t,e,n){t["$$"+e]=n})}catch(t){}e.DOMImplementation=O,e.XMLSerializer=J},function(t,e){t.exports=__webpack_require__(280)},function(t,e,n){"use strict";e.__esModule=!0;var r=n(225),i=n(219),o=n(221),a=n(223),s=n(222),u=n(224);e.default={fromXMind:r.fromXMind,fromFreemind:i.fromFreemind,fromLighten:o.fromLighten,fromLightenZipPromise:o.fromLightenZipPromise,fromMindmanager:a.fromMindmanager,fromMarkdown:s.fromMarkdown,fromMindNode:u.fromMindNode,isFileEncrypted:r.isFileEncrypted}},function(t,e,n){"use strict";var r=s(n(2)),i=s(n(11)),o=s(n(101)),a=s(n(100));function s(t){return t&&t.__esModule?t:{default:t}}var u=n(129),c=n(126),l=n(1),h=n(0),d=h.EVENTS,f=h.MODULE_NAME,p=n(228),g=[d.BEFORE_EDITOR_REMOVE,d.EDITOR_REMOVED,d.AFTER_MODIFY_STATUS_CHANGE],v=l.invert(d),m=u.extend({initialize:function(t){var e=t.scrollContainer;m.__super__.initialize.apply(this,arguments),this.scrollContainer=e,this.currentSheetId=-1,this.sheetEditors={},this._gestureArgs=[],this._eventArgs=[],this._actionChain=p(this),this.baseUndoIndex=0,this.miniMapManager=new E(this),this.initListeners()},initListeners:function(){var t=this;this.listenTo(this.model,d.BEFORE_REMOVE_SHEET_MODEL,this.removeSheet),this.listenTo(this.model,"all",function(){for(var e=arguments.length,n=Array(e),r=0;r<e;r++)n[r]=arguments[r];n[0]in v&&t.trigger.apply(t,n)}),this.listenTo(this.model,d.AFTER_WORKBOOK_CONTENT_CHANGE,l.debounce(function(){t.trigger(d.AFTER_MODIFY_STATUS_CHANGE)},0))},updateBaseUndoIndex:function(){this.baseUndoIndex=this.model.getUndo().getIndex(),this.trigger(d.AFTER_MODIFY_STATUS_CHANGE)},_remove:function(){this.sheetEditors={}},onGesture:function(t,e,n){this._gestureArgs.push(arguments);var r=this.getCurrentSheetEditor();r.onGesture.apply(r,arguments)},offGesture:function(t,e,n){var r=this.getCurrentSheetEditor(),i=_(t,e,n);this._gestureArgs=this._gestureArgs.filter(function(t){return!i(t)||(r.offGesture.apply(r,t),!1)})},onEvent:function(t,e,n){this._eventArgs.push(arguments);var r=this.getCurrentSheetEditor();r.onEvent.apply(r,arguments)},offEvent:function(t,e,n){var r=this.getCurrentSheetEditor(),i=_(t,e,n);this._eventArgs=this._eventArgs.filter(function(t){return!i(t)||(r.offEvent.apply(r,t),!1)})},removeSheet:function(t){var e=this.sheetEditors[t];if(e){e.remove(),this.stopListening(e),delete this.sheetEditors[t];var n=Number.MAX_VALUE,r=-1,i=this.findSheetIndex(t);this.model.sheets.forEach(function(t,e){if(e!==i){var o=Math.abs(e-i);(o<n||o===n&&e>i)&&(r=e,n=o)}}),this.switchTo(r)}},switchTo:function(t){var e=this,n=!1;if(this.model.sheets[t]){var r=this.model.findSheetId(t);if(this.currentSheetId!==r){this.trigger(d.BEFORE_SWITCH_SHEET,t);var i=this.getCurrentSheetEditor();i&&function(t){this.stopListening(t),this._gestureArgs.forEach(function(e){t.offGesture.apply(t,e)}),this._eventArgs.forEach(function(e){t.offEvent.apply(t,e)})}.call(this,i);var o=this.sheetEditors,a=o[r];a||(this.trigger(d.BEFORE_CREATE_SHEET_EDITOR),a=this.initSheetEditor(t),this.trigger(d.SHEET_EDITOR_CREATED),n=!0),function(t){var e=this;this.listenTo(t,"all",function(){for(var t=arguments.length,n=Array(t),r=0;r<t;r++)n[r]=arguments[r];var i=n[0];-1===g.indexOf(i)&&e.trigger.apply(e,n)}),this._gestureArgs.forEach(function(e){t.onGesture.apply(t,e)}),this._eventArgs.forEach(function(e){t.onEvent.apply(t,e)})}.call(this,a),l.each(o,function(t){t===a?e.showSheetEditor(t,n):e.hideSheetEditor(t)}),this.currentSheetId=r,this.trigger(d.SHEET_SWITCHED)}}else console.warn("try to switch to an inexistent sheet")},initSheetEditor:function(t){if(this.model.sheets[t]){var e=this.model.findSheetId(t);if(!this.sheetEditors[e]){var n=document.createElement("div");n.classList.add("workbook-item"),n.style.width="100%",n.style.height="100%",n.style.position="absolute",this.$el.append(n);var r=new c({el:n,model:this.model.sheets[t],scrollContainer:this.scrollContainer,parent:this});return this.sheetEditors[e]=r,r.initInnerView(),this.hideSheetEditor(r),r}}else console.warn("try to initialize an inexistent sheet")},initAllSheetEditor:function(){var t=this;this.model.sheets.forEach(function(e,n){t.initSheetEditor(n)})},hideSheetEditor:function(t){t.el.style.display="none"},showSheetEditor:function(t,e){if(t.el.style.display="block",!e){var n=t.getSVGView().getCanvasControl();t.isVanaPlatform()?n.resetScrollContainerArea():t.isMobilePlatform()&&n.moveRealPositionToScrollContainerCenter({x:0,y:0})}},findSheetIndex:function(t){return this.model.findSheetIndex(t)},getCurrentSheetEditor:function(){return this.sheetEditors[this.currentSheetId]},getSheetEditorById:function(t){return this.sheetEditors[t]},execAction:function(){var t=(0,a.default)(o.default.mark(function t(e){for(var n=arguments.length,r=Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];var a,s,u;return o.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(!(a=this._actionChain.actionMap[e])){t.next=18;break}if(a.isStatusNormal.apply(a,r)){t.next=4;break}return t.abrupt("return");case 4:if(!(s=this._actionChain.preActionMap[e])){t.next=17;break}return t.prev=6,t.next=9,s();case 9:return t.abrupt("return",a.doExecute.apply(a,r));case 12:t.prev=12,t.t0=t.catch(6),console.log("pre action reject");case 15:t.next=18;break;case 17:return t.abrupt("return",a.doExecute.apply(a,r));case 18:return u=this.getCurrentSheetEditor(),t.abrupt("return",u&&u.execAction.apply(u,[e].concat(r)));case 20:case"end":return t.stop()}},t,this,[[6,12]])}));return function(e){return t.apply(this,arguments)}}(),queryActionStatus:function(t){for(var e=arguments.length,n=Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];var i=this._actionChain.actionMap[t];if(i)return i.queryStatus.apply(i,n);var o=this.getCurrentSheetEditor();return o&&o.queryActionStatus.apply(o,arguments)},getChildEditors:function(){var t=this,e=[];return this.model.get("sheets").forEach(function(n){var r=t.sheetEditors[n.id];r&&e.push(r)}),e},getSelections:y("getSelections",function(){return[]}),getComponentViewById:function(t){var e=void 0;return l.values(this.sheetEditors).some(function(n){return e=n.getComponentViewById(t)}),e},getActiveUIStatus:y("getActiveUIStatus",function(){return[]}),getZoomPencentage:y("getZoomPencentage",function(){return 100}),getTransform:y("getTransform",function(){}),isWorkBookModified:function(){var t=this,e=(0,i.default)(this.sheetEditors).some(function(e){var n=t.sheetEditors[e];return n&&n.isSheetModified()}),n=this.baseUndoIndex!==this.model.getUndo().getIndex();return e||n}});function y(t,e){return e?function(){var n=this.sheetEditors[this.currentSheetId];return n?n[t].apply(n,arguments):e.apply(this,arguments)}:function(){var e=this.sheetEditors[this.currentSheetId];return e&&e[t].apply(e,arguments)}}function _(t,e,n){return e?n?t&&e&&n?function(r){return t===r[0]&&e===r[1]&&n===r[2]}:void 0:function(n){return t===n[0]&&e===n[1]}:function(e){return t===e[0]}}var E=function(){function t(e){(0,r.default)(this,t),this._workbookEditor=e,this._show=!1,this._initEventListener()}return t.prototype._initEventListener=function(){var t=this;this._workbookEditor.on(d.SHEET_SWITCHED,function(){t.setMiniMapDisplay(t._show)})},t.prototype._getSheetEditorList=function(){var t=this;return(0,i.default)(this._workbookEditor.sheetEditors).map(function(e){return t._workbookEditor.sheetEditors[e]})},t.prototype.setMiniMapDisplay=function(t){if(this._getSheetEditorList().forEach(function(t){t.execAction("setMiniMapDisplay",!1)}),t){var e=this._workbookEditor.getCurrentSheetEditor(),n=e.getModule(f.MINI_MAP);n&&n.setMiniMapDisplay(e,!0),n&&n.resetMiniMapUse()}this._show=t},t}();t.exports=m},function(t,e,n){"use strict";t.exports="\n.workbook-item{\n}\n\n.sb-container {\n}\n\n.sb-container>.app-tools-container{\n}\n\n.sb-container>.mm-editor {\n}\n\n.sb-container>.mm-editor .wallpaper {\n  position: absolute;\n  width: 100%;\n  height: 100%;\n  top: 0;\n  left: 0;\n  z-index: -1;\n}\n\n.sb-container [name=\"viewport-cover\"] {\n  height: 100vh;\n  width: 100vw;\n  position: fixed;\n  top: 0;\n  left: 0;\n  z-index: 1000;\n  cursor: -webkit-grabbing;\n  cursor: -moz-grabbing;\n  cursor: grabbing;\n}\n\n\n\n.sb-container .edit-receiver {\n  position: absolute;\n  box-sizing: content-box;\n  padding: 6px 3px;\n  background: #fff;\n  outline: none;\n  border: solid 1px #337ef4;\n  border-radius: 2px;\n  box-shadow: inset 0 1px 3px 0 rgba(51, 126, 244, .5);\n  z-index: -1;\n  opacity: 0;\n  resize: none;\n  overflow: hidden;\n  /* word-break: keep-all; */\n}\n\n.sb-container .text-size {\n  position: fixed;\n  visibility: hidden;\n  line-height: 1em;\n  margin: 0;\n  padding-right: 3px;\n  font-family: Helvetica, Arial, sans-serif;\n}\n\n.sb-container .text-width {\n  position: fixed;\n  visibility: hidden;\n  padding-right: 3px;\n  margin: 0;\n}\n\n@font-face {\n  font-family: 'information-iconfont';\n  src: url('data:application/octet-stream;base64,jAsAAPQKAAABAAIAAAAAAAAAAAAAAAAAAAABAJABAAAAAExQAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAS88HVgAAAAAAAAAAAAAAAAAAAAAAAAgAaQBjAG8AbgAAAA4AUgBlAGcAdQBsAGEAcgAAABYAVgBlAHIAcwBpAG8AbgAgADEALgAwAAAACABpAGMAbwBuAAAAAAAAAQAAAAsAgAADADBPUy8yD2AFkgAAALwAAABgY21hcBdW0o4AAAEcAAAAVGdhc3AAAAAQAAABcAAAAAhnbHlmtjo20AAAAXgAAAcwaGVhZBF5/loAAAioAAAANmhoZWEHcgN+AAAI4AAAACRobXR4JAACCwAACQQAAAAwbG9jYQnoB9gAAAk0AAAAGm1heHAAEgB2AAAJUAAAACBuYW1lUDzx3AAACXAAAAFicG9zdAADAAAAAArUAAAAIAADBAABkAAFAAACmQLMAAAAjwKZAswAAAHrADMBCQAAAAAAAAAAAAAAAAAAAAEQAAAAAAAAAAAAAAAAAAAAAEAAAOkHA3D/cQCPA3AAjwAAAAEAAAAAAAAAAAAAACAAAAAAAAMAAAADAAAAHAABAAMAAAAcAAMAAQAAABwABAA4AAAACgAIAAIAAgABACDpB//9//8AAAAAACDpAP/9//8AAf/jFwQAAwABAAAAAAAAAAAAAAABAAH//wAPAAEAAAAAAAAAAAACAAA3OQEAAAAAAQAAAAAAAAAAAAIAADc5AQAAAAABAAAAAAAAAAAAAgAANzkBAAAAAAEAUv+yA3sDWgBQAAAJAQYHBiInJicmJyY0NzY3ATYyFxYUBwEGIicmND8BNjQnJiIPAQYUFxYyNwE2NzY0JyYnJicmIgcGBwEGBwYUFxYXFhcWMjc2NwE2NCcmIgcDR/7xJjAvZC8wJiYTExMTJgFeMowxMTH+whhBFxcX7woKChwK7ysrK3krAT8iEhEREiIjKyxbKywj/qIwGBgYGDAwPDx+PDwwAQ8JCQocCgE4/vEmExMTEyYmMDBjMDAmAV4xMTKMMf7CGBgXQRfvChwKCgrvK3krKysBPiMrLFsrLCMiEhEREiL+oTA8PH08PS8wGBgYGDABDgocCgoKAAADAC//rwPRA1EAHAA5AE4AAAUiJy4BJyY1NDc+ATc2MzIXHgEXFhUUBw4BBwYjNTI3PgE3NjU0Jy4BJyYjIgcOAQcGFRQXHgEXFjMDNDY3PgEfAR4BFxYGDwEOASMiJjUCAGBVVX4lJCQlflVVYGBVVX4lJCQlflVVYFJISGsgHx8ga0hIUlJISGsgHx8ga0hIUncCAgcbDPIFBgMGBwzzBAgEDhRRJCV+VVVgYFVVfiUkJCV+VVVgYFVVfiUkRR8ga0hIUlJISGsgHx8ga0hIUlJISGsgHwISBQgEDAgHhgIHBAwbB4cCAhQOAAUAQP/gA8ADAAAUABkAJgAzAEAAABMhMhYVERQGIyEHBiYnLgE1ETQ2MxcRNyERASImNTQ2MzIWFRQGIzMiJjU0NjMyFhUUBiMzIiY1NDYzMhYVFAYjdQMWFh8fFv2kxQgWBwIDHxYRkgJi/bQWHx8WFR8fFdIWHx8WFh4eFtIWHh4WFh8fFgMAHxb93BYfkgcDCQQIBALWFh9G/ZFtAgL+zB8VFh8fFhUfHxUWHx8WFR8fFRYfHxYVHwAAAwBb/9sDpQMlABAAMgBUAAABNzYyFzMWFA8BBiInMSY0NwUHBgcGIicmJyYnJjQ3Nj8BFwcGBwYUFxYXFhcWMjc2PwE3Jzc2NzY0JyYnJicmIgcGDwEnNzY3NjIXFhcWFxYUBwYHAYyEFToUARQUhRQ6FRUVARJsKzU1bjU1KyoVFRUVKm0xbCAQEBAQICAoKFQoKCBtjDJtIBAQEBAgICgoVCgpIGwybSo1NW81NSorFRUVFSsBcIQUFBU6FIUUFBU6FelsKxUVFRUrKjU1bzU1Km0ybCApKFQoKCAgEBAQECBtKTFtICgoVCgoICAQEBAQIGwxbSoVFRUVKis1NW41NSsAAAAABQAv/68D0QNRABwAOQBFAFEAXQAABSInLgEnJjU0Nz4BNzYzMhceARcWFRQHDgEHBiM1Mjc+ATc2NTQnLgEnJiMiBw4BBwYVFBceARcWMwMiJjU0NjMyFhUUBjMiJjU0NjMyFhUUBjMiJjU0NjMyFhUUBgIAYFVVfiUkJCV+VVVgYFVVfiUkJCV+VVVgUkhIayAfHyBrSEhSUkhIayAfHyBrSEhSwBslJRsbJSWlGyUlGxslJaUbJSUbGyUlUSQlflVVYGBVVX4lJCQlflVVYGBVVX4lJEUfIGtISFJSSEhrIB8fIGtISFJSSEhrIB8BTCUbGyUlGxslJRsbJSUbGyUlGxslJRsbJQAAAAIAAABABAACwAA5AHMAAAEuATU0NjczMjY1NCYjISIGFRQWOwEOARUUFhcjIicuAScmNTQ3PgE3NjMhMhceARcWFRQHDgEHBiMTHgEVFAYHIyIGFRQWMyEyNjU0JisBPgE1NCYnMzIXHgEXFhUUBw4BBwYjISInLgEnJjU0Nz4BNzYzAbEDAgMDLkBaWkD/AEBaWkA8AQEBATwuKSk9ERISET0pKS4BAC4pKT0REhIRPSkpLm8DAgMDLkBaWkABAEBaWkA8AQEBATwuKSk9ERISET0pKS7/AC4pKT0REhIRPSkpLgEACBAIChMJWkBAWlpAQFoJEwoIEAgSET0pKS4uKSk9ERISET0pKS4uKSk9ERIBAAgQCAoTCVpAQFpaQEBaCRMKCBAIEhE9KSkuLikpPRESEhE9KSkuLikpPRESAAAAAAMAgAB6A4ACwAADAAcACwAAEyEVIRUhFSEVIRUhgAMA/QADAP0AAcD+QALARrpGukYAAAAEAED/wAPAA0AAIQAlADsAQQAAATMyFhURFAYjISImNRE0NjsBNTQ2MzIWHQEhNTQ2MzIWFRMhESEDFRQGIyImPQEhFRQGIyImPQEjFSE1AxcBJzcXAwaKFBwcFPzgFBwcFJAUDw4VAXoUDw4VdP0MAvR0FQ4PFP6GFQ4PFHoC9Noy/vWfMG0DABwU/SAUHBwUAuAUHB0PFBQPHR0PFBQP/t3+DAK0Nw8UFA83Nw8UFA83enr+3jD+55gzaAAAAAABAAAAAQAAVgfPS18PPPUACwQAAAAAANctXSoAAAAA1y1dKgAA/68EAANaAAAACAACAAAAAAAAAAEAAANw/3EAAAQAAAAAAAQAAAEAAAAAAAAAAAAAAAAAAAAMBAAAAAAAAAAAAAAAAAAAAAQAAFIEAAAvBAAAQAQAAFsEAAAvBAAAAAQAAIAEAABAAAAAAAAKABQAHgCeARQBcgH2AnwDHgM4A5gAAAABAAAADAB0AAUAAAAAAAIAAAAAAAAAAAAAAAAAAAAAAAAADgCuAAEAAAAAAAEABAAAAAEAAAAAAAIABwBFAAEAAAAAAAMABAAtAAEAAAAAAAQABABaAAEAAAAAAAUACwAMAAEAAAAAAAYABAA5AAEAAAAAAAoAGgBmAAMAAQQJAAEACAAEAAMAAQQJAAIADgBMAAMAAQQJAAMACAAxAAMAAQQJAAQACABeAAMAAQQJAAUAFgAXAAMAAQQJAAYACAA9AAMAAQQJAAoANACAaWNvbgBpAGMAbwBuVmVyc2lvbiAxLjAAVgBlAHIAcwBpAG8AbgAgADEALgAwaWNvbgBpAGMAbwBuaWNvbgBpAGMAbwBuUmVndWxhcgBSAGUAZwB1AGwAYQByaWNvbgBpAGMAbwBuRm9udCBnZW5lcmF0ZWQgYnkgSWNvTW9vbi4ARgBvAG4AdAAgAGcAZQBuAGUAcgBhAHQAZQBkACAAYgB5ACAASQBjAG8ATQBvAG8AbgAuAAAAAwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA==');\n  src: url('data:application/octet-stream;base64,jAsAAPQKAAABAAIAAAAAAAAAAAAAAAAAAAABAJABAAAAAExQAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAS88HVgAAAAAAAAAAAAAAAAAAAAAAAAgAaQBjAG8AbgAAAA4AUgBlAGcAdQBsAGEAcgAAABYAVgBlAHIAcwBpAG8AbgAgADEALgAwAAAACABpAGMAbwBuAAAAAAAAAQAAAAsAgAADADBPUy8yD2AFkgAAALwAAABgY21hcBdW0o4AAAEcAAAAVGdhc3AAAAAQAAABcAAAAAhnbHlmtjo20AAAAXgAAAcwaGVhZBF5/loAAAioAAAANmhoZWEHcgN+AAAI4AAAACRobXR4JAACCwAACQQAAAAwbG9jYQnoB9gAAAk0AAAAGm1heHAAEgB2AAAJUAAAACBuYW1lUDzx3AAACXAAAAFicG9zdAADAAAAAArUAAAAIAADBAABkAAFAAACmQLMAAAAjwKZAswAAAHrADMBCQAAAAAAAAAAAAAAAAAAAAEQAAAAAAAAAAAAAAAAAAAAAEAAAOkHA3D/cQCPA3AAjwAAAAEAAAAAAAAAAAAAACAAAAAAAAMAAAADAAAAHAABAAMAAAAcAAMAAQAAABwABAA4AAAACgAIAAIAAgABACDpB//9//8AAAAAACDpAP/9//8AAf/jFwQAAwABAAAAAAAAAAAAAAABAAH//wAPAAEAAAAAAAAAAAACAAA3OQEAAAAAAQAAAAAAAAAAAAIAADc5AQAAAAABAAAAAAAAAAAAAgAANzkBAAAAAAEAUv+yA3sDWgBQAAAJAQYHBiInJicmJyY0NzY3ATYyFxYUBwEGIicmND8BNjQnJiIPAQYUFxYyNwE2NzY0JyYnJicmIgcGBwEGBwYUFxYXFhcWMjc2NwE2NCcmIgcDR/7xJjAvZC8wJiYTExMTJgFeMowxMTH+whhBFxcX7woKChwK7ysrK3krAT8iEhEREiIjKyxbKywj/qIwGBgYGDAwPDx+PDwwAQ8JCQocCgE4/vEmExMTEyYmMDBjMDAmAV4xMTKMMf7CGBgXQRfvChwKCgrvK3krKysBPiMrLFsrLCMiEhEREiL+oTA8PH08PS8wGBgYGDABDgocCgoKAAADAC//rwPRA1EAHAA5AE4AAAUiJy4BJyY1NDc+ATc2MzIXHgEXFhUUBw4BBwYjNTI3PgE3NjU0Jy4BJyYjIgcOAQcGFRQXHgEXFjMDNDY3PgEfAR4BFxYGDwEOASMiJjUCAGBVVX4lJCQlflVVYGBVVX4lJCQlflVVYFJISGsgHx8ga0hIUlJISGsgHx8ga0hIUncCAgcbDPIFBgMGBwzzBAgEDhRRJCV+VVVgYFVVfiUkJCV+VVVgYFVVfiUkRR8ga0hIUlJISGsgHx8ga0hIUlJISGsgHwISBQgEDAgHhgIHBAwbB4cCAhQOAAUAQP/gA8ADAAAUABkAJgAzAEAAABMhMhYVERQGIyEHBiYnLgE1ETQ2MxcRNyERASImNTQ2MzIWFRQGIzMiJjU0NjMyFhUUBiMzIiY1NDYzMhYVFAYjdQMWFh8fFv2kxQgWBwIDHxYRkgJi/bQWHx8WFR8fFdIWHx8WFh4eFtIWHh4WFh8fFgMAHxb93BYfkgcDCQQIBALWFh9G/ZFtAgL+zB8VFh8fFhUfHxUWHx8WFR8fFRYfHxYVHwAAAwBb/9sDpQMlABAAMgBUAAABNzYyFzMWFA8BBiInMSY0NwUHBgcGIicmJyYnJjQ3Nj8BFwcGBwYUFxYXFhcWMjc2PwE3Jzc2NzY0JyYnJicmIgcGDwEnNzY3NjIXFhcWFxYUBwYHAYyEFToUARQUhRQ6FRUVARJsKzU1bjU1KyoVFRUVKm0xbCAQEBAQICAoKFQoKCBtjDJtIBAQEBAgICgoVCgpIGwybSo1NW81NSorFRUVFSsBcIQUFBU6FIUUFBU6FelsKxUVFRUrKjU1bzU1Km0ybCApKFQoKCAgEBAQECBtKTFtICgoVCgoICAQEBAQIGwxbSoVFRUVKis1NW41NSsAAAAABQAv/68D0QNRABwAOQBFAFEAXQAABSInLgEnJjU0Nz4BNzYzMhceARcWFRQHDgEHBiM1Mjc+ATc2NTQnLgEnJiMiBw4BBwYVFBceARcWMwMiJjU0NjMyFhUUBjMiJjU0NjMyFhUUBjMiJjU0NjMyFhUUBgIAYFVVfiUkJCV+VVVgYFVVfiUkJCV+VVVgUkhIayAfHyBrSEhSUkhIayAfHyBrSEhSwBslJRsbJSWlGyUlGxslJaUbJSUbGyUlUSQlflVVYGBVVX4lJCQlflVVYGBVVX4lJEUfIGtISFJSSEhrIB8fIGtISFJSSEhrIB8BTCUbGyUlGxslJRsbJSUbGyUlGxslJRsbJQAAAAIAAABABAACwAA5AHMAAAEuATU0NjczMjY1NCYjISIGFRQWOwEOARUUFhcjIicuAScmNTQ3PgE3NjMhMhceARcWFRQHDgEHBiMTHgEVFAYHIyIGFRQWMyEyNjU0JisBPgE1NCYnMzIXHgEXFhUUBw4BBwYjISInLgEnJjU0Nz4BNzYzAbEDAgMDLkBaWkD/AEBaWkA8AQEBATwuKSk9ERISET0pKS4BAC4pKT0REhIRPSkpLm8DAgMDLkBaWkABAEBaWkA8AQEBATwuKSk9ERISET0pKS7/AC4pKT0REhIRPSkpLgEACBAIChMJWkBAWlpAQFoJEwoIEAgSET0pKS4uKSk9ERISET0pKS4uKSk9ERIBAAgQCAoTCVpAQFpaQEBaCRMKCBAIEhE9KSkuLikpPRESEhE9KSkuLikpPRESAAAAAAMAgAB6A4ACwAADAAcACwAAEyEVIRUhFSEVIRUhgAMA/QADAP0AAcD+QALARrpGukYAAAAEAED/wAPAA0AAIQAlADsAQQAAATMyFhURFAYjISImNRE0NjsBNTQ2MzIWHQEhNTQ2MzIWFRMhESEDFRQGIyImPQEhFRQGIyImPQEjFSE1AxcBJzcXAwaKFBwcFPzgFBwcFJAUDw4VAXoUDw4VdP0MAvR0FQ4PFP6GFQ4PFHoC9Noy/vWfMG0DABwU/SAUHBwUAuAUHB0PFBQPHR0PFBQP/t3+DAK0Nw8UFA83Nw8UFA83enr+3jD+55gzaAAAAAABAAAAAQAAVgfPS18PPPUACwQAAAAAANctXSoAAAAA1y1dKgAA/68EAANaAAAACAACAAAAAAAAAAEAAANw/3EAAAQAAAAAAAQAAAEAAAAAAAAAAAAAAAAAAAAMBAAAAAAAAAAAAAAAAAAAAAQAAFIEAAAvBAAAQAQAAFsEAAAvBAAAAAQAAIAEAABAAAAAAAAKABQAHgCeARQBcgH2AnwDHgM4A5gAAAABAAAADAB0AAUAAAAAAAIAAAAAAAAAAAAAAAAAAAAAAAAADgCuAAEAAAAAAAEABAAAAAEAAAAAAAIABwBFAAEAAAAAAAMABAAtAAEAAAAAAAQABABaAAEAAAAAAAUACwAMAAEAAAAAAAYABAA5AAEAAAAAAAoAGgBmAAMAAQQJAAEACAAEAAMAAQQJAAIADgBMAAMAAQQJAAMACAAxAAMAAQQJAAQACABeAAMAAQQJAAUAFgAXAAMAAQQJAAYACAA9AAMAAQQJAAoANACAaWNvbgBpAGMAbwBuVmVyc2lvbiAxLjAAVgBlAHIAcwBpAG8AbgAgADEALgAwaWNvbgBpAGMAbwBuaWNvbgBpAGMAbwBuUmVndWxhcgBSAGUAZwB1AGwAYQByaWNvbgBpAGMAbwBuRm9udCBnZW5lcmF0ZWQgYnkgSWNvTW9vbi4ARgBvAG4AdAAgAGcAZQBuAGUAcgBhAHQAZQBkACAAYgB5ACAASQBjAG8ATQBvAG8AbgAuAAAAAwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA==') format('embedded-opentype'),\n    url('data:application/octet-stream;base64,AAEAAAALAIAAAwAwT1MvMg9gBZIAAAC8AAAAYGNtYXAXVtKOAAABHAAAAFRnYXNwAAAAEAAAAXAAAAAIZ2x5ZrY6NtAAAAF4AAAHMGhlYWQRef5aAAAIqAAAADZoaGVhB3IDfgAACOAAAAAkaG10eCQAAgsAAAkEAAAAMGxvY2EJ6AfYAAAJNAAAABptYXhwABIAdgAACVAAAAAgbmFtZVA88dwAAAlwAAABYnBvc3QAAwAAAAAK1AAAACAAAwQAAZAABQAAApkCzAAAAI8CmQLMAAAB6wAzAQkAAAAAAAAAAAAAAAAAAAABEAAAAAAAAAAAAAAAAAAAAABAAADpBwNw/3EAjwNwAI8AAAABAAAAAAAAAAAAAAAgAAAAAAADAAAAAwAAABwAAQADAAAAHAADAAEAAAAcAAQAOAAAAAoACAACAAIAAQAg6Qf//f//AAAAAAAg6QD//f//AAH/4xcEAAMAAQAAAAAAAAAAAAAAAQAB//8ADwABAAAAAAAAAAAAAgAANzkBAAAAAAEAAAAAAAAAAAACAAA3OQEAAAAAAQAAAAAAAAAAAAIAADc5AQAAAAABAFL/sgN7A1oAUAAACQEGBwYiJyYnJicmNDc2NwE2MhcWFAcBBiInJjQ/ATY0JyYiDwEGFBcWMjcBNjc2NCcmJyYnJiIHBgcBBgcGFBcWFxYXFjI3NjcBNjQnJiIHA0f+8SYwL2QvMCYmExMTEyYBXjKMMTEx/sIYQRcXF+8KCgocCu8rKyt5KwE/IhIRERIiIyssWyssI/6iMBgYGBgwMDw8fjw8MAEPCQkKHAoBOP7xJhMTExMmJjAwYzAwJgFeMTEyjDH+whgYF0EX7wocCgoK7yt5KysrAT4jKyxbKywjIhIRERIi/qEwPDx9PD0vMBgYGBgwAQ4KHAoKCgAAAwAv/68D0QNRABwAOQBOAAAFIicuAScmNTQ3PgE3NjMyFx4BFxYVFAcOAQcGIzUyNz4BNzY1NCcuAScmIyIHDgEHBhUUFx4BFxYzAzQ2Nz4BHwEeARcWBg8BDgEjIiY1AgBgVVV+JSQkJX5VVWBgVVV+JSQkJX5VVWBSSEhrIB8fIGtISFJSSEhrIB8fIGtISFJ3AgIHGwzyBQYDBgcM8wQIBA4UUSQlflVVYGBVVX4lJCQlflVVYGBVVX4lJEUfIGtISFJSSEhrIB8fIGtISFJSSEhrIB8CEgUIBAwIB4YCBwQMGweHAgIUDgAFAED/4APAAwAAFAAZACYAMwBAAAATITIWFREUBiMhBwYmJy4BNRE0NjMXETchEQEiJjU0NjMyFhUUBiMzIiY1NDYzMhYVFAYjMyImNTQ2MzIWFRQGI3UDFhYfHxb9pMUIFgcCAx8WEZICYv20Fh8fFhUfHxXSFh8fFhYeHhbSFh4eFhYfHxYDAB8W/dwWH5IHAwkECAQC1hYfRv2RbQIC/swfFRYfHxYVHx8VFh8fFhUfHxUWHx8WFR8AAAMAW//bA6UDJQAQADIAVAAAATc2MhczFhQPAQYiJzEmNDcFBwYHBiInJicmJyY0NzY/ARcHBgcGFBcWFxYXFjI3Nj8BNyc3Njc2NCcmJyYnJiIHBg8BJzc2NzYyFxYXFhcWFAcGBwGMhBU6FAEUFIUUOhUVFQESbCs1NW41NSsqFRUVFSptMWwgEBAQECAgKChUKCggbYwybSAQEBAQICAoKFQoKSBsMm0qNTVvNTUqKxUVFRUrAXCEFBQVOhSFFBQVOhXpbCsVFRUVKyo1NW81NSptMmwgKShUKCggIBAQEBAgbSkxbSAoKFQoKCAgEBAQECBsMW0qFRUVFSorNTVuNTUrAAAAAAUAL/+vA9EDUQAcADkARQBRAF0AAAUiJy4BJyY1NDc+ATc2MzIXHgEXFhUUBw4BBwYjNTI3PgE3NjU0Jy4BJyYjIgcOAQcGFRQXHgEXFjMDIiY1NDYzMhYVFAYzIiY1NDYzMhYVFAYzIiY1NDYzMhYVFAYCAGBVVX4lJCQlflVVYGBVVX4lJCQlflVVYFJISGsgHx8ga0hIUlJISGsgHx8ga0hIUsAbJSUbGyUlpRslJRsbJSWlGyUlGxslJVEkJX5VVWBgVVV+JSQkJX5VVWBgVVV+JSRFHyBrSEhSUkhIayAfHyBrSEhSUkhIayAfAUwlGxslJRsbJSUbGyUlGxslJRsbJSUbGyUAAAACAAAAQAQAAsAAOQBzAAABLgE1NDY3MzI2NTQmIyEiBhUUFjsBDgEVFBYXIyInLgEnJjU0Nz4BNzYzITIXHgEXFhUUBw4BBwYjEx4BFRQGByMiBhUUFjMhMjY1NCYrAT4BNTQmJzMyFx4BFxYVFAcOAQcGIyEiJy4BJyY1NDc+ATc2MwGxAwIDAy5AWlpA/wBAWlpAPAEBAQE8LikpPRESEhE9KSkuAQAuKSk9ERISET0pKS5vAwIDAy5AWlpAAQBAWlpAPAEBAQE8LikpPRESEhE9KSku/wAuKSk9ERISET0pKS4BAAgQCAoTCVpAQFpaQEBaCRMKCBAIEhE9KSkuLikpPRESEhE9KSkuLikpPRESAQAIEAgKEwlaQEBaWkBAWgkTCggQCBIRPSkpLi4pKT0REhIRPSkpLi4pKT0REgAAAAADAIAAegOAAsAAAwAHAAsAABMhFSEVIRUhFSEVIYADAP0AAwD9AAHA/kACwEa6RrpGAAAABABA/8ADwANAACEAJQA7AEEAAAEzMhYVERQGIyEiJjURNDY7ATU0NjMyFh0BITU0NjMyFhUTIREhAxUUBiMiJj0BIRUUBiMiJj0BIxUhNQMXASc3FwMGihQcHBT84BQcHBSQFA8OFQF6FA8OFXT9DAL0dBUODxT+hhUODxR6AvTaMv71nzBtAwAcFP0gFBwcFALgFBwdDxQUDx0dDxQUD/7d/gwCtDcPFBQPNzcPFBQPN3p6/t4w/ueYM2gAAAAAAQAAAAEAAFYHz0tfDzz1AAsEAAAAAADXLV0qAAAAANctXSoAAP+vBAADWgAAAAgAAgAAAAAAAAABAAADcP9xAAAEAAAAAAAEAAABAAAAAAAAAAAAAAAAAAAADAQAAAAAAAAAAAAAAAAAAAAEAABSBAAALwQAAEAEAABbBAAALwQAAAAEAACABAAAQAAAAAAACgAUAB4AngEUAXIB9gJ8Ax4DOAOYAAAAAQAAAAwAdAAFAAAAAAACAAAAAAAAAAAAAAAAAAAAAAAAAA4ArgABAAAAAAABAAQAAAABAAAAAAACAAcARQABAAAAAAADAAQALQABAAAAAAAEAAQAWgABAAAAAAAFAAsADAABAAAAAAAGAAQAOQABAAAAAAAKABoAZgADAAEECQABAAgABAADAAEECQACAA4ATAADAAEECQADAAgAMQADAAEECQAEAAgAXgADAAEECQAFABYAFwADAAEECQAGAAgAPQADAAEECQAKADQAgGljb24AaQBjAG8AblZlcnNpb24gMS4wAFYAZQByAHMAaQBvAG4AIAAxAC4AMGljb24AaQBjAG8Abmljb24AaQBjAG8AblJlZ3VsYXIAUgBlAGcAdQBsAGEAcmljb24AaQBjAG8AbkZvbnQgZ2VuZXJhdGVkIGJ5IEljb01vb24uAEYAbwBuAHQAIABnAGUAbgBlAHIAYQB0AGUAZAAgAGIAeQAgAEkAYwBvAE0AbwBvAG4ALgAAAAMAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA=') format('truetype'),\n    url('data:application/font-woff;base64,d09GRgABAAAAAAtAAAsAAAAACvQAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAABPUy8yAAABCAAAAGAAAABgD2AFkmNtYXAAAAFoAAAAVAAAAFQXVtKOZ2FzcAAAAbwAAAAIAAAACAAAABBnbHlmAAABxAAABzAAAAcwtjo20GhlYWQAAAj0AAAANgAAADYRef5aaGhlYQAACSwAAAAkAAAAJAdyA35obXR4AAAJUAAAADAAAAAwJAACC2xvY2EAAAmAAAAAGgAAABoJ6AfYbWF4cAAACZwAAAAgAAAAIAASAHZuYW1lAAAJvAAAAWIAAAFiUDzx3HBvc3QAAAsgAAAAIAAAACAAAwAAAAMEAAGQAAUAAAKZAswAAACPApkCzAAAAesAMwEJAAAAAAAAAAAAAAAAAAAAARAAAAAAAAAAAAAAAAAAAAAAQAAA6QcDcP9xAI8DcACPAAAAAQAAAAAAAAAAAAAAIAAAAAAAAwAAAAMAAAAcAAEAAwAAABwAAwABAAAAHAAEADgAAAAKAAgAAgACAAEAIOkH//3//wAAAAAAIOkA//3//wAB/+MXBAADAAEAAAAAAAAAAAAAAAEAAf//AA8AAQAAAAAAAAAAAAIAADc5AQAAAAABAAAAAAAAAAAAAgAANzkBAAAAAAEAAAAAAAAAAAACAAA3OQEAAAAAAQBS/7IDewNaAFAAAAkBBgcGIicmJyYnJjQ3NjcBNjIXFhQHAQYiJyY0PwE2NCcmIg8BBhQXFjI3ATY3NjQnJicmJyYiBwYHAQYHBhQXFhcWFxYyNzY3ATY0JyYiBwNH/vEmMC9kLzAmJhMTExMmAV4yjDExMf7CGEEXFxfvCgoKHArvKysreSsBPyISERESIiMrLFsrLCP+ojAYGBgYMDA8PH48PDABDwkJChwKATj+8SYTExMTJiYwMGMwMCYBXjExMowx/sIYGBdBF+8KHAoKCu8reSsrKwE+IyssWyssIyISERESIv6hMDw8fTw9LzAYGBgYMAEOChwKCgoAAAMAL/+vA9EDUQAcADkATgAABSInLgEnJjU0Nz4BNzYzMhceARcWFRQHDgEHBiM1Mjc+ATc2NTQnLgEnJiMiBw4BBwYVFBceARcWMwM0Njc+AR8BHgEXFgYPAQ4BIyImNQIAYFVVfiUkJCV+VVVgYFVVfiUkJCV+VVVgUkhIayAfHyBrSEhSUkhIayAfHyBrSEhSdwICBxsM8gUGAwYHDPMECAQOFFEkJX5VVWBgVVV+JSQkJX5VVWBgVVV+JSRFHyBrSEhSUkhIayAfHyBrSEhSUkhIayAfAhIFCAQMCAeGAgcEDBsHhwICFA4ABQBA/+ADwAMAABQAGQAmADMAQAAAEyEyFhURFAYjIQcGJicuATURNDYzFxE3IREBIiY1NDYzMhYVFAYjMyImNTQ2MzIWFRQGIzMiJjU0NjMyFhUUBiN1AxYWHx8W/aTFCBYHAgMfFhGSAmL9tBYfHxYVHx8V0hYfHxYWHh4W0hYeHhYWHx8WAwAfFv3cFh+SBwMJBAgEAtYWH0b9kW0CAv7MHxUWHx8WFR8fFRYfHxYVHx8VFh8fFhUfAAADAFv/2wOlAyUAEAAyAFQAAAE3NjIXMxYUDwEGIicxJjQ3BQcGBwYiJyYnJicmNDc2PwEXBwYHBhQXFhcWFxYyNzY/ATcnNzY3NjQnJicmJyYiBwYPASc3Njc2MhcWFxYXFhQHBgcBjIQVOhQBFBSFFDoVFRUBEmwrNTVuNTUrKhUVFRUqbTFsIBAQEBAgICgoVCgoIG2MMm0gEBAQECAgKChUKCkgbDJtKjU1bzU1KisVFRUVKwFwhBQUFToUhRQUFToV6WwrFRUVFSsqNTVvNTUqbTJsICkoVCgoICAQEBAQIG0pMW0gKChUKCggIBAQEBAgbDFtKhUVFRUqKzU1bjU1KwAAAAAFAC//rwPRA1EAHAA5AEUAUQBdAAAFIicuAScmNTQ3PgE3NjMyFx4BFxYVFAcOAQcGIzUyNz4BNzY1NCcuAScmIyIHDgEHBhUUFx4BFxYzAyImNTQ2MzIWFRQGMyImNTQ2MzIWFRQGMyImNTQ2MzIWFRQGAgBgVVV+JSQkJX5VVWBgVVV+JSQkJX5VVWBSSEhrIB8fIGtISFJSSEhrIB8fIGtISFLAGyUlGxslJaUbJSUbGyUlpRslJRsbJSVRJCV+VVVgYFVVfiUkJCV+VVVgYFVVfiUkRR8ga0hIUlJISGsgHx8ga0hIUlJISGsgHwFMJRsbJSUbGyUlGxslJRsbJSUbGyUlGxslAAAAAgAAAEAEAALAADkAcwAAAS4BNTQ2NzMyNjU0JiMhIgYVFBY7AQ4BFRQWFyMiJy4BJyY1NDc+ATc2MyEyFx4BFxYVFAcOAQcGIxMeARUUBgcjIgYVFBYzITI2NTQmKwE+ATU0JiczMhceARcWFRQHDgEHBiMhIicuAScmNTQ3PgE3NjMBsQMCAwMuQFpaQP8AQFpaQDwBAQEBPC4pKT0REhIRPSkpLgEALikpPRESEhE9KSkubwMCAwMuQFpaQAEAQFpaQDwBAQEBPC4pKT0REhIRPSkpLv8ALikpPRESEhE9KSkuAQAIEAgKEwlaQEBaWkBAWgkTCggQCBIRPSkpLi4pKT0REhIRPSkpLi4pKT0REgEACBAIChMJWkBAWlpAQFoJEwoIEAgSET0pKS4uKSk9ERISET0pKS4uKSk9ERIAAAAAAwCAAHoDgALAAAMABwALAAATIRUhFSEVIRUhFSGAAwD9AAMA/QABwP5AAsBGuka6RgAAAAQAQP/AA8ADQAAhACUAOwBBAAABMzIWFREUBiMhIiY1ETQ2OwE1NDYzMhYdASE1NDYzMhYVEyERIQMVFAYjIiY9ASEVFAYjIiY9ASMVITUDFwEnNxcDBooUHBwU/OAUHBwUkBQPDhUBehQPDhV0/QwC9HQVDg8U/oYVDg8UegL02jL+9Z8wbQMAHBT9IBQcHBQC4BQcHQ8UFA8dHQ8UFA/+3f4MArQ3DxQUDzc3DxQUDzd6ev7eMP7nmDNoAAAAAAEAAAABAABWB89LXw889QALBAAAAAAA1y1dKgAAAADXLV0qAAD/rwQAA1oAAAAIAAIAAAAAAAAAAQAAA3D/cQAABAAAAAAABAAAAQAAAAAAAAAAAAAAAAAAAAwEAAAAAAAAAAAAAAAAAAAABAAAUgQAAC8EAABABAAAWwQAAC8EAAAABAAAgAQAAEAAAAAAAAoAFAAeAJ4BFAFyAfYCfAMeAzgDmAAAAAEAAAAMAHQABQAAAAAAAgAAAAAAAAAAAAAAAAAAAAAAAAAOAK4AAQAAAAAAAQAEAAAAAQAAAAAAAgAHAEUAAQAAAAAAAwAEAC0AAQAAAAAABAAEAFoAAQAAAAAABQALAAwAAQAAAAAABgAEADkAAQAAAAAACgAaAGYAAwABBAkAAQAIAAQAAwABBAkAAgAOAEwAAwABBAkAAwAIADEAAwABBAkABAAIAF4AAwABBAkABQAWABcAAwABBAkABgAIAD0AAwABBAkACgA0AIBpY29uAGkAYwBvAG5WZXJzaW9uIDEuMABWAGUAcgBzAGkAbwBuACAAMQAuADBpY29uAGkAYwBvAG5pY29uAGkAYwBvAG5SZWd1bGFyAFIAZQBnAHUAbABhAHJpY29uAGkAYwBvAG5Gb250IGdlbmVyYXRlZCBieSBJY29Nb29uLgBGAG8AbgB0ACAAZwBlAG4AZQByAGEAdABlAGQAIABiAHkAIABJAGMAbwBNAG8AbwBuAC4AAAADAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA') format('woff'),\n    url('data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBzdGFuZGFsb25lPSJubyI/Pgo8IURPQ1RZUEUgc3ZnIFBVQkxJQyAiLS8vVzNDLy9EVEQgU1ZHIDEuMS8vRU4iICJodHRwOi8vd3d3LnczLm9yZy9HcmFwaGljcy9TVkcvMS4xL0RURC9zdmcxMS5kdGQiID4KPHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciPgo8bWV0YWRhdGE+R2VuZXJhdGVkIGJ5IEljb01vb248L21ldGFkYXRhPgo8ZGVmcz4KPGZvbnQgaWQ9Imljb24iIGhvcml6LWFkdi14PSIxMDI0Ij4KPGZvbnQtZmFjZSB1bml0cy1wZXItZW09IjEwMjQiIGFzY2VudD0iODgwLjY0IiBkZXNjZW50PSItMTQzLjM2IiAvPgo8bWlzc2luZy1nbHlwaCBob3Jpei1hZHYteD0iMTAyNCIgLz4KPGdseXBoIHVuaWNvZGU9IiYjeDIwOyIgaG9yaXotYWR2LXg9IjAiIGQ9IiIgLz4KPGdseXBoIHVuaWNvZGU9IiYjeGU5MDA7IiBnbHlwaC1uYW1lPSJpY19pbmZvbWF0aW9uX2F0dGFjaG1lbnQiIGQ9Ik04MzguNzczIDMxMS45OTZsLTI3MC42OTEtMjcwLjY5MWMtMTAxLjEzMS0xMDEuMTMxLTI2NS4wOTgtMTAxLjEzMS0zNjYuMjI5IDBzLTEwMS4xMzEgMjY1LjA5OCAwIDM2Ni4yMjlsMzUwLjMwNiAzNTAuMzA2YzY1Ljk1NSA2NS45NTUgMTcyLjg5IDY1Ljk1NSAyMzguODQ1IDBzNjUuOTU1LTE3Mi44OSAwLTIzOC44NDVsLTMxOC40Ni0zMTguNDZjLTMwLjc3OS0zMC43NzktODAuNjgyLTMwLjc3OS0xMTEuNDYxIDBzLTMwLjc3OSA4MC42ODIgMCAxMTEuNDYxbDIzOC44NDUgMjM4Ljg0NWMxMy4xOTEgMTMuMTkxIDEzLjE5MSAzNC41NzggMCA0Ny43NjlzLTM0LjU3OCAxMy4xOTEtNDcuNzY5IDBsLTIzOC44NDUtMjM4Ljg0NWMtNTcuMTYxLTU3LjE2MS01Ny4xNjEtMTQ5LjgzOCAwLTIwNi45OTlzMTQ5LjgzOC01Ny4xNjEgMjA2Ljk5OSAwbDMxOC40NiAzMTguNDZjOTIuMzM3IDkyLjMzNyA5Mi4zMzcgMjQyLjA0NiAwIDMzNC4zODNzLTI0Mi4wNDYgOTIuMzM3LTMzNC4zODMgMGwtMzUwLjMwNi0zNTAuMzA2Yy0xMjcuNTEzLTEyNy41MTMtMTI3LjUxMy0zMzQuMjU0IDAtNDYxLjc2N3MzMzQuMjU0LTEyNy41MTMgNDYxLjc2NyAwbDI3MC42OTEgMjcwLjY5MWMxMy4xOTEgMTMuMTkxIDEzLjE5MSAzNC41NzggMCA0Ny43NjlzLTM0LjU3OCAxMy4xOTEtNDcuNzY5IDB6IiAvPgo8Z2x5cGggdW5pY29kZT0iJiN4ZTkwMTsiIGdseXBoLW5hbWU9ImljX2luZm9tYXRpb25fYXVkaW8iIGQ9Ik01MTItODEuNDU1Yy0yNTcuMDYzIDAtNDY1LjQ1NSAyMDguMzkxLTQ2NS40NTUgNDY1LjQ1NXMyMDguMzkxIDQ2NS40NTUgNDY1LjQ1NSA0NjUuNDU1YzI1Ny4wNjMgMCA0NjUuNDU1LTIwOC4zOTEgNDY1LjQ1NS00NjUuNDU1cy0yMDguMzkxLTQ2NS40NTUtNDY1LjQ1NS00NjUuNDU1ek01MTItMTEuNjM2YzIxOC41MDQgMCAzOTUuNjM2IDE3Ny4xMzIgMzk1LjYzNiAzOTUuNjM2cy0xNzcuMTMyIDM5NS42MzYtMzk1LjYzNiAzOTUuNjM2Yy0yMTguNTA0IDAtMzk1LjYzNi0xNzcuMTMyLTM5NS42MzYtMzk1LjYzNnMxNzcuMTMyLTM5NS42MzYgMzk1LjYzNi0zOTUuNjM2ek0zOTMuMDUwIDUxOC4zNDJjMCA1LjY3OCAxLjQzNiAxMS4yNjQgNC4xNzQgMTYuMjM5IDguOTY4IDE2LjI5MSAyOS40NDUgMjIuMjI3IDQ1LjczNiAxMy4yNTlsMjQyLjQ0LTEzMy40NjdjNS41My0zLjA0NCAxMC4wOTMtNy41ODIgMTMuMTY4LTEzLjA5NiA5LjA1OS0xNi4yNDEgMy4yMzYtMzYuNzUxLTEzLjAwNS00NS44MDlsLTI0Mi40NC0xMzUuMjIyYy01LjAxNC0yLjc5Ny0xMC42Ni00LjI2NS0xNi40MDItNC4yNjUtMTguNTk3IDAtMzMuNjcyIDE1LjA3NS0zMy42NzIgMzMuNjcyeiIgLz4KPGdseXBoIHVuaWNvZGU9IiYjeGU5MDI7IiBnbHlwaC1uYW1lPSJpY19pbmZvbWF0aW9uX2NvbW1lbnQiIGQ9Ik0xMTcuMTIgNzY4aDc4OS43NmMyOS4zMzcgMCA1My4xMi0yMy43ODMgNTMuMTItNTMuMTJ2LTU0Ny40NzRjMC0yOS4zMzctMjMuNzgzLTUzLjEyLTUzLjEyLTUzLjEyaC02MDMuOTQ3bC0xOTYuNDg5LTE0Ni42MTVjLTExLjc1Ny04Ljc3Mi0yOC4zOTgtNi4zNTMtMzcuMTcxIDUuNDAzLTMuNDIzIDQuNTg4LTUuMjczIDEwLjE1OS01LjI3MyAxNS44ODR2NzI1LjkyM2MwIDI5LjMzNyAyMy43ODMgNTMuMTIgNTMuMTIgNTMuMTJ6TTEzMy43NiA2OTguMjR2LTYyMy4xNDdsMTQ2LjAxNSAxMDguOTUzaDYxMC40NjV2NTE0LjE5NHpNMzAxLjUzMiAzODkuNzE0Yy0yOS4wMzQgMC01Mi41NzEgMjMuNTM3LTUyLjU3MSA1Mi41NzFzMjMuNTM3IDUyLjU3MSA1Mi41NzEgNTIuNTcxYzI5LjAzNCAwIDUyLjU3MS0yMy41MzcgNTIuNTcxLTUyLjU3MXMtMjMuNTM3LTUyLjU3MS01Mi41NzEtNTIuNTcxek01MTEuODE4IDM4OS43MTRjLTI5LjAzNCAwLTUyLjU3MSAyMy41MzctNTIuNTcxIDUyLjU3MXMyMy41MzcgNTIuNTcxIDUyLjU3MSA1Mi41NzFjMjkuMDM0IDAgNTIuNTcxLTIzLjUzNyA1Mi41NzEtNTIuNTcxcy0yMy41MzctNTIuNTcxLTUyLjU3MS01Mi41NzF6TTcyMi4xMDQgMzg5LjcxNGMtMjkuMDM0IDAtNTIuNTcxIDIzLjUzNy01Mi41NzEgNTIuNTcxczIzLjUzNyA1Mi41NzEgNTIuNTcxIDUyLjU3MWMyOS4wMzQgMCA1Mi41NzEtMjMuNTM3IDUyLjU3MS01Mi41NzFzLTIzLjUzNy01Mi41NzEtNTIuNTcxLTUyLjU3MXoiIC8+CjxnbHlwaCB1bmljb2RlPSImI3hlOTAzOyIgZ2x5cGgtbmFtZT0iaWNfaW5mb21hdGlvbl9oeXBlcmxpbmsiIGQ9Ik0zOTUuOTQyIDM2Ny41MzNsMTMyLjM4OCAxMzIuMzg4YzI3LjM2OCAyNy4zNjggNzEuNzQgMjcuMzY4IDk5LjEwOCAwbDAuMTA0LTAuMTA0YzI3LjM2OC0yNy4zNjggMjcuMzY4LTcxLjc0IDAtOTkuMTA4bC0xMzIuMzg4LTEzMi4zODhjLTI3LjM2OC0yNy4zNjgtNzEuNzQtMjcuMzY4LTk5LjEwOCAwbC0wLjEwNCAwLjEwNGMtMjcuMzY4IDI3LjM2OC0yNy4zNjggNzEuNzQgMCA5OS4xMDh6TTY3MC4yNzEgMTM1LjIxOWwtMTA4LjYxMS0xMDguNjExYy0xMTIuNDcxLTExMi40NzEtMjk0LjgyMy0xMTIuNDcxLTQwNy4yOTQgMHMtMTEyLjQ3MSAyOTQuODIyIDAgNDA3LjI5NGwxMDguNjExIDEwOC42MTEgNDkuMzI4LTQ5LjMyOC0xMDguNjExLTEwOC42MTFjLTg1LjIyOC04NS4yMjgtODUuMjI4LTIyMy40MSAwLTMwOC42MzhzMjIzLjQxLTg1LjIyOCAzMDguNjM4IDBsMTA4LjYxMSAxMDguNjExek03NjAuNzgxIDIyNS43MjhsLTQ5LjMyOCA0OS4zMjggMTA4LjYxMSAxMDguNjExYzg1LjIyOCA4NS4yMjggODUuMjI4IDIyMy40MSAwIDMwOC42MzhzLTIyMy40MSA4NS4yMjgtMzA4LjYzOCAwbC0xMDguNjExLTEwOC42MTEtNDkuMzI4IDQ5LjMyOCAxMDguNjExIDEwOC42MTFjMTEyLjQ3MSAxMTIuNDcxIDI5NC44MjMgMTEyLjQ3MSA0MDcuMjk0IDBzMTEyLjQ3MS0yOTQuODIyIDAtNDA3LjI5NHoiIC8+CjxnbHlwaCB1bmljb2RlPSImI3hlOTA0OyIgZ2x5cGgtbmFtZT0iaWNfaW5mb21hdGlvbl9pbmZvIiBkPSJNNTEyLTgxLjQ1NWMtMjU3LjA2MyAwLTQ2NS40NTUgMjA4LjM5MS00NjUuNDU1IDQ2NS40NTVzMjA4LjM5MSA0NjUuNDU1IDQ2NS40NTUgNDY1LjQ1NWMyNTcuMDYzIDAgNDY1LjQ1NS0yMDguMzkxIDQ2NS40NTUtNDY1LjQ1NXMtMjA4LjM5MS00NjUuNDU1LTQ2NS40NTUtNDY1LjQ1NXpNNTEyLTExLjYzNmMyMTguNTA0IDAgMzk1LjYzNiAxNzcuMTMyIDM5NS42MzYgMzk1LjYzNnMtMTc3LjEzMiAzOTUuNjM2LTM5NS42MzYgMzk1LjYzNmMtMjE4LjUwNCAwLTM5NS42MzYtMTc3LjEzMi0zOTUuNjM2LTM5NS42MzZzMTc3LjEzMi0zOTUuNjM2IDM5NS42MzYtMzk1LjYzNnpNMzIwIDMyMGMtMzUuMzQ2IDAtNjQgMjguNjU0LTY0IDY0czI4LjY1NCA2NCA2NCA2NGMzNS4zNDYgMCA2NC0yOC42NTQgNjQtNjRzLTI4LjY1NC02NC02NC02NHpNNTEyIDMyMGMtMzUuMzQ2IDAtNjQgMjguNjU0LTY0IDY0czI4LjY1NCA2NCA2NCA2NGMzNS4zNDYgMCA2NC0yOC42NTQgNjQtNjRzLTI4LjY1NC02NC02NC02NHpNNzA0IDMyMGMtMzUuMzQ2IDAtNjQgMjguNjU0LTY0IDY0czI4LjY1NCA2NCA2NCA2NGMzNS4zNDYgMCA2NC0yOC42NTQgNjQtNjRzLTI4LjY1NC02NC02NC02NHoiIC8+CjxnbHlwaCB1bmljb2RlPSImI3hlOTA1OyIgZ2x5cGgtbmFtZT0iaWNfaW5mb21hdGlvbl9qdW1wIiBkPSJNNDMyLjYzNiAyNTZjLTIuOTE1IDEwLjE2NC00LjQ3NiAyMC44OTktNC40NzYgMzIgMCAxMy4yMjEgMi4yMTUgMjUuOTI0IDYuMjk0IDM3Ljc2aDQ1LjU0NmM4NS4xODQgMCAxNTQuMjQgNjkuMDU2IDE1NC4yNCAxNTQuMjRzLTY5LjA1NiAxNTQuMjQtMTU0LjI0IDE1NC4yNGgtMjU2Yy04NS4xODQgMC0xNTQuMjQtNjkuMDU2LTE1NC4yNC0xNTQuMjRzNjkuMDU2LTE1NC4yNCAxNTQuMjQtMTU0LjI0aDYwLjI5N2MtMS43NzctMTIuMzMtMi42OTctMjQuOTM4LTIuNjk3LTM3Ljc2IDAtMTAuODMzIDAuNjU2LTIxLjUxMiAxLjkzMi0zMmgtNTkuNTMyYy0xMjMuNzEyIDAtMjI0IDEwMC4yODgtMjI0IDIyNHMxMDAuMjg4IDIyNCAyMjQgMjI0aDI1NmMxMjMuNzEyIDAgMjI0LTEwMC4yODggMjI0LTIyNHMtMTAwLjI4OC0yMjQtMjI0LTIyNHpNNTkxLjM2NCA1MTJjMi45MTUtMTAuMTY0IDQuNDc2LTIwLjg5OSA0LjQ3Ni0zMiAwLTEzLjIyMS0yLjIxNS0yNS45MjQtNi4yOTQtMzcuNzZoLTQ1LjU0NmMtODUuMTg0IDAtMTU0LjI0LTY5LjA1Ni0xNTQuMjQtMTU0LjI0czY5LjA1Ni0xNTQuMjQgMTU0LjI0LTE1NC4yNGgyNTZjODUuMTg0IDAgMTU0LjI0IDY5LjA1NiAxNTQuMjQgMTU0LjI0cy02OS4wNTYgMTU0LjI0LTE1NC4yNCAxNTQuMjRoLTYwLjI5N2MxLjc3NyAxMi4zMyAyLjY5NyAyNC45MzggMi42OTcgMzcuNzYgMCAxMC44MzMtMC42NTYgMjEuNTEyLTEuOTMyIDMyaDU5LjUzMmMxMjMuNzEyIDAgMjI0LTEwMC4yODggMjI0LTIyNHMtMTAwLjI4OC0yMjQtMjI0LTIyNGgtMjU2Yy0xMjMuNzEyIDAtMjI0IDEwMC4yODgtMjI0IDIyNHMxMDAuMjg4IDIyNCAyMjQgMjI0eiIgLz4KPGdseXBoIHVuaWNvZGU9IiYjeGU5MDY7IiBnbHlwaC1uYW1lPSJpY19pbmZvbWF0aW9uX25vdGVzIiBkPSJNMTI4IDcwNGg3Njh2LTY5Ljc2aC03Njh6TTEyOCA0NDhoNzY4di02OS43NmgtNzY4ek0xMjggMTkyaDQ0OHYtNjkuNzZoLTQ0OHoiIC8+CjxnbHlwaCB1bmljb2RlPSImI3hlOTA3OyIgZ2x5cGgtbmFtZT0iaWNfaW5mb21hdGlvbl90YXNrIiBkPSJNNzczLjc2IDc2OGgxMzguMjRjMjYuNTEgMCA0OC0yMS40OSA0OC00OHYtNzM2YzAtMjYuNTEtMjEuNDktNDgtNDgtNDhoLTgwMGMtMjYuNTEgMC00OCAyMS40OS00OCA0OHY3MzZjMCAyNi41MSAyMS40OSA0OCA0OCA0OGgxNDR2MjkuMTJjMCAxOS4yNjQgMTUuNjE2IDM0Ljg4IDM0Ljg4IDM0Ljg4czM0Ljg4LTE1LjYxNiAzNC44OC0zNC44OHYtMjkuMTJoMzc4LjI0djI5LjEyYzAgMTkuMjY0IDE1LjYxNiAzNC44OCAzNC44OCAzNC44OHMzNC44OC0xNS42MTYgMzQuODgtMzQuODh6TTg5MC4yNCA1MDYuMjRoLTc1Ni40OHYtNTAwLjQ4aDc1Ni40OHpNNzczLjc2IDY5OC4yNHYtNTUuNjhjMC0xOS4yNjQtMTUuNjE2LTM0LjU2LTM0Ljg4LTM0LjU2cy0zNC44OCAxNS4yOTYtMzQuODggMzQuNTZ2NTUuNjhoLTM3OC4yNHYtNTUuNjhjMC0xOS4yNjQtMTUuNjE2LTM0LjU2LTM0Ljg4LTM0LjU2cy0zNC44OCAxNS4yOTYtMzQuODggMzQuNTZ2NTUuNjhoLTEyMi4yNHYtMTIyLjI0aDc1Ni40OHYxMjIuMjR6TTY3MS41NzIgNDA4LjA0OWw1MC41MjgtNDguMDk4LTI2Ny4xNzgtMjgwLjY3Ni0xNTkuMDA4IDE1MS44MDkgNDguMTcyIDUwLjQ1NyAxMDguNDc3LTEwMy41NjZ6IiAvPgo8L2ZvbnQ+PC9kZWZzPjwvc3ZnPg==') format('svg');\n  font-weight: normal;\n  font-style: normal;\n}\n\n.icon-information {\n  /* use !important to prevent issues with browser extensions that change fonts */\n  font-family: 'information-iconfont' !important;\n  speak: none;\n  font-style: normal;\n  font-weight: normal;\n  font-variant: normal;\n  text-transform: none;\n  line-height: 1;\n\n  /* Better Font Rendering =========== */\n  -webkit-font-smoothing: antialiased;\n  -moz-osx-font-smoothing: grayscale;\n}\n\n/* SVG.Text  css  content,  informationiconview.js  */\n\n.icon-information-attachment:before {\n  content: \"e900\";\n}\n.icon-information-audio:before {\n  content: \"e901\";\n}\n.icon-information-comment:before {\n  content: \"e902\";\n}\n.icon-information-hyperlink:before {\n  content: \"e903\";\n}\n.icon-information-info:before {\n  content: \"e904\";\n}\n.icon-information-jump:before {\n  content: \"e905\";\n}\n.icon-information-notes:before {\n  content: \"e906\";\n}\n.icon-information-task:before {\n  content: \"e907\";\n}\n\n"},function(t,e,n){"use strict";var r=n(140),i=n(128),o=n(1),a=n(131),s=n(0),u=s.EVENTS,c=s.COMPONENT_TYPE,l=a.extend({componentType:c.WORKBOOK,initialize:function(){var t=this;this.sheets=[],this._undo=new r.Undo({limit:1/0}),this._undoManager=new r.UndoManager,this._undoManager.addUndoObj(this._undo),this._undo.on(u.UNDO_STATE_CHANGE,function(){return t.trigger(u.UNDO_STATE_CHANGE)}),this._repairData()},_repairData:function(){var t=this.get("sheetOrder")||[],e=this.get("sheets")||[];t=t.filter(function(t){return-1!==e.findIndex(function(e){return e.id===t})}),e.forEach(function(e){-1===t.findIndex(function(t){return t===e.id})&&t.push(e.id)});var n=[];t.forEach(function(t){n.push(e.find(function(e){return e.id===t}))}),this.set("sheetOrder",t),this.set("sheets",n)},addSheet:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=this.findSheetIndex(t);this.sheets[r]&&(console.log(r,t),console.warn("try to add to existing sheet"));var o=new i(e);-1===r?this._addNewSheet({sheetModel:o,id:t,title:h(n.title)?this.getNextSheetTitle():n.title,at:h(n.at)?this.get("sheets").length:n.at}):(this._listenSheetModel(o,t),this.sheets[r]=o);var a=o.getUndo();return a.sheetId=t,this._undoManager.addUndoObj(a),o},_addNewSheet:function(t){var e=this,n=t.sheetModel,r=t.at,i=t.id,o=t.title,a=n&&n.toJSON();this._listenSheetModel(n,i),this.trigger(u.BEFORE_ADD_NEW_SHEET,a,t),this.sheets.splice(r,0,n),this.get("sheets").splice(r,0,{id:i,title:o}),this.get("sheetOrder").splice(r,0,i),this.trigger(u.AFTER_ADD_NEW_SHEET,a,t),this.getUndo().add({undo:function(){return e.removeSheet(t.id)},redo:function(){return e._addNewSheet(t)}}),this.trigger(u.AFTER_WORKBOOK_CONTENT_CHANGE)},_listenSheetModel:function(t,e){var n=this;t&&this.listenTo(t,u.AFTER_SHEET_CONTENT_CHANGE,function(){n.trigger(u.AFTER_WORKBOOK_CONTENT_CHANGE)})},getNextSheetTitle:function(){return"Sheet "+(this.get("sheets").length+1)},removeSheet:function(t){var e=this,n=this.findSheetIndex(t),r=this.get("sheets").findIndex(function(e){return e.id===t});if(this.get("sheets")[r]){this.trigger(u.BEFORE_REMOVE_SHEET_MODEL,t);var i=this.get("sheets").splice(r,1)[0];this.get("sheetOrder").splice(n,1);var a=this.sheets[n];this.sheets.splice(n,1),a&&(a.parent(null),this.stopListening(a),this._undoManager.removeUndoObj(a.getUndo())),this.trigger(u.AFTER_REMOVE_SHEET_MODEL,t);var s=o.extend({sheetModel:a,at:n},i);return this.getUndo().add({undo:function(){return e._addNewSheet(s)},redo:function(){return e.removeSheet(t)}}),this.trigger(u.AFTER_WORKBOOK_CONTENT_CHANGE),this}},updateSheetOrderToBefore:function(t,e){this._updateSheetOrder(t,e,!0)},updateSheetOrderToAfter:function(t,e){this._updateSheetOrder(t,e,!1)},_updateSheetOrder:function(t,e,n){var r=this,i=this.get("sheetOrder"),o=i.slice(),a=this.sheets.slice(),s=this.get("sheets").slice(),c=i.indexOf(t);if(-1===c||-1===i.indexOf(e))throw new Error("sheetId is not found");i.splice(c,1);var l=i.indexOf(e);i.splice(l+(n?0:1),0,t);var h=this.sheets.splice(c,1)[0];h?this.sheets.splice(l+(n?0:1),0,h):this.sheets.splice(l+(n?0:1),0),this.get("sheets").splice(l+(n?0:1),0,this.get("sheets").splice(c,1)[0]),this.getUndo().add({undo:function(){d(a,r.sheets),d(o,r.get("sheetOrder")),d(s,r.get("sheets")),r.trigger(u.AFTER_WORKBOOK_CONTENT_CHANGE),r.trigger(u.AFTER_SHEET_ORDER_CHANGE)},redo:function(){return r._updateSheetOrder(t,e,n)}}),this.trigger(u.AFTER_WORKBOOK_CONTENT_CHANGE),this.trigger(u.AFTER_SHEET_ORDER_CHANGE)},changeSheetTitle:function(t,e){var n=this,r=this.get("sheets").find(function(e){return e.id===t});if(r){var i=r.title;i!==e&&(r.title=e,this.trigger(u.AFTER_SHEET_TITLE_CHANGE,t,e),this.trigger(u.AFTER_WORKBOOK_CONTENT_CHANGE),this.getUndo().add({undo:function(){n.changeSheetTitle(t,i)},redo:function(){n.changeSheetTitle(t,e)}}))}},changeTitle:function(t){var e=this,n=this.get("title");n!==t&&(this.set("title",t),this.getUndo().add({undo:function(){return e.changeTitle(n)},redo:function(){return e.changeTitle(t)}}),this.trigger(u.AFTER_WORKBOOK_TITLE_CHANGE),this.trigger(u.AFTER_WORKBOOK_CONTENT_CHANGE))},getSheetByIndex:function(t){return this.sheets[t]},findSheetIndex:function(t){return this.get("sheetOrder").findIndex(function(e){return e===t})},findSheetId:function(t){return this.get("sheetOrder")[t]},getUndo:function(){return this._undo},getUndoManager:function(){return this._undoManager}});function h(t){return void 0===t||null===t}function d(t,e){if(t.length!==e.length)throw new Error("Arrays' length is not equal");t.forEach(function(t,n){e[n]=t})}t.exports=l},function(t,e,n){"use strict";(function(e){var r=[],i=n(288).default,o=n(283).default,a=n(289).default,s=n(278).default,u=n(279).default,c=n(284).default;if(r.push.apply(r,[i,a,o,s,u,c]),"readonly"!==e.env.SB_MODE){var l=n(276).default,h=n(261).default,d=n(263).default,f=n(274).default,p=n(287).default,g=n(277).default,v=n(286).default,m=n(280).default,y=n(282).default,_=n(275).default,E=n(281).default,A=n(290).default;r.push.apply(r,[l,h,d,f,p,g,v,m,y,_,E,A])}t.exports=r}).call(e,n(28))},function(t,e,n){"use strict";var r=n(127),i=r.Text;r.Text=r.invent({inherit:i,create:function(){i.apply(this,arguments),this.style("user-select","none"),this.style("cursor","default"),this.style("webkit-user-select","none"),this.style("moz-user-select","none")}})},function(t,e,n){"use strict";e.__esModule=!0;var r=o(n(54));e.fromFreemind=function(t){if(!t)throw new Error("Need a freemind file");var e=function(t,e){var n=d(t,"map");if(n){var i=[],o={workbook:{id:s(),sheets:i}},l={id:s(),title:"sheet"};return i.push(l),l.rootTopic=function t(e,n){if(e){var r=n||{},i=r.defaultTitle,o=r.isRoot,f={id:s(e.getAttribute("ID")),title:e.getAttribute("TEXT")||i},p=e.getAttribute("LINK");p&&(p.startsWith("#ID_")?f.href="xmind:#"+s(p.substring(1)):/^(https?|mailto):\/\//i.test(p)?f.href=p:p.startsWith("..")||p.startsWith("/"));t:{var g=d(e,"richcontent");if(g){var v=g.getAttribute("TYPE");if("NOTE"===v){var m=d(g,"html");if(!m)break t;var y=d(m,"body");if(!y)break t;var _=h(y,"p");if(!_.length)break t;var E=void 0;_.forEach(function(t){E+=t.textContent}),E&&(f.notes={},f.notes.plain={content:E})}else if("NODE"===v){var A=g.querySelector("html > body > img");if(!A)break t;var S=A.getAttribute("src");if(!S)break t;var T={src:S};f.image=T}}}var x=h(e,"icon");x.length&&(f.markers=[],x.forEach(function(t){var e=c[t.getAttribute("BUILTIN")]||"other-question";f.markers.push({markerId:e})}));var b=h(e,"node");b.length&&(f.children={},f.children.attached=[],b.forEach(function(e,n){f.children.attached.push(t(e,{defaultTitle:o?"Main Topic":"Subtopic"})),function(t,e){d(t,"cloud")&&(f.boundaries||(f.boundaries=[]),f.boundaries.push({id:s(),range:"("+e+", "+e+")"}))}(e,n)}));var w={},C=e.getAttribute("BACKGROUND_COLOR");C&&(w[u.FILL_COLOR]=C);var I=e.getAttribute("COLOR");I&&(w[u.TEXT_COLOR]=I);var L=d(e,"font");if(L){var N=L.getAttribute("NAME");N&&(w[u.FONT_FAMILY]=N);var O=L.getAttribute("SIZE");O&&(w[u.FONT_SIZE]=O),"true"===L.getAttribute("ITALIC")&&(w[u.FONT_STYLE]="italic"),"true"===L.getAttribute("BOLD")&&(w[u.FONT_WEIGHT]="bold")}var R=d(e,"arrowlink");if(R){var M=R.getAttribute("DESTINATION");if(M){var D={id:s(),end1Id:s(e.getAttribute("ID")),end2Id:s(M),title:""},P={},k=R.getAttribute("COLOR");k&&(P[u.LINE_COLOR]=k);var B=a.ARROWSHAPE,F=R.getAttribute("STARTARROW");P[u.ARROW_BEGIN_CLASS]="Default"===F?B.NORMAL:B.NONE;var V=R.getAttribute("ENDARROW");P[u.ARROW_END_CLASS]="Default"===V?B.NORMAL:B.NONE,D.style={type:"relationship",properties:P},l.relationships||(l.relationships=[]),l.relationships.push(D)}}return f}}(d(n,"node"),{defaultTitle:"Central Topic",isRoot:!0}),o}function h(t,e){return(0,r.default)(t.childNodes).filter(function(t){return t.tagName&&t.tagName==e})}function d(t,e){var n=(0,r.default)(t.childNodes).filter(function(t){return t.tagName&&t.tagName==e});return n&&n[0]}}((new DOMParser).parseFromString(t,"application/xml"));if(!e)throw new Error("No content");return e};var i=o(n(5));function o(t){return t&&t.__esModule?t:{default:t}}var a=n(0),s=i.default.UUID,u=a.STYLE_KEYS,c={"full-1":"priority-1","full-2":"priority-2","full-3":"priority-3","full-4":"priority-4","full-5":"priority-5","full-6":"priority-6",clock:"other-clock",desktop_new:"other-calendar",help:"other-question",idea:"other-lightbulb",kaddressbook:"other-phone",korn:"other-email",mail:"other-email",licq:"other-people",messagebox_warning:"other-exclam",ksmiletris:"smiley-smile",flag:"flag-red",yes:"other-yes",no:"other-no"}},function(t,e,n){"use strict";(function(t){e.maxObjectSize=1e8,e.maxObjectCount=32768;var n=e.UID=function(t){this.UID=t};function r(t,e){for(var n=0,r=e=e||0;r<t.length;r++)n<<=8,n|=255&t[r];return n}function i(t,e){return t.slice(e,e+8).readUInt32BE(4,8)}e.parseBuffer=function(o){if("bplist"!==o.slice(0,"bplist".length).toString("utf8"))throw new Error("Invalid binary plist. Expected 'bplist' at offset 0.");var a=o.slice(o.length-32,o.length),s=a.readUInt8(6),u=a.readUInt8(7),c=i(a,8),l=i(a,16),h=i(a,24);if(c>e.maxObjectCount)throw new Error("maxObjectCount exceeded");for(var d=[],f=0;f<c;f++){var p=o.slice(h+f*s,h+(f+1)*s);d[f]=r(p,0)}return[function i(a){var s=d[a],c=o[s],l=(240&c)>>4,h=15&c;switch(l){case 0:return function(){switch(h){case 0:return null;case 8:return!1;case 9:return!0;case 15:return null;default:throw new Error("Unhandled simple type 0x"+l.toString(16))}}();case 1:return function(){var t=Math.pow(2,h);if(t>4){var n=function(t){var e,n="";for(e=0;e<t.length&&0==t[e];e++);for(;e<t.length;e++){var r="00"+t[e].toString(16);n+=r.substr(r.length-2)}return n}(o.slice(s+1,s+1+t));return parseInt(n,16)}if(t<e.maxObjectSize)return r(o.slice(s+1,s+1+t));throw new Error("To little heap space available! Wanted to read "+t+" bytes, but only "+e.maxObjectSize+" are available.")}();case 8:return function(){var t=h+1;if(t<e.maxObjectSize)return new n(r(o.slice(s+1,s+1+t)));throw new Error("To little heap space available! Wanted to read "+t+" bytes, but only "+e.maxObjectSize+" are available.")}();case 2:return function(){var t=Math.pow(2,h);if(!(t<e.maxObjectSize))throw new Error("To little heap space available! Wanted to read "+t+" bytes, but only "+e.maxObjectSize+" are available.");var n=o.slice(s+1,s+1+t);return 4===t?n.readFloatBE(0):8===t?n.readDoubleBE(0):void 0}();case 3:return function(){3!=h&&console.error("Unknown date type :"+h+". Parsing anyway...");var t=o.slice(s+1,s+9);return new Date(9783072e5+1e3*t.readDoubleBE(0))}();case 4:return function(){var t=1,n=h;if(15==h){var i=o[s+1],a=(240&i)/16;1!=a&&console.error("0x4: UNEXPECTED LENGTH-INT TYPE! "+a);var u=15&i,c=Math.pow(2,u);t=2+c,n=r(o.slice(s+2,s+2+c))}if(n<e.maxObjectSize)return o.slice(s+t,s+t+n);throw new Error("To little heap space available! Wanted to read "+n+" bytes, but only "+e.maxObjectSize+" are available.")}();case 5:return f();case 6:return f(!0);case 10:return function(){var t=h,n=1;if(15==h){var a=o[s+1],c=(240&a)/16;1!=c&&console.error("0xa: UNEXPECTED LENGTH-INT TYPE! "+c);var l=15&a,d=Math.pow(2,l);n=2+d,t=r(o.slice(s+2,s+2+d))}if(t*u>e.maxObjectSize)throw new Error("To little heap space available!");for(var f=[],p=0;p<t;p++){var g=r(o.slice(s+n+p*u,s+n+(p+1)*u));f[p]=i(g)}return f}();case 13:return function(){var t=h,n=1;if(15==h){var a=o[s+1],c=(240&a)/16;1!=c&&console.error("0xD: UNEXPECTED LENGTH-INT TYPE! "+c);var l=15&a,d=Math.pow(2,l);n=2+d,t=r(o.slice(s+2,s+2+d))}if(2*t*u>e.maxObjectSize)throw new Error("To little heap space available!");for(var f={},p=0;p<t;p++){var g=r(o.slice(s+n+p*u,s+n+(p+1)*u)),v=r(o.slice(s+n+t*u+p*u,s+n+t*u+(p+1)*u)),m=i(g),y=i(v);f[m]=y}return f}();default:throw new Error("Unhandled type 0x"+l.toString(16))}function f(n){n=n||0;var i="utf8",a=h,u=1;if(15==h){var c=o[s+1],l=(240&c)/16;1!=l&&console.err("UNEXPECTED LENGTH-INT TYPE! "+l);var d=15&c,f=Math.pow(2,d);u=2+f,a=r(o.slice(s+2,s+2+f))}if((a*=n+1)<e.maxObjectSize){var p=new t(o.slice(s+u,s+u+a));return n&&(p=function(t){for(var e=t.length,n=0;n<e;n+=2){var r=t[n];t[n]=t[n+1],t[n+1]=r}return t}(p),i="ucs2"),p.toString(i)}throw new Error("To little heap space available! Wanted to read "+a+" bytes, but only "+e.maxObjectSize+" are available.")}}(l)]}}).call(e,n(55).Buffer)},function(t,e,n){"use strict";e.__esModule=!0;var r=s(n(3)),i=s(n(17)),o=s(n(30));e.fromLighten=function(t){return v(t)},e.fromLightenZipPromise=function(t){return new o.default(function(e,n){t||n("Need a lighten file"),t.file("content.json")||n("no content"),t.file("content.json").async("string").then(function(t){e(v(t))})})};var a=s(n(5));function s(t){return t&&t.__esModule?t:{default:t}}var u=n(0),c=a.default.UUID,l=u.STYLE_KEYS,h=u.TOPICSHAPE,d=[h.RECT,h.ROUNDEDRECT,h.UNDERLINE,h.ELLIPSE,h.PARALLELOGRAM,h.PARALLELOGRAM,h.CLOUD],f=u.BRANCHCONNECTION,p=[f.CURVE,f.STRAIGHT,f.ELBOW,f.ROUNDEDELBOW,f.ROUNDEDELBOW],g={};function v(t){var e=JSON.parse(t),n=[],r={workbook:{id:c(),sheets:n}},o={id:c(e.id),title:"sheet",rootTopic:m(e.rootTopic),theme:function(t){var e=t.colorTheme,n=t.skeletonTheme,r={map:{type:"map",properties:{}}};return n.mapStyle&&n.mapStyle.taperedLine&&(r.map.properties[l.LINE_TAPERED]="tapered"),e.mapStyle&&e.mapStyle.fillColor&&(r.map.properties[l.FILL_COLOR]=_(e.mapStyle.fillColor)),r.centralTopic={type:"topic",properties:{}},y(r.centralTopic.properties,E(n.topicStyleForCentral,e.topicStyleForCentral)),r.mainTopic={type:"topic",properties:{}},y(r.mainTopic.properties,E(n.topicStyleForMain,e.topicStyleForMain)),r.subTopic={type:"topic",properties:{}},y(r.subTopic.properties,E(n.topicStyleForSubtopic,e.topicStyleForSubtopic)),r.floatingTopic={type:"topic",properties:{}},y(r.floatingTopic.properties,E(n.topicStyleForFloating,e.topicStyleForFloating)),r.calloutTopic={type:"topic",properties:{}},r.relationship={type:"relationship",properties:{}},e.relationshipStyle&&(e.relationshipStyle.lineColor&&(r.relationship.properties[l.LINE_COLOR]=_(e.relationshipStyle.lineColor)),e.relationshipStyle.lineWidth&&(r.relationship.properties[l.LINE_WIDTH]=Math.min(5,e.relationshipStyle.lineWidth))),r}(e)};if(e.detachedTopics){o.rootTopic.children.detached=[];var a=e.detachedTopics,s=Array.isArray(a),u=0;for(a=s?a:(0,i.default)(a);;){var h;if(s){if(u>=a.length)break;h=a[u++]}else{if((u=a.next()).done)break;h=u.value}var d=h;o.rootTopic.children.detached.push(m(d,!0))}}return e.relationships&&(o.relationships=function(t){var e=[],n=t,r=Array.isArray(n),o=0;for(n=r?n:(0,i.default)(n);;){var a;if(r){if(o>=n.length)break;a=n[o++]}else{if((o=n.next()).done)break;a=o.value}var s=a,u={id:c(s.id),end1Id:g[s.startNodeId],end2Id:g[s.endNodeId],title:""};e.push(u)}return e}(e.relationships)),n.push(o),r}function m(t,e){var n={id:c(t.id),title:t.title};if(t.note&&t.note.text&&(n.notes={plain:{content:t.note.text}}),e&&t.position){var r=t.position.substring(1,t.position.length-2).split(",");2==r.length?n.position={x:parseFloat(r[0]),y:parseFloat(r[1])}:n.position={x:100,y:0}}if(t.style&&(n.style=function(t){var e={};return t.fontName&&(e[l.FONT_FAMILY]=t.fontName),t.fontWeight&&(e[l.FONT_WEIGHT]=t.fontWeight),t.fontStyle&&(e[l.FONT_STYLE]=t.fontStyle),t.fontColor&&(e[l.TEXT_COLOR]=_(t.fontColor)),t.fillColor&&(e[l.FILL_COLOR]=_(t.fillColor)),t.topicShape&&(e[l.SHAPE_CLASS]=d[t.topicShape]||h.ROUNDEDRECT),t.lineColor&&(e[l.LINE_COLOR]=_(t.lineColor)),t.lineWidth&&(e[l.LINE_WIDTH]=Math.min(5,t.lineWidth)),t.lineType&&(e[l.LINE_CLASS]=p[t.lineType]||f.CURVE),{id:c(),properties:e}}(t.style)),g[t.id]=n.id,t.subtopics){n.children={attached:[]};var o=t.subtopics,a=Array.isArray(o),s=0;for(o=a?o:(0,i.default)(o);;){var u;if(a){if(s>=o.length)break;u=o[s++]}else{if((s=o.next()).done)break;u=s.value}var v=u;n.children.attached.push(m(v))}}return n}function y(t,e){e.fillColor&&(t[l.FILL_COLOR]=_(e.fillColor)),e.topicShape&&(t[l.SHAPE_CLASS]=d[e.topicShape]||h.ROUNDEDRECT),e.lineColor&&(t[l.LINE_COLOR]=_(e.lineColor)),e.lineWidth&&(t[l.LINE_WIDTH]=Math.min(5,e.lineWidth)),e.lineType&&(t[l.LINE_CLASS]=p[e.lineType]||f.CURVE),e.fontName&&(t[l.FONT_FAMILY]=e.fontName),e.fontWeight&&(t[l.FONT_WEIGHT]=e.fontWeight),e.fontStyle&&(t[l.FONT_STYLE]=e.fontStyle),e.fontColor&&(t[l.TEXT_COLOR]=_(e.fontColor))}function _(t){var e=t.replace("{","").replace("}","").split(",");if(0==e[3])return"#ffffff";var n="#";return e.slice(0,3).forEach(function(t){n+=(t<16?"0":"")+Number(t).toString(16)}),n}function E(){var t={};if(arguments&&arguments.length)for(var e=0;e<arguments.length;e++)(0,r.default)(t,arguments[e]);return t}},function(t,e,n){"use strict";e.__esModule=!0;var r=a(n(2)),i=a(n(344));e.fromMarkdown=function(t,e){for(var n,r,i,o=u.parse(t).walker(),a=new v,c=a,m=null,y=null,_=[];n=o.next();)if("document"!==(r=n.node).type)if(n.entering){if(l(r)){switch(r.type){case"heading":var E,A=new v(r.level);null!==(E=null!==m?m:d(c,A.level))&&(A.parent=E,c=A);break;case"list":"bullet"===r.listType&&_.push(0),"ordered"===r.listType&&_.push(1);break;case"block_quote":var S=d(c,g);S&&(m=S);break;case"item":var T=d(c,p);if(null!==T){var x=new v(p);r.literal&&x.contents.push(r.literal),x.parent=T,c=x;var b=_[_.length-1];b&&b>0?(x.listCounter=b,_[_.length-1]=b+1):x.listCounter=0}break;case"paragraph":if(null!==y){y.contents.push("\n"),r.literal&&y.contents.push(r.literal);continue}default:var w=c.level>=f?c.parent:c,C=new v(f);"thematic_break"===r.type&&C.contents.push("---"),r.literal&&C.contents.push(r.literal),C.parent=w,c=C}y="paragraph"!==r.type?null:y||c}if(h(r))switch(r.type){case"softbreak":case"linebreak":c.contents.push("\n");break;case"link":c.contents.push("[");break;case"image":c.contents.push("![");break;default:r.literal&&c.contents.push(r.literal)}}else{switch(r.type){case"link":case"image":c.contents.push("]"),c.contents.push("("+r.destination+")");break;case"list":_.length>0&&_.pop();var I=d(c,g);I&&(c=I);break;case"block_quote":m&&(c=m,m=null)}"paragraph"!==r.type&&(y=null)}return i=function(t,e){return t.contents.push(e),{id:s(),title:"sheet",rootTopic:{id:s(),title:e,structureClass:"org.xmind.ui.logic.right",children:t.toJSON().children}}}(a,e),{workbook:{id:s(),sheets:[i]}}};var o=a(n(477));function a(t){return t&&t.__esModule?t:{default:t}}var s=a(n(5)).default.UUID,u=new o.default.Parser,c={text:3,softbreak:3,linebreak:3,emph:3,strong:3,html_inline:3,link:3,image:3,code:3,document:2,paragraph:2,block_quote:2,item:2,list:2,heading:2,code_block:2,html_block:2,thematic_break:2};function l(t){return 2===c[t.type]}function h(t){return 3===c[t.type]}function d(t,e){for(var n=t;n&&!(n.level<e);)n=n.parent;return n||null}var f=1e3,p=100,g=99,v=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:-1;(0,r.default)(this,t),this.contents=[],this.children=[],this.listCounter=-1,this._parent=null,this.level=e}return t.prototype.toJSON=function(){var t="";this.level===p?0===this.contents.length&&(t=this.children.map(function(t){return t.contents.join("")}).join("\n")):t=this.contents.join(""),0===this.listCounter?t=". "+t:this.listCounter>0&&(t=this.listCounter+". "+t);var e={id:s(),title:t};return(this.level!==p||0!==this.contents.length)&&this.children.length>0&&(e.children={attached:this.children.map(function(t){return t.toJSON()})}),e},(0,i.default)(t,[{key:"parent",get:function(){return this._parent},set:function(t){t&&(this._parent=t,t.children.push(this))}}]),t}()},function(t,e,n){"use strict";e.__esModule=!0;var r=u(n(54)),i=u(n(11)),o=u(n(30));e.fromMindmanager=function(t){return new o.default(function(e,n){if(!t)return n("Need a mindmanager file");t.file("Document.xml")||n("No content"),function(t){return new o.default(function(e){var n=[];(0,i.default)(t.files).forEach(function(t){/^bin\//.test(t)&&n.push(t)});var r=n.indexOf("bin/");if(-1!==r&&n.splice(r,1),!n.length)return e();var o=n.length,s={};n.forEach(function(n){var r=t.file(n);r.async("uint8array").then(function(t){var i=a.default.algo.SHA256.create().update(a.default.lib.WordArray.create(t)).finalize().toString(a.default.enc.Hex);s[n]={hash:i,resourceData:t,zipObject:r},0==--o&&e(s)})})})}(t).then(function(i){t.file("Document.xml").async("string").then(function(t){t=(t=(t=(t=(t=t.replace(/ap:/gi,"")).replace(/cor:/gi,"")).replace(/pri:/gi,"")).replace(/xsi:/gi,"")).replace(/cst0:/gi,"");var o=function(t,e){var n,i,o=O(t,"Map");if(o){var a=[],s=((i={})[d]=((n={})[p]={},n[g]={},n),i[f]={},i),u={workbook:{id:l(),sheets:a,manifest:s}},_={id:l(o.getAttribute("OId")),title:"sheet"};a.push(_);var A=O(o,"OneTopic");if(A)return _.rootTopic=function t(n,r){var i=r||{},o=i.defaultTitle,a=i.isDetached,u=i.isRoot,p=i.isCallout,g={},_=!1,A=n.getAttribute("OId");g.id=l(A);var w=O(n,"Text");g.title=w&&w.getAttribute("PlainText")?w.getAttribute("PlainText"):o;var I=O(n,"Bookmarker");I&&(g.labels=[],g.labels.push(I.getAttribute("Name")));var N=O(n,"NotesGroup");if(N){var B=O(N,"NotesXhtmlData");B&&B.textContent&&(g.notes={},g.notes.plain={content:B.textContent})}var F=0,V=O(n,"SubTopics");if(V){var U=L(V,"Topic");U.length&&(g.children={},g.children.attached=[],U.forEach(function(e){g.children.attached.push(t(e,{defaultTitle:u?"Main Topic":"Subtopic",isDetached:!1})),Ht(e,F,!1),F++}))}var H=O(n,"FloatingTopics");if(H){g.children||(g.children={});var Y=L(H,"Topic");Y.length&&(u?(g.children.detached=[],Y.forEach(function(e){g.children.detached.push(t(e,{defaultTitle:"Floating Topic",isDetached:!0})),F++})):(g.children.callout=[],Y.forEach(function(e){g.children.callout.push(t(e,{defaultTitle:"Callout",isDetached:!1,isCallout:!0})),F++})))}var G=O(n,"Hyperlink");if(G){var j=G.getAttribute("Url");if(j)if(j.startsWith("#xpointer(")){var z=/@OId='([^']*)'/;z.test(j)&&(g.href="xmind:#"+l(z.exec(j)[1]))}else j.startsWith("http://")||j.startsWith("https://")||j.startsWith("mailto:")?g.href=j:g.href="file://"+j}var W=O(n,"AttachmentGroup");if(W){var K=L(W,"AttachmentData");K.length&&(_||(g.children||(g.children={}),g.children.attached||(g.children.attached=[]),_=!0),K.forEach(function(t){var n=t.getAttribute("AttachmentId"),r=t.getAttribute("FileName"),i=O(t,"Uri");if(i){var o=i.textContent;o.startsWith("mmarch://")&&(o=o.substring("mmarch://".length));var a=e[o]||{},u=a.hash,c=a.resourceData;if(u){var h="."+o.split(".").pop(),p="resources/"+u+(h=h===o?"":"."+h);s[d][p]={},s[f][p]=c;var v={id:l(n),title:r,href:"xap:"+p};g.children.attached.push(v)}}}))}var Q=O(n,"IconsGroup");if(Q){var q=O(Q,"Icons");if(q){var X=L(q,"Icon");X.length&&(g.markers||(g.markers=[]),X.forEach(function(t){var e=v[t.getAttribute("IconType")];e&&g.markers.push({markerId:e})}))}}var $=O(n,"OneImage");if($){var J=O($,"Image");if(J){var Z=O(J,"ImageData");if(Z){var tt=O(Z,"Uri");if(tt){var et=tt.textContent;et.startsWith("mmarch://")&&(et=et.substring("mmarch://".length));var nt=e[et]||{},rt=nt.hash,it=nt.resourceData;if(rt){var ot=et.split(".").pop(),at="resources/"+rt+(ot=ot===et?"":"."+ot);s[d][at]={},s[f][at]=it;var st={src:"xap:"+at},ut=O(J,"ImageSize");if(ut){var ct=ut.getAttribute("Width"),lt=ut.getAttribute("Height");st.width=ct?C(ct):-1,st.height=lt?C(lt):-1}g.image=st}}}}}var ht=O(n,"Task");if(ht){var dt=[],ft=/((\d+)-(\d{1,2})-(\d{1,2}))T((\d{1,2}):(\d{1,2}):(\d{1,2}))/,pt=ht.getAttribute("StartDate"),gt=ft.exec(pt);gt&&dt.push({name:"start-date",content:gt[1]+" "+gt[5]});var vt=ht.getAttribute("DeadlineDate"),mt=ft.exec(vt);mt&&dt.push({name:"end-date",content:mt[1]+" "+mt[5]});var yt=ht.getAttribute("Resources");yt&&dt.push({name:"assigned-to",content:yt});var _t=ht.getAttribute("Milestonr");_t&&!0===_t&&dt.push({name:"check-point",content:!0});var Et=ht.getAttribute("TaskPriority"),At=ht.getAttribute("TaskPercentage");dt.length&&(g.extensions=[{provider:"org.xmind.ui.taskInfo",content:dt}]),(At||Et&&!g.markers)&&(g.markers=[]),Et&&v[Et]&&g.markers.push({markerId:v[Et]}),At&&v[At]&&g.markers.push({markerId:v[At]})}var St=O(n,"Custom");if(St){var Tt=St.getAttribute("Numbering");if(Tt){var xt=Tt.split("*")[0],bt=St.getAttribute("Separators").split(",")[0];g.numbering={numberFormat:D[xt]||M.ARABIC,numberSeparator:k[bt]||P.DOT};var wt=St.getAttribute("Repeat"),Ct=St.getAttribute("Depth")||"1";wt&&"0"===wt&&(g.numbering.depth=Ct);var It=St.getAttribute("Level1Text");It&&(g.numbering.prefix=It)}}var Lt={};Yt(n,Lt),function(t,e,n,r){var i=n?"CalloutFloatingTopicShape":r?"LabelFloatingTopicShape":"SubTopicShape",o=O(t,n?"CalloutFloatingTopicShape":r?"LabelFloatingTopicShape":"SubTopicShape");if(o){var a=o.getAttribute(i);n?(a=E[a])&&(e[h.CALLOUT_SHAPE_CLASS]=a):(a=y[a])&&(e[h.SHAPE_CLASS]=a)}}(n,Lt,p,a),w&&b(w,Lt),g.style={type:"topic",properties:Lt};var Nt=O(n,"SubTopicsShape");if(Nt){var Ot=S[Nt.getAttribute("SubTopicsConnectionStyle")];Ot&&(g.style.properties[h.LINE_CLASS]=Ot);var Rt=Nt.getAttribute("SubTopicsAlignment"),Mt=Nt.getAttribute("SubTopicsGrowth"),Dt=Nt.getAttribute("SubTopicsGrowthDirection"),Pt=c.STRUCTURECLASS,kt=void 0;if("urn:mindjet:Center"===Rt&&"urn:mindjet:Horizontal"===Mt)"urn:mindjet:LeftAndRight"===Dt&&(kt=Pt.MAPCLOCKWISE),"urn:mindjet:Right"===Dt&&(kt=Pt.LOGICRIGHT),"urn:mindjet:Left"===Dt&&(kt=Pt.LOGICLEFT);else if("urn:mindjet:Vertical"===Mt&&"urn:mindjet:Middle"===Nt.getAttribute("SubTopicsVerticalAlignment")){var Bt=Nt.getAttribute("SubTopicsVerticalGrowthDirection");"urn:mindjet:Down"!==Bt&&"urn:mindjet:UpAndDown"!==Bt||(kt=Pt.ORGCHARTDOWN),"urn:mindjet:Up"===Bt&&(kt=Pt.ORGCHARTUP)}else"urn:mindjet:Bottom"===Rt&&"urn:mindjet:Horizontal"===Mt&&("urn:mindjet:Right"!==Dt&&"urn:mindjet:LeftAndRight"!==Dt||(kt=Pt.TREERIGHT),"urn:mindjet:Left"===Dt&&(kt=Pt.TREELEFT));kt&&(g.structureClass=kt)}var Ft=O(n,"Offset");if(Ft){var Vt=parseFloat(Ft.getAttribute("CX")),Ut=parseFloat(Ft.getAttribute("CY"));Vt&&Ut&&(g.position={x:C(Vt),y:C(Ut)})}function Ht(t,e,n){var r,i=O(t,"OneBoundary");if(i){var o=O(i,"Boundary");if(o){var a=function(t){var e=O(o,"BoundaryShape");if(e)return e.getAttribute("BoundaryShape")}(),s=R[a],u=void 0,c=void 0,d=void 0;if(s&&!n){g.children.summary||(g.children.summary=[]);var f=l();g.children.summary.push(c={id:f,title:"Summary"}),g.summaries||(g.summaries=[]),g.summaries.push(d={id:l(o.getAttribute("OId")),range:"("+e+","+e+")",topicId:f})}else s=x[a],g.boundaries||(g.boundaries=[]),g.boundaries.push(u={id:l(o.getAttribute("OId")),range:n?"master":"("+e+", "+e+")"});var p=((r={})[h.SHAPE_CLASS]=s,r);if(Yt(o,p),T(o,p),u)u.style={type:"boundary",properties:p};else if(d&&c){var v;d.style={type:"summary",properties:p},c.style={type:"topic",properties:(v={},v[h.SHAPE_CLASS]=m.NOBORDER,v)}}}}}function Yt(t,e){var n=O(t,"Color");if(n){var r=n.getAttribute("FillColor");if(r){var i=r.substring(0,2);e[h.FILL_COLOR]="00"!==i?"#"+r.substring(2):"none"}var o=n.getAttribute("LineColor");o&&(e[h.LINE_COLOR]="#"+o.substring(2))}}return a&&Ht(n,0,!0),g}(O(A,"Topic"),{defaultTitle:"Central Topic",idDetached:!1,isRoot:!0}),function(t){if(t){var e=L(t,"Relationship");if(e.length){var n=[];e.forEach(function(t){var e=L(t,"ConnectionGroup");if(2===e.length){var r=O(e[0],"Connection"),i=O(e[1],"Connection");if(r&&i){var o=O(r,"ObjectReference"),a=O(i,"ObjectReference");if(o&&a){var s={id:l(t.getAttribute("OId")),end1Id:l(o.getAttribute("OIdRef")),end2Id:l(a.getAttribute("OIdRef")),title:""},u=function(t){var e={};return t.forEach(function(t,n){var r=O(t,"Connection");if(r){var i=parseFloat(r.getAttribute("CX")),o=parseFloat(r.getAttribute("CY"));i&&o&&(e[n]={x:C(i),y:C(o)})}}),e}(e);u&&(s.controlPoints=u);var c={};T(t,c),function(t,e){var n=O(t,"RelationshipLineShape");if(n){var r=I[n.getAttribute("LineShape")];r&&(e[h.SHAPE_CLASS]=r)}}(t,c),function(t,e){t.forEach(function(t,n){var r=O(t,"ConnectionStyle");if(r){var i=N[r.getAttribute("ConnectionShape")];if(i){var o=0===n?h.ARROW_BEGIN_CLASS:h.ARROW_END_CLASS;e[o]=i}}})}(e,c),s.style={type:"relationship",properties:c},n.push(s)}}}}),n.length&&(_.relationships=n)}}}(O(o,"Relationships")),function(t){if(t){var e={};(function(t,e){var n={},r=O(t,"Structure");r&&(parseFloat(r.getAttribute("MainTopicLineWidth"))>3&&(n[h.LINE_TAPERED]="tapered"));var i=O(t,"BackgroundFill");if(i){var o=i.getAttribute("FillColor");o&&(n[h.FILL_COLOR]="#"+o.substring(2))}e.map={type:"map",properties:n}})(t,e),function(t,e){var r=O(t,"RootTopicDefaultsGroup");r&&a(e,r,{styleFamily:"centralTopic"});var i=0,o=void 0;function a(t,e,r){var i=r||null,o=i.styleFamily,a=i.shapeMap,s=i.shapeDomName,u=i.shapeAttrName,c={};n(c,e,!0,!0),function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:y,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"DefaultSubTopicShape",i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"SubTopicShape",o=O(e,r);if(o){var a=n[o.getAttribute(i)];a&&(t[h.SHAPE_CLASS]=a)}}(c,e,a,s,u),function(t,e){var n=O(e,"DefaultSubTopicsShape");if(n){var r=S[n.getAttribute("SubTopicsConnectionStyle")];r&&(t[h.LINE_CLASS]=r)}}(c,e),function(t,e){var n=O(e,"DefaultText");n&&b(n,t)}(c,e),t[o]={type:"topic",properties:c}}L(t,"RootSubTopicDefaultsGroup").forEach(function(n){var r=parseInt(n.getAttribute("Level"));0===r?a(e,n,{styleFamily:"mainTopic"}):r>0&&r>i&&(i=r,o=n),o&&a(e,o,{styleFamily:"subTopic"});var s=O(t,"LabelTopicDefaultsGroup");s&&a(e,s,{styleFamily:"floatingTopic",shapeDomName:"DefaultLabelFloatingTopicShape",shapeAttrName:"LabelFloatingTopicShape"});var u=O(t,"CalloutTopicDefaultsGroup");u&&a(e,u,{styleFamily:"calloutTopic",shapeMap:E,shapeDomName:"DefaultCalloutFloatingTopicShape",shapeAttrName:"CalloutFloatingTopicShape"})})}(t,e),function(t,e){var i=O(t,"BoundaryDefaultsGroup");if(i){var o={};n(o,i,!0,!0),r(o,i),function(t,e){var n=O(i,"DefaultBoundaryShape");if(n){var r=x[n.getAttribute("BoundaryShape")];r&&(t[h.SHAPE_CLASS]=r)}}(o),e.boundary={type:"boundary",properties:o}}}(t,e),function(t,e){var i=O(t,"RelationshipDefaultsGroup");if(i){var o={};n(o,i,!1,!0),r(o,i),function(t,e){var n=L(i,"DefaultConnectionStyle");n.length&&n.forEach(function(e){var n=parseInt(e.getAttribute("Index"));if(0===n||1===n){var r=N[e.getAttribute("ConnectionShape")];if(r){var i=0===n?h.ARROW_BEGIN_CLASS:h.ARROW_END_CLASS;t[i]=r}}})}(o),function(t,e){var n=O(i,"DefaultRelationshipLineShape");if(n){var r=I[n.getAttribute("LineShape")];r&&(t[h.SHAPE_CLASS]=r)}}(o),e.relationship={type:"relationship",properties:o}}}(t,e),_.theme=e}function n(t,e,n,r){var i=O(e,"DefaultColor");if(i){if(n){var o=i.getAttribute("FillColor"),a=o.substring(0,2);t[h.FILL_COLOR]="00"!==a?"#"+o.substring(2):"none"}if(r){var s=i.getAttribute("LineColor");s&&(t[h.LINE_COLOR]="#"+s.substring(2))}}}function r(t,e){var n=O(e,"DefaultLineStyle");if(n){var r=w[n.getAttribute("LineDashStyle")];r&&(t[h.LINE_PATTERN]=r);var i=parseFloat(n.getAttribute("LineWidth"));i&&(t[h.LINE_WIDTH]=i)}}}(O(o,"StyleGroup")),u}function T(t,e){var n=O(t,"Color");if(n){var r=n.getAttribute("LineColor");r&&(e[h.LINE_COLOR]="#"+r.substring(2))}var i=O(t,"LineStyle");if(i){var o=w[i.getAttribute("LineDashStyle")];o&&(e[h.LINE_PATTERN]=o),e[h.LINE_WIDTH]=i.getAttribute("LineWidth")}}function b(t,e){var n=t.getAttribute("TextAlignment");n&&(e[h.TEXT_ALIGN]=n.toLowerCase());var r=O(t,"Font");if(r){var i=r.getAttribute("Color");i&&(e[h.TEXT_COLOR]="#"+i.substring(2));var o=r.getAttribute("Name");o&&(e[h.FONT_FAMILY]=o);var a=r.getAttribute("Size");a&&(e[h.FONT_SIZE]=a),"true"===r.getAttribute("Bold")&&(e[h.FONT_WEIGHT]="bold"),"true"===r.getAttribute("Italic")&&(e[h.FONT_STYLE]="italic");var s=r.getAttribute("Underline"),u=r.getAttribute("Strikethrough");"true"!==s&&"true"!==u||(e[h.TEXT_DECORATION]=("true"===s?"underline ":"")+("true"===u?"line-through":""))}}function C(t){return 72*t/25.4}function L(t,e){return(0,r.default)(t.childNodes).filter(function(t){return t.tagName&&t.tagName==e})}function O(t,e){var n=(0,r.default)(t.childNodes).filter(function(t){return t.tagName&&t.tagName==e});return n&&n[0]}}((new DOMParser).parseFromString(t,"application/xml"),i);return o?e(o):n("No content")})})})};var a=u(n(180)),s=u(n(5));function u(t){return t&&t.__esModule?t:{default:t}}var c=n(0),l=s.default.UUID,h=c.STYLE_KEYS,d="file-entries",f="resources",p="content.json",g="metadata.json",v={"urn:mindjet:SmileyHappy":"smiley-smile","urn:mindjet:SmileyAngry":"smiley-angry","urn:mindjet:SmileyNeutral":"smiley-boring","urn:mindjet:SmileySad":"smiley-cry","urn:mindjet:SmileyScreaming":"smiley-surprise","urn:mindjet:FlagGreen":"flag-green","urn:mindjet:FlagYellow":"flag-orange","urn:mindjet:FlagPurple":"flag-purple","urn:mindjet:FlagBlack":"flag-black","urn:mindjet:FlagBlue":"flag-blue","urn:mindjet:FlagOrange":"flag-orange","urn:mindjet:FlagRed":"flag-red","urn:mindjet:Calendar":"other-calendar","urn:mindjet:Clock":"other-clock","urn:mindjet:CoffeeCup":"other-coffee-cup","urn:mindjet:Email":"other-email","urn:mindjet:Mailbox":"other-email","urn:mindjet:Fax":"other-fax","urn:mindjet:Lightbulb":"other-lightbulb","urn:mindjet:Phone":"other-phone","urn:mindjet:Cellphone":"other-phone","urn:mindjet:Resource1":"other-people","urn:mindjet:Resource2":"other-people","urn:mindjet:QuestionMark":"other-question","urn:mindjet:ExclamationMark":"other-exclam",0:"task-start",10:"task-oct",25:"task-quarter",35:"task-3oct",50:"task-half",65:"task-5oct",75:"task-3quar",90:"task-7oct",100:"task-done","urn:mindjet:Prio1":"priority-1","urn:mindjet:Prio2":"priority-2","urn:mindjet:Prio3":"priority-3","urn:mindjet:Prio4":"priority-4","urn:mindjet:Prio5":"priority-5","urn:mindjet:Prio6":"priority-6","urn:mindjet:Prio7":"priority-7","urn:mindjet:Prio8":"priority-8","urn:mindjet:Prio9":"priority-9","urn:mindjet:ArrowUp":"arrow-up","urn:mindjet:ArrowDown":"arrow-down","urn:mindjet:ArrowLeft":"arrow-left","urn:mindjet:ArrowRight":"arrow-right"},m=c.TOPICSHAPE,y={"urn:mindjet:RoundedRectangle":m.ROUNDEDRECT,"urn:mindjet:Rectangle":m.RECT,"urn:mindjet:Line":m.UNDERLINE,"urn:mindjet:Oval":m.ELLIPSE,"urn:mindjet:Circle":m.CIRCLE,"urn:mindjet:Hexagon":m.ROUNDEDRECT,"urn:mindjet:Octagon":m.ROUNDEDRECT,"urn:mindjet:Capsule":m.ROUNDEDRECT,"urn:mindjet:Data":m.PARALLELOGRAM,"urn:mindjet:Diamond":m.DIAMOND,"urn:mindjet:None":m.NOBORDER},_=c.CALLOUTSHAPE,E={"urn:mindjet:RectangleBalloon":_.RECT,"urn:mindjet:RoundedRectangleBalloon":_.ROUNDEDRECT,"urn:mindjet:OvalBalloon":_.ELLIPSE},A=c.BRANCHCONNECTION,S={"urn:mindjet:None":A.NONE,"urn:mindjet:Elbow":A.ELBOW,"urn:mindjet:Curve":A.CURVE,"urn:mindjet:Straight":A.STRAIGHT,"urn:mindjet:RoundedElbow":A.ROUNDEDELBOW},T=c.BOUNDARYSHAPE,x={"urn:mindjet:Rectangle":T.RECT,"urn:mindjet:CurvedRectangle":T.ROUNDEDRECT,"urn:mindjet:Scallops":T.SCALLOPS,"urn:mindjet:Waves":T.WAVES,"urn:mindjet:Zigzag":T.TENSION,"urn:mindjet:CurvedLine":T.ROUNDEDPOLYGON,"urn:mindjet:Lines":T.POLYGON},b=c.ARROWLINEPATTERN,w={"urn:mindjet:Solid":b.SOLID,"urn:mindjet:Dash":b.DASH,"urn:mindjet:RoundDot":b.DOT,"urn:mindjet:DashDot":b.DASHDOT,"urn:mindjet:LongDashDotDot":b.DASHDOTDOT},C=c.RELATIONSHIPSHAPE,I={"urn:mindjet:Angled":C.ANGLED,"urn:mindjet:Bezier":C.CURVED,"urn:mindjet:Straight":C.STRAIGHT},L=c.ARROWSHAPE,N={"urn:mindjet:DiamondArrow":L.DIAMOND,"urn:mindjet:OvalArrow":L.DOT,"urn:mindjet:StealthArrow":L.SPEARHEAD,"urn:mindjet:OpenArrow":L.NORMAL,"urn:mindjet:Arrow":L.TRIANGLE,"urn:mindjet:NoArrow":L.NONE},O=c.SUMMARYCONNECTION,R={"urn:mindjet:SummaryElbow":O.SQUARE,"urn:mindjet:SummaryShearedElbow":O.ANGLE,"urn:mindjet:SummaryArc":O.CURLY,"urn:mindjet:SummaryCurve":O.ROUND},M=c.NUMBERFORMAT,D={1:M.ARABIC,i:M.ROMAN,I:M.ROMAN,A:M.UPPERCASE,a:M.LOWERCASE},P=c.NUMBERSEPARATOR,k={",":P.COMMA,".":P.DOT,"-":P.HYPHEN,"/":P.OBLIQUE}},function(t,e,n){"use strict";e.__esModule=!0;var r=s(n(17)),i=s(n(2));e.fromMindNode=function(t,e){var n=null;try{n=a.default.parseBuffer(t)}catch(t){throw t}if(!n)throw new Error("No contents!");var r=n[0];if(!r)throw new Error("No content!");return new l(r,e).getWorkbookObject()};var o=s(n(61)),a=s(n(220));function s(t){return t&&t.__esModule?t:{default:t}}var u=s(n(5)).default.UUID,c={id:"db791d1fe94b291056ad2839c5",importantTopic:{type:"topic",properties:{"fo:font-weight":"bold","fo:color":"#FFFFFF","svg:fill":"#FF4600"}},minorTopic:{type:"topic",properties:{"fo:font-weight":"bold","fo:color":"#FFFFFF","svg:fill":"#FF7D00"}},expiredTopic:{type:"topic",properties:{"fo:font-style":"normal","fo:text-decoration":" line-through"}},centralTopic:{properties:{"fo:color":"#FFFFFF","svg:fill":"#FF535C","fo:font-weight":"600","fo:font-style":"normal","fo:font-size":"20pt","line-color":"#434B54","fo:font-family":"Nunito Sans","border-line-width":"0"},styleId:"39687c955b998eedc81008bf3f",type:"topic"},boundary:{properties:{"fo:color":"#F0B67F","fo:font-weight":"700","fo:font-style":"normal","fo:font-size":"14pt","fo:font-family":"Nunito Sans","line-color":"#F0B67F","svg:fill":"#FEF1E4"},styleId:"29f9b72a43c95e2d17c1ebd6c8",type:"boundary"},floatingTopic:{properties:{"svg:fill":"#494A46","border-line-color":"#F0B67F","border-line-width":"0","fo:color":"#FFFFFF","fo:font-family":"Nunito Sans","line-color":"#F0B67F","line-class":"org.xmind.branchConnection.curve","fo:font-weight":"600","fo:font-style":"normal","line-width":"1pt"},styleId:"8edb0655eed84223023988f896",type:"topic"},subTopic:{properties:{"fo:color":"#494A46","fo:font-family":"Nunito Sans","fo:text-align":"left","fo:font-size":"11pt"},styleId:"83da5abc2c3805c13b7099fe0d",type:"topic"},mainTopic:{properties:{"svg:fill":"#DBE2E3","border-line-width":"0","fo:font-size":"14pt","fo:color":"#494A46","fo:font-family":"Nunito Sans","line-class":"org.xmind.branchConnection.curve","line-width":"1pt"},styleId:"486ba6c91609eb3e82849939f0",type:"topic"},calloutTopic:{properties:{"svg:fill":"#F0B67F","fo:font-weight":"600","fo:font-style":"normal","fo:font-size":"14pt","fo:font-family":"Nunito Sans","border-line-width":"0","fo:color":"#775D44"},styleId:"4379160bdc98a456dd60a8721d",type:"topic"},summary:{properties:{"line-color":"#434B54"},styleId:"14394c4b1a5b6b534182699edf",type:"summary"},summaryTopic:{properties:{"svg:fill":"#494A46","border-line-width":"0pt","border-line-color":"#434B54","fo:font-weight":"600","fo:font-style":"normal","fo:color":"#FFFFFF","fo:font-family":"Nunito Sans","line-color":"#F0B67F","line-class":"org.xmind.branchConnection.curve","line-width":"1pt"},styleId:"963bfcbd450931f641aef94ec5",type:"topic"},relationship:{properties:{"line-width":"3pt","line-pattern":"solid","line-color":"#F0B67F","fo:color":"#F0B67F","fo:font-weight":"600","fo:font-family":"Nunito Sans","fo:font-style":"normal"},styleId:"67596f401d995d448791686b97",type:"relationship"}},l=function(){function t(e,n){if((0,i.default)(this,t),this.resourceNameMap=n,e.mindMap){var r=this.parseMindMapJSON(e.mindMap);if(!r)throw new Error("Nod mindMap or parse error!");this.workbook=r}else{var o=e.canvas;if(!o)throw new Error("No canvas!");var a=o.mindMaps;if(!a)throw new Error("No mindMaps!");var s=this.parseMindMapsJSON(a);if(!s)throw new Error("No mindMap or parse error!");this.workbook=s}}return t.prototype.getWorkbookObject=function(){return{workbook:this.workbook}},t.prototype.parseMindMapJSON=function(t){var e=[],n={id:u(),title:"sheet"},r=t.mainNodes;if(r&&r.length){var i=this.parseTopic(r[0]);if(i){if(r.length>1){var o=this.parseMMLocation(r[0].location);i.children||(i.children={}),i.children.detached=[];for(var a=1;a<r.length;a++){var s=this.parseTopic(r[a]),l=this.parseMMLocation(r[a].location);s.position={x:l.x-o.x,y:l.y-o.y},i.children.detached.push(s)}}return n.rootTopic=i,n.theme=c,e.push(n),{sheets:e}}}},t.prototype.parseMindMapsJSON=function(t){if(t.length){var e=[],n={id:u(),title:"sheet"},r=this.parseTopic(t[0].mainNode);if(r){if(t.length>1){var i=this.parseMMLocation(t[0].mainNode.location);r.children||(r.children={}),r.children.detached=[];for(var o=1;o<t.length;o++){var a=this.parseTopic(t[o].mainNode),s=this.parseMMLocation(t[o].mainNode.location);a.position={x:s.x-i.x,y:s.y-i.y},r.children.detached.push(a)}}return n.rootTopic=r,n.theme=c,e.push(n),{sheets:e}}}},t.prototype.parseTopic=function(t){if(t){var e={id:u(t.nodeID),children:{attached:[]}};if(this.parseTopicTitle(t.title,e),t.fileLink&&this.parseTopicFileLink(t.fileLink,e),t.attachment&&this.parseTopicAttachment(t.attachment,e),e.style={id:u(),properties:{}},t.subnodes&&t.subnodes.length){var n=t.subnodes,i=Array.isArray(n),o=0;for(n=i?n:(0,r.default)(n);;){var a;if(i){if(o>=n.length)break;a=n[o++]}else{if((o=n.next()).done)break;a=o.value}var s=a;e.children.attached.push(this.parseTopic(s))}}return e}},t.prototype.parseTopicTitle=function(t,e){if(!t||!t.text)return"";var n=new DOMParser,r=n.parseFromString(t.text,"application/xml");if(!r)return"";r.getElementsByTagName("parsererror").length>0&&(r=n.parseFromString("<p>"+t.text+"</p>","application/xml"));var i=r.getElementsByTagName("a")[0];i&&(e.href=i.getAttribute("href")),e.title=this.parseTopicTitleXML(r)},t.prototype.parseTopicTitleXML=function(t){var e="";if(t.childElementCount>0){var n=t.children,i=Array.isArray(n),o=0;for(n=i?n:(0,r.default)(n);;){var a;if(i){if(o>=n.length)break;a=n[o++]}else{if((o=n.next()).done)break;a=o.value}var s=a;e+=this.parseTopicTitleXML(s)}}else e+=t.innerHTML;return e},t.prototype.parseTopicFileLink=function(t,e){var n=t.absoluteFilePath;n&&(e.href?e.children.attached.push({id:u(),title:o.default.basename(n),href:"file://"+n}):e.href="file://"+n)},t.prototype.parseTopicAttachment=function(t,e){var n=t.fileName;if(n){var r=this.resourceNameMap[n];if(r)if(this.isImageFormat(n)){var i=this.parseMMSize(t.size),o={src:"xap:"+r};i&&(o.width=i.width,o.height=i.height),e.image=o}else e.href?e.children.attached.push({id:u(),title:n,href:"xap:"+r}):e.href="xap:"+r}},t.prototype.parseMMSize=function(t){if(t)return t=t.substring(1,t.length-1),{width:parseFloat(t.split(",")[0]),height:parseFloat(t.split(",")[1])}},t.prototype.parseMMLocation=function(t){return t?(t=t.substring(1,t.length-1),{x:parseFloat(t.split(",")[0]),y:parseFloat(t.split(",")[1])}):{x:0,y:0}},t.prototype.isImageFormat=function(t){return t&&t.match(/.(jpg|jpeg|png|gif)$/i)},t}()},function(t,e,n){"use strict";e.__esModule=!0,e.deepEqual=e.isFileEncrypted=e.byteArrayToBase64String=e.base64ToUint8Array=e.wordToUint8Array=e.uint8ArrayToWordArray=e.decryptContent=e.encryptContent=e.toXML=e.fromXML=e.toJSON=e.fromJSON=e.toXMind=e.fromXMind=void 0;var r=f(n(3)),i=f(n(17)),o=f(n(35)),a=f(n(54)),s=f(n(32)),u=f(n(11)),c=f(n(30)),l=f(n(428)),h=f(n(180)),d=n(475);function f(t){return t&&t.__esModule?t:{default:t}}var p="Thumbnails/thumbnail.png",g="resources",v="file-entries",m="file-entry",y="full-path",_="password-hint",E="encryption-data",A="checksum",S="checksum-type",T="iteration-count",x="algorithm",b="algorithm-name",w="key-derivation",C="key-derivation-name",I="salt",L="iv",N="size",O="manifest.json",R="metadata.json",M="content.json",D="content.xml",P="/manifest.json",k="/metadata.json",B="/content.json",F='<?xml version="1.0" encoding="UTF-8" standalone="no"?><xmap-content xmlns="urn:xmind:xmap:xmlns:content:2.0" xmlns:fo="http://www.w3.org/1999/XSL/Format" xmlns:svg="http://www.w3.org/2000/svg" xmlns:xhtml="http://www.w3.org/1999/xhtml" xmlns:xlink="http://www.w3.org/1999/xlink" modified-by="bruce" timestamp="1503058545540" version="2.0"><sheet id="7abtd0ssc7n4pi1nu6i7b6lsdh" modified-by="bruce" theme="0kdeemiijde6nuk97e4t0vpp54" timestamp="1503058545540"><topic id="1vr0lcte2og4t2sopiogvdmifc" modified-by="bruce" structure-class="org.xmind.ui.logic.right" timestamp="1503058545417"><title>Warning\n\nAttention\nWarnung\n</title><children><topics type="attached"><topic id="71h1aip2t1o8vvm0a41nausaar" modified-by="bruce" timestamp="1503058545423"><title svg:width="500">This file can not be opened normally, please do not modify and save, otherwise the contents will be permanently lost</title><children><topics type="attached"><topic id="428akmkh9a0tog6c91qj995qdl" modified-by="bruce" timestamp="1503058545427"><title>You can try using XMind 8 Update 3 or later version to open</title></topic></topics></children></topic><topic id="2kb87f8m38b3hnfhp450c7q35e" modified-by="bruce" timestamp="1503058545434"><title svg:width="500"></title><children><topics type="attached"><topic id="3m9hoo4a09n53ofl6fohdun99f" modified-by="bruce" timestamp="1503058545438"><title> XMind 8 Update 3 </title></topic></topics></children></topic><topic id="7r3r4617hvh931ot9obi595r8f" modified-by="bruce" timestamp="1503058545444"><title svg:width="500"></title><children><topics type="attached"><topic id="691pgka6gmgpgkacaa0h3f1hjb" modified-by="bruce" timestamp="1503058545448"><title> XMind 8 Update 3 </title></topic></topics></children></topic><topic id="0f2e3rpkfahg4spg4nda946r0b" modified-by="bruce" timestamp="1503058545453"><title svg:width="500"></title><children><topics type="attached"><topic id="4vuubta53ksc1falk46mevge0t" modified-by="bruce" timestamp="1503058545457"><title>XMind 8 Update 3 </title></topic></topics></children></topic><topic id="70n9i4u3lb89sq9l1m1bs255j5" modified-by="bruce" timestamp="1503058545463"><title svg:width="500">Datei kann nicht richtig geffnet werden. Bitte ndern Sie diese Datei nicht und speichern Sie sie, sonst wird die Datei endgltig gelscht werden.</title><children><topics type="attached"><topic id="1qpc5ee298p2sqeqbinpca46b7" modified-by="bruce" timestamp="1503058545466"><title svg:width="500">Bitte versuchen Sie, diese Datei mit XMind 8 Update 3 oder spter zu ffnen.</title></topic></topics></children></topic><topic id="4dmes10uc19pq7enu8sc4bmvif" modified-by="bruce" timestamp="1503058545473"><title svg:width="500">Ce fichier ne peut pas ouvert normalement, veuillez le rdiger et sauvegarder, sinon le fichier sera perdu en permanence. </title><children><topics type="attached"><topic id="5f0rivgubii2launodiln7sdkt" modified-by="bruce" timestamp="1503058545476"><title svg:width="500">Vous pouvez essayer d\'ouvrir avec XMind 8 Update 3 ou avec une version plus rcente.</title></topic></topics></children></topic><topic id="10pn1os1sgfsnqa8akabom5pej" modified-by="bruce" timestamp="1503058545481"><title svg:width="500">    ,    .      !</title><children><topics type="attached"><topic id="0l2nr0fq3em22rctapkj46ue58" modified-by="bruce" timestamp="1503058545484"><title svg:width="500">XMind 8 Update 3    </title></topic></topics></children></topic></topics></children><extensions><extension provider="org.xmind.ui.map.unbalanced"><content><right-number>-1</right-number></content></extension></extensions></topic><title>Sheet 1</title></sheet></xmap-content>';function V(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return new c.default(function(n,r){if(!t)return r("MUST have a valid zen file.");var i=e.password,o=void 0===i?"":i,a=pt(t,O,P);if(!a)return r("MUST have a manifest.json file.");a.async("string").then(function(t){return JSON.parse(t)}).then(function(e){var i=[];i.push(c.default.resolve(e));var a=pt(t,R,k);if(!a)return r("MUST have a metadata.json file.");var s=e[v][R]&&e[v][R][E];i.push(a.async(s?"base64":"string").then(function(t){return s&&(t=G(t,z(o,s)).toString(h.default.enc.Utf8)),JSON.parse(t)}));var l=pt(t,M,B);if(!l)return r("MUST have a content.json file");var d=e[v][M]&&e[v][M][E];i.push(l.async(d?"base64":"string").then(function(t){return d&&(t=G(t,z(o,d)).toString(h.default.enc.Utf8)),JSON.parse(t)})),e[g]=e[g]?e[g]:{};var f=function(n){if(n.includes(p)||n.match(/resources\//)){var r=t.file(n);if(r){var a=e[v][n][E];i.push(r.async(a?"base64":"uint8array").then(function(t){return a&&(t=Q(G(t,z(o,a)))),e[g][n]=t}))}}};for(var m in e[v])f(m);c.default.all(i).then(function(t){var e=t[0],r=t[1],i=t[2];e[v][M]||(e[v][M]={}),e[v][R]||(e[v][R]={}),lt(i,(0,u.default)(e[g]).map(function(t){return"xap:"+t})),n({metadata:r,sheets:i,manifest:e})}).catch(function(t){r(t)})})})}function U(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return new c.default(function(n,r){var i,o;if(!(t&&t.manifest&&t.metadata&&t.sheets))return r("MUST have a valid workbook.");var a=e.zip||new l.default,u=e.password,c=t.manifest,h=((o={})[v]=((i={})[M]={},i[R]={},i),o),d=e.passwordHint||c[_];d&&(h[_]=d);var f=c[v];if(c.resources)for(var p in c.resources){var g=f[p],m=c.resources[p];if(h[v][p]=h[v][p]?h[v][p]:{},g&&u&&!g.skipEncrypt){var y=z(u,g[E]);m=Q(H(q(m),y).ciphertext),h[v][p][E]=j(y)}a.file(p,m)}var A=(0,s.default)(t.metadata||{});if(h[v][R]=h[v][R]?h[v][R]:{},u){var S=z(u,f[R]&&f[R][E]);A=Q(H(A,S).ciphertext),h[v][R][E]=j(S)}a.file(R,A);var T=(0,s.default)(t.sheets);if(h[v][M]=h[v][M]?h[v][M]:{},u){var x=z(u,f[M]&&f[M][E]);T=Q(H(T,x).ciphertext),h[v][M][E]=j(x)}a.file(M,T),a.file(D,F),a.file(O,(0,s.default)(h)),n(a)})}function H(t,e){var n={keySize:e.keySize,hasher:h.default.algo.SHA512,iterations:e.iterationCount},r=h.default.PBKDF2(e.password,e.salt,n);return h.default.AES.encrypt(t,r,{iv:e.iv})}function Y(t){return{password:t,keySize:4,iterationCount:1024,salt:h.default.enc.Base64.parse("").random(8),iv:h.default.enc.Base64.parse("").random(16),algorithmName:"AES/CBC/PKCS5Padding",keyDerivationName:"PBKDF2WithHmacSHA512",checksumType:"MD5"}}function G(t,e){var n={keySize:e.keySize,hasher:h.default.algo.SHA512,iterations:e.iterationCount},r="PKCS12"===e.keyDerivationName?function(t,e,n,r){for(var i=[],o=64,a=[],s=0;s<o;s++)a.push(1);for(var u=W(e.words),c=[],l=0;l<Math.floor((o+u.length-1)/o)*o/u.length;l++)c=c.concat(u);for(var d=[],f=0;f<t.length;f++){var p=t.charCodeAt(f);d.push(p>>8),d.push(p)}d.push(0),d.push(0);for(var g=[];g.length<o;)g=g.concat(d);g.length!=o&&(g=g.slice(0,64));for(var v=c.concat(g),m=4*r,y=Math.floor((m+16-1)/16),_=1;_<=y;_++){for(var E=h.default.MD5(h.default.lib.WordArray.create(K(a.concat(v)))),A=1;A<n;A++)E=h.default.MD5(E);for(var S=[],T=0;T<o/E.sigBytes;T++)S=S.concat(E.words);for(var x=W(S),b=0;b<v.length/o;b++){var w=(255&x[x.length-1])+v[b*o+x.length-1]+1;v[b*o+x.length-1]=w,w>>=8;for(var C=x.length-2;C>=0;C--)w+=(255&x[C])+(255&v[b*o+C]),v[b*o+C]=w,w>>=8}i=i.concat(W(E.words))}return h.default.lib.WordArray.create(K(i))}(e.password,e.salt,e.iterationCount,e.keySize):h.default.PBKDF2(e.password||"",e.salt,n);return h.default.AES.decrypt(t,r,{iv:e.iv})}function j(t){var e;return(e={})[T]=t.iterationCount,e[b]=t.algorithmName,e[C]=t.keyDerivationName,e[N]=32*t[N]||128,e[I]=h.default.enc.Base64.stringify(t[I]),e[L]=h.default.enc.Base64.stringify(t[L]),e}function z(t,e){return e?{password:t,checksum:e[A],checksumType:e[S],iterationCount:e[T],algorithmName:e[b],keyDerivationName:e[C],keySize:(e[N]||128)/32,salt:h.default.enc.Base64.parse(e[I]),iv:e[L]&&h.default.enc.Base64.parse(e[L])||h.default.lib.WordArray.create([0,0,0,0])}:Y(t)}function W(t){var e,n,r,i=[];for(n=0;n<t.length;++n)for(e=t[n],r=3;r>=0;--r)i.push(e>>8*r&255);return i}function K(t){if(t.length%4!=0)throw"ByteArray invalid.";for(var e=[],n=0;n<t.length/4;n++){var r=t[4*n]<<24^t[4*n+1]<<16^t[4*n+2]<<8^t[4*n+3];e.push(r)}return e}function Q(t){for(var e=t.words,n=t.sigBytes,r=new Uint8Array(n),i=0;i<n;i++){var o=e[i>>>2]>>>24-i%4*8&255;r[i]=o}return r}function q(t){for(var e=t.length,n=[],r=0;r<e;r++)n[r>>>2]|=(255&t[r])<<24-r%4*8;return h.default.lib.WordArray.create(n,e)}var X="META-INF/manifest.xml",$="content.xml",J="styles.xml",Z="comments.xml",tt="markers/markerSheet.xml",et="Thumbnails/thumbnail.png",nt="meta.xml",rt="/META-INF/manifest.xml",it="/content.xml",ot="/styles.xml",at="/comments.xml",st="/markers/markerSheet.xml",ut="/Thumbnails/thumbnail.png";function ct(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return new c.default(function(n,o){if(!t)return o("MUST have a valid xmind file.");var s=pt(t,X,rt);if(!s)return o("MUST have a manifest.xml file");var l=e.password,f=new d.DOMParser;s.async("string").then(function(t){return function(t){var e,n=((e={})[v]={},e[_]="",e),r=t.getElementsByTagName("manifest")[0].getAttribute(_);n[_]=r;var o=t.getElementsByTagName(m),s=(0,a.default)(o),u=Array.isArray(s),c=0;for(s=u?s:(0,i.default)(s);;){var l;if(u){if(c>=s.length)break;l=s[c++]}else{if((c=s.next()).done)break;l=c.value}var h=l,d=h.getAttribute(y);n[v][d]={};var f=h.getElementsByTagName(E)&&h.getElementsByTagName(E)[0];if(f){n[v][d][E]={},n[v][d][E][A]=f.getAttribute(A),n[v][d][E][S]=f.getAttribute(S),n[v][d][E][b]=f.getElementsByTagName(x)[0].getAttribute(b);var p=f.getElementsByTagName(w)&&f.getElementsByTagName(w)[0];n[v][d][E][C]=p.getAttribute(C),n[v][d][E][T]=p.getAttribute(T),n[v][d][E][I]=p.getAttribute(I),n[v][d][E][L]=p.getAttribute(L),n[v][d][E][N]=p.getAttribute(N)}}return n}(f.parseFromString(t,"application/xml"))}).then(function(e){var n=[];n.push(c.default.resolve(e));var r=pt(t,$,it),i=e[v][$];if(!r)return o("MUST have a content.xml file.");n.push(r.async(i&&i[E]?"base64":"string").then(function(t){var e=i?i[E]:null;return e&&(t=G(t,z(l,e)).toString(h.default.enc.Utf8)),f.parseFromString(t,"application/xml")}));var a=pt(t,J,ot),s=e[v][J];a?n.push(a.async(s&&s[E]?"base64":"string").then(function(t){if(e[v][J]){var n=e[v][J][E];return n&&(t=G(t,z(l,n)).toString(h.default.enc.Utf8)),f.parseFromString(t,"application/xml")}return null})):n.push(c.default.resolve(null));var u=pt(t,tt,st),d=e[v][tt];u?n.push(u.async(d&&d[E]?"base64":"string").then(function(t){if(e[v][tt]){var n=e[v][tt][E];return n&&(t=G(t,z(l,n)).toString(h.default.enc.Utf8)),f.parseFromString(t,"application/xml")}return null})):n.push(c.default.resolve(null));var p=pt(t,Z,at),g=e[v][Z];return p?n.push(p.async(g&&g[E]?"base64":"string").then(function(t){if(e[v][Z]){var n=e[v][Z][E];return n&&(t=G(t,z(l,n)).toString(h.default.enc.Utf8)),f.parseFromString(t,"application/xml")}return null})):n.push(c.default.resolve(null)),c.default.all(n)}).then(function(e){var s,d,f,p,m=e[0],y=e[1],_=e[2],A=e[3],S=e[4],T=[],x=((d={})[v]=((s={})[M]={},s[R]={},s),d[g]={},d);if(m[v][$]&&m[v][$][E]&&(x[v][M]=((f={})[E]=m[v][$][E],f)),m[v][nt]&&m[v][nt][E]&&(x[v][R]=((p={})[E]=m[v][nt][E],p)),!y)return o("password wrong.");var b=[];(0,a.default)(y.getElementsByTagName("sheet")).forEach(function(e){b.push(function(t,e){var n=e.stylesDOM,o=e.markersDOM,s=e.commentsDOM,l=e.sheetsArray,d=e.manifest,f=e.newManifest,p=e.zip,m=e.password,y=(0,a.default)(t.childNodes).filter(function(t){return t.tagName&&"title"==t.tagName.toLowerCase()}),_=y&&y[0],A={id:ht(),title:_&&_.firstChild?_.firstChild.nodeValue:"Missing Sheet Title"};return l.push(A),function(){if(t.getElementsByTagName("relationships")&&t.getElementsByTagName("relationships").length){var e=[];(0,a.default)(t.getElementsByTagName("relationship")).forEach(function(t){var i=t.getElementsByTagName("title")&&t.getElementsByTagName("title")[0],o={end1Id:t.getAttribute("end1"),end2Id:t.getAttribute("end2"),id:t.getAttribute("id"),title:i?i.textContent:""},s={};(0,a.default)(t.getElementsByTagName("control-point")).forEach(function(t){var e=t.getAttribute("index"),n=Number(t.getAttribute("amount")),i=Number(t.getAttribute("angle"));s[e]={amount:n,angle:i};var o=t.getElementsByTagName("position")&&t.getElementsByTagName("position")[0];if(o){var a=Number(o.getAttribute("svg:x")),u=Number(o.getAttribute("svg:y"));(0,r.default)(s[e],{x:a,y:u})}}),o.controlPoints=s;var u=n&&n.getElementsByTagName("xmap-styles")&&n.getElementsByTagName("xmap-styles")[0];if(u){var c=t.getAttribute("style-id");if(c){var l=(0,a.default)(u.getElementsByTagName("style")).filter(function(t){return t.getAttribute("id")==c}),h=l&&l[0]&&l[0].getElementsByTagName("relationship-properties")&&l[0].getElementsByTagName("relationship-properties")[0];if(h){var d={};(0,a.default)(h.attributes).forEach(function(t){d[t.name]=t.value}),o.style={properties:d}}}}e.push(o)}),A.relationships=e}}(),function(){var e=t.getElementsByTagName("sheet-settings")&&t.getElementsByTagName("sheet-settings")[0];if(!e)return!1;A.settings={};var n={infoItems:{childNodeName:"infoItem",keyName:"infoItems/infoItem"},"info-items":{childNodeName:"info-item",keyName:"info-items/info-item"}};(0,u.default)(n).forEach(function(t){var r=[],i=e.getElementsByTagName(t)&&e.getElementsByTagName(t)[0];if(i){var o=n[t].childNodeName;(0,a.default)(i.getElementsByTagName(o)).forEach(function(t){r.push({mode:t.getAttribute("mode"),type:t.getAttribute("type")})}),A.settings[n[t].keyName]=r}})}(),function(){if(!n)return!1;if(!n.getElementsByTagName("xmap-styles")||!n.getElementsByTagName("xmap-styles")[0])return!1;var e=t.getAttribute("style-id");if(!e)return!1;var r=n.getElementById(e);if(!r)return!1;var i=r.getAttribute("type");A.style={type:i};var o=r.getElementsByTagName(i+"-properties")&&r.getElementsByTagName(i+"-properties")[0];if(!o)return!1;var s={};(0,a.default)(o.attributes).forEach(function(t){s[t.name]=t.value}),A.style.properties=s}(),function(){if(t&&n){var e=t.getAttribute("theme");if(e){var r=n.getElementById(e);if(r){var i={};(0,a.default)(r.getElementsByTagName("default-style")).forEach(function(t){var e=t.getAttribute("style-id"),r=t.getAttribute("style-family");if(n&&e){var o=n.getElementById(e);if(o){var s=o.getAttribute("type");i[r]={type:s,properties:{}},o.getElementsByTagName(s+"-properties")&&o.getElementsByTagName(s+"-properties")[0]&&(0,a.default)(o.getElementsByTagName(s+"-properties")[0].attributes).forEach(function(t){i[r].properties[t.name]=t.value})}}}),A.theme=i}}}}(),new c.default(function(e){c.default.all([new c.default(function(e){var n={groups:{},markers:{}},r=t.getElementsByTagName("legend")&&t.getElementsByTagName("legend")[0];if(r){n.visibility=r.getAttribute("visibility");var i=r.getElementsByTagName("position")&&r.getElementsByTagName("position")[0];i&&(n.position={x:Number(i.getAttribute("svg:x")),y:Number(i.getAttribute("svg:y"))})}var s=[];o&&(0,a.default)(o.getElementsByTagName("marker-group")).forEach(function(t){var e=t.getAttribute("id"),r=t.getAttribute("name"),i=t.getAttribute("singleton"),o=t.getElementsByTagName("marker");if(o&&o.length){var u=(0,a.default)(o).map(function(t){return t.getAttribute("id")});n.groups[e]={name:r,singleton:i,markers:u},(0,a.default)(o).forEach(function(t){var e=t.getAttribute("id"),r=t.getAttribute("resource"),i=d[v]["markers/"+r],o=p.file("markers/"+r);if(o&&i){var a={},u=d[v]["markers/"+r][E];s.push(o.async(u?"base64":"uint8array").then(function(e){u&&(e=Q(G(e,z(m,u))));try{var n,i=h.default.algo.SHA256.create().update(h.default.lib.WordArray.create(e)).finalize().toString(h.default.enc.Hex),o=r.split(".").pop(),s="resources/"+i+(o=o===r?"":"."+o);f[v][s]=((n={})[E]=u,n),f[g][s]=e,a.resource="xap:"+s,a.name=t.getAttribute("name")}catch(t){}})),n.markers[e]=a}})}}),c.default.all(s).then(function(){A.legend=n,e()})}),new c.default(function(e){var r=n&&n.getElementsByTagName("xmap-styles")&&n.getElementsByTagName("xmap-styles")[0];(function t(e){return new c.default(function(o){var l={},y=[];l.id=e.getAttribute("id");var _=e.getAttribute("class");_&&(l.class=_);var A=e.getAttribute("structure-class");A&&(l.structureClass=A);var S=(0,a.default)(e.childNodes).filter(function(t){return t.tagName&&"title"==t.tagName.toLowerCase()}),T=S&&S[0];if(T&&T.firstChild){var x=T.firstChild.nodeValue;x&&(l.title=x);var b=Number(T.getAttribute("svg:width"));b&&(l.width=b)}var w=(0,a.default)(e.childNodes).filter(function(t){return t.tagName&&"position"==t.tagName.toLowerCase()}),C=w&&w[0];C&&(l.position={x:Number(C.getAttribute("svg:x")),y:Number(C.getAttribute("svg:y"))});var I=(0,a.default)(e.childNodes),L=Array.isArray(I),N=0;for(I=L?I:(0,i.default)(I);;){var O;if(L){if(N>=I.length)break;O=I[N++]}else{if((N=I.next()).done)break;O=N.value}var R=O;R.tagName&&"xhtml:img"==R.tagName.toLowerCase()&&function(){var t=R,e=t.getAttribute("xhtml:src").split(":").pop(),n=d[v][e],r=p.file(e);if(n&&r){var i=n[E];y.push(r.async(i?"base64":"uint8array").then(function(n){try{var r;if(i)n=Q(G(n,z(m,i)));var o=h.default.algo.SHA256.create().update(h.default.lib.WordArray.create(n)).finalize().toString(h.default.enc.Hex),a=e.split(".").pop(),s="resources/"+o+(a=a===e?"":"."+a);f[v][s]=((r={})[E]=i,r),f[g][s]=n,l.image={src:"xap:"+s};var u=t.getAttribute("align");u&&(l.image.align=u);var c=Number(t.getAttribute("svg:width"));c&&(l.image.width=c);var d=Number(t.getAttribute("svg:height"));d&&(l.image.height=d)}catch(t){}}))}}()}var M=(0,a.default)(e.childNodes).filter(function(t){return t.tagName&&"numbering"==t.tagName.toLowerCase()}),D=M&&M[0];if(D){l.numbering={numberFormat:D.getAttribute("number-format"),numberDepth:D.getAttribute("number-depth"),numberSeparator:D.getAttribute("number-separator"),prependingNumbers:D.getAttribute("prepending-numbers")};var P=D.getElementsByTagName("prefix")&&D.getElementsByTagName("prefix")[0];P&&P.firstChild&&(l.numbering.prefix=P.firstChild.nodeValue);var k=D.getElementsByTagName("suffix")&&D.getElementsByTagName("suffix")[0];k&&k.firstChild&&(l.numbering.suffix=k.firstChild.nodeValue)}var B=e.getAttribute("xlink:href");if(B)if(B.startsWith("xap:")){var F=B.substr(4),V=d[v][F],U=p.file(F);if(V&&U){var H=V[E];y.push(U.async(H?"base64":"uint8array").then(function(t){try{var e;if(H)t=Q(G(t,z(m,H)));var n=h.default.algo.SHA256.create().update(h.default.lib.WordArray.create(t)).finalize().toString(h.default.enc.Hex),r=F.split(".").pop(),i="resources/"+n+(r=r===F?"":"."+r);f[v][i]=((e={})[E]=H,e),f[g][i]=t,l.href="xap:"+i}catch(t){}}))}}else l.href=B;var Y=(0,a.default)(e.childNodes).filter(function(t){return t.tagName&&"notes"==t.tagName.toLowerCase()}),j=Y&&Y[0];if(j){l.notes={};var W=j.getElementsByTagName("plain")&&j.getElementsByTagName("plain")[0];W&&W.firstChild&&(l.notes.plain={content:W.firstChild.nodeValue});var K=j.getElementsByTagName("html")&&j.getElementsByTagName("html")[0];if(K){var q=c.default.resolve();l.notes.html={content:{paragraphs:[]}};var X=function(t){var e=[],r={},o=t.getAttribute("style-id"),s=n?n.getElementById(o):null;if(s){var u=s.getAttribute("type");if(u){var y=s.getElementsByTagName(u+"-properties")&&s.getElementsByTagName(u+"-properties")[0];if(y&&y.attributes){var _={},A=(0,a.default)(y.attributes),S=Array.isArray(A),T=0;for(A=S?A:(0,i.default)(A);;){var x;if(S){if(T>=A.length)break;x=A[T++]}else{if((T=A.next()).done)break;x=T.value}var b=x;_[b.nodeName]=b.nodeValue}r.properties=_}r.type=u}}var w=(0,a.default)(t.childNodes),C=function(t){var r=w[t];1==r.nodeType?"xhtml:img"==r.nodeName?q=q.then(function(){return new c.default(function(n){var i=r.getAttribute("xhtml:src").substr(4),o=d[v][i],a=p.file(i);if(o&&a){var s=o[E];a.async(s?"base64":"uint8array").then(function(r){try{var o;if(s)r=Q(G(r,z(m,s)));var a=h.default.algo.SHA256.create().update(h.default.lib.WordArray.create(r)).finalize().toString(h.default.enc.Hex),u=i.split(".").pop(),c="resources/"+a+(u=u===i?"":"."+u);f[v][c]=((o={})[E]=s,o),f[g][c]=r,e[t]={image:"xap:"+c},n()}catch(t){}})}else n()})}):"xhtml:span"==r.nodeName?q=q.then(function(){var o=r.getAttribute("style-id");if(o){var s=n?n.getElementById(o):null;if(s){var u=s.getAttribute("type");if(u){var c=s.getElementsByTagName(u+"-properties")&&s.getElementsByTagName(u+"-properties")[0];if(c){var l={},h=(0,a.default)(c.attributes),d=Array.isArray(h),f=0;for(h=d?h:(0,i.default)(h);;){var p;if(d){if(f>=h.length)break;p=h[f++]}else{if((f=h.next()).done)break;p=f.value}var g=p;l[g.nodeName]=g.nodeValue}e[t]={style:{type:u,properties:l},text:r.textContent}}}}}}):"xhtml:a"==r.nodeName&&(q=q.then(function(){return new c.default(function(o){var s=[],u=(0,a.default)(r.childNodes),c=Array.isArray(u),l=0;for(u=c?u:(0,i.default)(u);;){var y;if(c){if(l>=u.length)break;y=u[l++]}else{if((l=u.next()).done)break;y=l.value}var _=y;if(3==_.nodeType)s.push({text:_.textContent});else if("xhtml:span"==_.nodeName){var A=_.getAttribute("style-id");if(A){var S=n.getElementById(A);if(S){var T=S.getAttribute("type");if(T){var x=S.getElementsByTagName(T+"-properties")&&S.getElementsByTagName(T+"-properties")[0];if(x){var b={},w=(0,a.default)(x.attributes),C=Array.isArray(w),I=0;for(w=C?w:(0,i.default)(w);;){var L;if(C){if(I>=w.length)break;L=w[I++]}else{if((I=w.next()).done)break;L=I.value}var N=L;b[N.nodeName]=N.nodeValue}s.push({style:{type:T,properties:b},text:_.textContent})}}}}}}var O=r.getAttribute("xlink:href");if(O&&O.startsWith("xap:")){var R=r.getAttribute("xlink:href").substr(4),M=d[v][R],D=p.file(R);if(M&&D){var P=M[E];D.async(P?"base64":"uint8array").then(function(n){try{var r;if(P)n=Q(G(n,z(m,P)));var i=h.default.algo.SHA256.create().update(h.default.lib.WordArray.create(n)).finalize().toString(h.default.enc.Hex),a=R.split(".").pop(),s="resources/"+i+(a=a===R?"":"."+a);f[v][s]=((r={})[E]=P,r),f[g][s]=n,e[t]={image:"xap:"+s},o()}catch(t){}})}else o()}else e[t]={spans:s,href:O},o()})})):3==r.nodeType&&(q=q.then(function(){e[t]={text:r.textContent}}))};for(var I in w)C(I);q=q.then(function(){l.notes.html.content.paragraphs.push({spans:e,style:r})})},$=(0,a.default)(K.childNodes).filter(function(t){return t.childNodes&&t.childNodes.length}),J=Array.isArray($),Z=0;for($=J?$:(0,i.default)($);;){var tt;if(J){if(Z>=$.length)break;tt=$[Z++]}else{if((Z=$.next()).done)break;tt=Z.value}X(tt)}y.push(q)}}var et=(0,a.default)(e.childNodes).filter(function(t){return t.tagName&&"labels"==t.tagName.toLowerCase()}),nt=et&&et[0];if(nt){var rt=(0,a.default)(nt.getElementsByTagName("label"));rt&&(l.labels=[],rt.forEach(function(t){t&&t.firstChild&&l.labels.push(t.firstChild.nodeValue)}))}if(n){var it=e.getAttribute("style-id");if(it){var ot=n.getElementById(it);if(ot){var at=ot.getElementsByTagName("topic-properties")&&ot.getElementsByTagName("topic-properties")[0];if(at){l.style={type:"topic"};var st={};(0,a.default)(at.attributes).forEach(function(t){st[t.name]=t.value}),l.style.properties=st}}}}var ut=(0,a.default)(e.childNodes).filter(function(t){return t.tagName&&"marker-refs"==t.tagName.toLowerCase()}),ct=ut&&ut[0];if(ct){var lt=ct.getElementsByTagName("marker-ref");lt&&lt.length&&(l.markers=[],(0,a.default)(lt).forEach(function(t){l.markers.push({markerId:t.getAttribute("marker-id")})}))}if(s){var ht=(0,a.default)(s.getElementsByTagName("comment"));if(ht.length)(0,a.default)(ht).forEach(function(t,e){if(t.getAttribute("object-id")===l.id){l.comments||(l.comments=[]);var n=t.getElementsByTagName("content")&&t.getElementsByTagName("content")[0];n&&n.firstChild&&l.comments.push({creationTime:Number(t.getAttribute("time")),author:t.getAttribute("author"),content:n.firstChild.nodeValue}),ht.splice(e,1)}})}function dt(t){var e=void 0,n=(0,a.default)(t.childNodes).filter(function(t){return t.tagName});return n&&n.length?(e=[],n.forEach(function(t){var n={};n.name=t.nodeName,n.content=dt(t);var r=function(t){var e={},n=(0,a.default)(t.attributes),r=Array.isArray(n),o=0;for(n=r?n:(0,i.default)(n);;){var s;if(r){if(o>=n.length)break;s=n[o++]}else{if((o=n.next()).done)break;s=o.value}var c=s;e[c.name]=c.value}return(0,u.default)(e)?e:null}(t);r&&(n.attrs=r),e.push(n)})):t.firstChild&&(e=t.firstChild.nodeValue),e}var ft=(0,a.default)(e.childNodes).filter(function(t){return t.tagName&&"extensions"==t.tagName.toLowerCase()}),pt=ft&&ft[0];if(pt){var gt=pt.getElementsByTagName("extension");if(gt){var vt=[];(0,a.default)(gt).forEach(function(t){var e={};e.provider=t.getAttribute("provider");var n=t.getElementsByTagName("content")&&t.getElementsByTagName("content")[0],r=[];(0,a.default)(n.childNodes).filter(function(t){return t.tagName}).forEach(function(t){r.push({name:t.nodeName,content:dt(t)})}),e.content=r;var i=t.getElementsByTagName("resource-refs")&&t.getElementsByTagName("resource-refs")[0];if(i){var o=[];(0,a.default)(i.getElementsByTagName("resource-ref")).forEach(function(t){var e=t.getAttribute("resource-id"),n=p.file(e),r=d[v][e];if(r&&n){var i=r[E];y.push(n.async(i?"base64":"uint8array").then(function(t){try{var n;if(i)t=Q(G(t,z(m,i)));var r=h.default.algo.SHA256.create().update(h.default.lib.WordArray.create(t)).finalize().toString(h.default.enc.Hex),a=e.split(".").pop(),s="resources/"+r+(a=a===e?"":"."+a);f[v][s]=((n={})[E]=i,n),f[g][s]=t;var u="xap:resources/"+r+a;o.push(u)}catch(t){}}))}}),e.resourceRefs=o}vt.push(e)}),l.extensions=vt}}var mt=(0,a.default)(e.childNodes).find(function(t){return t.tagName&&"boundaries"==t.tagName.toLowerCase()});if(mt){var yt=mt.getElementsByTagName("boundary");if(yt&&yt.length){var _t=[];(0,a.default)(yt).forEach(function(t){var e={id:t.getAttribute("id"),range:t.getAttribute("range")},i=t.getElementsByTagName("title")&&t.getElementsByTagName("title")[0];if(i&&i.firstChild){var o=i.firstChild.nodeValue;o&&(e.title=o)}if(r){var s=t.getAttribute("style-id");if(n&&s){var u=n.getElementById(s);if(u){var c=u.getElementsByTagName("boundary-properties")&&u.getElementsByTagName("boundary-properties")[0];if(c&&c.attributes){e.style={type:"boundary"};var l={};(0,a.default)(c.attributes).forEach(function(t){l[t.name]=t.value}),e.style.properties=l}}}}_t.push(e)}),l.boundaries=_t}}var Et=(0,a.default)(e.childNodes).find(function(t){return t.tagName&&"summaries"==t.tagName.toLowerCase()});if(Et){var At=Et.getElementsByTagName("summary");if(At){var St=[];(0,a.default)(At).forEach(function(t){St.push({id:t.getAttribute("id"),range:t.getAttribute("range"),topicId:t.getAttribute("topic-id")})}),l.summaries=St}}l.children={};var Tt=(0,a.default)(e.childNodes).filter(function(t){return t.tagName&&"children"==t.tagName.toLowerCase()});if(Tt[0]){var xt=function(e){var n=(0,a.default)(Tt[0].childNodes).find(function(t){return t.tagName&&"topics"==t.tagName.toLowerCase()&&t.getAttribute("type")==e});if(n){l.children[e]=[];var r=(0,a.default)(n.childNodes).filter(function(t){return t.tagName&&"topic"==t.tagName.toLowerCase()}),i=function(n){var i=r[n];y.push(t(i).then(function(t){l.children[e][n]=t}))};for(var o in r)i(o)}};xt("attached"),xt("detached"),xt("summary"),xt("callout")}c.default.all(y).then(function(){o(l)})})})(t.getElementsByTagName("topic")&&t.getElementsByTagName("topic")[0]).then(function(t){A.rootTopic=t,e()})})]).then(e)})}(e,{stylesDOM:_,markersDOM:A,commentsDOM:S,sheetsArray:T,manifest:m,newManifest:x,zip:t,password:l}))});var w=pt(t,et,ut),C=m[v][et];if(C&&w){var I=C[E];b.push(w.async(I?"base64":"uint8array").then(function(t){try{var e;I&&(t=Q(G(t,z(l,I))));var n=et;x[v][n]=((e={})[E]=I,e),x[g][n]=t}catch(t){}}))}c.default.all(b).then(function(){if(!T||!T.length)return o("password wrong.");lt(T,(0,u.default)(x[g]).map(function(t){return"xap:"+t})),n({manifest:x,sheets:T,isOldVersion:!0})})}).catch(function(t){o(t)})})}function lt(t,e){function n(t,r,i){if(a=i,Array.isArray(a)||"[object Array]"===toString.call(a)||function(t){return"[object Object]"===toString.call(t)}(i))for(var o in i)n(i,o,i[o]);else"string"==typeof i&&(i.startsWith("xap:resources")||i.startsWith("xap:attachments"))&&(e.includes(i)||delete t[r]);var a}for(var r in t)n(t,r,t[r])}function ht(){return"xxxyxxxxxxxyxxxxxxxxxyxxxx".replace(/[xy]/g,function(t){var e=16*Math.random()|0;return("x"===t?e:3&e|8).toString(16)})}function dt(t,e){var n="<"+e+">"+t+"</"+e+">",r=(new d.DOMParser).parseFromString(n,"application/xml");return(new d.XMLSerializer).serializeToString(r)}function ft(t,e,n){return e in t.files||n in t.files}function pt(t,e,n){return t.file(e)||t.file(n)}function gt(t,e){if(0===t&&0===e)return 1/t==1/e;if(t===e)return!0;if(t instanceof Date&&e instanceof Date)return t.getTime()===e.getTime();if("number"==typeof t&&isNaN(t)&&"number"==typeof e&&isNaN(e))return!0;if("object"!==(void 0===t?"undefined":(0,o.default)(t))&&"object"!==(void 0===e?"undefined":(0,o.default)(e)))return t==e;if(void 0===t||null===t||void 0===e||null===e)return!1;if("[object Argument]"===Object.prototype.toString.call(t))return"[object Argument]"===Object.prototype.toString.call(e)&&gt(Array.prototype.slice(t),Array.prototype.slice(e));var n=(0,u.default)(t),r=(0,u.default)(e);if(!n.length==r.length)return!1;n.sort(),r.sort();for(var a=0;a<n.length;a++)if(n[a]!=r[a])return!1;var s=n,c=Array.isArray(s),l=0;for(s=c?s:(0,i.default)(s);;){var h;if(c){if(l>=s.length)break;h=s[l++]}else{if((l=s.next()).done)break;h=l.value}var d=h;if(!gt(t[d],e[d]))return!1}}e.fromXMind=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return t&&t.files?ft(t,M,B)?V(t,e):ft(t,$,it)?ct(t,e):c.default.reject("not a valid XMind file"):c.default.reject("not a valid XMind file")},e.toXMind=function(t){return U(t,arguments.length>1&&void 0!==arguments[1]?arguments[1]:{})},e.fromJSON=V,e.toJSON=U,e.fromXML=ct,e.toXML=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return new c.default(function(n,r){var i=e.zip||new l.default;(function(t){var e=t.workbook,n=t.zip,r=t.options,i=e,a=e.sheets,s=e.metadata||{},l=s.thumbanil,d=void 0===l?{x:53,y:44}:l,f=s.share,p=void 0===f?{privacy:"",lang:"en",url:""}:f;s.thumbnail=d,s.share=p;var g={};r&&r.password&&(g.password=r.password,r.passwordHint&&(g.passwordHint=r.passwordHint));var m="",y=Date.now(),_={},E={},A={},S=function(t){return ht()};function T(t){var e=void 0;return(0,u.default)(E).some(function(n){if(gt(t,E[n]))return e=n,!0}),e}var x='<?xml version="1.0" encoding="UTF-8" standalone="no"?><xmap-content xmlns="urn:xmind:xmap:xmlns:content:2.0" xmlns:fo="http://www.w3.org/1999/XSL/Format" xmlns:svg="http://www.w3.org/2000/svg" xmlns:xhtml="http://www.w3.org/1999/xhtml" xmlns:xlink="http://www.w3.org/1999/xlink" modified-by="'+m+'" timestamp="'+y+'" version="2.0">{{sheetsString}}</xmap-content>',b=a.reduce(function(t,e){return t+function(t){var e=S(t.id),n=t.theme,r=S();(0,u.default)(A).some(function(t){if(gt(n,A[t]))return r=t,!0}),A[r]=n;var o,a,s,c="";return i.sheets.some(function(e){if(e.id===t.id)return c=e.title,!0}),'<sheet id="'+e+'" theme="'+r+'">'+dt(c,"title")+function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:t.rootTopic,n=S(e.id),r=e.structureClass?'structure-class="'+e.structureClass+'"':"",i="";if(e.href){var o=e.href;/^xmind:/i.test(o)&&(o="xmind:#"+S(o.replace("xmind:#",""))),o.startsWith("xap:")&&(o=o.replace("resources/","attachments/")),i='xlink:href="'+o+'"'}var a=e.style,s="";if(a){var c=T(a)||S();a.type="topic",E[c]=a,s='style-id="'+c+'"'}var l,h,d,f='<topic id="'+n+'" modified-by="'+m+'" '+r+" "+i+" "+s+">"+dt(e.title,"title")+((d=e.position)?'<position svg:x="'+d.x+'" svg:y="'+d.y+'"/>':"")+((h=e.numbering)?'<numbering number-format="'+h.numberFormat+'"/>':"")+((l=e.image)?'<xhtml:img svg:height="'+l.height+'" svg:width="'+l.width+'" xhtml:src="'+(l.src.startsWith("xap:")?l.src.replace("resources/","attachments/"):l.src)+'"/>':"")+function(){var t=e.extensions;if(!t||!t.length)return"";var n="";return t.forEach(function(t){n+='<extension provider="'+t.provider+'">'+function(t){if(!t||!t.length)return"";var e="";return t.forEach(function(t){e+='<resource-ref resource-id="'+t+'" type="file-entry"/>'}),"<resource-refs>"+e+"</resource-refs>"}(t.resourceRefs)+function(t){if(!t||!t.length)return"";var e="";return t.forEach(function(t){e+="<"+t.name+">"+t.content+"</"+t.name+">"}),"<content>"+e+"</content>"}(t.content)+"</extension>"}),"<extensions>"+n+"</extensions>"}()+function(){var t=e.markers;if(!t||!t.length)return"";var n="";return t.forEach(function(t){n+='<marker-ref marker-id="'+t.markerId+'"/>'}),"<marker-refs>"+n+"</marker-refs>"}()+function(){var t=e.summaries;if(!t||!t.length)return"";var n="";return t.forEach(function(t){var e=S(t.id),r=S(t.topicId);n+='<summary id="'+e+'" modified-by="'+m+'" topic-id="'+r+'" range="'+t.range+'"/>'}),"<summaries>"+n+"</summaries>"}()+function(){var t=e.boundaries;if(!t||!t.length)return"";var n="";return t.forEach(function(t){S(t.id);var e=t.style;if(e){var r=T(e)||S();e.type="boundary",E[r]=e}n+=""+dt(t.title,"title")}),"<boundaries>"+n+"</boundaries>"}()+function(){var t=e.notes;if(!t)return"";var n="";return t.plain&&(n=""+dt(t.plain.content,"plain")),"<notes>"+n+"</notes>"}()+function(){var t=e.labels;if(!t||!t.length)return"";var n="";return t.forEach(function(t){n+=""+dt(t,"label")}),"<labels>"+n+"</labels>"}()+function(){return e.children&&(0,u.default)(e.children).length?"<children>"+n("attached")+n("detached")+n("summary")+n("callout")+"</children>":"";function n(n){var r=e.children[n];if(!r||!r.length)return"";var i="";return r.forEach(function(e){i+=function e(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:t.rootTopic,r=S(n.id),i=n.structureClass?'structure-class="'+n.structureClass+'"':"",o="";if(n.href){var a=n.href;/^xmind:/i.test(a)&&(a="xmind:#"+S(a.replace("xmind:#",""))),a.startsWith("xap:")&&(a=a.replace("resources/","attachments/")),o='xlink:href="'+a+'"'}var s=n.style,c="";if(s){var l=T(s)||S();s.type="topic",E[l]=s,c='style-id="'+l+'"'}var h,d,f,p='<topic id="'+r+'" modified-by="'+m+'" '+i+" "+o+" "+c+">"+dt(n.title,"title")+((f=n.position)?'<position svg:x="'+f.x+'" svg:y="'+f.y+'"/>':"")+((d=n.numbering)?'<numbering number-format="'+d.numberFormat+'"/>':"")+((h=n.image)?'<xhtml:img svg:height="'+h.height+'" svg:width="'+h.width+'" xhtml:src="'+(h.src.startsWith("xap:")?h.src.replace("resources/","attachments/"):h.src)+'"/>':"")+function(){var t=n.extensions;if(!t||!t.length)return"";var e="";return t.forEach(function(t){e+='<extension provider="'+t.provider+'">'+function(t){if(!t||!t.length)return"";var e="";return t.forEach(function(t){e+='<resource-ref resource-id="'+t+'" type="file-entry"/>'}),"<resource-refs>"+e+"</resource-refs>"}(t.resourceRefs)+function(t){if(!t||!t.length)return"";var e="";return t.forEach(function(t){e+="<"+t.name+">"+t.content+"</"+t.name+">"}),"<content>"+e+"</content>"}(t.content)+"</extension>"}),"<extensions>"+e+"</extensions>"}()+function(){var t=n.markers;if(!t||!t.length)return"";var e="";return t.forEach(function(t){e+='<marker-ref marker-id="'+t.markerId+'"/>'}),"<marker-refs>"+e+"</marker-refs>"}()+function(){var t=n.summaries;if(!t||!t.length)return"";var e="";return t.forEach(function(t){var n=S(t.id),r=S(t.topicId);e+='<summary id="'+n+'" modified-by="'+m+'" topic-id="'+r+'" range="'+t.range+'"/>'}),"<summaries>"+e+"</summaries>"}()+function(){var t=n.boundaries;if(!t||!t.length)return"";var e="";return t.forEach(function(t){S(t.id);var n=t.style;if(n){var r=T(n)||S();n.type="boundary",E[r]=n}e+=""+dt(t.title,"title")}),"<boundaries>"+e+"</boundaries>"}()+function(){var t=n.notes;if(!t)return"";var e="";return t.plain&&(e=""+dt(t.plain.content,"plain")),"<notes>"+e+"</notes>"}()+function(){var t=n.labels;if(!t||!t.length)return"";var e="";return t.forEach(function(t){e+=""+dt(t,"label")}),"<labels>"+e+"</labels>"}()+function(){return n.children&&(0,u.default)(n.children).length?"<children>"+t("attached")+t("detached")+t("summary")+t("callout")+"</children>":"";function t(t){var r=n.children[t];if(!r||!r.length)return"";var i="";return r.forEach(function(t){i+=e(t)}),'<topics type="'+t+'">'+i+"</topics>"}}()+"</topic>",g=n.comments;return g&&g.length&&(_[r]=g),p}(e)}),'<topics type="'+n+'">'+i+"</topics>"}}()+"</topic>",p=e.comments;return p&&p.length&&(_[n]=p),f}()+function(){var e=t.relationships();if(!e)return"";var n="";return e.forEach(function(t){var e=S(t.end1Id),r=S(t.end2Id),i=S(t.id),o=t.controlPoints,a=o&&o[0],s=o&&o[1];n+='<relationship end1="'+e+'" end2="'+r+'" id="'+i+'">'+dt(t.title,"title")+"<control-points>"+function(){if(!a&&!s)return"";var t="";return[a,s].forEach(function(e,n){e&&(t+='<control-point amount="'+e.amount+'" angle="'+e.angle+'" index="'+n+'">',e.x&&e.y&&(t+='<position svg:x="'+e.x+'" svg:y="'+e.y+'"/>'),t+="</control-point>")}),t}()+"</control-points></relationship>"}),"<relationships>"+n+"</relationships>"}()+((s=t.settings)?"<sheet-settings>"+function(){var t={"infoItems/infoItem":{childNodeName:"infoItem",parentNodeName:"infoItems"},"info-items/info-item":{childNodeName:"info-item",parentNodeName:"info-items"}},e="";if(["infoItems/infoItem","info-items/info-item"].forEach(function(n){if(s[n]){var r=t[n],i="";s[n].forEach(function(t){i+="<"+r.childNodeName+' mode="'+t.mode+'" type="'+t.type+'"/>'}),e+="<"+r.parentNodeName+">"+i+"</"+r.parentNodeName+">"}}),s["infoItems/infoItem"]&&!s["info-items/info-item"]){var n={label:"org.xmind.ui.infoItem.label",href:"org.xmind.ui.infoItem.hyperlink",note:"org.xmind.ui.infoItem.notes",audio:"org.xmind.ui.infoItem.AudioNotes",task:"org.xmind.ui.infoItem.taskInfo"},r="";s["infoItems/infoItem"].forEach(function(t){r+='<info-item mode="'+t.mode+'" type="'+n[t.type]+'"/>'}),e+="<info-items>"+r+"</info-items>"}return e}()+"</sheet-settings>":"")+((a=t.legend)?'<legend visibility="'+(a.visibility||!1)+'">'+((o=a.position)?'<position svg:x="'+o.x+'" svg:y="'+o.y+'"/>':"")+function(){var t=a.markers;if(!t)return"";var e="";return(0,u.default)(t).forEach(function(n){e+='<marker-description description="'+t[n].name+'" marker-id="'+n+'"/>'}),"<marker-descriptions>"+e+"</marker-descriptions>"}()+"</legend>":"")+"</sheet>"}(e)},"");x=x.replace("{{sheetsString}}",b);var w='<?xml version="1.0" encoding="UTF-8" standalone="no"?><comments xmlns="urn:xmind:xmap:xmlns:comments:2.0" version="2.0">{{commentsString}}</comments>',C="";(0,u.default)(_).forEach(function(t){_[t].forEach(function(e){C+=function(t,e){return'<comment author="'+t.author+'" time="'+t.creationTime+'" object-id="'+e+'">'+dt(t.content,"content")+"</comment>"}(e,t)})}),w=w.replace("{{commentsString}}",C);var I,L='<?xml version="1.0" encoding="UTF-8" standalone="no"?><xmap-styles xmlns="urn:xmind:xmap:xmlns:style:2.0" xmlns:fo="http://www.w3.org/1999/XSL/Format" xmlns:svg="http://www.w3.org/2000/svg" version="2.0">{{automaticStylesString}}{{masterStylesString}}{{userStylesString}}</xmap-styles>',N=function(){var t="<automatic-styles>{{allAutomaticStyle}}</automatic-styles>",e="<master-styles>{{allMasterStyle}}</master-styles>",n="",r="";return(0,u.default)(A).forEach(function(t){var e=A[t],i="";(0,u.default)(e).forEach(function(t){var n=e[t];if("object"===(void 0===n?"undefined":(0,o.default)(n))){var a=S(),s=n.type;s.endsWith("topic")&&(s="topic"),i+='<default-style style-family="'+t+'" style-id="'+a+'"/>';var c="";(0,u.default)(n.properties).forEach(function(t){c+=t+'="'+n.properties[t]+'" '}),c=c.trim(),r+='<style id="'+a+'" name="" type="'+s+'"><'+s+"-properties "+c+"/></style>"}}),n+='<style id="'+t+'" type="theme"><theme-properties>'+i+"</theme-properties></style>"}),t=t.replace("{{allAutomaticStyle}}",r),{masterStylesString:e=e.replace("{{allMasterStyle}}",n),automaticStylesString:t}}(),O=N.masterStylesString,R=N.automaticStylesString;L=L.replace("{{userStylesString}}",(I="",(0,u.default)(E).forEach(function(t){var e=E[t].type;e.endsWith("topic")&&(e="topic");var n=E[t].properties,r="";(0,u.default)(n).forEach(function(t){r+=t+'="'+n[t]+'" '}),I+='<style id="'+t+'" type="'+e+'"><'+e+"-properties "+r+"/></style>"}),I&&"<styles>"+I+"</styles>")).replace("{{automaticStylesString}}",R).replace("{{masterStylesString}}",O);var M='<?xml version="1.0" encoding="UTF-8" standalone="no"?>\n      <meta xmlns="urn:xmind:xmap:xmlns:meta:2.0" version="2.0">\n        <Author><Name></Name><Email/><Org/></Author>\n        <Create><Time></Time></Create>\n        <Creator><Name>XMind</Name><Version>R3.7.1.201612151837</Version></Creator><Description/>\n        <Thumbnail>\n          <X>0</X><Y>0</Y><Scale>0.5</Scale>\n          <Origin>\n            <X>'+parseInt(s.thumbnail.x)+"</X>\n            <Y>"+parseInt(s.thumbnail.y)+"</Y>\n          </Origin>\n          <BackgroundColor>#FFFFFF</BackgroundColor>\n        </Thumbnail>\n        <Share>\n          <Privacy>"+s.share.privacy+"</Privacy>\n          <Downloadable>1</Downloadable>\n          <LanguageChannel>"+s.share.lang+"</LanguageChannel>\n          <SourceUrl>"+s.share.url+"</SourceUrl>\n        </Share>\n      </meta>",D='<?xml version="1.0" encoding="UTF-8" standalone="no"?>'+(g&&g.passwordHint?'<manifest xmlns="urn:xmind:xmap:xmlns:manifest:1.0" password-hint="'+g.passwordHint+'">':'<manifest xmlns="urn:xmind:xmap:xmlns:manifest:1.0">')+"{{fileEntriesString}}</manifest>",P="",k=1024,B=128,F="AES/CBC/PKCS5Padding",V="PBKDF2WithHmacSHA512",U="MD5";function H(t){var e,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",i=arguments[2];if(g&&i){var o=h.default.enc.Base64.parse("").random(8),a=h.default.PBKDF2(g.password,o,{keySize:B/32,hasher:h.default.algo.SHA512,iterations:k}),s=h.default.enc.Base64.parse("").random(16);P+='<file-entry full-path="'+t+'" media-type="'+r+'">',P+='<encryption-data checksum="'+(e=i,h.default.MD5(e).toString(h.default.enc.Base64))+'" checksum-type="'+U+'"><algorithm algorithm-name="'+F+'"><algorithm-name/></algorithm><key-derivation iteration-count="'+k+'" iv="'+h.default.enc.Base64.stringify(s)+'" key-derivation-name="'+V+'" salt="'+h.default.enc.Base64.stringify(o)+'" size="'+B+'"><key-derivation-name/><salt/><iteration-count/><size/><iv/></key-derivation><checksum-type/><checksum/></encryption-data>',P+="</file-entry>",n.file(t,W(h.default.AES.encrypt(i,a,{iv:s}).ciphertext.words))}else P+='<file-entry full-path="'+t+'" media-type="'+r+'" />',i&&n.file(t,i)}for(var Y in H.XML_TYPE="text/xml",H($,H.XML_TYPE,x),H(nt,H.XML_TYPE,M),H(Z,H.XML_TYPE,w),H(J,H.XML_TYPE,L),H(et,"image/png"),e.manifest[v]){var G=e.manifest.resources[Y];if(G){var j=h.default.lib.WordArray.create(K(G));H(Y.replace("resources/","attachments/"),"",g?j:G)}}return H(X,H.XML_TYPE),D=D.replace("{{fileEntriesString}}",P),n.file(X,D),new c.default(function(t,e){t(n)})})({workbook:t,zip:i,options:e}).then(function(t){return n(t)}).catch(function(t){return r("Fail to  generate xmind file",t)})})},e.encryptContent=function(t,e){var n=Y(e);return{encryptedContent:Q(H(t,n).ciphertext),encryptData:j(n)}},e.decryptContent=function(t,e,n){return G(t,z(e,n)).toString(h.default.enc.Utf8)},e.uint8ArrayToWordArray=q,e.wordToUint8Array=Q,e.base64ToUint8Array=function(t){return Q(h.default.enc.Base64.parse(t))},e.byteArrayToBase64String=function(t){var e=h.default.lib.WordArray.create(K(t));return h.default.enc.Base64.stringify(e)},e.isFileEncrypted=function(t){return new c.default(function(e,n){if(ft(t,M,B)){var r=pt(t,O,P);if(!r)return n("not a valid XMind File");r.async("string").then(function(t){var n=JSON.parse(t),r=n[_];for(var i in n[v])if(n[v][i][E])return e({passwordHint:r,encrypted:!0});return e(!1)})}else if(ft(t,$,it)){var i=pt(t,X,rt);if(!i)return n("not a valid XMind File");i.async("string").then(function(t){var n=(new d.DOMParser).parseFromString(t,"application/xml");n&&n.getElementsByTagName("manifest")&&n.getElementsByTagName("manifest").length||e(!1);var r=n.getElementsByTagName("manifest")[0].getAttribute(_);return(0,a.default)(n.getElementsByTagName(m)).forEach(function(t){if(t.getElementsByTagName(E)&&t.getElementsByTagName(E).length)return e({passwordHint:r,encrypted:!0})}),e(!1)})}else n("not a valid XMind File")})},e.deepEqual=gt},function(t,e,n){"use strict";var r=n(0).ACTION_STATUS,i={statusRelatedEvent:"",tryExecute:function(){for(var t=arguments.length,e=Array(t),n=0;n<t;n++)e[n]=arguments[n];this.isStatusNormal.apply(this,e)&&this.doExecute.apply(this,e)},doExecute:function(){throw new Error("must implement doExecute")},queryStatus:function(){return r.NORMAL},isStatusNormal:function(){return this.queryStatus.apply(this,arguments)===r.NORMAL}};t.exports=i},function(t,e,n){"use strict";(function(e){var r=l(n(17)),i=l(n(32)),o=l(n(11)),a=l(n(35)),s=l(n(3)),u=n(319),c=l(n(4));function l(t){return t&&t.__esModule?t:{default:t}}var h=n(130),d=n(5),f=n(33),p=f.inArray,g=(f.isBase64Url,n(66)),v=n(1),m=n(0),y=m.ACTION_STATUS,_=m.DIRECTION,E=m.EVENTS,A=m.TOPIC_TYPE,S=m.TOPICSHAPE,T=m.MODULE_NAME,x=m.VIEW_TYPE,b=m.STRUCTURECLASS,w=m.CONFIG,C=m.CLASS_TYPE,I=m.UI_STATUS,L=m.STYLE_KEYS,N=m.TOPIC_MAX_CUSTOM_WIDTH,O=n(326),R=n(478),M=new O,D=function(t){return t.type===x.BRANCH},P=function(t){return!D(t)||c.default.getClassName(t)!==C.CALLOUT_TOPIC},k=function(t){return!D(t)||c.default.getClassName(t)!==C.SUMMARY_TOPIC},B=function(t){return!D(t)||!t.isCentralBranch()},F=function(t){return D(t)&&t.model.canCollapse()&&!t.model.isCollapse()},V=function(t){return D(t)&&t.model.isCollapse()};function U(t){var e={masterArr:[],rangeMap:{}},n={},r=[];for(var i in t.forEach(function(t){t.type!==x.BRANCH||t.isCentralBranch()||(n[t.model.get("id")]=t)}),n){for(var o=n[i],a=o.parent();!a.isCentralBranch();){if(n[a.model.get("id")]){delete n[i];break}a=a.parent()}a.isCentralBranch()&&r.push(o)}return r=r.filter(function(t){return!(t.isDetachedBranch()||t.isSummaryBranch()||t.isCalloutBranch())||(e.masterArr.push(t),!1)}),e.rangeMap=function(t){var e,n,r=[],i=function(t){var e={};return v.each(t,function(t){var n=t.parent();e[n.cid]||(e[n.cid]={},e[n.cid].children=[],e[n.cid].parent=n),e[n.cid].children.push(t)}),v.each(e,function(t){v.each(t,function(t,e){var n,r;"children"===e&&(r=(n=t)[0].parent().getChildrenBranchesByType(),n.sort(function(t,e){return r.indexOf(t)-r.indexOf(e)}))})}),e}(t);return v.each(i,function(t){e=t.parent,n=t.children,v.each(n,function(t){var n=e.getChildrenBranchesByType().indexOf(t);r.push(n)}),t.range=function(t){var e=t.length,n={start:0,end:0,count:1},r=[],i=1,o=1;for(n.start=t[0];i<=e;i++)t[i]-t[i-1]==1?n.count++:(n.end=n.start+n.count-1,r.push(v.extend({},n)),n.start=t[o],n.count=1),o++;return r}(r),r=[]}),i}(r),e}function H(t,e){var n={},i=t,o=Array.isArray(i),a=0;for(i=o?i:(0,r.default)(i);;){var s;if(o){if(a>=i.length)break;s=i[a++]}else{if((a=i.next()).done)break;s=a.value}var u=s;n[u]=e[u]}return n}t.exports=function(t){var n=h(t),r=n.extendAction,l=n.some,f=n.every,m=n.hasTargetView,C=n.hasTargetViewInObject,O=n.branchViewSelected,G=n.selectionExisting,j=n.firstSelectionIs,z=n.onlyOneSelection,W=n.notInUIStatus,K=n.everySelectionIs,Q=n.divideQuery,q=n.alignQuery;function X(e,n,r){var i=t.getModule(T.SELECTION).selections;(r?i.filter(function(t){if(r(t))return!0}):i).forEach(function(t,r){t.model.changeStyle(e,n)})}function $(e){var n=t.getModule(T.SELECTION).selections;if(void 0===e)return n;if("string"==typeof e)return n.filter(function(t){return t.type===e});if(Array.isArray(e))return n.filter(function(t){return-1!==e.indexOf(t.type)});throw Error("Bad arguments")}function J(e,n){t.getModule(T.SELECTION).selections.forEach(function(t){t.summaryModel&&t.summaryModel.changeStyle(e,n)})}var Z=(0,s.default)({},t.config(w.PRE_ACTIONS)),tt={openUndoKeepMode:{doExecute:function(){t.model.getUndo().openKeepMode()}},closeUndoKeepMode:{doExecute:function(){t.model.getUndo().closeKeepMode()}},Undo:{statusRelatedEvent:E.UNDO_STATE_CHANGE,doExecute:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],n=t.model.getUndo();n.undo(),e&&n.clearRedo()},queryStatus:f(function(){return t.model.getUndo().isReadyUndo()?y.NORMAL:y.DISABLE},W(I.DRAG))},Redo:{statusRelatedEvent:E.UNDO_STATE_CHANGE,doExecute:function(){t.model.getUndo().redo()},queryStatus:f(function(){return t.model.getUndo().isReadyRedo()?y.NORMAL:y.DISABLE},W(I.DRAG))},addBoundary:{statusRelatedEvent:E.SELECTION_CHANGED,doExecute:function(){var e=t.getModule(T.SELECTION).selections,n=e.length;if(n)if(1===n&&e[0].type===x.BRANCH){var r=e[0];if(r.isCentralBranch())return;var i=r.model,o=c.default.getClassName(r);if(["summaryTopic","calloutTopic","floatingTopic"].includes(o))i.addBoundary(l("master"));else{var a=r.parent(),s=a.getChildrenBranchesByType().indexOf(r);if(s<0)return;a.model.addBoundary(l("("+s+","+s+")"))}}else{var u=U(e);u.masterArr.forEach(function(t){t.model.addBoundary(l("master"))}),v.each(u.rangeMap,function(t){var e=t.parent,n=t.range;v.each(n,function(t){e.model.addBoundary(l("("+t.start+","+t.end+")"))})})}function l(t){return{id:e[0].model.ownerSheet().generateComponentId(),title:"",range:t}}},queryStatus:G(function(t){return t.type===x.BRANCH&&t.model.type()===A.ATTACHED})},addRelationship:{statusRelatedEvent:E.SELECTION_CHANGED,doExecute:function(){t.getModule(T.ADD_RELATIONSHIP).start()},queryStatus:function(){if(!t.getModule(T.ADD_RELATIONSHIP).isReady())return y.DISABLE;var e=t.getModule(T.SELECTION).selections;return e.length<=2&&e.length>=0&&e.every(function(t){return t.type===x.BRANCH||t.type===x.BOUNDARY})?y.NORMAL:y.DISABLE}},cancelAddRelationship:{doExecute:function(){t.getModule(T.ADD_RELATIONSHIP).cancel()},queryStatus:function(){return t.getModule(T.ADD_RELATIONSHIP).isReady()?y.DISABLE:y.NORMAL}},addSummary:{statusRelatedEvent:E.SELECTION_CHANGED,doExecute:function(){var e=t.getModule(T.SELECTION).selections,n=e.length;if(0!==n){var r=e[0].model.ownerSheet();if(1===n&&e[0].type===x.BRANCH){var i=e[0];if(i.isCentralBranch())return;var o=i.parent(),a=o.getChildrenBranchesByType().indexOf(i);if(a<0)return;var s=h("("+a+","+a+")"),u=s.summaryData,c=s.summaryTopic;o.model.addSummary(u,!1,c)}else{var l=U(e).rangeMap;v.each(l,function(t){var e=t.parent,n=t.range;v.each(n,function(t){var n=h("("+t.start+","+t.end+")"),r=n.summaryData,i=n.summaryTopic;e.model.addSummary(r,null,i)})})}}function h(e){var n=r.createComponent("topic",{title:t.getTranslatedText("DEFAULT_SUMMARY_TOPIC_TITLE")});return{summaryData:{id:r.generateComponentId(),range:e,topicId:n.get("id")},summaryTopic:n}}},queryStatus:G(function(t){return t.type===x.BRANCH&&t.model.type()===A.ATTACHED})},changeImage:{statusRelatedEvent:E.SELECTION_CHANGED,doExecute:function(e,n){n||(n=t.getModule(T.SELECTION).selections[0]);var r=void 0,i=void 0,o=void 0;"string"==typeof e&&(r=e),"object"===(void 0===e?"undefined":(0,a.default)(e))&&(r=e.src,i=e.width,o=e.height);var s={src:r};i&&(s.width=i),o&&(s.height=o),n.model.addImage(s)},queryStatus:l(m(D),j(D))},changeSticker:{statusRelatedEvent:E.SELECTION_CHANGED,doExecute:function(e,n){n||(n=t.getModule(T.SELECTION).selections[0]);var r=void 0,i=void 0,o=void 0;"string"==typeof e&&(r=e),"object"===(void 0===e?"undefined":(0,a.default)(e))&&(r=e.src,i=e.width,o=e.height);var s={src:r};i&&(s.width=i),o&&(s.height=o),n.model.addImage(s)},queryStatus:l(m(D),j(D))},resetImage:{statusRelatedEvent:E.SELECTION_CHANGED,doExecute:function(){t.getModule(T.SELECTION).selections.forEach(function(t){var e=t.type===x.BRANCH?t.model:t.parent().model,n=e.get("image");n&&n.src&&e.resizeImage({width:void 0,height:void 0})})},queryStatus:K(function(t){return t.type===x.BRANCH||t.type===x.IMAGE})},changeStructure:{statusRelatedEvent:E.SELECTION_CHANGED,doExecute:function(e){t.getModule(T.SELECTION).selections.filter(function(t){return t.type===x.BRANCH}).forEach(function(t){return t.model.changeStructure(e)})},queryStatus:G(function(t){return t.type===x.BRANCH})},changeComponentPreInstallStyle:{statusRelatedEvent:E.SELECTION_CHANGED,doExecute:function(e){t.getModule(T.SELECTION).selections.forEach(function(t){(0,o.default)(e).forEach(function(n){t.model.changeStyle(n,e[n])})})},queryStatus:G()},changeTopicPreInstallStyle:{statusRelatedEvent:E.SELECTION_CHANGED,doExecute:function(t){tt.changeComponentPreInstallStyle.doExecute(t)},queryStatus:G()},changeBoundaryPreInstallStyle:{statusRelatedEvent:E.SELECTION_CHANGED,doExecute:function(t){tt.changeComponentPreInstallStyle.doExecute(t)},queryStatus:G()},changeRelationshipPreInstallStyle:{statusRelatedEvent:E.SELECTION_CHANGED,doExecute:function(t){tt.changeComponentPreInstallStyle.doExecute(t)},queryStatus:G()},changeShapeClass:{statusRelatedEvent:E.SELECTION_CHANGED,doExecute:function(t){-1!==t.indexOf("calloutTopicShape")?X(L.CALLOUT_SHAPE_CLASS,t,function(t){return t.type===x.BRANCH&&t.isCalloutBranch()}):X(L.SHAPE_CLASS,t,function(t){return t.type===x.BRANCH||t.type===x.BOUNDARY||t.type===x.RELATIONSHIP})},queryStatus:G(function(t){return t.type===x.BRANCH||t.type===x.BOUNDARY||t.type===x.RELATIONSHIP})},changeBranchLineStyle:{statusRelatedEvent:E.SELECTION_CHANGED,doExecute:function(t){X(L.LINE_CLASS,t,function(t){return t.type===x.BRANCH})},queryStatus:G(function(t){return t.type===x.BRANCH})},changeSummaryLineStyle:{statusRelatedEvent:E.SELECTION_CHANGED,doExecute:function(t){J(L.SHAPE_CLASS,t)},queryStatus:G(function(t){return t.summaryModel})},changeBorderWidth:{statusRelatedEvent:E.SELECTION_CHANGED,doExecute:function(t){X(L.BORDER_LINE_WIDTH,t)},queryStatus:G()},changeLineWidth:{statusRelatedEvent:E.SELECTION_CHANGED,doExecute:function(t){X(L.LINE_WIDTH,t)},queryStatus:G()},changeSummaryLineWidth:{statusRelatedEvent:E.SELECTION_CHANGED,doExecute:function(t){J(L.LINE_WIDTH,t)},queryStatus:G(function(t){return t.summaryModel})},changeFontSize:{statusRelatedEvent:E.SELECTION_CHANGED,doExecute:function(t){X(L.FONT_SIZE,t)},queryStatus:G()},changeFontFamily:{statusRelatedEvent:E.SELECTION_CHANGED,doExecute:function(t){X(L.FONT_FAMILY,t)},queryStatus:G()},changeFontWeight:{statusRelatedEvent:E.SELECTION_CHANGED,doExecute:function(t){X(L.FONT_WEIGHT,t)},queryStatus:G()},changeFontStyle:{statusRelatedEvent:E.SELECTION_CHANGED,doExecute:function(t){X(L.FONT_STYLE,t)},queryStatus:G()},changeTextDecoration:{statusRelatedEvent:E.SELECTION_CHANGED,doExecute:function(t){X(L.TEXT_DECORATION,t)},queryStatus:G()},changeTextAlign:{statusRelatedEvent:E.SELECTION_CHANGED,doExecute:function(t){X(L.TEXT_ALIGN,t)},queryStatus:G()},changeTextTransform:{statusRelatedEvent:E.SELECTION_CHANGED,doExecute:function(t){X(L.TEXT_TRANSFORM,t)},queryStatus:G()},changeHyperlink:{statusRelatedEvent:E.SELECTION_CHANGED,doExecute:function(e){var n=t.getModule(T.SELECTION).selections[0];n&&n.type===x.BRANCH&&n.model.changeHref(e)},queryStatus:j(function(t){return t.type===x.BRANCH})},insertHrefOnNewTopic:{statusRelatedEvent:E.SELECTION_CHANGED,doExecute:function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",r=t.getModule(T.SELECTION).getSelections()[0];if(r&&r.type===x.BRANCH){var i=r.model;i.addChildTopic(i.createEmptyTopic({href:e,title:n}))}},queryStatus:l(m(D,P),j(D,P))},insertAudioNotesOnNewTopic:{statusRelatedEvent:E.SELECTION_CHANGED,doExecute:function(e,n,r){r||(r=t.getModule(T.SELECTION).getSelections()[0]);var i=r.model;n||(n=t.getTranslatedText("RECORD_TITLE_PREFIX")+" "+R(new Date,"dd/mm/yy hh:MM TT"));var o=i.createEmptyTopic({title:n});o.addAudioNotes(e),i.addChildTopic(o)},queryStatus:l(m(D,P),j(D,P))},insertAudioNotes:{statusRelatedEvent:E.SELECTION_CHANGED,doExecute:function(e,n){n||(n=t.getModule(T.SELECTION).getSelections()[0]),n.model.addAudioNotes(e)},queryStatus:l(m(D,P),j(D,P))},removeAudioNotes:{doExecute:function(){t.getModule(T.SELECTION).getSelections()[0].model.removeAudioNotes()},queryStatus:l(m(D),j(D))},changeNote:{statusRelatedEvent:E.SELECTION_CHANGED,doExecute:function(e,n){n&&n.type===x.BRANCH||(n=t.getModule(T.SELECTION).selections[0]),n&&n.type===x.BRANCH&&n.model.changeNote(e)},queryStatus:l(m(),O)},changeLabel:{statusRelatedEvent:E.SELECTION_CHANGED,doExecute:function(e){t.getModule(T.SELECTION).selections.filter(function(t){return t.type===x.BRANCH}).forEach(function(t){return t.model.changeLabel(e)})},queryStatus:j(function(t){return t.type===x.BRANCH})},changeColor:{doExecute:function(e,n,r){var i;if(r&&(i=r),!i){var o=t.getModule(T.SELECTION).selections;o.length&&(i=o.map(function(t){var e=t.type;if(e===x.BRANCH||e===x.BOUNDARY||e===x.RELATIONSHIP)return t}))}i?i.forEach(function(t){var r,i;"summaryLineColor"===e?(r="summaryModel",i=L.LINE_COLOR):(r="model",i=e),t[r].changeStyle(i,n),"model"===r&&i===L.FILL_COLOR&&t.model.changeStyle(L.FILL_GRADIENT,void 0),"model"===r&&i===L.BORDER_LINE_COLOR&&t.model.changeStyle(L.BORDER_GRADIENT,void 0)}):t.getSVGView().content().model.changeStyle(e,n)}},changeFillGradient:{doExecute:function(e){t.getModule(T.SELECTION).selections.forEach(function(t){t.type===x.BRANCH&&t.model.changeStyle(L.FILL_GRADIENT,e)})}},changeBorderGradient:{doExecute:function(e){t.getModule(T.SELECTION).selections.forEach(function(t){t.type===x.BRANCH&&t.model.changeStyle(L.BORDER_GRADIENT,e)})}},setStyleObject:{doExecute:function(t,e){arguments.length<2&&(t=void 0,e=arguments[0]||null),t?t.model.setStyleObj(e):$([x.BRANCH,x.BOUNDARY,x.RELATIONSHIP]).forEach(function(t){t.model.setStyleObj(e)})}},setSummaryStyleObject:{doExecute:function(t,e){arguments.length<2&&(t=void 0,e=arguments[0]||null),t&&t.summaryModel?t.summaryModel.setStyleObj(e):$([x.BRANCH]).forEach(function(t){t&&t.summaryModel&&t.summaryModel.setStyleObj(e)})}},resetPosition:{doExecute:function(t){t?t.model.type()===A.ATTACHED&&t.model.clearPosition():$(x.BRANCH).forEach(function(t){t.model.type()===A.ATTACHED&&t.model.clearPosition()})},queryStatus:l(m(function(t){return t.type===x.BRANCH&&t.model.type()===A.ATTACHED&&t.model.get("position")}),f(K(function(t){return t.type===x.BRANCH&&t.model.type()===A.ATTACHED}),G(function(t){return t.model.get("position")})))},fitMap:{doExecute:function(){t.getSVGView().getCanvasControl().fitMap()}},changeSummaryLineColor:{statusRelatedEvent:E.SELECTION_CHANGED,doExecute:function(t){J(L.LINE_COLOR,t)},queryStatus:G(function(t){return t.summaryModel})},changeShapeColor:{statusRelatedEvent:E.SELECTION_CHANGED,doExecute:function(t){tt.changeColor.doExecute(L.FILL_COLOR,t)},queryStatus:G()},changeLineColor:{statusRelatedEvent:E.SELECTION_CHANGED,doExecute:function(t){tt.changeColor.doExecute(L.LINE_COLOR,t)},queryStatus:G()},changeBorderColor:{statusRelatedEvent:E.SELECTION_CHANGED,doExecute:function(t){tt.changeColor.doExecute(L.BORDER_LINE_COLOR,t)},queryStatus:G()},changeTextColor:{statusRelatedEvent:E.SELECTION_CHANGED,doExecute:function(t){tt.changeColor.doExecute(L.TEXT_COLOR,t)},queryStatus:G()},addClass:{doExecute:function(e){var n=t.getModule(T.SELECTION).selections;n&&n.forEach(function(t){t&&t.model.addClass(e)})}},removeClass:{doExecute:function(e){var n=t.getModule(T.SELECTION).selections;n&&n.forEach(function(t){t&&t.model.removeClass(e)})}},updateClassIntoTheme:{doExecute:function(e,n,r){c.default.updateClassIntoTheme(t.getSheetView(),e,n,r);var i=t.getModule(T.SELECTION).selections;i&&i.forEach(function(t){t&&t.model.setStyleObj(null)})}},changeTheme:{doExecute:function(e){c.default.changeTheme(t.getSheetView(),e)}},changeMultiLineColors:{doExecute:function(e){t.getSVGView().content().model.changeStyle(L.MULTI_LINE_COLORS,e)}},changeLineTapered:{doExecute:function(e){t.getSVGView().content().model.changeStyle(L.LINE_TAPERED,e)}},changeColorGradient:{doExecute:function(e){t.getSVGView().content().model.changeStyle(L.GRADIENT_COLOR,e)}},changeLegendDisplay:{doExecute:function(e){var n=t.getSVGView().content(),r=n.model;r.get("legend")||r.set("legend",{}),n.initLegend(),r.getLegendModel().setLegendDisplay(e)}},changeInfoItemDisplay:{doExecute:function(){for(var e=arguments.length,n=Array(e),r=0;r<e;r++)n[r]=arguments[r];var i=t.getSheetView().model;1===n.length?[x.LABEL,x.HREF,x.NOTE,x.TASK].forEach(function(t){return i.changeInfoItemDisplay(t,n[0])}):2===n.length&&i.changeInfoItemDisplay(n[0],n[1])}},changeSheetBackground:{doExecute:function(t,e){e&&!Array.isArray(e)&&(e=[e]),tt.changeColor.doExecute(L.FILL_COLOR,t,e)}},changeBoundaryBackgroundColor:{doExecute:function(t){tt.changeColor.doExecute(L.FILL_COLOR,t)}},changeBoundaryOpacity:{statusRelatedEvent:E.SELECTION_CHANGED,doExecute:function(e){t.getModule(T.SELECTION).selections[0].model.changeStyle(L.OPACITY,e)},queryStatus:j(function(t){return t.type===x.BOUNDARY})},changeMapOpacity:{doExecute:function(e){t.getSheetView().model.changeStyle(L.OPACITY,e)}},changeLinePattern:{statusRelatedEvent:E.SELECTION_CHANGED,doExecute:function(t){X(L.LINE_PATTERN,t,function(t){return t.type===x.BOUNDARY||t.type===x.RELATIONSHIP})},queryStatus:G(function(t){return t.type===x.BOUNDARY||t.type===x.RELATIONSHIP})},changeBoundaryLinePattern:{statusRelatedEvent:E.SELECTION_CHANGED,doExecute:function(t){tt.changeLinePattern.doExecute(t)},queryStatus:G(function(t){return t.type===x.BOUNDARY})},changeBoundaryLineColor:{statusRelatedEvent:E.SELECTION_CHANGED,doExecute:function(t){tt.changeColor.doExecute(L.LINE_COLOR,t)},queryStatus:G(function(t){return t.type===x.BOUNDARY})},changeRelationshipLineColor:{statusRelatedEvent:E.SELECTION_CHANGED,doExecute:function(t){tt.changeColor.doExecute(L.LINE_COLOR,t)},queryStatus:G(function(t){return t.type===x.RELATIONSHIP})},changeStartArrowType:{statusRelatedEvent:E.SELECTION_CHANGED,doExecute:function(t){X(L.ARROW_BEGIN_CLASS,t,function(t){return t.type===x.RELATIONSHIP})},queryStatus:G(function(t){return t.type===x.RELATIONSHIP})},changeEndArrowType:{statusRelatedEvent:E.SELECTION_CHANGED,doExecute:function(t){X(L.ARROW_END_CLASS,t,function(t){return t.type===x.RELATIONSHIP})},queryStatus:G(function(t){return t.type===x.RELATIONSHIP})},addSubTopic:{statusRelatedEvent:E.SELECTION_CHANGED,doExecute:function(e,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(e||(e=t.getModule(T.SELECTION).selections[0]),e&&D(e)&&P(e)){var i=e.model;n?i.addChildTopic(n,r):i.addChildTopic(i.createEmptyTopic({title:e.getChildDefaultTitle()}),r)}},queryStatus:l(m(D,P),j(D,P))},addSubTopic2:{statusRelatedEvent:E.SELECTION_CHANGED,doExecute:function(e){var n=e.topicData,r=e.options,i=void 0===r?{}:r,o=e.targetView;if(o||(o=t.getModule(T.SELECTION).selections[0]),o&&D(o)&&P(o)){var a=o.model;n?a.addChildTopic(a.createTopic(n),i):a.addChildTopic(a.createEmptyTopic({title:o.getChildDefaultTitle()}),i)}},queryStatus:l(C(D,P),j(D,P))},addFloatingTopic:{doExecute:function(e){e&&e.x&&e.y&&t.getSVGView().createFloatingTopic(e)}},addTopicAfter:{statusRelatedEvent:E.SELECTION_CHANGED,doExecute:function(e){if(e||(e=t.getModule(T.SELECTION).selections[0]),e.isCentralBranch())t.execAction("addSubTopic",e);else if(e&&e.type===x.BRANCH){var n=e.model.addBrotherTopic(null,{before:!1,position:e.getRealPosition(),title:e.getBrotherDefaultTitle()}),r=e.parent(),i=r.getStructureClass&&r.getStructureClass();if(i===b.SPREADSHEETROW||i===b.SPREADSHEETCOLUMN){var o=e.model.getLabel();n.changeLabel(o)}}},queryStatus:l(m(D,P,k),z(D,P,k))},addTopicAfter2:{statusRelatedEvent:E.SELECTION_CHANGED,doExecute:function(e){var n=e.topicData,r=e.targetView;if(r||(r=t.getModule(T.SELECTION).selections[0]),r.isCentralBranch())t.execAction("addSubTopic2",{topicData:n,targetView:r});else if(r&&r.type===x.BRANCH){var i=r.model.addBrotherTopic(n,{before:!1,position:r.getRealPosition(),title:r.getBrotherDefaultTitle()}),o=r.parent(),a=o.getStructureClass&&o.getStructureClass();if(a===b.SPREADSHEETROW||a===b.SPREADSHEETCOLUMN){var s=r.model.getLabel();i.changeLabel(s)}}},queryStatus:l(C(D,P,k),z(D,P,k))},addTopicBefore:{statusRelatedEvent:E.SELECTION_CHANGED,doExecute:function(e){if(e||(e=t.getModule(T.SELECTION).selections[0]),e.isCentralBranch())t.execAction("addSubTopic",e);else if(e&&e.type===x.BRANCH){var n=e.model.addBrotherTopic(null,{before:!0,position:e.getRealPosition(),title:e.getBrotherDefaultTitle()}),r=e.parent(),i=r.getStructureClass&&r.getStructureClass();if(i===b.SPREADSHEETROW||i===b.SPREADSHEETCOLUMN){var o=e.model.getLabel();n.changeLabel(o)}}},queryStatus:l(m(D,P,k),z(D,P,k))},addTopicBefore2:{statusRelatedEvent:E.SELECTION_CHANGED,doExecute:function(e){var n=e.topicData,r=e.targetView;if(r||(r=t.getModule(T.SELECTION).selections[0]),r.isCentralBranch())t.execAction("addSubTopic2",{topicData:n,targetView:r});else if(r&&r.type===x.BRANCH){var i=r.model.addBrotherTopic(n,{before:!0,position:r.getRealPosition(),title:r.getBrotherDefaultTitle()}),o=r.parent(),a=o.getStructureClass&&o.getStructureClass();if(a===b.SPREADSHEETROW||a===b.SPREADSHEETCOLUMN){var s=r.model.getLabel();i.changeLabel(s)}}},queryStatus:l(C(D,P,k),z(D,P,k))},addParentTopic:{statusRelatedEvent:E.SELECTION_CHANGED,doExecute:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:t.getModule(T.SELECTION).selections.slice();e=e.filter(function(t){return t.type===x.BRANCH});var n=d.findCommonParent(e),r=n.subBranches[0].model.type();!function(t,e,n){var r=t.model,i=e[0].branchIndex(),o=e.map(function(t){return t.model}),a=t.getContext().getModule(T.SELECTION);a.disable(),o.forEach(function(t){return t.removeSelf()}),a.enable();var s=r.createEmptyTopic({title:t.getChildDefaultTitle()});n===A.ATTACHED?r.addChildTopic(s,{at:i,noAnimation:!0}):(s.set("position",v.extend({},e[0].model.get("position"))),r.addChildTopic(s,{type:n,noAnimation:!0})),o.forEach(function(t){s.addChildTopic(t,{noAnimation:!0})})}(n.parent,n.subBranches,r)},queryStatus:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:t.getModule(T.SELECTION).selections.slice();e=e.filter(function(t){return t.type===x.BRANCH}).filter(function(t){return t.model.type()!==A.CALLOUT});var n=d.findCommonParent(e);if(n){var r=n.subBranches[0].model.type();return r!==A.SUMMARY&&n.subBranches.every(function(t){return t.model.type()===r})?y.NORMAL:y.DISABLE}return y.DISABLE}},addCalloutTopic:{statusRelatedEvent:E.SELECTION_CHANGED,doExecute:function(){var e=t.getModule(T.SELECTION).selections.slice();e.filter(function(t){return t.type===x.BRANCH});var n=e[0].model,r=n.ownerSheet().createComponent("topic",{title:t.getTranslatedText("DEFAULT_CALLOUT_TOPIC_TITLE")});n.addChildTopic(r,{type:A.CALLOUT})},queryStatus:j(D,B,P,function(t){return 0===t.getChildrenBranchesByType(A.CALLOUT).length})},addCalloutTopic2:{statusRelatedEvent:E.SELECTION_CHANGED,doExecute:function(e){var n=e.topicData,r=e.targetView;r||(r=$(x.BRANCH)[0]);var i=r.model,o=n?i.createTopic(n):i.ownerSheet().createComponent("topic",{title:t.getTranslatedText("DEFAULT_CALLOUT_TOPIC_TITLE")});i.addChildTopic(o,{type:A.CALLOUT})},queryStatus:l(C(D,B,P,function(t){return 0===t.getChildrenBranchesByType(A.CALLOUT).length}),j(D,B,P,function(t){return 0===t.getChildrenBranchesByType(A.CALLOUT).length}))},focusCenter:{doExecute:function(e){var n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],r=0,i=0;if(e&&e.getRealPosition){var o=e.getRealPosition();r=o.x,i=o.y}t.getSVGView().getCanvasControl().moveRealPositionToScrollContainerCenter({x:r,y:i},n)}},zoom:{doExecute:function(e,n){t.getSVGView().setScale(e,n)}},resizeEditor:{doExecute:function(){t.isVanaPlatform()&&t.getSVGView().getCanvasControl().resetScrollContainerArea()}},duplicateTopic:{statusRelatedEvent:E.SELECTION_CHANGED,doExecute:function(){var e=t.getModule(T.SELECTION).selections[0],n=e.model.type();if(e.type===x.BRANCH&&!e.isCentralBranch()&&"summary"!==n){var r=e.branchIndex(),o=JSON.parse((0,i.default)(e.model.toJSON()));d.replaceId(o,function(){return e.model.ownerSheet().generateComponentId()}),"detached"===n&&(o.position.y+=e.topicView.bounds.height+20),e.model.parent().addChildTopic(g(o,e.model.ownerSheet()),{at:r+1,type:e.model.type(),sourceIndex:r})}},queryStatus:j(function(t){return t.type===x.BRANCH&&!t.isCentralBranch()&&!t.isSummaryBranch()})},copy:{statusRelatedEvent:E.SELECTION_CHANGED,doExecute:function(){t.getModule(T.COPY_PASTE).copy()},queryStatus:G(function(t){return t.type!==x.MATRIXLABEL})},paste:{statusRelatedEvent:E.SELECTION_CHANGED,doExecute:function(){t.getModule(T.COPY_PASTE).paste()},queryStatus:G(function(t){return t.type===x.BRANCH})},cut:{statusRelatedEvent:E.SELECTION_CHANGED,doExecute:function(){t.getModule(T.COPY_PASTE).copy()&&t.execAction("deleteItem")},queryStatus:f(function(){return t.queryActionStatus("copy")},function(){return t.queryActionStatus("deleteItem")})},deleteItem:{statusRelatedEvent:E.SELECTION_CHANGED,doExecute:function(e){(function(t){var e=t.slice();e.some(function(t,n){if(t.model&&t.model.type&&t.isCentralBranch&&t.isCentralBranch())return e.splice(n,1),!0});var n=e.slice();return e.forEach(function(t){for(var i=t.parent();i&&!r(i);){var o=e.indexOf(i),a=n.indexOf(t);if(-1!==o){n.splice(a,1);break}i=i.parent()}}),n;function r(t){return t&&t.type===x.BRANCH&&t.isCentralBranch()}})(e?[e]:t.getModule(T.SELECTION).selections.slice()).forEach(function(t){!function(t){if(!t.parent())return!1;var e=t.model;e&&"image"===e.type&&(e=null);var n=t.parent().model;e?"marker"===t.type?n.removeMarker(e.toJSON()):t.type===x.MATRIXLABEL?t.removeColumnItems():e.removeSelf():t.type&&n.removePendantItem(t.type)}(t)})},queryStatus:function(t){return t?t.type===x.BRANCH&&t.isCentralBranch()?y.DISABLE:y.NORMAL:G(function(t){return!(t.type===x.BRANCH&&t.isCentralBranch())})()}},changeMarker:{statusRelatedEvent:E.SELECTION_CHANGED,doExecute:function(e,n){var r=void 0;r=n?[n]:t.getModule(T.SELECTION).selections;var i=t.getModule(T.MARKER_MAP);r.forEach(function(t){if(t&&t.type===x.BRANCH){var n=e.split(":"),r=n[0],o=n[1];o||(o=i.findGroupId(r));var a=t.model,s=(a.get("markers")||[]).findIndex(function(t){return i.findGroupId(t.markerId)===o});-1!==s?a.changeMarker({markerId:r,groupId:o},s):a.addMarker({markerId:r,groupId:o})}})},queryStatus:function(t,e){return e?y.NORMAL:O()}},select:{doExecute:function(e,n,r){var i=t.getComponentViewById(e),o=t.getModule(T.SELECTION);r&&t.getModule(T.MOVE_VIEW_PORT).setAbleAutoMove(!1),o&&(n?o.selectSingle(i):o.addSelection(i)),t.getModule(T.MOVE_VIEW_PORT).setAbleAutoMove(!0)}},selectTopicById:{doExecute:function(e,n){var r=t.parent(),i=t.getComponentViewById(e)||r&&r.getComponentViewById(e);if(i){if(r&&i.getContext()!==t){var o=i.getContext().model.get("id"),a=r.findSheetIndex(o);r.switchTo(a)}!function(t){var e=t.getContext();e.execAction("focusCenter",t),e.execAction("select",t.model.get("id"),!0)}(i),n&&n({resolve:!0,reject:!1})}else n&&n({resolve:!1,reject:!0})}},focusInput:{doExecute:function(){t.getModule(T.EDIT_RECEIVER).$input[0].focus()},queryStatus:function(){return t.config(w.NO_EDIT_RECEIVER)?y.DISABLE:y.NORMAL}},selectAll:{doExecute:function(){arguments.length>0&&void 0!==arguments[0]?arguments[0]:x.BRANCH;var e=t.getModule(T.SELECTION),n=t.getModule(T.MOVE_VIEW_PORT);e.setIsSilent(!0),n.setAbleAutoMove(!1),e.selectNone(),d.preorderIterate(t.getSheetView().centralBranchView,v.values(A),function(t){return e.addSelection(t)}),n.setAbleAutoMove(!0),e.setIsSilent(!1),e.notify()}},removeSelection:{doExecute:function(e){var n=t.getComponentViewById(e);t.getModule(T.SELECTION).removeFromSelection(n)}},removeAllSelection:{doExecute:function(){t.getModule(T.SELECTION).selectNone()}},toggleSelect:{doExecute:function(e,n){var r=t.getComponentViewById(e),i=t.getModule(T.SELECTION);n&&t.getModule(T.MOVE_VIEW_PORT).setAbleAutoMove(!1),i.toggleSelection(r),t.getModule(T.MOVE_VIEW_PORT).setAbleAutoMove(!0)}},changeTitle:{doExecute:function(e,n){n?n.saveEdit(e):t.getModule(T.SELECTION).selections.forEach(function(t){t.type!==x.BRANCH&&t.type!==x.BOUNDARY&&t.type!==x.RELATIONSHIP&&t.type!==x.MATRIXLABEL||t.saveEdit(e)})},queryStatus:l(m(),G(function(t){return t.type===x.BRANCH||t.type===x.BOUNDARY||t.type===x.RELATIONSHIP}))},hideTitle:{doExecute:function(e){if(e)e.hideTitle();else{var n=[x.BRANCH,x.BOUNDARY,x.RELATIONSHIP];t.getModule(T.SELECTION).selections.filter(function(t){return p(n,t.type)}).forEach(function(t){return t.hideTitle()})}},queryStatus:l(m(),G(function(t){var e=[x.BRANCH,x.BOUNDARY,x.RELATIONSHIP];return p(e,t.type)}))},showTitle:{doExecute:function(e){if(e)e.showTitle();else{var n=[x.BRANCH,x.BOUNDARY,x.RELATIONSHIP];t.getModule(T.SELECTION).selections.filter(function(t){return p(n,t.type)}).forEach(function(t){return t.showTitle()})}},queryStatus:l(m(),G(function(t){var e=[x.BRANCH,x.BOUNDARY,x.RELATIONSHIP];return p(e,t.type)}))},changeTopicOverlap:{doExecute:function(e){t.model.changeOverlap(e)}},changeTopicPositioning:{doExecute:function(e){t.model.toggleFreePosition("free"===e)}},preAddFloatingTopic:{doExecute:function(){var e=t.getModule(T.PRE_ADD_FLOATING_TOPIC);e.status.movingMouse||e.startProcess(t)}},repairEditReceiverPosition:{doExecute:function(){t.getModule(T.EDIT_RECEIVER).repairPosition()},queryStatus:function(){return t.config(w.NO_EDIT_RECEIVER)?y.DISABLE:y.NORMAL}},setMiniMapDisplay:{doExecute:function(e,n){t.getModule(T.MINI_MAP).setMiniMapDisplay(t,e,n)}},extendBranch:{statusRelatedEvent:E.SELECTION_CHANGED,doExecute:function(e,n){(n&&n.type===x.BRANCH?[n]:t.getModule(T.SELECTION).selections.filter(function(t){return t.type===x.BRANCH})).forEach(function(t){e?t.model.traverseTopic([A.ATTACHED],function(t){t.extendBranch()}):t.model.extendBranch()})},queryStatus:l(m(V),G(V))},sheetSaved:{doExecute:function(){t.getModule(T.MODIFY_CHECK).updateBaseIndex()}},collapseBranch:{statusRelatedEvent:E.SELECTION_CHANGED,doExecute:function(e,n){(n&&n.type===x.BRANCH?[n]:t.getModule(T.SELECTION).selections.filter(function(t){return t.type===x.BRANCH&&t.model.canCollapse()})).forEach(function(t){e?t.model.traverseTopic([A.ATTACHED],function(t){t.collapseBranch()}):t.model.collapseBranch()})},queryStatus:l(m(F),G(F))},showViewInViewPort:{statusRelatedEvent:E.SELECTION_CHANGED,doExecute:function(e){e&&e.type===x.BRANCH||(e=t.getModule(T.SELECTION).selections.slice().filter(function(t){return t.type===x.BRANCH})[0]),e&&t.getModule(T.MOVE_VIEW_PORT).showBranchInViewPort(e)},queryStatus:l(m(D),O)},editItem:{doExecute:function(){var e=t.getModule(T.SELECTION).selections[0];t.getModule(T.EDIT_RECEIVER).show(e.getEditContent(),e)},queryStatus:function(){return t.config(w.NO_EDIT_RECEIVER)?y.DISABLE:y.NORMAL}},editTitle:{statusRelatedEvent:E.SELECTION_CHANGED,doExecute:function(e){e=e||t.getModule(T.SELECTION).selections[0],t.execAction("showViewInViewPort",e),t.getModule(T.EDIT_RECEIVER).show(e.getEditContent(),e)},queryStatus:f(l(m(Y),j(Y)),function(){return t.config(w.NO_EDIT_RECEIVER)?y.DISABLE:y.NORMAL})},showEditBox:{statusRelatedEvent:E.SELECTION_CHANGED,doExecute:function(e,n){e=e||t.getModule(T.SELECTION).selections[0],t.execAction("showViewInViewPort",e),void 0===n&&(n=e.getEditContent()),t.getModule(T.EDIT_RECEIVER).show(n,e)},queryStatus:f(l(m(Y),j(Y)),function(){return t.config(w.NO_EDIT_RECEIVER)?y.DISABLE:y.NORMAL})},hideEditBox:{statusRelatedEvent:E.SELECTION_CHANGED,doExecute:function(e){t.getModule(T.EDIT_RECEIVER).hide(e)}},selectionNavigate:{statusRelatedEvent:E.SELECTION_CHANGED,doExecute:function(e,n){(0,u.keyboardNav)(e,t.getModule(T.SELECTION),n)},queryStatus:G(D)},exchangeSiblingTopic:{doExecute:function(t,e){var n,r,i,o,a,s=e?[e]:$(x.BRANCH);function u(e){var n,r=e.branchIndex();return((n={})[_.UP]=function(t){return t-1},n[_.DOWN]=function(t){return t+1},n[_.LEFT]=function(t){return t-1},n[_.RIGHT]=function(t){return t+1},n)[t](r)}(function(t){return t.some(function(e){return e.parent()!==t[0].parent()})})(s)||(s.sort(function(t,e){return t.branchIndex()-e.branchIndex()}),t!==_.DOWN&&t!==_.RIGHT||s.reverse(),r=(n=s[0]).parent(),i=n.branchIndex(),o=u(n),a=r.getChildrenBranchesByType(A.ATTACHED),i>=0&&i<=a.length-1&&o>=0&&o<=a.length-1&&s.forEach(function(t){var e=t.parent(),n=t.branchIndex(),r=u(t);e.model.moveChildTopic(n,r)}))},queryStatus:function(t,e){return void 0===t?y.DISABLE:void 0!==e?D(e)&&B(e)?y.NORMAL:y.DISABLE:K(D,B,P,k)()}},changeTopicCustomWidth:{doExecute:function(t,e){var n=[S.DIAMOND,S.ELLIPSE,S.CLOUD],r=(e&&e.type===x.BRANCH?[e]:$(x.BRANCH)).filter(P).map(function(t){return t.topicView}).filter(function(t){return!n.includes(t.topicShapeStyle)});t<=0?r.forEach(function(t){t.model.customWidth(0)}):t>=N?r.forEach(function(t){t.model.customWidth(N)}):r.forEach(function(e){var n=e.getTopicMinWidth(),r=t<=n?n:t;e.model.customWidth(r)})},queryStatus:l(m(D,P),G(D,P))},moveViewPort:{doExecute:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=arguments[2];t.getModule(T.MOVE_VIEW_PORT).tryToMoveViewPort(e,n,r)}},removeMarkerGroup:{doExecute:function(e){if(e){var n=t.getModule(T.MARKER_MAP);t.model.traverseTopic(v.values(A),function(t){t.markers().forEach(function(r){n.findGroupId(r.get("markerId"))===e&&t.removeMarker({markerId:r.get("markerId"),groupId:e})})})}}},removeTaskInfo:{doExecute:function(){t.getModule(T.SELECTION).selections.filter(function(t){return t.type===x.BRANCH}).forEach(function(t){return t.model.removeTaskInfo()})}},changeCommentsInfo:{doExecute:function(e){t.getModule(T.SELECTION).selections.filter(function(t){return t.type===x.BRANCH}).forEach(function(t){return t.model.changeComments(e)})}},setTransform:{doExecute:function(e){t.getSVGView().container.transform(e)}},align:{statusRelatedEvent:E.SELECTION_CHANGED,doExecute:function(e){var n=t.getModule(T.SELECTION).selections;M.align(e,n)},queryStatus:q},divide:{statusRelatedEvent:E.SELECTION_CHANGED,doExecute:function(e){var n=t.getModule(T.SELECTION).selections;M.divide(e,n)},queryStatus:Q},setExtColIconDisplay:{doExecute:function(e){d.postorderIterate(t.getSheetView().centralBranchView,v.values(A),function(t){t.collapseExtendView&&t.collapseExtendView[e?"show":"hide"]()})}},changeCJKFontFamily:{doExecute:function(e){t.model.changeStyle(L.CJK_FONT_FAMILY,e)}},refreshMindMap:{doExecute:function(){t.getSheetView().refresh()}},setDeviceScale:{doExecute:function(e){t.getSVGView().setDeviceNativeScale(e)}},collapseBranchesToLevel:{doExecute:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:2;t.model.collapseBranchesToLevel(e)}},extendAllBranches:{doExecute:function(){t.model.extendAllBranches()}},extendBranches:{statusRelatedEvent:E.SELECTION_CHANGED,doExecute:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{relativeLayer:0,spread:!1},e=t.relativeLayer,n=void 0===e?0:e,r=t.spread,i=void 0!==r&&r,o=arguments[1];(o&&o.type===x.BRANCH?[o]:$(x.BRANCH)).forEach(function(t){if(n>0||i){var e=t.model.getLayer()+n;t.model.traverseTopic([A.ATTACHED,A.DETACHED,A.SUMMARY],function(t){(t.getLayer()===e||i&&t.getLayer()>=e)&&t.extendBranch()})}else t.model.extendBranch()})},queryStatus:function(){for(var t=arguments.length,e=Array(t),n=0;n<t;n++)e[n]=arguments[n];return e[0]&&(e[0].relativeLayer>0||e[0].spread)?l(m(D,P),G(D,P)).apply(void 0,e):l(m(V),G(V)).apply(void 0,e)}},collapseBranches:{statusRelatedEvent:E.SELECTION_CHANGED,doExecute:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{relativeLayer:0,spread:!1},e=t.relativeLayer,n=void 0===e?0:e,r=t.spread,i=void 0!==r&&r,o=arguments[1];(o&&o.type===x.BRANCH?[o]:$(x.BRANCH)).forEach(function(t){if(n>0||i){var e=t.model.getLayer()+n;t.model.traverseTopic([A.ATTACHED,A.DETACHED,A.SUMMARY],function(t){(t.getLayer()===e||i&&t.getLayer()>=e)&&t.collapseBranch()})}else t.model.collapseBranch()})},queryStatus:function(){for(var t=arguments.length,e=Array(t),n=0;n<t;n++)e[n]=arguments[n];return e[0]&&(e[0].relativeLayer>0||e[0].spread)?l(m(D,P),G(D,P)).apply(void 0,e):l(m(F),G(F)).apply(void 0,e)}}},et=(0,s.default)({},t.config(w.POST_ACTIONS)),nt=(0,o.default)(tt);return"readonly"===e.env.SB_MODE&&(nt=["zoom","collapseBranch","extendBranch","collapseBranchesToLevel","extendAllBranches"]),r({preActionMap:H(nt,Z),actionMap:H(nt,tt),postActionMap:H(nt,et)})};var Y=function(t){return!(-1===[x.BOUNDARY,x.BRANCH,x.RELATIONSHIP].indexOf(t.type)||t.shouldPreventTitle&&t.shouldPreventTitle())}}).call(e,n(28))},function(t,e,n){"use strict";var r=n(33),i=n(130),o=n(1),a=n(0),s=a.ACTION_STATUS,u=a.EVENTS,c=(a.MODULE_NAME,a.UI_STATUS);t.exports=function(t){var e=i(t),n=e.extendAction,a=e.notInUIStatus,l=e.every;return n({preActionMap:{},actionMap:{openUndoKeepMode:{doExecute:function(){t.getCurrentSheetEditor().getSheetModel().getUndo().openKeepMode()}},closeUndoKeepMode:{doExecute:function(){t.getCurrentSheetEditor().getSheetModel().getUndo().closeKeepMode()}},Undo:{statusRelatedEvent:u.UNDO_STATE_CHANGE,doExecute:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],n=t.model.getUndoManager().getUndoObj();(0,r.isDef)(n.sheetId)&&(t.switchTo(t.findSheetIndex(n.sheetId)),t.execAction("focusInput")),n.undo(),e&&n.clearRedo()},queryStatus:l(function(){return t.model.getUndoManager().getUndoObj().isReadyUndo()?s.NORMAL:s.DISABLE},a(c.DRAG))},Redo:{statusRelatedEvent:u.UNDO_STATE_CHANGE,doExecute:function(){var e=t.model.getUndoManager().getRedoObj();(0,r.isDef)(e.sheetId)&&t.switchTo(t.findSheetIndex(e.sheetId)),e.redo()},queryStatus:l(function(){return t.model.getUndoManager().getRedoObj().isReadyRedo()?s.NORMAL:s.DISABLE},a(c.DRAG))},addNewSheet:{doExecute:function(e,n,r){t.model.addSheet(e,n,r)}},removeSheet:{doExecute:function(e){t.model.removeSheet(e)}},changeSheetTitle:{doExecute:function(e,n){t.model.changeSheetTitle(e,n)}},workbookSaved:{doExecute:function(){o.values(t.sheetEditors).forEach(function(t){t&&t.execAction("sheetSaved")}),t.updateBaseUndoIndex()}},refreshMindMap:{doExecute:function(){o.values(t.sheetEditors).forEach(function(t){t&&t.execAction("refreshMindMap")})}},setExtColIconDisplay:{doExecute:function(e){o.values(t.sheetEditors).forEach(function(t){t.execAction("setExtColIconDisplay",e)})}},setMiniMapDisplay:{doExecute:function(e){t.miniMapManager.setMiniMapDisplay(e)}}},postActionMap:{}})}},function(t,e,n){"use strict";e.__esModule=!0,e.ADAPTERS={SUMMARY_VIEW:"summaryView"}},function(t,e,n){"use strict";e.__esModule=!0,e.BROWSER_TYPE={OPERA:"Opera",EDGE:"Edge",CHROME:"Chrome",SAFARI:"Safari",FIREFOX:"Firefox",IE:"IE",UNKNOWN:"unknown"}},function(t,e,n){"use strict";e.__esModule=!0,e.CONFIG={LOGGER:"logger",XAP_LOADER:"xapLoader",XAP_GENERATOR:"xapGen",URL_PREFIX:"urlPrefix",NO_ANIMATION:"noAimation",LANGUAGE:"language",MAX_SCALE:"maxScale",MIN_SCALE:"minScale",NO_KEYBIND:"noKeybind",KEYBINDING_SERVICE:"KeyBinding_service",INFO_ITEM_STYLE:"infoItemStyle",READONLY:"readonly",NO_EDIT_RECEIVER:"noEditReceiver",CLIPBOARD_READER:"clipboardReader",CLIPBOARD_WRITER:"clipboardWriter",DEFERED_EVENTS:"deferedEvents",DEFERED_TIME:"deferedTime",PADDING_FACTOR:"paddingFactor",FAKE_IMAGE:"fakeImage",NO_LISTEN_RESIZE:"noListenResize",CJK_FONT_FAMILY:"cjkFontFamily",PLATFORM:"platform",FONT_URL_PREFIX:"fontUrlPrefix",HIDE_COLLAPSE_BTN:"hideCollapseBtn",NO_TOPIC_CUSTOM_WIDTH_BTN:"noTopicCustomWidthBtn",PRE_ACTIONS:"preActions",POST_ACTIONS:"postActions"}},function(t,e,n){"use strict";e.__esModule=!0,e.EVENTS={UNDO_STATE_CHANGE:"undoStateChange",BEFORE_EDITOR_REMOVE:"beforeEditorRemove",EDITOR_REMOVED:"editorRemoved",BEFORE_SWITCH_SHEET:"beforeSwitchSheet",SHEET_SWITCHED:"sheetSwitched",BEFORE_CREATE_SHEET_EDITOR:"beforeCreateSheetEditor",SHEET_EDITOR_CREATED:"sheetEditorCreated",ACTION_STATUS_MAY_CHANGED:"actionStatusMayChanged",AFTER_REMOVE_SHEET_MODEL:"afterRemoveSheet",BEFORE_REMOVE_SHEET_MODEL:"beforeRemoveSheet",AFTER_ADD_NEW_SHEET:"afterAddNewSheet",BEFORE_ADD_NEW_SHEET:"beforeAddNewSheet",AFTER_SHEET_CONTENT_CHANGE:"afterSheetContentChange",AFTER_WORKBOOK_CONTENT_CHANGE:"afterWorkbookContentChange",BEFORE_ADD_TOPIC:"beforeAddTopic",AFTER_ADD_TOPIC:"afterAddTopic",BEFORE_REMOVE_TOPIC:"beforeRemoveTopic",AFTER_REMOVE_TOPIC:"afterRemoveTopic",AFTER_SHEET_TITLE_CHANGE:"sheetTitleChanged",AFTER_WORKBOOK_TITLE_CHANGE:"workbookTitleChanged",SELECTION_CHANGED:"selectionChanged",SHOULD_SHOW_NOTE_PANEL:"shouldShowNotesPanel",SCALE_CHANGED:"scaleChanged",VIEW_PORT_MOVING:"viewPortMoving",SHEET_CONTENT_LOADED:"SHEET_CONTENT_LOADED",AFTER_UI_STATUS_ACTIVATE:"AFTER_UI_STATUS_ACTIVATE",AFTER_UI_STATUS_DEACTIVATE:"AFTER_UI_STATUS_DEACTIVATE",AFTER_MODIFY_STATUS_CHANGE:"afterModifyStatusChange",AFTER_SHEET_ORDER_CHANGE:"afterSheetOrderChange",AFTER_THEME_CHANGED:"afterThemeChanged",SE_BRANCH_DRAG_START:"SE_branchDragStart",SE_BRANCH_DRAG_END:"SE_branchDragEnd",SE_OVERRIDE_STYLE_CHANGED:"SE_OVERRIDE_STYLE_CHANGED",SE_BRANCH_COLLAPSE_TOGGLE:"SE_BRANCH_COLLAPSE_TOGGLE",BEFORE_ANCESTOR_CHANGE:"beforeAncestorChange",AFTER_ANCESTOR_CHANGE:"afterAncestorChange",FILE_DROP_IN_START:"fileDropInStart",FILE_DROP_IN_END:"fileDropInEnd",BEFORE_CANCEL_INPUT_TEXT:"beforeCancelInputText",BEFORE_EDIT_RECEIVER_BLUR:"beforeEditReceiverBlur"}},function(t,e,n){"use strict";e.__esModule=!0,e.EXTENSION_ELEMENT={CONTENT:"content"},e.EXTENSION_PROVIDER={TASK_INFO:"org.xmind.ui.taskInfo",AUDIO_NOTES:"org.xmind.ui.audionotes",UNBALANCED_MAP:"org.xmind.ui.map.unbalanced",SPREAD_SHEET:"org.xmind.ui.spreadsheet"},e.EXTENSION_EVENT={ADD_RESOURCE_REF:"addResourceRef",REMOVE_RESOURCE_REF:"removeResourceRef"}},function(t,e,n){"use strict";e.__esModule=!0,e.FIGURE_TYPE={SHEET:"sheet",BRANCH:"branch",TOPIC:"topic",BOUNDARY:"boundary",RELATIONSHIP:"relationship",SUMMARY:"summary"}},function(t,e,n){"use strict";e.__esModule=!0;var r={BASE_COMPONENT:"BaseComponent",STYLE_COMPONENT:"StyleComponent",STYLE:"Style",BOUNDARY:"Boundary",SUMMARY:"Summary",HREF:"Href",LABEL:"Label",LEGEND:"Legend",MARKER:"Marker",NOTE:"Note",NUMBERING:"Numbering",RELATIONSHIP:"Relationship",SHEET:"Sheet",THEME:"Theme",TOPIC:"Topic",IMAGE:"Image",WORKBOOK:"workbook"},i=r;e.MODEL_TYPE=r,e.COMPONENT_TYPE=i,e.TOPIC_TYPE={ATTACHED:"attached",DETACHED:"detached",SUMMARY:"summary",CALLOUT:"callout",ROOT:"root"},e.NUMBERFORMAT={NONE:"org.xmind.numbering.none",ARABIC:"org.xmind.numbering.arabic",ROMAN:"org.xmind.numbering.roman",LOWERCASE:"org.xmind.numbering.lowercase",UPPERCASE:"org.xmind.numbering.uppercase"},e.NUMBERSEPARATOR={COMMA:"org.xmind.numbering.separator.comma",DOT:"org.xmind.numbering.separator.dot",HYPHEN:"org.xmind.numbering.separator.hyphen",DASH:"org.xmind.numbering.separator.dash",OBLIQUE:"org.xmind.numbering.separator.oblique"},e.INFO_ITEM_DISPLAY_MODE={CARD:"card",ICON:"icon"},e.INFO_ITEM_STYLE_TYPE={CLASSIC:"classic",FASHION:"fashion",ACC_TO_JSON:"accToJSON"},e.INFOITEM_TYPE_FULL={LABEL:"org.xmind.ui.infoItem.label",HREF:"org.xmind.ui.infoItem.hyperlink",NOTE:"org.xmind.ui.infoItem.notes",TASK:"org.xmind.ui.infoItem.taskInfo",AUDIO:"org.xmind.ui.infoItem.AudioNotes",COMMENT:"org.xmind.ui.infoItem.comments"},e.INFOITEM_TYPE_SHORT={LABEL:"label",HREF:"href",NOTE:"note",TASK:"task",AUDIO:"audio",COMMENT:"comments"},e.TOPIC_TITLE_MAX_WIDTH=300,e.TOPIC_MAX_CUSTOM_WIDTH=762,e.ATTACHMENT_PREFIX="xap:resources/",e.TOPIC_DEFAULT_STRUCTURE="org.xmind.ui.logic.right",e.DIRECTION={UP:"up",DOWN:"down",LEFT:"left",RIGHT:"right",NONE:"none"},e.TOPIC_ATTACHED="attached",e.TOPIC_DETACHED="detached",e.TOPIC_SUMMARY="summary",e.TOPIC_CALLOUT="callout",e.TOPIC_ROOT="root",e.MASTER_RANGE="master",e.MANIFEST={FILE_ENTRIES:"file-entries",FILE_ENTRY:"file-entry"}},function(t,e,n){"use strict";e.__esModule=!0,e.MODULE_NAME={ADD_RELATIONSHIP:"addrelationshipmanager",COPY_PASTE:"copypastemanager",DRAG:"dragmanager",DROP:"dropmanager",PRE_ADD_FLOATING_TOPIC:"preaddfloatingtopic",SELECTION:"selectionmanager",KEY_BIND:"keybind",EDIT_RECEIVER:"editreceiver",MINI_MAP:"minimap",MOVE_VIEW_PORT:"moveviewport",SEMAPHORE:"semaphore",LAYOUT:"layout",MOUSE_BOX_SELECT:"mouseboxselect",MARKER_MAP:"markermap",MODIFY_CHECK:"modifycheck",SELECT_DRAG:"selectdragmanager",OVERRIDE_STYLE:"overridestyle",SVG_DRAGGABLE:"svgdraggable"}},function(t,e,n){"use strict";e.__esModule=!0,e.RENDER_ENGINE_TYPE={SVG:"svg",CANVAS:"canvas"}},function(t,e,n){"use strict";e.__esModule=!0,e.SERVICE_NAME={GET_MINIMUM_FONT_SIZE:"getMiniumFontSize",GET_VIEW_PORT_COVER:"getViewPortCover",WRAP_TEXT_WITH_ELLIPSIS:"wrapTextWithEllipsis",GET_TEXT_SIZE:"getTextSize",GET_NODES_SIZE:"GET_NODES_SIZE",RESOLVE_STR:"resolveStr",RESOLVE_STR_NODES:"RESOLVE_STR_NODES",COPY_TO_CLIPBOARD:"copyToClipboard"}},function(t,e,n){"use strict";e.__esModule=!0,e.ACTION_STATUS=e.UI_STATUS=void 0;var r,i=(r=n(99))&&r.__esModule?r:{default:r},o={NORMAL:(0,i.default)("normal"),DISABLE:(0,i.default)("disable")};e.UI_STATUS={LAYOUT:"layout",ANIMATION:"animation",PINCH:"pinching",DRAG:"drag",ADD_RELATIONSHIP:"addRelationship",ADD_FLOATINGTOPIC:"addFloatingTopic",EDIT_TITLE:"editTitle",DRAG_VIEWPORT:"dragViewport",LOADING_IMAGE:"loadingImage",DE_FOCUS:"deFocus"},e.ACTION_STATUS=o},function(t,e,n){"use strict";var r;e.__esModule=!0;var i={LOGICRIGHT:"org.xmind.ui.logic.right",LOGICLEFT:"org.xmind.ui.logic.left",TREERIGHT:"org.xmind.ui.tree.right",TREELEFT:"org.xmind.ui.tree.left",ORGCHARTDOWN:"org.xmind.ui.org-chart.down",ORGCHARTUP:"org.xmind.ui.org-chart.up",MAPCLOCKWISE:"org.xmind.ui.map.clockwise",MAPANTICLOCKWISE:"org.xmind.ui.map.anticlockwise",MAP:"org.xmind.ui.map",MAPUNBALANCED:"org.xmind.ui.map.unbalanced",MAPFLOATING:"org.xmind.ui.map.floating",MAPFLOATINGCLOCKWISE:"org.xmind.ui.map.floating.clockwise",MAPFLOATINGANTICLOCKWISE:"org.xmind.ui.map.floating.anticlockwise",TIMELINEHORIZONTAL:"org.xmind.ui.timeline.horizontal",TIMELINEHORIZONTALUP:"org.xmind.ui.timeline.horizontal.up",TIMELINEHORIZONTALDOWN:"org.xmind.ui.timeline.horizontal.down",TIMELINEVERTICAL:"org.xmind.ui.timeline.vertical",FISHBONELEFTHEADED:"org.xmind.ui.fishbone.leftHeaded",LEFTHEADEDNENORMAL:"org.xmind.ui.fishbone.structure.NE.normal",LEFTHEADEDSENORMAL:"org.xmind.ui.fishbone.structure.SE.normal",FISHBONERIGHTHEADED:"org.xmind.ui.fishbone.rightHeaded",RIGHTHEADEDNWNORMAL:"org.xmind.ui.fishbone.structure.NW.normal",RIGHTHEADEDSWNORMAL:"org.xmind.ui.fishbone.structure.SW.normal",SPREADSHEET:"org.xmind.ui.spreadsheet",SPREADSHEETROW:"org.xmind.ui.structure.spreadsheet.row",COLUMNSPREADSHEET:"org.xmind.ui.spreadsheet.column",SPREADSHEETCOLUMN:"org.xmind.ui.structure.column.spreadsheet",LOGICCHARTRIGHT:"org.xmind.ui.logic-chart.right",LOGICCHARTLEFT:"org.xmind.ui.logic-chart.left"},o=["org.xmind.ui.logic.right","org.xmind.ui.logic.left","org.xmind.ui.tree.right","org.xmind.ui.tree.left","org.xmind.ui.org-chart.down","org.xmind.ui.org-chart.up","org.xmind.ui.map.clockwise","org.xmind.ui.map.anticlockwise","org.xmind.ui.map","org.xmind.ui.map.unbalanced","org.xmind.ui.timeline.horizontal","org.xmind.ui.timeline.vertical","org.xmind.ui.fishbone.leftHeaded","org.xmind.ui.fishbone.rightHeaded","org.xmind.ui.spreadsheet","org.xmind.ui.spreadsheet.column"],a=o.filter(function(t){return!(0===t.indexOf("org.xmind.ui.map"))}),s=a.filter(function(t){var e=0===t.indexOf("org.xmind.ui.logic.right"),n=0===t.indexOf("org.xmind.ui.fishbone.leftHeaded");return!e&&!n}),u=a.filter(function(t){var e=0===t.indexOf("org.xmind.ui.logic.left"),n=0===t.indexOf("org.xmind.ui.fishbone.rightHeaded");return!e&&!n}),c=((r={})[i.FISHBONELEFTHEADED]=i.FISHBONERIGHTHEADED,r[i.FISHBONERIGHTHEADED]=i.FISHBONELEFTHEADED,r);e.STRUCTURECLASS=i,e.EXPOSED_STRUCTURE=o,e.ATTACHED_EXPOSED_STRUCTURE=a,e.LEFT_EXPOSED_STRUCTURE=s,e.RIGHT_EXPOSED_STRUCTURE=u,e.SIMILAR_STRUCTURE_MAP=c},function(t,e,n){"use strict";e.__esModule=!0,e.CLASS_TYPE={CENTRAL_TOPIC:"centralTopic",MAIN_TOPIC:"mainTopic",SUB_TOPIC:"subTopic",SUMMARY_TOPIC:"summaryTopic",CALLOUT_TOPIC:"calloutTopic",FLOATING_TOPIC:"floatingTopic",BOUNDARY:"boundary",SUMMARY:"summary",RELATIONSHIP:"relationship",MAP:"map"},e.STYLED_TOPIC_TYPE={CENTRAL:"centralTopic",SUMMARY:"summaryTopic",FLOATING:"floatingTopic",CALLOUT:"calloutTopic",MAIN:"mainTopic",SUB:"subTopic"},e.STYLE_KEYS={FONT_FAMILY:"fo:font-family",FONT_STYLE:"fo:font-style",FONT_WEIGHT:"fo:font-weight",FONT_SIZE:"fo:font-size",TEXT_COLOR:"fo:color",TEXT_ALIGN:"fo:text-align",TEXT_BULLET:"fo:text-bullet",TEXT_TRANSFORM:"fo:text-transform",TEXT_DECORATION:"fo:text-decoration",TEXT_BACKGROUND_COLOR:"fo:background-color",MARGIN_LEFT:"fo:margin-left",MARGIN_RIGHT:"fo:margin-right",MARGIN_TOP:"fo:margin-top",MARGIN_BOTTOM:"fo:margin-bottom",SPACING_MAJOR:"spacing-major",SPACING_MINOR:"spacing-minor",SHAPE_CLASS:"shape-class",SHAPE_CORNER:"shape-corner",LINE_CORNER:"line-corner",LINE_COLOR:"line-color",LINE_CLASS:"line-class",LINE_WIDTH:"line-width",LINE_PATTERN:"line-pattern",LINE_TAPERED:"line-tapered",BORDER_LINE_COLOR:"border-line-color",BORDER_LINE_WIDTH:"border-line-width",CALLOUT_FILL_COLOR:"callout-fill-color",CALLOUT_LINE_CLASS:"callout-line-class",CALLOUT_LINE_CORNER:"callout-line-corner",CALLOUT_LINE_PATTERN:"callout-line-pattern",CALLOUT_LINE_WIDTH:"callout-line-width",CALLOUT_SHAPE_CLASS:"callout-shape-class",CALLOUT_LINE_COLOR:"callout-line-color",OPACITY:"svg:opacity",FILL_COLOR:"svg:fill",BACKGROUND:"background",ARROW_END_CLASS:"arrow-end-class",ARROW_BEGIN_CLASS:"arrow-begin-class",ALLOW_OVERLAP:"allow-overlap",ALLOW_FREE_POSITION:"allow-free-position",GRADIENT_COLOR:"color-gradient",MULTI_LINE_COLORS:"multi-line-colors",CJK_FONT_FAMILY:"cjk-font-family",STRUCTURE_CLASS:"structure-class",FILL_GRADIENT:"fill-gradient",BORDER_GRADIENT:"border-gradient"},e.STYLE_PARENT_GROUP={BEFORE_CLASS_GROUP:"beforeClassGroup",BEFORE_THEME_GROUP:"beforeThemeGroup",BEFORE_DEFAULT_GROUP:"beforeDefaultGroup"},e.STYLE_LAYER={BEFORE_USER:"beforeUser",BEFORE_CLASS:"beforeClass",BEFORE_THEME:"beforeTheme",BEFORE_DEFAULT:"beforeDefault",BEFORE_PARENT:"beforeParent"},e.STYLE_VALUES={SYSTEM_FONT:"$system$"},e.COMMON_FONT_FAMILY='Helvetica, "Nunito Sans", "Microsoft Yahei", "PingFang SC", "Microsoft JhengHei",  sans-serif',e.TOPICSHAPE={ROUNDEDRECT:"org.xmind.topicShape.roundedRect",RECT:"org.xmind.topicShape.rect",ELLIPSE:"org.xmind.topicShape.ellipse",DIAMOND:"org.xmind.topicShape.diamond",UNDERLINE:"org.xmind.topicShape.underline",NOBORDER:"org.xmind.topicShape.noBorder",CIRCLE:"org.xmind.topicShape.circle",PARALLELOGRAM:"org.xmind.topicShape.parallelogram",CLOUD:"org.xmind.topicShape.cloud",ELLIPSERECT:"org.xmind.topicShape.ellipserect",HEXAGON:"org.xmind.topicShape.hexagon",ROUNDEDHEXGON:"org.xmind.topicShape.roundedhexagon",ELLIPTICRECTANGLE:"org.xmind.topicShape.ellipticrectangle",MATRIXMAIN:"org.xmind.topicShape.matrixMain",FISHHEADTORIGHT:"org.xmind.topicShape.fishHeadToRight",FISHHEADTOLEFT:"org.xmind.topicShape.fishHeadToLeft",FISHBONEROATEDNW:"org.xmind.topicShape.fishbone.NW.rotated",FISHBONEROATEDNE:"org.xmind.topicShape.fishbone.NE.rotated",FISHBONEROATEDSW:"org.xmind.topicShape.fishbone.SW.rotated",FISHBONE_NE_UNDERLINE:"fishbone_ne_underline",FISHBONE_NW_UNDERLINE:"fishbone_nw_underline",FISHBONEROATEDSE:"org.xmind.topicShape.fishbone.SE.rotated"},e.CALLOUTSHAPE={ELLIPSE:"org.xmind.calloutTopicShape.balloon.ellipse",ROUNDEDRECT:"org.xmind.calloutTopicShape.balloon.roundedRect",RECT:"org.xmind.calloutTopicShape.balloon.rectangle"},e.BOUNDARYSHAPE={RECT:"org.xmind.boundaryShape.rect",ROUNDEDRECT:"org.xmind.boundaryShape.roundedRect",SCALLOPS:"org.xmind.boundaryShape.scallops",WAVES:"org.xmind.boundaryShape.waves",TENSION:"org.xmind.boundaryShape.tension",POLYGON:"org.xmind.boundaryShape.polygon",ROUNDEDPOLYGON:"org.xmind.boundaryShape.roundedPolygon",NEWBOUNDARY1:"org.xmind.boundaryShape.newboundary1",NEWBOUNDARY2:"org.xmind.boundaryShape.newboundary2",NEWBOUNDARY3:"org.xmind.boundaryShape.newboundary3"},e.ARROWSHAPE={NORMAL:"org.xmind.arrowShape.normal",SPEARHEAD:"org.xmind.arrowShape.spearhead",DOT:"org.xmind.arrowShape.dot",TRIANGLE:"org.xmind.arrowShape.triangle",SQUARE:"org.xmind.arrowShape.square",DIAMOND:"org.xmind.arrowShape.diamond",HERRINGBONE:"org.xmind.arrowShape.herringbone",NONE:"org.xmind.arrowShape.none",RING:"org.xmind.arrowShape.ring",EYE:"org.xmind.arrowShape.eye",DOUBLEARROW:"org.xmind.arrowShape.doublearrow",SQUARERING:"org.xmind.arrowShape.squarering"},e.RELATIONSHIPSHAPE={CURVED:"org.xmind.relationshipShape.curved",ANGLED:"org.xmind.relationshipShape.angled",STRAIGHT:"org.xmind.relationshipShape.straight",ZIGZAG:"org.xmind.relationshipShape.zigzag"},e.SUMMARYCONNECTION={CURLY:"org.xmind.summaryShape.curly",ANGLE:"org.xmind.summaryShape.angle",SQUARE:"org.xmind.summaryShape.square",ROUND:"org.xmind.summaryShape.round",BRACKET:"org.xmind.summaryShape.bracket",SHARP:"org.xmind.summaryShape.sharp",FOLD:"org.xmind.summaryShape.fold"},e.BRANCHCONNECTION={ROUNDEDELBOW:"org.xmind.branchConnection.roundedElbow",STRAIGHT:"org.xmind.branchConnection.straight",CURVE:"org.xmind.branchConnection.curve",ARROWEDCURVE:"org.xmind.branchConnection.arrowedCurve",FOLD:"org.xmind.branchConnection.fold",FOLD2:"org.xmind.branchConnection.fold2",ROUNDEDFOLD:"org.xmind.branchConnection.roundedfold",BIGHT:"org.xmind.branchConnection.bight",ELBOW:"org.xmind.branchConnection.elbow",HORIZONTAL:"org.xmind.branchConnection.timeline.horizontal",NONE:"org.xmind.branchConnection.none",CALLOUTLINE:"calloutLine"},e.ARROWLINEPATTERN={DASH:"dash",DASHDOT:"dash-dot",DASHDOTDOT:"dash-dot-dot",DOT:"dot",SOLID:"solid"},e.TEXTTRANSFORM={MANUAL:"manual",CAPITALIZE:"capitalize",UPPERCASE:"uppercase",LOWERCASE:"lowercase"}},function(t,e,n){"use strict";e.__esModule=!0,e.VIEW_TYPE={BRANCH:"branch",AUDIO:"audioNotes",BOUNDARY:"boundary",COLLAPSE_EXTEND:"collapseextend",COMMENT:"comments",CONNECTION:"connection",FISHTAIL:"fishtail",HREF:"href",IMAGE:"image",INFOITEM:"infoitem",LABEL:"label",LABELUNIT:"labelunit",LEGEND:"legend",LEGENDMARKERLIST:"legendmarkerlist",MARKER:"marker",MATRIXLABEL:"matrixlabel",NOTE:"note",NUMBERING:"numbering",RELATIONSHIP:"relationship",SELECTBOX:"selectbox",SVG:"svg",TASK:"task",TOPIC:"topic",TEXT:"text",TITLE:"title",INFO_ITEM_CARD:"infoitemcard",INFORMATION_ICONS:"informationicons",ATTACHMENT:"attachment",MATRIX_LABEL:"matrixlabel",MATRIX_PLUS:"matrixPlus",CELL:"cell",SHEET:"sheet",SUMMARY:"summary",INFORMATION_ICON:"INFORMATION_ICON",MARKERS:"MARKERS"}},function(t,e,n){"use strict";e.__esModule=!0,e.XAP_TYPE={IMAGE:"image",ATTACHMENT:"attachment",X_STICKER:"x-sticker"}},function(t,e,n){"use strict";var r=s(n(35)),i=s(n(11)),o=s(n(152)),a=s(n(151));function s(t){return t&&t.__esModule?t:{default:t}}var u=n(9),c=n(1),l=n(212),h=(n(5),0,[n(145),n(80),n(147),n(148),n(149),n(150),n(96),n(96).LegendMarkerListView,n(156),n(97),n(98),n(157),n(158),n(159),n(67),n(34),n(155),n(153),n(154),n(146),n(95),n(95).LabelUnitView,o.default,a.default]),d=/^(\S+)\s*(.*)$/,f={isPropagationStopped:function(){return!1},isDefaultPrevented:function(){return!1},isPropagationImmediateStoped:function(){return!1},stopPropagation:function(){this.srcEvent||this.originalEvent,this.isPropagationStopped=function(){return!0}},preventDefault:function(){var t=this.srcEvent||this.originalEvent;this.isDefaultPrevented=function(){return!0},t&&t.preventDefault()},stopImmediatePropagation:function(){this.isPropagationImmediateStoped=function(){return!0}}},p=function(t,e,n,r){t.element.eventDatas||(t.element.eventDatas={});var i=t.element.eventDatas;i[e]||(t.on(e,function(e){v.call(t,e)}),i[e]={}),i[e][n]||(i[e][n]=[]);var o={type:e,selector:n,handler:r};return i[e][n].push(o),function(){i[e][n]=i[e][n].filter(function(t){return t!==o})}},g=function(t,e,n,r){var i=t.element;if(i&&i.eventDatas&&e&&i.eventDatas[e]){var o=i.eventDatas;if(!n)return void(o[e]={});if(!r)return void(o[e][n]=[]);o[e][n]=o[e][n].filter(function(t){var e=t.handler===r;return!(t.selector===n&&e)})}},v=function(t){if(!m(t)&&!y(t))for(var e,n=(e=t,c.extend({},e,f)),r=this.element,i=r.eventDatas[n.type],o=function(t,e){for(var n=[],r=_(t,this);r&&r!==this;)r.sbView?function(){var t=[];r.sbView.getTypeList().forEach(function(n){e[n]&&(t=t.concat(e[n]))}),t.length&&n.push({elem:r,handlers:t}),r=r.sbView.getNextEventTarget(r)}():r=r.parentNode;return n}.call(r,n,i),a=function(t){var e=o[t],r=e.elem,i=e.handlers,a=r.sbView||r;n.currentTarget=r,n.sbView=r.sbView;var s=!0;i.some(function(t){if(s=!1!==t.handler.call(a,n)&&s,n.isPropagationImmediateStoped())return n.stopPropagation(),!0}),s||(n.preventDefault(),n.stopPropagation())},s=0;s<o.length&&!n.isPropagationStopped();s++)a(s)},m=function(t){if(!function(t){return!!t.type.includes("mouse")||"dblclick"===t.type||void 0}(t))return!1;var e=t.originalEvent||t.srcEvent;return"dblclick"===t.type&&!e.sourceCapabilities||!e.sourceCapabilities||!!e.sourceCapabilities.firesTouchEvents||void 0},y=function(t){return!!function(t){if(["tap","doubletap","pinch","pan","press"].includes(t.type)&&t.srcEvent)return!0}(t)&&("mouse"===t.pointerType||void 0)},_=function(t,e){return!t.pointers||t.pointers.length<=1?t.target:function(t){for(var e=null,n=function(t){for(var e=t.map(function(t){return t.length}).reduce(function(t,e){return Math.min(t,e)},1/0),n=[],r=0;r<e;r++){n[r]=[];for(var i=0;i<t.length;i++)n[r][i]=t[i][r]}return n}(t),i=function(t){var r=n[t][0];if(!n[t].every(function(t){return t===r}))return{v:e};e=r},o=0;o<n.length;o++){var a=i(o);if("object"===(void 0===a?"undefined":(0,r.default)(a)))return a.v}return e}(t.pointers.map(function(t){return function(t,e){for(var n=[];t&&t!==e;)n.unshift(t),t=t.parentNode;return t&&n.unshift(t),n}(t.target,e)}))};t.exports={initViewEvent:function(t){h.forEach(function(e){!function(t,e){var n=e.type,r=e.sbEvents;if(r&&n){var i=function(i){var o=r[i],a=c.isFunction(o)?o:e[o];if(!a)return"continue";var s=i.match(d)[1];t(s,n,function(t){var e=t.currentTarget.sbView;return a.bind(e)(t)})};for(var o in r)i(o)}}(t,e.prototype)})},initViewHammer:function(t){h.forEach(function(e){!function(t,e){var n=e.type,r=e.hammerEvents;n&&r&&(0,i.default)(r).forEach(function(i){var o=r[i],a=c.isFunction(o)?o:e[o];if(a){var s=i.match(d)[1];t(s,n,a)}})}(t,e.prototype)})},hammerCreator:function(t){var e=new l.Manager(t,{touchAction:"auto"}),n=new l.Tap({taps:1}),r=new l.Tap({event:"doubletap",taps:2}),i=new l.Pinch,o=new l.Pan({pointers:0}),a=new l.Press;return r.recognizeWith([n]),i.recognizeWith([o]),e.add(o),e.add(i),e.add(r),e.add(n),e.add(a),{onHammer:function(t,n,r){return p(e,t,n,r)},offHammer:function(t,n,r){return g(e,t,n,r)}}},eventCreator:function(t){var e=u(t);return e.element=t,{onEvent:function(t,n,r){return p(e,t,n,r)},offEvent:function(t,n,r){return g(e,t,n,r)}}}}},function(t,e,n){"use strict";var r,i=(r=n(38))&&r.__esModule?r:{default:r},o=n(9),a=n(0),s=a.SERVICE_NAME,u=a.TOPIC_TITLE_MAX_WIDTH,c=n(144),l=c.nodes2Str,h=c.nodesSplit,d=c.separateNodes,f=c.sepWord,p=c.combineWords,g=c.nodes2Words,v=c.getTextSize,m=c.getNodesSize,y=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:u;return t=d(t),h(t,["\n"]).map(function(t){return function(t){return function(t){return m(t).width}(t)<e?[t]:function t(n){for(var r=function(n,r){var i=n[r];if(i.getWidth()>e){var o=f(i),a=t(o),s=a.pop(),u=p(s);return n.splice(r,1,u),[r,a]}var c=function(t,e,n){for(var r=n,i=e;i<t.length;i++)if((r-=t[i].getWidth())<0)return i;return!1}(n,r,e)||n.length;return[c,[n.slice(r,c)]]},i=[],o=0;o<n.length;){var a=r(n,o),s=a[0],u=a[1];i=i.concat(u),o=s}return i}(g(t)).map(function(t){return t.reduce(function(t,e){return t.concat(e.getNodes())},[])})}(t)}).reduce(function(t,e){return t.concat(e)},[])};t.exports=function(t){var e,n;return(e={viewportPosToCanvasPos:function(e){return{x:t.getRootDOM().scrollLeft+e.x,y:t.getRootDOM().scrollTop+e.y}}})[s.GET_MINIMUM_FONT_SIZE]=function(){var e=o("<span>").css({display:"none",fontSize:"1px"});t.getAppToolsContainer().append(e);var n=(0,i.default)(e.css("fontSize"));return e.remove(),function(){return n}}(),e[s.GET_VIEW_PORT_COVER]=(n=void 0,function(){return n||(n=o("<div>").attr("name","viewport-cover").css("display","none"),t.getAppToolsContainer().append(n)),n}),e[s.RESOLVE_STR]=function(t,e,n){return y([{content:t,style:e}],n).map(function(t){return l(t)})},e[s.RESOLVE_STR_NODES]=y,e[s.GET_TEXT_SIZE]=v,e[s.GET_NODES_SIZE]=m,e[s.COPY_TO_CLIPBOARD]=function(){var e=void 0;function n(e){t.el.removeEventListener("blur",n),setTimeout(function(){e.target.focus()},0)}return function(r){var i;e||(i=document.createElement("textarea"),t.getAppToolsContainer()[0].appendChild(i),i.style.position="fixed",i.style.top="-9999px",i.setAttribute("readonly","true"),e=i),t.el.addEventListener("blur",n),e.value=r,e.focus(),e.select();var o=void 0;try{o=document.execCommand("copy")}catch(t){o=!1}return o}}(),e[s.WRAP_TEXT_WITH_ELLIPSIS]=function(t,e,n){var r=function(t){return v(t,e).width};return r(t)<=n?t:function t(e,n){if(1===e.length)return n>=r(e)?e:"";var i=e.slice(0,parseInt(e.length/2)),o=e.replace(i,""),a=r(i);return n>=a?i+t(o,n-a):t(i,n)}(t,n-=r("..."))+"..."},e}},function(t,e,n){"use strict";var r,i=(r=n(11))&&r.__esModule?r:{default:r},o=n(76),a=n(0),s=n(61),u=n(5),c=n(8),l=n(1),h='<?xml version="1.0" standalone="no"?><!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd" [<!ENTITY nbsp "&#160;">]>',d={},f={};function p(t,e,n){if(!(t in f))return!1;var r=f[t],i=r.data,o=r.width,a=r.height;return void 0===o&&void 0===a?i:!(e>o||n>a)&&i}function g(t,e,n,r){f[t]={data:e,width:n,height:r}}function v(){d={},f={}}function m(t){if(!((e=t)instanceof HTMLElement||e instanceof SVGElement))throw new Error("an HTMLElement or SVGElement is required; got "+t);var e}function y(t,e){t.setAttributeNS("http://www.w3.org/1999/xlink","href",e)}function _(t){for(var e={woff2:"font/woff2",woff:"font/woff",otf:"application/x-font-opentype",ttf:"application/x-font-ttf",eot:"application/vnd.ms-fontobject",sfnt:"application/font-sfnt",svg:"image/svg+xml"},n=(0,i.default)(e),r=0;r<n.length;++r){var o=n[r];if(t.indexOf("."+o)>0)return e[o]}return console.error("Unknown font format for "+t+"; Fonts may not be working correctly"),"application/octet-stream"}function E(t,e,n){for(var r=e.selectorRemap,i=e.modifyStyle,l=e.skipSheet,h=e.fonts||[],f="",p=[],g=document.styleSheets,v=0;v<g.length;v++)if(!l||!l(g[v])){try{var m=g[v].cssRules}catch(t){console.warn("Stylesheet could not be loaded: "+g[v].href);continue}if(m)for(var y,E=0;E<m.length;E++,y=null){var A=m[E];if(void 0!==A.style){var S;try{S=A.selectorText}catch(t){console.warn('The following CSS rule has an invalid selector: "'+A+'"',t)}try{S&&(y=t.querySelector(S))}catch(t){console.warn('Invalid CSS selector "'+S+'"',t)}if(y){var T=r?r(A.selectorText):A.selectorText,x=i?i(A.style.cssText):A.style.cssText;f+=T+" { "+x+" }\n"}else if(A.cssText.match(/^@font-face/)){var b=/url\(["']?(.+?)["']?\)/,w=A.cssText.match(b),C=A.cssText.match(/font\-family: ["']?(.+?)["']?;/),I=C&&C[1],L=w&&w[1]||"",N=L.match(/^data:/),O=h.includes(I);N&&O&&(f+=A.cssText,L=""),L&&O&&p.push({text:A.cssText,fontUrlRegexp:b,format:_(L),url:L})}}}}!function(t,e){var n="",r=t.length,i=function(){return--r>0?null:e(n)};r>0?t.forEach(function(t){return function(t){if(t.url in d)return f(t,d[t.url]);var e=o.get(a.CONFIG.FONT_URL_PREFIX),r=u.isSafari()?t.url:s.join(e,t.url),l=new XMLHttpRequest;function h(e){console.warn("Failed to load font from: "+t.url),console.warn(e),n+=t.text+"\n",i()}function f(t,e){var r='url("data:'+t.format+";base64,"+e+'")';n+=t.text.replace(t.fontUrlRegexp,r)+"\n",i()}l.addEventListener("load",function(){var e=l.response,n=c.arrayBufferToBase64(e);d[t.url]=n,f(t,n)}),l.addEventListener("error",h),l.addEventListener("abort",h),l.open("GET",r),l.responseType="arraybuffer",l.send()}(t)}):e(n)}(p,function(t){n(f+t)})}function A(t,e,n){var r=t.viewBox&&t.viewBox.baseVal&&t.viewBox.baseVal[n]||null!==e.getAttribute(n)&&!e.getAttribute(n).match(/%$/)&&parseFloat(e.getAttribute(n))||t.getBoundingClientRect()[n]||parseInt(e.style[n])||parseInt(window.getComputedStyle(t).getPropertyValue(n));return void 0===r||null===r||isNaN(parseFloat(r))?0:r}function S(t){return t=(t=encodeURIComponent(t)).replace(/%([0-9A-F]{2})/g,function(t,e){var n=String.fromCharCode("0x"+e);return"%"===n?"%25":n}),decodeURIComponent(t)}var T=function(t,e,n){m(t),(e=e||{}).scale=e.scale||1,e.responsive=e.responsive||!1;var r="http://www.w3.org/2000/xmlns/";!function(t,e,n){var r=e.scale;m(t);var i=t.querySelectorAll("image"),o=i.length,a=function(){0==--o&&n()};0===o&&n(),l.forEach(i,function(t){var e,n=t.getAttributeNS("http://www.w3.org/1999/xlink","href"),i=parseInt(t.getAttribute("width"))||0,o=parseInt(t.getAttribute("height"))||0;if(i*=r,n&&(e=n)&&0===e.lastIndexOf("http",0)&&-1===e.lastIndexOf(window.location.host))return console.warn("Cannot render embedded images linking to external hosts: "+n),a();if(n=n||t.getAttribute("href"),/^data:/.test(n))return a();if(/\.svg$/.test(n)){var s=p(n);if(!1!==s)return y(t,s),a();var u=new XMLHttpRequest;return u.onload=function(){var e="data:image/svg+xml;base64,"+window.btoa(S(u.responseText));y(t,e),g(n,e),a()},u.onerror=a,u.onabort=a,u.open("GET",n),void u.send()}if(n){var c=p(n,i,o);if(!1!==c)return y(t,c),a();var l=document.createElement("canvas"),h=l.getContext("2d"),d=new Image;d.crossOrigin="anonymous",d.src=n,d.onload=function(){var e,r,s,u=(e={width:i,height:o},r=d,s=(s=Math.max(e.height/r.height,e.width/r.width))>0?Math.min(1,s):1,{width:r.width*s,height:r.height*s}),c=u.width,f=u.height,v=p(n,c,f);if(!1!==v)return y(t,v),a();l.width=c,l.height=f,h.drawImage(d,0,0,d.width,d.height,0,0,c,f);var m=l.toDataURL("image/png");g(n,m,c,f),y(t,m),a()},d.onerror=function(){console.log("Could not load "+n),a()}}else a()})}(t,e,function(){var i,o,a=document.createElement("div"),s=t.cloneNode(!0);if("svg"==t.tagName)i=e.width||A(t,s,"width"),o=e.height||A(t,s,"height");else{if(!t.getBBox)return void console.error("Attempted to render non-SVG element",t);var u=t.getBBox();i=u.x+u.width,o=u.y+u.height,s.setAttribute("transform",s.getAttribute("transform").replace(/translate\(.*?\)/,""));var c=document.createElementNS("http://www.w3.org/2000/svg","svg");c.appendChild(s),s=c}s.setAttribute("version","1.1"),s.getAttribute("xmlns")||s.setAttributeNS(r,"xmlns","http://www.w3.org/2000/svg"),s.getAttribute("xmlns:xlink")||s.setAttributeNS(r,"xmlns:xlink","http://www.w3.org/1999/xlink"),e.responsive?(s.removeAttribute("width"),s.removeAttribute("height"),s.setAttribute("preserveAspectRatio","xMinYMin meet")):(s.setAttribute("width",i*e.scale),s.setAttribute("height",o*e.scale)),s.setAttribute("viewBox",[e.left||0,e.top||0,i,o].join(" "));for(var l=s.querySelectorAll("foreignObject > *"),h=0;h<l.length;h++)l[h].getAttribute("xmlns")||l[h].setAttributeNS(r,"xmlns","http://www.w3.org/1999/xhtml");a.appendChild(s),E(t,e,function(t){var e=document.createElement("style");e.setAttribute("type","text/css"),e.innerHTML="<![CDATA[\n"+t+"\n]]>";var r=document.createElement("defs");if(r.appendChild(e),s.insertBefore(r,s.firstChild),n){var u=a.innerHTML;u=(u=u.replace(/NS\d+:href/gi,'xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href')).replace(/(?:[\0-\x08\x0B\f\x0E-\x1F\uFFFE\uFFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])/g," "),n(u,i,o)}})})},x=function(t,e,n){T(t,e,function(t){var e;e=u.isWebKit()?"data:image/svg+xml,"+encodeURIComponent(h+t):"data:image/svg+xml;base64,"+window.btoa(S(h+t)),n&&n(e)})},b=function(t,e,n){m(t),(e=e||{}).encoderType=e.encoderType||"image/png",e.encoderOptions=e.encoderOptions||.8;var r=function(t,r,i,o){var a,s=document.createElement("canvas"),u=s.getContext("2d"),c=o/96;s.width=r*c,s.height=i*c,u.scale(c,c),e.canvg?e.canvg(s,t):u.drawImage(t,0,0),e.backgroundColor&&(u.globalCompositeOperation="destination-over",u.fillStyle=e.backgroundColor,u.fillRect(0,0,s.width,s.height));try{a=s.toDataURL(e.encoderType,e.encoderOptions)}catch(t){if("undefined"!=typeof SecurityError&&t instanceof SecurityError||"SecurityError"==t.name)return void console.error("Rendered SVG images cannot be downloaded in this browser.");throw t}n(a)};e.canvg?T(t,e,r):x(t,e,function(t){var n=new Image;n.onload=function(){setTimeout(function(){return r(n,n.width,n.height,e.hidpi)},100)},n.onerror=function(){console.error("There was an error loading the data URI as an image on the following SVG\n","Open the following link to see browser's diagnosis\n",t)},n.src=t})},w=function(t,e){if(navigator.msSaveOrOpenBlob)navigator.msSaveOrOpenBlob(function(t){for(var e=window.atob(t.split(",")[1]),n=t.split(",")[0].split(":")[1].split(";")[0],r=new ArrayBuffer(e.length),i=new Uint8Array(r),o=0;o<e.length;o++)i[o]=e.charCodeAt(o);return new Blob([r],{type:n})}(e),t);else{var n=document.createElement("a");"download"in n?(n.download=t,n.href=e,n.style.display="none",document.body.appendChild(n),n.click(),document.body.removeChild(n)):window.open(e,"_temp","menubar=no,toolbar=no,status=no")}};window.releaseCache=v,t.exports={prepareSvg:T,svgAsDataUri:x,svgAsPngUri:b,download:w,saveSvg:function(t,e,n){m(t),x(t,n=n||{},function(t){w(e,t)})},saveSvgAsPng:function(t,e,n){m(t),b(t,n=n||{},function(t){w(e,t)})},releaseCache:v,prepareSVGWithDoctype:function(t,e,n){T(t,e,function(t){return n(h+t)})}}},function(t,e,n){"use strict";var r,i=(r=n(35))&&r.__esModule?r:{default:r},o=/^\s+/,a=/\s+$/,s=0,u=Math.round,c=Math.min,l=Math.max,h=Math.random;function d(t,e){if(t=t||"",e=e||{},t instanceof d)return t;if(!(this instanceof d))return new d(t,e);var n=function(t){var e,n,r,s={r:0,g:0,b:0},u=1,h=null,d=null,f=null,p=!1,g=!1;return"string"==typeof t&&(t=function(t){t=t.replace(o,"").replace(a,"").toLowerCase();var e,n=!1;if(N[t])t=N[t],n=!0;else if("transparent"==t)return{r:0,g:0,b:0,a:0,format:"name"};return(e=G.rgb.exec(t))?{r:e[1],g:e[2],b:e[3]}:(e=G.rgba.exec(t))?{r:e[1],g:e[2],b:e[3],a:e[4]}:(e=G.hsl.exec(t))?{h:e[1],s:e[2],l:e[3]}:(e=G.hsla.exec(t))?{h:e[1],s:e[2],l:e[3],a:e[4]}:(e=G.hsv.exec(t))?{h:e[1],s:e[2],v:e[3]}:(e=G.hsva.exec(t))?{h:e[1],s:e[2],v:e[3],a:e[4]}:(e=G.hex8.exec(t))?{r:P(e[1]),g:P(e[2]),b:P(e[3]),a:V(e[4]),format:n?"name":"hex8"}:(e=G.hex6.exec(t))?{r:P(e[1]),g:P(e[2]),b:P(e[3]),format:n?"name":"hex"}:(e=G.hex4.exec(t))?{r:P(e[1]+""+e[1]),g:P(e[2]+""+e[2]),b:P(e[3]+""+e[3]),a:V(e[4]+""+e[4]),format:n?"name":"hex8"}:!!(e=G.hex3.exec(t))&&{r:P(e[1]+""+e[1]),g:P(e[2]+""+e[2]),b:P(e[3]+""+e[3]),format:n?"name":"hex"}}(t)),"object"==(void 0===t?"undefined":(0,i.default)(t))&&(j(t.r)&&j(t.g)&&j(t.b)?(e=t.r,n=t.g,r=t.b,s={r:255*M(e,255),g:255*M(n,255),b:255*M(r,255)},p=!0,g="%"===String(t.r).substr(-1)?"prgb":"rgb"):j(t.h)&&j(t.s)&&j(t.v)?(h=B(t.s),d=B(t.v),s=function(t,e,n){t=6*M(t,360),e=M(e,100),n=M(n,100);var r=Math.floor(t),i=t-r,o=n*(1-e),a=n*(1-i*e),s=n*(1-(1-i)*e),u=r%6;return{r:255*[n,a,o,o,s,n][u],g:255*[s,n,n,a,o,o][u],b:255*[o,o,s,n,n,a][u]}}(t.h,h,d),p=!0,g="hsv"):j(t.h)&&j(t.s)&&j(t.l)&&(h=B(t.s),f=B(t.l),s=function(t,e,n){var r,i,o;function a(t,e,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?t+6*(e-t)*n:n<.5?e:n<2/3?t+(e-t)*(2/3-n)*6:t}if(t=M(t,360),e=M(e,100),n=M(n,100),0===e)r=i=o=n;else{var s=n<.5?n*(1+e):n+e-n*e,u=2*n-s;r=a(u,s,t+1/3),i=a(u,s,t),o=a(u,s,t-1/3)}return{r:255*r,g:255*i,b:255*o}}(t.h,h,f),p=!0,g="hsl"),t.hasOwnProperty("a")&&(u=t.a)),u=R(u),{ok:p,format:t.format||g,r:c(255,l(s.r,0)),g:c(255,l(s.g,0)),b:c(255,l(s.b,0)),a:u}}(t);this._originalInput=t,this._r=n.r,this._g=n.g,this._b=n.b,this._a=n.a,this._roundA=u(100*this._a)/100,this._format=e.format||n.format,this._gradientType=e.gradientType,this._r<1&&(this._r=u(this._r)),this._g<1&&(this._g=u(this._g)),this._b<1&&(this._b=u(this._b)),this._ok=n.ok,this._tc_id=s++}function f(t,e,n){t=M(t,255),e=M(e,255),n=M(n,255);var r,i,o=l(t,e,n),a=c(t,e,n),s=(o+a)/2;if(o==a)r=i=0;else{var u=o-a;switch(i=s>.5?u/(2-o-a):u/(o+a),o){case t:r=(e-n)/u+(e<n?6:0);break;case e:r=(n-t)/u+2;break;case n:r=(t-e)/u+4}r/=6}return{h:r,s:i,l:s}}function p(t,e,n){t=M(t,255),e=M(e,255),n=M(n,255);var r,i,o=l(t,e,n),a=c(t,e,n),s=o,u=o-a;if(i=0===o?0:u/o,o==a)r=0;else{switch(o){case t:r=(e-n)/u+(e<n?6:0);break;case e:r=(n-t)/u+2;break;case n:r=(t-e)/u+4}r/=6}return{h:r,s:i,v:s}}function g(t,e,n,r){var i=[k(u(t).toString(16)),k(u(e).toString(16)),k(u(n).toString(16))];return r&&i[0].charAt(0)==i[0].charAt(1)&&i[1].charAt(0)==i[1].charAt(1)&&i[2].charAt(0)==i[2].charAt(1)?i[0].charAt(0)+i[1].charAt(0)+i[2].charAt(0):i.join("")}function v(t,e,n,r){return[k(F(r)),k(u(t).toString(16)),k(u(e).toString(16)),k(u(n).toString(16))].join("")}function m(t,e){e=0===e?0:e||10;var n=d(t).toHsl();return n.s-=e/100,n.s=D(n.s),d(n)}function y(t,e){e=0===e?0:e||10;var n=d(t).toHsl();return n.s+=e/100,n.s=D(n.s),d(n)}function _(t){return d(t).desaturate(100)}function E(t,e){e=0===e?0:e||10;var n=d(t).toHsl();return n.l+=e/100,n.l=D(n.l),d(n)}function A(t,e){e=0===e?0:e||10;var n=d(t).toRgb();return n.r=l(0,c(255,n.r-u(-e/100*255))),n.g=l(0,c(255,n.g-u(-e/100*255))),n.b=l(0,c(255,n.b-u(-e/100*255))),d(n)}function S(t,e){e=0===e?0:e||10;var n=d(t).toHsl();return n.l-=e/100,n.l=D(n.l),d(n)}function T(t,e){var n=d(t).toHsl(),r=(n.h+e)%360;return n.h=r<0?360+r:r,d(n)}function x(t){var e=d(t).toHsl();return e.h=(e.h+180)%360,d(e)}function b(t){var e=d(t).toHsl(),n=e.h;return[d(t),d({h:(n+120)%360,s:e.s,l:e.l}),d({h:(n+240)%360,s:e.s,l:e.l})]}function w(t){var e=d(t).toHsl(),n=e.h;return[d(t),d({h:(n+90)%360,s:e.s,l:e.l}),d({h:(n+180)%360,s:e.s,l:e.l}),d({h:(n+270)%360,s:e.s,l:e.l})]}function C(t){var e=d(t).toHsl(),n=e.h;return[d(t),d({h:(n+72)%360,s:e.s,l:e.l}),d({h:(n+216)%360,s:e.s,l:e.l})]}function I(t,e,n){e=e||6,n=n||30;var r=d(t).toHsl(),i=360/n,o=[d(t)];for(r.h=(r.h-(i*e>>1)+720)%360;--e;)r.h=(r.h+i)%360,o.push(d(r));return o}function L(t,e){e=e||6;for(var n=d(t).toHsv(),r=n.h,i=n.s,o=n.v,a=[],s=1/e;e--;)a.push(d({h:r,s:i,v:o})),o=(o+s)%1;return a}d.prototype={isDark:function(){return this.getBrightness()<128},isLight:function(){return!this.isDark()},isValid:function(){return this._ok},getOriginalInput:function(){return this._originalInput},getFormat:function(){return this._format},getAlpha:function(){return this._a},getBrightness:function(){var t=this.toRgb();return(299*t.r+587*t.g+114*t.b)/1e3},getLuminance:function(){var t,e,n,r=this.toRgb();return t=r.r/255,e=r.g/255,n=r.b/255,.2126*(t<=.03928?t/12.92:Math.pow((t+.055)/1.055,2.4))+.7152*(e<=.03928?e/12.92:Math.pow((e+.055)/1.055,2.4))+.0722*(n<=.03928?n/12.92:Math.pow((n+.055)/1.055,2.4))},setAlpha:function(t){return this._a=R(t),this._roundA=u(100*this._a)/100,this},toHsv:function(){var t=p(this._r,this._g,this._b);return{h:360*t.h,s:t.s,v:t.v,a:this._a}},toHsvString:function(){var t=p(this._r,this._g,this._b),e=u(360*t.h),n=u(100*t.s),r=u(100*t.v);return 1==this._a?"hsv("+e+", "+n+"%, "+r+"%)":"hsva("+e+", "+n+"%, "+r+"%, "+this._roundA+")"},toHsl:function(){var t=f(this._r,this._g,this._b);return{h:360*t.h,s:t.s,l:t.l,a:this._a}},toHslString:function(){var t=f(this._r,this._g,this._b),e=u(360*t.h),n=u(100*t.s),r=u(100*t.l);return 1==this._a?"hsl("+e+", "+n+"%, "+r+"%)":"hsla("+e+", "+n+"%, "+r+"%, "+this._roundA+")"},toHex:function(t){return g(this._r,this._g,this._b,t)},toHexString:function(t){return"#"+this.toHex(t)},toHex8:function(t){return function(t,e,n,r,i){var o=[k(u(t).toString(16)),k(u(e).toString(16)),k(u(n).toString(16)),k(F(r))];return i&&o[0].charAt(0)==o[0].charAt(1)&&o[1].charAt(0)==o[1].charAt(1)&&o[2].charAt(0)==o[2].charAt(1)&&o[3].charAt(0)==o[3].charAt(1)?o[0].charAt(0)+o[1].charAt(0)+o[2].charAt(0)+o[3].charAt(0):o.join("")}(this._r,this._g,this._b,this._a,t)},toHex8String:function(t){return"#"+this.toHex8(t)},toRgb:function(){return{r:u(this._r),g:u(this._g),b:u(this._b),a:this._a}},toRgbString:function(){return 1==this._a?"rgb("+u(this._r)+", "+u(this._g)+", "+u(this._b)+")":"rgba("+u(this._r)+", "+u(this._g)+", "+u(this._b)+", "+this._roundA+")"},toPercentageRgb:function(){return{r:u(100*M(this._r,255))+"%",g:u(100*M(this._g,255))+"%",b:u(100*M(this._b,255))+"%",a:this._a}},toPercentageRgbString:function(){return 1==this._a?"rgb("+u(100*M(this._r,255))+"%, "+u(100*M(this._g,255))+"%, "+u(100*M(this._b,255))+"%)":"rgba("+u(100*M(this._r,255))+"%, "+u(100*M(this._g,255))+"%, "+u(100*M(this._b,255))+"%, "+this._roundA+")"},toName:function(){return 0===this._a?"transparent":!(this._a<1)&&(O[g(this._r,this._g,this._b,!0)]||!1)},toFilter:function(t){var e="#"+v(this._r,this._g,this._b,this._a),n=e,r=this._gradientType?"GradientType = 1, ":"";if(t){var i=d(t);n="#"+v(i._r,i._g,i._b,i._a)}return"progid:DXImageTransform.Microsoft.gradient("+r+"startColorstr="+e+",endColorstr="+n+")"},toString:function(t){var e=!!t;t=t||this._format;var n=!1,r=this._a<1&&this._a>=0;return e||!r||"hex"!==t&&"hex6"!==t&&"hex3"!==t&&"hex4"!==t&&"hex8"!==t&&"name"!==t?("rgb"===t&&(n=this.toRgbString()),"prgb"===t&&(n=this.toPercentageRgbString()),"hex"!==t&&"hex6"!==t||(n=this.toHexString()),"hex3"===t&&(n=this.toHexString(!0)),"hex4"===t&&(n=this.toHex8String(!0)),"hex8"===t&&(n=this.toHex8String()),"name"===t&&(n=this.toName()),"hsl"===t&&(n=this.toHslString()),"hsv"===t&&(n=this.toHsvString()),n||this.toHexString()):"name"===t&&0===this._a?this.toName():this.toRgbString()},clone:function(){return d(this.toString())},_applyModification:function(t,e){var n=t.apply(null,[this].concat([].slice.call(e)));return this._r=n._r,this._g=n._g,this._b=n._b,this.setAlpha(n._a),this},lighten:function(){return this._applyModification(E,arguments)},brighten:function(){return this._applyModification(A,arguments)},darken:function(){return this._applyModification(S,arguments)},desaturate:function(){return this._applyModification(m,arguments)},saturate:function(){return this._applyModification(y,arguments)},greyscale:function(){return this._applyModification(_,arguments)},spin:function(){return this._applyModification(T,arguments)},_applyCombination:function(t,e){return t.apply(null,[this].concat([].slice.call(e)))},analogous:function(){return this._applyCombination(I,arguments)},complement:function(){return this._applyCombination(x,arguments)},monochromatic:function(){return this._applyCombination(L,arguments)},splitcomplement:function(){return this._applyCombination(C,arguments)},triad:function(){return this._applyCombination(b,arguments)},tetrad:function(){return this._applyCombination(w,arguments)}},d.fromRatio=function(t,e){if("object"==(void 0===t?"undefined":(0,i.default)(t))){var n={};for(var r in t)t.hasOwnProperty(r)&&(n[r]="a"===r?t[r]:B(t[r]));t=n}return d(t,e)},d.equals=function(t,e){return!(!t||!e)&&d(t).toRgbString()==d(e).toRgbString()},d.random=function(){return d.fromRatio({r:h(),g:h(),b:h()})},d.mix=function(t,e,n){n=0===n?0:n||50;var r=d(t).toRgb(),i=d(e).toRgb(),o=n/100;return d({r:(i.r-r.r)*o+r.r,g:(i.g-r.g)*o+r.g,b:(i.b-r.b)*o+r.b,a:(i.a-r.a)*o+r.a})},d.readability=function(t,e){var n=d(t),r=d(e);return(Math.max(n.getLuminance(),r.getLuminance())+.05)/(Math.min(n.getLuminance(),r.getLuminance())+.05)},d.isReadable=function(t,e,n){var r,i,o=d.readability(t,e);switch(i=!1,(r=function(t){var e,n;return e=((t=t||{level:"AA",size:"small"}).level||"AA").toUpperCase(),n=(t.size||"small").toLowerCase(),"AA"!==e&&"AAA"!==e&&(e="AA"),"small"!==n&&"large"!==n&&(n="small"),{level:e,size:n}}(n)).level+r.size){case"AAsmall":case"AAAlarge":i=o>=4.5;break;case"AAlarge":i=o>=3;break;case"AAAsmall":i=o>=7}return i},d.mostReadable=function(t,e,n){var r,i,o,a,s=null,u=0;i=(n=n||{}).includeFallbackColors,o=n.level,a=n.size;for(var c=0;c<e.length;c++)(r=d.readability(t,e[c]))>u&&(u=r,s=d(e[c]));return d.isReadable(t,s,{level:o,size:a})||!i?s:(n.includeFallbackColors=!1,d.mostReadable(t,["#fff","#000"],n))};var N=d.names={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"0ff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000",blanchedalmond:"ffebcd",blue:"00f",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",burntsienna:"ea7e5d",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"0ff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkgrey:"a9a9a9",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkslategrey:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dimgrey:"696969",dodgerblue:"1e90ff",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"f0f",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",grey:"808080",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgray:"d3d3d3",lightgreen:"90ee90",lightgrey:"d3d3d3",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslategray:"789",lightslategrey:"789",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"0f0",limegreen:"32cd32",linen:"faf0e6",magenta:"f0f",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370db",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"db7093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",rebeccapurple:"663399",red:"f00",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",slategrey:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",wheat:"f5deb3",white:"fff",whitesmoke:"f5f5f5",yellow:"ff0",yellowgreen:"9acd32"},O=d.hexNames=function(t){var e={};for(var n in t)t.hasOwnProperty(n)&&(e[t[n]]=n);return e}(N);function R(t){return t=parseFloat(t),(isNaN(t)||t<0||t>1)&&(t=1),t}function M(t,e){(function(t){return"string"==typeof t&&-1!=t.indexOf(".")&&1===parseFloat(t)})(t)&&(t="100%");var n=function(t){return"string"==typeof t&&-1!=t.indexOf("%")}(t);return t=c(e,l(0,parseFloat(t))),n&&(t=parseInt(t*e,10)/100),Math.abs(t-e)<1e-6?1:t%e/parseFloat(e)}function D(t){return c(1,l(0,t))}function P(t){return parseInt(t,16)}function k(t){return 1==t.length?"0"+t:""+t}function B(t){return t<=1&&(t=100*t+"%"),t}function F(t){return Math.round(255*parseFloat(t)).toString(16)}function V(t){return P(t)/255}var U,H,Y,G=(H="[\\s|\\(]+("+(U="(?:[-\\+]?\\d*\\.\\d+%?)|(?:[-\\+]?\\d+%?)")+")[,|\\s]+("+U+")[,|\\s]+("+U+")\\s*\\)?",Y="[\\s|\\(]+("+U+")[,|\\s]+("+U+")[,|\\s]+("+U+")[,|\\s]+("+U+")\\s*\\)?",{CSS_UNIT:new RegExp(U),rgb:new RegExp("rgb"+H),rgba:new RegExp("rgba"+Y),hsl:new RegExp("hsl"+H),hsla:new RegExp("hsla"+Y),hsv:new RegExp("hsv"+H),hsva:new RegExp("hsva"+Y),hex3:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex6:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/,hex4:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex8:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/});function j(t){return!!G.CSS_UNIT.exec(t)}t.exports=d},function(t,e,n){"use strict";var r=n(0),i=r.TOPIC_TYPE,o=r.COMPONENT_TYPE,a=r.MASTER_RANGE,s=n(51).extend({componentType:o.BOUNDARY,initialize:function(){for(var t=arguments.length,e=Array(t),n=0;n<t;n++)e[n]=arguments[n];s.__super__.initialize.apply(this,e),this.updateRange(),this.on("change:range",this.updateRange)},beforeTopicRemove:function(t,e){t.type()===i.ATTACHED&&this.changeBoundaryRange(e,!0)},afterTopicAdd:function(t,e){t.type()===i.ATTACHED&&this.changeBoundaryRange(e,!1)},getRange:function(){return this.get("range")},setRange:function(t){var e=this,n=this.getRange();if(t===n)return!1;this.set("range",t),this.getUndo().add({undo:function(){e.setRange(n)},redo:function(){e.setRange(t)}},"setRange boundary")},updateRange:function(t){var e=this.getRange();e&&(e===a?(this.rangeStart=-1,this.rangeEnd=-1):(this.rangeStart=parseInt(e.match(/\d+/g)[0],10),this.rangeEnd=parseInt(e.match(/\d+/g)[1],10),this.checkRange()),t&&this.parent()&&this.boundaryChanged())},checkRange:function(t){if(!(t=t||this.parent()))return!1;if(this.getRange()===a)return!0;var e=t.children();return!!(this.rangeStart<=this.rangeEnd&&e[this.rangeStart]&&e[this.rangeEnd])||(console.warn("check boundary range fail",this.get("id")),e.length<=this.rangeStart?(this.rangeStart=-1,this.rangeEnd=-1,!1):e.length<=this.rangeEnd?(this.rangeEnd=e.length-1,!0):void 0)},removeSelf:function(t){this.parent()&&this.parent().removeBoundary(this,t)},styleChanged:function(){var t=this.style();t?this.set("style",t.toJSON()):this.unset("style"),this.boundaryChanged()},boundaryChanged:function(t){var e=this.parent();t||((t=e.get("boundaries"))[e.boundaries().indexOf(this)]=this.toJSON()),e.set("boundaries",t),e.topicChanged()},changeBoundaryRange:function(t,e){if(this.getRange()===a)return!1;var n=void 0,r=void 0,i=void 0;if(n=this.rangeStart,r=this.rangeEnd,t>=n&&t<=r)if(e){if(n===r)return this.removeSelf();r--}else r++;else t<n&&(e?(n--,r--):(n++,r++));n===this.rangeStart&&r===this.rangeEnd||(i="("+n+","+r+")",this.setRange(i))},changeTitle:function(t){var e=this,n=this.get("title");if(n===t)return!1;this.set("title",t),this.boundaryChanged(),this.getUndo().add({undo:function(){e.changeTitle(n)},redo:function(){e.changeTitle(t)}})}});t.exports=s},function(t,e,n){"use strict";var r=n(37),i=n(0).COMPONENT_TYPE,o=r.extend({componentType:i.HREF});t.exports=o},function(t,e,n){"use strict";var r=n(37),i=n(0).COMPONENT_TYPE,o=r.extend({componentType:i.LABEL});t.exports=o},function(t,e,n){"use strict";var r,i=(r=n(32))&&r.__esModule?r:{default:r},o=n(37),a=n(0).MODEL_TYPE,s=(n(1),n(0).EVENTS),u=o.extend({componentType:a.LEGEND,modelEvents:{legendAddMarker:"legendAddMarker",legendRemoveMarker:"legendRemoveMarker",legendMarkerDescChanged:"legendMarkerDescChanged"},initialize:function(t,e){u.__super__.initialize.apply(this,arguments),this.parent(e.parentModel),this.liveMarkerMap={},this.initAttr=t,this.initEventsListener()},initEventsListener:function(){var t=this.parent(),e=t.modelEvents;this.listenTo(t,e.topicAddMarker,this.onTopicAddMarker),this.listenTo(t,e.topicChangeMarker,this.onTopicChangeMarker),this.listenTo(t,e.topicRemoveMarker,this.onTopicRemoveMarker),this.on("change",this.onChange)},onChange:function(){this.parent().set("legend",this.toJSON()),this.ownerSheet().trigger(s.AFTER_SHEET_CONTENT_CHANGE)},onTopicAddMarker:function(t){var e=this.liveMarkerMap,n=t.cid?t.get("markerId"):t.markerId;e[n]?e[n]++:(e[n]=1,this.trigger(this.modelEvents.legendAddMarker,n))},onTopicChangeMarker:function(t,e){var n=this.liveMarkerMap,r=e.cid?e.get("markerId"):e.markerId;--n[t]||this.trigger(this.modelEvents.legendRemoveMarker,t),n[r]||(n[r]=0,this.trigger(this.modelEvents.legendAddMarker,r)),n[r]++},onTopicRemoveMarker:function(t){var e=this.liveMarkerMap,n=t.cid?t.get("markerId"):t.markerId;--e[n]||(delete e[n],this.trigger(this.modelEvents.legendRemoveMarker,n))},setLegendDisplay:function(t){var e=this;this.set("visibility",t?"visible":"hidden"),this.getUndo().add({undo:function(){e.setLegendDisplay(!t)},redo:function(){e.setLegendDisplay(t)}})},setLegendPosition:function(t){var e=this,n=this.get("position");t?this.set("position",t):this.unset("position"),this.getUndo().add({undo:function(){e.setLegendPosition(n)},redo:function(){e.setLegendPosition(t)}})},setUserMarkerDescription:function(t,e){var n=this,r=JSON.parse((0,i.default)(this.get("markers")||{})),o=(r[t]||{}).name;e?r[t]={name:e}:delete r[t],this.set("markers",r),this.trigger(this.modelEvents.legendMarkerDescChanged),this.getUndo().add({undo:function(){n.setUserMarkerDescription(t,o)},redo:function(){n.setUserMarkerDescription(t,e)}})}});t.exports=u},function(t,e,n){"use strict";var r=n(37),i=n(0).MODEL_TYPE,o=r.extend({componentType:i.MARKER,initialize:function(){o.__super__.initialize.apply(this,arguments)}});t.exports=o},function(t,e,n){"use strict";var r=n(37),i=n(0).COMPONENT_TYPE,o=r.extend({componentType:i.NOTE});t.exports=o},function(t,e,n){"use strict";var r=n(37),i=n(0).COMPONENT_TYPE,o=r.extend({componentType:i.NUMBERING,createEmptyNumbering:function(){return{numberFormat:"",numberSeparator:"",prefix:"",suffix:""}}});t.exports=o},function(t,e,n){"use strict";var r=o(n(3)),i=o(n(11));function o(t){return t&&t.__esModule?t:{default:t}}var a=n(51),s=n(0).COMPONENT_TYPE,u=n(0).EVENTS,c=a.extend({componentType:s.RELATIONSHIP,changeEndPoint:function(t){var e=this,n=void 0,r={};if(["end1Id","end2Id"].some(function(e){var i=t[e];if(i&&i!==(r[e]=this.get(e)))return this.set(e,i),n=!0},this),n){var i=this.parent(),o=i.get("relationships");o[i.relationships().indexOf(this)]=this.toJSON(),i.set("relationships",o),i.trigger(u.AFTER_SHEET_CONTENT_CHANGE),this.trigger("change:endPoint"),this.getUndo().add({undo:function(){e.changeEndPoint(r)},redo:function(){e.changeEndPoint(t)}},"changeEndPoint")}},removeSelf:function(){this.parent()&&this.parent().removeRelationship(this)},changeControlPosition:function(t){var e,n=this,o=function(t){return 0===(0,i.default)(t).length},a=this.parent(),s=a.get("relationships"),c=a.relationships().indexOf(this),l=this.get("controlPoints");e=void 0===l||o(l)?void 0:(0,r.default)({},l),l=void 0===t||o(t)?void 0:(0,r.default)(void 0===l?{}:l,t),this.set("controlPoints",l),s[c]=this.toJSON(),a.set("relationships",s),a.trigger(u.AFTER_SHEET_CONTENT_CHANGE),this.getUndo().add({undo:function(){n.changeControlPosition(e)},redo:function(){n.changeControlPosition(t)}},"changeControlPosition"),this.trigger("refresh",!0)},styleChanged:function(){var t=this.style();t?this.set("style",t.toJSON()):this.unset("style"),this._save()},changeTitle:function(t){var e=this,n=this.get("title");if(n===t)return!1;this.set("title",t),this.getUndo().add({undo:function(){return e.changeTitle(n)},redo:function(){return e.changeTitle(t)}},"R-changeTitle"),this._save()},_save:function(){var t=this.parent(),e=t.get("relationships");e[t.relationships().indexOf(this)]=this.toJSON(),t.set("relationships",e),this.parent().trigger(u.AFTER_SHEET_CONTENT_CHANGE)}});t.exports=c},function(t,e,n){"use strict";var r,i=(r=n(2))&&r.__esModule?r:{default:r},o={};[n(248),n(249),n(250),n(251),n(252),n(253),n(254),n(255),n(257),n(258),n(259),n(260)].forEach(function(t){o[t.prototype.componentType.toLowerCase()]=t});var a=function(){function t(e){(0,i.default)(this,t),this.sheet=e}return t.prototype.create=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};n.sheet=this.sheet;var r=new(o[t.toLowerCase()])(e,n);return this.sheet.registerComponent(r),r},t}();t.exports=a},function(t,e,n){"use strict";var r=n(51),i=n(0),o=i.COMPONENT_TYPE,a=i.TOPIC_TYPE,s=n(1),u=r.extend({componentType:o.SUMMARY,initialize:function(){u.__super__.initialize.apply(this,arguments),this.updateRange(),this.on("change:range",this.updateRange)},beforeTopicRemove:function(t,e){t.type()===a.ATTACHED&&this.changeSummaryRange(e,!0)},afterTopicAdd:function(t,e){t.type()===a.ATTACHED&&this.changeSummaryRange(e,!1)},setRange:function(t){var e=this,n=this.get("range");if(t===n)return!1;this.set("range",t),this.getUndo().add({undo:function(){e.setRange(n)},redo:function(){e.setRange(t)}},"setRange summary")},checkRange:function(t){if(!(t=t||this.parent()))return!1;var e=t.children();return!!(this.rangeStart<=this.rangeEnd&&e[this.rangeStart]&&e[this.rangeEnd])||(console.warn("check summary range fail",this.get("id")),e.length<=this.rangeStart?(this.rangeStart=-1,this.rangeEnd=-1,!1):e.length<=this.rangeEnd?(this.rangeEnd=e.length-1,!0):void 0)},updateRange:function(t){var e=this.get("range");e&&("master"===e?(this.rangeStart=-1,this.rangeEnd=-1):(this.rangeStart=parseInt(e.match(/\d+/g)[0],10),this.rangeEnd=parseInt(e.match(/\d+/g)[1],10),this.checkRange()),t&&this.summaryChanged())},refreshSelf:function(){},styleChanged:function(){var t=this.style();t?this.set("style",t.toJSON()):this.unset("style"),this.summaryChanged()},changeSummaryRange:function(t,e){var n,r,i;if(n=this.rangeStart,r=this.rangeEnd,t>=n&&t<=r)if(e){if(n===r){var o=this.getSummaryTopic();if(o)return o.removeSelf()}r--}else r++;else t<n&&(e?(n--,r--):(n++,r++));i="("+n+","+r+")",n===this.rangeStart&&r===this.rangeEnd||this.setRange(i)},getSummaryTopic:function(){var t=this.get("topicId"),e=this.parent();if(e){var n=e.children(a.SUMMARY);return s.find(n,function(e){return e.get("id")===t})}},summaryChanged:function(){var t=this.parent();if(t){var e=t.get("summaries");e[t.summaries().indexOf(this)]=this.toJSON(),t.set("summaries",e),t.topicChanged()}}});t.exports=u},function(t,e,n){"use strict";var r=o(n(17)),i=o(n(11));function o(t){return t&&t.__esModule?t:{default:t}}var a=n(37),s=n(0).COMPONENT_TYPE,u=a.extend({componentType:s.THEME,properties:function(){return this._properties||(this._properties={}),this._properties},addProperties:function(t,e){this.properties()[t]=e},emptyProperties:function(){this._properties={}},hasClass:function(t){return!!this.properties()[t]},getStyleValue:function(t,e){var n=this.properties()[t];return n&&n.properties&&n.properties[e]},getStyle:function(t){var e=this.properties()[t];if(e&&e.properties){var n={},o=(0,i.default)(e.properties),a=Array.isArray(o),s=0;for(o=a?o:(0,r.default)(o);;){var u;if(a){if(s>=o.length)break;u=o[s++]}else{if((s=o.next()).done)break;u=s.value}var c=u;n[c]=e.properties[c]}return n}}});t.exports=u},function(t,e,n){"use strict";var r=u(n(3)),i=u(n(32)),o=u(n(11)),a=u(n(2)),s=u(n(66));function u(t){return t&&t.__esModule?t:{default:t}}var c=n(51),l=n(0),h=l.TOPIC_TYPE,d=l.EVENTS,f=l.STRUCTURECLASS,p=l.CLASS_TYPE,g=l.MODEL_TYPE,v=l.VIEW_TYPE,m=l.TOPIC_MAX_CUSTOM_WIDTH,y=n(1);function _(t,e){for(var n=0,r=t.length;n<r;n++)if(t[n].rangeStart===e.rangeStart&&t[n].rangeEnd===e.rangeEnd)return!0;return!1}var E=function(){function t(e){var n=this;(0,a.default)(this,t),this.ExMap={},e.forEach(function(t){var e=t.provider;n.ExMap[e]=t})}return t.prototype.add=function(t,e){this.ExMap[t]=e},t.prototype.remove=function(t){delete this.ExMap[t]},t.prototype.getExtension=function(t){return this.ExMap[t]},t.prototype.getInfo=function(){var t=this;return(0,o.default)(this.ExMap).map(function(e){return t.ExMap[e]})},t}(),A=c.extend({componentType:g.TOPIC,modelEvents:{addMarker:"addMarker",changeMarker:"changeMarker",removeMarker:"removeMarker",labelsChanged:"labelsChanged",informationChanged:"informationChanged",changeCustomWidth:"changeCustomWidth"},extensionProviders:{taskInfo:"org.xmind.ui.taskInfo",audioNotes:"org.xmind.ui.audionotes",unbalanced:"org.xmind.ui.map.unbalanced",spreadsheet:"org.xmind.ui.spreadsheet"},initialize:function(){A.__super__.initialize.apply(this,arguments),this.get("id")||this.set("id",this.ownerSheet().generateComponentId())},removeRelatedComponent:function(){var t=this;[].concat(this.children(h.ATTACHED),this.children(h.SUMMARY),this.children(h.CALLOUT),this.children(h.DETACHED)).forEach(function(t){return t.removeRelatedComponent()}),this.boundaries().forEach(function(e){return t.removeRelationship(e.get("id"))}),this.markers().forEach(function(e){return t.ownerSheet().trigger(t.ownerSheet().modelEvents.topicRemoveMarker,e)}),this.removeRelationship(this.get("id"))},addRelatedComponent:function(){var t=this;[].concat(this.children(h.ATTACHED),this.children(h.SUMMARY),this.children(h.CALLOUT),this.children(h.DETACHED)).forEach(function(t){return t.addRelatedComponent()}),this.markers().forEach(function(e){return t.ownerSheet().trigger(t.ownerSheet().modelEvents.topicAddMarker,e)})},createEmptyTopic:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=this.ownerSheet().createComponent("topic");return(0,o.default)(t).forEach(function(n){return e.set(n,t[n])}),e},createTopic:function(t){return t=JSON.parse((0,i.default)(t)),(0,s.default)(t,this.ownerSheet())},children:function(){for(var t=this,e=arguments.length,n=Array(e),r=0;r<e;r++)n[r]=arguments[r];if(Array.isArray(n[0])&&(n=n[0]),n.length>1){var i=[];return n.forEach(function(e){return i=i.concat(t.children(e))}),i}var o=n[0]||h.ATTACHED;this._children||(this._children={});var a=this._children[o];return a||(a=[],this._children[o]=a),a},getDescendantList:function(){for(var t=arguments.length,e=Array(t),n=0;n<t;n++)e[n]=arguments[n];var r=[],i=this.children(e);return i.length?(r.push.apply(r,i),i.forEach(function(t){r.push.apply(r,t.getDescendantList.apply(t,e))}),r):r},boundaries:function(){this._boundaries||(this._boundaries=[]);var t=this._boundaries;return t.length||(t=[],this._boundaries=t),t},summaries:function(){this._summaries||(this._summaries=[]);var t=this._summaries;return t.length||(t=[],this._summaries=t),t},markers:function(){this._markers||(this._markers=[]);var t=this._markers;return t.length||(t=[],this._markers=t),t},extensions:function(){if(!this._extensions){var t=this.get("extensions")||[];this._extensions=new E(t)}return this._extensions},addExtension:function(t,e,n){n||(this.extensions().add(t,e),this.syncExtension())},removeExtension:function(t){this.extensions().remove(t),this.syncExtension()},syncExtension:function(){var t=this.extensions().getInfo();this.set("extensions",t),this.topicChanged()},type:function(){return this._type||h.ATTACHED},canCollapse:function(){return this.children().length>0&&!this.isCentralTopic()},isCollapse:function(){return"folded"===this.get("branch")&&this.canCollapse()},extendBranch:function(){var t=this;this.isCollapse()&&(this.unset("branch"),this.topicChanged(),this.trigger(d.SE_BRANCH_COLLAPSE_TOGGLE,this.isCollapse()),this.getUndo().add({undo:function(){t.collapseBranch()},redo:function(){t.extendBranch()}}))},collapseBranch:function(){var t=this;this.canCollapse()&&!this.isCollapse()&&(this.set("branch","folded"),this.topicChanged(),this.trigger(d.SE_BRANCH_COLLAPSE_TOGGLE,this.isCollapse()),this.getUndo().add({undo:function(){t.extendBranch()},redo:function(){t.collapseBranch()}}))},toggleCollapse:function(){this.isCollapse()?this.extendBranch():this.collapseBranch()},getStyledTopicType:function(){if(this.hasAncestor()){if(this.isRootTopic())return p.CENTRAL_TOPIC;switch(this._type){case h.SUMMARY:return p.SUMMARY_TOPIC;case h.DETACHED:return p.FLOATING_TOPIC;case h.CALLOUT:return p.CALLOUT_TOPIC;default:return this.parent().isRootTopic()?p.MAIN_TOPIC:p.SUB_TOPIC}}},getPosition:function(){var t=this.get("position");return t&&null!=t.x&&null!=t.y?t:{x:0,y:0}},isSummary:function(){return this._type===h.SUMMARY},isCallout:function(){return this._type===h.CALLOUT},isDetacthed:function(){return this._type===h.DETACHED},isDetached:function(){return this._type===h.DETACHED},isFree:function(){return this.ownerSheet().isFreePositionEnabled()&&"mainTopic"===this.getStyledTopicType()&&-1!==(this.parent().getStructureClass()||"").search(f.MAP)},addBrotherTopic:function(t,e){var n=e.before,i=void 0!==n&&n,o=e.position,a=e.title;if(this.isSummary())return!1;if(!this.isRootTopic()){var s=this.getIndexInParent(),u=i?s:s+1,c=this.type(),l=t?this.createTopic(t):this.createEmptyTopic({title:a});return(this.isCallout()||this.isDetached())&&(this.isDetached(),o=(0,r.default)({},o),l.set("position",o)),this.parent().addChildTopic(l,{at:u,type:c,sourceIndex:s,position:o})}},addChildTopic:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments[2],r=t||this.createEmptyTopic({title:""});e.type=e.type||h.ATTACHED;var i=this.children(e.type);e.at=void 0===e.at||e.at<0?i.length:e.at,this._addTopic(r,e,n),this._modifyUnbalanceInfoOnAddTopic(e,n);var o=e.sourceIndex;return this.boundaries().forEach(function(t){t.afterTopicAdd(r,o)}),this.summaries().forEach(function(t){t.afterTopicAdd(r,o)}),r},syncTopic:function(t,e){var n=e.toJSON(),r=this.get("children")||{};r[t.type]?r[t.type].splice(t.at,0,n):(r[t.type]=[n],this.set("children",r)),this.topicChanged()},_addTopic:function(t,e,n){var r=this;this.ownerSheet().trigger(d.BEFORE_ADD_TOPIC,{parent:this,at:e.at,type:e.type||h.ATTACHED,topic:t}),n||this.syncTopic(e,t);var i=this.children(e.type);t.parent(this),t._type=e.type,i.splice(e.at,0,t),this.getUndo().isExecuting()&&t.addRelatedComponent(),t.type()===h.SUMMARY&&(e.noAnimation=!0),this.trigger("addTopic",t,e,n),this.ownerSheet().trigger(d.AFTER_ADD_TOPIC,{parent:this,at:e.at,type:e.type||h.ATTACHED,topic:t}),n||this.getUndo().add({undo:function(){r._removeTopic(e)},redo:function(){r._addTopic(t,e,n)}},"addTopic")},removeSelf:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=this.getIndexInParent(),n=this.type(),r=this.parent();if(e<0)return!1;switch(t.at=e,t.type=n,n){case h.ROOT:return;case h.ATTACHED:case h.DETACHED:case h.CALLOUT:return r.removeChildTopic(t);case h.SUMMARY:var i=this.get("id"),o=r.getSummaryByTopicId(i);return o?(t.summaryModel=o,r.removeSummary(t)):r.removeChildTopic(t)}},removeChildTopic:function(t){var e=t.at,n=t.type,r=this.children(n)[e];this.boundaries().filter(function(t){return t.rangeStart===t.rangeEnd&&t.rangeStart===e}).forEach(function(t){return t.beforeTopicRemove(r,e)}),this.summaries().filter(function(t){return t.rangeStart===t.rangeEnd&&t.rangeStart===e}).forEach(function(t){return t.beforeTopicRemove(r,e)}),this.boundaries().slice().forEach(function(t){t.beforeTopicRemove(r,e)}),this.summaries().slice().forEach(function(t){t.beforeTopicRemove(r,e)}),this._modifyUnbalanceInfoOnRemoveTopic(t),this._removeTopic(t)},_removeTopic:function(t){var e=this,n=t.at,r=t.type,i=this.children(r),o=i[n];this.ownerSheet().trigger(d.BEFORE_REMOVE_TOPIC,{parent:this,at:n,type:r,topic:o}),o.removeRelatedComponent(),o.parent(null),i.splice(n,1);var a=this.get("children");a[r].splice(n,1),a[r].length||delete a[r],y.isEmpty(a)&&this.unset("children"),this.topicChanged(),this.trigger("removeTopic",o,t),this.ownerSheet().trigger(d.AFTER_REMOVE_TOPIC,{parent:this,at:n,type:r,topic:o}),this.getUndo().add({undo:function(){e._addTopic(o,t)},redo:function(){e._removeTopic(t)}},"removeTopic")},moveChildTopic:function(t,e){var n=this;if(void 0!==t&&void 0!==e&&t!==e){var r=this.children(h.ATTACHED);if(t>=0&&t<=r.length-1&&e>=0&&e<=r.length-1){var i=r[t];r.splice(t,1),r.splice(e,0,i),this.get("children")[h.ATTACHED].splice(t,1),this.get("children")[h.ATTACHED].splice(e,0,i.toJSON()),this.topicChanged(),this.trigger("moveChildTopic",t,e),this.getUndo().add({undo:function(){n.moveChildTopic(e,t)},redo:function(){n.moveChildTopic(t,e)}},"moveChildTopic")}}},getId:function(){return this.get("id")},_getComponent:function(t,e){return t.cid?t:this.ownerSheet().createComponent(e,t)},syncBoundaries:function(){var t=this.boundaries().map(function(t){return t.toJSON()});this.set("boundaries",t),this.topicChanged()},addBoundary:function(t,e){var n=this,r=this.boundaries(),i=this._getComponent(t,"boundary");return!_(r,i)&&!!i.checkRange(this)&&(i.parent(this),r.push(i),e||this.syncBoundaries(),this.trigger("addBoundary",i),e||this.getUndo().add({undo:function(){n.removeBoundary(i)},redo:function(){n.addBoundary(i,e)}},"addBoundary"),i)},removeBoundary:function(t){var e=this,n=this.boundaries(),r=n.indexOf(t);return r<0?this:(this.removeRelationship(t.get("id")),this.get("boundaries").splice(r,1),this.topicChanged(),n.splice(r,1),t.parent(null),this.trigger("removeBoundary",t,this),this.getUndo().add({undo:function(){e.addBoundary(t)},redo:function(){e.removeBoundary(t)}},"removeBoundary"),this)},syncSummaries:function(){var t=this.summaries().map(function(t){return t.toJSON()});this.set("summaries",t),this.topicChanged()},addSummary:function(t,e,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},i=this._addSummary(t,e,r);return!!i&&(n&&this.addChildTopic(n,{type:h.SUMMARY,summaryModel:i}),i)},_addSummary:function(t,e){var n=this,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i=this.summaries(),o=this._getComponent(t,"summary");return!_(i,o)&&!!o.checkRange(this)&&(o.parent(this),i.push(o),e||this.syncSummaries(),this.trigger("addSummary",o),e||this.getUndo().add({undo:function(){n._removeSummary(r,o)},redo:function(){n._addSummary(t,e,r)}},"addSummary"),o)},getSummaryByTopicId:function(t){for(var e=this.summaries(),n=0,r=e.length;n<r;n++){var i=e[n];if(i.get("topicId")===t)return i}return null},removeSummary:function(t){var e=t.summaryModel;this.removeChildTopic(t),this._removeSummary(t,e)},_removeSummary:function(t,e){var n=this,r=e.get("id");e.parent(null);var i=this.get("summaries");return this.summaries(),this.set("summaries",i.filter(function(t){return t.id!==r})),this._summaries=this._summaries.filter(function(t){return t.get("id")!==r}),this.topicChanged(),this.trigger("removeSummary",e),this.getUndo().add({undo:function(){n._addSummary(e,null,t)},redo:function(){n._removeSummary(t,e)}},"removeSummary"),this},changeMarker:function(t,e){var n=this,r=this.get("markers")||[],i=this.markers(),o=r[e].markerId;if(o===t.markerId)return this;var a=this.modelEvents.changeMarker;r[e].markerId=t.markerId,i[e].set("markerId",t.markerId),this.trigger(a,o,t.markerId);var s={markerId:o,groupId:t.groupId};this.getUndo().add({undo:function(){n.changeMarker(s,e)},redo:function(){n.changeMarker(t,e)}},a),this.topicChanged();var u=this.ownerSheet().createComponent("marker",t),c=this.ownerSheet();return c.trigger(c.modelEvents.topicChangeMarker,o,u),this},addMarker:function(t){var e=this,n=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=this.get("markers")||[],i=this.markers(),o={markerId:t.markerId},a=this.ownerSheet().createComponent(g.MARKER,o);n||(r.push(o),this.set("markers",r),this.topicChanged()),i.push(a);var s=this.modelEvents.addMarker;this.trigger(s,a,i.indexOf(a)),n||this.getUndo().add({undo:function(){e.removeMarker(t)},redo:function(){e.addMarker(t,n)}},s);var u=this.ownerSheet();return u.trigger(u.modelEvents.topicAddMarker,t),this},removeMarker:function(t){var e=this,n=this.get("markers")||[],r=this.markers(),i=t.markerId,o=this.get("markers").findIndex(function(t){return t.markerId===i});if(-1===o)return this;n.splice(o,1);var a=r.splice(o,1)[0];a.parent(null);var s=this.modelEvents.removeMarker;this.trigger(s,a),this.getUndo().add({undo:function(){e.addMarker(t)},redo:function(){e.removeMarker(t)}},s),this.topicChanged();var u=this.ownerSheet();return u.trigger(u.modelEvents.topicRemoveMarker,t),this},getTaskInfo:function(){return this.extensions().getExtension(this.extensionProviders.taskInfo)},addTaskInfo:function(t,e){var n=this;return this.addExtension(this.extensionProviders.taskInfo,t,e),this.trigger(this.modelEvents.informationChanged,v.TASK),e||this.getUndo().add({undo:function(){n.removeTaskInfo()},redo:function(){n.addTaskInfo(t,e)}}),this},removeTaskInfo:function(){var t=this,e=this.getTaskInfo();return this.removeExtension(this.extensionProviders.taskInfo),this.trigger(this.modelEvents.informationChanged,v.TASK),this.getUndo().add({undo:function(){t.addTaskInfo(e)},redo:function(){t.removeTaskInfo()}}),this},getAudioNotes:function(){return this.extensions().getExtension(this.extensionProviders.audioNotes)},addAudioNotes:function(t,e){return this.addExtension(this.extensionProviders.audioNotes,t,e),this.trigger(this.modelEvents.informationChanged,v.AUDIO),this},removeAudioNotes:function(){var t=this,e=this.getAudioNotes();return this.removeExtension(this.extensionProviders.audioNotes),this.trigger(this.modelEvents.informationChanged,v.AUDIO),this.getUndo().add({undo:function(){t.addAudioNotes(e)},redo:function(){t.removeAudioNotes()}}),this},addMapUnbalanced:function(t,e){return this.addExtension(this.extensionProviders.unbalanced,t,e),this},getImageData:function(){return this.get("image")},changeImage:function(t,e){var n=this,r=this.get("image");return r?(e?this.trigger("changeImage",t.src):(this.set("image",t),this.trigger("changeImage"),this.topicChanged()),this.getUndo().add({undo:function(){n.changeImage(r)},redo:function(){n.changeImage(t)}},"changeImage"),this):this.addImage(t,e)},addImage:function(t,e){var n=this,r=this.get("image");return r&&r.src&&this.removeImage(),e?this.trigger("addImage",t.src):(this.set("image",t),this.topicChanged(),this.trigger("addImage")),this.getUndo().add({undo:function(){n.removeImage()},redo:function(){n.addImage(t)}},"changeImage"),this},removeImage:function(){var t=this,e=(0,r.default)({},this.get("image"));return this.unset("image"),this.topicChanged(),this.trigger("removeImage"),this.getUndo().add({undo:function(){t.addImage(e)},redo:function(){t.removeImage()}},"removeImage"),this},resizeImage:function(t){var e=this,n=this.get("image"),r={width:n.width,height:n.height};y.isEqual(t,r)||(this.set("image",y.extend({},n,t)),this.trigger("resizeImage",t),this.topicChanged(),this.getUndo().add({undo:function(){return e.resizeImage(r)},redo:function(){return e.resizeImage(t)}},"resizeImage"))},alignImage:function(t){var e=this,n=this.get("image"),r=n.align;t!==r&&(n.align=t,this.trigger("alignImage"),this.topicChanged(),this.getUndo().add({undo:function(){return e.alignImage(r)},redo:function(){return e.alignImage(t)}}))},getLabel:function(){return(this.get("labels")||[]).join(",")},changeLabel:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";e=e.trim();var n=this.getLabel();if(e===n)return!1;e?this.set("labels",e.split(",")):this.unset("labels"),this.trigger(this.modelEvents.labelsChanged),this.topicChanged(),this.getUndo().add({undo:function(){t.changeLabel(n)},redo:function(){t.changeLabel(e)}},this.modelEvents.labelsChanged)},getNotes:function(){return this.get("notes")},changeNote:function(t){var e=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};"string"==typeof t&&(t={plain:{content:t}});var r=this.getNotes();if(y.isEqual(r,t))return!1;t?this.set("notes",t):this.unset("notes"),this.trigger(this.modelEvents.informationChanged,v.NOTE),this.topicChanged(),this.getUndo().add({undo:function(){e.changeNote(r,n)},redo:function(){e.changeNote(t,n)}},this.modelEvents.informationChanged)},getHref:function(){return this.get("href")},changeHref:function(t){var e=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=this.getHref();if(t===r)return!1;(t=(t||"").trim())?this.set("href",t):this.unset("href"),this.trigger(this.modelEvents.informationChanged,v.HREF),this.topicChanged(),this.getUndo().add({undo:function(){e.changeHref(r,n)},redo:function(){e.changeHref(t,n)}},this.modelEvents.informationChanged)},getComments:function(){return this.get("comments")},changeComments:function(t){var e=this,n=this.getComments();t?this.set("comments",t):this.unset("comments"),this.topicChanged(),this.trigger(this.modelEvents.informationChanged,v.COMMENT),this.getUndo().add({undo:function(){return e.changeComments(n)},redo:function(){return e.changeComments(t)}})},addNumbering:function(t){return this.set("numbering",t),this.trigger("addNumbering"),this},changeNumbering:function(t,e){var n=this.get("numbering");return y.isEmpty(n)?((n={numberFormat:"",numberSeparator:"",prefix:"",suffix:""})[t]=e,this.addNumbering(n)):(n[t]=e,this.set("numbering",n),this.trigger("changeNumbering")),this.topicChanged(),this},_changeStructure:function(t){var e=this,n=this.getStructureClass();this.set("structureClass",t),this.trigger("changeStructureClass",t),this.topicChanged(),this.getUndo().add({undo:function(){e._changeStructure(n)},redo:function(){e._changeStructure(t)}})},changeStructure:function(t){this.getStructureClass()!==t&&(this._changeStructure(t),t!==f.SPREADSHEET&&t!==f.COLUMNSPREADSHEET||0!==this.children(h.ATTACHED).length||function(t){var e=function(t){var e=function(t){var e=t.getStyledTopicType(),n=t.children(h.ATTACHED).length+1;return("centralTopic"===e?t.ownerSheet().getTranslatedText("DEFAULT_MAIN_TOPIC_TITLE"):t.ownerSheet().getTranslatedText("DEFAULT_SUBTOPIC_TITLE"))+" "+n}(t),n=t.createEmptyTopic({title:e});return t.addChildTopic(n)},n=e(t),r=(e(t),e(n)),i=e(n),o=t.ownerSheet().getTranslatedText("LABEL_TITLE");r.changeLabel(o+" 1"),i.changeLabel(o+" 2")}(this))},getIndexById:function(t,e){return t.findIndex(function(t){return t.id===e})},getChildrenIndexById:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:h.ATTACHED;return this.children(e).findIndex(function(e){return e.id===t})},getIndexInParent:function(){return this._type===h.ROOT?0:this.parent().children([this._type]).indexOf(this)},removeRelationship:function(t){var e=this.ownerSheet();e&&e.relationships().length&&e.relationships().filter(function(e){return e.get("end1Id")===t||e.get("end2Id")===t}).forEach(function(t){return e.removeRelationship(t)})},styleChanged:function(){var t=this.style();t?this.set("style",t.toJSON()):this.unset("style"),this.topicChanged()},topicChanged:function(){var t=this.parent();if(t){if(t.componentType===g.SHEET)t.sheetChanged(this);else{var e=this.type(),n=t.children(e).indexOf(this);-1!==n&&(t.get("children")[e][n]=this.toJSON()),t.topicChanged()}return this}},changeTitle:function(t){var e=this,n=this.get("title");if(t===n)return!1;this.set("title",t),this.topicChanged(),this.getUndo().add({undo:function(){e.changeTitle(n)},redo:function(){e.changeTitle(t)}},"changeTitle")},getTitle:function(){return this.get("title")||""},changePosition:function(t){var e=this,n=this.get("position");this.set("position",t),this.topicChanged(),this.getUndo().add({undo:function(){e.changePosition(n)},redo:function(){e.changePosition(t)}},"changePosition")},clearPosition:function(){var t=this,e=this.get("position");e&&(this.unset("position"),this.topicChanged(),this.getUndo().add({undo:function(){t.changePosition(e)},redo:function(){t.clearPosition()}},"clearPosition"))},removePendantItem:function(t){var e={href:"changeHref",label:"changeLabel",note:"changeNote",image:"removeImage",task:"removeTaskInfo",audioNotes:"removeAudioNotes"};this[e[t]]&&this[e[t]]()},isCentralTopic:function(){return"root"===this.type()},getMatrixLabelInfos:function(){var t=this.extensions().getExtension(this.extensionProviders.spreadsheet);if(t){var e=t.content;if(e)for(var n=0;n<e.length;n++){var r=e[n];if("columns"===r.name)return r.content.map(function(t){return t.content})}}},setMatrixLabelInfos:function(t,e){var n={name:"columns",content:t.map(function(t){return{name:"column",content:t}})},r={provider:this.extensionProviders.spreadsheet,content:[n]};this.addExtension(this.extensionProviders.spreadsheet,r)},unBalancedInfo:function(){var t=this.extensions().getExtension(this.extensionProviders.unbalanced);if(!t)return!1;var e=t.content;if(e&&0!==e.length){var n=e[0];if(n.content&&n.name)return n}return!1},unBalancedInfoTotal:function(){return this.extensions().getExtension(this.extensionProviders.unbalanced)},setUnBalancedInfoContent:function(t,e){var n=this,r=this.unBalancedInfoTotal();if(r){var i=r.content;if(i[0]){var o=i[0].content;i[0].content=t+"",this.addExtension(this.extensionProviders.unbalanced,r),this.trigger("unbalancedInfoUpdated",o,t),!e&&this.getUndo().add({undo:function(){n.setUnBalancedInfoContent(o)},redo:function(){n.setUnBalancedInfoContent(t)}},"setUnbalancedInfoContent")}}},_modifyUnbalanceInfoOnRemoveTopic:function(t){if(this.getStructureClass()===f.MAPUNBALANCED&&t.type===h.ATTACHED){var e=this.unBalancedInfo(),n=parseInt(e.content);t.at<n&&this.setUnBalancedInfoContent(Math.max(0,n-1))}},_modifyUnbalanceInfoOnAddTopic:function(t,e){if(!e&&this.getStructureClass()===f.MAPUNBALANCED&&t.type===h.ATTACHED){var n=this.unBalancedInfo(),r=parseInt(n.content),i=this._children.attached.length-1;("right"===t.side||"left"!==t.side&&(void 0!==t.sourceIndex?r===i?t.sourceIndex!==r-1||r<3:t.sourceIndex<r:r===i&&r<3))&&this.setUnBalancedInfoContent(r+1,e)}},isRootTopic:function(){return!(!this.parent()||!this.parent().rootTopic)},traverseTopic:function(t,e){if(e)return!(-1===t.indexOf(this.type())||!e(this))||void this.children(t).some(function(n){return n.traverseTopic(t,e)})},getStructureClass:function(){var t=this.get("structureClass");return t||(t=this.getStyleValue("structureClass")),t},getStructurePolicy:function(){return this.getStructureClass()||(this.parent()&&this.parent().getStructurePolicy?this.parent().getStructurePolicy():"")},getLayer:function(){if(this.isRootTopic())return 1;var t=this.parent();return t&&t.getLayer?t.getLayer()+1:(console.log("[Warning]Topic default layer number:",this),3)},customWidth:function(t){var e=this;if(void 0===this._customWidth&&(this._customWidth=this.get("customWidth")||0),void 0===t)return this._customWidth;if("number"==typeof t&&t!==this._customWidth){var n=t;n>m?n=m:n<0&&(n=0);var r=this._customWidth;this._customWidth=n,this.set("customWidth",this._customWidth),this.topicChanged(),this.trigger(this.modelEvents.changeCustomWidth,n),this.getUndo().add({undo:function(){e.customWidth(r)},redo:function(){e.customWidth(t)}},"changeCustomWidth")}}});t.exports=A},function(t,e,n){"use strict";var r=n(37),i=n(0).COMPONENT_TYPE,o=r.extend({componentType:i.IMAGE});t.exports=o},function(t,e,n){"use strict";e.__esModule=!0;var r=u(n(2)),i=n(0),o=u(n(9)),a=u(n(97)),s=n(5);function u(t){return t&&t.__esModule?t:{default:t}}var c={READY:"ready",SELECT_ONE:"select_one",SELECT_ANOTHER:"select_another",FINISH:"finish"},l="start",h="add",d="stop",f=[{from:c.READY,emit:l,to:c.SELECT_ONE},{from:c.SELECT_ONE,emit:h,to:c.SELECT_ANOTHER},{from:c.SELECT_ONE,emit:d,to:c.READY},{from:c.SELECT_ANOTHER,emit:h,to:c.FINISH},{from:c.SELECT_ANOTHER,emit:d,to:c.READY},{from:c.FINISH,emit:d,to:c.READY}],p=function(){function t(e){(0,r.default)(this,t),this._context=e,this._currentState=c.READY,this._end1View=null,this._end2View=null,this._movingRelationship=null,this._clickBranchOrBoundaryCallback=this._clickBranchOrBoundaryCallback.bind(this),this._clickSheetCallback=this._clickSheetCallback.bind(this),this._escFn=this._escFn.bind(this),this._mouseMoveCallback=this._mouseMoveCallback.bind(this)}return t.prototype.isReady=function(){return this._isState(c.READY)},t.prototype.start=function(){var t=this;if(this.isReady()){var e=this._context.getModule(i.MODULE_NAME.SELECTION).selections;e.length>2||(this._transit(l),e.forEach(function(e){t._transit(h,{endView:e})}))}},t.prototype.cancel=function(){this._transit(d)},t.prototype._transit=function(t){var e=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=f.find(function(n){return n.from===e._currentState&&n.emit===t});if(r&&this._shouldTransit(r.to,n))switch(this._currentState=r.to,v(this._context,this._currentState),this._currentState){case c.SELECT_ONE:this._onSelectOne();break;case c.SELECT_ANOTHER:this._onSelectAnother(n);break;case c.FINISH:this._onFinish(n);break;case c.READY:this._onReady()}},t.prototype._shouldTransit=function(t,e){var n="_should"+E("_"+t);return!this[n]||this[n](e)},t.prototype._isState=function(t){return t===this._currentState},t.prototype._onSelectOne=function(){var t;this._context.getModule(i.MODULE_NAME.SEMAPHORE).increase(i.UI_STATUS.ADD_RELATIONSHIP),g(this._context,i.VIEW_TYPE.BRANCH,this._clickBranchOrBoundaryCallback),g(this._context,i.VIEW_TYPE.BOUNDARY,this._clickBranchOrBoundaryCallback),g(this._context,i.VIEW_TYPE.SVG,this._clickSheetCallback),t=this._escFn,(0,o.default)("body").on("keydown.addRelationship",function(e){27===e.which&&t()}),s.isMobile||document.addEventListener("mousemove",this._mouseMoveCallback)},t.prototype._shouldSelectAnother=function(){return!!(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).endView},t.prototype._onSelectAnother=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(this._end1View=t.endView,!s.isMobile){var e=this._context.getSVGView();this._movingRelationship=_(this._context,e,t.endView)}},t.prototype._shouldFinish=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return!(!t.endView||!this._end1View||this._end1View===t.endView)},t.prototype._onFinish=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this._end2View=t.endView,s.isMobile||(this._movingRelationship.model.removeSelf(),this._movingRelationship.remove(),this._movingRelationship=null);var e=this._end1View.model.get("id"),n=this._end2View.model.get("id"),r=m(this._context,e,n);if(!t.selectNewTopic){var o=this._context.getSVGView().model2View[r.get("id")];this._context.getModule(i.MODULE_NAME.SELECTION).selectSingle(o)}this._transit(d)},t.prototype._onReady=function(){this._end1View=null,this._end2View=null,this._movingRelationship&&(this._movingRelationship.model.removeSelf(),this._movingRelationship.remove(),this._movingRelationship=null),document.removeEventListener("mousemove",this._mouseMoveCallback);var t=s.isMobile?"tap":"click";this._context.offEvent(t,i.VIEW_TYPE.BRANCH,this._clickBranchOrBoundaryCallback),this._context.offEvent(t,i.VIEW_TYPE.BOUNDARY,this._clickBranchOrBoundaryCallback),this._context.offEvent(t,i.VIEW_TYPE.SVG,this._clickSheetCallback),(0,o.default)("body").off("keydown.addRelationship"),this._context.getModule(i.MODULE_NAME.SEMAPHORE).decrease(i.UI_STATUS.ADD_RELATIONSHIP)},t.prototype._mouseMoveCallback=function(t){if(this._isState(c.SELECT_ANOTHER)&&this._movingRelationship){var e=this._context.getSVGView();this._movingRelationship.createRelationshipByMouse(this._end1View,e.getPositionTransfer().clientToReal({x:t.clientX,y:t.clientY}))}},t.prototype._clickBranchOrBoundaryCallback=function(t){return this._transit(h,{endView:t.sbView}),!1},t.prototype._clickSheetCallback=function(t){var e=y(this._context,t);return this._transit(h,{endView:e,selectNewTopic:!0}),!1},t.prototype._escFn=function(){this._transit(d)},t}();p.identifier=i.MODULE_NAME.ADD_RELATIONSHIP,e.default=p;var g=function(t,e,n){var r=s.isMobile?"tap":"click";return t.onEvent(r,e,n),function(){return t.offEvent(r,e,n)}},v=function(t,e){var n,r=((n={})[c.READY]="default",n[c.SELECT_ONE]="pointer",n[c.SELECT_ANOTHER]="pointer",n[c.FINISH]="default",n);t.getSVGView().svg.style("cursor",r[e])},m=function(t,e,n){var r=t.getSheetModel(),i=30/180*Math.PI,o={id:r.generateComponentId(),end1Id:e,end2Id:n,controlPoints:{0:{angle:i,amount:.33},1:{angle:i,amount:.33}}};return r.addRelationship(o)},y=function(t,e){var n=t.getSheetModel().rootTopic(),r=n.createEmptyTopic({title:t.getTranslatedText("DEFAULT_FLOATING_TOPIC_TITLE")}),o=t.getDragEventClientPosition(e,t.isMobilePlatform());return r.set("position",t.getSVGView().getPositionTransfer().clientToReal({x:o.x,y:o.y})),n.addChildTopic(r,{type:i.TOPIC_TYPE.DETACHED}),t.getSVGView().model2View[r.get("id")]},_=function(t,e,n){var r=e.content(),i=t.getSheetModel(),o=i.createComponent("relationship",{});o.parent(i);var s=new a.default({virtual:!0,model:o});return s.parent(r),r.relationshipContainer.add(s.svg),s.initStyle(),s},E=function(t){return t.replace(/^([A-Z])|[\s-_]+(\w)/g,function(t,e,n,r){return n?n.toUpperCase():e.toLowerCase()})}},function(t,e,n){"use strict";var r=c(n(11)),i=c(n(101)),o=c(n(54)),a=c(n(100)),s=c(n(30)),u=c(n(2));function c(t){return t&&t.__esModule?t:{default:t}}var l=n(265),h=n(8),d=n(61),f=n(0).CONFIG,p=n(132),g=function(){function t(e){(0,u.default)(this,t),this.context=e,this.dataTransfer=null}return t.prototype._xapGen=function(){var t=this.context.config(f.XAP_GENERATOR);if(t){for(var e=arguments.length,n=Array(e),r=0;r<e;r++)n[r]=arguments[r];return t.apply(void 0,n)}return s.default.reject("xap generator unfound")},t.prototype._xapLoader=function(){for(var t=arguments.length,e=Array(t),n=0;n<t;n++)e[n]=arguments[n];return this.context.config(f.XAP_LOADER).apply(void 0,e)},t.prototype.readImageArr=function(){var t=(0,a.default)(i.default.mark(function t(){var e,n,r,a=this;return i.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.context.config(f.CLIPBOARD_READER)("image/*");case 2:if(!(e=t.sent)){t.next=8;break}return n=[this._xapGen({extType:e.type,data:e.content})],t.abrupt("return",n.length?s.default.all(n):s.default.reject("image unfound in clipboard"));case 8:if(!this.dataTransfer||!this.dataTransfer.files[0]||-1===this.dataTransfer.files[0].type.indexOf("image")){t.next=11;break}return r=(0,o.default)(this.dataTransfer.files).reduce(function(t,e){if(-1!==e.type.indexOf("image")){var n=d.extname(e.path),r=n.startsWith(".")?n.substr(1):n;t.push(a._xapGen({extType:r,data:e.path}))}return t},[]),t.abrupt("return",r.length?s.default.all(r):s.default.reject("image unfound in clipboard"));case 11:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}(),t.prototype.readObj=function(){var t=this;return s.default.all([this.readPlainText(),l.read("text/plain")]).then(function(t){return t.some(function(t){return void 0===t||null===t})?s.default.reject("text is undefined"):t[0].replace(/\n|\r|\r\n/g,"")===t[1].replace(/\n|\r|\r\n/g,"")?l.read():s.default.reject("plain text not match")}).then(function(e){return s.default.all((0,r.default)(e.xapInfoMap).map(function(n){return t._xapGen({extType:n.match(/\.(.+)$/)[1],data:e.xapInfoMap[n]}).then(function(t){e.xapInfoMap[n]=t})})).then(function(){return e})}).then(function(t){return t["text/x-array-json"]=t["text/x-array-json"].map(function(e){return e.xapPaths.forEach(function(n){"/"!==n[0]&&h.replaceValueInObject(e.data,n,function(e){return t.xapInfoMap[e]})}),e.data}),t})},t.prototype.readPlainText=function(){var t=(0,a.default)(i.default.mark(function t(){var e;return i.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.context.config(f.CLIPBOARD_READER)("text/plain");case 2:if(null!==(e=t.sent)&&void 0!==e){t.next=11;break}if(!this.dataTransfer){t.next=8;break}return t.abrupt("return",this.dataTransfer.getData("text/plain"));case 8:return t.abrupt("return",l.read("text/plain"));case 9:t.next=12;break;case 11:return t.abrupt("return",e);case 12:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}(),t.prototype.write=function(t){var e=this;if(t){var n=this.context.config(f.CLIPBOARD_WRITER);n&&n("text/plain",t["text/plain"])||(this.dataTransfer?this.dataTransfer.setData("text/plain",t["text/plain"]):this.context.callService("copyToClipboard",t["text/plain"]));var i={},o=t["text/x-array-json"].map(function(t){return{data:t,xapPaths:[]}});return o.forEach(function(t){h.getXapInData(t.data,e.context.model.get("legend")).forEach(function(e){t.xapPaths.push(e.path),i[e.content]=!0})}),t["text/x-array-json"]=o,s.default.all((0,r.default)(i).map(function(t){return e._xapLoader(t).then(function(t){return p.loadUrlAsBuffer(t)}).then(function(e){return i[t]=e})})).then(function(){t.xapInfoMap=i,l.write(t)})}console.error("something wrong!")},t.prototype.reset=function(){this.dataTransfer=null},t.prototype.setDataTransfer=function(t){this.dataTransfer=t},t}();t.exports=g},function(t,e,n){"use strict";e.__esModule=!0;var r=u(n(35)),i=u(n(45)),o=u(n(32)),a=u(n(2)),s=u(n(4));function u(t){return t&&t.__esModule?t:{default:t}}var c=n(262),l=n(66),h=n(5),d=n(8),f=n(132),p=n(264),g=n(0),v=g.MODULE_NAME,m=g.CONFIG,y=g.VIEW_TYPE,_=g.TOPIC_TYPE,E={branch:"_addTopics",image:"_addImages",marker:"_addMarkers"},A={branch:"_copyTopic",image:"_copyImage",marker:"_copyMarker"},S=function(){function t(e){(0,a.default)(this,t),this.context=e,this.clipboardHelper=new c(e)}return t.prototype._copyTopic=function(){var t=this.context.getModule("selectionmanager").selections.slice();if(t&&t.length>0){var e=new p(t).generateData();if(e&&e.topic&&e.topic.length>0){var n=e.topic.map(function(t){return t&&f.serializeBranchToString(t)}).filter(function(t){return!!t}).join(f.linefeed);return this.clipboardHelper.write({"text/plain":n,"text/x-array-json":e.topic,"text/x-type":"branch","text/x-other-object-json":{relationship:e.relationship,boundary:e.boundary,summary:e.summary,sheetId:this.context.getSheetModel().id}}).catch(function(){console.warn("something wrong copy fail")}),!0}}},t.prototype._addTopics=function(t){var e=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=this.context.getSheetView(),a=this.context.getModule(v.SELECTION).selections.slice();!a.length&&a.push(r.centralBranchView),a.filter(function(t){return t.type===y.BRANCH}).forEach(function(a){var u=a.model,c={};if(t.forEach(function(t){t=JSON.parse((0,o.default)(t));var r=h.replaceId(t,function(){return u.ownerSheet().generateComponentId()});c=(0,i.default)({},c,r);var d=l(t,u.ownerSheet()),f=u.addChildTopic(d);if(n.sheetId&&n.sheetId!==e.context.getSheetModel().id){var p=a.editDomain().model2View[f.id],g=p.getDescendantBranchesByType([_.ATTACHED,_.DETACHED,_.SUMMARY,_.CALLOUT]);[p].concat(g).forEach(function(t){s.default.fixUserStyle(t,!0)})}}),function(t,e){var r=n.boundary;r&&r.forEach(function(n){var r=n.content,i=e[r[0]],o=e[r[r.length-1]],a=t.model.getChildrenIndexById(i),s=t.model.getChildrenIndexById(o);t.model.addBoundary({id:t.model.ownerSheet().generateComponentId(),title:n.title,range:"("+a+","+s+")"})})}(a,c),function(t,e){var r=n.summary;r&&r.forEach(function(n){var r=n.content,i=e[r[0]],o=e[r[r.length-1]],a=t.model.getChildrenIndexById(i),s=t.model.getChildrenIndexById(o),u=n.st;h.replaceId(u,function(){return t.model.ownerSheet().generateComponentId()});var c={id:t.model.ownerSheet().generateComponentId(),range:"("+a+","+s+")",topicId:u.id};t.model.addSummary(c,!1,l(u,t.model.ownerSheet()))})}(a,c),function(t,e){var i=n.relationship;i&&i.forEach(function(n){(n=JSON.parse((0,o.default)(n))).id=t.model.ownerSheet().generateComponentId(),n.end1Id=e[n.end1Id],n.end2Id=e[n.end2Id],r.model.addRelationship(n)})}(a,c),n.sheetId&&n.sheetId!==e.context.getSheetModel().id){var d=s.default.getUserStyle(a),f=d?d.attributes:{properties:{}};u.setStyleObj(f,!1)}})},t.prototype._copyImage=function(){var t=this.context.getModule("selectionmanager").selections.slice(),e=(t=t.filter(function(t){return t.type===y.IMAGE})).map(function(t){return t.parent().model.get("image")});return this.clipboardHelper.write({"text/plain":(0,o.default)(e),"text/x-array-json":e,"text/x-type":"image"}),!0},t.prototype._addImages=function(t){var e=this;if(0!==t.length)if(t.length>1){var n=this.context.getSheetView().model;this._addTopics(t.map(function(t){return{id:n.generateComponentId(),title:"",image:t}}))}else{var r,i;!(r=(i=this.context.getSVGView()).selectionManager.selections.slice()).length&&r.push(i.content().centralBranchView),r.filter(function(t){return"branch"===t.type}).forEach(function(n){e.context.execAction("changeImage",t[0],n)})}},t.prototype._copyMarker=function(){var t=this.context.getModule("selectionmanager").selections.slice(),e=(t=t.filter(function(t){return t.type===y.MARKER})).map(function(t){return t.model.toJSON()});return d.formUserMarkerIdMap(this.context.model.get("legend")),this.clipboardHelper.write({"text/plain":(0,o.default)(e),"text/x-array-json":e,"text/x-type":"marker"}),!0},t.prototype._addMarkers=function(t){var e,n;n=this.context.getSVGView(),!(e=this.context.getModule(v.SELECTION).selections.slice()).length&&e.push(n.content().centralBranchView),e.filter(function(t){return"branch"===t.type}).forEach(function(e){t.forEach(function(t){return e.model.addMarker(t)})})},t.prototype.paste=function(t){var e=this;t&&(t.preventDefault(),this.clipboardHelper.setDataTransfer(t.clipboardData)),this.clipboardHelper.readImageArr().then(function(t){e._addImages(t.map(function(t){return{src:t,align:"up"}}))}).catch(function(t){return e.clipboardHelper.readObj().then(function(t){e[E[t["text/x-type"]]](t["text/x-array-json"],t["text/x-other-object-json"])})}).catch(function(t){return e.clipboardHelper.readPlainText().then(function(t){var n=void 0;try{n=JSON.parse(t)}catch(t){}if(!n||"object"!==(void 0===n?"undefined":(0,r.default)(n)))return e._addTopics(f.deserialize(t,e.context.getSheetView().model));e[E[n.type]](n.dataArr)})}).catch(function(){})},t.prototype.copy=function(t){var e=this.context.getModule("selectionmanager").selections[0];if(e){var n=A[e.type];return n?(this.clipboardHelper.reset(),t&&(this.clipboardHelper.setDataTransfer(t.clipboardData),t.preventDefault()),this[n](t)):void 0}},t}(),T=function t(e){(0,a.default)(this,t);var n=new S(e);if(!e.config(m.NO_KEYBIND)&&!e.config(m.NO_EDIT_RECEIVER)){var r=e.getModule(v.EDIT_RECEIVER);r.on("copy",function(t){n.copy(t)}),r.on("paste",function(t){e.isReadOnly()||n.paste(t)}),r.on("cut",function(t){n.copy(t)&&e.execAction("deleteItem")})}return n};T.identifier=v.COPY_PASTE,e.default=T},function(t,e,n){"use strict";var r=s(n(38)),i=s(n(32)),o=s(n(2)),a=n(0);function s(t){return t&&t.__esModule?t:{default:t}}t.exports=function(){function t(e){(0,o.default)(this,t),this.selectedBranchArray=e.filter(function(t,e){if("branch"===t.type)return!0}).sort(function(t,e){var n=t.parent(),r=e.parent();return n&&n===r&&"branch"===n.type?n.model.getChildrenIndexById(t.model.id)-n.model.getChildrenIndexById(e.model.id):0}),this.generatedData={}}return t.prototype._generateMaterial=function(){var t=this;this.wrapedBranchesObj={},this.selectedBranchArray.forEach(function(e){if(t.wrapedBranchesObj[e.model.id]||(t.wrapedBranchesObj[e.model.id]={branch:e}),!e.isDetachedBranch())for(var n=e.parent(),r=0;n&&"branch"===n.type&&!n.isDetachedBranch();){if(t.selectedBranchArray.indexOf(n)>=0){var i=t.wrapedBranchesObj[n.model.id]||(t.wrapedBranchesObj[n.model.id]={branch:n});0===r?i.hasChild=!0:i.hasGrandChild=!0}n=n.parent(),r++}}),this.groupedSelectedBranchArray=this.selectedBranchArray.filter(function(e,n){var r=e.parent(),i=!1;if(r&&r.getChildrenBranchesByType){var o=r.getChildrenBranchesByType(a.TOPIC_TYPE.DETACHED);o&&o.length>0&&(i=o.includes(e))}return i||!t.selectedBranchArray.includes(r)})},t.prototype.generateData=function(){var t=this;this._generateMaterial(),this.generatedDataForTopic=[],this.groupedSelectedBranchArray.forEach(function(e){var n={};t._generateDataForTopic(e,n),t.generatedDataForTopic.push(JSON.parse((0,i.default)(n)))});var e=[];return this.groupedSelectedBranchArray.forEach(function(t){var n=t.parent();e.includes(n)||"branch"!==n.type||e.push(n)}),this.generatedDataForBoundaryInParent=[],this._generateDataForBoundaryInParent(e),this.generatedDataForSummaryInParent=[],this._generateDataForSummaryInParent(e),this.generatedDataForRelationship=[],this._generateDataForRelationship(this.generatedDataForTopic),{topic:this.generatedDataForTopic,boundary:this.generatedDataForBoundaryInParent,summary:this.generatedDataForSummaryInParent,relationship:this.generatedDataForRelationship}},t.prototype._generateDataForRelationship=function(t){var e=this,n=[];t&&t.forEach(function(t){n.push.apply(n,e._extractIds(t,[]))});var r=this.selectedBranchArray[0].getContext().getSheetView().model.attributes.relationships;r&&r.forEach(function(t){if(t){var r=t.end1Id,i=t.end2Id;n.includes(r)&&n.includes(i)&&e.generatedDataForRelationship.push(t)}})},t.prototype._extractIds=function(t){var e=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];if(!t)return n;if(n.includes(t.id)||n.push(t.id),t.children){var r=[];t.children[a.TOPIC_TYPE.ATTACHED]&&r.push.apply(r,t.children[a.TOPIC_TYPE.ATTACHED]),t.children[a.TOPIC_TYPE.DETACHED]&&r.push.apply(r,t.children[a.TOPIC_TYPE.DETACHED]),t.children[a.TOPIC_TYPE.CALLOUT]&&r.push.apply(r,t.children[a.TOPIC_TYPE.CALLOUT]),t.children[a.TOPIC_TYPE.SUMMARY]&&r.push.apply(r,t.children[a.TOPIC_TYPE.SUMMARY]),r.forEach(function(t){t&&e._extractIds(t,n)})}return n},t.prototype._generateDataForBoundaryInParent=function(t){var e=this;t.forEach(function(t){var n=t.getChildrenBranchesByType(a.TOPIC_TYPE.ATTACHED),i=t.model.attributes.boundaries;i&&i.forEach(function(t){if(t&&t.range)try{var i=t.range.substr(1,4).split(","),o=(0,r.default)(i[0]),a=(0,r.default)(i[1]);if(a<n.length){for(var s=[],u=o;u<=a;u++){var c=n[u];if(!e.isAllSelected(c)){s=[];break}s.push(c.model.id)}s.length>0&&e.generatedDataForBoundaryInParent.push({title:t.title,content:s})}}catch(t){}})})},t.prototype._generateDataForSummaryInParent=function(t){var e=this;t.forEach(function(t){var n=t.getChildrenBranchesByType(a.TOPIC_TYPE.ATTACHED),i=t.model.attributes.summaries;i&&i.forEach(function(i){if(i&&i.range)try{var o=i.range.substr(1,4).split(","),s=(0,r.default)(o[0]),u=(0,r.default)(o[1]);if(u<n.length){for(var c=[],l=s;l<=u;l++){var h=n[l];if(!e.isAllSelected(h)){c=[];break}c.push(h.model.id)}var d=t.model.children(a.TOPIC_TYPE.SUMMARY);1===(d=d.filter(function(t){return t.id===i.topicId})).length&&c.length>0&&e.generatedDataForSummaryInParent.push({title:i.title,content:c,st:d[0].toJSON()})}}catch(t){}})})},t.prototype._generateDataForTopic=function(t,e){e.id=t.model.attributes.id,e.title=t.model.attributes.title,e.style=t.model.attributes.style;var n=t.getChildrenBranchesByType(a.TOPIC_TYPE.ATTACHED);t.model.attributes.boundaries&&(e.boundaries=this._transRange(t,n,"boundaries")),t.model.attributes.summaries&&(e.summaries=this._transRange(t,n,"summaries"));var r=this.wrapedBranchesObj[t.model.id];if(r.hasChild)this._transBranchChildrenForHasChildMode(t,e,a.TOPIC_TYPE.ATTACHED),this._transBranchChildrenForHasChildMode(t,e,a.TOPIC_TYPE.CALLOUT),e.summaries&&e.summaries.length>0&&this._transBranchChildrenForHasChildMode(t,e,a.TOPIC_TYPE.SUMMARY);else if(r.hasGrandChild);else{var i=t.model.toJSON();for(var o in i)if("children"===o){var s,u=i.children;u&&(e[o]=((s={})[a.TOPIC_TYPE.ATTACHED]=u[a.TOPIC_TYPE.ATTACHED],s[a.TOPIC_TYPE.SUMMARY]=u[a.TOPIC_TYPE.SUMMARY],s[a.TOPIC_TYPE.CALLOUT]=u[a.TOPIC_TYPE.CALLOUT],s))}else e[o]=i[o]}},t.prototype._transBranchChildrenForHasChildMode=function(t,e,n){var r=this,i=t.getChildrenBranchesByType(n);i&&i.length>0&&i.forEach(function(t){if(r.wrapedBranchesObj[t.model.id]||n===a.TOPIC_TYPE.SUMMARY){e.children||(e.children={}),e.children[n]||(e.children[n]=[]);var i={};e.children[n].push(i),r._generateDataForTopic(t,i)}})},t.prototype.isAllSelected=function(t){var e=this.wrapedBranchesObj[t.model.id];return e&&!e.hasChild&&!e.hasGrandChild},t.prototype._transRange=function(t,e,n){var i=this;return t.model.attributes[n].filter(function(t){if(t.range)try{for(var n=t.range.substr(1,4).split(","),o=(0,r.default)(n[0]),a=(0,r.default)(n[1]),s=o;s<=a;s++){var u=e[s];if(!u||!i.isAllSelected(u))return!1}return!0}catch(t){}return!1})},t}()},function(t,e,n){"use strict";var r,i=(r=n(30))&&r.__esModule?r:{default:r},o="key",a=void 0;function s(){return window.indexedDB?new i.default(function(t,e){var n=indexedDB.open("Snowbrush");n.onerror=function(t){console.warn("Why didn't you allow indexedDB?!"),e("can not open indexDB")},n.onsuccess=function(e){a=n.result,t(a)},n.onupgradeneeded=function(t){t.target.result.createObjectStore("clipboardData")}}):new i.default(function(t,e){e("browser do not support indexedDB")})}t.exports={write:function(t){return new i.default(function(e,n){function r(){console.log("db write",t),a.transaction("clipboardData","readwrite").objectStore("clipboardData").put(t,o).addEventListener("success",function(t){e()})}a?r():s().then(function(){r()}).catch(n)})},read:function(t){return new i.default(function(e,n){function r(){a.transaction("clipboardData","readwrite").objectStore("clipboardData").get(o).onsuccess=function(r){var i=r.target.result;i?e(t?i[t]:i):n("clipboardData is not existing")}}a?r():s().then(function(){r()}).catch(n)})},clear:function(){(function(){for(var t=[],e=void 0,n=0;n<localStorage.length;n++)0===(e=localStorage.key(n)).indexOf("sbClipBoardData:")&&t.push(e);return t})().forEach(function(t){return localStorage.clear(t)})}}},function(t,e,n){"use strict";var r=a(n(2)),i=a(n(26)),o=a(n(25));function a(t){return t&&t.__esModule?t:{default:t}}var s=n(62),u=n(63).posRelativeToBranch,c=function(t){function e(){return(0,r.default)(this,e),(0,i.default)(this,t.apply(this,arguments))}return(0,o.default)(e,t),e.prototype.dragFinish=function(t){var e=t.dragedView,n=t.pos,r=e.model,i=u(n,e.parent());r.changePosition(i)},e}(s);t.exports=c},function(t,e,n){"use strict";var r=a(n(2)),i=a(n(26)),o=a(n(25));function a(t){return t&&t.__esModule?t:{default:t}}var s=n(133),u=n(0).STRUCTURECLASS,c=function(t){function e(n){(0,r.default)(this,e);var o=(0,i.default)(this,t.call(this,n));return o.isFree=!0,o}return(0,o.default)(e,t),e.prototype.dragStart=function(e){return t.prototype.dragStart.call(this,e),this.structureClass=this.centralBranch.getStructureClass(),{}},e.prototype.getDragOverView=function(t){return this.centralBranch},e.prototype.dragMoving=function(t){var e=this,n=t.dropView,r=t.pos,i=this.stashInfo.newIndex,o=n.numRightInDraging,a=n.getChildrenBranchesByType(),s=a.slice(o),c=a.slice(0,o),l=r.x>0;switch(this.structureClass){case u.MAPCLOCKWISE:case u.MAPUNBALANCED:r.x>0?(i=0,c.forEach(function(t,n){e.stashInfo.newIndex!==n&&r.y>t.position.y&&(i=t.branchIndex()+1,e.stashInfo.newIndex<o&&i===o&&(i=o-1))})):(i=o,s.forEach(function(t,n){e.stashInfo.newIndex!==n&&r.y<t.position.y&&(i=t.branchIndex()+1)}));break;case u.MAP:r.x>0?(i=0,c.forEach(function(t,n){e.stashInfo.newIndex!==n&&r.y>t.position.y&&(i=t.branchIndex()+1,e.stashInfo.newIndex<o&&i===o&&(i=o-1))})):(i=o,s.forEach(function(t,n){e.stashInfo.newIndex!==n&&r.y>t.position.y&&(i=t.branchIndex()+1)}));break;case u.MAPANTICLOCKWISE:l=!l,r.x>0?(i=o,s.forEach(function(t,n){e.stashInfo.newIndex!==n&&r.y<t.position.y&&(i=t.branchIndex()+1)})):(i=0,c.forEach(function(t,n){e.stashInfo.newIndex!==n&&(r.y>t.position.y&&(i=t.branchIndex()+1),e.stashInfo.newIndex<o&&i===o&&(i=o-1))}))}i>=a.length&&(i=a.length-1),i!=this.stashInfo.newIndex&&(this.stashInfo.newIndex=i,this.placeholder.detach(),this.placeholder.attachTo(n,i,null,l))},e}(s);t.exports=c},function(t,e,n){"use strict";(function(e){var r=s(n(3)),i=s(n(2)),o=s(n(26)),a=s(n(25));function s(t){return t&&t.__esModule?t:{default:t}}var u=n(62),c=n(1),l=n(8),h=n(14),d=n(63).traverseBranch,f=e.SVG,p=function(t){function e(){return(0,i.default)(this,e),(0,o.default)(this,t.apply(this,arguments))}return(0,a.default)(e,t),e.prototype.dragStart=function(t){return this.stashInfo={newParent:null,direction:""},{}},e.prototype.getDragOverView=function(t){var e=t.pos,n=null;return d(this.centralBranch,function(t){return!!l.isTopicIntersectWithPoint(t,e)&&(n=t,!0)}),n},e.prototype._changeParent=function(t){var e=this.stashInfo.newParent;e!==t&&(e&&(e.onLeave(),this._removeCrossGrids(e)),this.stashInfo.newParent=t,t&&(this._addCrossGrids(t),t.onIntersect()))},e.prototype._addCrossGrids=function(t){if(!t.s$crossGrids){var e=(new f.G).data("name","cross-grids"),n=t.topicView.shapeBounds,r=t.topicView.topicGroup.trans,i=r.rotation,o=r.cx,a=r.cy;i&&(n=h.rotate(n,i,o,a));var s=n.x,u=s+n.width/4,l=u+n.width/2,d=n.y,p=d+n.height/2,g={left:e.rect().move(s,d).size(n.width/4,n.height).data("name","left"),right:e.rect().move(l,d).size(n.width/4,n.height).data("name","right"),top:e.rect().move(u,d).size(n.width/2,n.height/2).data("name","top"),bottom:e.rect().move(u,p).size(n.width/2,n.height/2).data("name","bottom")};c.values(g).forEach(function(t){t.attr({fill:"rgba(46, 189, 255, 0.15)",stroke:"rgba(46, 189, 255, 1)","stroke-width":2,opacity:.5})}),e.__blocks=g,e.__direction="",t.s$crossGrids=t.svg.put(e)}},e.prototype._changeCrossGridColor=function(t,e){var n=t.s$crossGrids;if(n&&n.__direction!==e){var r=n.__direction;n.__direction=e;var i=n.__blocks;r&&i[r].fill("rgba(46, 189, 255, 0.15)"),i[e].fill("rgba(46, 189, 255, 0.5)")}},e.prototype._removeCrossGrids=function(t){t.s$crossGrids&&(t.s$crossGrids.remove(),delete t.s$crossGrids)},e.prototype.dragMoving=function(t){var e=t.dropView,n=t.pos;if(null!==e){var r=l.calcDirectionInTopic(e,n);this.stashInfo.direction=r,this._changeParent(e),this._changeCrossGridColor(e,r)}else this._changeParent(e)},e.prototype.dragFinish=function(t){var e=t.dragedView;if(this.stashInfo.newParent){var n=e.parent().parent(),i=n.model,o=i.get("image");n===this.stashInfo.newParent?i.alignImage(this.stashInfo.direction):(i.removeImage(),this.stashInfo.newParent.model.addImage((0,r.default)({},o,{align:this.stashInfo.direction}))),this._changeParent(null)}},e}(u);t.exports=p}).call(e,n(6))},function(t,e,n){"use strict";var r=n(133),i=n(266),o=n(267),a=n(268),s=n(271),u=n(270),c=n(63).dragCancel,l={"branch.attached":r,"branch.detached":r,"branch.callout":i,"branch.free":o,image:a,marker:s,matrixlabel:u};t.exports={getHandler:function(t){var e=function(t){var e=t.type,n=t.model;return"branch"===e?e+"."+(n.isFree()?"free":n.type()):e}(t);return l[e]},dragCancel:c}},function(t,e,n){"use strict";var r=a(n(2)),i=a(n(26)),o=a(n(25));function a(t){return t&&t.__esModule?t:{default:t}}var s=n(62),u=n(44).getLabelRow,c=function(t){function e(){return(0,r.default)(this,e),(0,i.default)(this,t.apply(this,arguments))}return(0,o.default)(e,t),e.prototype.dragStart=function(t){var e=t.dragedView,n=e.parent(),r=n.parent(),i=r.matrixView.getRealPosition();return{branch:r,index:n.labelViews.indexOf(e),branchPos:i}},e.prototype.dragMoving=function(t){var e=t.pos,n=t.index,r=t.branch,i=t.branchPos,o=r.matrixView,a=o.matrixGrid.isTranspose,s=this._getLabeCelllViews(o),u=void 0;if(a){var c=s.map(function(t){return t.bounds.y+i.y+t.bounds.height/2});u=this._geIndex(c,e.y,n)}else{var l=s.map(function(t){return t.bounds.x+i.x+t.bounds.width/2});u=this._geIndex(l,e.x,n)}if(u!==n){o.columnMap.changeKeyOrder(n,u);var h=o.columnMap.keyArr;t.index=u,r.model.setMatrixLabelInfos(h,!0),r.layoutDeep()}},e.prototype._getLabeCelllViews=function(t){return u(t.matrixGrid).map(function(t){return t.view})},e.prototype._geIndex=function(t,e,n){var r=-1;return t.forEach(function(t,n){t<e&&(r=n)}),n>r&&r++,r},e}(s);t.exports=c},function(t,e,n){"use strict";var r=a(n(2)),i=a(n(26)),o=a(n(25));function a(t){return t&&t.__esModule?t:{default:t}}var s=n(62),u=n(63),c=u.traverseBranch,l=u.moveMarkerFromTo,h=n(8),d=function(t){function e(){return(0,r.default)(this,e),(0,i.default)(this,t.apply(this,arguments))}return(0,o.default)(e,t),e.prototype.dragStart=function(t){return t.dragedView,{oldParent:null}},e.prototype.getDragOverView=function(t){var e=t.pos,n=null;return c(this.centralBranch,function(t){return!!h.isTopicIntersectWithPoint(t,e)&&(n=t,!0)}),n},e.prototype.dragMoving=function(t){var e=t.dropView,n=t.oldParent;n!==e&&(null!==n&&n.onLeave(),null!==e&&e.onIntersect(),t.oldParent=e)},e.prototype.dragFinish=function(t){var e=t.dropView,n=t.dragedView;if(null!==e){e.onLeave();var r=n.parent().model,i=n.model,o=e.model;l(i,r,o)}},e}(s);t.exports=d},function(t,e,n){"use strict";var r=o(n(3)),i=o(n(2));function o(t){return t&&t.__esModule?t:{default:t}}var a=n(66),s=n(0),u=s.STRUCTURECLASS,c=s.TOPIC_DETACHED,l=s.COMPONENT_TYPE,h=s.TOPIC_ATTACHED,d=s.TOPIC_SUMMARY,f=s.MASTER_RANGE,p=n(22),g=n(329),v=n(1),m=function(){function t(e,n,r){(0,i.default)(this,t),this.oldTopicModel=e,this.sheetModel=e.ownerSheet(),this.oldTopicModelList=n,this.newTopicModelList=null,this.newParentBranch=null,this._options={noAnimation:!0,init:n.length>1},this._isDetachedAtEnd=!1,this._wasSubTopicOfMatrix=this._isInMatrix(e),this._restore=this._rememberRelatedComponents(),this._oldPositionMap=this._rememberOldPosition(r)}return t.prototype.mount=function(t,e){var n=this;this.newParentBranch=t;var r=t.model;if(this.newTopicModelList||this._rebuildTopicModel(),[].concat(this.newTopicModelList).reverse().forEach(function(t){r.addChildTopic(t,n._options)}),e&&e.headBranch===t){var i=e.label;this.newTopicModelList.forEach(function(t){return t.changeLabel(i)})}else this._wasSubTopicOfMatrix&&this.newTopicModelList.forEach(function(t){return t.changeLabel("")});this._restore()},t.prototype._rememberOldPosition=function(t){var e={};return t.forEach(function(t){e[t.model.id]=t.getRealPosition()}),e},t.prototype._isInMatrix=function(t){var e=2;do{if((t=t.parent()).componentType!==l.TOPIC)return!1;e--}while(e>0);var n=t.getStructureClass();return n===u.SPREADSHEET||n===u.COLUMNSPREADSHEET},t.prototype._rebuildTopicModel=function(){var t=this;this.newTopicModelList=[],this.oldTopicModelList.forEach(function(e){var n=e.toJSON();t.newTopicModelList.push(a(n,t.sheetModel))})},t.prototype.setPositionOffset=function(t){var e=this;this.newTopicModelList||this._rebuildTopicModel(),this.newTopicModelList.forEach(function(n){var r=e._oldPositionMap[n.id];if(!r)return console.error("cant find old position, why?");n.set("position",p.add(r,t))})},t.prototype.setAddChildTopicOption=function(t){this._options=(0,r.default)(this._options,t),t.type===c&&(this._isDetachedAtEnd=!0)},t.prototype._extractComponentInfo=function(t){var e=t.parent(),n=t.rangeStart,r=t.rangeEnd,i=t.componentType,o=e.children(),a=o[n].id,s=o[r].id,u=null;if(i===l.SUMMARY){var c=e.children(d);u=v.find(c,function(e){return e.get("id")===t.get("topicId")})}return{type:i,startId:a,endId:s,model:t,ownTopic:u}},t.prototype._groupByParent=function(){var t={};return this.oldTopicModelList.forEach(function(e){if(e.type()===h){var n=e.parent(),r=e.getIndexInParent(),i=n.cid;i in t?t[i].childrenIndexArr.push(r):t[i]={parentTopic:n,childrenIndexArr:[r]}}}),v.values(t)},t.prototype._findAffectedComponentInParent=function(t,e){var n=this,r=g.indexArrToRangeArr(e),i=t.summaries(),o=t.boundaries();return i.concat(o).filter(function(t){return n._isThisComponentAffected(r,t)})},t.prototype._isThisComponentAffected=function(t,e){return t.some(function(t){return g.isSubRange(t,[e.rangeStart,e.rangeEnd])})},t.prototype._rememberRelatedComponents=function(){var t=this,e=this._rememberDraggedBranchesRelatedInfo(),n=this.sheetModel.relationships().concat();return console.log(e),function(){var r,i,o,a,s;t._isDetachedAtEnd||function(t,e,n){var r,i=t.boundaries;(i=i.concat(t.summaries)).forEach(function(t,i){r=t.model,e<=r.rangeEnd&&function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;if("summary"===t.type)for(;n--;)t.model.changeSummaryRange(e);else for(;n--;)t.model.changeBoundaryRange(e)}(t,e-1,n)})}(t.newParentBranch,t._options.at,t.newTopicModelList.length),t._rebuildSummaryAndBoundary(e),r=n,i=t.sheetModel,o=t.newParentBranch.getContext(),a=o.getSVGView(),s={},(i.get("relationships")||[]).forEach(function(t){s[t.id]=t}),r.forEach(function(t){!s[t.id]&&function(t,e){var n=e.model2View[t.get("end1Id")],r=e.model2View[t.get("end2Id")];return!!n&&!!r}(t,a)&&i.addRelationship(t)})}},t.prototype._rememberDraggedBranchesRelatedInfo=function(){var t=this,e=[];return this._groupByParent().forEach(function(n){e=e.concat(t._findAffectedComponentInParent(n.parentTopic,n.childrenIndexArr))}),e.map(function(e){return t._extractComponentInfo(e)})},t.prototype._restore=function(){},t.prototype._rebuildSummaryAndBoundary=function(t){var e=this;t.forEach(function(t){t.type===l.SUMMARY?e._rebuildSummary(t):e._rebuildBoundary(t)}),this._rebuildMasterBoundaryIntoNormal()},t.prototype._rebuildSummary=function(t){if(!this._isDetachedAtEnd){var e=this.newParentBranch.model,n=t.startId,r=t.endId,i=t.model,o=t.ownTopic,s=e.getChildrenIndexById(n),u=e.getChildrenIndexById(r);if(-1!==s&&-1!==u){i.setRange("("+s+","+u+")");var c=a(o.toJSON(),e.ownerSheet());e.addSummary(i,null,c)}else console.error("[Modelkeeper._rebuildSummary]: wrong")}},t.prototype._rebuildBoundary=function(t){var e=t.startId,n=t.endId,r=t.model;if(this._isDetachedAtEnd){if(e!==n)return;var i=v.find(this.newTopicModelList,function(t){return t.id===e});r.setRange(f),i.addBoundary(r)}else{var o=this.newParentBranch.model,a=o.getChildrenIndexById(e),s=o.getChildrenIndexById(n);if(-1===a||-1===s)return void console.error("[Modelkeeper._rebuildBoundary]: wrong");r.setRange("("+a+","+s+")"),o.addBoundary(r)}},t.prototype._rebuildMasterBoundaryIntoNormal=function(){if(!this._isDetachedAtEnd){var t=this.newParentBranch.model;this.newTopicModelList.forEach(function(e){var n=e.boundaries().find(function(t){return t.getRange()===f});if(n){e.removeBoundary(n);var r=t.getChildrenIndexById(e.getId());n.setRange("("+r+","+r+")"),t.addBoundary(n)}})}},t.prototype._pickTopicMasterBoundary=function(t){var e=t.boundaries();return v.find(e,function(t){return t.getRange()===f})},t}();t.exports=m},function(t,e,n){"use strict";(function(e){var r=o(n(3)),i=o(n(2));function o(t){return t&&t.__esModule?t:{default:t}}var a=n(67),s=n(80),u=n(78),c=n(0),l=n(77),h=l.attachBranchTo,d=l.detachBranch,f=e.SVG,p={x:-50,y:-12.5,width:60,height:24},g=function(){function t(e,n){(0,i.default)(this,t),this.context=e,this.fakeBranchView=this._create(n)}return t.prototype._create=function(t){var e=this.context.model.createComponent("topic"),n=new a({model:e}),i=new s({topicView:n,model:e});n.topicShapeStyle=c.TOPICSHAPE.RECT,i.svg=new f.G,i.bounds=(0,r.default)({},p),i.topicView.bounds=(0,r.default)({},i.bounds),i.topicView.shapeBounds=(0,r.default)({},i.bounds),i.boundaryBounds=(0,r.default)({},i.bounds);var o=i.svg.put(new f.Path).data("name","fakeBranch_noUse");return i.svg.put(new f.Path).data("name","fakeBranch_colorBlock").attr({fill:"#2ebdff","fill-opacity":"0.5",d:u.rect(p)}),i.topicView.topicGroup=i.svg,i.topicView.topicShape=o,i.topicView.topicShapeFill=o,i._draged=!0,i._parent=t,e.parent(t.model),i},t.prototype.detach=function(t){d(this.fakeBranchView,t)},t.prototype.attachTo=function(t,e,n,r){h(this.fakeBranchView,t,e,n,r)},t}();t.exports=g}).call(e,n(6))},function(t,e,n){"use strict";e.__esModule=!0;var r=h(n(3)),i=h(n(2)),o=h(n(4)),a=h(n(16)),s=h(n(330)),u=n(77),c=n(0),l=n(269);function h(t){return t&&t.__esModule?t:{default:t}}var d=function(){function t(e){(0,i.default)(this,t),this._context=e,this._svgView=null,this._dragSelections=[],this._selectionsModule=null,this._semaphoreModule=null,this._contextUndo=null,this._dragView=null,this._dragHandler=null,this._transferData={},this._prePosition={x:0,y:0}}return t.prototype._initModules=function(){this._selectionsModule||(this._selectionsModule=this._context.getModule(c.MODULE_NAME.SELECTION)),this._semaphoreModule||(this._semaphoreModule=this._context.getModule(c.MODULE_NAME.SEMAPHORE)),this._contextUndo||(this._contextUndo=this._context.model.getUndo()),this._svgView||(this._svgView=this._context.getSVGView())},t.prototype.prepareStartDrag=function(t,e){var n=this;this._context.isReadOnly()||(this._initModules(),this._dragSelections=this._selectionsModule.selections.concat(),(0,u.dragThreshold)(t,function(r){var i=(0,u.filterMultiDragBranches)(n._dragSelections),o="press"===t.type;n._dragView=new s.default(e,i,r,o),n._onDragViewStart(e,r);var a=n._dragView.viewEvents;n.listenTo(n._dragView,a.dragViewMoving,n._onDragViewMoving),n.listenTo(n._dragView,a.dragViewFinish,n._onDragViewFinish)},this._context))},t.prototype._onDragViewStart=function(t,e){this._semaphoreModule.increase(c.UI_STATUS.DRAG),this._contextUndo.openKeepMode(),this._selectionsModule.disable();var n=(0,l.getHandler)(t);this._dragHandler=new n(this._context);var i=this._dragSelections;t.type!==c.VIEW_TYPE.BRANCH||o.default.getClassName(t)===c.CLASS_TYPE.CALLOUT_TOPIC?i=[]:-1===(i=(0,u.filterMultiDragBranches)(i)).indexOf(t)&&(i=[]),this._transferData={pos:this._svgView.getPositionTransfer().clientToReal({x:e.x,y:e.y}),dragedView:t,selections:i,dropView:null};var a=this._dragHandler.dragStart(this._transferData)||{};(0,r.default)(this._transferData,a)},t.prototype._onDragViewMoving=function(t){var e=t;Math.abs(this._prePosition.x-e.x)<10&&Math.abs(this._prePosition.y-e.y)<10||(this._prePosition=e,this._transferData.pos=e,this._transferData.dropView=this._dragHandler.getDragOverView(this._transferData),this._dragHandler.dragMoving(this._transferData))},t.prototype._onDragViewFinish=function(t){this._transferData.pos=t;var e=this._dragHandler.dragFinish(this._transferData);this._selectionsModule.enable(),this._contextUndo.closeKeepMode(),e===l.dragCancel&&this._contextUndo.pop(),this._semaphoreModule.decrease(c.UI_STATUS.DRAG),this._reset()},t.prototype._reset=function(){this.stopListening(this._dragView),this._resetSelections(),this._dragView=null,this._transferData={}},t.prototype._resetSelections=function(){var t=this,e=this._transferData.selections;if(e.length){var n=this._context.getSVGView();e.forEach(function(e){return t._selectionsModule.addSelection(n.model2View[e.model.id])})}},t}();d.identifier=c.MODULE_NAME.DRAG,e.default=d,(0,r.default)(d.prototype,a.default.Events)},function(t,e,n){"use strict";(function(t){e.__esModule=!0;var r=v(n(2)),i=n(0),o=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}(i),a=v(n(5)),s=v(n(8)),u=n(77),c=v(n(1)),l=v(n(67)),h=v(n(80)),d=v(n(78)),f=v(n(61)),p=v(n(33)),g=(v(n(65)),v(n(22)));function v(t){return t&&t.__esModule?t:{default:t}}var m=t.SVG,y={x:-50,y:-12.5,width:100,height:25},_=1,E=2,A={isImage:function(t){return!!this.isFile(t)&&0===t.files[0].type.indexOf(T.DropDataTypes.IMAGE)},isAttachment:function(t){return this.isFile(t)&&!this.isImage(t)},isText:function(t){},isFile:function(t){return 0!==t.files.length},isXFile:function(t){return t.getData("isXTypeFile")}},S=function(){function t(e){(0,r.default)(this,t),e.isReadOnly()||(this._context=e,this._branchDragLevelCounterMap={},this._dropHandler=new T(e),this._positionTransfer=null,this._preDropParentBranchView=null,this._dragFakeBranchView=null,this._childIndex=null,this._childSide=null,this._initEventListener())}return t.prototype._initEventListener=function(){var t=this,e=this._context;e.onEvent("dragenter",i.VIEW_TYPE.BRANCH,function(e){return t._onBranchDragEnter(e)}),e.onEvent("dragleave",i.VIEW_TYPE.BRANCH,function(e){return t._onBranchDragLeave(e)}),e.onEvent("drop",i.VIEW_TYPE.BRANCH,function(e){return t._onBranchDrop(e)}),e.onEvent("dragenter",i.VIEW_TYPE.SVG,function(e){return t._onSVGDragEnter(e)}),e.onEvent("dragover",i.VIEW_TYPE.SVG,p.default.frameStabilize(function(e){return t._onSVGDragOver(e)},function(t){t.preventDefault()})),e.onEvent("drop",i.VIEW_TYPE.SVG,function(e){return t._onSVGDrop(e)})},t.prototype._onBranchDragEnter=function(t){t.preventDefault(),this._isDragTargetOutOfBranch(t)&&t.sbView.topicView.showSelectBox(),this._increaseBranchLevel(t)},t.prototype._onBranchDragLeave=function(t){t.preventDefault(),this._decreaseBranchLevel(t),this._isDragTargetOutOfBranch(t)&&t.sbView.topicView.hideSelectBox()},t.prototype._onBranchDrop=function(t){t.preventDefault(),t.stopPropagation(),this._checkEventValid(t)&&(this._branchDragLevelCounterMap[t.sbView.cid]=0,this._dropHandler.dropToBranch(t.sbView,t.originalEvent.dataTransfer))},t.prototype._increaseBranchLevel=function(t){var e=t.sbView.cid;void 0===this._branchDragLevelCounterMap[e]&&(this._branchDragLevelCounterMap[e]=0),this._branchDragLevelCounterMap[e]++},t.prototype._decreaseBranchLevel=function(t){this._branchDragLevelCounterMap[t.sbView.cid]--},t.prototype._isDragTargetOutOfBranch=function(t){return!this._branchDragLevelCounterMap[t.sbView.cid]},t.prototype._onSVGDragEnter=function(t){t.preventDefault(),this._positionTransfer||(this._positionTransfer=this._context.getSVGView().getPositionTransfer())},t.prototype._onSVGDragOver=function(t){},t.prototype._onSVGDrop=function(t){t.preventDefault();var e=this._positionTransfer.clientToReal(this._context.getDragEventClientPosition(t.originalEvent));this._dropHandler.dropToSVG(t.originalEvent.dataTransfer,e)},t.prototype._getAsChildTopicPolygonInfo=function(t,e){var n=void 0;return e.getPolyPointsArr().some(function(e){if(g.default.isPointInPolygon(t,e.points))return n=e,!0}),n},t.prototype._changeDragOverParentBranch=function(t,e,n){if(this._dragFakeBranchView||(this._dragFakeBranchView=this.movingControl._createFakeBranch()),this._preDropParentBranchView&&(delete this._preDropParentBranchView.numRightInDraging,(0,u.detachBranch)(this._dragFakeBranchView)),this._preDropParentBranchView=t,t){t.isMapLike()&&(t.numRightInDraging=t.getStructureObject().calcNumRight(t)),this._childIndex=(0,u.getTargetIndex)(this._dragFakeBranchView,t,e,n),this._childSide=e.side;var r="right"===this._childSide;t.getStructureClass().match("anticlockwise")&&(r=!r),(0,u.attachBranchTo)(this._dragFakeBranchView,t,this._childIndex,t.getRealPosition(),r)}},t.prototype._checkEventValid=function(t){var e=t.originalEvent.dataTransfer;return!!(e&&e.types&&e.types.length)},t}();S.identifier=i.MODULE_NAME.DROP,e.default=S;var T=function(){function t(e){(0,r.default)(this,t),this._context=e,this._xapGenerator=e.config(i.CONFIG.XAP_GENERATOR),this._xapGenerator||console.error("[DropManager] not work since there is no xapGenerator")}return t.prototype.dropToBranch=function(t,e){var n=this;if(A.isXFile(e)){this._context.trigger(i.EVENTS.FILE_DROP_IN_START);var r=e.getData("xapType");return this._dealXFile(e,function(e){n._context.trigger(i.EVENTS.FILE_DROP_IN_END),r===i.XAP_TYPE.X_STICKER&&n._context.execAction("changeSticker",e,t)})}var o="";e.files[0]&&(o=e.files[0].name),t.topicView.hideSelectBox(),A.isImage(e)?(this._context.trigger(i.EVENTS.FILE_DROP_IN_START),this._dealImage(e,function(e){n._context.trigger(i.EVENTS.FILE_DROP_IN_END),n._context.execAction("changeImage",e,t)})):A.isAttachment(e)?(this._context.trigger(i.EVENTS.FILE_DROP_IN_START),this._dealAttachment(e,function(e){n._context.trigger(i.EVENTS.FILE_DROP_IN_END);var r=t.model.createEmptyTopic({href:e,title:o});t.model.addChildTopic(r)})):A.isText(e)&&console.log("drop text")},t.prototype.dropToSVG=function(t,e){var n=this,r=this._context.getSheetView().getCentralBranchView(),o=function(t){var n=r.model.createEmptyTopic(t);n.set("position",e),r.model.addChildTopic(n,{type:i.TOPIC_TYPE.DETACHED})};if(A.isXFile(t)){this._context.trigger(i.EVENTS.FILE_DROP_IN_START);var a=t.getData("xapType");return this._dealXFile(t,function(t){n._context.trigger(i.EVENTS.FILE_DROP_IN_END),a===i.XAP_TYPE.X_STICKER&&o({title:"",image:{src:t}})})}A.isImage(t)?(this._context.trigger(i.EVENTS.FILE_DROP_IN_START),this._dealImage(t,function(t){n._context.trigger(i.EVENTS.FILE_DROP_IN_END),o({title:"",image:{src:t}})})):A.isAttachment(t)&&(this._context.trigger(i.EVENTS.FILE_DROP_IN_START),this._dealAttachment(t,function(t){n._context.trigger(i.EVENTS.FILE_DROP_IN_END),o({title:"",href:t})}))},t.prototype._dealXFile=function(t,e){var n=t.getData("xapType"),r=t.getData("dataUrl"),i={xapType:n,mimeType:"",extType:t.getData("extType"),data:r};this._xapGenerator(i).then(e)},t.prototype._dealFile=function(t,e,n){var r=this,i=e.files[0],o=new FileReader;o.readAsArrayBuffer(i),o.onload=function(){var e="",a=i.name.split(".");a.length>1&&(e=a[a.length-1]);var s={xapType:t,mimeType:i.type,extType:e,data:o.result};r._xapGenerator(s).then(n)},o.onerror=function(){console.error("")}},t.prototype._dealImage=function(t,e){return this._dealFile(i.XAP_TYPE.IMAGE,t,e)},t.prototype._dealAttachment=function(t,e){return this._dealFile(i.XAP_TYPE.ATTACHMENT,t,e)},t}();T.DropDataTypes={TEXT:"text",HYPERLINK:"hyperlink",IMAGE:"image",OTHER:"other"},function(){function t(e,n,i){var o;(0,r.default)(this,t),this._context=e,this.leftPadding=n,this.topPadding=i,this.centralBranch=null,this.enabled=((o={})[E]=!1,o[_]=!1,o),this.intersectedBranch=null,this.parentBranch=null,this.hasEnterd=!1,this._onMove=a.default.frameStabilize(this.onMove.bind(this)),this.curX=0,this.curY=0,this.fakeBranch=null,this._polygon=null,this.childIndex=0,this.childSide="right"}t.prototype.onMove=function(t){var e=this;if(this.curX!==t.clientX||this.curY!==t.clientY){this.curX=t.clientX,this.curY=t.clientY;var n=null,r=null;a.default.postorderIterate(this.centralBranch,[i.TOPIC_DETACHED,i.TOPIC_CALLOUT,i.TOPIC_SUMMARY,i.TOPIC_ATTACHED],function(t){null===n&&(e._checkIntersection(t)?n=t:e._checkNeighbourhood(t)&&(r=t))}),n!==this.intersectedBranch&&this._changeIntersectedBranch(n),r!==this.parentBranch&&this._changeParentBranch(r)}},t.prototype._checkIntersection=function(t){if(!this.enabled[E])return!1;if(this.fakeBranch===t)return!1;var e=t.topicView.topicShapeGroup.rbox(),n={x:this.curX-this.leftPadding,y:this.curY-this.topPadding};return s.default.isBoundIntersectWithPoint(e,n)},t.prototype._checkNeighbourhood=function(t){var e=this;if(!this.enabled[_])return!1;var n=t.getPolyPointsArr();if(!n)return!1;var r=!1,i=this._posRelativeToBranch(t);return n.some(function(t){return(r=s.default.pointInPolygon(i,t.points))&&(e._polygon=t),r}),this._polygon&&(0,u.showPolygon)(t,this._polygon.points),r},t.prototype._changeIntersectedBranch=function(t){null!==this.intersectedBranch&&this.intersectedBranch.onLeave(),this.intersectedBranch=t,null!==this.intersectedBranch&&this.intersectedBranch.onIntersect()},t.prototype._changeParentBranch=function(t){if(this.fakeBranch||this._createFakeBranch(),null!==this.parentBranch&&(this._forgetRightNumber(this.parentBranch),(0,u.detachBranch)(this.fakeBranch)),this.parentBranch=t,null!==this.parentBranch){this._rememberRightNumber(this.parentBranch),this.childIndex=(0,u.getTargetIndex)(this.fakeBranch,this.parentBranch,this._polygon,this._realPosition()),this.childSide=this._polygon.side;var e="right"===this.childSide;this.parentBranch.getStructureClass().match("anticlockwise")&&(e=!e),(0,u.attachBranchTo)(this.fakeBranch,this.parentBranch,this.childIndex,this.parentBranch.getRealPosition(),e)}},t.prototype._rememberRightNumber=function(t){t.isMapLike()&&(t.numRightInDraging=t.getStructureObject().calcNumRight(t))},t.prototype._forgetRightNumber=function(t){delete t.numRightInDraging},t.prototype._realPosition=function(){return this._context.getSVGView().getPositionTransfer().clientToReal({x:this.curX,y:this.curY})},t.prototype._posRelativeToBranch=function(t){var e=t.getRealPosition(),n=this._realPosition();return{x:n.x-e.x,y:n.y-e.y}},t.prototype._createFakeBranch=function(){var t=this._context.model.createComponent("topic"),e=new l.default({model:t}),n=new h.default({topicView:e,model:t});e.topicShapeStyle=o.TOPICSHAPE.RECT,n.svg=new m.G,n.bounds=c.default.extend({},y),n.topicView.bounds=c.default.extend({},n.bounds),n.topicView.shapeBounds=c.default.extend({},n.bounds),n.boundaryBounds=c.default.extend({},n.bounds);var r=n.svg.put(new m.Path).data("name","fakeBranch_noUse");return n.svg.put(new m.Path).data("name","fakeBranch_colorBlock").attr({fill:"#2ebdff","fill-opacity":"0.5",d:d.default.rect(y)}),n.topicView.topicGroup=n.svg,n.topicView.topicShape=r,n.topicView.topicShapeFill=r,n._draged=!0,n},t.prototype._clearEnabled=function(){var t;this.enabled=((t={})[_]=!1,t[E]=!1,t)},t.prototype.enableInteract=function(t){this.enabled[t]=!0},t.prototype.enter=function(){this.hasEntered||(this.centralBranch||(this.centralBranch=this._context.getSheetView().centralBranchView),this._context.getSVGView().eventBus.trigger("dragStart.dragManager"),this._context.model.getUndo().setRecord(!1),document.addEventListener("dragover",this._onMove),this.hasEntered=!0)},t.prototype.leave=function(){if(!this.hasEntered)return{type:0};var t=null,e=0;return this.intersectedBranch?(t=this.intersectedBranch,e=E):this.parentBranch&&(t=this.parentBranch,e=_),this._changeIntersectedBranch(null),this._changeParentBranch(null),document.removeEventListener("dragover",this._onMove),this.hasEntered=!1,this._clearEnabled(),this._context.model.getUndo().setRecord(!0),{activeBranch:t,type:e,mountInfo:{index:e===_?this.childIndex:void 0,side:this.childSide}}}}(),function(){function t(e){(0,r.default)(this,t),this.manager=e}t.prototype.addImage=function(t,e,n){var r=n.activeBranch.model,i=f.default.extname(e),o={type:t,data:{ext:i.startsWith(".")?i.substr(1):i,encode:"utf8",content:e}};this.manager.xapGenerator(o).then(function(t){var e={src:t};r.addImage(e)})},t.prototype.addMarker=function(t,e,n){n.activeBranch.model.addMarker({markerId:e})},t.prototype.newImageTopic=function(t,e,n){var r=n.activeBranch.model,i=f.default.extname(e),o={type:t,data:{ext:i.startsWith(".")?i.substr(1):i,encode:"utf8",content:e}},a=n.mountInfo;this.manager.xapGenerator(o).then(function(t){var e={src:t},n=r.createEmptyTopic({title:"",image:e});r.addChildTopic(n,{at:a.index,sourceIndex:a.index-.5,noAnimation:!0,side:a.side})})},t.prototype.newMarkerTopic=function(t,e,n){var r=n.activeBranch.model,i=n.mountInfo,o=r.createEmptyTopic({});o.addMarker({markerId:e}),r.addChildTopic(o,{at:i.index,sourceIndex:i.index-.5,noAnimation:!0,side:i.side})},t.prototype.newAttachmentTopic=function(t,e,n){var r=n.activeBranch,i=n.mountInfo,o=f.default.extname(e),a={type:t,data:{ext:o.startsWith(".")?o.substr(1):o,encode:"utf8",content:e}};this.manager.xapGenerator(a).then(function(t){var e=r.model,n=e.createEmptyTopic({title:"",href:t});e.addChildTopic(n,{at:i.index,sourceIndex:i.index-.5,noAnimation:!0,side:i.side})})},t.prototype.cancelHandler=function(){console.log("drag is cancled!!!")},t.prototype.unknownTypeHandler=function(t,e){console.log("[Unknow handler]:",t,e)}}()}).call(e,n(6))},function(t,e,n){"use strict";e.__esModule=!0;var r,i=h(n(3)),o=h(n(2)),a=h(n(9)),s=n(5),u=(n(33),n(0)),c=h(n(16)),l=h(n(4));function h(t){return t&&t.__esModule?t:{default:t}}var d=u.TOPIC_TITLE_MAX_WIDTH,f=((r={})[u.CLASS_TYPE.CENTRAL_TOPIC]=23,r[u.CLASS_TYPE.MAIN_TOPIC]=20,r[u.CLASS_TYPE.SUB_TOPIC]=19,r[u.CLASS_TYPE.FLOATING_TOPIC]=20,r),p=s.isMobile?7:3,g="doubletap",v=function(){var t=void 0,e=["letter-spacing","line-height","padding-top","padding-bottom","font-family","font-weight","font-size","text-rendering","text-transform","width","text-indent","padding-left","padding-right","border-width","box-sizing"];return function(n,r){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;t||(t=document.createElement("textarea"),document.body.appendChild(t));var a=function(t){var n=window.getComputedStyle(t),r=n.getPropertyValue("box-sizing"),i=parseFloat(n.getPropertyValue("padding-bottom"))+parseFloat(n.getPropertyValue("padding-top")),o=parseFloat(n.getPropertyValue("border-bottom-width"))+parseFloat(n.getPropertyValue("border-top-width"));return{contextStyle:e.map(function(t){return t+":"+n.getPropertyValue(t)}).join(";"),paddingSize:i,borderSize:o,boxSizing:r}}(n),s=a.paddingSize,u=a.borderSize,c=a.boxSizing,l=a.contextStyle;t.setAttribute("style",l+";\n    height:0 !important;\n    visibility:hidden !important;\n    overflow:hidden !important;\n    position:absolute !important;\n    z-index:-1000 !important;\n    top:0 !important;\n    right:0 !important\n  "),t.value=r;var h=t.scrollHeight;"border-box"===c?h+=u:"content-box"===c&&(h-=s),t.value="";var d=t.scrollHeight-s;if(null!==i){var f=d*i;"border-box"===c&&(f=f+s+u),h=Math.max(f,h)}if(null!==o){var p=d*o;"border-box"===c&&(p=p+s+u),h=Math.min(p,h)}return{height:h}}}(),m=function(){function t(e){(0,o.default)(this,t),(0,i.default)(this,c.default.Events),this.context=e,this.$input=(0,a.default)("<textarea>"),this.$s$Text=(0,a.default)('<svg style="visibility: hidden"><text><tspan>A</tspan></text></svg>'),this.currentComponent=null,this.currentTextStyle=null,this.context.config(u.CONFIG.NO_EDIT_RECEIVER)||(this.initInputArea(),this.initEventListener()),this._initPosition=!0,this.$input.on("focusin",function(t){return t.preventDefault()}),this._deFocusTimer=null}return t.prototype.initInputArea=function(){var t=this.$input;t.addClass("edit-receiver"),t.attr("tabindex","-1"),this.context.getAppToolsContainer().append(t).append(this.$s$Text)},t.prototype.getVal=function(){return this.$input.val()},t.prototype.initEventListener=function(){var t=this,e=this.$input,n=this.context;n.$el.on("focus",function(){t.prepare()}),e.on({keydown:function(e){return t.onKeyDown(e)},focus:function(e){return t.onFocus(e)},blur:function(e){return t.onBlur(e)},input:function(e){return t.onInput(e)},copy:function(e){return t.onCopy(e)},paste:function(e){return t.onPaste(e)},cut:function(e){return t.onCut(e)}}),n.onEvent("dblclick",u.VIEW_TYPE.BRANCH,function(e){return t.onViewShowEdit(e)}),n.onGesture(g,u.VIEW_TYPE.BRANCH,function(e){return t.onViewDbTap(e)}),n.onEvent("dblclick",u.VIEW_TYPE.BOUNDARY,function(e){return t.onViewShowEdit(e,function(){return e.sbView.shouldPreventTitle()})}),n.onGesture(g,u.VIEW_TYPE.BOUNDARY,function(e){return t.onViewDbTap(e)}),n.onEvent("dblclick",u.VIEW_TYPE.RELATIONSHIP,function(e){return t.onViewShowEdit(e)}),n.onGesture(g,u.VIEW_TYPE.RELATIONSHIP,function(e){return t.onViewDbTap(e)}),n.onEvent("dblclick",u.VIEW_TYPE.MATRIX_LABEL,function(e){return t.onViewShowEdit(e)}),n.onGesture(g,u.VIEW_TYPE.MATRIX_LABEL,function(e){return t.onViewDbTap(e)}),n.onEvent("dblclick",u.VIEW_TYPE.LEGENDMARKERLIST,function(e){return t.onViewShowEdit(e)}),n.onEvent("click",u.VIEW_TYPE.INFOITEM,function(t){t.sbView.showEditor(t)}),n.onGesture("tap",u.VIEW_TYPE.SVG,function(t){e.blur()})},t.prototype.onViewShowEdit=function(t){if((arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(){return!1})())return!1;this.show(t.sbView.getEditContent(),t.sbView)},t.prototype.onViewDbTap=function(t){var e=this;t.stopPropagation();var n=t.sbView;setTimeout(function(){n.shouldPreventTitle&&!n.shouldPreventTitle()||e.show(n.getEditContent(),n)},10)},t.prototype.calcSingleLineTSpanHeight=function(t){var e=this.$s$Text.find("text");return e.css(t).find("tspan").css(t),e[0].getBoundingClientRect().height},t.prototype.getTextSize=function(){for(var t,e=arguments.length,n=Array(e),r=0;r<e;r++)n[r]=arguments[r];return(t=this.context).callService.apply(t,[u.SERVICE_NAME.GET_TEXT_SIZE].concat(n))},t.prototype.resolveStr=function(){for(var t,e=arguments.length,n=Array(e),r=0;r<e;r++)n[r]=arguments[r];return(t=this.context).callService.apply(t,[u.SERVICE_NAME.RESOLVE_STR].concat(n))},t.prototype.getEditorBoxStyle=function(t){var e=this.context.getSVGView(),n=e.currentScale,r=e.getCanvasControl().getScrollContainerSize(),o=t.left-r.left,a=t.top-r.top,s=e.getPositionTransfer().scrollContainerToSbContainer({x:o,y:a});t.left=s.x,t.top=s.y;var c=(0,i.default)({},t),l=this.context.callService(u.SERVICE_NAME.GET_MINIMUM_FONT_SIZE);if(c.top-=6,c.left-=6,this.currentComponent.type===u.VIEW_TYPE.BRANCH){c.lineHeight=1.3,c.top-=parseInt(c.fontSize||0)*(1.3-1)/2;var h=this.calcSingleLineTSpanHeight(c);c.top+=(h-parseInt(c.fontSize||0))/2}return c.fontSize=Math.max(parseInt(c.fontSize||0)*n,l),c},t.prototype.setPositionStyle=function(){var t=this.currentComponent.getTextClientStyle();this.currentTextStyle=this.getEditorBoxStyle(t),this.$input.css(this.currentTextStyle)},t.prototype.setShowStyle=function(){this.currentTextStyle.zIndex=1,this.currentTextStyle.opacity=1,this.$input.css(this.currentTextStyle)},t.prototype.setSizeStyle=function(){var t=this.currentTextStyle,e=this.currentComponent,n=this.$input,r=e.type,i=this.context.getSVGView().currentScale,o=n.val(),a=e.getEditContent(),s=this.resolveStr(o,t,d*i).join("\n"),c=this.getTextSize(s,t).width,h=this.resolveStr(a,t,d*i).join("\n"),g=this.getTextSize(h,t).width;if(r===u.VIEW_TYPE.BRANCH){var m=f[l.default.getClassName(e)]||20;if(e.model.customWidth()){var y=e.topicView.titleView.titleWidth(),_=this.resolveStr(o,t,y*i).join("\n"),E=this.getTextSize(_,t).width,A=this.resolveStr(a,t,y*i).join("\n"),S=this.getTextSize(A,t).width,T=v(n[0],_).height,x=v(n[0],A).height;return void n.css({width:Math.max(E,S,m)+p,height:Math.max(T,x)})}n.css({width:Math.max(c,g,m)+p})}else if(r===u.VIEW_TYPE.LABEL){var b=this.currentTextStyle.width,w=this.resolveStr(this.$input.val(),t,b*i).join("\n"),C=this.getTextSize(w,t),I=(C.width,C.height),L=this.resolveStr(e.getEditContent(),t,b*i).join("\n"),N=this.getTextSize(L,t),O=(N.width,N.height);this.$input.css({height:1.25*Math.max(I,O)})}else if(r===u.VIEW_TYPE.RELATIONSHIP)n.css({width:Math.max(c,g,80)+p});else if(r===u.VIEW_TYPE.BOUNDARY){var R=t.width,M=this.currentComponent.getEditContent()||"i",D=this.resolveStr(M,t,R).join("\n"),P=this.getTextSize(D,t).height,k=this.getTextSize(this.$input.val(),t).height;this.$input.css({width:R,height:Math.max(P,k)})}else r===u.VIEW_TYPE.LEGENDMARKERLIST?n.css({width:Math.min(Math.max(c,g,80),200)+p,"line-height":1,"text-align":"left"}):n.css({width:Math.max(c,g,80)+p,"line-height":1.25*t.fontSize+"px"});var B=v(n[0],s).height,F=v(n[0],h).height;n.css({height:Math.max(B,F)})},t.prototype.setHideStyle=function(){var t=this.$input;t.css({zIndex:-1,opacity:0}),t.val(""),this.currentComponent=null,this.context.getModule(u.MODULE_NAME.SEMAPHORE).decrease(u.UI_STATUS.EDIT_TITLE)},t.prototype.moveViewPortIfOutOfScreen=function(){var t=this.$input[0].getBoundingClientRect(),e=this.context.getSVGView().svg.node.getBoundingClientRect(),n=(t.left,e.left,t.top,e.top,t.width,t.height,this.context.getModule(u.MODULE_NAME.MOVE_VIEW_PORT)),r=0,i=0;t.left<e.left&&(r=e.left-t.left),t.right>e.right&&(r=e.right-t.right),t.top<e.top&&(i=e.top-t.top),t.bottom>e.bottom&&(i=e.bottom-t.bottom),n.tryToMoveViewPort(r,i)},t.prototype.saveEdit=function(){var t=this.$input;this.currentComponent.saveEdit(t.val())},t.prototype.isVisible=function(){return Number(this.$input[0].style.zIndex)>0},t.prototype.onFocus=function(t){t.preventDefault(),t.stopPropagation(),clearTimeout(this._deFocusTimer),this.context.getModule(u.MODULE_NAME.SEMAPHORE).decrease(u.UI_STATUS.DE_FOCUS)},t.prototype.onInput=function(t){var e=void 0;this.isVisible()?t.preventDefault():(e=this.getTargetFromSelection())&&this.show(null,e),this.currentComponent&&this.setSizeStyle(),this.moveViewPortIfOutOfScreen()},t.prototype.getTargetFromSelection=function(){return this.context.getModule(u.MODULE_NAME.SELECTION).selections.filter(function(t){var e=t.type;return-1!==[u.VIEW_TYPE.BRANCH,u.VIEW_TYPE.RELATIONSHIP,u.VIEW_TYPE.MATRIX_LABEL].indexOf(e)||(u.VIEW_TYPE.BOUNDARY===e?!t.shouldPreventTitle():void 0)})[0]},t.prototype.onBlur=function(t){var e=this;this._deFocusTimer=setTimeout(function(){e.context.getModule(u.MODULE_NAME.SEMAPHORE).increase(u.UI_STATUS.DE_FOCUS)},200),this.isVisible()&&(this.context.trigger(u.EVENTS.BEFORE_EDIT_RECEIVER_BLUR,this.$input.val()),this.saveEdit(),this.setHideStyle())},t.prototype.onKeyDown=function(t){var e=this,n=t.keyCode,r={hasAlt:t.altKey,hasShift:t.shiftKey,hasCtrl:t.ctrlKey,hasMeta:t.metaKey},i=this.context.config(u.CONFIG.KEYBINDING_SERVICE)(n,r)||function(n,r){switch(n){case 13:return function(){e.isVisible()&&!r.hasShift&&(t.stopPropagation(),t.preventDefault(),e.saveEdit(),e.setHideStyle(),e.isFinishByEnter=!0)};case 9:return function(){t.preventDefault()};case 90:return function(){(r.hasMeta||r.hasCtrl)&&(e.isVisible()||t.preventDefault())};case 27:return function(){e.isVisible()&&(t.stopPropagation(),t.preventDefault(),e.context.trigger(u.EVENTS.BEFORE_CANCEL_INPUT_TEXT,e.$input.val()),e.setHideStyle())};case 32:return function(){if(!e.isVisible()){var n=[u.VIEW_TYPE.BRANCH,u.VIEW_TYPE.BOUNDARY,u.VIEW_TYPE.RELATIONSHIP,u.VIEW_TYPE.MATRIX_LABEL];e.currentComponent=e.getTargetFromSelection();var r=e.currentComponent;r&&n.includes(r.type)&&(t.preventDefault(),e.show(r.getEditContent(),r))}};default:return null}}(n,r);i&&i(),13===n&&(!this.isVisible()||this.isVisible()&&!r.hasShift)&&t.preventDefault()},t.prototype.onCopy=function(t){this.isVisible()||(t.preventDefault(),this.trigger("copy",t.originalEvent))},t.prototype.onPaste=function(t){this.isVisible()||(t.preventDefault(),this.trigger("paste",t.originalEvent))},t.prototype.onCut=function(t){this.isVisible()||(t.preventDefault(),this.trigger("cut",t.originalEvent))},t.prototype.prepare=function(){var t=this.$input[0];if(this.$input.val(""),this._initPosition){var e=this.context.getSVGView().getPositionTransfer().scrollContainerToSbContainer({x:0,y:0});this.$input.css({left:e.x,top:e.y}),this._initPosition=!1}t.select()},t.prototype.show=function(t,e){if(this.context.isReadOnly())return!1;this.currentComponent&&this.hide(),this.context.getModule(u.MODULE_NAME.SEMAPHORE).increase(u.UI_STATUS.EDIT_TITLE),e&&(this.currentComponent=e),t&&this.$input.val(t),this.setPositionStyle(),this.setShowStyle(),this.setSizeStyle(),this.moveViewPortIfOutOfScreen();var n=this.$input[0];n.focus(),t&&n.select()},t.prototype.hide=function(t){this.isVisible()&&(t||this.saveEdit(),this.setHideStyle())},t.prototype.getInputDOM=function(){return this.$input[0]},t.prototype.locateInputToCurrentComponent=function(t){var e=this;setTimeout(function(){t&&t.getContext()&&(e.isVisible()||(e.currentComponent=t,e.setPositionStyle(),e.setSizeStyle(),e.currentComponent=null))},0)},t.prototype.repairPosition=function(){this.currentComponent&&(this.setPositionStyle(),this.setSizeStyle())},t}();m.identifier=u.MODULE_NAME.EDIT_RECEIVER,e.default=m},function(t,e,n){"use strict";e.__esModule=!0;var r=a(n(2)),i=n(0),o=a(n(5));function a(t){return t&&t.__esModule?t:{default:t}}var s=function t(e){(0,r.default)(this,t);var n={keyMap:{9:"Tab",13:"Enter",8:"Delete",46:"Delete",90:"Z",65:"A",38:"Up",40:"Down",37:"Left",39:"Right",32:"Space"},readOnlyAllowed:{38:!0,40:!0,37:!0,39:!0},operationMap:{Tab:function(t){var n=this.getSelection();n&&1===n.length&&"branch"===n[0].type&&e.execAction("addSubTopic",n[0])},Enter:function(t){var n=this.getSelection();if(n&&n.length>0&&o.default.isFunctionEnabled(t)){if(n.some(function(t){return"branch"!==t.type}))return;e.execAction("addParentTopic")}else if(n&&1===n.length&&"branch"===n[0].type){if(n[0].isCentralBranch())return void e.execAction("addSubTopic",n[0]);t.shiftKey?e.execAction("addTopicBefore",n[0]):e.execAction("addTopicAfter",n[0])}},Delete:function(t){this.getSelection()&&e.execAction("deleteItem")},Z:function(t){if(t.metaKey||t.ctrlKey){var n=e.parent()||e;t.shiftKey?n.execAction("Redo"):n.execAction("Undo")}},A:function(t){(t.metaKey||t.ctrlKey)&&e.execAction("selectAll")},Up:function(t){t.preventDefault(),t.altKey?e.execAction("exchangeSiblingTopic",i.DIRECTION.UP):e.execAction("selectionNavigate",i.DIRECTION.UP,t.metaKey||t.ctrlKey)},Down:function(t){t.preventDefault(),t.altKey?e.execAction("exchangeSiblingTopic",i.DIRECTION.DOWN):e.execAction("selectionNavigate",i.DIRECTION.DOWN,t.metaKey||t.ctrlKey)},Left:function(t){t.preventDefault(),t.altKey?e.execAction("exchangeSiblingTopic",i.DIRECTION.LEFT):e.execAction("selectionNavigate",i.DIRECTION.LEFT,t.metaKey||t.ctrlKey)},Right:function(t){t.preventDefault(),t.altKey?e.execAction("exchangeSiblingTopic",i.DIRECTION.RIGHT):e.execAction("selectionNavigate",i.DIRECTION.RIGHT,t.metaKey||t.ctrlKey)},Space:function(t){t.preventDefault()}},forceOperationMap:{Up:function(t){t.preventDefault()},Down:function(t){t.preventDefault()},Left:function(t){t.preventDefault()},Right:function(t){t.preventDefault()},Space:function(t){t.preventDefault()}},getSelection:function(){return e.getModule("selectionmanager").selections}};return e.$el.on("keydown",function(t){var r=t.which,o=n.operationMap,a=n.forceOperationMap;if(r in n.keyMap){if(e.isReadOnly()&&!0!==n.readOnlyAllowed[r]||-1!==e.getActiveUIStatus().indexOf(i.UI_STATUS.EDIT_TITLE))return;e.config(i.CONFIG.NO_KEYBIND)?a[n.keyMap[r]]&&a[n.keyMap[r]].call(n,t):o[n.keyMap[r]].call(n,t)}}),n};s.identifier=i.MODULE_NAME.KEY_BIND,e.default=s},function(t,e,n){"use strict";e.__esModule=!0;var r=s(n(2)),i=s(n(5)),o=n(0),a=n(8);function s(t){return t&&t.__esModule?t:{default:t}}var u=[o.TOPIC_ATTACHED,o.TOPIC_SUMMARY,o.TOPIC_DETACHED,o.TOPIC_CALLOUT],c=function t(e){(0,r.default)(this,t);var n,s=[],c=[],l=!0,h={isSync:!1},d=void 0;return{layout:function(t,r){d||(d=e.getModule(o.MODULE_NAME.SEMAPHORE)),t._isLayout=!1,s.push({branch:t,layer:t.getLayer(),options:r}),s.sort(function(t,e){return t.layer-e.layer}),n||(n=!0,d.increase(o.UI_STATUS.LAYOUT),h.isSync?f():(0,a.nextTick)(f))},config:function(t,e){return void 0!==e&&(h[t]=e),h[t]}};function f(){var t=e.getSheetView().centralBranchView;for(i.default.preorderIterate(t,u,function(t){return t.updateStructure()});s.length>0;){var r=s.pop();r.options&&"function"==typeof r.options.afterward&&c.push(r.options.afterward),!r.branch._isLayout&&r.branch.parent()&&r.branch._calBoundsAndChildrenPos()}i.default.preorderIterate(t,u,function(t){return t._noAnimation||l?(function(t){i.default.preorderIterate(t,u,function(t){return t.refreshView(!0)})}(t),delete t._noAnimation,i.default.SKIP):t.refreshView(!1)}),c.forEach(function(t){t()}),c.length=0,n=!1,l&&(l=!1),d.decrease(o.UI_STATUS.LAYOUT)}};c.identifier=o.MODULE_NAME.LAYOUT,e.default=c},function(t,e,n){"use strict";e.__esModule=!0;var r=h(n(17)),i=h(n(30)),o=h(n(11)),a=h(n(2)),s=h(n(5)),u=n(0),c=h(n(1)),l=h(n(76));function h(t){return t&&t.__esModule?t:{default:t}}var d={priorityMarkers:{id:"priorityMarkers",markersMap:{"priority-1":{id:"priority-1",name:"%priority1",resource:"priority_1@32.png",svg:"priority_1@16.svg",index:0},"priority-2":{id:"priority-2",name:"%priority2",resource:"priority_2@32.png",svg:"priority_2@16.svg",index:1},"priority-3":{id:"priority-3",name:"%priority3",resource:"priority_3@32.png",svg:"priority_3@16.svg",index:2},"priority-4":{id:"priority-4",name:"%priority4",resource:"priority_4@32.png",svg:"priority_4@16.svg",index:3},"priority-5":{id:"priority-5",name:"%priority5",resource:"priority_5@32.png",svg:"priority_5@16.svg",index:4},"priority-6":{id:"priority-6",name:"%priority6",resource:"priority_6@32.png",svg:"priority_6@16.svg",index:5},"priority-7":{id:"priority-7",name:"%priority7",resource:"priority_7@32.png",svg:"priority_7@16.svg",index:6},"priority-8":{id:"priority-8",name:"%priority8",resource:"priority_8@32.png",svg:"priority_8@16.svg",hidden:"true",index:7},"priority-9":{id:"priority-9",name:"%priority9",resource:"priority_9@32.png",svg:"priority_9@16.svg",hidden:"true",index:8}}},smileyMarkers:{id:"smileyMarkers",markersMap:{"smiley-laugh":{id:"smiley-laugh",name:"%smileyLaugh",resource:"emotion_laugh@32.png",svg:"emotion_laugh@16.svg",index:9},"smiley-smile":{id:"smiley-smile",name:"%smileySmile",resource:"emotion_smile@32.png",svg:"emotion_smile@16.svg",index:10},"smiley-cry":{id:"smiley-cry",name:"%smileyCry",resource:"emotion_cry@32.png",svg:"emotion_cry@16.svg",index:11},"smiley-surprise":{id:"smiley-surprise",name:"%smileySurprise",resource:"emotion_surprise@32.png",svg:"emotion_surprise@16.svg",index:12},"smiley-boring":{id:"smiley-boring",name:"%smileyBoring",resource:"emotion_boring@32.png",svg:"emotion_boring@16.svg",index:13},"smiley-angry":{id:"smiley-angry",name:"%smileyAngry",resource:"emotion_angry@32.png",svg:"emotion_angry@16.svg",index:14},"smiley-embarrass":{id:"smiley-embarrass",name:"%smileyEmbarrass",resource:"emotion_embarrass@16.png",svg:"emotion_embarrass@16.svg",index:15}}},taskMakers:{id:"taskMakers",markersMap:{"task-start":{id:"task-start",name:"%taskStart",resource:"progress_start@32.png",svg:"progress_start@16.svg",index:16},"task-oct":{id:"task-oct",name:"%taskOct",resource:"progress_1o@32.png",svg:"progress_1o@16.svg",index:17},"task-quarter":{id:"task-quarter",name:"%taskQuarter",resource:"progress_1q@32.png",svg:"progress_1q@16.svg",hidden:"true",index:18},"task-3oct":{id:"task-3oct",name:"%task3Oct",resource:"progress_3o@32.png",svg:"progress_3o@16.svg",index:19},"task-half":{id:"task-half",name:"%taskHalf",resource:"progress_half@32.png",svg:"progress_half@16.svg",index:20},"task-5oct":{id:"task-5oct",name:"%task5Oct",resource:"progress_5o@32.png",svg:"progress_5o@16.svg",index:21},"task-3quar":{id:"task-3quar",name:"%task3Quarters",resource:"progress_3q@32.png",svg:"progress_3q@16.svg",hidden:"true",index:22},"task-7oct":{id:"task-7oct",name:"%task7Oct",resource:"progress_7o@32.png",svg:"progress_7o@16.svg",index:23},"task-done":{id:"task-done",name:"%taskDone",resource:"progress_done@32.png",svg:"progress_done@16.svg",index:24},"task-pause":{id:"task-pause",name:"%taskPause",resource:"progress_pause@32.png",hidden:"true",index:25}}},flagMakers:{id:"flagMakers",markersMap:{"flag-red":{id:"flag-red",name:"%colorRed",resource:"flag_red@32.png",svg:"flag_red@16.svg",index:26},"flag-orange":{id:"flag-orange",name:"%colorOrange",resource:"flag_orange@32.png",svg:"flag_orange@16.svg",index:27},"flag-yellow":{id:"flag-yellow",name:"%colorYellow",resource:"flag_yellow@32.png",svg:"flag_yellow@16.svg",hidden:"true",index:28},"flag-dark-blue":{id:"flag-dark-blue",name:"%colorDarkBlue",resource:"flag_dark_blue@32.png",svg:"flag_dark_blue@16.svg",index:29},"flag-purple":{id:"flag-purple",name:"%colorPurple",resource:"flag_purple@32.png",svg:"flag_purple@16.svg",index:30},"flag-green":{id:"flag-green",name:"%colorGreen",resource:"flag_green@32.png",svg:"flag_green@16.svg",index:31},"flag-blue":{id:"flag-blue",name:"%colorBlue",resource:"flag_blue@32.png",svg:"flag_blue@16.svg",index:32},"flag-gray":{id:"flag-gray",name:"%colorGray",resource:"flag_gray@32.png",svg:"flag_gray@16.svg",index:33},"flag-dark-green":{id:"flag-dark-green",name:"%colorDarkGreen",resource:"flag_dark_green@16.png",svg:"flag_dark_green@16.svg",hidden:"true",index:34},"flag-dark-gray":{id:"flag-dark-gray",name:"%colorDarkGray",resource:"flag_dark_gray@16.png",svg:"flag_dark_gray@16.svg",hidden:"true",index:35}}},starMakers:{id:"starMakers",markersMap:{"star-red":{id:"star-red",name:"%colorRed",resource:"star_red@32.png",svg:"star_red@16.svg",index:36},"star-orange":{id:"star-orange",name:"%colorOrange",resource:"star_orange@32.png",svg:"star_orange@16.svg",index:37},"star-dark-blue":{id:"star-dark-blue",name:"%colorDarkBlue",resource:"star_dark_blue@32.png",svg:"star_dark_blue@16.svg",index:38},"star-purple":{id:"star-purple",name:"%colorPurple",resource:"star_purple@32.png",svg:"star_purple@16.svg",index:39},"star-green":{id:"star-green",name:"%colorGreen",resource:"star_green@32.png",svg:"star_green@16.svg",index:40},"star-blue":{id:"star-blue",name:"%colorBlue",resource:"star_blue@32.png",svg:"star_blue@16.svg",index:41},"star-gray":{id:"star-gray",name:"%colorGray",resource:"star_gray@32.png",svg:"star_gray@16.svg",index:42},"star-yellow":{id:"star-yellow",name:"%colorYellow",resource:"star_yellow@32.png",svg:"star_yellow@16.svg",hidden:"true",index:43},"star-dark-green":{id:"star-dark-green",name:"%colorDarkGreen",resource:"star_dark_green@16.png",svg:"star_dark_green@16.svg",hidden:"true",index:44},"star-dark-gray":{id:"star-dark-gray",name:"%colorDarkGray",resource:"star_dark_gray@16.png",svg:"star_dark_gray@16.svg",hidden:"true",index:45}}},peopleMakers:{id:"peopleMakers",markersMap:{"people-red":{id:"people-red",name:"%colorRed",resource:"people_red@32.png",svg:"people_red@16.svg",index:46},"people-orange":{id:"people-orange",name:"%colorOrange",resource:"people_orange@32.png",svg:"people_orange@16.svg",index:47},"people-yellow":{id:"people-yellow",name:"%colorYellow",resource:"people_yellow@32.png",svg:"people_yellow@16.svg",hidden:"true",index:48},"people-dark-blue":{id:"people-dark-blue",name:"%colorDarkBlue",resource:"people_dark_blue@32.png",svg:"people_dark_blue@16.svg",index:49},"people-purple":{id:"people-purple",name:"%colorPurple",resource:"people_purple@32.png",svg:"people_purple@16.svg",index:50},"people-green":{id:"people-green",name:"%colorGreen",resource:"people_green@32.png",svg:"people_green@16.svg",index:51},"people-blue":{id:"people-blue",name:"%colorBlue",resource:"people_blue@32.png",svg:"people_blue@16.svg",index:52},"people-gray":{id:"people-gray",name:"%colorGray",resource:"people_gray@32.png",svg:"people_gray@16.svg",index:53},"people-dark-green":{id:"people-dark-green",name:"%colorDarkGreen",resource:"people_dark_green@16.png",svg:"people_dark_green@16.svg",hidden:"true",index:54},"people-dark-gray":{id:"people-dark-gray",name:"%colorDarkGray",resource:"people_dark_gray@16.png",svg:"people_dark_gray@16.svg",hidden:"true",index:55}}},arrowMakers:{id:"arrowMakers",markersMap:{"arrow-left":{id:"arrow-left",name:"%arrowLeft",resource:"arrow_left@32.png",svg:"arrow_left@16.svg",index:56},"arrow-right":{id:"arrow-right",name:"%arrowRight",resource:"arrow_right@32.png",svg:"arrow_right@16.svg",index:57},"arrow-up":{id:"arrow-up",name:"%arrowUp",resource:"arrow_up@32.png",svg:"arrow_up@16.svg",index:58},"arrow-down":{id:"arrow-down",name:"%arrowDown",resource:"arrow_down@32.png",svg:"arrow_down@16.svg",index:59},"arrow-left-right":{id:"arrow-left-right",name:"%arrowLeftRight",resource:"arrow_left_right@32.png",svg:"arrow_left_right@16.svg",index:60},"arrow-up-down":{id:"arrow-up-down",name:"%arrowUpDown",resource:"arrow_up_down@32.png",svg:"arrow_up_down@16.svg",index:61},"arrow-refresh":{id:"arrow-refresh",name:"%arrowRefresh",resource:"arrow_refresh@32.png",svg:"arrow_refresh@16.svg",index:62},"arrow-up-right":{id:"arrow-up-right",name:"%arrowUpRight",resource:"arrow_up_right@32.png",svg:"arrow_up_right@16.svg",hidden:"true",index:63},"arrow-down-right":{id:"arrow-down-right",name:"%arrowDownRight",resource:"arrow_down_right@32.png",svg:"arrow_down_right@16.svg",hidden:"true",index:64},"arrow-down-left":{id:"arrow-down-left",name:"%arrowDownLeft",resource:"arrow_down_left@32.png",svg:"arrow_down_left@16.svg",hidden:"true",index:65},"arrow-up-left":{id:"arrow-up-left",name:"%arrowUpLeft",resource:"arrow_up_left@32.png",svg:"arrow_up_left@16.svg",hidden:"true",index:66}}},symbolMakers:{id:"symbolMakers",markersMap:{c_symbol_heart:{id:"c_symbol_heart",name:"%symbolHeart",resource:"symbol_heart@16.png",svg:"symbol_heart.svg",index:67},c_symbol_dislike:{id:"c_symbol_dislike",name:"%symbolDislike",resource:"symbol_dislike@16.png",svg:"symbol_dislike.svg",index:68},c_symbol_like:{id:"c_symbol_like",name:"%symbolLike",resource:"symbol_like@16.png",svg:"symbol_like.svg",index:69},c_symbol_music:{id:"c_symbol_music",name:"%symbolMusic",resource:"symbol_music@16.png",svg:"symbol_music.svg",index:70},c_symbol_lock:{id:"c_symbol_lock",name:"%symbolLock",svg:"symbol_lock.svg",index:71},c_symbol_hourglass:{id:"c_symbol_hourglass",name:"%symbolHourglass",svg:"symbol_hourglass.svg",index:72},c_symbol_broken_heart:{id:"c_symbol_broken_heart",name:"%symbolBrokenHeart",svg:"symbol_broken_heart.svg",index:73},c_symbol_quote:{id:"c_symbol_quote",name:"%symbolQuote",svg:"symbol_quote.svg",index:74},c_symbol_apostrophe:{id:"c_symbol_apostrophe",name:"%symbolApostrophe",svg:"symbol_apostrophe.svg",index:75},"symbol-question":{id:"symbol-question",name:"%symbolQuestion",resource:"symbol_question@32.png",svg:"symbol_question@16.svg",index:76},"symbol-attention":{id:"symbol-attention",name:"%symbolAttention",resource:"symbol_attention.png",svg:"symbol_attention@16.svg",index:77},"symbol-wrong":{id:"symbol-wrong",name:"%symbolWrong",resource:"symbol_wrong@32.png",svg:"symbol_wrong@16.svg",index:78},"symbol-pause":{id:"symbol-pause",name:"%symbolPause",resource:"symbol_pause@32.png",svg:"symbol_pause@16.svg",index:79},"symbol-no-entry":{id:"symbol-no-entry",name:"%symbolNoEntry",svg:"symbol_no_entry@16.svg",index:80},"symbol-plus":{id:"symbol-plus",name:"%symbolPlus",resource:"symbol_plus@32.png",svg:"symbol_plus@16.svg",index:81},"symbol-minus":{id:"symbol-minus",name:"%symbolMinus",resource:"symbol_minus@32.png",svg:"symbol_minus@16.svg",index:82},"symbol-info":{id:"symbol-info",name:"%symbolInfo",resource:"symbol_information@32.png",svg:"symbol_information@16.svg",index:83},"symbol-divide":{id:"symbol-divide",name:"%symbolDivide",svg:"symbol_divide@16.svg",index:84},"symbol-equality":{id:"symbol-equality",name:"%symbolEquality",svg:"symbol_equality@16.svg",index:85},"symbol-right":{id:"symbol-right",name:"%symbolRight",resource:"symbol_right@32.png",svg:"symbol_right@16.svg",index:86},"symbol-code":{id:"symbol-code",name:"%symbolCode",svg:"symbol_code@16.svg",index:87},c_symbol_contact:{id:"c_symbol_contact",name:"%symbolContact",resource:"symbol_contact@16.png",svg:"symbol_contact.svg",index:88},c_symbol_telephone:{id:"c_symbol_telephone",name:"%symbolTelephone",resource:"symbol_telephone@16.png",svg:"symbol_telephone.svg",index:89},c_symbol_pen:{id:"c_symbol_pen",name:"%symbolPen",resource:"symbol_pen@16.png",svg:"symbol_pen.svg",index:90},c_symbol_money:{id:"c_symbol_money",name:"%symbolMoney",resource:"symbol_money@16.png",svg:"symbol_money.svg",index:91},c_symbol_bar_chart:{id:"c_symbol_bar_chart",name:"%symbolBarChart",resource:"symbol_bar_chart@16.png",svg:"symbol_bar_chart.svg",index:92},c_symbol_pie_chart:{id:"c_symbol_pie_chart",name:"%symbolPieChart",resource:"symbol_pie_chart@16.png",svg:"symbol_pie_chart.svg",index:93},c_symbol_line_graph:{id:"c_symbol_line_graph",name:"%symbolLineGraph",resource:"symbol_line_graph@16.png",svg:"symbol_line_graph.svg",index:94},c_symbol_shopping_cart:{id:"c_symbol_shopping_cart",name:"%symbolShoppingCart",resource:"symbol_shopping_cart@16.png",svg:"symbol_shopping_cart.svg",index:95},c_symbol_medals:{id:"c_symbol_medals",name:"%symbolMedals",resource:"symbol_medals@16.png",svg:"symbol_medals.svg",index:96},c_symbol_trophy:{id:"c_symbol_trophy",name:"%symbolTrophy",resource:"symbol_trophy@16.png",svg:"symbol_trophy.svg",index:97},"symbol-image":{id:"symbol-image",name:"%symbolImage",svg:"symbol_image@16.svg",index:98},c_symbol_exercise:{id:"c_symbol_exercise",name:"%symbolExercise",resource:"symbol_exercise@16.png",svg:"symbol_exercise.svg",index:99},c_symbol_flight:{id:"c_symbol_flight",name:"%symbolFlight",resource:"symbol_flight@16.png",svg:"symbol_flight.svg",index:100},"symbol-pin":{id:"symbol-pin",name:"%symbolPin",svg:"symbol_pin@16.svg",index:101},"symbol-exclam":{id:"symbol-exclam",name:"%symbolExclam",resource:"symbol_exclamation@32.png",svg:"symbol_exclamation@16.svg",index:102,hidden:"true"},"c_simbol-plus":{id:"c_simbol-plus",name:"%symbolPlus",resource:"c_simbol_plus@32.png",svg:"symbol_plus@16.svg",index:103,hidden:"true"},"c_simbol-minus":{id:"c_simbol-minus",name:"%symbolMinus",resource:"c_simbol_minus@32.png",svg:"symbol_minus@16.svg",index:104,hidden:"true"},"c_simbol-question":{id:"c_simbol-question",name:"%symbolQuestion",resource:"c_simbol_question@32.png",svg:"c_simbol_question@16.svg",index:105,hidden:"true"},"c_simbol-exclam":{id:"c_simbol-exclam",name:"%symbolExclam",resource:"c_simbol_exclamation@32.png",svg:"c_simbol_exclamation@16.svg",index:106,hidden:"true"},"c_simbol-info":{id:"c_simbol-info",name:"%symbolInfo",resource:"c_simbol_information@32.png",svg:"symbol_information@16.svg",index:107,hidden:"true"},"c_simbol-wrong":{id:"c_simbol-wrong",name:"%symbolWrong",resource:"c_simbol_wrong@32.png",svg:"c_simbol_wrong@16.svg",index:108,hidden:"true"},"c_simbol-right":{id:"c_simbol-right",name:"%symbolRight",resource:"c_simbol_right@32.png",svg:"symbol_right@16.svg",index:109,hidden:"true"},"c_simbol-pause":{id:"c_simbol-pause",name:"%symbolPause",resource:"c_simbol_pause@32.png",svg:"symbol_pause@16.svg",index:110,hidden:"true"},c_symbol_thermometer:{id:"c_symbol_thermometer",name:"%symbolThermometer",resource:"symbol_thermometer@16.png",svg:"symbol_thermometer.svg",index:111,hidden:"true"}}},monthMakers:{id:"monthMakers",markersMap:{"month-jan":{id:"month-jan",name:"%monthJan",resource:"month_jan@32.png",svg:"month_jan@16.svg",index:112},"month-feb":{id:"month-feb",name:"%monthFeb",resource:"month_feb@32.png",svg:"month_feb@16.svg",index:113},"month-mar":{id:"month-mar",name:"%monthMar",resource:"month_mar@32.png",svg:"month_mar@16.svg",index:114},"month-apr":{id:"month-apr",name:"%monthApr",resource:"month_apr@32.png",svg:"month_apr@16.svg",index:115},"month-may":{id:"month-may",name:"%monthMay",resource:"month_may@32.png",svg:"month_may@16.svg",index:116},"month-jun":{id:"month-jun",name:"%monthJun",resource:"month_jun@32.png",svg:"month_jun@16.svg",index:117},"month-jul":{id:"month-jul",name:"%monthJul",resource:"month_jul@32.png",svg:"month_jul@16.svg",index:118},"month-aug":{id:"month-aug",name:"%monthAug",resource:"month_aug@32.png",svg:"month_aug@16.svg",index:119},"month-sep":{id:"month-sep",name:"%monthSep",resource:"month_sep@32.png",svg:"month_sep@16.svg",index:120},"month-oct":{id:"month-oct",name:"%monthOct",resource:"month_oct@32.png",svg:"month_oct@16.svg",index:121},"month-nov":{id:"month-nov",name:"%monthNov",resource:"month_nov@32.png",svg:"month_nov@16.svg",index:122},"month-dec":{id:"month-dec",name:"%monthDec",resource:"month_dec@32.png",svg:"month_dec@16.svg",index:123}}},weekMakers:{id:"weekMakers",markersMap:{"week-sun":{id:"week-sun",name:"%weekSun",resource:"week_sun@32.png",svg:"week_sun@16.svg",index:124},"week-mon":{id:"week-mon",name:"%weekMon",resource:"week_mon@32.png",svg:"week_mon@16.svg",index:125},"week-tue":{id:"week-tue",name:"%weekTue",resource:"week_tue@32.png",svg:"week_tue@16.svg",index:126},"week-wed":{id:"week-wed",name:"%weekWed",resource:"week_wed@32.png",svg:"week_wed@16.svg",index:127},"week-thu":{id:"week-thu",name:"%weekThu",resource:"week_thu@32.png",svg:"week_thu@16.svg",index:128},"week-fri":{id:"week-fri",name:"%weekFri",resource:"week_fri@32.png",svg:"week_fri@16.svg",index:129},"week-sat":{id:"week-sat",name:"%weekSat",resource:"week_sat@32.png",svg:"week_sat@16.svg",index:130}}},halfStarMarkers:{id:"halfStarMarkers",hidden:"true",markersMap:{"half-star-green":{id:"half-star-green",name:"%colorGreen",resource:"star_green_half.png",index:131},"half-star-red":{id:"half-star-red",name:"%colorRed",resource:"star_red_half.png",index:132},"half-star-yellow":{id:"half-star-yellow",name:"%colorYellow",resource:"star_yellow_half.png",index:133},"half-star-purple":{id:"half-star-purple",name:"%colorPurple",resource:"star_purple_half.png",index:134},"half-star-blue":{id:"half-star-blue",name:"%colorBlue",resource:"star_blue_half.png",index:135},"half-star-gray":{id:"half-star-gray",name:"%colorGray",resource:"star_gray_half.png",index:136}}},otherMarkers:{id:"otherMarkers",hidden:"true",markersMap:{"other-calendar":{id:"other-calendar",name:"%otherCalendar",resource:"other_calendar.png",index:137},"other-email":{id:"other-email",name:"%otherEmail",resource:"other_email.png",index:138},"other-phone":{id:"other-phone",name:"%otherPhone",resource:"other_phone.png",index:139},"other-phone2":{id:"other-phone2",name:"%otherPhone",resource:"other_phone2.png",index:140},"other-fax":{id:"other-fax",name:"%otherFax",resource:"other_print.png",index:141},"other-people":{id:"other-people",name:"%otherPeople",resource:"people_green@32.png",index:142},"other-people2":{id:"other-people2",name:"%otherPeople",resource:"people_blue@32.png",index:143},"other-clock":{id:"other-clock",name:"%otherClock",resource:"other_clock.png",index:144},"other-coffee-cup":{id:"other-coffee-cup",name:"%otherCoffeeCup",resource:"other_coffee.png",index:145},"other-question":{id:"other-question",name:"%otherQuestion",resource:"symbol_question@32.png",svg:"symbol_question@16.svg",index:146},"other-exclam":{id:"other-exclam",name:"%otherExclam",resource:"symbol_exclamation@32.png",svg:"symbol_exclamation@16.svg",index:147},"other-lightbulb":{id:"other-lightbulb",name:"%otherLightBulb",resource:"other_buble.png",index:148},"other-businesscard":{id:"other-businesscard",name:"%otherBusinessCard",resource:"other_businesscard.png",index:149},"other-social":{id:"other-social",name:"%otherSocial",resource:"other_social.png",index:150},"other-chat":{id:"other-chat",name:"%otherChat",resource:"other_chat.png",index:151},"other-note":{id:"other-note",name:"%otherNote",resource:"other_note.png",index:152},"other-lock":{id:"other-lock",name:"%otherLock",resource:"other_lock.png",index:153},"other-unlock":{id:"other-unlock",name:"%otherUnlock",resource:"other_unlock.png",index:154},"other-yes":{id:"other-yes",name:"%otherYes",resource:"symbol_right@32.png",svg:"symbol_right@16.svg",index:155},"other-no":{id:"other-no",name:"%otherNo",resource:"symbol_wrong@32.png",svg:"symbol_wrong@16.svg",index:156},"other-bomb":{id:"other-bomb",name:"%otherBomb",resource:"other_bomb.png",index:157}}}},f={priorityMarkers:{id:"priorityMarkers",markersMap:{"priority-1":{id:"priority-1",name:"%priority1",resource:"priority_1@32.png",svg:"priority_1@16.svg",index:0},"priority-2":{id:"priority-2",name:"%priority2",resource:"priority_2@32.png",svg:"priority_2@16.svg",index:1},"priority-3":{id:"priority-3",name:"%priority3",resource:"priority_3@32.png",svg:"priority_3@16.svg",index:2},"priority-4":{id:"priority-4",name:"%priority4",resource:"priority_4@32.png",svg:"priority_4@16.svg",index:3},"priority-5":{id:"priority-5",name:"%priority5",resource:"priority_5@32.png",svg:"priority_5@16.svg",index:4},"priority-6":{id:"priority-6",name:"%priority6",resource:"priority_6@32.png",svg:"priority_6@16.svg",index:5},"priority-7":{id:"priority-7",name:"%priority7",resource:"priority_7@32.png",svg:"priority_7@16.svg",index:6},"priority-8":{id:"priority-8",name:"%priority8",resource:"priority_8@32.png",svg:"priority_8@16.svg",index:7},"priority-9":{id:"priority-9",name:"%priority9",resource:"priority_9@32.png",svg:"priority_9@16.svg",index:8}}},smileyMarkers:{id:"smileyMarkers",markersMap:{"smiley-smile":{id:"smiley-smile",name:"%smileySmile",resource:"emotion_smile@32.png",svg:"emotion_smile@16.svg",index:9},"smiley-laugh":{id:"smiley-laugh",name:"%smileyLaugh",resource:"emotion_laugh@32.png",svg:"emotion_laugh@16.svg",index:10},"smiley-angry":{id:"smiley-angry",name:"%smileyAngry",resource:"emotion_angry@32.png",svg:"emotion_angry@16.svg",index:11},"smiley-cry":{id:"smiley-cry",name:"%smileyCry",resource:"emotion_cry@32.png",svg:"emotion_cry@16.svg",index:12},"smiley-surprise":{id:"smiley-surprise",name:"%smileySurprise",resource:"emotion_surprise@32.png",svg:"emotion_surprise@16.svg",index:13},"smiley-boring":{id:"smiley-boring",name:"%smileyBoring",resource:"emotion_boring@32.png",svg:"emotion_boring@16.svg",index:14},"smiley-embarrass":{id:"smiley-embarrass",name:"%smileyEmbarrass",resource:"emotion_embarrass@16.png",svg:"emotion_embarrass.svg",index:15}}},taskMakers:{id:"taskMakers",markersMap:{"task-start":{id:"task-start",name:"%taskStart",resource:"progress_start@32.png",svg:"progress_start@16.svg",index:16},"task-oct":{id:"task-oct",name:"%taskOct",resource:"progress_1o@32.png",svg:"progress_1o@16.svg",index:17},"task-quarter":{id:"task-quarter",name:"%taskQuarter",resource:"progress_1q@32.png",svg:"progress_1q@16.svg",index:18},"task-3oct":{id:"task-3oct",name:"%task3Oct",resource:"progress_3o@32.png",svg:"progress_3o@16.svg",index:19},"task-half":{id:"task-half",name:"%taskHalf",resource:"progress_half@32.png",svg:"progress_half@16.svg",index:20},"task-5oct":{id:"task-5oct",name:"%task5Oct",resource:"progress_5o@32.png",svg:"progress_5o@16.svg",index:21},"task-3quar":{id:"task-3quar",name:"%task3Quarters",resource:"progress_3q@32.png",svg:"progress_3q@16.svg",index:22},"task-7oct":{id:"task-7oct",name:"%task7Oct",resource:"progress_7o@32.png",svg:"progress_7o@16.svg",index:23},"task-done":{id:"task-done",name:"%taskDone",resource:"progress_done@32.png",svg:"progress_done@16.svg",index:24},"task-pause":{id:"task-pause",name:"%taskPause",resource:"progress_pause@32.png",hidden:"true",index:25}}},flagMakers:{id:"flagMakers",markersMap:{"flag-red":{id:"flag-red",name:"%colorRed",resource:"flag_red@32.png",svg:"flag_red@16.svg",index:26},"flag-orange":{id:"flag-orange",name:"%colorOrange",resource:"flag_orange@32.png",svg:"flag_orange@16.svg",index:27},"flag-yellow":{id:"flag-yellow",name:"%colorYellow",resource:"flag_yellow@32.png",svg:"flag_yellow@16.svg",hidden:"true",index:28},"flag-blue":{id:"flag-blue",name:"%colorBlue",resource:"flag_blue@32.png",svg:"flag_blue@16.svg",index:29},"flag-green":{id:"flag-green",name:"%colorGreen",resource:"flag_green@32.png",svg:"flag_green@16.svg",index:30},"flag-purple":{id:"flag-purple",name:"%colorPurple",resource:"flag_purple@32.png",svg:"flag_purple@16.svg",index:31},"flag-gray":{id:"flag-gray",name:"%colorGray",resource:"flag_gray@32.png",svg:"flag_gray@16.svg",hidden:"true",index:32},"flag-dark-green":{id:"flag-dark-green",name:"%colorDarkGreen",resource:"flag_dark_green@16.png",svg:"flag_dark_green@16.svg",index:33},"flag-dark-gray":{id:"flag-dark-gray",name:"%colorDarkGray",resource:"flag_dark_gray@16.png",svg:"flag_dark_gray@16.svg",index:34}}},starMakers:{id:"starMakers",markersMap:{"star-red":{id:"star-red",name:"%colorRed",resource:"star_red@32.png",svg:"star_red@16.svg",index:35},"star-orange":{id:"star-orange",name:"%colorOrange",resource:"star_orange@32.png",svg:"star_orange@16.svg",index:36},"star-yellow":{id:"star-yellow",name:"%colorYellow",resource:"star_yellow@32.png",svg:"star_yellow@16.svg",hidden:"true",index:37},"star-blue":{id:"star-blue",name:"%colorBlue",resource:"star_blue@32.png",svg:"star_blue@16.svg",index:38},"star-green":{id:"star-green",name:"%colorGreen",resource:"star_green@32.png",svg:"star_green@16.svg",index:39},"star-purple":{id:"star-purple",name:"%colorPurple",resource:"star_purple@32.png",svg:"star_purple@16.svg",index:40},"star-gray":{id:"star-gray",name:"%colorGray",resource:"star_gray@32.png",svg:"star_gray@16.svg",hidden:"true",index:41},"star-dark-green":{id:"star-dark-green",name:"%colorDarkGreen",resource:"star_dark_green@16.png",svg:"star_dark_green@16.svg",index:42},"star-dark-gray":{id:"star-dark-gray",name:"%colorDarkGray",resource:"star_dark_gray@16.png",svg:"star_dark_gray@16.svg",index:43}}},peopleMakers:{id:"peopleMakers",markersMap:{"people-red":{id:"people-red",name:"%colorRed",resource:"people_red@32.png",svg:"people_red@16.svg",index:44},"people-orange":{id:"people-orange",name:"%colorOrange",resource:"people_orange@32.png",svg:"people_orange@16.svg",index:45},"people-yellow":{id:"people-yellow",name:"%colorYellow",resource:"people_yellow@32.png",svg:"people_yellow@16.svg",hidden:"true",index:46},"people-blue":{id:"people-blue",name:"%colorBlue",resource:"people_blue@32.png",svg:"people_blue@16.svg",index:47},"people-green":{id:"people-green",name:"%colorGreen",resource:"people_green@32.png",svg:"people_green@16.svg",index:48},"people-purple":{id:"people-purple",name:"%colorPurple",resource:"people_purple@32.png",svg:"people_purple@16.svg",index:49},"people-gray":{id:"people-gray",name:"%colorGray",resource:"people_gray@32.png",svg:"people_gray@16.svg",hidden:"true",index:50},"people-dark-green":{id:"people-dark-green",name:"%colorDarkGreen",resource:"people_dark_green@16.png",svg:"people_dark_green@16.svg",index:51},"people-dark-gray":{id:"people-dark-gray",name:"%colorDarkGray",resource:"people_dark_gray@16.png",svg:"people_dark_gray@16.svg",index:52}}},arrowMakers:{id:"arrowMakers",markersMap:{"arrow-up":{id:"arrow-up",name:"%arrowUp",resource:"arrow_up@32.png",svg:"arrow_up@16.svg",index:53},"arrow-up-right":{id:"arrow-up-right",name:"%arrowUpRight",resource:"arrow_up_right@32.png",svg:"arrow_up_right@16.svg",index:54},"arrow-right":{id:"arrow-right",name:"%arrowRight",resource:"arrow_right@32.png",svg:"arrow_right@16.svg",index:55},"arrow-down-right":{id:"arrow-down-right",name:"%arrowDownRight",resource:"arrow_down_right@32.png",svg:"arrow_down_right@16.svg",index:56},"arrow-down":{id:"arrow-down",name:"%arrowDown",resource:"arrow_down@32.png",svg:"arrow_down@16.svg",index:57},"arrow-down-left":{id:"arrow-down-left",name:"%arrowDownLeft",resource:"arrow_down_left@32.png",svg:"arrow_down_left@16.svg",index:58},"arrow-left":{id:"arrow-left",name:"%arrowLeft",resource:"arrow_left@32.png",svg:"arrow_left@16.svg",index:59},"arrow-up-left":{id:"arrow-up-left",name:"%arrowUpLeft",resource:"arrow_up_left@32.png",svg:"arrow_up_left@16.svg",index:60},"arrow-refresh":{id:"arrow-refresh",name:"%arrowRefresh",resource:"arrow_refresh@32.png",svg:"arrow_refresh@16.svg",index:61}}},symbolMakers:{id:"symbolMakers",markersMap:{"symbol-plus":{id:"symbol-plus",name:"%symbolPlus",resource:"symbol_plus@32.png",svg:"symbol_plus@16.svg",index:62},"symbol-minus":{id:"symbol-minus",name:"%symbolMinus",resource:"symbol_minus@32.png",svg:"symbol_minus@16.svg",index:63},"symbol-question":{id:"symbol-question",name:"%symbolQuestion",resource:"symbol_question@32.png",svg:"symbol_question@16.svg",index:64},"symbol-exclam":{id:"symbol-exclam",name:"%symbolExclam",resource:"symbol_exclamation@32.png",svg:"symbol_exclamation@16.svg",hidden:"true",index:65},"symbol-info":{id:"symbol-info",name:"%symbolInfo",resource:"symbol_information@32.png",svg:"symbol_information@16.svg",index:66},"symbol-attention":{id:"symbol-attention",name:"%symbolAttention",resource:"symbol_attention.png",svg:"symbol_attention@16.svg",index:67},"symbol-wrong":{id:"symbol-wrong",name:"%symbolWrong",resource:"symbol_wrong@32.png",svg:"symbol_wrong@16.svg",index:68},"symbol-right":{id:"symbol-right",name:"%symbolRight",resource:"symbol_right@32.png",svg:"symbol_right@16.svg",index:69},"symbol-pause":{id:"symbol-pause",name:"%symbolPause",resource:"symbol_pause@32.png",svg:"symbol_pause@16.svg",index:70},"c_simbol-plus":{id:"c_simbol-plus",name:"%symbolPlus",resource:"c_simbol_plus@32.png",svg:"c_simbol_plus@16.svg",hidden:"true",index:71},"c_simbol-minus":{id:"c_simbol-minus",name:"%symbolMinus",resource:"c_simbol_minus@32.png",svg:"c_simbol_minus@16.svg",hidden:"true",index:72},"c_simbol-question":{id:"c_simbol-question",name:"%symbolQuestion",resource:"c_simbol_question@32.png",svg:"c_simbol_question@16.svg",hidden:"true",index:73},"c_simbol-exclam":{id:"c_simbol-exclam",name:"%symbolExclam",resource:"c_simbol_exclamation@32.png",svg:"c_simbol_exclamation@16.svg",hidden:"true",index:74},"c_simbol-info":{id:"c_simbol-info",name:"%symbolInfo",resource:"c_simbol_information@32.png",svg:"c_simbol_information@16.svg",hidden:"true",index:75},"c_simbol-wrong":{id:"c_simbol-wrong",name:"%symbolWrong",resource:"c_simbol_wrong@32.png",svg:"c_simbol_wrong@16.svg",hidden:"true",index:76},"c_simbol-right":{id:"c_simbol-right",name:"%symbolRight",resource:"c_simbol_right@32.png",svg:"c_simbol_right@16.svg",hidden:"true",index:77},"c_simbol-pause":{id:"c_simbol-pause",name:"%symbolPause",resource:"c_simbol_pause@32.png",svg:"c_simbol_pause@16.svg",hidden:"true",index:78},c_symbol_bar_chart:{id:"c_symbol_bar_chart",name:"%symbolBarChart",resource:"symbol_bar_chart@16.png",svg:"symbol_bar_chart.svg",index:79},c_symbol_contact:{id:"c_symbol_contact",name:"%symbolContact",resource:"symbol_contact@16.png",svg:"symbol_contact.svg",index:80},c_symbol_dislike:{id:"c_symbol_dislike",name:"%symbolDislike",resource:"symbol_dislike@16.png",svg:"symbol_dislike.svg",index:81},c_symbol_drink:{id:"c_symbol_drink",name:"%symbolDrink",resource:"symbol_drink@16.png",svg:"symbol_drink.svg",index:82},c_symbol_exercise:{id:"c_symbol_exercise",name:"%symbolExercise",resource:"symbol_exercise@16.png",svg:"symbol_exercise.svg",index:83},c_symbol_flight:{id:"c_symbol_flight",name:"%symbolFlight",resource:"symbol_flight@16.png",svg:"symbol_flight.svg",index:84},c_symbol_heart:{id:"c_symbol_heart",name:"%symbolHeart",resource:"symbol_heart@16.png",svg:"symbol_heart.svg",index:85},c_symbol_like:{id:"c_symbol_like",name:"%symbolLike",resource:"symbol_like@16.png",svg:"symbol_like.svg",index:86},c_symbol_line_graph:{id:"c_symbol_line_graph",name:"%symbolLineGraph",resource:"symbol_line_graph@16.png",svg:"symbol_line_graph.svg",index:87},c_symbol_medals:{id:"c_symbol_medals",name:"%symbolMedals",resource:"symbol_medals@16.png",svg:"symbol_medals.svg",index:88},c_symbol_money:{id:"c_symbol_money",name:"%symbolMoney",resource:"symbol_money@16.png",svg:"symbol_money.svg",index:89},c_symbol_music:{id:"c_symbol_music",name:"%symbolMusic",resource:"symbol_music@16.png",svg:"symbol_music.svg",index:90},c_symbol_pen:{id:"c_symbol_pen",name:"%symbolPen",resource:"symbol_pen@16.png",svg:"symbol_pen.svg",index:91},c_symbol_pie_chart:{id:"c_symbol_pie_chart",name:"%symbolPieChart",resource:"symbol_pie_chart@16.png",svg:"symbol_pie_chart.svg",index:92},c_symbol_shopping_cart:{id:"c_symbol_shopping_cart",name:"%symbolShoppingCart",resource:"symbol_shopping_cart@16.png",svg:"symbol_shopping_cart.svg",index:93},c_symbol_telephone:{id:"c_symbol_telephone",name:"%symbolTelephone",resource:"symbol_telephone@16.png",svg:"symbol_telephone.svg",index:94},c_symbol_thermometer:{id:"c_symbol_thermometer",name:"%symbolThermometer",resource:"symbol_thermometer@16.png",svg:"symbol_thermometer.svg",index:95},c_symbol_trophy:{id:"c_symbol_trophy",name:"%symbolTrophy",resource:"symbol_trophy@16.png",svg:"symbol_trophy.svg",index:96}}},monthMakers:{id:"monthMakers",markersMap:{"month-jan":{id:"month-jan",name:"%monthJan",resource:"month_jan@32.png",svg:"month_jan@16.svg",index:97},"month-feb":{id:"month-feb",name:"%monthFeb",resource:"month_feb@32.png",svg:"month_feb@16.svg",index:98},"month-mar":{id:"month-mar",name:"%monthMar",resource:"month_mar@32.png",svg:"month_mar@16.svg",index:99},"month-apr":{id:"month-apr",name:"%monthApr",resource:"month_apr@32.png",svg:"month_apr@16.svg",index:100},"month-may":{id:"month-may",name:"%monthMay",resource:"month_may@32.png",svg:"month_may@16.svg",index:101},"month-jun":{id:"month-jun",name:"%monthJun",resource:"month_jun@32.png",svg:"month_jun@16.svg",index:102},"month-jul":{id:"month-jul",name:"%monthJul",resource:"month_jul@32.png",svg:"month_jul@16.svg",index:103},"month-aug":{id:"month-aug",name:"%monthAug",resource:"month_aug@32.png",svg:"month_aug@16.svg",index:104},"month-sep":{id:"month-sep",name:"%monthSep",resource:"month_sep@32.png",svg:"month_sep@16.svg",index:105},"month-oct":{id:"month-oct",name:"%monthOct",resource:"month_oct@32.png",svg:"month_oct@16.svg",index:106},"month-nov":{id:"month-nov",name:"%monthNov",resource:"month_nov@32.png",svg:"month_nov@16.svg",index:107},"month-dec":{id:"month-dec",name:"%monthDec",resource:"month_dec@32.png",svg:"month_dec@16.svg",index:108}}},weekMakers:{id:"weekMakers",markersMap:{"week-sun":{id:"week-sun",name:"%weekSun",resource:"week_sun@32.png",svg:"week_sun@16.svg",index:109},"week-mon":{id:"week-mon",name:"%weekMon",resource:"week_mon@32.png",svg:"week_mon@16.svg",index:110},"week-tue":{id:"week-tue",name:"%weekTue",resource:"week_tue@32.png",svg:"week_tue@16.svg",index:111},"week-wed":{id:"week-wed",name:"%weekWed",resource:"week_wed@32.png",svg:"week_wed@16.svg",index:112},"week-thu":{id:"week-thu",name:"%weekThu",resource:"week_thu@32.png",svg:"week_thu@16.svg",index:113},"week-fri":{id:"week-fri",name:"%weekFri",resource:"week_fri@32.png",svg:"week_fri@16.svg",index:114},"week-sat":{id:"week-sat",name:"%weekSat",resource:"week_sat@32.png",svg:"week_sat@16.svg",index:115}}},halfStarMarkers:{id:"halfStarMarkers",hidden:"true",markersMap:{"half-star-green":{id:"half-star-green",name:"%colorGreen",resource:"star_green_half.png",index:116},"half-star-red":{id:"half-star-red",name:"%colorRed",resource:"star_red_half.png",index:117},"half-star-yellow":{id:"half-star-yellow",name:"%colorYellow",resource:"star_yellow_half.png",index:118},"half-star-purple":{id:"half-star-purple",name:"%colorPurple",resource:"star_purple_half.png",index:119},"half-star-blue":{id:"half-star-blue",name:"%colorBlue",resource:"star_blue_half.png",index:120},"half-star-gray":{id:"half-star-gray",name:"%colorGray",resource:"star_gray_half.png",index:121}}},otherMarkers:{id:"otherMarkers",hidden:"true",markersMap:{"other-calendar":{id:"other-calendar",name:"%otherCalendar",resource:"other_calendar.png",index:122},"other-email":{id:"other-email",name:"%otherEmail",resource:"other_email.png",index:123},"other-phone":{id:"other-phone",name:"%otherPhone",resource:"other_phone.png",index:124},"other-phone2":{id:"other-phone2",name:"%otherPhone",resource:"other_phone2.png",index:125},"other-fax":{id:"other-fax",name:"%otherFax",resource:"other_print.png",index:126},"other-people":{id:"other-people",name:"%otherPeople",resource:"people_green@32.png",index:127},"other-people2":{id:"other-people2",name:"%otherPeople",resource:"people_blue@32.png",index:128},"other-clock":{id:"other-clock",name:"%otherClock",resource:"other_clock.png",index:129},"other-coffee-cup":{id:"other-coffee-cup",name:"%otherCoffeeCup",resource:"other_coffee.png",index:130},"other-question":{id:"other-question",name:"%otherQuestion",resource:"symbol_question@32.png",svg:"symbol_question@16.svg",index:131},"other-exclam":{id:"other-exclam",name:"%otherExclam",resource:"symbol_exclamation@32.png",svg:"symbol_exclamation@16.svg",index:132},"other-lightbulb":{id:"other-lightbulb",name:"%otherLightBulb",resource:"other_buble.png",index:133},"other-businesscard":{id:"other-businesscard",name:"%otherBusinessCard",resource:"other_businesscard.png",index:134},"other-social":{id:"other-social",name:"%otherSocial",resource:"other_social.png",index:135},"other-chat":{id:"other-chat",name:"%otherChat",resource:"other_chat.png",index:136},"other-note":{id:"other-note",name:"%otherNote",resource:"other_note.png",index:137},"other-lock":{id:"other-lock",name:"%otherLock",resource:"other_lock.png",index:138},"other-unlock":{id:"other-unlock",name:"%otherUnlock",resource:"other_unlock.png",index:139},"other-yes":{id:"other-yes",name:"%otherYes",resource:"symbol_right@32.png",index:140},"other-no":{id:"other-no",name:"%otherNo",resource:"symbol_wrong@32.png",index:141},"other-bomb":{id:"other-bomb",name:"%otherBomb",resource:"other_bomb.png",index:142}}}},p={priorityMarkers:"Task Priority",priority1:"Priority 1",priority2:"Priority 2",priority3:"Priority 3",priority4:"Priority 4",priority5:"Priority 5",priority6:"Priority 6",priority7:"Priority 7",priority8:"Priority 8",priority9:"Priority 9",smileyMarkers:"Faces",smileyAngry:"Angry",smileySmile:"Smile",smileyLaugh:"Laugh",smileyCry:"Cry",smileyBoring:"Boring",smileySurprise:"Surprise",smileyEmbarrass:"Embarrass",taskMarkers:"Task Progress",taskStart:"Starting",taskOct:"1/8 Done",taskQuarter:"1/4 Done",task3Oct:"3/8 Done",taskHalf:"1/2 Done",task5Oct:"5/8 Done",task3Quarters:"3/4 Done",task7Oct:"7/8 Done",taskDone:"Task Done",taskPause:"Task Paused",flagMarkers:"Flags",starMarkers:"Stars",halfStarMarkers:"Half Stars",peopleMarkers:"People",colorRed:"Red",colorOrange:"Orange",colorYellow:"Yellow",colorBlue:"Blue",colorDarkBlue:"Dark Blue",colorGreen:"Green",colorPurple:"Purple",colorGray:"Gray",colorDarkGreen:"Dark Green",colorDarkGray:"Dark Gray",arrowMarkers:"Arrows",arrowUp:"Up",arrowUpRight:"Up Right",arrowRight:"Right",arrowDownRight:"Down Right",arrowDown:"Down",arrowDownLeft:"Down Left",arrowLeft:"Left",arrowUpLeft:"Up Left",arrowRefresh:"Refresh",symbolMarkers:"Symbols",symbolLock:"Lock",symbolHourglass:"Hourglass",symbolPlus:"Plus",symbolMinus:"Minus",symbolBrokenHeart:"Broken Heart",symbolApostrophe:"Apostrophe",symbolQuestion:"Question",symbolExclam:"Exclamation",symbolInfo:"Information",symbolAttention:"Attention",symbolWrong:"Wrong",symbolNoEntry:"No Entry",symbolRight:"Right",symbolPause:"Pause",symbolEquality:"Equality",symbolBarChart:"Bar Chart",symbolContact:"Contact",symbolDislike:"Dislike",symbolDrink:"Quote",symbolQuote:"Quote",symbolExercise:"Exercise",symbolFlight:"Flight",symbolHeart:"Heart",symbolLike:"Like",symbolLineGraph:"Line Graph",symbolMedals:"Medal",symbolMoney:"Money",symbolMusic:"Music",symbolPen:"Pen",symbolPieChart:"Pie Chart",symbolShoppingCart:"Shopping Cart",symbolTelephone:"Telephone",symbolThermometer:"Thermometer",symbolTrophy:"Trophy",simbolMarkers:"Simbols",monthMarkers:"Month",monthJan:"January",monthFeb:"February",monthMar:"March",monthApr:"April",monthMay:"May",monthJun:"June",monthJul:"July",monthAug:"August",monthSep:"September",monthOct:"October",monthNov:"November",monthDec:"December",weekMarkers:"Day of week",weekSun:"Sunday",weekMon:"Monday",weekTue:"Tuesday",weekWed:"Wednesday",weekThu:"Thursday",weekFri:"Friday",weekSat:"Saturday",otherMarkers:"Others",otherCalendar:"Calendar",otherClock:"Clock",otherCoffeeCup:"Coffee Cup",otherEmail:"Email",otherFax:"Fax",otherLightBulb:"Light Bulb",otherPhone:"Phone",otherPeople:"People",otherQuestion:"Question",otherExclam:"Exclamation Mark",otherBusinessCard:"Business Card",otherSocial:"Social",otherChat:"Chat",otherNote:"Note",otherLock:"Lock",otherUnlock:"Unlock",otherYes:"Yes",otherNo:"No",otherBomb:"Bomb"},g=function(){function t(e){(0,a.default)(this,t),this.context=e,this.map=this._isShowFashionStyle()?d:f}return t.prototype.getGroupMap=function(){return this.map},t.prototype.findGroupId=function(t){var e=this;return(0,o.default)(this.map).find(function(n){if(e.map[n].markersMap[t])return!0})||t},t.prototype.getMarkerUrl=function(t,e,n){var r=this,o=this._getMarkerSourceName(e,n);return new i.default(function(e,n){if(o)if(s.default.isXapResource(o))t(u.CONFIG.XAP_LOADER)(o).then(e);else{var i=r._isShowFashionStyle()?"fashion":"classic";e(s.default.urlNormalize(t(u.CONFIG.URL_PREFIX)+"./markers/"+i+"/"+o))}})},t.prototype.getMarkerString=function(t){var e=this.getMarkerInfo(t).name.replace(/^%/,"");return p[e]||e},t.prototype.iterate=function(t){var e=(0,o.default)(this.map),n=Array.isArray(e),i=0;for(e=n?e:(0,r.default)(e);;){var a;if(n){if(i>=e.length)break;a=e[i++]}else{if((i=e.next()).done)break;a=i.value}var s=a,u=this.map[s],c=(0,o.default)(u.markersMap),l=Array.isArray(c),h=0;for(c=l?c:(0,r.default)(c);;){var d;if(l){if(h>=c.length)break;d=c[h++]}else{if((h=c.next()).done)break;d=h.value}var f=d;if(t(u.markersMap[f],u))break}}},t.prototype.indexOf=function(t){var e=this.getMarkerInfo(t);if(e)return e.index},t.prototype.addUserMarker=function(t){var e,n,r,i,o=this;t&&(e=t.groups,n=t.markers,r=void 0,i=void 0,e&&n&&function(){var t=-1;for(var a in o.iterate(function(e){e.index>t&&(t=e.index)}),t++,e)(r={}).id=a,r.markersMap={},e[a].markers.forEach(function(e,o){n[e]&&((i=c.default.extend({},n[e])).id=e,i.index=t,t++,r.markersMap[e]=i)}),o.map[a]=r}())},t.prototype.getSysMarkerUrl=function(t,e){var n=this._getMarkerSourceName(t,e),r=this._isShowFashionStyle()?"fashion":"classic";return s.default.urlNormalize(l.default.get(u.CONFIG.URL_PREFIX)+"./markers/"+r+"/"+n)},t.prototype.getMarkerInfo=function(t,e){if(e||(e=this.findGroupId(t)),this.map[e])return this.map[e].markersMap[t]},t.prototype.getMarkerGroupInfo=function(t){return this.map[this.findGroupId(t)]},t.prototype._getMarkerSourceName=function(t,e){var n=this.getMarkerInfo(t,e);if(n)return n.svg||n.resource},t.prototype._isShowFashionStyle=function(){return this.context.isShowFashionStyle()},t}();g.identifier=u.MODULE_NAME.MARKER_MAP,e.default=g},function(t,e,n){"use strict";(function(t){e.__esModule=!0;var r=u(n(2)),i=u(n(16)),o=u(n(9)),a=u(n(4)),s=n(0);function u(t){return t&&t.__esModule?t:{default:t}}var c=t.SVG,l=function(){function t(){(0,r.default)(this,t),this.miniMapView=null}return t.prototype.initMiniMapView=function(t,e){this.miniMapView=new f(t,e)},t.prototype.setMiniMapDisplay=function(t,e,n){!this.miniMapView&&this.initMiniMapView(t,n),this.miniMapView.setDisplay(e)},t.prototype.resetMiniMapUse=function(){this.miniMapView.resetUseTarget()},t}();l.identifier=s.MODULE_NAME.MINI_MAP,e.default=l;var h={width:"336px",height:"208px",position:"absolute",bottom:"28px",right:"28px",background:"#fff",border:"solid 4px rgba(255, 255, 255, 0.5)","box-shadow":"0 3px 10px 0 rgba(43, 47, 51, 0.25)","border-radius":"6px",cursor:"pointer"},d=function(t,e,n){return{deltaX:t.deltaX*n/e,deltaY:t.deltaY*n/e}},f=i.default.View.extend({initialize:function(t,e){this.context=t,this.sheetContainer=t.getSheetView().svg,this.display=!1,this.scaleValue=1,this.mindMapScaleValue=t.getSVGView().currentScale,this.miniMapUpdateTimeClear=null,this.hasInitViewBox=!1,this._show=!1,this.initSVGStructure(e),this.initEventsListener()},initSVGStructure:function(){arguments.length>0&&void 0!==arguments[0]&&arguments[0],this.$container=(0,o.default)("<div />"),this.$container.css(h),this.$container.hide();var t=c(document.createElement("svg"));this.$container.append(t.node),this.sheetViewUse=new c.Use,this.sheetViewUse.attr({href:"#"+this.sheetContainer.id()}),this.updateSheetViewUseTransform(),t.add(this.sheetViewUse),this.viewBox=(new c.Rect).attr({fill:"none",stroke:"#fb5151","pointer-events":"visible"}).radius(4),t.add(this.viewBox),this.context.$el.parent().append(this.$container),this.updateSheetBackgroundColor()},initEventsListener:function(){var t=this;this.listenTo(this.context.getSheetModel(),s.EVENTS.AFTER_SHEET_CONTENT_CHANGE,function(){t._show&&(t.clearMiniMapUpdateTimeOut(),t.updateSheetBackgroundColor(),t.miniMapUpdateTimeClear=setTimeout(function(){t.updateSheetViewUseTransform(),t.updateViewBoxSizeAndTransform()},500))}),this.listenTo(this.context,s.EVENTS.VIEW_PORT_MOVING,function(){t._show&&setTimeout(function(){t.mindMapScaleValue=t.context.getSVGView().currentScale,t.updateViewBoxSizeAndTransform()},0)}),this.listenTo(this.context,s.EVENTS.SE_OVERRIDE_STYLE_CHANGED,function(){t._show&&t.updateSheetBackgroundColor()}),this.$container.on("click",function(e){var n=e.offsetX,r=e.offsetY,i=t.viewBox.bbox(),o=d({deltaX:n-i.cx,deltaY:r-i.cy},t.scaleValue,t.mindMapScaleValue),a=o.deltaX,u=o.deltaY;t.context.getModule(s.MODULE_NAME.MOVE_VIEW_PORT).tryToMoveViewPort(-a,-u)}),this.viewBox.on("mousedown",function(e){new p(t.context).onDragViewBox(e,t.scaleValue)}),this.listenTo(this.context,s.EVENTS.SCALE_CHANGED,function(){t._show&&t.onMindMapScaleValueChanged()})},updateSheetViewUseTransform:function(){var t=this.context.getSVGView().getCanvasControl().getScrollContainerSize(),e=t.width,n=t.height;this.scaleValue=268.8/166.4<e/n?268.8/e:166.4/n,this.checkScaledSheetViewForScaleValue(),this.sheetViewUse.translate(168,104).scale(this.scaleValue)},updateViewBoxSizeAndTransform:function(){var t=this.scaleValue/this.mindMapScaleValue,e=this.context.getSVGView().getCanvasControl().getScrollContainerSize(),n=e.width,r=e.height,i=Math.abs(t*n),o=Math.abs(t*r),a=this.context.getSVGView().getPositionTransfer().realToScrollContainer({x:0,y:0}),s=168-t*a.x,u=104-t*a.y;s<8&&(i-=8-s,s=8),s+i>328&&(s=328-(i-=s+i-328)),u<8&&(o-=8-u,u=8),u+o>200&&(u=200-(o-=u+o-200)),this.viewBox.x(s).y(u),i<0||o<0||this.viewBox.width(i).height(o)},updateSheetBackgroundColor:function(){if(this.context.getSheetView()){var t=a.default.getStyleValue(this.context.getSheetView(),s.STYLE_KEYS.FILL_COLOR);"none"===t&&(t="#ffffff"),this.$container.css("background-color",t)}},checkScaledSheetViewForScaleValue:function(){var t=this.context.getSheetView().svg.bbox(),e=Math.max(Math.abs(t.x),Math.abs(t.x2)),n=Math.max(Math.abs(t.y),Math.abs(t.y2));(e*this.scaleValue>134.4||n*this.scaleValue>83.2)&&(this.scaleValue=268.8/166.4<e/n?134.4/e:83.2/n)},hasScaledSheetViewOverflow:function(){var t=this.context.getSheetView().svg.bbox(),e=Math.max(Math.abs(t.x),Math.abs(t.x2))*this.scaleValue,n=Math.max(Math.abs(t.y),Math.abs(t.y2))*this.scaleValue;return e>134.4||n>83.2},onMindMapScaleValueChanged:function(){var t=this;this.clearMiniMapUpdateTimeOut(),this.miniMapUpdateTimeClear=setTimeout(function(){t.mindMapScaleValue=t.context.getSVGView().currentScale,t.updateViewBoxSizeAndTransform()},500)},setDisplay:function(t){t?(this._show=!0,this.$container.show(),this.updateViewBoxSizeAndTransform()):(this._show=!1,this.$container.hide())},resetUseTarget:function(){this.sheetViewUse.attr({href:""}).attr({href:"#"+this.sheetContainer.id()})},clearMiniMapUpdateTimeOut:function(){clearTimeout(this.miniMapUpdateTimeClear),this.miniMapUpdateTimeClear=null}}),p=function(){function t(e){(0,r.default)(this,t),this.context=e,this.$dragCover=this.context.callService(s.SERVICE_NAME.GET_VIEW_PORT_COVER),this.lastMousePoint=null}return t.prototype.onDragViewBox=function(t,e){var n=this;this.lastMousePoint={x:t.clientX,y:t.clientY};var r=this.context.getSVGView().currentScale,i=!1;this.$dragCover.show().addClass("draging"),this.$dragCover.on("mousemove.drag",function(t){i=!0;var o={x:t.clientX,y:t.clientY},a=o.x-n.lastMousePoint.x,u=o.y-n.lastMousePoint.y,c=d({deltaX:a,deltaY:u},e,r),l=c.deltaX,h=c.deltaY;n.context.getModule(s.MODULE_NAME.MOVE_VIEW_PORT).tryToMoveViewPort(-l,-h)&&(n.lastMousePoint=o)}),this.$dragCover.on("click",function(t){i&&t.stopPropagation(),n.$dragCover.off("click")}),this.$dragCover.on("mouseout.drag",function(){return n.cancelDragEvent()}),this.$dragCover.on("mouseup.drag",function(){return n.cancelDragEvent()})},t.prototype.cancelDragEvent=function(){this.$dragCover.off(".drag").hide().removeClass()},t}()}).call(e,n(6))},function(t,e,n){"use strict";e.__esModule=!0;var r,i=(r=n(2))&&r.__esModule?r:{default:r},o=n(0),a=function(){function t(e){(0,i.default)(this,t),this.context=e,this.baseIndex=0,this.sheetModel=this.context.getSheetModel()}return t.prototype.checkIsModified=function(){return this.sheetModel.getUndo().getIndex()!==this.baseIndex},t.prototype.updateBaseIndex=function(){this.baseIndex=this.sheetModel.getUndo().getIndex()},t}();a.identifier=o.MODULE_NAME.MODIFY_CHECK,e.default=a},function(t,e,n){"use strict";e.__esModule=!0;var r=c(n(3)),i=c(n(2)),o=n(0),a=(c(n(8)),c(n(22))),s=(c(n(1)),c(n(9)),c(n(5))),u=c(n(16));function c(t){return t&&t.__esModule?t:{default:t}}var l="mousemove.multiSelect",h="mouseup.multiSelect",d=".multiSelect",f=function t(e){return(0,i.default)(this,t),{start:function(t,n){new p(e).startProcess(t,n)}}};f.identifier=o.MODULE_NAME.MOUSE_BOX_SELECT,e.default=f;var p=function(){function t(e){(0,i.default)(this,t),this._context=e,this._svgView=e.getSVGView(),this._startPosition={x:0,y:0},this.isSegmentMultiSelect=!1,this._viewPortModule=e.getModule(o.MODULE_NAME.MOVE_VIEW_PORT),this._selectionModule=e.getModule(o.MODULE_NAME.SELECTION),this._s$multiSelectG=null,this._s$multiSelectRect=null,this._eventsCenter=(0,r.default)({},u.default.Events),this._$mask=this._context.callService(o.SERVICE_NAME.GET_VIEW_PORT_COVER),this._isFinish=!1,this._scale={scaleX:1,scaleY:1},this._initSVGStructure()}return t.prototype._initSVGStructure=function(){this._s$multiSelectG=this._svgView.getMultiSelectG(),this._s$multiSelectRect=this._s$multiSelectG.rect(),this._s$multiSelectRect.data("name","multi-select-box").style({fill:"#2ebdff","fill-opacity":"0.1",stroke:"#2ebdff","stroke-opacity":"0.5","stroke-width":"1px"}).width(0).height(0)},t.prototype.startProcess=function(t,e){this._startPosition=t,this.isSegmentMultiSelect=e,this._registerEvents()},t.prototype._registerEvents=function(){var t,e=this;this._svgView.$el.on(((t={})[l]=function(t){return e._onSVGViewMouseMove(t)},t[h]=function(t){return e._offSVGViewAllMoveEvents()},t["mouseout.multiSelect"]=function(t){return e._offSVGViewAllMoveEvents()},t))},t.prototype._onSVGViewMouseMove=function(t){var e=this;if(a.default.distance({x:t.clientX,y:t.clientY},this._startPosition)>3){this._$mask.show().css("cursor","default");var n=this._svgView.$el.offset();this._s$multiSelectG.x(this._startPosition.x-n.left),this._s$multiSelectG.y(this._startPosition.y-n.top),this._viewPortModule.setAbleAutoMove(!1),this._selectionModule.setIsSilent(!0),this._$mask.on(l,s.default.frameStabilize(function(t){e._onMaskMouseMove(t)},function(t){return t.preventDefault()})),this._$mask.on(h,function(t){return e._onMaskMouseMoveFinish()}),this._$mask.on("mouseleave.multiSelect",function(t){return e._onMaskMouseMoveFinish()}),this._eventsCenter.listenTo(this._context,o.EVENTS.VIEW_PORT_MOVING,function(t,n){var r=e._s$multiSelectRect;r.width(r.width()+Math.abs(t)).height(r.height()+Math.abs(n)),e._startPosition.x+=t,e._startPosition.y+=n,e._svgView.eventBus.trigger("selecting.mouseMultiSelect",e._s$multiSelectRect.rbox(),e.isSegmentMultiSelect)})}},t.prototype._offSVGViewAllMoveEvents=function(){this._svgView.$el.off(d)},t.prototype._onMaskMouseMove=function(t){if(!this._isFinish){var e=this._startPosition;this._scale.scaleX=t.clientX-e.x>=0?1:-1,this._scale.scaleY=t.clientY-e.y>=0?1:-1,this._s$multiSelectG.transform(this._scale),this._s$multiSelectRect.width(Math.abs(t.clientX-e.x)).height(Math.abs(t.clientY-e.y)),this._viewPortModule.showMouseInViewPort({x:t.clientX,y:t.clientY}),this._s$multiSelectRect.parent&&this._svgView.eventBus.trigger("selecting.mouseMultiSelect",this._s$multiSelectRect.rbox(),this.isSegmentMultiSelect)}},t.prototype._onMaskMouseMoveFinish=function(){this._eventsCenter.stopListening(),this._viewPortModule.stopMove(),this._isFinish=!0,this._viewPortModule.setAbleAutoMove(!0),this._selectionModule.setIsSilent(!1),this._selectionModule.notify(),this._s$multiSelectG.clear(),this._$mask.off(d),this._$mask.hide().css("cursor","")},t}()},function(t,e,n){"use strict";e.__esModule=!0;var r=o(n(2)),i=o(n(3));function o(t){return t&&t.__esModule?t:{default:t}}var a=n(9),s=(n(1),n(16)),u=n(0),c=(u.CONFIG,u.MODULE_NAME),l=u.EVENTS,h=u.SERVICE_NAME,d=u.UI_STATUS,f=n(22),p="mousemove.dragViewPort",g="mouseup.dragViewPort",v=function(){function t(e){var n=this;(0,r.default)(this,t),this.context=e,this.isBranchAbleAutoMove=!1,this.animateHandle=null,this.preMoveDirection=null,e.on(l.SHEET_CONTENT_LOADED,function(){n.svgView=e.getSVGView(),n.sheetView=e.getSheetView(),n.sheetViewElem=n.svgView.svg.children()[0],n.setAbleAutoMove(!0)}),this.isStop=!0,this._isMovingOut=!1,this._isInShowMouseProcess=!1}return t.prototype.fixDelta=function(t){return{deltaX:t.deltaX,deltaY:t.deltaY}},t.prototype.onMouseWheel=function(t){void 0===t.deltaX&&t.originalEvent&&(t=t.originalEvent),this.tryToMoveViewPort(-t.deltaX,-t.deltaY)},t.prototype.tryToMoveViewPort=function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return(0!==t||0!==e)&&(this.svgView.move(t,e,n),!0)},t.prototype.onDragViewPort=function(t,e,n){var r=this,i=a(document),o={x:t.clientX,y:t.clientY};function s(){i.off(p),i.off(g)}i.on(p,function(t){var n={x:t.clientX,y:t.clientY};f.distance(o,n)>=3&&(s(),r.startDragProcess(n,e))}),i.on(g,function(t){s(),n&&n(t)})},t.prototype.startDragProcess=function(t,e){var n=this;this.context.getModule(c.SEMAPHORE).increase(d.DRAG_VIEWPORT);var r=a(document),i=this.context.callService(h.GET_VIEW_PORT_COVER);i.show();var o=t.x,s=t.y;r.on(p,function(t){var e=t.clientX,r=t.clientY,i=e-o,a=r-s;n.svgView.move(i,a),o=e,s=r}),r.on(g,function(){r.off(".dragViewPort"),i.hide(),n.context.getModule(c.SEMAPHORE).decrease(d.DRAG_VIEWPORT)})},t.prototype.showBranchInViewPort=function(t,e){var n=this;if(e||(e=function(){}),!t.editDomain()||!this.isBranchAbleAutoMove)return e();setTimeout(function(){var r=function(t,e){var n=t.getSVGView(),r=n.getDeviceNativeScale(),o=n.getScale()/100,a=(0,i.default)({},e.topicView.bounds),s=20;t.isMobilePlatform()?(a.width*=r,a.height*=r,a.x*=r,a.y*=r):(s=20*o,a.width*=o,a.height*=o,a.x*=o,a.y*=o);var u=n.getCanvasControl().getScrollContainerSize(),c=u.width,l=u.height,h={x:0,y:0},d=n.getPositionTransfer().realToScrollContainer(e.getRealPosition());d.x+a.x<0+s?h.x=s-(d.x+a.x):d.x-a.x>c-s&&(h.x=c-s-(d.x-a.x));var f=t.getDoughnutExportInfo(),p=(f.footerHeight||0)+(f.softKeyboardHeight||0);return d.y+a.y<0+s?h.y=s-(d.y+a.y):d.y-a.y>l-p-s&&(h.y=l-p-s-(d.y-a.y)),t.isMobilePlatform()&&(h.x/=r,h.y/=r),h}(n.context,t);if(!r.x&&!r.y)return e();setTimeout(function(){n.svgView.move(r.x,r.y,{animate:!0})},0)},this.context.isDoughnutPlatform()?100:0)},t.prototype.showMouseInViewPort=function(t,e,n){var r=function(t,e){var n=t.getSVGView(),r=n.getCanvasControl().getScrollContainerSize(),i=r.width,o=r.height,a=n.getPositionTransfer().clientToScrollContainer(e),s={up:a.y<20,right:a.x>i-20,down:a.y>o-20,left:a.x<20};return new m(s)}(this.context,{x:t.x,y:t.y});e&&r.setDirectionInfo(e),r.isInMovingOutTriggerArea()?this._isInShowMouseProcess?r.hasSameDirection(this.preMoveDirection)||(this.stopMove(),this.startShowMouseInViewPortProcess(r,n)):this.startShowMouseInViewPortProcess(r,n):this.stopMove(),this.preMoveDirection=r},t.prototype.setAbleAutoMove=function(t){this.isBranchAbleAutoMove=t},t.prototype.stopMove=function(){this._isInShowMouseProcess=!1},t.prototype.startShowMouseInViewPortProcess=function(t,e){var n=this;this._isInShowMouseProcess=!0;var r=this.svgView.getDeviceNativeScale();window.requestAnimationFrame(function e(){var i=0,o=0,a=5/r;t.up?o+=a:t.down&&(o-=a),t.right?i-=a:t.left&&(i+=a),(i||o)&&(n.svgView.move(i,o),n._isInShowMouseProcess&&window.requestAnimationFrame(e))})},t}();v.identifier=c.MOVE_VIEW_PORT,e.default=v,(0,i.default)(v.prototype,s.Events);var m=function(){function t(e){(0,r.default)(this,t),this.setDirectionInfo(e)}return t.prototype.isInMovingOutTriggerArea=function(){return this.right||this.left||this.down||this.up},t.prototype.setDirectionInfo=function(t){this.right=t.right,this.left=t.left,this.down=t.down,this.up=t.up},t.prototype.hasSameDirection=function(t){return t||(t={}),this.up===t.up&&this.right===t.right&&this.down===t.down&&this.left===t.left},t}()},function(t,e,n){"use strict";e.__esModule=!0;var r,i=(r=n(2))&&r.__esModule?r:{default:r},o=n(285),a=n(0),s=function(){function t(e,n){(0,i.default)(this,t),this.id=e,this.styleDescriptor=n}return t.prototype.getStyleValue=function(t,e,n){var r=void 0,i=this.styleDescriptor[t];return i&&i.forEach(function(t){!t||t.type!==e||t.test&&!t.test(n)||(r=t.value&&"function"==typeof t.value?t.value(n):t.value)}),r},t}(),u=function(){function t(e){(0,i.default)(this,t),this.context=e,this.fixedOverridedStyle=new s("fixed",o.fixedStyleDescriptor),this._init(this.overridedStyleArray=[])}return t.prototype._init=function(t){t.push(new s("defaultSettings",o.styleDescriptorForDefaultSettings)),t.push(new s("structure",o.styleDescriptorForStructure))},t.prototype.insertOverridedStyle=function(t,e,n){var r=this,i=new s(t,e);return this.overridedStyleArray.forEach(function(t,e){n?t.id!==n||r.overridedStyleArray.splice(e,0,i):r.overridedStyleArray.push(i)}),i},t.prototype.removeOverridedStyle=function(t){this.overridedStyleArray=this.overridedStyleArray.filter(function(e){return e.id!==t})},t.prototype.getStyleValue=function(t,e,n){var r=null;if(this.fixedOverridedStyle){var i=this.fixedOverridedStyle.getStyleValue(t,e,n);if(i)return i}for(var o=this.overridedStyleArray.length-1;o>=0;o--){var a=this.overridedStyleArray[o].getStyleValue(t,e,n);if(a){r=a;break}}return r},t}();u.identifier=a.MODULE_NAME.OVERRIDE_STYLE,e.default=u},function(t,e,n){"use strict";e.__esModule=!0,e.styleDescriptorForDefaultSettings=e.styleDescriptorForStructure=e.fixedStyleDescriptor=void 0;var r,i,o=n(0),a=n(33),s=(r=n(4))&&r.__esModule?r:{default:r},u=function(){for(var t=arguments.length,e=Array(t),n=0;n<t;n++)e[n]=arguments[n];return function(t){return e.every(function(e){return e(t)})}},c=function(t){return function(e){return s.default.getClassName(e)===t}},l=function(t){return function(e){e=e.model;for(var n=void 0;!n&&e&&e.componentType===o.MODEL_TYPE.TOPIC;)n=e.getStructureClass(),e=e.parent&&e.parent();return n===t}};e.fixedStyleDescriptor={beforeUser:[{type:o.STYLE_KEYS.SHAPE_CLASS,value:o.TOPICSHAPE.MATRIXMAIN,test:function(t){return function t(e,n){return!(0,a.isUndef)(e)&&e.componentType===o.MODEL_TYPE.TOPIC&&(function(t){var e=t.getStructureClass();return e===o.STRUCTURECLASS.COLUMNSPREADSHEET||e===o.STRUCTURECLASS.SPREADSHEET}(e)?!e.isCollapse():0!==n&&e.type()!==o.TOPIC_TYPE.DETACHED&&t(e.parent(),n-1))}(t=t.model,2)}},{type:o.STYLE_KEYS.LINE_CLASS,value:o.BRANCHCONNECTION.STRAIGHT,test:function(t){if(t&&t.componentType===o.MODEL_TYPE.TOPIC){var e=t,n=e.getStructureClass();if(n===o.STRUCTURECLASS.FISHBONELEFTHEADED||n===o.STRUCTURECLASS.FISHBONERIGHTHEADED){for(var r=e.type();r!==o.TOPIC_TYPE.ROOT;){if(r!==o.TOPIC_TYPE.ATTACHED)return!1;r=(e=e.parent()).type()}return!0}}return!1}}]},e.styleDescriptorForStructure={beforeParent:[],beforeTheme:[{type:o.STYLE_KEYS.SHAPE_CLASS,value:o.TOPICSHAPE.RECT,test:u(c(o.CLASS_TYPE.CENTRAL_TOPIC),l(o.STRUCTURECLASS.ORGCHARTDOWN))},{type:o.STYLE_KEYS.LINE_CLASS,value:o.BRANCHCONNECTION.ROUNDEDELBOW,test:u(c(o.CLASS_TYPE.CENTRAL_TOPIC),l(o.STRUCTURECLASS.ORGCHARTDOWN))},{type:o.STYLE_KEYS.SHAPE_CLASS,value:o.TOPICSHAPE.RECT,test:u(c(o.CLASS_TYPE.CENTRAL_TOPIC),l(o.STRUCTURECLASS.ORGCHARTUP))},{type:o.STYLE_KEYS.LINE_CLASS,value:o.BRANCHCONNECTION.ROUNDEDELBOW,test:u(c(o.CLASS_TYPE.CENTRAL_TOPIC),l(o.STRUCTURECLASS.ORGCHARTUP))},{type:o.STYLE_KEYS.SHAPE_CLASS,value:o.TOPICSHAPE.RECT,test:u(c(o.CLASS_TYPE.CENTRAL_TOPIC),l(o.STRUCTURECLASS.TREERIGHT))},{type:o.STYLE_KEYS.LINE_CLASS,value:o.BRANCHCONNECTION.ROUNDEDELBOW,test:u(c(o.CLASS_TYPE.CENTRAL_TOPIC),l(o.STRUCTURECLASS.TREERIGHT))},{type:o.STYLE_KEYS.SHAPE_CLASS,value:o.TOPICSHAPE.RECT,test:u(c(o.CLASS_TYPE.CENTRAL_TOPIC),l(o.STRUCTURECLASS.TREELEFT))},{type:o.STYLE_KEYS.LINE_CLASS,value:o.BRANCHCONNECTION.ROUNDEDELBOW,test:u(c(o.CLASS_TYPE.CENTRAL_TOPIC),l(o.STRUCTURECLASS.TREELEFT))},{type:o.STYLE_KEYS.LINE_CLASS,value:o.BRANCHCONNECTION.ROUNDEDELBOW,test:u(c(o.CLASS_TYPE.CENTRAL_TOPIC),l(o.STRUCTURECLASS.LOGICLEFT))},{type:o.STYLE_KEYS.LINE_CLASS,value:o.BRANCHCONNECTION.ROUNDEDELBOW,test:u(c(o.CLASS_TYPE.CENTRAL_TOPIC),l(o.STRUCTURECLASS.LOGICRIGHT))},{type:o.STYLE_KEYS.LINE_CLASS,value:o.BRANCHCONNECTION.ELBOW,test:u(c(o.CLASS_TYPE.CENTRAL_TOPIC),l(o.STRUCTURECLASS.TIMELINEHORIZONTAL))},{type:o.STYLE_KEYS.LINE_CLASS,value:o.BRANCHCONNECTION.ROUNDEDELBOW,test:u(c(o.CLASS_TYPE.CENTRAL_TOPIC),l(o.STRUCTURECLASS.TIMELINEVERTICAL))}],beforeDefault:[{type:o.STYLE_KEYS.LINE_CLASS,value:o.BRANCHCONNECTION.ROUNDEDELBOW,test:u((i=c(o.CLASS_TYPE.CALLOUT_TOPIC),function(t){return!i(t)}),l(o.STRUCTURECLASS.TIMELINEVERTICAL))},{type:o.STYLE_KEYS.MARGIN_TOP,value:"2pt",test:u(c(o.CLASS_TYPE.SUB_TOPIC),function(t){return s.default.getStyleValue(t,o.STYLE_KEYS.SHAPE_CLASS)===o.TOPICSHAPE.UNDERLINE})},{type:o.STYLE_KEYS.MARGIN_BOTTOM,value:"4pt",test:u(c(o.CLASS_TYPE.SUB_TOPIC),function(t){return s.default.getStyleValue(t,o.STYLE_KEYS.SHAPE_CLASS)===o.TOPICSHAPE.UNDERLINE})}]},e.styleDescriptorForDefaultSettings={}},function(t,e,n){"use strict";e.__esModule=!0;var r,i=(r=n(2))&&r.__esModule?r:{default:r},o=n(16),a=n(9),s=n(0),u=s.MODULE_NAME,c=(s.SERVICE_NAME,s.UI_STATUS),l=function(){function t(){(0,i.default)(this,t),this.status={movingMouse:!1},this.fakeFloatingTopicView=null,this.context=null,this.ownerSvgNode=null}return t.prototype.startProcess=function(t,e){var n=this;t.getModule(u.SEMAPHORE).increase(c.ADD_FLOATINGTOPIC),this.context=t,this.fakeFloatingTopicView=new h(t,e),this.ownerSvgNode=t.getSheetView().svg.node.ownerSVGElement,this.onMouseMove=function(t){return n.fakeFloatingTopicView.onMouseMove(t)},this.onESCPress=function(t){return 27===t.keyCode&&n.reset()},this.onMouseDown=function(t){return n.finish(t)},this.initEventsListener(),this.status.movingMouse=!0},t.prototype.initEventsListener=function(){var t=a(this.ownerSvgNode);t.on("mousemove",this.onMouseMove),t.on("mousedown",this.onMouseDown),a("body").on("keydown",this.onESCPress)},t.prototype.finish=function(t){var e=this.context.getSheetModel().rootTopic(),n=e.createEmptyTopic({title:this.context.getTranslatedText("DEFAULT_FLOATING_TOPIC_TITLE")}),r=this.context.getSVGView().getPositionTransfer().clientToReal({x:t.clientX,y:t.clientY});n.set("position",r),e.addChildTopic(n,{type:"detached"}),this.reset()},t.prototype.reset=function(){this.status.movingMouse=!1,this.fakeFloatingTopicView.removeSelf(),this.fakeFloatingTopicView=null;var t=a(this.ownerSvgNode);t.off("mousemove",this.onMouseMove),t.off("mousedown",this.onMouseDown),a("body").off("keydown",this.onESCPress),this.context.getModule(u.SEMAPHORE).decrease(c.ADD_FLOATINGTOPIC)},t}();l.identifier=u.PRE_ADD_FLOATING_TOPIC,e.default=l;var h=o.View.extend({initialize:function(t,e){this.context=t,this.sheetContainer=t.getSheetView().svg,this.initSVGStructure(e)},initSVGStructure:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.container=new SVG.G,this.container.attr({cursor:"pointer"});var e=(new SVG.Rect).width(104).height(36).radius(5);e.attr({fill:"#cacaca",stroke:"none",transform:"translate(-52 -18)"});var n=(new SVG.Text).text(this.context.getTranslatedText("DEFAULT_FLOATING_TOPIC_TITLE")).y(-16);n.attr({stroke:"#fff",fill:"#fff","text-anchor":"middle"}),this.container.add(e),this.container.add(n),this.setPosition(t.position),this.sheetContainer.add(this.container)},setPosition:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{x:0,y:0};this.container.attr("transform","translate("+t.x+" "+t.y+")")},onMouseMove:function(t){var e=this.context.getSVGView().getPositionTransfer().clientToReal({x:t.clientX,y:t.clientY});this.setPosition(e)},removeSelf:function(){this.container.remove()}})},function(t,e,n){"use strict";e.__esModule=!0;var r=c(n(32)),i=c(n(2)),o=c(n(9)),a=c(n(1)),s=c(n(16)),u=n(0);function c(t){return t&&t.__esModule?t:{default:t}}var l=function t(e){(0,i.default)(this,t);var n=a.default.extend({},s.default.Events,{selectedBranches:[],hasStarted:function(){return!!this.selectBox},selectedHasChanged:function(){return(0,r.default)(this.startContains)!==(0,r.default)(this.selectBox.relationBranch)},onSelectDragStart:function(t,e,n){this.selectBox=t,this.context=e,this.direction=n,this.startContains=o.default.extend(!0,{},this.selectBox.relationBranch)},onSelectDragEnd:function(){var t,e,n,r,i,o,s,u,c;if(!this.selectedHasChanged())return this.resetManager(),!1;n=(t=this.context)[(e="boundary"===t.type?["model","boundaries"]:["summaryModel","summaries"])[0]],r=this.context.parent(),n.rangeStart,n.rangeEnd,u=(s=this.calcRangeIndex())[0],c=s[1],o=a.default.extend({},r.model[e[1]]()),this.hasSameRange(o,s)||(i="("+u+","+c+")",n.setRange(i)),this.resetManager()},calcRangeIndex:function(){var t,e,n,r,i,o=this.selectedBranches.length;for(e=n=(t=this.context.parent().getChildrenBranchesByType()).indexOf(this.selectedBranches[0]),i=1;i<o;i++)(r=t.indexOf(this.selectedBranches[i]))>e&&(e=r),r<n&&(n=r);return[n,e]},addSelectBranch:function(t){-1===this.selectedBranches.indexOf(t)&&this.selectedBranches.push(t)},removeSelectBranch:function(t){-1!==this.selectedBranches.indexOf(t)&&(this.selectedBranches=a.default.without(this.selectedBranches,t))},resetManager:function(){a.default.each(this.selectedBranches,function(t){t.onMouseout()}),this.selectedBranches=[],this.selectBox&&(this.selectBox.selectBoxOneG.move(0,0),this.selectBox.selectBoxTwoG.move(0,0),this.selectBox.render(this.direction),this.selectBox=null),this.context=null,this.direction=null},hasSameRange:function(t,e){var n=!1;return a.default.each(t,function(t){if(t.rangeStart===e[0]&&t.rangeEnd===e[1])return n=!0,!1}),n}});return n.on("start",n.onSelectDragStart),n.on("end",n.onSelectDragEnd),n.on("addSelectedBranch",n.addSelectBranch),n.on("removeSelectedBranch",n.removeSelectBranch),n};l.identifier=u.MODULE_NAME.SELECT_DRAG,e.default=l},function(t,e,n){"use strict";(function(t){e.__esModule=!0;var r=u(n(3)),i=u(n(2)),o=u(n(16)),a=u(n(5)),s=n(0);function u(t){return t&&t.__esModule?t:{default:t}}var c=function(){function e(n){var r=this;(0,i.default)(this,e),this.selections=[],this._lastSelectedBranch=null,this.context=n,this.context.onEvent("mousedown",s.VIEW_TYPE.BRANCH,function(t){return r.onClickBranch(t)}),this.context.onEvent("mousedown",s.VIEW_TYPE.BOUNDARY,function(t){return r.onMouseDown(t)}),this.context.onEvent("mousedown",s.VIEW_TYPE.RELATIONSHIP,function(t){return r.onMouseDown(t)}),this.context.onEvent("mousedown",s.VIEW_TYPE.IMAGE,function(t){return r.onMouseDown(t)}),this.context.onEvent("mousedown",s.VIEW_TYPE.AUDIO,function(t){return r.onMouseDown(t)}),this.context.onEvent("mousedown",s.VIEW_TYPE.INFOITEM,function(t){return r.onMouseDown(t)}),this.context.onEvent("mousedown",s.VIEW_TYPE.MATRIX_LABEL,function(t){return r.onMouseDown(t)}),this.context.onEvent("mousedown",s.VIEW_TYPE.MARKER,function(t){return r._onInnerElemMouseDown(t)}),this.context.onEvent("mousedown",s.VIEW_TYPE.INFORMATION_ICON,function(t){return r._onInnerElemMouseDown(t)}),this.context.onEvent("mousedown",s.VIEW_TYPE.LABELUNIT,function(t){var e=t.sbView&&t.sbView.parent()&&t.sbView.parent().parent()&&t.sbView.parent().parent().parent();e&&(t.metaKey?r.toggleSelection(e):r.selectSingle(e),t.stopPropagation())}),this.context.onGesture("tap",s.VIEW_TYPE.BRANCH,function(t){return r.onTap(t)}),this.context.onGesture("tap",s.VIEW_TYPE.BOUNDARY,function(t){return r.onTap(t)}),this.context.onGesture("tap",s.VIEW_TYPE.RELATIONSHIP,function(t){return r.onTap(t)}),this.context.onGesture("tap",s.VIEW_TYPE.IMAGE,function(t){return r.onTap(t)}),this.context.onGesture("tap",s.VIEW_TYPE.AUDIO,function(t){return r.onTap(t)}),this.context.onGesture("tap",s.VIEW_TYPE.INFOITEM,function(t){return r.onTap(t)}),this.context.onGesture("tap",s.VIEW_TYPE.MATRIX_LABEL,function(t){return r.onTap(t)}),this.context.onGesture("tap",s.VIEW_TYPE.MARKER,function(t){return r._onInnerElemTap(t)}),this.context.onGesture("tap",s.VIEW_TYPE.INFORMATION_ICON,function(t){return r._onInnerElemTap(t)}),this.context.onEvent("mousedown",s.VIEW_TYPE.SVG,function(t){if(t.target===t.sbView.svg.node&&-1===r.context.getActiveUIStatus().indexOf(s.UI_STATUS.EDIT_TITLE)){var e=!a.default.isMac&&t.ctrlKey,n=a.default.isMac&&t.metaKey,i=t.shiftKey;e||n||i||r.selectNone()}}),this.context.onGesture("tap",s.VIEW_TYPE.SVG,function(t){t.target===t.sbView.svg.node&&-1===n.getActiveUIStatus().indexOf(s.UI_STATUS.EDIT_TITLE)&&r.selectNone()}),this.context.on(s.EVENTS.SELECTION_CHANGED,function(){t._$sbSel=r.selections.slice()}),this._previousSelectedBranch=null,this._preBounchSelectInfo={start:null,selections:[]},this.isActive=!0}return e.prototype.getSelections=function(){return[].concat(this.selections)},e.prototype.getLastSelectedBranch=function(){return this._lastSelectedBranch},e.prototype.setLastSelectedBranch=function(t){t?this._lastSelectedBranch=t:this.selections.length>=1?this._lastSelectedBranch=this.selections[0]:this._lastSelectedBranch=null},e.prototype.onClickBranch=function(t){if(t.stopPropagation(),!t||"collapse-extend-hover-area"!==t.target.getAttribute("data-name")){if(3===t.which)return this.selections.includes(t.sbView)?void 0:this.selectSingle(t.sbView);a.default.isFunctionEnabled(t)?!1!==this.toggleSelection(t.sbView)&&(this._previousSelectedBranch=t.sbView):t.shiftKey&&this._previousSelectedBranch?this._addSelectionBetweenBranches(this._previousSelectedBranch,t.sbView):(this.selectSingle(t.sbView),this._previousSelectedBranch=t.sbView)}},e.prototype._addSelectionBetweenBranches=function(t,e){var n=this;if(t!==e){var r=e.parent();if(t.parent()===r){var i=r.getChildrenBranchesByType(),o=this._branchesBetween2(i,t,e);this._removePreviousBounchSelection(t),o.forEach(function(t){return n._addSel(t)}),this._preBounchSelectInfo={start:t,selections:o}}}},e.prototype._removePreviousBounchSelection=function(t){var e=this;if(this._preBounchSelectInfo.start===t){var n=this._preBounchSelectInfo.selections;Array.isArray(n)&&n.forEach(function(t){return e.removeFromSelection(t)})}},e.prototype._branchesBetween2=function(t,e,n){var r=t.indexOf(e),i=t.indexOf(n);if(i<r){var o=[i,r];r=o[0],i=o[1]}return-1===r?[]:t.slice(r,i+1)},e.prototype.onMouseDown=function(t){t.metaKey?this.toggleSelection(t.sbView):this.selectSingle(t.sbView),t.stopPropagation()},e.prototype.onTap=function(t){this.selectSingle(t.sbView),t.stopPropagation()},e.prototype._onInnerElemMouseDown=function(t){var e=t&&t.sbView&&t.sbView.getBranchView&&t.sbView.getBranchView();e&&(t.metaKey?this.toggleSelection(e):this.selectSingle(e),t.stopPropagation())},e.prototype._onInnerElemTap=function(t){var e=t&&t.sbView&&t.sbView.getBranchView&&t.sbView.getBranchView();e&&(this.selectSingle(e),t.stopPropagation())},e.prototype.isUnselectable=function(t){return t&&t.type===s.VIEW_TYPE.BRANCH&&t.shouldHide()},e.prototype.getFirstChildBranch=function(){var t;return this.selections.some(function(e,n){if(e.type===s.VIEW_TYPE.BRANCH)return t=e,!0}),t},e.prototype.selectSingle=function(t){return this.isActive?(this._previousSelectedBranch=null,t?this.selections.includes(t)&&1===this.selections.length?this:this.isUnselectable(t)?this:(this._clearSelections(),t.select&&t.select(),this.selections.push(t),this.setLastSelectedBranch(t),this.notify(),this):this):this},e.prototype.selectNone=function(){return this.isActive?(this._previousSelectedBranch=null,this.selections.length?(this._clearSelections(),this.notify(),this):this):this},e.prototype.removeFromSelection=function(t){if(!t)return this;var e=this.selections.indexOf(t);return-1===e?this:(this.selections.splice(e,1),t.deselect&&t.deselect(),this.getLastSelectedBranch()===t&&this.setLastSelectedBranch(null),this.notify(),this)},e.prototype.addSelection=function(t){this._addSel(t,!1)},e.prototype.toggleSelection=function(t){if(0===this.selections.length||t.type===this.selections[0].type)return this._addSel(t,!0)},e.prototype.setIsSilent=function(t){this._isSilent=t},e.prototype._clearSelections=function(){0!==this.selections.length&&(this.selections.forEach(function(t){t.deselect&&t.deselect()}),this.selections.length=0)},e.prototype._addSel=function(t,e){if(!this.isActive)return this;if(!t)return this;if(this.isUnselectable(t))return this;var n=this.selections.indexOf(t);return-1!==n?e?(this.removeFromSelection(t),!1):(this.selections.splice(n,1),this.selections.push(t),this):(t.select&&t.select(),this.selections.push(t),this.setLastSelectedBranch(t),this.notify(),this)},e.prototype.notify=function(){!this._isSilent&&this.context.trigger(s.EVENTS.SELECTION_CHANGED,this.selections)},e.prototype.enable=function(){this.isActive=!0},e.prototype.disable=function(){this.isActive=!1},e}();c.identifier=s.MODULE_NAME.SELECTION,e.default=c,(0,r.default)(c.prototype,o.default.Events)}).call(e,n(6))},function(t,e,n){"use strict";e.__esModule=!0;var r=u(n(32)),i=u(n(11)),o=u(n(2)),a=u(n(1)),s=n(0);function u(t){return t&&t.__esModule?t:{default:t}}var c=function(){function t(e){var n=this;(0,o.default)(this,t),this._semaphoreMap={},this._context=e,(0,i.default)(s.UI_STATUS).forEach(function(t){return n._semaphoreMap[s.UI_STATUS[t]]=0})}return t.prototype.increase=function(t){t||console.error("uiStatus");var e=this._semaphoreMap[t];this._semaphoreMap[t]=e+1,0===e&&this._context.trigger(s.EVENTS.AFTER_UI_STATUS_ACTIVATE,t)},t.prototype.decrease=function(t){t||console.error("uiStatus");var e=this._semaphoreMap[t];this._semaphoreMap[t]=e-1,e-1==0&&this._context.trigger(s.EVENTS.AFTER_UI_STATUS_DEACTIVATE,t),e-1<0&&(this._semaphoreMap[t]=0)},t.prototype.getActiveUIStatus=function(){var t=this;return(0,i.default)(this._semaphoreMap).filter(function(e){return 0!==t._semaphoreMap[e]})},t.prototype._log_semaphore=function(){return(0,r.default)(this._semaphoreMap)},t.prototype.isStatusActive=function(t){return this._semaphoreMap[t]>0},t.prototype.onceNotInStatus=function(t,e){var n=this;0===t.length||t.every(function(t){return 0===n._semaphoreMap[t]})?e():this._context.on(s.EVENTS.AFTER_UI_STATUS_DEACTIVATE,function r(i,o){0===a.default.intersection(t,n.getActiveUIStatus()).length&&(e(),n._context.off(s.EVENTS.AFTER_UI_STATUS_DEACTIVATE,r))})},t}();c.identifier=s.MODULE_NAME.SEMAPHORE,e.default=c},function(t,e,n){"use strict";(function(t){e.__esModule=!0;var r=u(n(35)),i=u(n(3)),o=u(n(2)),a=n(0),s=u(n(9));function u(t){return t&&t.__esModule?t:{default:t}}var c=n(16),l=n(5),h=t.SVG,d=function(){function t(e){(0,o.default)(this,t),this._context=e}return t.prototype.draggable=function(t,e){return new p(this._context,e,t)},t}();function f(t){return"function"==typeof t}d.identifier=a.MODULE_NAME.SVG_DRAGGABLE,e.default=d;var p=function(){function t(e,n,r){(0,o.default)(this,t),this._context=e,this._options=(0,i.default)({},t.defaultOption,n),this._s$element=r,this._$element=(0,s.default)(r.node),this._$doc=(0,s.default)(document),this._$mask=e.callService(a.SERVICE_NAME.GET_VIEW_PORT_COVER),this._moveViewPortModule=e.getModule(a.MODULE_NAME.MOVE_VIEW_PORT),this._semaphore=e.getModule(a.MODULE_NAME.SEMAPHORE),this._backboneEvents=(0,i.default)({},c.Events),this._callback={},this._constraint=this._options.constraint||{},this._isUseTouch=!1,this._currentDragMoveEvent=null,this._viewportMoveDistance={x:0,y:0},this._clearDraggableEvent(),this._initStartEventListener()}return t.prototype.beforeDrag=function(t){return f(t)&&(this._callback.beforeDrag=t),this},t.prototype.dragStart=function(t){return f(t)&&(this._callback.dragStart=t),this},t.prototype.dragMove=function(t){return f(t)&&(this._callback.dragMove=t),this},t.prototype.dragEnd=function(t){return f(t)&&(this._callback.dragEnd=t),this},t.prototype.updateConstraint=function(t){return this._constraint=t,this},t.prototype._clearDraggableEvent=function(){var t=this;"function"==typeof this._s$element.fixed&&this._s$element.fixed(),this._s$element.fixed=function(){t._$element.off("touchstart.draggable"),t._$element.off("mousedown.draggable")}},t.prototype._initStartEventListener=function(){var t,e=this;this._$element.on(((t={})["touchstart.draggable"]=function(t){return e._onDragStart(t)},t["mousedown.draggable"]=function(t){var n;if(!function(t){if("mousedown"!==t.type)return!1;var e=t.originalEvent;return!e.sourceCapabilities||!!e.sourceCapabilities.firesTouchEvents||void 0}(t)){var r=e._options.threshold;if(0===r)return e._onDragStart(t);e._$doc.on(((n={})["mousemove.threshold"]=function(n){var i=t.clientX-n.clientX,o=t.clientY-n.clientY;i*i+o*o>=r*r&&(e._$doc.off(".threshold"),e._onDragStart(t))},n["mouseup.threshold"]=function(n){var i=t.clientX-n.clientX,o=t.clientY-n.clientY;e._$doc.off(".threshold"),i*i+o*o>=r*r&&e._onDragStart(t)},n))}},t))},t.prototype._onDragStart=function(t){var e,n=this;t.preventDefault(),this._setIsDragStartByTouch(t);var r=t.originalEvent;this._callback.beforeDrag&&this._callback.beforeDrag(r),this._options.draggingMask&&this._$mask.show(),this._backboneEvents.listenTo(this._context,a.EVENTS.VIEW_PORT_MOVING,function(t,e){var r=n._context.getSVGView().getScale()/100;n._viewportMoveDistance.x+=t/r,n._viewportMoveDistance.y+=e/r,n._onDragMove(n._currentDragMoveEvent)});var i=this._s$element,o=i.bbox();i instanceof h.G?(o.x=i.x(),o.y=i.y()):i instanceof h.Nested&&(o={x:i.x(),y:i.y(),width:i.width(),height:i.height()}),i.startEvent=r;var s=this._context.getDragEventClientPosition(r);i.startPosition={x:o.x,y:o.y,width:o.width,height:o.height,zoom:function(t){for(var e=1,n=t.doc(),r=t.parent;r!==n;)e*=r.transform().scaleX,r=r.parent;return e}(i),rotation:i.transform("rotation")*Math.PI/180,pageX:s.x,pageY:s.y,clientX:s.x,clientY:s.y},this._callback.dragStart&&this._callback.dragStart({x:0,y:0,zoom:i.startPosition.zoom},r),this._semaphore.increase(a.UI_STATUS.DRAG);var u=this._isUseTouch?"touchmove.draggable":"mousemove.draggable",c=this._isUseTouch?"touchend.draggable":"mouseup.draggable";this._$doc.on(((e={})[u]=l.frameStabilize(function(t){return n._onDragMove(t)},function(t){t.preventDefault(),t.stopPropagation()}),e[c]=function(t){return n._onDragEnd(t)},e))},t.prototype._onDragMove=function(t){var e=this._s$element;if(e.startPosition){var n=t.originalEvent,i=void 0,o=void 0,a=e.startPosition.rotation,s=e.startPosition.width,u=e.startPosition.height,c=(e.startPosition.pageX,e.startPosition.pageY,e.startPosition.clientX),l=e.startPosition.clientY,h=this._context.getDragEventClientPosition(n),d=e.startPosition.zoom,f=this._context.getSVGView().getDeviceNativeScale(),p={x:(h.x-c)/f,y:(h.y-l)/f};i=e.startPosition.x-this._viewportMoveDistance.x+(p.x*Math.cos(a)+p.y*Math.sin(a))/e.startPosition.zoom,o=e.startPosition.y-this._viewportMoveDistance.y+(p.y*Math.cos(a)+p.x*Math.sin(-a))/e.startPosition.zoom;var g=this._constraint;if("function"==typeof g){var v=g(i,o);"object"===(void 0===v?"undefined":(0,r.default)(v))?(("boolean"!=typeof v.x||v.x)&&e.x("number"==typeof v.x?v.x:i),("boolean"!=typeof v.y||v.y)&&e.y("number"==typeof v.y?v.y:o)):"boolean"==typeof v&&v&&e.move(i,o)}else"object"===(void 0===g?"undefined":(0,r.default)(g))&&(null!=g.minX&&i<g.minX?i=g.minX:null!=g.maxX&&i>g.maxX-s&&(i=g.maxX-s),null!=g.minY&&o<g.minY?o=g.minY:null!=g.maxY&&o>g.maxY-u&&(o=g.maxY-u),!1===g.x?e.y(o):!1===g.y?e.x(i):e.move(i,o));this._currentDragMoveEvent=t,this._moveViewPortModule.showMouseInViewPort({x:h.x,y:h.y}),this._callback.dragMove&&(this._context.getSVGView().getDeviceNativeScale(),this._callback.dragMove({x:i,y:o,deltaX:p.x/d-this._viewportMoveDistance.x,deltaY:p.y/d-this._viewportMoveDistance.y,pageDeltaX:p.x,pageDeltaY:p.y,zoom:d},n))}},t.prototype._onDragEnd=function(t){var e=t.originalEvent,n=this._s$element;this._moveViewPortModule.stopMove(),this._options.draggingMask&&this._$mask.hide();var r=this._context.getDragEventClientPosition(e,this._isUseTouch),i=n.startPosition.rotation,o=n.startPosition.zoom,s={x:r.x-n.startPosition.pageX,y:r.y-n.startPosition.pageY,zoom:n.startPosition.zoom},u=n.startPosition.x+(s.x*Math.cos(i)+s.y*Math.sin(i))/n.startPosition.zoom,c=n.startPosition.y+(s.y*Math.cos(i)+s.x*Math.sin(-i))/n.startPosition.zoom;n.startEvent=null,n.startPosition=null,this._currentDragMoveEvent=null,this._viewportMoveDistance={x:0,y:0},this._$doc.off(".draggable"),this._backboneEvents.stopListening(),this._semaphore.decrease(a.UI_STATUS.DRAG),this._callback.dragEnd&&this._callback.dragEnd({x:u,y:c,deltaX:s.x/o,deltaY:s.y/o,pageDeltaX:s.x,pageDeltaY:s.y,zoom:o},e)},t.prototype._setIsDragStartByTouch=function(t){var e=t.type;"mousedown"===e?this._isUseTouch=!1:"touchstart"===e&&(this._isUseTouch=!0)},t}();p.defaultOption={threshold:5,startType:"touchstart",pressTime:500,draggingMask:!1}}).call(e,n(6))},function(t,e,n){"use strict";var r,i=n(64),o=n(13),a=n(8),s=n(0),u=s.BOUNDARYSHAPE,c=s.DIRECTION,l=s.TOPIC_TYPE,h=function(t,e){t.boundaryActionPath.attr({d:e}).back(),t.boundaryPath.attr({d:e}).back()},d=o.BOUNDARYGAP,f=20,p=((r={})[u.RECT]=function(t,e,n){var r=e.x,i=e.y,o=n.x,a=n.y;h(t,"M "+r+" "+i+"L "+o+" "+i+"L "+o+" "+a+"L "+r+" "+a+"z")},r[u.ROUNDEDRECT]=function(t,e,n){var r=e.x,i=e.y,o=n.x,a=n.y;h(t,"M "+(r+f)+" "+i+"L "+(o-f)+" "+i+"Q "+o+" "+i+" "+o+" "+(i+f)+"L "+o+" "+(a-f)+"Q "+o+" "+a+" "+(o-f)+" "+a+"L "+(r+f)+" "+a+"Q "+r+" "+a+" "+r+" "+(a-f)+"L "+r+" "+(i+f)+"Q "+r+" "+i+" "+(r+f)+" "+i+"z")},r[u.SCALLOPS]=function(t,e,n){var r,i=e.x,o=e.y,a=n.x,s=n.y,u=d/2,c=a-i-d,l=s-o-d,f=c/Math.max(1,parseInt(c/40,10)),p=l/Math.max(1,parseInt(l/40,10)),g=i+u,v=o+u,m=i+f+u,y=o+u,_="",E=c/f,A=l/p;for(_+="M "+g+" "+v,r=0;r<E;r++)_+="C "+(g+.25*(m-g))+" "+(y-u)+" "+(g+.75*(m-g))+" "+(y-u)+" "+m+" "+y,m=(g=m)+f;for(m=g,y+=p,r=0;r<A;r++)_+="C "+(g+u)+" "+(v+.25*(y-v))+" "+(g+u)+" "+(v+.75*(y-v))+" "+g+" "+y,y=(v=y)+p;for(y=v,m=g-f,r=0;r<E;r++)_+="C "+(g-.25*Math.abs(m-g))+" "+(y+u)+" "+(g-.75*Math.abs(m-g))+" "+(y+u)+" "+m+" "+y,m=(g=m)-f;for(m=g,y-=p,r=0;r<A;r++)_+="C "+(g-u)+" "+(v-.25*Math.abs(y-v))+" "+(g-u)+" "+(v-.75*Math.abs(y-v))+" "+g+" "+y,y=(v=y)-p;h(t,_+="Z")},r[u.WAVES]=function(t,e,n){var r,i=e.x,o=e.y,a=n.x,s=n.y,u=d/2,c=a-i-d,l=s-o-d,f=c/Math.max(1,parseInt(c/40,10)),p=l/Math.max(1,parseInt(l/40,10)),g=i+u,v=o+u,m=i+f+u,y=o+u,_="",E=c/f,A=l/p;for(_+="M "+g+" "+v,r=0;r<E;r++)_+="Q "+(g+.25*(m-g))+" "+(y-u/2)+" "+(g+.5*(m-g))+" "+y+"T "+m+" "+y,m=(g=m)+f;for(m=g,y+=p,r=0;r<A;r++)_+="Q "+(g+u/2)+" "+(v+.25*(y-v))+" "+g+" "+(v+.5*(y-v))+"T "+g+" "+y,y=(v=y)+p;for(y=v,m=g-f,r=0;r<E;r++)_+="Q "+(g-.25*Math.abs(m-g))+" "+(y+u/2)+" "+(g-.5*Math.abs(m-g))+" "+y+"T "+m+" "+y,m=(g=m)-f;for(m=g,y-=p,r=0;r<A;r++)_+="Q "+(g-u/2)+" "+(v-.25*Math.abs(y-v))+" "+g+" "+(v-.5*Math.abs(y-v))+"T "+g+" "+y,y=(v=y)-p;h(t,_+="Z")},r[u.TENSION]=function(t,e,n){var r,i=e.x,o=e.y,a=n.x,s=n.y,u=d/2,c=a-i-d,l=s-o-d,f=c/Math.max(1,parseInt(c/40,10)),p=l/Math.max(1,parseInt(l/40,10)),g=i+u,v=o+u,m=i+f+u,y=o+u,_="",E=c/f,A=l/p;for(_+="M "+g+" "+v,r=0;r<E;r++)_+="Q "+(g+.5*(m-g))+" "+(y+u)+" "+m+" "+y,m=(g=m)+f;for(m=g,y+=p,r=0;r<A;r++)_+="Q "+(g-u)+" "+(v+.5*(y-v))+" "+g+" "+y,y=(v=y)+p;for(y=v,m=g-f,r=0;r<E;r++)_+="Q "+(g-.5*Math.abs(m-g))+" "+(y-u)+" "+m+" "+y,m=(g=m)-f;for(m=g,y-=p,r=0;r<A;r++)_+="Q "+(g+u)+" "+(v-.5*Math.abs(y-v))+" "+g+" "+y,y=(v=y)-p;h(t,_+="Z")},r[u.ROUNDEDPOLYGON]=function(t,e,n){m(g(t,e,n),t)},r[u.POLYGON]=function(t,e,n){y(g(t,e,n),t)},r[u.NEWBOUNDARY1]=function(t,e,n){var r=e.x,i=e.y,o=n.x,a=n.y;h(t,"M "+(r+50)+" "+i+"L "+(o-5)+" "+i+"Q "+o+" "+i+" "+o+" "+(i+5)+"L "+o+" "+(a-50)+"Q "+o+" "+a+" "+(o-50)+" "+a+"L "+(r+5)+" "+a+"Q "+r+" "+a+" "+r+" "+(a-5)+"L "+r+" "+(i+50)+"Q "+r+" "+i+" "+(r+50)+" "+i+"z")},r[u.NEWBOUNDARY2]=function(t,e,n){m([{x:e.x+50,y:e.y},{x:n.x,y:e.y},{x:n.x-50,y:n.y},{x:e.x,y:n.y}],t)},r[u.NEWBOUNDARY3]=function(t,e,n){y([{x:e.x,y:e.y},{x:n.x,y:e.y},{x:n.x+50,y:(e.y+n.y)/2},{x:n.x,y:n.y},{x:e.x,y:n.y}],t)},r);function g(t,e,n){var r,o,s=t.parent(),u=i[s.getStructureClass()].getChildTargetOrientation(s,t.model.rangeStart),l=e.x,h=e.y,d=n.x,f=n.y,p={x:l,y:h},g={x:d,y:h},m={x:l,y:f},y={x:d,y:f};switch(u){case c.DOWN:r=p,o=g;break;case c.UP:r=m,o=y;break;case c.RIGHT:r=p,o=m;break;case c.LEFT:r=g,o=y}var _=s.getChildrenBranchesByType().filter(function(t){return!0!==t._draged}),E=[],A=s.getRealPosition();if("master"===t.model.get("range"))E=E.concat(v(A,s,u));else for(var S=t.model.rangeStart;S<=t.model.rangeEnd;S++)_[S]||console.log("empty children"),E=E.concat(v(A,_[S],u));return E.push(r),E.push(o),a.convexHull(E)}function v(t,e,n){var r,i,o=[];switch(n){case c.UP:r="topLeft",i="topRight";break;case c.DOWN:r="bottomLeft",i="bottomRight";break;case c.LEFT:r="topLeft",i="bottomLeft";break;case c.RIGHT:r="topRight",i="bottomRight"}return function t(e){if(!e.shouldHide()){var n,a,s,u,c,h,f=e.getRealPosition(),p=f.x,g=f.y,v=(n=d,{topLeft:{x:s=(a=e.topicView.bounds).x-n,y:u=a.y-n},topRight:{x:c=a.x+a.width+n,y:u},bottomLeft:{x:s,y:h=a.y+a.height+n},bottomRight:{x:c,y:h}}),m=v[r],y=v[i];if(m.x+=p,y.x+=p,m.y+=g,y.y+=g,o.push(m),o.push(y),!e.collapse&&!e._draged)e.getChildrenBranchesByType([l.ATTACHED,l.CALLOUT,l.SUMMARY]).forEach(function(e,n){t(e)})}}(e),o}function m(t,e){if(t.length>=3){var n=t.slice();n[n.length]=n[0];for(var r,i,o,s,u,c="",l=1;l<n.length;l++){if(r=n[l-1],i=n[l],(u=a.calculateDistance(r,i))>f?(o={x:f*(i.x-r.x)/u+r.x,y:f*(i.y-r.y)/u+r.y},s={x:(u-f)*(i.x-r.x)/u+r.x,y:(u-f)*(i.y-r.y)/u+r.y}):s={x:(o={x:u/2*(i.x-r.x)/u+r.x,y:u/2*(i.y-r.y)/u+r.y}).x,y:o.y},""===c){c+="M "+o.x+" "+o.y;var d=o}else c+=" Q "+r.x+" "+r.y+" "+o.x+" "+o.y;c+=" L "+s.x+" "+s.y}c+=" Q "+n[0].x+" "+n[0].y+" "+d.x+" "+d.y,h(e,c+=" Z")}}function y(t,e){if(t.length>=3){var n=t.shift(),r="M "+n.x+" "+n.y;t.forEach(function(t,e){r+=" L "+t.x+" "+t.y}),h(e,r+=" Z")}}t.exports=p},function(t,e,n){"use strict";var r,i,o=(r=n(3))&&r.__esModule?r:{default:r},a=n(0).RELATIONSHIPSHAPE,s=n(14),u=n(8),c={updatePath:function(t,e,n,r,i){!function(t,e){t.path.attr({d:e}),t.actionPath.attr({d:e}),t.s$shadowActionPath.attr({d:e})}(t,this.calcPathD(e,n,r,i))},calcPathD:function(t,e,n,r){throw new Error("must implement calcPathD function")},calcBoundingBox:function(t,e,n,r){throw new Error("must implement calcBoundingBox function")}},l=((i={})[a.CURVED]=(0,o.default)({},c,{calcPathD:function(t,e,n,r){return"M "+t.x+" "+t.y+"C "+n.x+" "+n.y+"  "+r.x+" "+r.y+"  "+e.x+" "+e.y},calcBoundingBox:function(t,e,n,r){return u.calcCubicBezierBoundingBox(t,e,n,r)}}),i[a.STRAIGHT]=(0,o.default)({},c,{calcPathD:function(t,e,n,r){return"M "+t.x+" "+t.y+"L "+e.x+" "+e.y},calcBoundingBox:function(t,e,n,r){return s.fromPoints([t,e])}}),i[a.ANGLED]=(0,o.default)({},c,{calcPathD:function(t,e,n,r){return"M "+t.x+" "+t.y+"L "+n.x+" "+n.y+"L "+r.x+" "+r.y+"L "+e.x+" "+e.y},calcBoundingBox:function(t,e,n,r){return s.fromPoints([t,e,n,r])}}),i[a.ZIGZAG]=(0,o.default)({},c,{calcPathD:function(t,e,n,r){var i={x:r.x,y:r.y},o={x:n.x,y:n.y};return Math.abs(i.x-e.x)<=Math.abs(i.y-e.y)?i.x=e.x:i.y=e.y,Math.abs(o.x-t.x)<=Math.abs(o.y-t.y)?o.x=t.x:o.y=t.y,i.x===e.x?o.x===t.x?i.y=o.y=(o.y+i.y)/2:o.y===t.y&&(i.y=o.y=t.y,o.x=e.x):i.y===e.y&&(o.y===t.y?i.x=o.x=(i.x+o.x)/2:o.x===t.x&&(i.x=o.x=t.x,o.y=e.y)),"M "+t.x+" "+t.y+"L "+o.x+" "+o.y+"L "+i.x+" "+i.y+"L "+e.x+" "+e.y},calcBoundingBox:function(t,e,n,r){var i={x:r.x,y:r.y},o={x:n.x,y:n.y};return Math.abs(i.x-e.x)<=Math.abs(i.y-e.y)?i.x=e.x:i.y=e.y,Math.abs(o.x-t.x)<=Math.abs(o.y-t.y)?o.x=t.x:o.y=t.y,i.x===e.x?o.x===t.x?i.y=o.y=(o.y+i.y)/2:o.y===t.y&&(i.y=o.y=t.y,o.x=e.x):i.y===e.y&&(o.y===t.y?i.x=o.x=(i.x+o.x)/2:o.x===t.x&&(i.x=o.x=t.x,o.y=e.y)),s.fromPoints([t,e,o,i])}}),i);t.exports=l},function(t,e,n){"use strict";var r,i,o=(i=n(4))&&i.__esModule?i:{default:i},a=n(0),s=((r={})[a.SUMMARYCONNECTION.ANGLE]=function(t,e){var n=e.startPos,r=e.middlePos,i=e.endPos,s="M "+n.x+" "+n.y+"  "+r.x+" "+r.y+"  "+i.x+" "+i.y,u=parseInt(o.default.getStyleValue(t.summaryView,a.STYLE_KEYS.LINE_WIDTH)||1),c=o.default.getStyleValue(t.summaryView,a.STYLE_KEYS.LINE_COLOR);t.connection.attr({d:s,stroke:c,"stroke-width":u,fill:"none"})},r[a.SUMMARYCONNECTION.CURLY]=function(t,e,n){var r,i=e.startPos,s=e.middlePos,u=e.endPos,c=parseInt(o.default.getStyleValue(t.summaryView,a.STYLE_KEYS.LINE_WIDTH)||1),l=o.default.getStyleValue(t.summaryView,a.STYLE_KEYS.LINE_COLOR);function h(t,e,r){var i,o=.3;if(n){var a=t.x<e.x?t.x-o:t.x+o,s=t.x<e.x?t.x+o:t.x-o,u=e.x<t.x?e.x+o:e.x-o,c=e.x<t.x?e.x-o:e.x+o,l=(E=(t.x+e.x)/2,(A=(t.y+e.y)/2)<e.y?A+r/2:A-r/2),h=A<e.y?A-r/2:A+r/2,d=e.y,f=d<t.y?d+r:d-r,p=t.y,g=p<e.y?p+r:p-r;i="M "+a+" "+t.y+"Q "+a+" "+d+", "+E+" "+l+"Q "+u+" "+g+", "+u+" "+e.y+"L "+c+" "+e.y+"Q "+c+" "+p+", "+E+" "+h+"Q "+s+" "+f+", "+s+" "+t.y+"L "+a+" "+t.y}else{var v=t.y<e.y?t.y-o:t.y+o,m=t.y<e.y?t.y+o:t.y-o,y=e.y<t.y?e.y+o:e.y-o,_=e.y<t.y?e.y-o:e.y+o,E=(t.x+e.x)/2,A=(t.y+e.y)/2,S=E<e.x?E+r/2:E-r/2,T=E<e.x?E-r/2:E+r/2,x=e.x,b=x<t.x?x+r:x-r,w=t.x,C=w<e.x?w+r:w-r;i="M "+t.x+" "+v+"Q "+x+" "+v+", "+S+" "+A+"Q "+C+" "+y+", "+e.x+" "+y+"L "+e.x+" "+_+"Q "+w+" "+_+", "+T+" "+A+"Q "+b+" "+m+", "+t.x+" "+m+"L "+t.x+" "+v}return i}r=h(s,i,c)+h(s,u,c),t.connection.attr({d:r,fill:l,stroke:l,"stroke-width":c})},r[a.SUMMARYCONNECTION.SQUARE]=function(t,e,n){var r=e.startPos,i=e.middlePos,s=e.endPos,u=t.position.x>=0?20:-20,c=parseInt(o.default.getStyleValue(t.summaryView,a.STYLE_KEYS.LINE_WIDTH)||1),l=o.default.getStyleValue(t.summaryView,a.STYLE_KEYS.LINE_COLOR),h="M "+r.x+" "+r.y+"L "+(r.x+u/2)+" "+r.y+"L "+(r.x+u/2)+" "+i.y+"L "+i.x+" "+i.y+"M "+(r.x+u/2)+" "+i.y+"L "+(s.x+u/2)+" "+s.y+"L "+s.x+" "+s.y;if(n){var d=t.position.y>=0?20:-20;h="M "+r.x+" "+r.y+"L "+r.x+" "+(r.y+d/2)+"L "+i.x+" "+(r.y+d/2)+"L "+i.x+" "+i.y+"M "+i.x+" "+(r.y+d/2)+"L "+s.x+" "+(s.y+d/2)+"L "+s.x+" "+s.y}t.connection.attr({d:h,stroke:l,"stroke-width":c,fill:"none"})},r[a.SUMMARYCONNECTION.ROUND]=function(t,e,n){var r=e.startPos,i=e.middlePos,s=e.endPos,u=t.position.x>=0?20:-20,c=t.position.x>=0?1:0,l=parseInt(o.default.getStyleValue(t.summaryView,a.STYLE_KEYS.LINE_WIDTH)||1),h=o.default.getStyleValue(t.summaryView,a.STYLE_KEYS.LINE_COLOR),d="M "+r.x+" "+r.y+"A "+u/3*2+" "+(s.y-r.y)/2+" 0 1 "+c+" "+s.x+" "+s.y+"M "+(r.x+u/3*2)+" "+i.y+"L "+i.x+" "+i.y;if(n){var f=t.position.y>=0?0:1,p=t.position.y>=0?20:-20;d="M "+r.x+" "+r.y+"A "+(s.x-r.x)/2+" "+p/3*2+"  0 1 "+f+" "+s.x+" "+s.y+"M "+i.x+" "+(r.y+p/3*2)+"L "+i.x+" "+i.y}t.connection.attr({d:d,stroke:h,"stroke-width":l,fill:"none"})},r[a.SUMMARYCONNECTION.BRACKET]=function(t,e,n){var r,i=e.startPos,s=e.middlePos,u=e.endPos,c=parseInt(o.default.getStyleValue(t.summaryView,a.STYLE_KEYS.LINE_WIDTH)||1),l=o.default.getStyleValue(t.summaryView,a.STYLE_KEYS.LINE_COLOR),h=n?function(t,e){var n=e.x>t.x?1:-1,r=e.y>t.y?1:-1,i=(t.y+e.y)/2,o=e.x-t.x,a=e.y-t.y,s=Math.min(Math.abs(o)/4,Math.abs(a)/2);return"M "+t.x+" "+t.y+"L "+t.x+" "+(i-r*s)+"Q "+t.x+" "+i+" "+(t.x+n*s)+" "+i+"L "+(e.x-n*s)+" "+i+"Q "+e.x+" "+i+" "+e.x+" "+(i+r*s)+" L "+e.x+" "+e.y}:function(t,e){var n=e.x>t.x?1:-1,r=e.y>t.y?1:-1,i=(t.x+e.x)/2,o=e.x-t.x,a=e.y-t.y,s=Math.min(Math.abs(o)/2,Math.abs(a)/4);return"M "+t.x+" "+t.y+"L "+(i-n*s)+" "+t.y+"Q "+i+" "+t.y+" "+i+" "+(t.y+r*s)+" L "+i+" "+(e.y-r*s)+"Q "+i+" "+e.y+" "+(i+n*s)+" "+e.y+"L "+e.x+" "+e.y};r=h(s,i)+h(s,u),t.connection.attr({d:r,fill:"none",stroke:l,"stroke-width":c})},r[a.SUMMARYCONNECTION.SHARP]=function(t,e,n){var r,i=e.startPos,s=e.middlePos,u=e.endPos,c=parseInt(o.default.getStyleValue(t.summaryView,a.STYLE_KEYS.LINE_WIDTH)||1),l=o.default.getStyleValue(t.summaryView,a.STYLE_KEYS.LINE_COLOR);function h(t,e,r){var i,o=.3;if(n){var a=t.x<e.x?t.x-o:t.x+o,s=t.x<e.x?t.x+o:t.x-o,u=e.x<t.x?e.x+o:e.x-o,c=e.x<t.x?e.x-o:e.x+o,l=(E=(t.x+e.x)/2,(A=(t.y+e.y)/2)<e.y?A+r/2:A-r/2),h=A<e.y?A-r/2:A+r/2,d=e.y,f=d<t.y?d+r:d-r,p=t.y,g=p<e.y?p+r:p-r;i="M "+a+" "+t.y+"Q "+a+" "+d+", "+E+" "+l+"Q "+u+" "+g+", "+u+" "+e.y+"L "+c+" "+e.y+"Q "+c+" "+p+", "+E+" "+h+"Q "+s+" "+f+", "+s+" "+t.y+"L "+a+" "+t.y}else{var v=t.y<e.y?t.y-o:t.y+o,m=t.y<e.y?t.y+o:t.y-o,y=e.y<t.y?e.y+o:e.y-o,_=e.y<t.y?e.y-o:e.y+o,E=(t.x+e.x)/2,A=(t.y+e.y)/2,S=E<e.x?E+r/2:E-r/2,T=E<e.x?E-r/2:E+r/2,x=e.x,b=x<t.x?x+r:x-r,w=t.x,C=w<e.x?w+r:w-r;i="M "+t.x+" "+v+"Q "+x+" "+v+", "+S+" "+A+"Q "+C+" "+y+", "+e.x+" "+y+"L "+e.x+" "+_+"Q "+w+" "+_+", "+T+" "+A+"Q "+b+" "+m+", "+t.x+" "+m+"L "+t.x+" "+v}return i}r=h(s,i,c)+h(s,u,c),t.connection.attr({d:r,fill:l,stroke:l,"stroke-width":c})},r[a.SUMMARYCONNECTION.FOLD]=function(t,e,n){var r,i=e.startPos,s=e.middlePos,u=e.endPos,c=parseInt(o.default.getStyleValue(t.summaryView,a.STYLE_KEYS.LINE_WIDTH)||1),l=o.default.getStyleValue(t.summaryView,a.STYLE_KEYS.LINE_COLOR),h=n?function(t,e,n){var r=e.x>t.x?1:-1,i=e.x-t.x,o=e.y-t.y,a=o/2+t.y,s=Math.min(Math.abs(i)/4,Math.abs(o)/2),u=["L "+t.x+" "+t.y,"L "+(t.x+r*s/2)+" "+a,"L "+(e.x-r*s)+" "+a,(n?"M":"L")+" "+e.x+" "+e.y];return n?u.reverse():u}:function(t,e,n){var r=e.y>t.y?1:-1,i=e.x-t.x,o=e.y-t.y,a=i/2+t.x,s=Math.min(Math.abs(i)/2,Math.abs(o)/4),u=["L "+t.x+" "+t.y,"L "+a+" "+(t.y+r*s/2),"L "+a+" "+(e.y-r*s),(n?"M":"L")+" "+e.x+" "+e.y];return n?u.reverse():u};r=h(s,i,!0).concat(h(s,u,!1)).join(""),t.connection.attr({d:r,fill:"none",stroke:l,"stroke-width":c})},r);t.exports=s},function(t,e,n){"use strict";(function(e){var r=o(n(4)),i=o(n(213));function o(t){return t&&t.__esModule?t:{default:t}}var a=n(16),s=n(9),u=n(1);n(61),(e.SVG=n(127)).defaults.attrs.stroke="none",n(218);var c=n(0),l=n(5),h=n(8),d=n(216),f=n(128),p=n(126),g=n(214),v=n(76),m=n(215);n(217).forEach(function(t){p.registerModule(t)}),s("head").append(s("<style id='snowbrush_style' type='text/css'></style>").html(m));var y={formatconverter:i.default,SheetEditor:p,WorkbookEditor:g,constant:c,Backbone:a,$:s,_:u,Model:{Workbook:d,Sheet:f},utils:{UUID:l.UUID,Mommonfuncs:l,styleManager:r.default,nextTick:h.nextTick},config:function(){for(var t=arguments.length,e=Array(t),n=0;n<t;n++)e[n]=arguments[n];if(u.isObject(e[0]))return v.merge(e[0]),e[0][c.CONFIG.URL_PREFIX],this;if(2===e.length){var r=e[0],i=e[1];v.set(r,i)}else if(1===e.length&&"string"==typeof e[0])return v.get(e[0])}};e.Snowbrush=y,t.exports=y}).call(e,n(6))},function(t,e,n){"use strict";var r=n(137),i=n(29),o=n(0),a=o.STRUCTURECLASS,s=o.DIRECTION,u=o.BRANCHCONNECTION,c=a.COLUMNSPREADSHEET,l=a.SPREADSHEETCOLUMN,h=n(1).extend({},r,{_needTranspose:!0,STRUCTURECLASS:c,isAttachedChildrenStructureImmutable:!0,getSummaryDirection:function(){return s.DOWN},getRangeGrowthDirection:function(){return s.RIGHT},getChildStructure:function(){return l},drawAttachedConnectLine:function(t,e){i[u.NONE](e)}});t.exports=h},function(t,e,n){"use strict";var r=n(19),i=n(10),o=n(13),a=n(29),s=n(20),u=n(1),c=n(0),l=c.STRUCTURECLASS,h=c.DIRECTION,d=c.BRANCHCONNECTION,f=c.TOPIC_ATTACHED,p=o.PADDING,g=o.ROTATEDCOS,v=o.ROTATEDSIN,m=i.isLineTapered,y=i.setBoundaryPadding,_=u.extend({},r,{STRUCTURECLASS:l.FISHBONELEFTHEADED,getRangeGrowthDirection:function(){return h.RIGHT},getUpSide:function(t){var e=t.getChildrenBranchesByType();if(e.length){var n=[0];e[0].changeTag("NER");var r,i=!0;for(r=1;r<e.length;r++)this.isInSameRange(t,r)?i?(n.push(r),e[r].changeTag("NER")):e[r].changeTag("SER"):i?(i=!1,e[r].changeTag("SER")):(i=!0,n.push(r),e[r].changeTag("NER"));return n}},getChildrenSize:function(t){var e=0,n=0,r=0,i=t.getChildrenBranchesByType(f),o=this.getUpSide(t);return y(t),u.each(i,function(t,i){r+=t.boundaryBounds.width+p,-1!==u.indexOf(o,i)?e=Math.max(e,t.boundaryBounds.height):n=Math.max(n,t.boundaryBounds.height)}),r>0&&(r-=p),{height:e+n+2*p,width:r,childrenHeightU:e+p,childrenHeightD:n+p,upSide:o}},calAttachedChildrenPos:function(t,e){var n=this.getChildrenSize(t),r=t.topicView.shapeBounds,i=t.getChildrenBranchesByType(f),o=e.x+e.width+p,a=e.x+e.width,s=e.x+e.width,c=o,l=o,h=(2*r.y+r.height)/2;if(i.length){var d=0,v=n.upSide,m=Math.min(e.y,-n.childrenHeightU),y=Math.max(n.childrenHeightD,e.y+e.height);e.y=m,e.width=e.width+n.width,e.height=y-e.y,u.each(i,function(t,e){var n,r=t.topicView.bounds,i=t.boundaryBounds;-1!==u.indexOf(v,e)?(n=Math.max(c,s+p),t.setPosition(n-i.x,h-p-r.y-r.height),a=n+r.height/g+p,c=n+i.width+p,d=Math.max(d,n-i.x+i.width+r.x)):(n=Math.max(l,a+p),t.setPosition(n-i.x,h-r.y+p),s=n+r.height/g+p,l=n+i.width+p,d=Math.max(d,n-i.x+i.width+r.x))},this),e.width=d-e.x+p/2}},specialDeal:function(t,e){this.renderFishTail(t,e)},renderFishTail:function(t,e){if(t.getChildrenBranchesByType().length>0){var n=t.getFishTail();n.render(h.LEFT,{x:e.x+e.width,y:0}),e.width+=n.bounds.width}else t.removeFishTail()},drawAttachedConnectLine:function(t,e,n){void 0===n&&(n=e.branchIndex());var r=s[e.topicView.topicShapeStyle].getEndAnchorLocation(this,e),i=s[t.topicView.topicShapeStyle].getStartAnchorLocation(t,e),o=v/g,c={x:r.x-Math.abs(i.y-r.y)*o,y:i.y},l={startPos:c,colPos:u.extend({},c),endPos:r};a[d.STRAIGHT](e,l,m(t),!1)},getSummaryDirection:function(t,e){var n=this.getUpSide(t);return u.indexOf(n,e)>-1?h.UP:h.DOWN},getChildStructure:function(t,e,n){var r=this.getUpSide(n);return u.indexOf(r,e)>-1?l.LEFTHEADEDNENORMAL:l.LEFTHEADEDSENORMAL},getCalloutStructure:function(){return l.LOGICRIGHT},getSourceOrientation:function(){return h.RIGHT},getPointsOfBase:function(t){var e=r.getPointsOfBase(t),n=t.topicView.bounds,i=t.bounds;return e.push({x:i.width+i.x,y:n.y}),e.push({x:i.width+i.x,y:n.x+n.height}),e},getAvailableChildStructure:function(t,e){return[]}});t.exports=_},function(t,e,n){"use strict";var r=n(19),i=n(10),o=n(13),a=n(29),s=n(20),u=n(1),c=n(0),l=c.STRUCTURECLASS,h=c.DIRECTION,d=c.BRANCHCONNECTION,f=c.TOPIC_ATTACHED,p=o.PADDING,g=o.ROTATEDCOS,v=o.ROTATEDSIN,m=i.isLineTapered,y=i.setBoundaryPadding,_=u.extend({},r,{STRUCTURECLASS:l.FISHBONERIGHTHEADED,getRangeGrowthDirection:function(){return h.LEFT},getUpSide:function(t){var e=t.getChildrenBranchesByType();if(e.length){var n=[0];e[0].changeTag("NWR");var r,i=!0;for(r=1;r<e.length;r++)this.isInSameRange(t,r)?i?(n.push(r),e[r].changeTag("NWR")):e[r].changeTag("SWR"):i?(i=!1,e[r].changeTag("SWR")):(i=!0,e[r].changeTag("NWR"),n.push(r));return n}return[]},getChildrenSize:function(t){var e=0,n=0,r=0,i=t.getChildrenBranchesByType(f),o=this.getUpSide(t);return y(t),u.each(i,function(t,i){r+=t.boundaryBounds.width+p,-1!==u.indexOf(o,i)?e=Math.max(e,t.boundaryBounds.height):n=Math.max(n,t.boundaryBounds.height)}),r>0&&(r-=p),{height:e+n,width:r,childrenHeightU:e+p,childrenHeightD:n+p,upSide:o}},calAttachedChildrenPos:function(t,e){var n=t,r=this.getChildrenSize(n),i=t.topicView.bounds,o=t.topicView.shapeBounds,a=n.getChildrenBranchesByType(f),s=e.x-p,c=e.x,l=e.x,h=s,d=s,v=(2*o.y+o.height)/2;if(a.length){var m,y,_=r.upSide,E=0,A=Math.min(e.y,-r.childrenHeightU),S=Math.max(r.childrenHeightD,i.y+i.height);e.y=A,e.height=S-e.y,u.each(a,function(t,e){o=t.topicView.bounds,m=t.bounds,-1!==u.indexOf(_,e)?(y=Math.min(h,l-p),t.setPosition(y-m.x-m.width,v-p-o.y-o.height),c=y-o.height/g-p,h=y-m.width-p):(y=Math.min(d,c-p),t.setPosition(y-m.x-m.width,v-o.y+p),l=y-o.height/g-p,d=y-m.width-p),E=Math.min(E,y-m.x-m.width-o.height)}),e.x=E-m.width+o.x+o.width+o.height-p/2,e.width=i.x+i.width+m.width+o.x-o.height+p/2-E}},drawAttachedConnectLine:function(t,e,n){void 0===n&&(n=e.branchIndex());var r=s[e.topicView.topicShapeStyle].getEndAnchorLocation(this,e),i=s[t.topicView.topicShapeStyle].getStartAnchorLocation(t,e),o=v/g,c={x:r.x+Math.abs(i.y-r.y)*o,y:i.y},l={startPos:c,colPos:u.extend({},c),endPos:r};a[d.STRAIGHT](e,l,m(t),!1)},specialDeal:function(t,e){this.renderFishTail(t,e)},renderFishTail:function(t,e){if(t.getChildrenBranchesByType().length>0){var n=t.getFishTail();n.render(h.RIGHT,{x:e.x,y:0}),e.width+=n.bounds.width,e.x-=n.bounds.width}else t.removeFishTail()},getSummaryDirection:function(t,e){var n=this.getUpSide(t);return u.indexOf(n,e)>-1?h.UP:h.DOWN},getChildTargetOrientation:function(){return h.RIGHT},getChildStructure:function(t,e,n){var r=this.getUpSide(n);return u.indexOf(r,e)>-1?l.RIGHTHEADEDNWNORMAL:l.RIGHTHEADEDSWNORMAL},getCalloutStructure:function(){return l.LOGICLEFT},getSourceOrientation:function(){return h.LEFT},getPointsOfBase:function(t){var e=r.getPointsOfBase(t),n=t.topicView.bounds,i=t.bounds;return e.push({x:i.x,y:n.y}),e.push({x:i.x,y:n.x+n.height}),e},getAvailableChildStructure:function(t,e){return[]}});t.exports=_},function(t,e,n){"use strict";var r=a(n(3)),i=a(n(17)),o=a(n(2));function a(t){return t&&t.__esModule?t:{default:t}}var s=n(1),u=n(0),c=u.TOPIC_ATTACHED,l=u.TOPIC_SUMMARY,h=u.TOPIC_CALLOUT,d=u.TOPIC_TYPE,f=u.STRUCTURECLASS,p=n(14).isIntersect,g=function(){function t(){(0,o.default)(this,t),this.OldHitDetect=v,this._currentTestBranch=null}return t.prototype.getActualArea=function(t){return this._currentTestBranch=t,this._getFitArea(this._getBranchModelArea(t))},t.prototype._getFitArea=function(t){var e=void 0,n=this._getAllTopicRealArea(),r=Array.isArray(n),o=0;for(n=r?n:(0,i.default)(n);;){var a;if(r){if(o>=n.length)break;a=n[o++]}else{if((o=n.next()).done)break;a=o.value}if(p(t,a)){e=t;break}}return e?this._getFitArea(this._getMovedTestAreaFromExistArea(t,e)):t},t.prototype._getMovedTestAreaFromExistArea=function(t,e){var n=(0,r.default)({},t);return n.y=e.y+e.height+5,n},t.prototype._getBranchModelArea=function(){var t=void 0,e=void 0,n=this._currentTestBranch.topicView.bounds;t=n.x,e=n.y;var r=this._currentTestBranch.model.getPosition();return r&&r.x&&r.y&&(t=r.x,e=r.y),{x:t,y:e,width:n.width,height:n.height}},t.prototype.getTopicRealArea=function(t){var e=t.getRealPosition(),n=t.topicView.bounds;return{x:e.x,y:e.y,width:n.width,height:n.height}},t.prototype._getAllTopicRealArea=function(){var t=this,e=this._currentTestBranch.parent(),n=e.model.getDescendantList(d.ATTACHED,d.CALLOUT,d.SUMMARY).map(function(e){return t._currentTestBranch.editDomain().model2View[e.getId()]}),r=[e].concat(n).filter(function(t){return t}).map(function(e){return t.getTopicRealArea(e)}),i=e.getChildrenBranchesByType(d.DETACHED).filter(function(e){return e!==t._currentTestBranch}).filter(function(t){return t.actualRealArea}).map(function(t){return t.actualRealArea});return[].concat(r,i)},t}();function v(t,e){this.branch=t,this.duadrant=null,e=e||{},this.space=e.space||5,this.checkCoord=e.checkCoord||null,this.rootBoundary=e.rootBoundary||!0,this.proxyHelper=new g(t,e)}v.prototype={calCoords:function(){var t=this.branch.parent().getRealPosition(),e=s.extend({x:0,y:0},this.branch.model.get("position")),n=this.branch.boundaryBounds;return{left:t.x+e.x+n.x,top:t.y+e.y+n.y,bottom:t.y+e.y+n.y+n.height,right:t.x+e.x+n.x+n.width}},getDuadrant:function(t){var e=t.getRealPosition(),n=t.topicView.bounds,r=this.calCoords(t),i={};return e.x>=0?(e.y<0?(i.y=(r.bottom-r.top)/2,i.index=1):(i.y=-(r.bottom-r.top)/2,i.index=2),i.x=-n.width/2):(i.x=n.width/2,e.y<0?(i.y=(r.bottom-r.top)/2,i.index=4):(i.y=-(r.bottom-r.top)/2,i.index=3)),this.duadrant=i,i},isInDuadrant:function(t,e,n){if(n){if(1===t.index&&e.left>t.x&&e.bottom<t.y)return!0;if(2===t.index&&e.left>t.x&&e.top>t.y)return!0;if(3===t.index&&e.right<t.x&&e.top>t.y)return!0;if(4===t.index&&e.right<t.x&&e.bottom<t.y)return!0}else{if(1===t.index&&e.right>t.x&&e.top<t.y)return!0;if(2===t.index&&e.right>t.x&&e.bottom>t.y)return!0;if(3===t.index&&e.left<t.x&&e.bottom>t.y)return!0;if(4===t.index&&e.left<t.x&&e.top<t.y)return!0}return!1},isCoordAvaliable:function(t,e){return this.checkCoord||"function"==typeof this.checkCoord?this.checkCoord(t,e):(this.duadrant||this.getDuadrant(this.branch),this.isInDuadrant(this.duadrant,t,e))},getChildPosList:function(t,e){if(t){if(!e)var n=this.branch}else t=this.branch,n=null;if(t===n)return[];var o=[c,l,h],a=t.getChildrenBranchesByType(o),s=t.getChildrenBranchesByType(),u=[],d=[],p=t.getRealPosition(),g=t.topicView.bounds,v=t.getStructureClass();if((v===f.SPREADSHEET||v===f.COLUMNSPREADSHEET)&&t.matrixView)return g=(0,r.default)({},g,t.matrixView.getSize()),[{left:p.x+g.x,top:p.y+g.y,bottom:p.y+g.y+g.height,right:p.x+g.x+g.width}];d.push({left:p.x+g.x,top:p.y+g.y,bottom:p.y+g.y+g.height,right:p.x+g.x+g.width});var m=t.boundaries,y=Array.isArray(m),_=0;for(m=y?m:(0,i.default)(m);;){var E;if(y){if(_>=m.length)break;E=m[_++]}else{if((_=m.next()).done)break;E=_.value}var A=E,S=A.bounds;if("master"===A.model.get("range")){u=[S];break}if(S.width!==S.height||0!==S.width){for(var T=A.model,x=T.rangeStart,b=T.rangeEnd,w=x;w<=b;w++)a.splice(a.indexOf(s[w]),1);u.push(S)}}if(u){var C=u,I=Array.isArray(C),L=0;for(C=I?C:(0,i.default)(C);;){var N;if(I){if(L>=C.length)break;N=C[L++]}else{if((L=C.next()).done)break;N=L.value}var O=N;d.push({left:O.x,top:O.y,bottom:O.y+O.height,right:O.x+O.width})}}if(a){var R=a,M=Array.isArray(R),D=0;for(R=M?R:(0,i.default)(R);;){var P;if(M){if(D>=R.length)break;P=R[D++]}else{if((D=R.next()).done)break;P=D.value}var k=P;d=d.concat(this.getChildPosList(k))}}return d},sortByPos:function(t,e){return(t=t.filter(function(t){if(this.isInDuadrant(e,t))return t})).sort({1:function(t,e){return t.bottom!==e.bottom?e.bottom-t.bottom:t.left-e.left},2:function(t,e){return t.bottom!==e.bottom?t.bottom-e.bottom:t.left-e.left},3:function(t,e){return t.bottom!==e.bottom?t.bottom-e.bottom:e.left-t.left},4:function(t,e){return t.bottom!==e.bottom?e.bottom-t.bottom:e.left-t.left}}[e.index])},move:function(t,e){var n,r=s.extend({},t);return e.bottom&&(n=e.bottom-t.bottom,r.top+=n),e.top&&(n=e.top-t.top,r.bottom+=n),e.left&&(n=e.left-t.left,r.right+=n),e.right&&(n=e.right-t.right,r.left+=n),s.extend(r,e)},setNewPos:function(t,e,n){n=Math.abs(parseInt(n,10)||0);var r=[],o=[this.move(t,{right:e.left-n}),this.move(t,{right:e.left-n,bottom:e.top-n}),this.move(t,{right:e.left-n,top:e.top}),this.move(t,{right:e.left-n,top:e.top+(e.bottom-e.top)/2}),this.move(t,{right:e.left-n,top:e.bottom}),this.move(t,{right:e.left-n,top:e.bottom+n}),this.move(t,{left:e.right+n}),this.move(t,{left:e.right+n,bottom:e.top-n}),this.move(t,{left:e.right+n,top:e.top}),this.move(t,{left:e.right+n,top:e.top+(e.bottom-e.top)/2}),this.move(t,{left:e.right+n,top:e.bottom}),this.move(t,{left:e.right+n,top:e.bottom+n}),this.move(t,{bottom:e.top-n}),this.move(t,{bottom:e.top-n,left:e.left-n}),this.move(t,{bottom:e.top-n,left:e.left}),this.move(t,{bottom:e.top-n,left:e.left+(e.right-e.left)/2}),this.move(t,{bottom:e.top-n,left:e.right}),this.move(t,{bottom:e.top-n,left:e.right+n}),this.move(t,{top:e.bottom+n}),this.move(t,{top:e.bottom+n,left:e.left-n}),this.move(t,{top:e.bottom+n,left:e.left}),this.move(t,{top:e.bottom+n,left:e.left+(e.right-e.left)/2}),this.move(t,{top:e.bottom+n,left:e.right}),this.move(t,{top:e.bottom+n,left:e.right+n})],a=Array.isArray(o),s=0;for(o=a?o:(0,i.default)(o);;){var u;if(a){if(s>=o.length)break;u=o[s++]}else{if((s=o.next()).done)break;u=s.value}var c=u;this.isCoordAvaliable(c,!0)&&r.push(c)}return r},sortByDis:function(t,e){var n=t.left+(t.right-t.left)/2,r=t.top+(t.bottom-t.top)/2;return e.sort(function(t,e){var i=t.left+(t.right-t.left)/2,o=t.top+(t.bottom-t.top)/2,a=e.left+(e.right-e.left)/2,s=e.top+(e.bottom-e.top)/2,u=Math.pow(n-i,2)+Math.pow(r-o,2),c=Math.pow(n-a,2)+Math.pow(r-s,2);return Math.abs(u-c)<1e-4?t.top-e.top:u-c})},isIntersect:function(t,e){var n=!(t.left>e.right||t.right<e.left),r=!(t.bottom<e.top||t.top>e.bottom);return n&&r},calPosition:function(t,e){var n,r=!1,o=[];t.left-=5,t.top-=5,t.right+=5,t.bottom+=5,n=s.extend({},t),this.isCoordAvaliable(n,!0);var a=e,u=Array.isArray(a),c=0;for(a=u?a:(0,i.default)(a);;){var l;if(u){if(c>=a.length)break;l=a[c++]}else{if((c=a.next()).done)break;l=c.value}var h=l;this.isIntersect(n,h)&&(r=!0),o=o.concat(this.setNewPos(n,h,1))}if(!r)return n;var d=o=this.sortByDis(n,o),f=Array.isArray(d),p=0;for(d=f?d:(0,i.default)(d);;){var g;if(f){if(p>=d.length)break;g=d[p++]}else{if((p=d.next()).done)break;g=p.value}var v=g;r=!1;var m=e,y=Array.isArray(m),_=0;for(m=y?m:(0,i.default)(m);;){var E;if(y){if(_>=m.length)break;E=m[_++]}else{if((_=m.next()).done)break;E=_.value}var A=E;if(this.isIntersect(v,A)){r=!0;break}}if(!r)return v}}},t.exports=new g},function(t,e,n){"use strict";var r=o(n(3)),i=o(n(4));function o(t){return t&&t.__esModule?t:{default:t}}var a=n(19),s=n(10),u=n(13),c=n(29),l=n(20),h=n(1),d=n(0),f=d.DIRECTION,p=d.BRANCHCONNECTION,g=d.STRUCTURECLASS,v=d.TOPIC_ATTACHED,m=d.CLASS_TYPE,y=n(14),_=u.COL_GAP,E=u.ROTATEDTAN,A=u.PADDING,S=s.isLineTapered,T=s.setBoundaryPadding,x=h.extend({},a,{STRUCTURECLASS:g.LEFTHEADEDNENORMAL,getRangeGrowthDirection:function(){return f.DOWN},getSourceOrientation:function(){return f.RIGHT},calAttachedChildrenPos:function(t,e){var n=_,i=t.getChildrenBranchesByType(v);if(T(t),0!==i.length){var o=t.topicView.shapeBounds,a=o.x+o.width+n,s=o.y+o.height,u=o.height;i.concat().reverse().forEach(function(t){var e=t.boundaryBounds,n=t.topicView.shapeBounds,r=e.y+e.height-(n.y+n.height),i=u+A+r;a+=i*E,s-=i,t.setPosition(a-n.x,s-n.y-n.height),u=n.y+n.height-e.y});var c=this.getChildrenSize(t);(0,r.default)(e,y.merge(e,c))}},drawAttachedConnectLine:function(t,e){var n=_,r=l[t.topicView.topicShapeStyle].getStartAnchorLocation(t,e),i={startPos:r,colPos:{x:r.x+n,y:r.y},endPos:l[e.topicView.topicShapeStyle].getEndAnchorLocation(this,e)};c[p.STRAIGHT](e,i,S(t),!1)},getSummaryDirection:function(){return f.RIGHT},getChildStructure:function(){return g.LEFTHEADEDNENORMAL},getCalloutStructure:function(){return g.LOGICRIGHT},checkCalloutPosition:function(t,e){var n=t.parent();return i.default.getClassName(n)===m.MAIN_TOPIC?s.mergeCalloutOffset(s.restrictCalloutToBottom(t,e),s.restrictCalloutToLeft(t,e)):s.restrictCalloutToLeft(t,e)},getAvailableChildStructure:function(t,e){return[]}});t.exports=x},function(t,e,n){"use strict";var r=o(n(3)),i=o(n(4));function o(t){return t&&t.__esModule?t:{default:t}}var a=n(19),s=n(10),u=n(13),c=n(29),l=n(20),h=n(1),d=n(0),f=d.DIRECTION,p=d.STRUCTURECLASS,g=d.TOPIC_ATTACHED,v=d.BRANCHCONNECTION,m=d.CLASS_TYPE,y=n(14),_=u.ROTATEDTAN,E=u.COL_GAP,A=u.PADDING,S=s.isLineTapered,T=s.setBoundaryPadding,x=h.extend({},a,{STRUCTURECLASS:p.LEFTHEADEDSENORMAL,getRangeGrowthDirection:function(){return f.DOWN},getSourceOrientation:function(){return f.RIGHT},calAttachedChildrenPos:function(t,e){var n=t.getChildrenBranchesByType(g);if(T(t),0!==n.length){var i=t.topicView.shapeBounds,o=i.x+i.width+E,a=i.y+i.height,s=0;n.forEach(function(t){var e=t.boundaryBounds,n=t.topicView.shapeBounds,r=n.height+n.y-e.y,i=s+A+r;o+=i*_,a+=i,t.setPosition(o-n.x,a-n.y-n.height),s=e.y+e.height-(n.y+n.height)});var u=this.getChildrenSize(t);(0,r.default)(e,y.merge(e,u))}},drawAttachedConnectLine:function(t,e){var n=l[t.topicView.topicShapeStyle].getStartAnchorLocation(t,e),r={startPos:n,colPos:{x:n.x+E,y:n.y},endPos:l[e.topicView.topicShapeStyle].getEndAnchorLocation(this,e)};c[v.STRAIGHT](e,r,S(t),!1)},getSummaryDirection:function(){return f.RIGHT},getChildStructure:function(){return p.LEFTHEADEDSENORMAL},getCalloutStructure:function(){return p.LOGICRIGHT},checkCalloutPosition:function(t,e){var n=t.parent();return i.default.getClassName(n)===m.MAIN_TOPIC?s.mergeCalloutOffset(s.restrictCalloutToTop(t,e),s.restrictCalloutToLeft(t,e)):s.restrictCalloutToLeft(t,e)},getAvailableChildStructure:function(t,e){return[]}});t.exports=x},function(t,e,n){"use strict";var r=n(134),i=n(10),o=n(1),a=n(0),s=a.STRUCTURECLASS,u=a.DIRECTION,c=a.LEFT_EXPOSED_STRUCTURE,l=o.extend({},r,{STRUCTURECLASS:s.LOGICLEFT,calAttachedChildrenPos:function(t,e){r.calAttachedChildrenPos.call(this,t,e,!1)},getSummaryDirection:function(){return u.LEFT},getSourceOrientation:function(){return u.LEFT},getChildTargetOrientation:function(){return u.RIGHT},checkCalloutPosition:function(t,e){return i.restrictCalloutToRight(t,e)},getAvailableChildStructure:function(t,e){return c}});t.exports=l},function(t,e,n){"use strict";var r,i=(r=n(3))&&r.__esModule?r:{default:r},o=n(134),a=n(10),s=n(0),u=s.STRUCTURECLASS,c=s.RIGHT_EXPOSED_STRUCTURE,l=(0,i.default)({},o,{STRUCTURECLASS:u.LOGICRIGHT,calAttachedChildrenPos:function(t,e){o.calAttachedChildrenPos.call(this,t,e,!0)},checkCalloutPosition:function(t,e){return a.restrictCalloutToLeft(t,e)},getAvailableChildStructure:function(t,e){return c}});t.exports=l},function(t,e,n){"use strict";var r,i=(r=n(4))&&r.__esModule?r:{default:r},o=n(0),a=n(94),s=n(1).extend({},a,{STRUCTURECLASS:o.STRUCTURECLASS.MAP,calAttachedChildrenPos:function(t,e){this.calcChildrenBoundaryBounds(t);var n,r=t.getChildrenBranchesByType(o.TOPIC_ATTACHED),a=parseInt(i.default.getStyleValue(t,o.STYLE_KEYS.SPACING_MINOR)||0),s=this.calcNumRight(t);if(r.length&&(t.isCentralBranch()||t.isDetachedBranch())){n=this.calcSpacingMajor(t);var u=r.slice(0,s),c=r.slice(s);this.calSidePos({side:"right",spacingMajor:n,spacingMinor:a,newBounds:e,children:u,isUpToDown:!0}),this.calSidePos({side:"left",spacingMajor:n,spacingMinor:a,newBounds:e,children:c,isUpToDown:!0}),this.calBounds(t,e)}},getRangeGrowthDirection:function(){return o.DIRECTION.DOWN},getSummaryDirection:function(t,e){return this.getChildTargetOrientation(t,e)===o.DIRECTION.LEFT?o.DIRECTION.RIGHT:o.DIRECTION.LEFT},getSourceOrientation:function(){return o.DIRECTION.NONE},getChildTargetOrientation:function(t,e){return e<this.calcNumRight(t)?o.DIRECTION.LEFT:o.DIRECTION.RIGHT},getChildStructure:function(t,e,n){return e<this.calcNumRight(n)?o.STRUCTURECLASS.LOGICRIGHT:o.STRUCTURECLASS.LOGICLEFT}});t.exports=s},function(t,e,n){"use strict";var r,i=(r=n(4))&&r.__esModule?r:{default:r},o=n(0),a=n(94),s=n(1).extend({},a,{STRUCTURECLASS:o.STRUCTURECLASS.MAPANTICLOCKWISE,calAttachedChildrenPos:function(t,e){this.calcChildrenBoundaryBounds(t);var n=this.calcSpacingMajor(t),r=parseInt(i.default.getStyleValue(t,o.STYLE_KEYS.SPACING_MINOR)||0),a=t.getChildrenBranchesByType(o.TOPIC_ATTACHED),s=this.calcNumRight(t);if(a.length&&(t.isCentralBranch()||t.isDetachedBranch())){var u=a.slice(s).reverse(),c=a.slice(0,s);this.calSidePos({side:"right",spacingMajor:n,spacingMinor:r,newBounds:e,children:u,isUpToDown:!1}),this.calSidePos({side:"left",spacingMajor:n,spacingMinor:r,newBounds:e,children:c,isUpToDown:!0}),this.calBounds(t,e)}},getRangeGrowthDirection:function(t,e){return e<this.calcNumRight(t)?o.DIRECTION.DOWN:o.DIRECTION.UP},getSummaryDirection:function(t,e){return this.getChildTargetOrientation(t,e)===o.DIRECTION.LEFT?o.DIRECTION.RIGHT:o.DIRECTION.LEFT},getSourceOrientation:function(){return o.DIRECTION.NONE},getChildTargetOrientation:function(t,e){return e<this.calcNumRight(t)?o.DIRECTION.RIGHT:o.DIRECTION.LEFT},getChildStructure:function(t,e,n){return e<this.calcNumRight(n)?o.STRUCTURECLASS.LOGICLEFT:o.STRUCTURECLASS.LOGICRIGHT},_isRight:function(t,e){return t>=this.calcNumRight(e)}});t.exports=s},function(t,e,n){"use strict";var r=n(135),i=n(1),o=n(0).STRUCTURECLASS,a=r,s=i.extend({},a,{STRUCTURECLASS:o.MAPUNBALANCED,calcNumRight:function(t){var e=t.model.unBalancedInfo(),n=-1;return e&&"right-number"===e.name&&(n=parseInt(e.content)),n<0&&(n=a.calcNumRight.apply(this,arguments),t.model.addMapUnbalanced({content:[{content:n+"",name:"right-number"}],provider:"org.xmind.ui.map.unbalanced"})),n}});t.exports=s},function(t,e,n){"use strict";var r=n(136),i=n(1),o=n(0),a=o.STRUCTURECLASS,s=o.DIRECTION,u=o.ATTACHED_EXPOSED_STRUCTURE,c=i.extend({},r,{STRUCTURECLASS:a.ORGCHARTDOWN,calAttachedChildrenPos:function(t,e){r.calAttachedChildrenPos.call(this,t,e,!0)},getRangeGrowthDirection:function(){return s.RIGHT},getSummaryDirection:function(){return s.DOWN},getSourceOrientation:function(){return s.DOWN},getChildTargetOrientation:function(){return s.UP},getAvailableChildStructure:function(t,e){return u.filter(function(t){return!(0===t.indexOf("org.xmind.ui.org-chart.up"))})}});t.exports=c},function(t,e,n){"use strict";var r=n(136),i=n(1),o=n(0),a=o.STRUCTURECLASS,s=o.DIRECTION,u=o.ATTACHED_EXPOSED_STRUCTURE,c=i.extend({},r,{STRUCTURECLASS:a.ORGCHARTUP,calAttachedChildrenPos:function(t,e){r.calAttachedChildrenPos.call(this,t,e,!1)},getRangeGrowthDirection:function(){return s.RIGHT},getSummaryDirection:function(){return s.UP},getSourceOrientation:function(){return s.UP},getChildTargetOrientation:function(){return s.DOWN},getAvailableChildStructure:function(t,e){return u.filter(function(t){return!(0===t.indexOf("org.xmind.ui.org-chart.down"))})}});t.exports=c},function(t,e,n){"use strict";var r=o(n(3)),i=o(n(4));function o(t){return t&&t.__esModule?t:{default:t}}var a=n(19),s=n(10),u=n(13),c=n(29),l=n(20),h=n(1),d=n(14),f=n(0),p=f.DIRECTION,g=f.STRUCTURECLASS,v=f.BRANCHCONNECTION,m=f.TOPIC_ATTACHED,y=f.CLASS_TYPE,_=u.PADDING,E=u.COL_GAP,A=u.ROTATEDTAN,S=s.isLineTapered,T=s.setBoundaryPadding,x=h.extend({},a,{STRUCTURECLASS:g.RIGHTHEADEDNWNORMAL,getRangeGrowthDirection:function(){return p.DOWN},calAttachedChildrenPos:function(t,e){var n=t.getChildrenBranchesByType(m);if(T(t),0!==n.length){var i=t.topicView.shapeBounds,o=i.x-E,a=i.y+i.height,s=i.height;n.concat().reverse().forEach(function(t){var e=t.boundaryBounds,n=t.topicView.shapeBounds,r=e.y+e.height-(n.y+n.height),i=s+_+r;o-=i*A,a-=i,t.setPosition(o-n.x-n.width,a-n.y-n.height),s=n.y+n.height-e.y});var u=this.getChildrenSize(t);(0,r.default)(e,d.merge(e,u))}},drawAttachedConnectLine:function(t,e){var n=l[t.topicView.topicShapeStyle].getStartAnchorLocation(t,e),r={startPos:n,colPos:{x:n.x-E,y:n.y},endPos:l[e.topicView.topicShapeStyle].getEndAnchorLocation(this,e)};c[v.STRAIGHT](e,r,S(t),!1)},getSourceOrientation:function(){return p.LEFT},getSummaryDirection:function(){return p.LEFT},getChildTargetOrientation:function(){return p.RIGHT},getChildStructure:function(){return g.RIGHTHEADEDNWNORMAL},getCalloutStructure:function(){return g.LOGICLEFT},checkCalloutPosition:function(t,e){var n=t.parent();return i.default.getClassName(n)===y.MAIN_TOPIC?s.mergeCalloutOffset(s.restrictCalloutToBottom(t,e),s.restrictCalloutToRight(t,e)):s.restrictCalloutToRight(t,e)},getAvailableChildStructure:function(t,e){return[]}});t.exports=x},function(t,e,n){"use strict";var r=o(n(3)),i=o(n(4));function o(t){return t&&t.__esModule?t:{default:t}}var a=n(19),s=n(10),u=n(13),c=n(29),l=n(20),h=n(1),d=n(0),f=d.DIRECTION,p=d.STRUCTURECLASS,g=d.BRANCHCONNECTION,v=d.TOPIC_ATTACHED,m=d.CLASS_TYPE,y=n(14),_=u.ROTATEDTAN,E=u.COL_GAP,A=u.PADDING,S=s.isLineTapered,T=s.setBoundaryPadding,x=h.extend({},a,{STRUCTURECLASS:p.RIGHTHEADEDSWNORMAL,getRangeGrowthDirection:function(){return f.DOWN},calAttachedChildrenPos:function(t,e){var n=t.getChildrenBranchesByType(v);if(T(t),0!==n.length){var i=t.topicView.shapeBounds,o=i.x-E,a=i.y+i.height,s=0;n.forEach(function(t){var e=t.boundaryBounds,n=t.topicView.shapeBounds,r=n.height+n.y-e.y,i=s+A+r;o-=i*_,a+=i,t.setPosition(o-n.x-n.width,a-n.y-n.height),s=e.y+e.height-(n.y+n.height)});var u=this.getChildrenSize(t);(0,r.default)(e,y.merge(e,u))}},drawAttachedConnectLine:function(t,e){var n=l[t.topicView.topicShapeStyle].getStartAnchorLocation(t,e),r={startPos:n,colPos:{x:n.x-E,y:n.y},endPos:l[e.topicView.topicShapeStyle].getEndAnchorLocation(this,e)};c[g.STRAIGHT](e,r,S(t),!1)},getSourceOrientation:function(){return f.LEFT},getSummaryDirection:function(){return f.LEFT},getChildTargetOrientation:function(){return f.RIGHT},getChildStructure:function(){return p.RIGHTHEADEDSWNORMAL},getCalloutStructure:function(){return p.LOGICLEFT},checkCalloutPosition:function(t,e){var n=t.parent();return i.default.getClassName(n)===m.MAIN_TOPIC?s.mergeCalloutOffset(s.restrictCalloutToTop(t,e),s.restrictCalloutToRight(t,e)):s.restrictCalloutToRight(t,e)},getAvailableChildStructure:function(t,e){return[]}});t.exports=x},function(t,e,n){"use strict";var r=n(138),i=n(29),o=n(0),a=o.STRUCTURECLASS,s=o.DIRECTION,u=o.BRANCHCONNECTION,c=a.LOGICRIGHT,l=n(1).extend({},r,{STRUCTURECLASS:a.SPREADSHEETCOLUMN,getSummaryDirection:function(){return s.RIGHT},getChildStructure:function(){return c},drawAttachedConnectLine:function(t,e){i[u.NONE](e)}});t.exports=l},function(t,e,n){"use strict";var r,i=(r=n(3))&&r.__esModule?r:{default:r},o=n(19),a=n(10),s=n(13),u=n(20),c=n(29),l=n(1),h=n(14),d=n(0),f=d.STRUCTURECLASS,p=d.TOPIC_ATTACHED,g=d.DIRECTION,v=d.BRANCHCONNECTION,m=d.TOPICSHAPE,y=s.PADDING,_=a.setBoundaryPadding,E=l.extend({},o,{STRUCTURECLASS:f.TIMELINEHORIZONTAL,isAttachedChildrenStructureImmutable:!0,getUpSide:function(t){var e=t.getChildrenBranchesByType();if(e.length){var n=[0];e[0].tag="up";var r,i=!0;for(r=1;r<e.length;r++)this.isInSameRange(t,r)?i?(e[r].tag="up",n.push(r)):e[r].tag="down":i?(i=!1,e[r].tag="down"):(i=!0,e[r].tag="up",n.push(r));return n}},calAttachedChildrenPos:function(t,e){this.getUpSide(t),_(t);var n=t.getChildrenBranchesByType(p),r=e.x+e.width,o=e.x+e.width,a=e.x+e.width+y,s=e.x+e.width+y,c=u[t.topicView.topicShapeStyle].getStartAnchorLocation(t).y-t.linePosition.y;if(n.length){var d,f;l.each(n,function(e,n){d=e.topicView.bounds,"up"===e.tag?(r=(f=a>o+y?a:o+y)+(this.isInBounds(t,n)?e.boundaryBounds.width:d.width)+y,a=f+e.boundaryBounds.width+y):"down"===e.tag&&(o=(f=s>r+y?s:r+y)+(this.isInBounds(t,n)?e.boundaryBounds.width:d.width)+y,s=f+e.boundaryBounds.width+y);var i=u[e.topicView.topicShapeStyle].getEndAnchorLocation(this,e);e.setPosition(f-e.boundaryBounds.x,c-(i.y-e.linePosition.y))},this);var g=this.getChildrenSize(t);(0,i.default)(e,h.merge(e,g))}},drawAttachedConnectLine:function(t,e,n){var r=u[t.topicView.topicShapeStyle].getStartAnchorLocation(t,e);if(void 0===n&&(n=t.getChildrenBranchesByType()[e.branchIndex()-1]),n){var i=n.topicView.topicShapeStyle,o=u[i].getEndAnchorLocation(this,n),a=n.topicView.bounds,s=a.width,l=a.height,h=s;i===m.PARALLELOGRAM&&(h-=l/2),r.x=o.x+h}var d={startPos:r,endPos:u[e.topicView.topicShapeStyle].getEndAnchorLocation(this,e)};c[v.HORIZONTAL](e,d,!1)},getRangeGrowthDirection:function(){return g.RIGHT},getSummaryDirection:function(t,e){var n=this.getUpSide(t);return l.indexOf(n,e)>-1?g.UP:g.DOWN},getChildStructure:function(t,e,n){var r=this.getUpSide(n);return l.indexOf(r,e)>-1?f.TIMELINEHORIZONTALUP:f.TIMELINEHORIZONTALDOWN},getCalloutStructure:function(){return this.STRUCTURECLASS},checkCalloutPosition:function(t,e){return a.restrictCalloutToLeft(t,e)},getAvailableChildStructure:function(t,e){return[]}});t.exports=E},function(t,e,n){"use strict";var r=n(0),i=n(19),o=n(10),a=n(13),s=n(1),u=a.PADDING,c=o.setBoundaryPadding,l=s.extend({},i,{STRUCTURECLASS:r.STRUCTURECLASS.TIMELINEHORIZONTALDOWN,getChildrenSize:function(t){var e=0,n=0,i=t.getChildrenBranchesByType(r.TOPIC_ATTACHED);return c(t),s.each(i,function(t,r){e+=t.boundaryBounds.height+u,n=Math.max(n,t.boundaryBounds.width)}),e>0&&(e-=u),{height:e,width:n}},calAttachedChildrenPos:function(t,e){var n=t,i=this.getChildrenSize(n),o=n.getChildrenBranchesByType(r.TOPIC_ATTACHED),a=0;if(o.length){t.topicLineStyle===r.BRANCHCONNECTION.ARROWEDCURVE&&(a=30);var c=e.x+e.width+e.x+u+a,l=e.y+e.height+2*u,h=Math.max(e.y+e.height,l+i.height);e.y=Math.min(e.y,l),e.height=h-e.y,e.width=e.width+e.x+u+i.width+a,s.each(o,function(t,e){t.setPosition(c-t.boundaryBounds.x,l-t.boundaryBounds.y),l+=t.boundaryBounds.height+u})}},getSummaryDirection:function(){return r.DIRECTION.RIGHT},getSourceOrientation:function(){return r.DIRECTION.DOWN},getChildStructure:function(){return r.STRUCTURECLASS.LOGICRIGHT},checkCalloutPosition:function(t,e){var n=o.restrictCalloutToLeft(t,e),r=o.restrictCalloutToTop(t,e);return o.mergeCalloutOffset(n,r)},getAvailableChildStructure:function(t,e){return[]}});t.exports=l},function(t,e,n){"use strict";var r,i=(r=n(4))&&r.__esModule?r:{default:r},o=n(0),a=n(19),s=n(10),u=n(13),c=n(1),l=u.PADDING,h=u.LINECOLPOS,d=s.setBoundaryPadding,f=s.sortBoundaries,p=c.extend({},a,{STRUCTURECLASS:o.STRUCTURECLASS.TIMELINEHORIZONTALUP,getChildrenSize:function(t){var e=0,n=0,r=t.getChildrenBranchesByType(o.TOPIC_ATTACHED);return d(t),c.each(r,function(t,r){e+=t.boundaryBounds.height+l,n=Math.max(n,t.boundaryBounds.width)}),e>0&&(e-=l),{height:e,width:n}},calAttachedChildrenPos:function(t,e){var n=t,r=this.getChildrenSize(n),a=parseInt(i.default.getStyleValue(t,o.STYLE_KEYS.LINE_CORNER)||0),s=n.getChildrenBranchesByType(o.TOPIC_ATTACHED),u=0;if(n.boundaries.length&&f(n.boundaries),s.length){t.topicLineStyle===o.BRANCHCONNECTION.ARROWEDCURVE&&(u=30);var d=e.x+e.width+e.x+l+u,p=e.y-h-a-r.height;e.y=p,e.height+=r.height+h+a,e.width=e.width+e.x+l+r.width+u,c.each(s,function(t){t.setPosition(d-t.boundaryBounds.x,p-t.boundaryBounds.y),p+=t.boundaryBounds.height+l})}},getSourceOrientation:function(){return o.DIRECTION.UP},getChildStructure:function(){return o.STRUCTURECLASS.LOGICRIGHT},getSummaryDirection:function(){return o.DIRECTION.RIGHT},checkCalloutPosition:function(t,e){var n=s.restrictCalloutToLeft(t,e),r=s.restrictCalloutToBottom(t,e);return s.mergeCalloutOffset(n,r)},getAvailableChildStructure:function(t,e){return[]}});t.exports=p},function(t,e,n){"use strict";var r,i=(r=n(3))&&r.__esModule?r:{default:r},o=n(19),a=n(10),s=n(13),u=n(1),c=n(14),l=n(0),h=l.STRUCTURECLASS,d=l.TOPIC_ATTACHED,f=l.DIRECTION,p=l.BRANCHCONNECTION,g=l.RIGHT_EXPOSED_STRUCTURE,v=l.LEFT_EXPOSED_STRUCTURE.filter(function(t){return!("org.xmind.ui.timeline.horizontal"===t)}),m=s.PADDING,y=a.setBoundaryPadding,_=u.extend({},o,{STRUCTURECLASS:h.TIMELINEVERTICAL,isAttachedChildrenStructureImmutable:!0,getRightSide:function(t){var e=t.getChildrenBranchesByType();if(e.length){var n=[0];e[0].changeTag("right");var r,i=!0;for(r=1;r<e.length;r++)this.isInSameRange(t,r)?i?(e[r].changeTag("right"),n.push(r)):e[r].changeTag("left"):i?(i=!1,e[r].changeTag("left")):(i=!0,e[r].changeTag("right"),n.push(r));return n}},calAttachedChildrenPos:function(t,e){var n=t.getChildrenBranchesByType(d),r=0;if(n.length){t.topicLineStyle===p.ARROWEDCURVE&&(r=30);var o=e.x+e.width+e.x+m+r,a=e.x+e.width+e.x-m-r,s=e.y+e.height,l=e.y+e.height,h=s+1.5*m,f=l+1.5*m;y(t),u.each(n,function(t){var e,n=t.topicView.bounds;"right"===t.tag?(e=h>l+1.5*m?h:l+1.5*m,t.setPosition(o-t.boundaryBounds.x,e-t.boundaryBounds.y),s=e+n.height+1.5*m,h=e+t.boundaryBounds.height+1.5*m):"left"===t.tag&&(e=f>s+1.5*m?f:s+1.5*m,t.setPosition(a-t.boundaryBounds.x-t.boundaryBounds.width,e-t.boundaryBounds.y),l=e+n.height+1.5*m,f=e+t.boundaryBounds.height+1.5*m)},this);var g=this.getChildrenSize(t);(0,i.default)(e,c.merge(e,g))}},getSummaryDirection:function(t,e){var n=this.getRightSide(t);return u.indexOf(n,e)>-1?f.RIGHT:f.LEFT},getSourceOrientation:function(){return f.DOWN},getChildTargetOrientation:function(t,e){var n=this.getRightSide(t);return u.indexOf(n,e)>-1?f.LEFT:f.RIGHT},getChildStructure:function(t,e,n){var r=this.getRightSide(n);return u.indexOf(r,e)>-1?h.TREERIGHT:h.TREELEFT},getCalloutStructure:function(){return this.STRUCTURECLASS},getAvailableChildStructure:function(t,e){var n=this.getRightSide(t),r=e.branchIndex();return n.indexOf(r)>-1?g:v}});t.exports=_},function(t,e,n){"use strict";var r=n(10),i=n(139),o=n(79),a=n(1),s=n(0),u=s.STRUCTURECLASS,c=s.DIRECTION,l=s.LEFT_EXPOSED_STRUCTURE.filter(function(t){return!("org.xmind.ui.timeline.horizontal"===t)}),h=a.extend({},i,{STRUCTURECLASS:u.TREELEFT,calAttachedChildrenPos:function(t,e){i.calAttachedChildrenPos.call(this,t,e,!1)},getSourceOrientation:function(){return c.DOWN},getSummaryDirection:function(){return c.LEFT},getChildTargetOrientation:function(){return c.RIGHT},checkCalloutPosition:function(t,e){return r.restrictCalloutToRight(t,e)},getPointsOfBase:function(t){var e=t.topicView.bounds,n=t.isCentralBranch()||t.isDetachedBranch()?0:1;return[{x:e.x,y:e.y+n*e.height},{x:0,y:e.y+n*e.height}]},getPointsOfNoChildren:function(t){var e=t.topicView.bounds;return[{x:0,y:e.y+e.height+o.virtualConnLen},{x:e.x-5*e.width/6,y:e.y+e.height+o.virtualConnLen}]},getAvailableChildStructure:function(t,e){return l}});t.exports=h},function(t,e,n){"use strict";var r=n(10),i=n(139),o=n(79),a=n(1),s=n(0),u=s.STRUCTURECLASS,c=s.DIRECTION,l=s.RIGHT_EXPOSED_STRUCTURE,h=a.extend({},i,{STRUCTURECLASS:u.TREERIGHT,calAttachedChildrenPos:function(t,e){i.calAttachedChildrenPos.call(this,t,e,!0)},getSourceOrientation:function(){return c.DOWN},checkCalloutPosition:function(t,e){return r.restrictCalloutToLeft(t,e)},getPointsOfBase:function(t){var e=t.topicView.bounds,n=t.isCentralBranch()||t.isDetachedBranch()?0:1;return[{x:0,y:e.y+n*e.height},{x:e.width,y:e.y+n*e.height}]},getPointsOfNoChildren:function(t){var e=t.topicView.bounds;return[{x:e.x+11*e.width/6,y:e.y+e.height+o.virtualConnLen},{x:0,y:e.y+e.height+o.virtualConnLen}]},getAvailableChildStructure:function(t,e){return l}});t.exports=h},function(t,e,n){"use strict";var r=n(16).Events,i=n(1);function o(){}o.prototype=i.extend({},r),t.exports=o},function(t,e,n){"use strict";e.__esModule=!0;var r=f(n(11)),i=f(n(3)),o=f(n(30)),a=f(n(2)),s=f(n(9)),u=n(0),c=f(n(246)),l=f(n(51)),h=f(n(4)),d=f(n(65));function f(t){return t&&t.__esModule?t:{default:t}}var p="full",g={targetBranch:null,hideCollapseOpen:!1,hideCollapseClose:!1,area:p,hidpi:96,scale:1,width:null,height:null,maxScale:null,padding:10,format:"PNG",noBackground:null,skipFont:!0,timeout:1e4},v=function(){function t(){(0,a.default)(this,t)}return t.prototype.export=function(t){var e=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};n=this._getMergeDefaultOptions(n);var r=t.config(u.CONFIG.LOGGER),i=t.getModule(u.MODULE_NAME.SEMAPHORE),a=void 0,s=void 0,l=void 0,h=void 0,d=void 0,f=void 0,p=void 0,g=void 0;return new o.default(function(o,v){var m=!1;setTimeout(function(){m=!0,v("Export image:"+n.timeout+"ms timeout. Current status:"+i._log_semaphore())},n.timeout);var y=Date.now();i.onceNotInStatus([u.UI_STATUS.ANIMATION,u.UI_STATUS.DRAG,u.UI_STATUS.LAYOUT,u.UI_STATUS.LOADING_IMAGE],function(){if(r.info("Export image time: from "+y+" to "+Date.now()+"."),!m){var i=e._getTargetSVGInfo(t,n);a=i.$newSVG,s=i.svgWidth,l=i.svgHeight,h=i.originLeft,d=i.originTop,f=i.containerScale,p=i.scale,g=i.hidpi;var u=e._getFontsInSheet(t,n.skipFont);"PNG"===n.format?c.default.svgAsPngUri(a[0],{scale:p,hidpi:g,skipSheet:null,fonts:u},o):"SVG"===n.format&&c.default.prepareSVGWithDoctype(a[0],{skipSheet:null,scale:p,fonts:u},o)}})}).then(function(t){return{height:l*p,width:s*p,cx:h*p*f,cy:d*p*f,data:t,scale:p}}).catch(function(e){throw t.config(u.CONFIG.LOGGER).error(e),e})},t.prototype._getMergeDefaultOptions=function(t){var e=(0,i.default)({},g,t);return"SVG"===e.format&&(e.area=p),e.targetBranch&&(e.area=p),e},t.prototype._getTargetSVGInfo=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.getSVGView(),r={$newSVG:null,svgWidth:0,svgHeight:0,originLeft:0,originTop:0,containerScale:1,scale:e.scale,hidpi:e.hidpi};if("inview"===e.area){r.svgWidth=n.svg.node.clientWidth,r.svgHeight=n.svg.node.clientHeight,r.containerScale=n.getScale()/100;var i=n.container.transform();r.originLeft=i.x/r.containerScale,r.originTop=i.y/r.containerScale}else if(e.area===p){var o=e.targetBranch?e.targetBranch.bounds:t.getContentBound();if(r.svgWidth=Math.ceil(o.width),r.svgHeight=Math.ceil(o.height),r.originLeft=-o.x,r.originTop=-o.y,e.width&&e.height){var a=e.width-2*e.padding,u=e.height-2*e.padding;a/u>o.width/o.height?(r.scale=u/o.height,r.scale=void 0!==e.maxScale&&null!==e.maxScale?Math.min(r.scale,e.maxScale):r.scale,r.svgWidth=a/r.scale):(r.scale=a/o.width,r.scale=void 0!==e.maxScale&&null!==e.maxScale?Math.min(r.scale,e.maxScale):r.scale,r.svgHeight=u/r.scale)}var c=Math.max(r.svgWidth,r.svgHeight)*r.scale*r.hidpi/96;c>=32767&&(r.scale=32767*r.scale/c*.9);var l=r.svgWidth*r.svgHeight*(r.scale*r.scale)*(r.hidpi/96*r.hidpi/96);if(l>268435456&&(r.scale=r.scale*Math.sqrt(268435456/l)*.9),r.originLeft+=(r.svgWidth-o.width)/2,r.originTop+=(r.svgHeight-o.height)/2,e.targetBranch){var h=e.targetBranch.getRealPosition();r.originLeft-=h.x,r.originTop-=h.y}var d=e.padding/r.scale;r.svgWidth+=2*d,r.svgHeight+=2*d,r.originLeft+=d,r.originTop+=d}return r.$newSVG=e.targetBranch?this._getBranchTreeSVG(e.targetBranch,t):(0,s.default)(n.svg.node).clone(),r.$newSVG.attr({width:r.svgWidth,height:r.svgHeight}),r.$newSVG.children("g").eq(0).attr({transform:"scale("+r.containerScale+") translate("+r.originLeft+" "+r.originTop+")"}),this._hideInteractiveElements(r.$newSVG,e),e.noBackground&&r.$newSVG.css("background-color","transparent"),r},t.prototype._getBranchTreeSVG=function(t,e){var n=(0,s.default)('<svg id="SvgjsSvg1001" xmlns="http://www.w3.org/2000/svg" version="1.1" width="100%" height="100%" xmlns:xlink="http://www.w3.org/1999/xlink" style="display: block; background-color: rgb(255, 255, 255);"></svg>'),r=(0,s.default)("<g></g>"),i=(0,s.default)("<g></g>"),o=(0,s.default)("<g></g>"),a=(0,s.default)("<g></g>"),u=(0,s.default)("<g></g>"),c=(0,s.default)("<g></g>"),l=d.default.getAllChildrenBranchViewList(t,!0);return l.forEach(function(e){i.append((0,s.default)(e.el).clone()),e!==t&&o.append((0,s.default)(e.connection.connectionPath.node).clone()),e.boundaries.forEach(function(t){a.append(t.$el.clone())}),e.matrixView&&u.append(e.matrixView.$el.clone())}),e.getSheetView().relationships.forEach(function(t){var e=l.includes(t.end1View),n=l.includes(t.end2View);if(e&&n){c.append(t.$el.clone());var r=t.arrowSelector.beginMarker;r&&c.append((0,s.default)(r.node).clone());var i=t.arrowSelector.endMarker;i&&c.append((0,s.default)(i.node).clone())}}),r.append(u).append(a).append(o).append(i).append(c),n.append(r),n},t.prototype._getFontsInSheet=function(t,e){var n={"information-iconfont":1};if(!e){var i=t.getSVGView();(0,r.default)(i.model2View).forEach(function(t){var e=i.model2View[t];if(e.model instanceof l.default){var r=h.default.getStyleValue(e,u.STYLE_KEYS.FONT_FAMILY);r&&r.split(",").forEach(function(t){return t&&(n[t]=1)})}})}return(0,r.default)(n).map(function(t){return t.replace(/['"]/g,"")})},t.prototype._hideInteractiveElements=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=["select-box-container","other-container","multi-select-box_container","resize-box","relationship-action-path","controlPoint-group","marker_border_box","icon-border-box","boundary-action-path","topic-shape-select-box","cell-select-box","matrix-plus-box","collapse-extended","topic-custom-width-control-bar"];e.hideCollapseOpen&&(n=n.concat("collapse-folded")),e.hideCollapseClose&&(n=n.concat("collapse-extended")),n.forEach(function(e){t.find('[data-name="'+e+'"]').remove()})},t}();e.default=new v},function(t,e,n){"use strict";e.__esModule=!0,e.getBrotherBranchNearby=e.getChildBranchNearby=e.getParentBranchNearby=e.getBranchNearby=e.keyboardNav=void 0;var r,i=s(n(45)),o=n(0),a=s(n(64));function s(t){return t&&t.__esModule?t:{default:t}}var u=((r={})[o.DIRECTION.UP]={mainAxis:"cy",crossAxis:"cx",edge:"height"},r[o.DIRECTION.DOWN]={mainAxis:"cy",crossAxis:"cx",edge:"height"},r[o.DIRECTION.LEFT]={mainAxis:"cx",crossAxis:"cy",edge:"width"},r[o.DIRECTION.RIGHT]={mainAxis:"cx",crossAxis:"cy",edge:"width"},r),c=function(t){var e=(0,i.default)({},t.topicView.bounds),n=t.getRealPosition();return{cx:n.x,cy:n.y,width:e.width,height:e.height}},l=function(t,e,n){if(0!==e.length&&n){var r=u[n],i=r.mainAxis,o=r.crossAxis,a=r.edge,s=c(t),l=function(t){var e=c(t);return Math.abs(s[i]-e[i])-(s[a]+e[a])/2},h=function(t){var e=c(t);return Math.abs(s[o]-e[o])},d=e[0],f=l(d);return e.forEach(function(t){var e=l(t);(e<f||e===f&&h(t)<h(d))&&(d=t,f=e)}),d}},h=function(t,e,n){var r=u[n],i=r.mainAxis,o=r.crossAxis,a="cx"===i?"height":"width",s=c(t),l=c(e),h=(s[a]+l[a])/2;return Math.abs(s[o]-l[o])<=h},d=function(t,e,n){var r=u[n].mainAxis,i=c(t),a=c(e);return n===o.DIRECTION.UP||n===o.DIRECTION.LEFT?a[r]<i[r]:n===o.DIRECTION.DOWN||n===o.DIRECTION.RIGHT?a[r]>i[r]:void 0},f=function(t,e){return"UD"===t?e===o.DIRECTION.UP||e===o.DIRECTION.DOWN||"UD"===e:"LR"===t?e===o.DIRECTION.LEFT||e===o.DIRECTION.RIGHT||"LR"===e:t===e},p=function(t){var e=t.parent();if(e.type===o.VIEW_TYPE.BRANCH&&!t.isDetachedBranch()){var n=a.default[e.getStructureClass()],r=n.getSourceOrientation();return r!==o.DIRECTION.NONE?function(t){var e;return((e={})[o.DIRECTION.UP]=o.DIRECTION.DOWN,e[o.DIRECTION.DOWN]=o.DIRECTION.UP,e[o.DIRECTION.LEFT]=o.DIRECTION.RIGHT,e[o.DIRECTION.RIGHT]=o.DIRECTION.LEFT,e)[t]||null}(r):n.getChildTargetOrientation(e,t.branchIndex())}},g=function(t){for(;t.parent()&&t.parent().type===o.VIEW_TYPE.BRANCH;)t=t.parent();if(t.isCentralBranch())return t},v=function(t){return[].concat(t.getDescendantBranchesByType([o.TOPIC_TYPE.ATTACHED,o.TOPIC_TYPE.DETACHED,o.TOPIC_TYPE.SUMMARY]),[t])};function m(t,e,n){if(t&&e){"function"!=typeof n&&(n=function(){return!0});var r=v(g(t)).filter(n).filter(function(n){return d(t,n,e)}).filter(function(n){return h(t,n,e)});return l(t,r,e)}}function y(t,e,n){if(t&&e){"function"!=typeof n&&(n=function(){return!0});var r=t.parent();return!(!f(p(t),e)||!n(r))&&r}}function _(t,e,n){if(t&&e){"function"!=typeof n&&(n=function(){return!0});var r=a.default[t.getStructureClass()].getSourceOrientation();if(f(r,e)){var i=t.getChildrenBranchesByType().filter(n),s=l(t,i,e);if(s)return s}if(r===o.DIRECTION.NONE){var u=t.getChildrenBranchesByType().filter(n).filter(function(n){return d(t,n,e)});return l(t,u,e)}return!1}}e.keyboardNav=function(t,e,n){var r=e.getSelections().filter(function(t){return t.type===o.VIEW_TYPE.BRANCH});if(0!==r.length){var i=e.getLastSelectedBranch()||r[r.length-1],a=function(t){return!e.isUnselectable(t)};s(y(i,t))||s(_(i,t,a))||s(m(i,t,a))}function s(t){return!!t&&(n?t.isSelected?(e.toggleSelection(i),e.setLastSelectedBranch(t)):e.addSelection(t):e.selectSingle(t),!0)}},e.getBranchNearby=m,e.getParentBranchNearby=y,e.getChildBranchNearby=_,e.getBrotherBranchNearby=function(t,e,n){if(t&&e){if("function"!=typeof n&&(n=function(){return!0}),t.parent().type===o.VIEW_TYPE.BRANCH&&!t.isDetachedBranch()&&f(t.getBrotherDirection(),e)){var r=t.parent().getChildrenBranchesByType(o.TOPIC_TYPE.ATTACHED).filter(n).filter(function(n){return d(t,n,e)}).filter(function(n){return h(t,n,e)});return l(t,r,e)}return!1}}},function(t,e,n){"use strict";(function(e){var r,i,o=(r=n(2))&&r.__esModule?r:{default:r},a=n(0).ARROWSHAPE,s=n(1),u=e.SVG,c="M 4 1.5 a 2.5 2.5 0 1 0 0.01 0ZM 4 2.5a 1.5 1.5 0 1 1 -0.01 0ZM 4 3A 1 1 0 1 1 4 5A 1 1 0 1 1 4 3 Z",l="M 4 2 L 6 4 L 4 6 L 2 4 L 4 2 Z M 3.65 3.65 L 4.35 4.35",h={width:8,height:8,startD:"",startRefX:5,startRefY:4,endD:"",endRefX:5,endRefY:4,tip:0,needFill:!1,strokeWidth:1,select:function(t){return"start"===t?[this.startD,this.startRefX,this.startRefY]:"end"===t?[this.endD,this.endRefX,this.endRefY]:void console.warn("Bad arrow.")},createMarker:function(t,e){var n=this.select(e),r=n[0],i=n[1],o=n[2],a=t.marker(this.width,this.height).ref(i,o),s=this.needFill?0:this.strokeWidth,c=(new u.Path).attr({d:r,"stroke-width":s,"stroke-dasharray":"none"});return a.add(c),a}};function d(t){return s.extend({},h,t)}var f=((i={})[a.NONE]=h,i[a.NORMAL]=d({startD:"M 6 2 L 2 4 L 6 6",endD:"M 2 2 L 6 4 L 2 6",startRefX:5,endRefX:3,tip:4}),i[a.TRIANGLE]=d({startD:"M 6 2 L 2 4 L 6 6 Z",endD:"M 2 2 L 6 4 L 2 6",startRefX:6,endRefX:2,tip:4,needFill:!0}),i[a.SPEARHEAD]=d({startD:"M 6 2 L 2 4 L 6 6 L 5 4 L 6 2 Z",endD:"M 2 2 L 6 4 L 2 6 L 3 4 L 2 2 Z",endRefX:3,startRefX:5,tip:3,needFill:!0}),i[a.DOT]=d({startD:"M 4 2 A 2 2 0 1 1 4 6 A 2 2 0 1 1 4 2 Z",endD:"M 4 2 A 2 2 0 1 1 4 6 A 2 2 0 1 1 4 2 Z",startRefX:6,endRefX:2,tip:4,needFill:!0}),i[a.SQUARE]=d({startD:"M 2 2 L 6 2 L 6 6 L 2 6 Z",endD:"M 2 2 L 6 2 L 6 6 L 2 6 Z",startRefX:6,endRefX:2,tip:4,needFill:!0}),i[a.DIAMOND]=d({startD:"M 1.5 4 L 4 2 L 6.5 4 L 4 6 Z",endD:"M 1.5 4 L 4 2 L 6.5 4 L 4 6 Z",startRefX:5,endRefX:3,tip:3.5,needFill:!0}),i[a.HERRINGBONE]=d({startD:"M 2 2 L 3 4 L 2 6 M 4 2 L 5 4 L 4 6 M 6 2 L 7 4 L 6 6 M 3 4 L 7 4",endD:"M 3 2 L 2 4 L 3 6 M 5 2 L 4 4 L 5 6 M 7 2 L 6 4 L 7 6 M 2 4 L 6 4",startRefX:7,endRefX:2,tip:5}),i[a.DOUBLEARROW]=d({startD:"M 2 4 L 5 2 L 5 6 Z M 4 4 L 6.5 2.5 L 6.5 5.5 Z",endD:"M 6 4 L 3 2 L 3 6 Z M 4 4 L 1.5 2.5 L 1.5 5.5 Z",startRefX:6.5,endRefX:1.5,tip:4.5,needFill:!0}),i[a.RING]=d({startD:"M 4 2 A 2 2 0 1 1 4 6 A 2 2 0 1 1 4 2 Z",endD:"M 4 2 A 2 2 0 1 1 4 6 A 2 2 0 1 1 4 2 Z",startRefX:6,endRefX:2,tip:4.5,needFill:!1}),i[a.EYE]=d({startD:c,endD:c,startRefX:6,endRefX:2,tip:4.5,needFill:!0}),i[a.SQUARERING]=d({startD:l,endD:l,startRefX:6,endRefX:2,tip:4.5,needFill:!1}),i),p=function(){function t(e){(0,o.default)(this,t),this.svgDoc=e.editDomain().svg,this.target=e.path,this.beginType="",this.endType="",this.color="",this.beginMarker=null,this.endMarker=null}return t.prototype.setBeginArrowType=function(t){t!==this.beginType&&(this.beginType=t,this.beginMarker?this._changeMarkerType(this.beginMarker,t,"start"):this.beginMarker=this._createMarker(t,"start"))},t.prototype.setEndArrowType=function(t){t!==this.endType&&(this.endType=t,this.endMarker?this._changeMarkerType(this.endMarker,t,"end"):this.endMarker=this._createMarker(t,"end"))},t.prototype.setArrowColor=function(t){this.color!==t&&(this.color=t,this._setArrowColor(this.beginMarker.get(0),this.beginType),this._setArrowColor(this.endMarker.get(0),this.endType))},t.prototype._setArrowColor=function(t,e){var n=f[e].needFill?this.color:"none";t.attr({stroke:this.color,fill:n})},t.prototype._createMarker=function(t,e){var n=f[t].createMarker(this.svgDoc,e);return this.target.marker(e,n),n},t.prototype._changeMarkerType=function(t,e,n){var r=f[e],i=r.select(n),o=i[0],a=i[1],s=i[2],u=t.get(0),c=void 0,l=void 0;r.needFill?(l=this.color,c=0):(l="none",c=r.strokeWidth),t.ref(a,s),u.attr({d:o,"stroke-width":c,fill:l})},t.prototype.getTip=function(t){var e;return e="start"===t?this.beginType:this.endType,f[e].tip},t.prototype.dispose=function(){this.beginMarker&&this.beginMarker.remove(),this.endMarker&&this.endMarker.remove()},t}();t.exports=p}).call(e,n(6))},function(t,e,n){"use strict";e.__esModule=!0;var r=c(n(2)),i=c(n(26)),o=c(n(25)),a=c(n(52)),s=n(53),u=n(0);function c(t){return t&&t.__esModule?t:{default:t}}var l=function(t){function e(){return(0,r.default)(this,e),(0,i.default)(this,t.apply(this,arguments))}return(0,o.default)(e,t),e.prototype.getClassName=function(t){return arguments.length>1&&void 0!==arguments[1]&&arguments[1],u.CLASS_TYPE.BOUNDARY},e.prototype.protectedFindStyleSelector=function(t){return(0,s.findStyleSelector)(t)},e.prototype.protectedGetComputedStyleKeys=function(t){return[u.STYLE_KEYS.FONT_FAMILY,u.STYLE_KEYS.FONT_STYLE,u.STYLE_KEYS.FONT_SIZE,u.STYLE_KEYS.FONT_WEIGHT,u.STYLE_KEYS.TEXT_COLOR,u.STYLE_KEYS.TEXT_ALIGN,u.STYLE_KEYS.TEXT_BACKGROUND_COLOR,u.STYLE_KEYS.TEXT_BULLET,u.STYLE_KEYS.TEXT_DECORATION,u.STYLE_KEYS.TEXT_TRANSFORM,u.STYLE_KEYS.SHAPE_CLASS,u.STYLE_KEYS.LINE_CORNER,u.STYLE_KEYS.LINE_COLOR,u.STYLE_KEYS.LINE_CLASS,u.STYLE_KEYS.LINE_WIDTH,u.STYLE_KEYS.LINE_PATTERN,u.STYLE_KEYS.OPACITY,u.STYLE_KEYS.FILL_COLOR,u.STYLE_KEYS.FILL_GRADIENT,u.STYLE_KEYS.BORDER_GRADIENT]},e}(a.default);e.default=new l},function(t,e,n){"use strict";e.__esModule=!0;var r=c(n(2)),i=c(n(26)),o=c(n(25)),a=c(n(52)),s=n(53),u=n(0);function c(t){return t&&t.__esModule?t:{default:t}}var l=function(t){function e(){return(0,r.default)(this,e),(0,i.default)(this,t.apply(this,arguments))}return(0,o.default)(e,t),e.prototype.getClassName=function(t){return arguments.length>1&&void 0!==arguments[1]&&arguments[1],u.CLASS_TYPE.RELATIONSHIP},e.prototype.protectedFindStyleSelector=function(t){return(0,s.findStyleSelector)(t)},e.prototype.protectedGetComputedStyleKeys=function(t){return[u.STYLE_KEYS.FONT_FAMILY,u.STYLE_KEYS.FONT_STYLE,u.STYLE_KEYS.FONT_SIZE,u.STYLE_KEYS.FONT_WEIGHT,u.STYLE_KEYS.TEXT_COLOR,u.STYLE_KEYS.TEXT_ALIGN,u.STYLE_KEYS.TEXT_BACKGROUND_COLOR,u.STYLE_KEYS.TEXT_BULLET,u.STYLE_KEYS.TEXT_DECORATION,u.STYLE_KEYS.TEXT_TRANSFORM,u.STYLE_KEYS.SHAPE_CLASS,u.STYLE_KEYS.LINE_CORNER,u.STYLE_KEYS.LINE_COLOR,u.STYLE_KEYS.LINE_CLASS,u.STYLE_KEYS.LINE_WIDTH,u.STYLE_KEYS.LINE_PATTERN,u.STYLE_KEYS.OPACITY,u.STYLE_KEYS.FILL_COLOR,u.STYLE_KEYS.ARROW_END_CLASS,u.STYLE_KEYS.ARROW_BEGIN_CLASS,u.STYLE_KEYS.FILL_GRADIENT,u.STYLE_KEYS.BORDER_GRADIENT]},e}(a.default);e.default=new l},function(t,e,n){"use strict";e.__esModule=!0;var r=l(n(17)),i=l(n(2)),o=l(n(26)),a=l(n(25)),s=l(n(52)),u=n(53),c=n(0);function l(t){return t&&t.__esModule?t:{default:t}}var h=function(t){function e(){return(0,i.default)(this,e),(0,o.default)(this,t.apply(this,arguments))}return(0,a.default)(e,t),e.prototype.getClassName=function(t){return arguments.length>1&&void 0!==arguments[1]&&arguments[1],c.CLASS_TYPE.MAP},e.prototype.changeTheme=function(t,e){var n=this,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{toFixUserStyle:!0},i=t.getContext().getSheetView();r.toFixUserStyle&&(r.fixUserStyleWhenChangeTheme=function(){return n.fixUserStyle(i)}),this.protectedGetModel(i).changeTheme(e,r)},e.prototype.protectedGetComputedStyleKeys=function(t){return[c.STYLE_KEYS.OPACITY,c.STYLE_KEYS.FILL_COLOR,c.STYLE_KEYS.BACKGROUND,c.STYLE_KEYS.ALLOW_OVERLAP,c.STYLE_KEYS.ALLOW_FREE_POSITION,c.STYLE_KEYS.GRADIENT_COLOR,c.STYLE_KEYS.MULTI_LINE_COLORS,c.STYLE_KEYS.CJK_FONT_FAMILY,c.STYLE_KEYS.LINE_TAPERED,c.STYLE_KEYS.FILL_GRADIENT]},e.prototype.fixUserStyle=function(t){var e=this,n=t.centralBranchView,r=n.getDescendantBranchesByType([c.TOPIC_TYPE.ATTACHED,c.TOPIC_TYPE.DETACHED,c.TOPIC_TYPE.SUMMARY,c.TOPIC_TYPE.CALLOUT]);[n].concat(r).forEach(function(t){e.protectedFindStyleSelector(t).fixUserStyle(t,!0)}),this._fixSheetUserStyleWhenChangeTheme(t)},e.prototype._fixSheetUserStyleWhenChangeTheme=function(t){var e=[c.STYLE_KEYS.FILL_COLOR,c.STYLE_KEYS.LINE_TAPERED,c.STYLE_KEYS.MULTI_LINE_COLORS],n={properties:{}},i=this.getUserStyle(t);if(i){var o=i.keys(),a=Array.isArray(o),s=0;for(o=a?o:(0,r.default)(o);;){var u;if(a){if(s>=o.length)break;u=o[s++]}else{if((s=o.next()).done)break;u=s.value}var l=u,h=this.getUserStyleValue(t,l),d=this.getUserClassValue(t,l),f=this.getThemeStyleValue(t,l),p=e.includes(l);!h||p||h===d||h===f||(n.properties[l]=h)}this.protectedGetModel(t).setStyleObj(n,!0)}},e.prototype.updateClassIntoTheme=function(t,e,n,r){var i=t.getContext().getSheetView(),o=this.getTheme(i).toJSON();for(var a in o[e]={type:n.type,properties:{}},n.properties)o[e].properties[a]=n.properties[a];r&&delete o[r],this.changeTheme(i,o,{toFixUserStyle:!1})},e.prototype.removeClassFromTheme=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=t.getContext().getSheetView(),r=this.getTheme(n).toJSON();e.forEach(function(t){delete r[t]}),this.changeTheme(n,r,{toFixUserStyle:!1})},e.prototype.protectedFindStyleSelector=function(t){return(0,u.findStyleSelector)(t)},e}(s.default);e.default=new h},function(t,e,n){"use strict";e.__esModule=!0;var r=c(n(2)),i=c(n(26)),o=c(n(25)),a=c(n(52)),s=n(53),u=n(0);function c(t){return t&&t.__esModule?t:{default:t}}var l=function(t){function e(){return(0,r.default)(this,e),(0,i.default)(this,t.apply(this,arguments))}return(0,o.default)(e,t),e.prototype.getClassName=function(t){return arguments.length>1&&void 0!==arguments[1]&&arguments[1],u.CLASS_TYPE.SUMMARY},e.prototype.protectedFindStyleSelector=function(t){return(0,s.findStyleSelector)(t)},e.prototype.protectedGetComputedStyleKeys=function(t){return[u.STYLE_KEYS.SHAPE_CLASS,u.STYLE_KEYS.LINE_CORNER,u.STYLE_KEYS.LINE_COLOR,u.STYLE_KEYS.LINE_CLASS,u.STYLE_KEYS.LINE_WIDTH,u.STYLE_KEYS.LINE_PATTERN,u.STYLE_KEYS.OPACITY]},e}(a.default);e.default=new l},function(t,e,n){"use strict";e.__esModule=!0;var r=l(n(17)),i=l(n(2)),o=l(n(26)),a=l(n(25)),s=l(n(52)),u=n(53),c=n(0);function l(t){return t&&t.__esModule?t:{default:t}}var h=function(t){function e(){return(0,i.default)(this,e),(0,o.default)(this,t.apply(this,arguments))}return(0,a.default)(e,t),e.prototype.protectedHandleKey=function(t,e,n){return e===c.STYLE_KEYS.SHAPE_CLASS&&this.getClassName(t,n)===c.CLASS_TYPE.CALLOUT_TOPIC&&(e=c.STYLE_KEYS.CALLOUT_SHAPE_CLASS),e},e.prototype.protectedGetComputedStyleKeys=function(t,e){return[c.STYLE_KEYS.FONT_FAMILY,c.STYLE_KEYS.FONT_STYLE,c.STYLE_KEYS.FONT_SIZE,c.STYLE_KEYS.FONT_WEIGHT,c.STYLE_KEYS.TEXT_COLOR,c.STYLE_KEYS.TEXT_ALIGN,c.STYLE_KEYS.TEXT_BACKGROUND_COLOR,c.STYLE_KEYS.TEXT_BULLET,c.STYLE_KEYS.TEXT_DECORATION,c.STYLE_KEYS.TEXT_TRANSFORM,c.STYLE_KEYS.SHAPE_CLASS,c.STYLE_KEYS.SHAPE_CORNER,c.STYLE_KEYS.LINE_CORNER,c.STYLE_KEYS.LINE_COLOR,c.STYLE_KEYS.LINE_CLASS,c.STYLE_KEYS.LINE_WIDTH,c.STYLE_KEYS.LINE_PATTERN,c.STYLE_KEYS.BORDER_LINE_COLOR,c.STYLE_KEYS.BORDER_LINE_WIDTH,c.STYLE_KEYS.CALLOUT_FILL_COLOR,c.STYLE_KEYS.CALLOUT_LINE_CLASS,c.STYLE_KEYS.CALLOUT_LINE_CORNER,c.STYLE_KEYS.CALLOUT_LINE_PATTERN,c.STYLE_KEYS.CALLOUT_LINE_WIDTH,c.STYLE_KEYS.CALLOUT_SHAPE_CLASS,c.STYLE_KEYS.CALLOUT_LINE_COLOR,c.STYLE_KEYS.OPACITY,c.STYLE_KEYS.FILL_COLOR,c.STYLE_KEYS.FILL_GRADIENT,c.STYLE_KEYS.BORDER_GRADIENT]},e.prototype.getSuggestedClassName=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=e.themeProvider?e.themeProvider:this.getTheme(t),r=t.getLayer();return t.isCentralBranch()?c.CLASS_TYPE.CENTRAL_TOPIC:t.isSummaryBranch()?c.CLASS_TYPE.SUMMARY_TOPIC:t.isCalloutBranch()?c.CLASS_TYPE.CALLOUT_TOPIC:t.isDetachedBranch()?n&&n.hasClass("level"+r)?"level"+r:c.CLASS_TYPE.FLOATING_TOPIC:t.isAttachedBranch()?n&&n.hasClass("level"+r)?"level"+r:2===r?c.CLASS_TYPE.MAIN_TOPIC:c.CLASS_TYPE.SUB_TOPIC:void 0},e.prototype.getClassName=function(t){arguments.length>1&&void 0!==arguments[1]&&arguments[1];var e=t.getLayer();return t.isCentralBranch()?c.CLASS_TYPE.CENTRAL_TOPIC:t.isSummaryBranch()?c.CLASS_TYPE.SUMMARY_TOPIC:t.isCalloutBranch()?c.CLASS_TYPE.CALLOUT_TOPIC:t.isDetachedBranch()?c.CLASS_TYPE.FLOATING_TOPIC:t.isAttachedBranch()?2===e?c.CLASS_TYPE.MAIN_TOPIC:c.CLASS_TYPE.SUB_TOPIC:void 0},e.prototype.getDefaultStyleValue=function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=this.protectedGetModel(t);return r.type()===c.TOPIC_TYPE.DETACHED&&e===c.STYLE_KEYS.SHAPE_CLASS&&r.getStructureClass()&&0===r.getStructureClass().search(c.STRUCTURECLASS.MAPFLOATING)?c.TOPICSHAPE.ELLIPSE:s.default.prototype.getDefaultStyleValue.apply(this,[t,e,n])},e.prototype.protectedParentStyleValue=function(t,e,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};if(e===c.STYLE_PARENT_GROUP.BEFORE_THEME_GROUP)switch(n){case c.STYLE_KEYS.BORDER_LINE_COLOR:return this.getThemeStyleValue(t,c.STYLE_KEYS.BORDER_LINE_COLOR,r)||this.getStyleValue(t,c.STYLE_KEYS.LINE_COLOR,{ignoreDefault:!0})||t.parent()&&t.parent().type===c.VIEW_TYPE.BRANCH&&this.getStyleValue(t.parent(),c.STYLE_KEYS.LINE_COLOR,{ignoreDefault:!0})||!r.ignoreDefault&&this.getDefaultStyleValue(t,c.STYLE_KEYS.BORDER_LINE_COLOR)||!r.ignoreDefault&&this.getDefaultStyleValue(t,c.STYLE_KEYS.LINE_COLOR);case c.STYLE_KEYS.LINE_COLOR:return this.getMultiLineColor(t)||this.getThemeStyleValue(t,n)||t.parent()&&t.parent().type===c.VIEW_TYPE.BRANCH&&this.getStyleValue(t.parent(),n,{ignoreDefault:!0})||!r.ignoreDefault&&this.getDefaultStyleValue(t,n);case c.STYLE_KEYS.BORDER_LINE_WIDTH:return this.getThemeStyleValue(t,c.STYLE_KEYS.BORDER_LINE_WIDTH)||this.getStyleValue(t,c.STYLE_KEYS.LINE_WIDTH,{ignoreDefault:!0})||t.parent()&&t.parent().type===c.VIEW_TYPE.BRANCH&&this.getStyleValue(t.parent(),c.STYLE_KEYS.LINE_WIDTH,{ignoreDefault:!0})||!r.ignoreDefault&&this.getDefaultStyleValue(t,c.STYLE_KEYS.BORDER_LINE_WIDTH)||!r.ignoreDefault&&this.getDefaultStyleValue(t,c.STYLE_KEYS.LINE_WIDTH);case c.STYLE_KEYS.LINE_WIDTH:return this.getThemeStyleValue(t,n)||t.parent()&&t.parent().type===c.VIEW_TYPE.BRANCH&&this.getStyleValue(t.parent(),c.STYLE_KEYS.LINE_WIDTH,{ignoreDefault:!0})||!r.ignoreDefault&&this.getDefaultStyleValue(t,n)}},e.prototype.getMultiLineColor=function(t){if(!(t.isCentralBranch()||t.isDetachedBranch()||t.isSummaryBranch())){var e=t.getContext().getSheetView(),n=(0,u.findStyleSelector)(e).getStyleValue(e,c.STYLE_KEYS.MULTI_LINE_COLORS);if(n&&"none"!==n){for(var r=t;this.getClassName(r)!==c.CLASS_TYPE.MAIN_TOPIC;){if(!(r=r.parent())||r.type!==c.VIEW_TYPE.BRANCH)return;var i=this.getUserStyleValue(r,c.STYLE_KEYS.LINE_COLOR)||this.getUserClassValue(r,c.STYLE_KEYS.LINE_COLOR);if(i)return i}var o=n.split(" "),a=r.branchIndex();return a<0&&(a=0),o[a%o.length]}}},e.prototype.protectedFindStyleSelector=function(t){return(0,u.findStyleSelector)(t)},e.prototype.fixUserStyle=function(t){var e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=[c.STYLE_KEYS.SHAPE_CLASS,c.STYLE_KEYS.FILL_COLOR,c.STYLE_KEYS.BORDER_LINE_COLOR,c.STYLE_KEYS.BORDER_LINE_WIDTH,c.STYLE_KEYS.TEXT_COLOR,c.STYLE_KEYS.TEXT_ALIGN,c.STYLE_KEYS.LINE_CORNER,c.STYLE_KEYS.LINE_COLOR,c.STYLE_KEYS.LINE_WIDTH,c.STYLE_KEYS.LINE_CLASS],i={properties:{}},o=this.protectedFindStyleSelector(t).getUserStyle(t);if(o){var a=o.keys(),s=Array.isArray(a),u=0;for(a=s?a:(0,r.default)(a);;){var l;if(s){if(u>=a.length)break;l=a[u++]}else{if((u=a.next()).done)break;l=u.value}var h=l,d=this.protectedFindStyleSelector(t).getUserStyleValue(t,h),f=this.protectedFindStyleSelector(t).getUserClassValue(t,h),p=this.protectedFindStyleSelector(t).getThemeStyleValue(t,h),g=n.includes(h);!d||g||d===f||d===p||h===c.STYLE_KEYS.STRUCTURE_CLASS||(i.properties[h]=d)}this.protectedGetModel(t).setStyleObj(i,e)}var v=this.protectedFindStyleSelector(t).getUserClassValue(t,c.STYLE_KEYS.STRUCTURE_CLASS);v||(v=this.protectedFindStyleSelector(t).getThemeStyleValue(t,c.STYLE_KEYS.STRUCTURE_CLASS)),t.isCentralBranch()&&v&&this.protectedGetModel(t).changeStructure(v)},e}(s.default);e.default=new h},function(t,e,n){"use strict";var r=o(n(2)),i=o(n(4));function o(t){return t&&t.__esModule?t:{default:t}}var a=n(1),s=n(14),u=n(0).CLASS_TYPE,c=function(){function t(){(0,r.default)(this,t)}return t.prototype.align=function(t,e){var n=this.extractInfo(e),r=void 0;switch(t){case"top":r=function(t){var e,n=(e=l(e=t),a.min(e,function(t){return t.bound.y})),r=[];return t.forEach(function(t){t.fixed||r.push({src:t.src,x:0,y:n.bound.y-t.bound.y})}),r}(n);break;case"middle":r=function(t){var e,n,r=(e=l(t).map(function(t){return t.bound}),(n=s.mergeArr(e)).y+n.height/2);return t.map(function(t){var e=t.src,n=t.bound;if(!t.fixed)return{src:e,x:0,y:r-(n.y+n.height/2)}})}(n);break;case"bottom":r=function(t){var e,n=(e=l(e=t),a.max(e,function(t){return t.bound.y+t.bound.height}));return t.map(function(t){var e=t.src,r=t.bound;if(!t.fixed)return{src:e,x:0,y:n.bound.y+n.bound.height-(r.y+r.height)}})}(n);break;case"left":r=function(t){var e=function(t){return t=l(t),a.min(t,function(t){return t.bound.x})}(t).bound.x;return t.map(function(t){var n=t.src,r=t.bound;if(!t.fixed)return{src:n,x:e-r.x,y:0}})}(n);break;case"center":r=function(t){var e=function(t){var e=(t=l(t)).map(function(t){return t.bound}),n=s.mergeArr(e);return n.x+n.width/2}(t);return t.map(function(t){var n=t.src,r=t.bound;if(!t.fixed)return{src:n,x:e-(r.x+r.width/2),y:0}})}(n);break;case"right":r=function(t){var e=function(t){return t=l(t),a.max(t,function(t){return t.bound.x+t.bound.width})}(t),n=e.bound.x+e.bound.width;return t.map(function(t){var e=t.src,r=t.bound;if(!t.fixed)return{src:e,x:n-(r.x+r.width),y:0}})}(n);break;default:return void console.error("Wrong arguments.")}this.applyPositioning(r)},t.prototype.divide=function(t,e){switch(t){case"horizon":this.divideHorizon(e);break;case"vertical":this.divideVertical(e);break;default:return void console.error("Wrong arguments")}},t.prototype.divideHorizon=function(t){var e=this.extractFloatingInfo(t);e=a.sortBy(e,function(t){return t.bound.x});var n=this._divideHorizonByBoundaryBound(e);this.applyPositioning(n)},t.prototype._divideHorizonByBoundaryBound=function(t){var e=20,n=t.length;if(!(n<2)){var r=t.map(function(t){return t.boundaryBound.width}).reduce(function(t,e){return t+e});r+=(n-1)*e;var i=s.mergeArr(t.map(function(t){return t.boundaryBound})),o=i.width,a=i.x+i.width/2,u=(i.y,i.height,[]),c=r;o>r&&(e+=(o-r)/(n-1),c=o);var l=a-c/2;return t.forEach(function(t){var n=t.src,r=(t.bound,t.boundaryBound);u.push({x:l-r.x,y:0,src:n}),l+=r.width+e}),u}},t.prototype._divideHorizonByShapeBound=function(t){for(var e=t.length,n=0,r=[],i=0;i<e-1;i++){var o=t[i],a=t[i+1],s=h(o.boundaryBound)-h(o.bound)+(a.bound.x-a.boundaryBound.x);r.push(s)}n=Math.max.apply(Math,r),n+=20;var u=t[0],c=t[e-1],l=c.bound.x-h(u.bound),d=t.slice(1,e-1).map(function(t){return t.bound.width}).reduce(function(t,e){return t+e},0),f=l-d,p=l,g=n;f<n*(e-1)?p=d+n*(e-1):g=f/(e-1);var v=(h(u.bound)+c.bound.x)/2-p/2,m=[];return m.push({x:v-h(u.bound),y:0,src:u.src}),v+=g,t.slice(1).forEach(function(t){m.push({x:v-t.bound.x,y:0,src:t.src}),v+=g+t.bound.width}),m},t.prototype.divideVertical=function(t){var e=this.extractFloatingInfo(t);e=a.sortBy(e,function(t){return t.bound.y});var n=this._divideVerticalByBoundaryBound(e);this.applyPositioning(n)},t.prototype._divideVerticalByBoundaryBound=function(t){var e=20,n=t.length;if(!(n<2)){var r=t.map(function(t){return t.boundaryBound.height}).reduce(function(t,e){return t+e});r+=(n-1)*e;var i=s.mergeArr(t.map(function(t){return t.boundaryBound})),o=i.height,a=(i.x,i.width,i.y+i.height/2),u=[],c=r;o>r&&(e+=(o-r)/(n-1),c=o);var l=a-c/2;return t.forEach(function(t){var n=t.src,r=(t.bound,t.boundaryBound);u.push({x:0,y:l-r.y,src:n}),l+=r.height+e}),u}},t.prototype.extractFloatingInfo=function(t){var e=[];return t.forEach(function(t){if(i.default.getClassName(t)===u.FLOATING_TOPIC){var n=t.getRealPosition(),r=t.topicView.shapeBounds,o=t.boundaryBounds;e.push({bound:{x:r.x+n.x,y:r.y+n.y,width:r.width,height:r.height},boundaryBound:{x:o.x+n.x,y:o.y+n.y,width:o.width,height:o.height},src:t})}}),e},t.prototype.extractInfo=function(t){return t.map(function(t){var e=t.getRealPosition(),n=t.topicView.shapeBounds;return{bound:{x:n.x+e.x,y:n.y+e.y,width:n.width,height:n.height},fixed:i.default.getClassName(t)!==u.FLOATING_TOPIC,src:t}})},t.prototype.applyPositioning=function(t){t.forEach(function(t){if(t){var e=t.src,n=t.x,r=t.y;0===n&&0===r||e.model.changePosition({x:e.position.x+n,y:e.position.y+r})}})},t}();function l(t){var e=[],n=[];t.forEach(function(t){t.fixed?e.push(t):n.push(t)});var r=[],i=n.map(function(t){return t.src.getBranchPath()});return e.forEach(function(t){var e=t.src.getBranchPath();i.every(function(t){return!e.includes(t)})&&r.push(t)}),r.length?r:n}function h(t){return t.x+t.width}t.exports=c},function(t,e,n){"use strict";var r,i=(r=n(2))&&r.__esModule?r:{default:r},o=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:-.005;(0,i.default)(this,t),this.friction=e,this.posArr=[],this.timestampArr=[],this.raf=null}return t.prototype.init=function(t){this.posArr=[],this.timestampArr=[],this.raf=null},t.prototype.setMovingPos=function(t){this.posArr.push(t),this.timestampArr.push(Date.now()),this.timestampArr.length>6&&(this.timestampArr.shift(),this.posArr.shift())},t.prototype.auto=function(t){this.cb=t;var e=this.timestampArr.length;if(0!==e){var n=this.posArr[e-1],r=this.posArr[0],i=this.timestampArr[e-1]-this.timestampArr[0],o=n.x-r.x,a=n.y-r.y;this._inertia(Date.now(),Math.abs(o)/i,o>0?1:-1,n.x,Math.abs(a)/i,a>0?1:-1,n.y)}},t.prototype._inertia=function(t,e,n,r,i,o,a){var s=this;this.raf=requestAnimationFrame(function(){var u=Date.now(),c=u-t,l=0,h=0,d=!0;e+=s.friction*c,i+=s.friction*c,e>0&&(d=!1,l=n*e*c),i>0&&(d=!1,h=o*i*c),s.cb(l,h),!d&&s.raf&&s._inertia(u,e,n,r+l,i,o,a+h)})},t}();t.exports=o},function(t,e,n){"use strict";var r=o(n(2)),i=o(n(3));function o(t){return t&&t.__esModule?t:{default:t}}var a="MIDDLE",s=5,u=function(t){return Array.isArray(t)?t.slice():(0,i.default)({},t)},c=function(t){return void 0===t||null===t},l=function(t){return t.reduce(function(t,e){return t.concat(e)},[])},h=function(t){var e=[];if(0===t.length)return e;for(var n=t.length,r=t[0].length,i=0;i<r;i++){e[i]=[];for(var o=0;o<n;o++)e[i][o]=t[o][i]}return e},d=function(t,e){var n=e-t.reduce(function(t,e){return t+e},0);t[t.length-1]+=n},f=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];(0,r.default)(this,t),n?(this.columns=e,this.rows=h(this.columns)):(this.rows=e,this.columns=h(this.rows)),this.rowHeightArr=[],this.colWidthArr=[]}return t.prototype.getMinSize=function(){return this._calCellSize(),{width:this.colWidthArr.reduce(function(t,e){return t+e}),height:this.rowHeightArr.reduce(function(t,e){return t+e})}},t.prototype.setSize=function(t){var e=this;this.size=t;var n=t.width,r=t.height;d(this.colWidthArr,n),d(this.rowHeightArr,r),this.rows.forEach(function(t,n){t.forEach(function(t,r){var i=e.rowHeightArr[n],o=e.colWidthArr[r];t.setSize({width:o,height:i})})})},t.prototype.setPos=function(t){var e=this;this.pos=t;var n=u(t);this.rows.forEach(function(t,r){var i=u(n);t.forEach(function(t,n){var r=e.colWidthArr[n],o=u(i);t.setPos(o),i.x+=r}),n.y+=e.rowHeightArr[r]})},t.prototype.getCells=function(){var t=this.rows.map(function(t){var e=t.map(function(t){return t.getCells()});return l(e)});return l(t)},t.prototype.getColumnSize=function(t){var e=this.rowHeightArr.reduce(function(t,e){return t+e});return{width:this.colWidthArr[t],height:e}},t.prototype.getRowSize=function(t){return{width:this.colWidthArr.reduce(function(t,e){return t+e}),height:this.rowHeightArr[t]}},t.prototype._calCellSize=function(){var t=this;this.rowHeightArr.length=0,this.colWidthArr.length=0,this.rows.forEach(function(e,n){e.forEach(function(e,r){var i=e.getMinSize(),o=i.width,a=i.height;t.rowHeightArr[n]=t.rowHeightArr[n]||0,t.colWidthArr[r]=t.colWidthArr[r]||0,t.rowHeightArr[n]=Math.max(a,t.rowHeightArr[n]),t.colWidthArr[r]=Math.max(o,t.colWidthArr[r])})})},t}(),p=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];(0,r.default)(this,t),this.cells=e,this.cellHeightArr=[]}return t.prototype.getMinSize=function(){if(0===this.cells.length)return{width:0,height:0};var t=this.cells.map(function(t){return t.getMinSize()}),e=t.map(function(t){return t.width}),n=t.map(function(t){return t.height}),r=Math.max.apply(Math,e),i=n.reduce(function(t,e){return t+e});return this.cellHeightArr=n,{width:r,height:i}},t.prototype.setSize=function(t){var e=this;this.size=t;var n=t.width,r=t.height;!function(t,e){for(var n=(e-t.reduce(function(t,e){return t+e},0))/t.length,r=0;r<t.length;r++)t[r]+=n}(this.cellHeightArr,r),this.cells.forEach(function(t,r){var i=e.cellHeightArr[r];t.setSize({width:n,height:i})})},t.prototype.setPos=function(t){var e=this;this.pos=t;var n=u(t);this.cells.forEach(function(t,r){var i=u(n);t.setPos(i),n.y+=e.cellHeightArr[r]})},t.prototype.getCells=function(){var t=this.cells.map(function(t){return t.getCells()});return l(t)},t.prototype.getItems=function(){return this.getCells().map(function(t){return t.item}).filter(function(t){return!c(t)})},t}(),g=function(){function t(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};(0,r.default)(this,t);var o={padding:s,align:a},u=(0,i.default)(o,n);this.item=e,this.padding=u.padding,this.align=u.align}return t.prototype.getMinSize=function(){var t=c(this.item)?{width:40,height:0,x:0,y:0}:this.item.bounds,e=t.width,n=t.height;return{width:e+2*this.padding,height:n+2*this.padding}},t.prototype.getCells=function(){return[this]},t.prototype.setSize=function(t){this.size=t,this._setItemPos(t)},t.prototype.setPos=function(t){this.pos=t},t.prototype.getAbsPos=function(){var t,e,n=c(this.item)?{width:40,height:0,x:0,y:0}:this.item.bounds;return function(t,e){return{x:t.x-e.x,y:t.y-e.y}}((t=this.pos,e=this.itemPos,{x:t.x+e.x,y:t.y+e.y}),n)},t.prototype._setItemPos=function(t){var e,n,r=this.getMinSize(),i=this.padding,o=(n=r,{x:((e=t).width-n.width)/2,y:(e.height-n.height)/2}),s=o.x,u=o.y;switch(u+=i,this.align){case"LEFT":s=i;break;case"RIGHT":s=t.width-r.width+i;break;case a:default:s+=i}this.itemPos={x:s,y:u}},t}(),v=function(){function t(e){(0,r.default)(this,t),this.rowLength=e,this.colMap={},this.keyArr=[]}return t.prototype.getColumn=function(t){var e=this.colMap,n=this.rowLength;if(void 0===e[t]){for(var r=[],i=0;i<n;i++)r[i]={items:[]};e[t]={key:t,cells:r},this.keyArr.push(t)}return e[t]},t.prototype.getCell=function(t,e){return this.getColumn(e).cells[t]},t.prototype.getColumns=function(){var t=this;return this.keyArr.map(function(e){return t.colMap[e]})},t.prototype.setKeyArr=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],e=[].concat(this.keyArr),n=[];t.forEach(function(t){var r=e.indexOf(t);r>-1&&(e.splice(r,1),n.push(t))}),this.keyArr=n.concat(e)},t.prototype.setKey=function(t,e){var n=this.keyArr.indexOf(t);this.keyArr[n]=e,this.colMap[e]=this.colMap[t],this.colMap[t]=void 0},t.prototype.changeKeyOrder=function(t,e){var n=this.keyArr.splice(t,1)[0];this.keyArr.splice(e,0,n)},t}();t.exports={Matrix:f,Container:p,Cell:g,ColumnMap:v,LEFT:"LEFT",MIDDLE:a,RIGHT:"RIGHT"}},function(t,e,n){"use strict";function r(t,e){return t[0]<=e[0]&&t[1]>=e[1]}n(1),t.exports={indexArrToRangeArr:function(t){var e=[];if(!t||0===t.length)return e;for(var n=t.concat().sort(function(t,e){return t-e}),r=n[0],i=[r],o=1;o<n.length;o++){var a=n[o];a-r==1?(r=a,o===n.length-1&&(i[1]=a,e.push(i))):(i[1]=r,e.push(i),i=[r=a])}return 1===i.length&&(i[1]=i[0],e.push(i)),e},sortRange:function(t){return t.concat().sort(function(t,e){return t[0]>e[0]?1:t[0]===e[0]?t[1]-e[1]:-1})},pickRangeContained:function(t,e){for(var n=[],i=0;i<e.length;i++)for(var o=0;o<t.length;o++)r(t[o],e[i])&&(n.push(e[i]),o=t.length);return n},isSubRange:r}},function(t,e,n){"use strict";var r=a(n(3)),i=a(n(4)),o=n(65);function a(t){return t&&t.__esModule?t:{default:t}}var s=n(5),u=n(16),c=n(9),l=n(0),h=l.EVENTS,d=l.MODULE_NAME,f=l.SERVICE_NAME,p=l.VIEW_TYPE,g=l.CLASS_TYPE,v=(s.isPassiveSupport,s.isMobile,u.View.extend({viewEvents:{dragViewMoving:"dragViewMoving",dragViewFinish:"dragViewFinish"},initialize:function(t,e,n,r){this._dragViewContainer=null,this._currentDragView=t,this._preSelectViewList=e,this._context=t.getContext(),this._svgView=this._context.getSVGView(),this._lastDragRealPosition=this._context.getSVGView().getPositionTransfer().clientToReal(n),this._lastDragClientPosition=n,this._isUseTouch=r,this._$dragCover=this._context.callService(f.GET_VIEW_PORT_COVER),this._$dragEventEl=c(document),this._moveViewPortModule=this._context.getModule(d.MOVE_VIEW_PORT),this._$dragCover.show(),this._initCloneG(),this._initEventListeners()},_initCloneG:function(){var t=this._currentDragView.type;i.default.getClassName(this._currentDragView);if(t===p.BRANCH&&g.CALLOUT_TOPIC,this._currentDragView.type===p.BRANCH){var e=[];e=-1===this._preSelectViewList.indexOf(this._currentDragView)?[this._currentDragView]:this._preSelectViewList;var n=this._context.getSheetView().getDragViewContainer();e.forEach(function(t){var e=t.getRealPosition(),r=(0,o.getTopicSVGStructureCopy)(t);r.x(e.x),r.y(e.y),n.add(r)}),this._dragViewContainer=n}else this._dragViewContainer=this._currentDragView.createDragView();this.setElement(this._dragViewContainer.get(0).node)},_initEventListeners:function(){var t=this,e=this._context.getSVGView(),n=!1,i=this._isUseTouch?"touchmove.drag":"mousemove.drag",o=this._isUseTouch?"touchend.drag":"mouseup.drag";this._currentDragView.$el&&this._currentDragView.$el.on(i,function(t){t.preventDefault()}),this._$dragEventEl.on(i,s.frameStabilize(function(i){if(!n){t._isUseTouch&&t._context.setScrollDisable();var o=t._context.getDragEventClientPosition(i,t._isUseTouch),a=e.getPositionTransfer().clientToReal(o),s=a.x-t._lastDragRealPosition.x,u=a.y-t._lastDragRealPosition.y;t._lastDragRealPosition=a,t._dmove(s,u),t._moveViewPortModule.showMouseInViewPort({x:o.x,y:o.y},null,100),t.trigger(t.viewEvents.dragViewMoving,(0,r.default)({},t._lastDragRealPosition))}},function(t){t.preventDefault(),t.stopPropagation()})),this._$dragEventEl.on(o,function(e){n=!0,t._isUseTouch&&t._context.setScrollEnable();var r=t._context.getDragEventClientPosition(e,t._isUseTouch);t._$dragEventEl.off(".drag"),t._currentDragView.$el.off(".drag"),t._$dragCover.hide(),t._context.getSheetView().clearDragViewContainer(),t._moveViewPortModule.stopMove(),t.remove(),t.trigger(t.viewEvents.dragViewFinish,t._context.getSVGView().getPositionTransfer().clientToReal({x:r.x,y:r.y}))}),this.listenTo(this._context,h.VIEW_PORT_MOVING,function(n,i){var o=e.currentScale,a=-n/o,s=-i/o;t._dmove(a,s),t._lastDragRealPosition.x+=a,t._lastDragRealPosition.y+=s,t.trigger(t.viewEvents.dragViewMoving,(0,r.default)({},t._lastDragRealPosition))})},_dmove:function(t,e){this._dragViewContainer.dmove(t,e)},getCloneG:function(){return this._dragViewContainer}}));t.exports=v},function(t,e,n){"use strict";var r=o(n(3)),i=o(n(2));function o(t){return t&&t.__esModule?t:{default:t}}var a=n(14),s=n(0),u=s.CONFIG,c=s.EVENTS,l=s.UI_STATUS,h=s.MODULE_NAME,d=n(9),f=n(5),p=function(){function t(e){(0,i.default)(this,t);var n=e.getContext();this._context=n,this._svgView=e,this._scrollContainer=n.getScrollContainer(),this._$sbContainer=d(n.getRootDOM()),this._svgContainer=e.container,this._scrollContainerSize={left:0,top:0,width:0,height:0},this._currentScrollLeft=0,this._currentScrollTop=0,this._contentBounds={x:0,y:0,width:0,height:0},this._contentScale=e.getScale()/100,this._scrollContainerCenterInRealPosition=null,this.positionTransfer=new g(this),this._paddingFactor=n.config(u.PADDING_FACTOR),this._isReCalculatingSize=!1,this._initEventListener()}return t.prototype.getScrollContainer=function(){return this._scrollContainer},t.prototype.getScrollContainerSize=function(){return(0,r.default)({},this._scrollContainerSize)},t.prototype.getSBContainerCenterPosition=function(){return{x:this._getPaddingHorizon()-this._contentBounds.x*this._contentScale,y:this._getPaddingVertical()-this._contentBounds.y*this._contentScale}},t.prototype.resetScrollContainerArea=function(){this._isReCalculatingSize=!0;var t=this._context.getSheetView().centralBranchView.topicView.topicGroup.node.getBoundingClientRect(),e=t.left+t.width/2,n=t.top+t.height/2;this._resetScrollContainerSize(),this._resetSbContainerSize();var r=this.positionTransfer.realToClient({x:0,y:0});this._isReCalculatingSize=!1,this.move(e-r.x,n-r.y)},t.prototype.fitMap=function(){this._isReCalculatingSize=!0;var t=this._scrollContainerSize.width-20,e=this._scrollContainerSize.height-20,n=this._contentBounds.width,r=this._contentBounds.height,i=Math.min(t/n,e/r,2);this._svgView.setScale(100*i),this._isReCalculatingSize=!1;var o=parseInt(this._contentBounds.x+n/2),a=parseInt(this._contentBounds.y+r/2);this.moveRealPositionToScrollContainerCenter({x:o,y:a})},t.prototype.getScrollContainerScrollLeft=function(){return this._context.isDoughnutPlatform()&&this._context.getDoughnutExportInfo().scrollLeft||this._scrollContainer.scrollLeft},t.prototype.getScrollContainerScrollTop=function(){return this._context.isDoughnutPlatform()&&this._context.getDoughnutExportInfo().scrollTop||this._scrollContainer.scrollTop},t.prototype._resetScrollContainerSize=function(){var t=d(this._scrollContainer).offset(),e={left:t.left,top:t.top,width:this._scrollContainer.clientWidth,height:this._scrollContainer.clientHeight};this._context.isMobilePlatform()&&(e.left=0,e.top=0),this._scrollContainerSize=(0,r.default)({},e)},t.prototype._initEventListener=function(){var t=this;this._initWindowResizeEventListener(),this._initScrollEventListener(),this._scrollContainer.addEventListener("mousewheel",function(e){t._onScrollContainerWheel(e)}),this._scrollContainer.addEventListener("touchmove",function(e){t._context.config(u.FAKE_IMAGE)&&e.preventDefault()}),this._svgView.on(this._svgView.lifeCircleEvents.contentMount,function(e){t._resetScrollContainerSize(),t._resetSbContainerSize(),t.moveRealPositionToScrollContainerCenter({x:0,y:0}),t._svgView.content().on("change:bounds",function(){t._context.getActiveUIStatus().includes(l.DRAG)||(t._savePrePosition(),t._resetSbContainerSize(),t._restorePrePosition())})}),this._svgView.on(this._svgView.lifeCircleEvents.scaleChanged,function(){t._savePrePosition(),t._updateContentScale(),t._resetSbContainerSize(),t._restorePrePosition()})},t.prototype._initWindowResizeEventListener=function(){var t=this;if(!this._context.config(u.NO_LISTEN_RESIZE)){var e=!1;window.addEventListener("orientationchange",function(){e=!0}),window.addEventListener("resize",function(){if(t._context.parent().getCurrentSheetEditor()===t._context&&(!t._context.isDoughnutPlatform()||e))if(e=!1,t._resetScrollContainerSize(),t._context.isMobilePlatform()){t._resetSbContainerSize();var n=t._context.getModule(h.SELECTION),r=n&&n.getSelections()[0];t._context.isDoughnutPlatform()?setTimeout(function(){t._context.execAction("focusCenter",r,!1)},200):t._context.execAction("focusCenter",r,!1)}else t.resetScrollContainerArea()})}},t.prototype._initScrollEventListener=function(){var t=this,e=this._scrollContainer,n=this.getScrollContainerScrollLeft(),r=this.getScrollContainerScrollTop();this._currentScrollLeft=n,this._currentScrollTop=r,("body"===e.tagName.toLowerCase()?document:e).addEventListener("scroll",function(i){var o=e.scrollLeft,a=e.scrollTop;t._context.trigger(c.VIEW_PORT_MOVING,n-o,r-a),n=o,r=a,t._currentScrollLeft=o,t._currentScrollTop=a})},t.prototype._onScrollContainerWheel=function(t){if(t.preventDefault(),!this._svgView.isEnableScaleByWheel(t)){var e=t.deltaX,n=t.deltaY;if(!f.isMac&&t.shiftKey&&0===Math.abs(e)){var r=[t.deltaY,t.deltaX];e=r[0],n=r[1]}!this._context.config(u.FAKE_IMAGE)&&this.move(-e,-n)}},t.prototype._updateContentBounds=function(){var t=this._context.getSheetView().bounds;a.isEqual(t,this._contentBounds)||(this._contentBounds=t)},t.prototype._updateContentScale=function(){this._contentScale=this._svgView.getScale()/100},t.prototype._getPaddingHorizon=function(){return this._scrollContainerSize.width*this._paddingFactor-100},t.prototype._getPaddingVertical=function(){return this._scrollContainerSize.height*this._paddingFactor-100},t.prototype._resetSbContainerSize=function(){this._updateContentBounds();var t=this._getPaddingHorizon(),e=this._getPaddingVertical(),n=this._contentBounds.width*this._contentScale+2*t,r=this._contentBounds.height*this._contentScale+2*e;this._$sbContainer.css({width:n,height:r});var i=this.getSBContainerCenterPosition();this._svgContainer.translate(i.x,i.y)},t.prototype._savePrePosition=function(){this._scrollContainerCenterInRealPosition=this.positionTransfer.scrollContainerToReal({x:this._scrollContainerSize.width/2,y:this._scrollContainerSize.height/2})},t.prototype._restorePrePosition=function(){if(this._scrollContainerCenterInRealPosition){var t=this._scrollContainerSize,e=t.width,n=t.height,r=this.positionTransfer.scrollContainerToReal({x:e/2,y:n/2}),i=r.x,o=r.y,a=this._scrollContainerCenterInRealPosition,s=a.x,u=a.y;this.move((i-s)*this._contentScale,(o-u)*this._contentScale)}},t.prototype.move=function(t,e){var n=this,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(!this._isReCalculatingSize)if(r.animate){var i=this._scrollContainer.scrollTop,o=this._scrollContainer.scrollLeft,a=0,s=!1;window.requestAnimationFrame(function u(){(a+=.05)>=1&&(a=1,s=!0);var c=Math.sqrt(2*a-a*a),l=t*c,h=e*c;n._scrollContainer.scrollTop=i-h,n._scrollContainer.scrollLeft=o-l,s?r.finishToRun&&r.finishToRun():window.requestAnimationFrame(u)})}else this._scrollContainer.scrollTop-=e,this._scrollContainer.scrollLeft-=t,r.finishToRun&&r.finishToRun()},t.prototype.moveRealPositionToScrollContainerCenter=function(t,e){var n=this.positionTransfer.realToScrollContainer(t),r=n.x-this._scrollContainerSize.width/2,i=n.y-this._scrollContainerSize.height/2,o=this._svgView.getDeviceNativeScale();this.move(-r/o,-i/o,{animate:e})},t}(),g=function(){function t(e){(0,i.default)(this,t),this._canvasControl=e,this._svgView=e._svgView,this._context=e._context}return t.prototype.realToRelative=function(t,e){var n=e.getRealPosition();return{x:t.x-n.x,y:t.y-n.y}},t.prototype.relativeToReal=function(t,e){var n=e.getRealPosition();return{x:t.x+n.x,y:t.y+n.y}},t.prototype.realToSbContainer=function(t){var e=this._canvasControl.getSBContainerCenterPosition();return{x:e.x+t.x*this._canvasControl._contentScale,y:e.y+t.y*this._canvasControl._contentScale}},t.prototype.sbContainerToReal=function(t){var e=this._canvasControl.getSBContainerCenterPosition();return{x:(t.x-e.x)/this._canvasControl._contentScale,y:(t.y-e.y)/this._canvasControl._contentScale}},t.prototype.realToScrollContainer=function(t){return this.sbContainerToScrollContainer(this.realToSbContainer(t))},t.prototype.scrollContainerToReal=function(t){return this.sbContainerToReal(this.scrollContainerToSbContainer(t))},t.prototype.sbContainerToScrollContainer=function(t){var e={x:t.x-this._canvasControl.getScrollContainerScrollLeft(),y:t.y-this._canvasControl.getScrollContainerScrollTop()};if(this._context.isMobilePlatform()){var n=this._svgView.getDeviceNativeScale();return{x:e.x*n,y:e.y*n}}return e},t.prototype.scrollContainerToSbContainer=function(t){if(t=(0,r.default)({},t),this._context.isMobilePlatform()){var e=this._svgView.getDeviceNativeScale();t.x=t.x/e,t.y=t.y/e}return{x:t.x+this._canvasControl.getScrollContainerScrollLeft(),y:t.y+this._canvasControl.getScrollContainerScrollTop()}},t.prototype.clientToScrollContainer=function(t){var e=this._canvasControl.getScrollContainerSize();return{x:t.x-e.left,y:t.y-e.top}},t.prototype.scrollContainerToClient=function(t){var e=this._canvasControl.getScrollContainerSize();return{x:t.x+e.left,y:t.y+e.top}},t.prototype.clientToReal=function(t){return this.scrollContainerToReal(this.clientToScrollContainer(t))},t.prototype.clientToRelative=function(t,e){return this.realToRelative(this.clientToReal(t),e)},t.prototype.realToClient=function(t){return this.scrollContainerToClient(this.realToScrollContainer(t))},t}();t.exports=p},function(t,e,n){"use strict";e.__esModule=!0;var r=s(n(45)),i=s(n(2)),o=s(n(4)),a=n(0);function s(t){return t&&t.__esModule?t:{default:t}}var u=n(20),c=n(14),l="left",h="right",d=function(){function t(e){function n(){return(new SVG.G).rect().data("name","topic-custom-width-control-bar").opacity(0).style("cursor","ew-resize")}(0,i.default)(this,t),this.topicView=e,this._minTopicWidth=0,this._startTopicWidth=0,e.getContext().isMobilePlatform()?this._barWidth=21:this._barWidth=7,this._padding=3,this._selectboxWidth=1,this.leftBarSvg=n(),this.rightBarSvg=n(),this.svg=(new SVG.G).data("name","topic-custom-width-control-bar-group"),this.svg.put(this.leftBarSvg),this.svg.put(this.rightBarSvg),this.hide()}return t.prototype.render=function(){var t=this,e=function(){var e=t.topicView,n=t._barWidth,r=t._padding,i=t._selectboxWidth,s=e.parent(),u=(parseInt(o.default.getStyleValue(s,a.STYLE_KEYS.BORDER_LINE_WIDTH)||0)+i)/2,c=t._getDrawBounds(),l=c.y-u-r+i/2,h=c.x-u-r,d=c.x+c.width+u+r;t.leftBarSvg.attr({x:h-n/2,y:l,height:c.height+2*r,width:n}),t.rightBarSvg.attr({x:d-n/2,y:l,height:c.height+2*r,width:n})};e(),this._initDraggable&&this._initDraggable(),this.render=e},t.prototype.getSvg=function(){return this.svg},t.prototype.show=function(){[a.TOPICSHAPE.DIAMOND,a.TOPICSHAPE.ELLIPSE,a.TOPICSHAPE.CLOUD].includes(this.topicView.topicShapeStyle)||this.svg.show().front()},t.prototype.hide=function(){this.svg.hide()},t.prototype.disabled=function(){},t.prototype._getNewPositionAfterChangeWidth=function(t,e){var n=this.topicView.parent().getRealPosition(),r=this.topicView.getContext().getSVGView(),i=r.getPositionTransfer().realToClient(n);return t===l?i.x-=e*r.currentScale/2:i.x+=e*r.currentScale/2,{x:r.getPositionTransfer().clientToReal(i).x,y:n.y}},t.prototype._getDrawBounds=function(t){var e=this.topicView,n=e.parent(),i=parseInt(o.default.getStyleValue(n,a.STYLE_KEYS.BORDER_LINE_WIDTH)||0),s=u[e.topicShapeStyle],l=(0,r.default)({},e.shapeBounds),h=void 0;if(n.collapse){var d=n.collapseExtendView.bounds;h=c.merge(l,d)}else h=l;if(void 0!==t){var f=t-l.width;h.width+=f}return s.getDrawBounds(h,i)},t.prototype._initDraggable=function(){var t=this,e=this.topicView.getModule(a.MODULE_NAME.SVG_DRAGGABLE);[{svg:this.leftBarSvg,side:l,target:"bar"},{svg:this.rightBarSvg,side:h,target:"bar"}].forEach(function(n){e&&e.draggable(n.svg).dragStart(t._onDragStart(n).bind(t)).dragMove(t._onDragMove(n).bind(t)).dragEnd(t._onDragEnd(n).bind(t))})},t.prototype._onDragStart=function(t){var e=this;return t.side,t.target,function(t,n){var r=e.topicView;e._minTopicWidth=r.getTopicMinWidth(),e._startTopicWidth=r.shapeBounds.width,r.parent().getSvg().front(),e.getSvg().front()}},t.prototype._onDragMove=function(t){var e=this,n=t.side,r=(t.target,n===l?this.leftBarSvg:this.rightBarSvg);return function(t,i){var s=e.topicView,c=e._minTopicWidth,h=e._barWidth,d=e._padding,f=e._selectboxWidth,p=n===l?-t.deltaX:t.deltaX,g=e._startTopicWidth+p;g>a.TOPIC_MAX_CUSTOM_WIDTH?g=a.TOPIC_MAX_CUSTOM_WIDTH:g<c&&(g=c);var v=s.parent(),m=(parseInt(o.default.getStyleValue(v,a.STYLE_KEYS.BORDER_LINE_WIDTH)||0)+f)/2,y=u[s.topicShapeStyle],_=e._getDrawBounds(g);if(n===l){var E=g-e._startTopicWidth;_.x+=-E}y.fillTopicShapeSelectBox(s,_);var A=n===l?_.x-m-d:_.x+_.width+m+d;r.attr({x:A-h/2,y:_.y-m-d+f/2})}},t.prototype._onDragEnd=function(t){var e=this,n=t.side;return t.target,function(t,r){var i=n===l?-t.deltaX:t.deltaX,o=e._startTopicWidth+i,s=e.topicView.model,u=o;if(o>a.TOPIC_MAX_CUSTOM_WIDTH?u=a.TOPIC_MAX_CUSTOM_WIDTH:o<e._minTopicWidth&&(u=e._minTopicWidth),s.isDetached()){var c=u-e._startTopicWidth,h=e._getNewPositionAfterChangeWidth(n,c);s.changePosition({x:h.x,y:h.y})}s.customWidth(u)}},t}();e.default=d},function(t,e,n){"use strict";e.__esModule=!0,e.GridLayout=e.Grid=e.StretchCell=e.Cell=e.Entity=void 0;var r=s(n(26)),i=s(n(25)),o=s(n(45)),a=s(n(2));function s(t){return t&&t.__esModule?t:{default:t}}var u={CELL:"Cell",GRID:"Grid"},c="HORIZON",l=function(){function t(e){(0,a.default)(this,t),this.layoutType=u.CELL,this.entity=e,this.pos={x:0,y:0},this.entity.bounds&&this.updateBounds()}return t.prototype.updateBounds=function(){this.layoutType===u.CELL&&(this.bounds=(0,o.default)({},this.entity.bounds()))},t.prototype.setBounds=function(t){this.bounds=(0,o.default)({},t)},t.prototype.getBounds=function(){return this.updateBounds(),(0,o.default)({},this.bounds)},t.prototype.getSize=function(){return{width:this.bounds.width,height:this.bounds.height}},t.prototype.setPosition=function(t){var e=t.x,n=t.y;void 0!==e&&(this.pos.x=e),void 0!==n&&(this.pos.y=n)},t.prototype.getPosition=function(){return(0,o.default)({},this.pos)},t.prototype.move=function(t,e){this.entity.move(t,e)},t}(),h=function(t){function e(n,i){(0,a.default)(this,e);var o=(0,r.default)(this,t.call(this,n));return o.setWidthFn=i,o}return(0,i.default)(e,t),e}(l),d=function(t){function e(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},i=n.entity,o=n.align,s=n.direction,c=n.childSpacing,l=n.padding,h=n.children,d=void 0===h?[]:h,f=n.boundsXY;(0,a.default)(this,e);var p=(0,r.default)(this,t.call(this,i));return p.layoutType=u.GRID,p.align=o,p.direction=s,p.children=d,p.childSpacing=c,p.padding=l,p.boundsXY=f,p}return(0,i.default)(e,t),e}(l);d.alignOption={LEFT:"LEFT",MIDDLE:"MIDDLE",RIGHT:"RIGHT"},d.directionOption={HORIZON:"HORIZON",VERTICAL:"VERTICAL"};var f=function(){function t(){(0,a.default)(this,t)}return t.prototype.computeSize=function(t){return t.layoutType===u.CELL?t.getBounds():t.layoutType===u.GRID?this._layout(t):void 0},t.prototype._layout=function(t){var e=this,n=t.children,r=t.align,i=t.direction,a=t.childSpacing,s=t.boundsXY,u=t.padding,c=n.map(function(t){return e.computeSize(t)}),l=(0,this._getAlignFn(r,i).getBounds)(c,a);if(l=s?s(l):this._convertC((0,o.default)({},l,{x:0,y:0})),(0,this._getAlignFn(r,i).locateChild)(n,l,a),u){var h=u(l);l=(0,o.default)({},h,this._addPadding(l,h))}return t.bounds=l,l},t.prototype._addPadding=function(t,e){var n=e.top,r=e.bottom,i=e.left,o=e.right;return{x:t.x-i,y:t.y-n,width:t.width+i+o,height:t.height+n+r}},t.prototype._convertC=function(t){var e=t.x,n=t.y,r=t.width,i=t.height;return{x:e-r/2,y:n-i/2,width:r,height:i}},t.prototype._getChildPlace=function(t,e){var n=t.x,r=t.y;return{x:n-(e.x||0),y:r-(e.y||0)}},t.prototype._locateHorizonC=function(t){var e=this;return function(n,r,i){var o=r.x;n.forEach(function(n){!function(n){var a=t(r,n),s=e._getChildPlace({x:o,y:a},n.bounds),u=s.x,c=s.y;n.setPosition({x:u,y:c}),n.bounds.width>0&&(o+=n.bounds.width+i)}(n.elem?n.elem:n)})}},t.prototype._locateVerticalC=function(t){var e=this;return function(n,r,i){var o=r.y;n.forEach(function(n){!function(n){var a=t(r,n),s=e._getChildPlace({x:a,y:o},n.bounds),u=s.x,c=s.y;n.setPosition({x:u,y:c}),n.bounds.height>0&&(o+=n.bounds.height+i)}(n.elem?n.elem:n)})}},t.prototype._locateFn=function(t){var e;return((e={})[c]=[this._locateHorizonC(function(t){return t.y}),this._locateHorizonC(function(t,e){return t.y+(t.height-e.bounds.height)/2}),this._locateHorizonC(function(t,e){return t.y+t.height-e.bounds.height})],e.VERTICAL=[this._locateVerticalC(function(t){return t.x}),this._locateVerticalC(function(t,e){return t.x+(t.width-e.bounds.width)/2}),this._locateVerticalC(function(t,e){return t.x+t.width-e.bounds.width})],e)[t]},t.prototype._getHorizonArrBounds=function(t,e){if(0===t.length)return{width:0,height:0};var n=Math.max.apply(Math,t.map(function(t){return t.height}));return{width:t.map(function(t){return t.width}).reduce(function(t,n){return t+(t>0&&n>0?e:0)+n}),height:n}},t.prototype._getVerticalArrBounds=function(t,e){return 0===t.length?{width:0,height:0}:{width:Math.max.apply(Math,t.map(function(t){return t.width})),height:t.map(function(t){return t.height}).reduce(function(t,n){return t+(t>0&&n>0?e:0)+n})}},t.prototype._getAlignFn=function(t,e){var n,r=((n={}).LEFT=0,n.MIDDLE=1,n.RIGHT=2,n);return{getBounds:e===c?this._getHorizonArrBounds:this._getVerticalArrBounds,locateChild:this._locateFn(e)[r[t]]}},t}();e.Entity=function t(e){var n=e.bounds,r=e.move;(0,a.default)(this,t),this.bounds=n,this.move=r},e.Cell=l,e.StretchCell=h,e.Grid=d,e.GridLayout=f},function(t,e,n){"use strict";e.__esModule=!0;var r=s(n(38)),i=s(n(4)),o=n(0),a=s(n(152));function s(t){return t&&t.__esModule?t:{default:t}}var u=s(n(21)).default.extend({type:o.VIEW_TYPE.MARKERS,initialize:function(t,e){this.markersInfo=t,this.parent(e);var n,a,s=(n=e.parent(),a=i.default.getStyleValue(n,o.STYLE_KEYS.FONT_SIZE)||0,(0,r.default)(a));this.iconSize=s,this.markerMap=this.getModule(o.MODULE_NAME.MARKER_MAP),this.initSVGStructure(),this.layoutIcons()},initSVGStructure:function(){this.s$informationIconsGroup=(new SVG.G).attr("data","markers-group"),this.initMarkers()},initMarkers:function(){var t=this.markerMap,e=this.markersInfo,n=this.iconSize,r=e.map(function(t){return t.get("markerId")});r.sort(function(e,n){return t.indexOf(e)-t.indexOf(n)}),this.markerIdList=r;for(var i=r.length-1;i>=0;i--){var o=r[i],s=new a.default(o,t,n);s.parent(this),this.s$informationIconsGroup.add(s.getSvg()),this[o]=s}this[r[0]].setStable(!0)},layoutIcons:function(){var t=this,e=this.markerIdList,n=this.iconSize,r=n*(5/6);e.forEach(function(e,n){var i=t[e],o=r*n;i.getSvg().x(o)});var i=n+r*(e.length-1);this.bounds={x:0,y:0,width:i,height:this.iconSize}},remove:function(){var t=this;this.markerIdList.forEach(function(e){return t[e].remove()}),this.getSvg().remove()},getSvg:function(){return this.s$informationIconsGroup},move:function(t,e){this.getSvg().translate(t,e)}});e.default=u},function(t,e,n){"use strict";e.__esModule=!0;var r,i=(r=n(4))&&r.__esModule?r:{default:r},o=n(81),a=n(8),s=o.extend({type:"RELATIONSHIP_TITLE",initialize:function(){this._init({calTextAlignOffset:!0}),this.getTextSvg().data("name","relationship-title").style({cursor:"default","pointer-events":"none"})},render:function(){var t=this.parent(),e=this.getContext().getTranslatedText("DEFAULT_RELATIONSHIP_TITLE"),n=t.model.get("title")||e,r=i.default.getFontInfo(t);this._render(n,r)},_getResolveText:function(t){var e=this.parent().getTextTransform();return a.getTransformedText(t,e).split("\n").join(" ")}});e.default=s},function(t,e,n){"use strict";(function(e){var r=o(n(3)),i=o(n(11));function o(t){return t&&t.__esModule?t:{default:t}}var a=n(21),s=e.SVG,u=n(0),c=u.SERVICE_NAME,l=u.MODULE_NAME,h={lt:"rb",lm:"rm",lb:"rt",ct:"cb",cb:"ct",rt:"lb",rm:"lm",rb:"lt"},d={l:-1,c:0,r:1,t:-1,m:0,b:1},f={lt:"nwse-resize",lb:"nesw-resize",rt:"nesw-resize",rb:"nwse-resize"},p=a.extend({type:"resizebox",__style:{fullBox:{"stroke-width":"1",stroke:"#2ebdff"},fullBox__show:{fill:"#2ebdff","fill-opacity":"0.3"},fullBox__active:{fill:"none"},anchor:{stroke:"#2ebdff","stroke-width":1,opacity:"0"},anchor__active:{fill:"#2ebdff",stroke:"#2ebdff",opacity:"1"},avatarImage:{opacity:"0.5"}},initialize:function(t){var e=this,n=t.originImage,r=t.refView;this.refView=r,this.svg=(new s.G).data("name","resize-box").hide(),this.originImage=n,this.box=this.svg.rect().data("name","fullBox"),this.style(this.box,"fullBox");var o=function(t){return e.svg.group().style("cursor",t)};this.anchors={lt:o("nwse-resize"),lb:o("nesw-resize"),rt:o("nesw-resize"),rb:o("nwse-resize")},this.anchorBtns={},(0,i.default)(this.anchors).forEach(function(t){var n=e.anchors[t];n.rect().size(16,16).opacity(0),e.anchorBtns[t]=n.rect().size(8,8).translate(4,4)}),this.styleAnchors("anchor"),this.isActive=!1,this.firstActive=!1,this.width=0,this.height=0,this.centerX=0,this.centerY=0,this.cdd=""},distance:function(t,e){return Math.max(Math.max(30,d[this.cdd[0]]*(t.x-e.x)),Math.max(30,d[this.cdd[1]]*(t.y-e.y)))},getShrinked:function(t,e,n){return{x:t.x+d[this.cdd[0]]*e,y:t.y+d[this.cdd[1]]*n}},prepareAvatar:function(){this.avatarContainer=(new s.G).data("name","resize-box-avatar").hide();var t=this.originImage.attr();for(var e in delete t.id,this.cloneImage=this.avatarContainer.image().attr(t),this.style(this.cloneImage,"avatarImage"),this.avatarContainer.use(this.box),this.anchors)this.avatarContainer.use(this.anchors[e]);this.refView.editDomain().content().otherContainer.add(this.avatarContainer)},showAvatar:function(){this.avatarContainer.show(),this.uniformPosition()},hideAvatar:function(){this.avatarContainer.hide()},uniformPosition:function(){var t=this.refView.parent(),e=t.parent().getRealPosition(),n=e.x,r=e.y,i=this.refView.position,o=i.x,a=i.y;this.avatarContainer.translate(n+o,r+a);var s=t.topicGroup.transform(),u=s.rotation,c=s.cx,l=s.cy;this.avatarContainer.rotate(u,c+n,l+r),this.rotation=u},initAnchorsDraggable:function(){var t=this,e=0,n=null,o=null,a=this.width,s=this.height,u=void 0,p=void 0,g=void 0,v=function(i,c){var l,h=void 0,f=void 0,g=void 0;if(t.rotation){var v=i.deltaX*u+i.deltaY*p,m=-i.deltaX*p+i.deltaY*u;(h=(0,r.default)({},n)).x+=v,h.y+=m}else h=i;if(c.shiftKey)f=Math.max(30,d[t.cdd[0]]*(h.x-o.x)),g=Math.max(30,d[t.cdd[1]]*(h.y-o.y));else{var y=t.distance(h,o)/e;f=Math.ceil(a*y),g=Math.ceil(s*y)}var _=f-a,E=g-s;l=t.getShrinked(n,_,E),t.centerX=(l.x+o.x)/2,t.centerY=(l.y+o.y)/2,t.width=f,t.height=g,t.render()},m=function(e,n){g.hide(),g.css("cursor",""),t.centerX=t.centerY=0,t.trigger("resize",{width:t.width,height:t.height}),t.hideAvatar()},y=this.getModule(l.SVG_DRAGGABLE);y&&(0,i.default)(this.anchors).forEach(function(r){var i;y.draggable(t.anchors[r]).dragStart((i=r,function(r,l){if((g=t.callService(c.GET_VIEW_PORT_COVER)).show(),g.css("cursor",f[i]),t.cdd=i,n=t.getCornerPosition(i),o=t.getCornerPosition(h[i]),e=t.distance(n,o),a=t.width,s=t.height,t.showAvatar(),t.rotation){var d=t.rotation/180*Math.PI;u=Math.cos(d),p=Math.sin(d)}})).dragMove(v).dragEnd(m)})},size:function(t,e){this.width=t,this.height=e,this.render()},getCornerPosition:function(t){var e=this.width,n=this.height,r={l:-e/2+this.centerX,m:this.centerY,r:e/2+this.centerX,t:-n/2+this.centerY,c:this.centerY,b:n/2+this.centerY};return{x:r[t[0]],y:r[t[1]]}},show:function(){this.svg.show(),this.style(this.box,"fullBox__show")},active:function(){this.isActive=!0,this.firstActive||(this.firstActive=!0,this.initAnchorsDraggable(),this.prepareAvatar()),this.svg.show(),this.style(this.box,"fullBox__active"),this.styleAnchors("anchor__active")},hide:function(){this.isActive=!1,this.styleAnchors("anchor"),this.svg.hide()},remove:function(){this.avatarContainer&&this.avatarContainer.remove(),this.svg.remove()},styleAnchors:function(t){for(var e in this.anchorBtns)this.style(this.anchorBtns[e],t)},render:function(){var t=this.width,e=this.height,n=this.centerX,r=this.centerY;this.box.size(t,e).center(n,r);var i={l:-t/2+this.centerX,m:this.centerY,r:t/2+this.centerX,t:-e/2+this.centerY,c:this.centerX,b:e/2+this.centerY};for(var o in this.anchors)this.anchors[o].center(i[o[0]],i[o[1]]);this.cloneImage&&this.cloneImage.size(t,e).center(n,r)}});t.exports=p}).call(e,n(6))},function(t,e,n){"use strict";(function(e){var r=o(n(45)),i=o(n(4));function o(t){return t&&t.__esModule?t:{default:t}}var a=n(81),s=n(0).VIEW_TYPE,u=n(8),c=n(0),l=c.SERVICE_NAME,h=c.CLASS_TYPE,d=e.SVG,f=a.extend({type:s.TITLE,initialize:function(){this._init(),this.titleTextGroup=(new d.G).data("name","topic-title-text-group"),this.titleText=this.getTextSvg(),this.titleTextGroup.put(this.titleText),this._titleWidth=0},render:function(){var t=this.parent(),e=t.parent(),n=t.model,o=i.default.getFontInfo(e),a=n.get("title")||"";if(""===a&&t.image){var s=1.3*parseInt(o.fontSize||0);return this.textSvg.text(""),this.bounds={x:0,y:s/2,width:0,height:0},void(this.titleWidth()&&(this.bounds=(0,r.default)({},this.bounds,{width:this.titleWidth()})))}i.default.getClassName(t)!==h.SUB_TOPIC||a||(a="    "),this._render(a,o),this.titleWidth()&&(this.bounds=(0,r.default)({},this.bounds,{width:this.titleWidth()}))},_getResolveText:function(t,e){var n=this.parent().getTextTransform(),r=u.getTransformedText(t,n);return(this.titleWidth()?this.callService(l.RESOLVE_STR,r,e,this.titleWidth()):this.callService(l.RESOLVE_STR,r,e)).join("\n")},getSvg:function(){return this.titleTextGroup},titleWidth:function(t){if(void 0===t)return this._titleWidth;this._titleWidth=t}});t.exports=f}).call(e,n(6))},function(t,e,n){t.exports={default:n(349),__esModule:!0}},function(t,e,n){t.exports={default:n(352),__esModule:!0}},function(t,e,n){t.exports={default:n(353),__esModule:!0}},function(t,e,n){t.exports={default:n(354),__esModule:!0}},function(t,e,n){t.exports={default:n(356),__esModule:!0}},function(t,e,n){t.exports={default:n(359),__esModule:!0}},function(t,e,n){"use strict";e.__esModule=!0;var r,i=(r=n(340))&&r.__esModule?r:{default:r};e.default=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),(0,i.default)(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}()},function(t,e,n){"use strict";e.byteLength=function(t){return 3*t.length/4-c(t)},e.toByteArray=function(t){var e,n,r,a,s,u=t.length;a=c(t),s=new o(3*u/4-a),n=a>0?u-4:u;var l=0;for(e=0;e<n;e+=4)r=i[t.charCodeAt(e)]<<18|i[t.charCodeAt(e+1)]<<12|i[t.charCodeAt(e+2)]<<6|i[t.charCodeAt(e+3)],s[l++]=r>>16&255,s[l++]=r>>8&255,s[l++]=255&r;return 2===a?(r=i[t.charCodeAt(e)]<<2|i[t.charCodeAt(e+1)]>>4,s[l++]=255&r):1===a&&(r=i[t.charCodeAt(e)]<<10|i[t.charCodeAt(e+1)]<<4|i[t.charCodeAt(e+2)]>>2,s[l++]=r>>8&255,s[l++]=255&r),s},e.fromByteArray=function(t){for(var e,n=t.length,i=n%3,o="",a=[],s=0,u=n-i;s<u;s+=16383)a.push(l(t,s,s+16383>u?u:s+16383));return 1===i?(e=t[n-1],o+=r[e>>2],o+=r[e<<4&63],o+="=="):2===i&&(e=(t[n-2]<<8)+t[n-1],o+=r[e>>10],o+=r[e>>4&63],o+=r[e<<2&63],o+="="),a.push(o),a.join("")};for(var r=[],i=[],o="undefined"!=typeof Uint8Array?Uint8Array:Array,a="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",s=0,u=a.length;s<u;++s)r[s]=a[s],i[a.charCodeAt(s)]=s;function c(t){var e=t.length;if(e%4>0)throw new Error("Invalid string. Length must be a multiple of 4");return"="===t[e-2]?2:"="===t[e-1]?1:0}function l(t,e,n){for(var i,o,a=[],s=e;s<n;s+=3)i=(t[s]<<16)+(t[s+1]<<8)+t[s+2],a.push(r[(o=i)>>18&63]+r[o>>12&63]+r[o>>6&63]+r[63&o]);return a.join("")}i["-".charCodeAt(0)]=62,i["_".charCodeAt(0)]=63},function(t,e,n){n(88),n(383),t.exports=n(15).Array.from},function(t,e,n){n(115),n(88),t.exports=n(382)},function(t,e,n){var r=n(15),i=r.JSON||(r.JSON={stringify:JSON.stringify});t.exports=function(t){return i.stringify.apply(i,arguments)}},function(t,e,n){n(385),t.exports=n(15).Math.hypot},function(t,e,n){n(386),t.exports=parseInt},function(t,e,n){n(387),t.exports=n(15).Object.assign},function(t,e,n){n(388);var r=n(15).Object;t.exports=function(t,e){return r.create(t,e)}},function(t,e,n){n(389);var r=n(15).Object;t.exports=function(t,e,n){return r.defineProperty(t,e,n)}},function(t,e,n){n(390),t.exports=n(15).Object.getPrototypeOf},function(t,e,n){n(391),t.exports=n(15).Object.keys},function(t,e,n){n(392),t.exports=n(15).Object.setPrototypeOf},function(t,e,n){n(179),n(88),n(115),n(393),n(395),n(396),t.exports=n(15).Promise},function(t,e,n){n(394),n(179),n(397),n(398),t.exports=n(15).Symbol},function(t,e,n){n(88),n(115),t.exports=n(113).f("iterator")},function(t,e){t.exports=function(){}},function(t,e){t.exports=function(t,e,n,r){if(!(t instanceof e)||void 0!==r&&r in t)throw TypeError(n+": incorrect invocation!");return t}},function(t,e,n){var r=n(57),i=n(110),o=n(381);t.exports=function(t){return function(e,n,a){var s,u=r(e),c=i(u.length),l=o(a,c);if(t&&n!=n){for(;c>l;)if((s=u[l++])!=s)return!0}else for(;c>l;l++)if((t||l in u)&&u[l]===n)return t||l||0;return!t&&-1}}},function(t,e,n){"use strict";var r=n(39),i=n(71);t.exports=function(t,e,n){e in t?r.f(t,e,i(0,n)):t[e]=n}},function(t,e,n){var r=n(70),i=n(106),o=n(85);t.exports=function(t){var e=r(t),n=i.f;if(n)for(var a,s=n(t),u=o.f,c=0;s.length>c;)u.call(t,a=s[c++])&&e.push(a);return e}},function(t,e,n){var r=n(56),i=n(165),o=n(164),a=n(36),s=n(110),u=n(114),c={},l={};(e=t.exports=function(t,e,n,h,d){var f,p,g,v,m=d?function(){return t}:u(t),y=r(n,h,e?2:1),_=0;if("function"!=typeof m)throw TypeError(t+" is not iterable!");if(o(m)){for(f=s(t.length);f>_;_++)if((v=e?y(a(p=t[_])[0],p[1]):y(t[_]))===c||v===l)return v}else for(g=m.call(t);!(p=g.next()).done;)if((v=i(g,y,p.value,e))===c||v===l)return v}).BREAK=c,e.RETURN=l},function(t,e){t.exports=function(t,e,n){var r=void 0===n;switch(e.length){case 0:return r?t():t.call(n);case 1:return r?t(e[0]):t.call(n,e[0]);case 2:return r?t(e[0],e[1]):t.call(n,e[0],e[1]);case 3:return r?t(e[0],e[1],e[2]):t.call(n,e[0],e[1],e[2]);case 4:return r?t(e[0],e[1],e[2],e[3]):t.call(n,e[0],e[1],e[2],e[3])}return t.apply(n,e)}},function(t,e,n){var r=n(68);t.exports=Array.isArray||function(t){return"Array"==r(t)}},function(t,e,n){"use strict";var r=n(105),i=n(71),o=n(86),a={};n(48)(a,n(27)("iterator"),function(){return this}),t.exports=function(t,e,n){t.prototype=r(a,{next:i(1,n)}),o(t,e+" Iterator")}},function(t,e){t.exports=function(t,e){return{value:e,done:!!t}}},function(t,e,n){var r=n(87)("meta"),i=n(41),o=n(47),a=n(39).f,s=0,u=Object.isExtensible||function(){return!0},c=!n(46)(function(){return u(Object.preventExtensions({}))}),l=function(t){a(t,r,{value:{i:"O"+ ++s,w:{}}})},h=t.exports={KEY:r,NEED:!1,fastKey:function(t,e){if(!i(t))return"symbol"==typeof t?t:("string"==typeof t?"S":"P")+t;if(!o(t,r)){if(!u(t))return"F";if(!e)return"E";l(t)}return t[r].i},getWeak:function(t,e){if(!o(t,r)){if(!u(t))return!0;if(!e)return!1;l(t)}return t[r].w},onFreeze:function(t){return c&&h.NEED&&u(t)&&!o(t,r)&&l(t),t}}},function(t,e,n){var r=n(24),i=n(178).set,o=r.MutationObserver||r.WebKitMutationObserver,a=r.process,s=r.Promise,u="process"==n(68)(a);t.exports=function(){var t,e,n,c=function(){var r,i;for(u&&(r=a.domain)&&r.exit();t;){i=t.fn,t=t.next;try{i()}catch(r){throw t?n():e=void 0,r}}e=void 0,r&&r.enter()};if(u)n=function(){a.nextTick(c)};else if(!o||r.navigator&&r.navigator.standalone)if(s&&s.resolve){var l=s.resolve();n=function(){l.then(c)}}else n=function(){i.call(r,c)};else{var h=!0,d=document.createTextNode("");new o(c).observe(d,{characterData:!0}),n=function(){d.data=h=!h}}return function(r){var i={fn:r,next:void 0};e&&(e.next=i),t||(t=i,n()),e=i}}},function(t,e,n){"use strict";var r=n(70),i=n(106),o=n(85),a=n(72),s=n(163),u=Object.assign;t.exports=!u||n(46)(function(){var t={},e={},n=Symbol(),r="abcdefghijklmnopqrst";return t[n]=7,r.split("").forEach(function(t){e[t]=t}),7!=u({},t)[n]||Object.keys(u({},e)).join("")!=r})?function(t,e){for(var n=a(t),u=arguments.length,c=1,l=i.f,h=o.f;u>c;)for(var d,f=s(arguments[c++]),p=l?r(f).concat(l(f)):r(f),g=p.length,v=0;g>v;)h.call(f,d=p[v++])&&(n[d]=f[d]);return n}:u},function(t,e,n){var r=n(39),i=n(36),o=n(70);t.exports=n(40)?Object.defineProperties:function(t,e){i(t);for(var n,a=o(e),s=a.length,u=0;s>u;)r.f(t,n=a[u++],e[n]);return t}},function(t,e,n){var r=n(57),i=n(169).f,o={}.toString,a="object"==typeof window&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[];t.exports.f=function(t){return a&&"[object Window]"==o.call(t)?function(t){try{return i(t)}catch(t){return a.slice()}}(t):i(r(t))}},function(t,e,n){var r=n(24).parseInt,i=n(380).trim,o=n(177),a=/^[-+]?0[xX]/;t.exports=8!==r(o+"08")||22!==r(o+"0x16")?function(t,e){var n=i(String(t),3);return r(n,e>>>0||(a.test(n)?16:10))}:r},function(t,e,n){var r=n(48);t.exports=function(t,e,n){for(var i in e)n&&t[i]?t[i]=e[i]:r(t,i,e[i]);return t}},function(t,e,n){var r=n(41),i=n(36),o=function(t,e){if(i(t),!r(e)&&null!==e)throw TypeError(e+": can't set as prototype!")};t.exports={set:Object.setPrototypeOf||("__proto__"in{}?function(t,e,r){try{(r=n(56)(Function.call,n(168).f(Object.prototype,"__proto__").set,2))(t,[]),e=!(t instanceof Array)}catch(t){e=!0}return function(t,n){return o(t,n),e?t.__proto__=n:r(t,n),t}}({},!1):void 0),check:o}},function(t,e,n){"use strict";var r=n(24),i=n(15),o=n(39),a=n(40),s=n(27)("species");t.exports=function(t){var e="function"==typeof i[t]?i[t]:r[t];a&&e&&!e[s]&&o.f(e,s,{configurable:!0,get:function(){return this}})}},function(t,e,n){var r=n(109),i=n(83);t.exports=function(t){return function(e,n){var o,a,s=String(i(e)),u=r(n),c=s.length;return u<0||u>=c?t?"":void 0:(o=s.charCodeAt(u))<55296||o>56319||u+1===c||(a=s.charCodeAt(u+1))<56320||a>57343?t?s.charAt(u):o:t?s.slice(u,u+2):a-56320+(o-55296<<10)+65536}}},function(t,e,n){var r=n(23),i=n(83),o=n(46),a=n(177),s="["+a+"]",u=RegExp("^"+s+s+"*"),c=RegExp(s+s+"*$"),l=function(t,e,n){var i={},s=o(function(){return!!a[t]()||""!=""[t]()}),u=i[t]=s?e(h):a[t];n&&(i[n]=u),r(r.P+r.F*s,"String",i)},h=l.trim=function(t,e){return t=String(i(t)),1&e&&(t=t.replace(u,"")),2&e&&(t=t.replace(c,"")),t};t.exports=l},function(t,e,n){var r=n(109),i=Math.max,o=Math.min;t.exports=function(t,e){return(t=r(t))<0?i(t+e,0):o(t,e)}},function(t,e,n){var r=n(36),i=n(114);t.exports=n(15).getIterator=function(t){var e=i(t);if("function"!=typeof e)throw TypeError(t+" is not iterable!");return r(e.call(t))}},function(t,e,n){"use strict";var r=n(56),i=n(23),o=n(72),a=n(165),s=n(164),u=n(110),c=n(363),l=n(114);i(i.S+i.F*!n(167)(function(t){Array.from(t)}),"Array",{from:function(t){var e,n,i,h,d=o(t),f="function"==typeof this?this:Array,p=arguments.length,g=p>1?arguments[1]:void 0,v=void 0!==g,m=0,y=l(d);if(v&&(g=r(g,p>2?arguments[2]:void 0,2)),void 0==y||f==Array&&s(y))for(n=new f(e=u(d.length));e>m;m++)c(n,m,v?g(d[m],m):d[m]);else for(h=y.call(d),n=new f;!(i=h.next()).done;m++)c(n,m,v?a(h,g,[i.value,m],!0):i.value);return n.length=m,n}})},function(t,e,n){"use strict";var r=n(360),i=n(369),o=n(69),a=n(57);t.exports=n(166)(Array,"Array",function(t,e){this._t=a(t),this._i=0,this._k=e},function(){var t=this._t,e=this._k,n=this._i++;return!t||n>=t.length?(this._t=void 0,i(1)):i(0,"keys"==e?n:"values"==e?t[n]:[n,t[n]])},"values"),o.Arguments=o.Array,r("keys"),r("values"),r("entries")},function(t,e,n){var r=n(23),i=Math.abs;r(r.S,"Math",{hypot:function(t,e){for(var n,r,o=0,a=0,s=arguments.length,u=0;a<s;)u<(n=i(arguments[a++]))?(o=o*(r=u/n)*r+1,u=n):o+=n>0?(r=n/u)*r:n;return u===1/0?1/0:u*Math.sqrt(o)}})},function(t,e,n){var r=n(23),i=n(375);r(r.S+r.F*(Number.parseInt!=i),"Number",{parseInt:i})},function(t,e,n){var r=n(23);r(r.S+r.F,"Object",{assign:n(372)})},function(t,e,n){var r=n(23);r(r.S,"Object",{create:n(105)})},function(t,e,n){var r=n(23);r(r.S+r.F*!n(40),"Object",{defineProperty:n(39).f})},function(t,e,n){var r=n(72),i=n(170);n(172)("getPrototypeOf",function(){return function(t){return i(r(t))}})},function(t,e,n){var r=n(72),i=n(70);n(172)("keys",function(){return function(t){return i(r(t))}})},function(t,e,n){var r=n(23);r(r.S,"Object",{setPrototypeOf:n(377).set})},function(t,e,n){"use strict";var r,i,o,a,s=n(84),u=n(24),c=n(56),l=n(160),h=n(23),d=n(41),f=n(82),p=n(361),g=n(365),v=n(176),m=n(178).set,y=n(371)(),_=n(104),E=n(173),A=n(174),S=u.TypeError,T=u.process,x=u.Promise,b="process"==l(T),w=function(){},C=i=_.f,I=!!function(){try{var t=x.resolve(1),e=(t.constructor={})[n(27)("species")]=function(t){t(w,w)};return(b||"function"==typeof PromiseRejectionEvent)&&t.then(w)instanceof e}catch(t){}}(),L=function(t){var e;return!(!d(t)||"function"!=typeof(e=t.then))&&e},N=function(t,e){if(!t._n){t._n=!0;var n=t._c;y(function(){for(var r=t._v,i=1==t._s,o=0,a=function(e){var n,o,a=i?e.ok:e.fail,s=e.resolve,u=e.reject,c=e.domain;try{a?(i||(2==t._h&&M(t),t._h=1),!0===a?n=r:(c&&c.enter(),n=a(r),c&&c.exit()),n===e.promise?u(S("Promise-chain cycle")):(o=L(n))?o.call(n,s,u):s(n)):u(r)}catch(t){u(t)}};n.length>o;)a(n[o++]);t._c=[],t._n=!1,e&&!t._h&&O(t)})}},O=function(t){m.call(u,function(){var e,n,r,i=t._v,o=R(t);if(o&&(e=E(function(){b?T.emit("unhandledRejection",i,t):(n=u.onunhandledrejection)?n({promise:t,reason:i}):(r=u.console)&&r.error&&r.error("Unhandled promise rejection",i)}),t._h=b||R(t)?2:1),t._a=void 0,o&&e.e)throw e.v})},R=function(t){return 1!==t._h&&0===(t._a||t._c).length},M=function(t){m.call(u,function(){var e;b?T.emit("rejectionHandled",t):(e=u.onrejectionhandled)&&e({promise:t,reason:t._v})})},D=function(t){var e=this;e._d||(e._d=!0,(e=e._w||e)._v=t,e._s=2,e._a||(e._a=e._c.slice()),N(e,!0))},P=function(t){var e,n=this;if(!n._d){n._d=!0,n=n._w||n;try{if(n===t)throw S("Promise can't be resolved itself");(e=L(t))?y(function(){var r={_w:n,_d:!1};try{e.call(t,c(P,r,1),c(D,r,1))}catch(t){D.call(r,t)}}):(n._v=t,n._s=1,N(n,!1))}catch(t){D.call({_w:n,_d:!1},t)}}};I||(x=function(t){p(this,x,"Promise","_h"),f(t),r.call(this);try{t(c(P,this,1),c(D,this,1))}catch(t){D.call(this,t)}},(r=function(t){this._c=[],this._a=void 0,this._s=0,this._d=!1,this._v=void 0,this._h=0,this._n=!1}).prototype=n(376)(x.prototype,{then:function(t,e){var n=C(v(this,x));return n.ok="function"!=typeof t||t,n.fail="function"==typeof e&&e,n.domain=b?T.domain:void 0,this._c.push(n),this._a&&this._a.push(n),this._s&&N(this,!1),n.promise},catch:function(t){return this.then(void 0,t)}}),o=function(){var t=new r;this.promise=t,this.resolve=c(P,t,1),this.reject=c(D,t,1)},_.f=C=function(t){return t===x||t===a?new o(t):i(t)}),h(h.G+h.W+h.F*!I,{Promise:x}),n(86)(x,"Promise"),n(378)("Promise"),a=n(15).Promise,h(h.S+h.F*!I,"Promise",{reject:function(t){var e=C(this);return(0,e.reject)(t),e.promise}}),h(h.S+h.F*(s||!I),"Promise",{resolve:function(t){return A(s&&this===a?x:this,t)}}),h(h.S+h.F*!(I&&n(167)(function(t){x.all(t).catch(w)})),"Promise",{all:function(t){var e=this,n=C(e),r=n.resolve,i=n.reject,o=E(function(){var n=[],o=0,a=1;g(t,!1,function(t){var s=o++,u=!1;n.push(void 0),a++,e.resolve(t).then(function(t){u||(u=!0,n[s]=t,--a||r(n))},i)}),--a||r(n)});return o.e&&i(o.v),n.promise},race:function(t){var e=this,n=C(e),r=n.reject,i=E(function(){g(t,!1,function(t){e.resolve(t).then(n.resolve,r)})});return i.e&&r(i.v),n.promise}})},function(t,e,n){"use strict";var r=n(24),i=n(47),o=n(40),a=n(23),s=n(175),u=n(370).KEY,c=n(46),l=n(108),h=n(86),d=n(87),f=n(27),p=n(113),g=n(112),v=n(364),m=n(367),y=n(36),_=n(41),E=n(57),A=n(111),S=n(71),T=n(105),x=n(374),b=n(168),w=n(39),C=n(70),I=b.f,L=w.f,N=x.f,O=r.Symbol,R=r.JSON,M=R&&R.stringify,D=f("_hidden"),P=f("toPrimitive"),k={}.propertyIsEnumerable,B=l("symbol-registry"),F=l("symbols"),V=l("op-symbols"),U=Object.prototype,H="function"==typeof O,Y=r.QObject,G=!Y||!Y.prototype||!Y.prototype.findChild,j=o&&c(function(){return 7!=T(L({},"a",{get:function(){return L(this,"a",{value:7}).a}})).a})?function(t,e,n){var r=I(U,e);r&&delete U[e],L(t,e,n),r&&t!==U&&L(U,e,r)}:L,z=function(t){var e=F[t]=T(O.prototype);return e._k=t,e},W=H&&"symbol"==typeof O.iterator?function(t){return"symbol"==typeof t}:function(t){return t instanceof O},K=function(t,e,n){return t===U&&K(V,e,n),y(t),e=A(e,!0),y(n),i(F,e)?(n.enumerable?(i(t,D)&&t[D][e]&&(t[D][e]=!1),n=T(n,{enumerable:S(0,!1)})):(i(t,D)||L(t,D,S(1,{})),t[D][e]=!0),j(t,e,n)):L(t,e,n)},Q=function(t,e){y(t);for(var n,r=v(e=E(e)),i=0,o=r.length;o>i;)K(t,n=r[i++],e[n]);return t},q=function(t){var e=k.call(this,t=A(t,!0));return!(this===U&&i(F,t)&&!i(V,t))&&(!(e||!i(this,t)||!i(F,t)||i(this,D)&&this[D][t])||e)},X=function(t,e){if(t=E(t),e=A(e,!0),t!==U||!i(F,e)||i(V,e)){var n=I(t,e);return!n||!i(F,e)||i(t,D)&&t[D][e]||(n.enumerable=!0),n}},$=function(t){for(var e,n=N(E(t)),r=[],o=0;n.length>o;)i(F,e=n[o++])||e==D||e==u||r.push(e);return r},J=function(t){for(var e,n=t===U,r=N(n?V:E(t)),o=[],a=0;r.length>a;)!i(F,e=r[a++])||n&&!i(U,e)||o.push(F[e]);return o};H||(s((O=function(){if(this instanceof O)throw TypeError("Symbol is not a constructor!");var t=d(arguments.length>0?arguments[0]:void 0),e=function(n){this===U&&e.call(V,n),i(this,D)&&i(this[D],t)&&(this[D][t]=!1),j(this,t,S(1,n))};return o&&G&&j(U,t,{configurable:!0,set:e}),z(t)}).prototype,"toString",function(){return this._k}),b.f=X,w.f=K,n(169).f=x.f=$,n(85).f=q,n(106).f=J,o&&!n(84)&&s(U,"propertyIsEnumerable",q,!0),p.f=function(t){return z(f(t))}),a(a.G+a.W+a.F*!H,{Symbol:O});for(var Z="hasInstance,isConcatSpreadable,iterator,match,replace,search,species,split,toPrimitive,toStringTag,unscopables".split(","),tt=0;Z.length>tt;)f(Z[tt++]);for(var et=C(f.store),nt=0;et.length>nt;)g(et[nt++]);a(a.S+a.F*!H,"Symbol",{for:function(t){return i(B,t+="")?B[t]:B[t]=O(t)},keyFor:function(t){if(!W(t))throw TypeError(t+" is not a symbol!");for(var e in B)if(B[e]===t)return e},useSetter:function(){G=!0},useSimple:function(){G=!1}}),a(a.S+a.F*!H,"Object",{create:function(t,e){return void 0===e?T(t):Q(T(t),e)},defineProperty:K,defineProperties:Q,getOwnPropertyDescriptor:X,getOwnPropertyNames:$,getOwnPropertySymbols:J}),R&&a(a.S+a.F*(!H||c(function(){var t=O();return"[null]"!=M([t])||"{}"!=M({a:t})||"{}"!=M(Object(t))})),"JSON",{stringify:function(t){for(var e,n,r=[t],i=1;arguments.length>i;)r.push(arguments[i++]);if(n=e=r[1],(_(e)||void 0!==t)&&!W(t))return m(e)||(e=function(t,e){if("function"==typeof n&&(e=n.call(this,t,e)),!W(e))return e}),r[1]=e,M.apply(R,r)}}),O.prototype[P]||n(48)(O.prototype,P,O.prototype.valueOf),h(O,"Symbol"),h(Math,"Math",!0),h(r.JSON,"JSON",!0)},function(t,e,n){"use strict";var r=n(23),i=n(15),o=n(24),a=n(176),s=n(174);r(r.P+r.R,"Promise",{finally:function(t){var e=a(this,i.Promise||o.Promise),n="function"==typeof t;return this.then(n?function(n){return s(e,t()).then(function(){return n})}:t,n?function(n){return s(e,t()).then(function(){throw n})}:t)}})},function(t,e,n){"use strict";var r=n(23),i=n(104),o=n(173);r(r.S,"Promise",{try:function(t){var e=i.f(this),n=o(t);return(n.e?e.reject:e.resolve)(n.v),e.promise}})},function(t,e,n){n(112)("asyncIterator")},function(t,e,n){n(112)("observable")},function(t,e,n){var r;r=function(t){return function(){var e=t,n=e.lib.BlockCipher,r=e.algo,i=[],o=[],a=[],s=[],u=[],c=[],l=[],h=[],d=[],f=[];!function(){for(var t=[],e=0;e<256;e++)t[e]=e<128?e<<1:e<<1^283;var n=0,r=0;for(e=0;e<256;e++){var p=r^r<<1^r<<2^r<<3^r<<4;p=p>>>8^255&p^99,i[n]=p,o[p]=n;var g=t[n],v=t[g],m=t[v],y=257*t[p]^16843008*p;a[n]=y<<24|y>>>8,s[n]=y<<16|y>>>16,u[n]=y<<8|y>>>24,c[n]=y,y=16843009*m^65537*v^257*g^16843008*n,l[p]=y<<24|y>>>8,h[p]=y<<16|y>>>16,d[p]=y<<8|y>>>24,f[p]=y,n?(n=g^t[t[t[m^g]]],r^=t[t[r]]):n=r=1}}();var p=[0,1,2,4,8,16,32,64,128,27,54],g=r.AES=n.extend({_doReset:function(){if(!this._nRounds||this._keyPriorReset!==this._key){for(var t=this._keyPriorReset=this._key,e=t.words,n=t.sigBytes/4,r=4*((this._nRounds=n+6)+1),o=this._keySchedule=[],a=0;a<r;a++)if(a<n)o[a]=e[a];else{var s=o[a-1];a%n?n>6&&a%n==4&&(s=i[s>>>24]<<24|i[s>>>16&255]<<16|i[s>>>8&255]<<8|i[255&s]):(s=i[(s=s<<8|s>>>24)>>>24]<<24|i[s>>>16&255]<<16|i[s>>>8&255]<<8|i[255&s],s^=p[a/n|0]<<24),o[a]=o[a-n]^s}for(var u=this._invKeySchedule=[],c=0;c<r;c++)a=r-c,s=c%4?o[a]:o[a-4],u[c]=c<4||a<=4?s:l[i[s>>>24]]^h[i[s>>>16&255]]^d[i[s>>>8&255]]^f[i[255&s]]}},encryptBlock:function(t,e){this._doCryptBlock(t,e,this._keySchedule,a,s,u,c,i)},decryptBlock:function(t,e){var n=t[e+1];t[e+1]=t[e+3],t[e+3]=n,this._doCryptBlock(t,e,this._invKeySchedule,l,h,d,f,o),n=t[e+1],t[e+1]=t[e+3],t[e+3]=n},_doCryptBlock:function(t,e,n,r,i,o,a,s){for(var u=this._nRounds,c=t[e]^n[0],l=t[e+1]^n[1],h=t[e+2]^n[2],d=t[e+3]^n[3],f=4,p=1;p<u;p++){var g=r[c>>>24]^i[l>>>16&255]^o[h>>>8&255]^a[255&d]^n[f++],v=r[l>>>24]^i[h>>>16&255]^o[d>>>8&255]^a[255&c]^n[f++],m=r[h>>>24]^i[d>>>16&255]^o[c>>>8&255]^a[255&l]^n[f++],y=r[d>>>24]^i[c>>>16&255]^o[l>>>8&255]^a[255&h]^n[f++];c=g,l=v,h=m,d=y}g=(s[c>>>24]<<24|s[l>>>16&255]<<16|s[h>>>8&255]<<8|s[255&d])^n[f++],v=(s[l>>>24]<<24|s[h>>>16&255]<<16|s[d>>>8&255]<<8|s[255&c])^n[f++],m=(s[h>>>24]<<24|s[d>>>16&255]<<16|s[c>>>8&255]<<8|s[255&l])^n[f++],y=(s[d>>>24]<<24|s[c>>>16&255]<<16|s[l>>>8&255]<<8|s[255&h])^n[f++],t[e]=g,t[e+1]=v,t[e+2]=m,t[e+3]=y},keySize:8});e.AES=n._createHelper(g)}(),t.AES},t.exports=r(n(7),n(58),n(59),n(49),n(18))},function(t,e,n){var r;r=function(t){return function(){var e=t,n=e.lib.WordArray,r=e.enc;function i(t){return t<<8&4278255360|t>>>8&16711935}r.Utf16=r.Utf16BE={stringify:function(t){for(var e=t.words,n=t.sigBytes,r=[],i=0;i<n;i+=2){var o=e[i>>>2]>>>16-i%4*8&65535;r.push(String.fromCharCode(o))}return r.join("")},parse:function(t){for(var e=t.length,r=[],i=0;i<e;i++)r[i>>>1]|=t.charCodeAt(i)<<16-i%2*16;return n.create(r,2*e)}},r.Utf16LE={stringify:function(t){for(var e=t.words,n=t.sigBytes,r=[],o=0;o<n;o+=2){var a=i(e[o>>>2]>>>16-o%4*8&65535);r.push(String.fromCharCode(a))}return r.join("")},parse:function(t){for(var e=t.length,r=[],o=0;o<e;o++)r[o>>>1]|=i(t.charCodeAt(o)<<16-o%2*16);return n.create(r,2*e)}}}(),t.enc.Utf16},t.exports=r(n(7))},function(t,e,n){var r;r=function(t){var e,n,r;return n=(e=t).lib.CipherParams,r=e.enc.Hex,e.format.Hex={stringify:function(t){return t.ciphertext.toString(r)},parse:function(t){var e=r.parse(t);return n.create({ciphertext:e})}},t.format.Hex},t.exports=r(n(7),n(18))},function(t,e,n){var r;r=function(t){return function(){if("function"==typeof ArrayBuffer){var e=t.lib.WordArray,n=e.init;(e.init=function(t){if(t instanceof ArrayBuffer&&(t=new Uint8Array(t)),(t instanceof Int8Array||"undefined"!=typeof Uint8ClampedArray&&t instanceof Uint8ClampedArray||t instanceof Int16Array||t instanceof Uint16Array||t instanceof Int32Array||t instanceof Uint32Array||t instanceof Float32Array||t instanceof Float64Array)&&(t=new Uint8Array(t.buffer,t.byteOffset,t.byteLength)),t instanceof Uint8Array){for(var e=t.byteLength,r=[],i=0;i<e;i++)r[i>>>2]|=t[i]<<24-i%4*8;n.call(this,r,e)}else n.apply(this,arguments)}).prototype=e}}(),t.lib.WordArray},t.exports=r(n(7))},function(t,e,n){var r;r=function(t){return t.mode.CFB=function(){var e=t.lib.BlockCipherMode.extend();function n(t,e,n,r){var i=this._iv;if(i){var o=i.slice(0);this._iv=void 0}else o=this._prevBlock;r.encryptBlock(o,0);for(var a=0;a<n;a++)t[e+a]^=o[a]}return e.Encryptor=e.extend({processBlock:function(t,e){var r=this._cipher,i=r.blockSize;n.call(this,t,e,i,r),this._prevBlock=t.slice(e,e+i)}}),e.Decryptor=e.extend({processBlock:function(t,e){var r=this._cipher,i=r.blockSize,o=t.slice(e,e+i);n.call(this,t,e,i,r),this._prevBlock=o}}),e}(),t.mode.CFB},t.exports=r(n(7),n(18))},function(t,e,n){var r;r=function(t){return t.mode.CTRGladman=function(){var e=t.lib.BlockCipherMode.extend();function n(t){if(255==(t>>24&255)){var e=t>>16&255,n=t>>8&255,r=255&t;255===e?(e=0,255===n?(n=0,255===r?r=0:++r):++n):++e,t=0,t+=e<<16,t+=n<<8,t+=r}else t+=1<<24;return t}var r=e.Encryptor=e.extend({processBlock:function(t,e){var r=this._cipher,i=r.blockSize,o=this._iv,a=this._counter;o&&(a=this._counter=o.slice(0),this._iv=void 0),function(t){0===(t[0]=n(t[0]))&&(t[1]=n(t[1]))}(a);var s=a.slice(0);r.encryptBlock(s,0);for(var u=0;u<i;u++)t[e+u]^=s[u]}});return e.Decryptor=r,e}(),t.mode.CTRGladman},t.exports=r(n(7),n(18))},function(t,e,n){var r;r=function(t){var e,n;return t.mode.CTR=(n=(e=t.lib.BlockCipherMode.extend()).Encryptor=e.extend({processBlock:function(t,e){var n=this._cipher,r=n.blockSize,i=this._iv,o=this._counter;i&&(o=this._counter=i.slice(0),this._iv=void 0);var a=o.slice(0);n.encryptBlock(a,0),o[r-1]=o[r-1]+1|0;for(var s=0;s<r;s++)t[e+s]^=a[s]}}),e.Decryptor=n,e),t.mode.CTR},t.exports=r(n(7),n(18))},function(t,e,n){var r;r=function(t){var e;return t.mode.ECB=((e=t.lib.BlockCipherMode.extend()).Encryptor=e.extend({processBlock:function(t,e){this._cipher.encryptBlock(t,e)}}),e.Decryptor=e.extend({processBlock:function(t,e){this._cipher.decryptBlock(t,e)}}),e),t.mode.ECB},t.exports=r(n(7),n(18))},function(t,e,n){var r;r=function(t){var e,n;return t.mode.OFB=(n=(e=t.lib.BlockCipherMode.extend()).Encryptor=e.extend({processBlock:function(t,e){var n=this._cipher,r=n.blockSize,i=this._iv,o=this._keystream;i&&(o=this._keystream=i.slice(0),this._iv=void 0),n.encryptBlock(o,0);for(var a=0;a<r;a++)t[e+a]^=o[a]}}),e.Decryptor=n,e),t.mode.OFB},t.exports=r(n(7),n(18))},function(t,e,n){var r;r=function(t){return t.pad.AnsiX923={pad:function(t,e){var n=t.sigBytes,r=4*e,i=r-n%r,o=n+i-1;t.clamp(),t.words[o>>>2]|=i<<24-o%4*8,t.sigBytes+=i},unpad:function(t){var e=255&t.words[t.sigBytes-1>>>2];t.sigBytes-=e}},t.pad.Ansix923},t.exports=r(n(7),n(18))},function(t,e,n){var r;r=function(t){return t.pad.Iso10126={pad:function(e,n){var r=4*n,i=r-e.sigBytes%r;e.concat(t.lib.WordArray.random(i-1)).concat(t.lib.WordArray.create([i<<24],1))},unpad:function(t){var e=255&t.words[t.sigBytes-1>>>2];t.sigBytes-=e}},t.pad.Iso10126},t.exports=r(n(7),n(18))},function(t,e,n){var r;r=function(t){return t.pad.Iso97971={pad:function(e,n){e.concat(t.lib.WordArray.create([2147483648],1)),t.pad.ZeroPadding.pad(e,n)},unpad:function(e){t.pad.ZeroPadding.unpad(e),e.sigBytes--}},t.pad.Iso97971},t.exports=r(n(7),n(18))},function(t,e,n){var r;r=function(t){return t.pad.NoPadding={pad:function(){},unpad:function(){}},t.pad.NoPadding},t.exports=r(n(7),n(18))},function(t,e,n){var r;r=function(t){return t.pad.ZeroPadding={pad:function(t,e){var n=4*e;t.clamp(),t.sigBytes+=n-(t.sigBytes%n||n)},unpad:function(t){for(var e=t.words,n=t.sigBytes-1;!(e[n>>>2]>>>24-n%4*8&255);)n--;t.sigBytes=n+1}},t.pad.ZeroPadding},t.exports=r(n(7),n(18))},function(t,e,n){var r;r=function(t){var e,n,r,i,o,a,s,u;return r=(n=(e=t).lib).Base,i=n.WordArray,a=(o=e.algo).SHA1,s=o.HMAC,u=o.PBKDF2=r.extend({cfg:r.extend({keySize:4,hasher:a,iterations:1}),init:function(t){this.cfg=this.cfg.extend(t)},compute:function(t,e){for(var n=this.cfg,r=s.create(n.hasher,t),o=i.create(),a=i.create([1]),u=o.words,c=a.words,l=n.keySize,h=n.iterations;u.length<l;){var d=r.update(e).finalize(a);r.reset();for(var f=d.words,p=f.length,g=d,v=1;v<h;v++){g=r.finalize(g),r.reset();for(var m=g.words,y=0;y<p;y++)f[y]^=m[y]}o.concat(d),c[0]++}return o.sigBytes=4*l,o}}),e.PBKDF2=function(t,e,n){return u.create(n).compute(t,e)},t.PBKDF2},t.exports=r(n(7),n(117),n(116))},function(t,e,n){var r;r=function(t){return function(){var e=t,n=e.lib.StreamCipher,r=[],i=[],o=[],a=e.algo.RabbitLegacy=n.extend({_doReset:function(){var t=this._key.words,e=this.cfg.iv,n=this._X=[t[0],t[3]<<16|t[2]>>>16,t[1],t[0]<<16|t[3]>>>16,t[2],t[1]<<16|t[0]>>>16,t[3],t[2]<<16|t[1]>>>16],r=this._C=[t[2]<<16|t[2]>>>16,4294901760&t[0]|65535&t[1],t[3]<<16|t[3]>>>16,4294901760&t[1]|65535&t[2],t[0]<<16|t[0]>>>16,4294901760&t[2]|65535&t[3],t[1]<<16|t[1]>>>16,4294901760&t[3]|65535&t[0]];this._b=0;for(var i=0;i<4;i++)s.call(this);for(i=0;i<8;i++)r[i]^=n[i+4&7];if(e){var o=e.words,a=o[0],u=o[1],c=16711935&(a<<8|a>>>24)|4278255360&(a<<24|a>>>8),l=16711935&(u<<8|u>>>24)|4278255360&(u<<24|u>>>8),h=c>>>16|4294901760&l,d=l<<16|65535&c;for(r[0]^=c,r[1]^=h,r[2]^=l,r[3]^=d,r[4]^=c,r[5]^=h,r[6]^=l,r[7]^=d,i=0;i<4;i++)s.call(this)}},_doProcessBlock:function(t,e){var n=this._X;s.call(this),r[0]=n[0]^n[5]>>>16^n[3]<<16,r[1]=n[2]^n[7]>>>16^n[5]<<16,r[2]=n[4]^n[1]>>>16^n[7]<<16,r[3]=n[6]^n[3]>>>16^n[1]<<16;for(var i=0;i<4;i++)r[i]=16711935&(r[i]<<8|r[i]>>>24)|4278255360&(r[i]<<24|r[i]>>>8),t[e+i]^=r[i]},blockSize:4,ivSize:2});function s(){for(var t=this._X,e=this._C,n=0;n<8;n++)i[n]=e[n];for(e[0]=e[0]+1295307597+this._b|0,e[1]=e[1]+3545052371+(e[0]>>>0<i[0]>>>0?1:0)|0,e[2]=e[2]+886263092+(e[1]>>>0<i[1]>>>0?1:0)|0,e[3]=e[3]+1295307597+(e[2]>>>0<i[2]>>>0?1:0)|0,e[4]=e[4]+3545052371+(e[3]>>>0<i[3]>>>0?1:0)|0,e[5]=e[5]+886263092+(e[4]>>>0<i[4]>>>0?1:0)|0,e[6]=e[6]+1295307597+(e[5]>>>0<i[5]>>>0?1:0)|0,e[7]=e[7]+3545052371+(e[6]>>>0<i[6]>>>0?1:0)|0,this._b=e[7]>>>0<i[7]>>>0?1:0,n=0;n<8;n++){var r=t[n]+e[n],a=65535&r,s=r>>>16,u=((a*a>>>17)+a*s>>>15)+s*s,c=((4294901760&r)*r|0)+((65535&r)*r|0);o[n]=u^c}t[0]=o[0]+(o[7]<<16|o[7]>>>16)+(o[6]<<16|o[6]>>>16)|0,t[1]=o[1]+(o[0]<<8|o[0]>>>24)+o[7]|0,t[2]=o[2]+(o[1]<<16|o[1]>>>16)+(o[0]<<16|o[0]>>>16)|0,t[3]=o[3]+(o[2]<<8|o[2]>>>24)+o[1]|0,t[4]=o[4]+(o[3]<<16|o[3]>>>16)+(o[2]<<16|o[2]>>>16)|0,t[5]=o[5]+(o[4]<<8|o[4]>>>24)+o[3]|0,t[6]=o[6]+(o[5]<<16|o[5]>>>16)+(o[4]<<16|o[4]>>>16)|0,t[7]=o[7]+(o[6]<<8|o[6]>>>24)+o[5]|0}e.RabbitLegacy=n._createHelper(a)}(),t.RabbitLegacy},t.exports=r(n(7),n(58),n(59),n(49),n(18))},function(t,e,n){var r;r=function(t){return function(){var e=t,n=e.lib.StreamCipher,r=[],i=[],o=[],a=e.algo.Rabbit=n.extend({_doReset:function(){for(var t=this._key.words,e=this.cfg.iv,n=0;n<4;n++)t[n]=16711935&(t[n]<<8|t[n]>>>24)|4278255360&(t[n]<<24|t[n]>>>8);var r=this._X=[t[0],t[3]<<16|t[2]>>>16,t[1],t[0]<<16|t[3]>>>16,t[2],t[1]<<16|t[0]>>>16,t[3],t[2]<<16|t[1]>>>16],i=this._C=[t[2]<<16|t[2]>>>16,4294901760&t[0]|65535&t[1],t[3]<<16|t[3]>>>16,4294901760&t[1]|65535&t[2],t[0]<<16|t[0]>>>16,4294901760&t[2]|65535&t[3],t[1]<<16|t[1]>>>16,4294901760&t[3]|65535&t[0]];for(this._b=0,n=0;n<4;n++)s.call(this);for(n=0;n<8;n++)i[n]^=r[n+4&7];if(e){var o=e.words,a=o[0],u=o[1],c=16711935&(a<<8|a>>>24)|4278255360&(a<<24|a>>>8),l=16711935&(u<<8|u>>>24)|4278255360&(u<<24|u>>>8),h=c>>>16|4294901760&l,d=l<<16|65535&c;for(i[0]^=c,i[1]^=h,i[2]^=l,i[3]^=d,i[4]^=c,i[5]^=h,i[6]^=l,i[7]^=d,n=0;n<4;n++)s.call(this)}},_doProcessBlock:function(t,e){var n=this._X;s.call(this),r[0]=n[0]^n[5]>>>16^n[3]<<16,r[1]=n[2]^n[7]>>>16^n[5]<<16,r[2]=n[4]^n[1]>>>16^n[7]<<16,r[3]=n[6]^n[3]>>>16^n[1]<<16;for(var i=0;i<4;i++)r[i]=16711935&(r[i]<<8|r[i]>>>24)|4278255360&(r[i]<<24|r[i]>>>8),t[e+i]^=r[i]},blockSize:4,ivSize:2});function s(){for(var t=this._X,e=this._C,n=0;n<8;n++)i[n]=e[n];for(e[0]=e[0]+1295307597+this._b|0,e[1]=e[1]+3545052371+(e[0]>>>0<i[0]>>>0?1:0)|0,e[2]=e[2]+886263092+(e[1]>>>0<i[1]>>>0?1:0)|0,e[3]=e[3]+1295307597+(e[2]>>>0<i[2]>>>0?1:0)|0,e[4]=e[4]+3545052371+(e[3]>>>0<i[3]>>>0?1:0)|0,e[5]=e[5]+886263092+(e[4]>>>0<i[4]>>>0?1:0)|0,e[6]=e[6]+1295307597+(e[5]>>>0<i[5]>>>0?1:0)|0,e[7]=e[7]+3545052371+(e[6]>>>0<i[6]>>>0?1:0)|0,this._b=e[7]>>>0<i[7]>>>0?1:0,n=0;n<8;n++){var r=t[n]+e[n],a=65535&r,s=r>>>16,u=((a*a>>>17)+a*s>>>15)+s*s,c=((4294901760&r)*r|0)+((65535&r)*r|0);o[n]=u^c}t[0]=o[0]+(o[7]<<16|o[7]>>>16)+(o[6]<<16|o[6]>>>16)|0,t[1]=o[1]+(o[0]<<8|o[0]>>>24)+o[7]|0,t[2]=o[2]+(o[1]<<16|o[1]>>>16)+(o[0]<<16|o[0]>>>16)|0,t[3]=o[3]+(o[2]<<8|o[2]>>>24)+o[1]|0,t[4]=o[4]+(o[3]<<16|o[3]>>>16)+(o[2]<<16|o[2]>>>16)|0,t[5]=o[5]+(o[4]<<8|o[4]>>>24)+o[3]|0,t[6]=o[6]+(o[5]<<16|o[5]>>>16)+(o[4]<<16|o[4]>>>16)|0,t[7]=o[7]+(o[6]<<8|o[6]>>>24)+o[5]|0}e.Rabbit=n._createHelper(a)}(),t.Rabbit},t.exports=r(n(7),n(58),n(59),n(49),n(18))},function(t,e,n){var r;r=function(t){return function(){var e=t,n=e.lib.StreamCipher,r=e.algo,i=r.RC4=n.extend({_doReset:function(){for(var t=this._key,e=t.words,n=t.sigBytes,r=this._S=[],i=0;i<256;i++)r[i]=i;i=0;for(var o=0;i<256;i++){var a=i%n,s=e[a>>>2]>>>24-a%4*8&255;o=(o+r[i]+s)%256;var u=r[i];r[i]=r[o],r[o]=u}this._i=this._j=0},_doProcessBlock:function(t,e){t[e]^=o.call(this)},keySize:8,ivSize:0});function o(){for(var t=this._S,e=this._i,n=this._j,r=0,i=0;i<4;i++){n=(n+t[e=(e+1)%256])%256;var o=t[e];t[e]=t[n],t[n]=o,r|=t[(t[e]+t[n])%256]<<24-8*i}return this._i=e,this._j=n,r}e.RC4=n._createHelper(i);var a=r.RC4Drop=i.extend({cfg:i.cfg.extend({drop:192}),_doReset:function(){i._doReset.call(this);for(var t=this.cfg.drop;t>0;t--)o.call(this)}});e.RC4Drop=n._createHelper(a)}(),t.RC4},t.exports=r(n(7),n(58),n(59),n(49),n(18))},function(t,e,n){var r;r=function(t){return function(e){var n=t,r=n.lib,i=r.WordArray,o=r.Hasher,a=n.algo,s=i.create([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,7,4,13,1,10,6,15,3,12,0,9,5,2,14,11,8,3,10,14,4,9,15,8,1,2,7,0,6,13,11,5,12,1,9,11,10,0,8,12,4,13,3,7,15,14,5,6,2,4,0,5,9,7,12,2,10,14,1,3,8,11,6,15,13]),u=i.create([5,14,7,0,9,2,11,4,13,6,15,8,1,10,3,12,6,11,3,7,0,13,5,10,14,15,8,12,4,9,1,2,15,5,1,3,7,14,6,9,11,8,12,2,10,0,4,13,8,6,4,1,3,11,15,0,5,12,2,13,9,7,10,14,12,15,10,4,1,5,8,7,6,2,13,14,0,3,9,11]),c=i.create([11,14,15,12,5,8,7,9,11,13,14,15,6,7,9,8,7,6,8,13,11,9,7,15,7,12,15,9,11,7,13,12,11,13,6,7,14,9,13,15,14,8,13,6,5,12,7,5,11,12,14,15,14,15,9,8,9,14,5,6,8,6,5,12,9,15,5,11,6,8,13,12,5,12,13,14,11,8,5,6]),l=i.create([8,9,9,11,13,15,15,5,7,7,8,11,14,14,12,6,9,13,15,7,12,8,9,11,7,7,12,7,6,15,13,11,9,7,15,11,8,6,6,14,12,13,5,14,13,13,7,5,15,5,8,11,14,14,6,14,6,9,12,9,12,5,15,8,8,5,12,9,12,5,14,6,8,13,6,5,15,13,11,11]),h=i.create([0,1518500249,1859775393,2400959708,2840853838]),d=i.create([1352829926,1548603684,1836072691,2053994217,0]),f=a.RIPEMD160=o.extend({_doReset:function(){this._hash=i.create([1732584193,4023233417,2562383102,271733878,3285377520])},_doProcessBlock:function(t,e){for(var n=0;n<16;n++){var r=e+n,i=t[r];t[r]=16711935&(i<<8|i>>>24)|4278255360&(i<<24|i>>>8)}var o,a,f,E,A,S,T,x,b,w,C,I=this._hash.words,L=h.words,N=d.words,O=s.words,R=u.words,M=c.words,D=l.words;for(S=o=I[0],T=a=I[1],x=f=I[2],b=E=I[3],w=A=I[4],n=0;n<80;n+=1)C=o+t[e+O[n]]|0,C+=n<16?p(a,f,E)+L[0]:n<32?g(a,f,E)+L[1]:n<48?v(a,f,E)+L[2]:n<64?m(a,f,E)+L[3]:y(a,f,E)+L[4],C=(C=_(C|=0,M[n]))+A|0,o=A,A=E,E=_(f,10),f=a,a=C,C=S+t[e+R[n]]|0,C+=n<16?y(T,x,b)+N[0]:n<32?m(T,x,b)+N[1]:n<48?v(T,x,b)+N[2]:n<64?g(T,x,b)+N[3]:p(T,x,b)+N[4],C=(C=_(C|=0,D[n]))+w|0,S=w,w=b,b=_(x,10),x=T,T=C;C=I[1]+f+b|0,I[1]=I[2]+E+w|0,I[2]=I[3]+A+S|0,I[3]=I[4]+o+T|0,I[4]=I[0]+a+x|0,I[0]=C},_doFinalize:function(){var t=this._data,e=t.words,n=8*this._nDataBytes,r=8*t.sigBytes;e[r>>>5]|=128<<24-r%32,e[14+(r+64>>>9<<4)]=16711935&(n<<8|n>>>24)|4278255360&(n<<24|n>>>8),t.sigBytes=4*(e.length+1),this._process();for(var i=this._hash,o=i.words,a=0;a<5;a++){var s=o[a];o[a]=16711935&(s<<8|s>>>24)|4278255360&(s<<24|s>>>8)}return i},clone:function(){var t=o.clone.call(this);return t._hash=this._hash.clone(),t}});function p(t,e,n){return t^e^n}function g(t,e,n){return t&e|~t&n}function v(t,e,n){return(t|~e)^n}function m(t,e,n){return t&n|e&~n}function y(t,e,n){return t^(e|~n)}function _(t,e){return t<<e|t>>>32-e}n.RIPEMD160=o._createHelper(f),n.HmacRIPEMD160=o._createHmacHelper(f)}(Math),t.RIPEMD160},t.exports=r(n(7))},function(t,e,n){var r;r=function(t){var e,n,r,i,o;return n=(e=t).lib.WordArray,r=e.algo,i=r.SHA256,o=r.SHA224=i.extend({_doReset:function(){this._hash=new n.init([3238371032,914150663,812702999,4144912697,4290775857,1750603025,1694076839,3204075428])},_doFinalize:function(){var t=i._doFinalize.call(this);return t.sigBytes-=4,t}}),e.SHA224=i._createHelper(o),e.HmacSHA224=i._createHmacHelper(o),t.SHA224},t.exports=r(n(7),n(181))},function(t,e,n){var r;r=function(t){return function(e){var n=t,r=n.lib,i=r.WordArray,o=r.Hasher,a=n.x64.Word,s=n.algo,u=[],c=[],l=[];!function(){for(var t=1,e=0,n=0;n<24;n++){u[t+5*e]=(n+1)*(n+2)/2%64;var r=(2*t+3*e)%5;t=e%5,e=r}for(t=0;t<5;t++)for(e=0;e<5;e++)c[t+5*e]=e+(2*t+3*e)%5*5;for(var i=1,o=0;o<24;o++){for(var s=0,h=0,d=0;d<7;d++){if(1&i){var f=(1<<d)-1;f<32?h^=1<<f:s^=1<<f-32}128&i?i=i<<1^113:i<<=1}l[o]=a.create(s,h)}}();var h=[];!function(){for(var t=0;t<25;t++)h[t]=a.create()}();var d=s.SHA3=o.extend({cfg:o.cfg.extend({outputLength:512}),_doReset:function(){for(var t=this._state=[],e=0;e<25;e++)t[e]=new a.init;this.blockSize=(1600-2*this.cfg.outputLength)/32},_doProcessBlock:function(t,e){for(var n=this._state,r=this.blockSize/2,i=0;i<r;i++){var o=t[e+2*i],a=t[e+2*i+1];o=16711935&(o<<8|o>>>24)|4278255360&(o<<24|o>>>8),a=16711935&(a<<8|a>>>24)|4278255360&(a<<24|a>>>8),(I=n[i]).high^=a,I.low^=o}for(var s=0;s<24;s++){for(var d=0;d<5;d++){for(var f=0,p=0,g=0;g<5;g++)f^=(I=n[d+5*g]).high,p^=I.low;var v=h[d];v.high=f,v.low=p}for(d=0;d<5;d++){var m=h[(d+4)%5],y=h[(d+1)%5],_=y.high,E=y.low;for(f=m.high^(_<<1|E>>>31),p=m.low^(E<<1|_>>>31),g=0;g<5;g++)(I=n[d+5*g]).high^=f,I.low^=p}for(var A=1;A<25;A++){var S=(I=n[A]).high,T=I.low,x=u[A];x<32?(f=S<<x|T>>>32-x,p=T<<x|S>>>32-x):(f=T<<x-32|S>>>64-x,p=S<<x-32|T>>>64-x);var b=h[c[A]];b.high=f,b.low=p}var w=h[0],C=n[0];for(w.high=C.high,w.low=C.low,d=0;d<5;d++)for(g=0;g<5;g++){var I=n[A=d+5*g],L=h[A],N=h[(d+1)%5+5*g],O=h[(d+2)%5+5*g];I.high=L.high^~N.high&O.high,I.low=L.low^~N.low&O.low}I=n[0];var R=l[s];I.high^=R.high,I.low^=R.low}},_doFinalize:function(){var t=this._data,n=t.words,r=(this._nDataBytes,8*t.sigBytes),o=32*this.blockSize;n[r>>>5]|=1<<24-r%32,n[(e.ceil((r+1)/o)*o>>>5)-1]|=128,t.sigBytes=4*n.length,this._process();for(var a=this._state,s=this.cfg.outputLength/8,u=s/8,c=[],l=0;l<u;l++){var h=a[l],d=h.high,f=h.low;d=16711935&(d<<8|d>>>24)|4278255360&(d<<24|d>>>8),f=16711935&(f<<8|f>>>24)|4278255360&(f<<24|f>>>8),c.push(f),c.push(d)}return new i.init(c,s)},clone:function(){for(var t=o.clone.call(this),e=t._state=this._state.slice(0),n=0;n<25;n++)e[n]=e[n].clone();return t}});n.SHA3=o._createHelper(d),n.HmacSHA3=o._createHmacHelper(d)}(Math),t.SHA3},t.exports=r(n(7),n(89))},function(t,e,n){var r;r=function(t){var e,n,r,i,o,a,s;return n=(e=t).x64,r=n.Word,i=n.WordArray,o=e.algo,a=o.SHA512,s=o.SHA384=a.extend({_doReset:function(){this._hash=new i.init([new r.init(3418070365,3238371032),new r.init(1654270250,914150663),new r.init(2438529370,812702999),new r.init(355462360,4144912697),new r.init(1731405415,4290775857),new r.init(2394180231,1750603025),new r.init(3675008525,1694076839),new r.init(1203062813,3204075428)])},_doFinalize:function(){var t=a._doFinalize.call(this);return t.sigBytes-=16,t}}),e.SHA384=a._createHelper(s),e.HmacSHA384=a._createHmacHelper(s),t.SHA384},t.exports=r(n(7),n(89),n(182))},function(t,e,n){var r;r=function(t){return function(){var e=t,n=e.lib,r=n.WordArray,i=n.BlockCipher,o=e.algo,a=[57,49,41,33,25,17,9,1,58,50,42,34,26,18,10,2,59,51,43,35,27,19,11,3,60,52,44,36,63,55,47,39,31,23,15,7,62,54,46,38,30,22,14,6,61,53,45,37,29,21,13,5,28,20,12,4],s=[14,17,11,24,1,5,3,28,15,6,21,10,23,19,12,4,26,8,16,7,27,20,13,2,41,52,31,37,47,55,30,40,51,45,33,48,44,49,39,56,34,53,46,42,50,36,29,32],u=[1,2,4,6,8,10,12,14,15,17,19,21,23,25,27,28],c=[{0:8421888,268435456:32768,536870912:8421378,805306368:2,1073741824:512,1342177280:8421890,1610612736:8389122,1879048192:8388608,2147483648:514,2415919104:8389120,2684354560:33280,2952790016:8421376,3221225472:32770,3489660928:8388610,3758096384:0,4026531840:33282,134217728:0,402653184:8421890,671088640:33282,939524096:32768,1207959552:8421888,1476395008:512,1744830464:8421378,2013265920:2,2281701376:8389120,2550136832:33280,2818572288:8421376,3087007744:8389122,3355443200:8388610,3623878656:32770,3892314112:514,4160749568:8388608,1:32768,268435457:2,536870913:8421888,805306369:8388608,1073741825:8421378,1342177281:33280,1610612737:512,1879048193:8389122,2147483649:8421890,2415919105:8421376,2684354561:8388610,2952790017:33282,3221225473:514,3489660929:8389120,3758096385:32770,4026531841:0,134217729:8421890,402653185:8421376,671088641:8388608,939524097:512,1207959553:32768,1476395009:8388610,1744830465:2,2013265921:33282,2281701377:32770,2550136833:8389122,2818572289:514,3087007745:8421888,3355443201:8389120,3623878657:0,3892314113:33280,4160749569:8421378},{0:1074282512,16777216:16384,33554432:524288,50331648:1074266128,67108864:1073741840,83886080:1074282496,100663296:1073758208,117440512:16,134217728:540672,150994944:1073758224,167772160:1073741824,184549376:540688,201326592:524304,218103808:0,234881024:16400,251658240:1074266112,8388608:1073758208,25165824:540688,41943040:16,58720256:1073758224,75497472:1074282512,92274688:1073741824,109051904:524288,125829120:1074266128,142606336:524304,159383552:0,176160768:16384,192937984:1074266112,209715200:1073741840,226492416:540672,243269632:1074282496,260046848:16400,268435456:0,285212672:1074266128,301989888:1073758224,318767104:1074282496,335544320:1074266112,352321536:16,369098752:540688,385875968:16384,402653184:16400,419430400:524288,436207616:524304,452984832:1073741840,469762048:540672,486539264:1073758208,503316480:1073741824,520093696:1074282512,276824064:540688,293601280:524288,310378496:1074266112,327155712:16384,343932928:1073758208,360710144:1074282512,377487360:16,394264576:1073741824,411041792:1074282496,427819008:1073741840,444596224:1073758224,461373440:524304,478150656:0,494927872:16400,511705088:1074266128,528482304:540672},{0:260,1048576:0,2097152:67109120,3145728:65796,4194304:65540,5242880:67108868,6291456:67174660,7340032:67174400,8388608:67108864,9437184:67174656,10485760:65792,11534336:67174404,12582912:67109124,13631488:65536,14680064:4,15728640:256,524288:67174656,1572864:67174404,2621440:0,3670016:67109120,4718592:67108868,5767168:65536,6815744:65540,7864320:260,8912896:4,9961472:256,11010048:67174400,12058624:65796,13107200:65792,14155776:67109124,15204352:67174660,16252928:67108864,16777216:67174656,17825792:65540,18874368:65536,19922944:67109120,20971520:256,22020096:67174660,23068672:67108868,24117248:0,25165824:67109124,26214400:67108864,27262976:4,28311552:65792,29360128:67174400,30408704:260,31457280:65796,32505856:67174404,17301504:67108864,18350080:260,19398656:67174656,20447232:0,21495808:65540,22544384:67109120,23592960:256,24641536:67174404,25690112:65536,26738688:67174660,27787264:65796,28835840:67108868,29884416:67109124,30932992:67174400,31981568:4,33030144:65792},{0:2151682048,65536:2147487808,131072:4198464,196608:2151677952,262144:0,327680:4198400,393216:2147483712,458752:4194368,524288:2147483648,589824:4194304,655360:64,720896:2147487744,786432:2151678016,851968:4160,917504:4096,983040:2151682112,32768:2147487808,98304:64,163840:2151678016,229376:2147487744,294912:4198400,360448:2151682112,425984:0,491520:2151677952,557056:4096,622592:2151682048,688128:4194304,753664:4160,819200:2147483648,884736:4194368,950272:4198464,1015808:2147483712,1048576:4194368,1114112:4198400,1179648:2147483712,1245184:0,1310720:4160,1376256:2151678016,1441792:2151682048,1507328:2147487808,1572864:2151682112,1638400:2147483648,1703936:2151677952,1769472:4198464,1835008:2147487744,1900544:4194304,1966080:64,2031616:4096,1081344:2151677952,1146880:2151682112,1212416:0,1277952:4198400,1343488:4194368,1409024:2147483648,1474560:2147487808,1540096:64,1605632:2147483712,1671168:4096,1736704:2147487744,1802240:2151678016,1867776:4160,1933312:2151682048,1998848:4194304,2064384:4198464},{0:128,4096:17039360,8192:262144,12288:536870912,16384:537133184,20480:16777344,24576:553648256,28672:262272,32768:16777216,36864:537133056,40960:536871040,45056:553910400,49152:553910272,53248:0,57344:17039488,61440:553648128,2048:17039488,6144:553648256,10240:128,14336:17039360,18432:262144,22528:537133184,26624:553910272,30720:536870912,34816:537133056,38912:0,43008:553910400,47104:16777344,51200:536871040,55296:553648128,59392:16777216,63488:262272,65536:262144,69632:128,73728:536870912,77824:553648256,81920:16777344,86016:553910272,90112:537133184,94208:16777216,98304:553910400,102400:553648128,106496:17039360,110592:537133056,114688:262272,118784:536871040,122880:0,126976:17039488,67584:553648256,71680:16777216,75776:17039360,79872:537133184,83968:536870912,88064:17039488,92160:128,96256:553910272,100352:262272,104448:553910400,108544:0,112640:553648128,116736:16777344,120832:262144,124928:537133056,129024:536871040},{0:268435464,256:8192,512:270532608,768:270540808,1024:268443648,1280:2097152,1536:2097160,1792:268435456,2048:0,2304:268443656,2560:2105344,2816:8,3072:270532616,3328:2105352,3584:8200,3840:270540800,128:270532608,384:270540808,640:8,896:2097152,1152:2105352,1408:268435464,1664:268443648,1920:8200,2176:2097160,2432:8192,2688:268443656,2944:270532616,3200:0,3456:270540800,3712:2105344,3968:268435456,4096:268443648,4352:270532616,4608:270540808,4864:8200,5120:2097152,5376:268435456,5632:268435464,5888:2105344,6144:2105352,6400:0,6656:8,6912:270532608,7168:8192,7424:268443656,7680:270540800,7936:2097160,4224:8,4480:2105344,4736:2097152,4992:268435464,5248:268443648,5504:8200,5760:270540808,6016:270532608,6272:270540800,6528:270532616,6784:8192,7040:2105352,7296:2097160,7552:0,7808:268435456,8064:268443656},{0:1048576,16:33555457,32:1024,48:1049601,64:34604033,80:0,96:1,112:34603009,128:33555456,144:1048577,160:33554433,176:34604032,192:34603008,208:1025,224:1049600,240:33554432,8:34603009,24:0,40:33555457,56:34604032,72:1048576,88:33554433,104:33554432,120:1025,136:1049601,152:33555456,168:34603008,184:1048577,200:1024,216:34604033,232:1,248:1049600,256:33554432,272:1048576,288:33555457,304:34603009,320:1048577,336:33555456,352:34604032,368:1049601,384:1025,400:34604033,416:1049600,432:1,448:0,464:34603008,480:33554433,496:1024,264:1049600,280:33555457,296:34603009,312:1,328:33554432,344:1048576,360:1025,376:34604032,392:33554433,408:34603008,424:0,440:34604033,456:1049601,472:1024,488:33555456,504:1048577},{0:134219808,1:131072,2:134217728,3:32,4:131104,5:134350880,6:134350848,7:2048,8:134348800,9:134219776,10:133120,11:134348832,12:2080,13:0,14:134217760,15:133152,2147483648:2048,2147483649:134350880,2147483650:134219808,2147483651:134217728,2147483652:134348800,2147483653:133120,2147483654:133152,2147483655:32,2147483656:134217760,2147483657:2080,2147483658:131104,2147483659:134350848,2147483660:0,2147483661:134348832,2147483662:134219776,2147483663:131072,16:133152,17:134350848,18:32,19:2048,20:134219776,21:134217760,22:134348832,23:131072,24:0,25:131104,26:134348800,27:134219808,28:134350880,29:133120,30:2080,31:134217728,2147483664:131072,2147483665:2048,2147483666:134348832,2147483667:133152,2147483668:32,2147483669:134348800,2147483670:134217728,2147483671:134219808,2147483672:134350880,2147483673:134217760,2147483674:134219776,2147483675:0,2147483676:133120,2147483677:2080,2147483678:131104,2147483679:134350848}],l=[4160749569,528482304,33030144,2064384,129024,8064,504,2147483679],h=o.DES=i.extend({_doReset:function(){for(var t=this._key.words,e=[],n=0;n<56;n++){var r=a[n]-1;e[n]=t[r>>>5]>>>31-r%32&1}for(var i=this._subKeys=[],o=0;o<16;o++){var c=i[o]=[],l=u[o];for(n=0;n<24;n++)c[n/6|0]|=e[(s[n]-1+l)%28]<<31-n%6,c[4+(n/6|0)]|=e[28+(s[n+24]-1+l)%28]<<31-n%6;for(c[0]=c[0]<<1|c[0]>>>31,n=1;n<7;n++)c[n]=c[n]>>>4*(n-1)+3;c[7]=c[7]<<5|c[7]>>>27}var h=this._invSubKeys=[];for(n=0;n<16;n++)h[n]=i[15-n]},encryptBlock:function(t,e){this._doCryptBlock(t,e,this._subKeys)},decryptBlock:function(t,e){this._doCryptBlock(t,e,this._invSubKeys)},_doCryptBlock:function(t,e,n){this._lBlock=t[e],this._rBlock=t[e+1],d.call(this,4,252645135),d.call(this,16,65535),f.call(this,2,858993459),f.call(this,8,16711935),d.call(this,1,1431655765);for(var r=0;r<16;r++){for(var i=n[r],o=this._lBlock,a=this._rBlock,s=0,u=0;u<8;u++)s|=c[u][((a^i[u])&l[u])>>>0];this._lBlock=a,this._rBlock=o^s}var h=this._lBlock;this._lBlock=this._rBlock,this._rBlock=h,d.call(this,1,1431655765),f.call(this,8,16711935),f.call(this,2,858993459),d.call(this,16,65535),d.call(this,4,252645135),t[e]=this._lBlock,t[e+1]=this._rBlock},keySize:2,ivSize:2,blockSize:2});function d(t,e){var n=(this._lBlock>>>t^this._rBlock)&e;this._rBlock^=n,this._lBlock^=n<<t}function f(t,e){var n=(this._rBlock>>>t^this._lBlock)&e;this._lBlock^=n,this._rBlock^=n<<t}e.DES=i._createHelper(h);var p=o.TripleDES=i.extend({_doReset:function(){var t=this._key.words;this._des1=h.createEncryptor(r.create(t.slice(0,2))),this._des2=h.createEncryptor(r.create(t.slice(2,4))),this._des3=h.createEncryptor(r.create(t.slice(4,6)))},encryptBlock:function(t,e){this._des1.encryptBlock(t,e),this._des2.decryptBlock(t,e),this._des3.encryptBlock(t,e)},decryptBlock:function(t,e){this._des3.decryptBlock(t,e),this._des2.encryptBlock(t,e),this._des1.decryptBlock(t,e)},keySize:6,ivSize:2,blockSize:2});e.TripleDES=i._createHelper(p)}(),t.TripleDES},t.exports=r(n(7),n(58),n(59),n(49),n(18))},function(t,e){e.read=function(t,e,n,r,i){var o,a,s=8*i-r-1,u=(1<<s)-1,c=u>>1,l=-7,h=n?i-1:0,d=n?-1:1,f=t[e+h];for(h+=d,o=f&(1<<-l)-1,f>>=-l,l+=s;l>0;o=256*o+t[e+h],h+=d,l-=8);for(a=o&(1<<-l)-1,o>>=-l,l+=r;l>0;a=256*a+t[e+h],h+=d,l-=8);if(0===o)o=1-c;else{if(o===u)return a?NaN:1/0*(f?-1:1);a+=Math.pow(2,r),o-=c}return(f?-1:1)*a*Math.pow(2,o-r)},e.write=function(t,e,n,r,i,o){var a,s,u,c=8*o-i-1,l=(1<<c)-1,h=l>>1,d=23===i?Math.pow(2,-24)-Math.pow(2,-77):0,f=r?0:o-1,p=r?1:-1,g=e<0||0===e&&1/e<0?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(s=isNaN(e)?1:0,a=l):(a=Math.floor(Math.log(e)/Math.LN2),e*(u=Math.pow(2,-a))<1&&(a--,u*=2),(e+=a+h>=1?d/u:d*Math.pow(2,1-h))*u>=2&&(a++,u/=2),a+h>=l?(s=0,a=l):a+h>=1?(s=(e*u-1)*Math.pow(2,i),a+=h):(s=e*Math.pow(2,h-1)*Math.pow(2,i),a=0));i>=8;t[n+f]=255&s,f+=p,s/=256,i-=8);for(a=a<<i|s,c+=i;c>0;t[n+f]=255&a,f+=p,a/=256,c-=8);t[n+f-p]|=128*g}},function(t,e,n){"use strict";(function(e){var n,r,i=e.MutationObserver||e.WebKitMutationObserver;if(i){var o=0,a=new i(l),s=e.document.createTextNode("");a.observe(s,{characterData:!0}),n=function(){s.data=o=++o%2}}else if(e.setImmediate||void 0===e.MessageChannel)n="document"in e&&"onreadystatechange"in e.document.createElement("script")?function(){var t=e.document.createElement("script");t.onreadystatechange=function(){l(),t.onreadystatechange=null,t.parentNode.removeChild(t),t=null},e.document.documentElement.appendChild(t)}:function(){setTimeout(l,0)};else{var u=new e.MessageChannel;u.port1.onmessage=l,n=function(){u.port2.postMessage(0)}}var c=[];function l(){var t,e;r=!0;for(var n=c.length;n;){for(e=c,c=[],t=-1;++t<n;)e[t]();n=c.length}r=!1}t.exports=function(t){1!==c.push(t)||r||n()}}).call(e,n(6))},function(t,e){"function"==typeof Object.create?t.exports=function(t,e){t.super_=e,t.prototype=Object.create(e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}})}:t.exports=function(t,e){t.super_=e;var n=function(){};n.prototype=e.prototype,t.prototype=new n,t.prototype.constructor=t}},function(t,e,n){"use strict";var r="undefined"!=typeof Uint8Array&&"undefined"!=typeof Uint16Array&&"undefined"!=typeof Uint32Array,i=n(454),o=n(12),a=n(31),s=r?"uint8array":"array";function u(t,e){a.call(this,"FlateWorker/"+t),this._pako=null,this._pakoAction=t,this._pakoOptions=e,this.meta={}}e.magic="\b\0",o.inherits(u,a),u.prototype.processChunk=function(t){this.meta=t.meta,null===this._pako&&this._createPako(),this._pako.push(o.transformTo(s,t.data),!1)},u.prototype.flush=function(){a.prototype.flush.call(this),null===this._pako&&this._createPako(),this._pako.push([],!0)},u.prototype.cleanUp=function(){a.prototype.cleanUp.call(this),this._pako=null},u.prototype._createPako=function(){this._pako=new i[this._pakoAction]({raw:!0,level:this._pakoOptions.level||-1});var t=this;this._pako.onData=function(e){t.push({data:e,meta:t.meta})}},e.compressWorker=function(t){return new u("Deflate",t)},e.uncompressWorker=function(){return new u("Inflate",{})}},function(t,e,n){"use strict";var r=n(12),i=n(31),o=n(60),a=n(120),s=n(192),u=function(t,e){var n,r="";for(n=0;n<e;n++)r+=String.fromCharCode(255&t),t>>>=8;return r},c=function(t,e,n,i,c,l){var h,d,f=t.file,p=t.compression,g=l!==o.utf8encode,v=r.transformTo("string",l(f.name)),m=r.transformTo("string",o.utf8encode(f.name)),y=f.comment,_=r.transformTo("string",l(y)),E=r.transformTo("string",o.utf8encode(y)),A=m.length!==f.name.length,S=E.length!==y.length,T="",x="",b="",w=f.dir,C=f.date,I={crc32:0,compressedSize:0,uncompressedSize:0};e&&!n||(I.crc32=t.crc32,I.compressedSize=t.compressedSize,I.uncompressedSize=t.uncompressedSize);var L=0;e&&(L|=8),g||!A&&!S||(L|=2048);var N,O,R=0,M=0;w&&(R|=16),"UNIX"===c?(M=798,R|=(O=N=f.unixPermissions,N||(O=w?16893:33204),(65535&O)<<16)):(M=20,R|=63&(f.dosPermissions||0)),h=C.getUTCHours(),h<<=6,h|=C.getUTCMinutes(),h<<=5,h|=C.getUTCSeconds()/2,d=C.getUTCFullYear()-1980,d<<=4,d|=C.getUTCMonth()+1,d<<=5,d|=C.getUTCDate(),A&&(x=u(1,1)+u(a(v),4)+m,T+="up"+u(x.length,2)+x),S&&(b=u(1,1)+u(a(_),4)+E,T+="uc"+u(b.length,2)+b);var D="";return D+="\n\0",D+=u(L,2),D+=p.magic,D+=u(h,2),D+=u(d,2),D+=u(I.crc32,4),D+=u(I.compressedSize,4),D+=u(I.uncompressedSize,4),D+=u(v.length,2),D+=u(T.length,2),{fileRecord:s.LOCAL_FILE_HEADER+D+v+T,dirRecord:s.CENTRAL_FILE_HEADER+u(M,2)+D+u(_.length,2)+"\0\0\0\0"+u(R,4)+u(i,4)+v+T+_}};function l(t,e,n,r){i.call(this,"ZipFileWorker"),this.bytesWritten=0,this.zipComment=e,this.zipPlatform=n,this.encodeFileName=r,this.streamFiles=t,this.accumulate=!1,this.contentBuffer=[],this.dirRecords=[],this.currentSourceOffset=0,this.entriesCount=0,this.currentFile=null,this._sources=[]}r.inherits(l,i),l.prototype.push=function(t){var e=t.meta.percent||0,n=this.entriesCount,r=this._sources.length;this.accumulate?this.contentBuffer.push(t):(this.bytesWritten+=t.data.length,i.prototype.push.call(this,{data:t.data,meta:{currentFile:this.currentFile,percent:n?(e+100*(n-r-1))/n:100}}))},l.prototype.openedSource=function(t){this.currentSourceOffset=this.bytesWritten,this.currentFile=t.file.name;var e=this.streamFiles&&!t.file.dir;if(e){var n=c(t,e,!1,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);this.push({data:n.fileRecord,meta:{percent:0}})}else this.accumulate=!0},l.prototype.closedSource=function(t){this.accumulate=!1;var e=this.streamFiles&&!t.file.dir,n=c(t,e,!0,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);if(this.dirRecords.push(n.dirRecord),e)this.push({data:function(t){return s.DATA_DESCRIPTOR+u(t.crc32,4)+u(t.compressedSize,4)+u(t.uncompressedSize,4)}(t),meta:{percent:100}});else for(this.push({data:n.fileRecord,meta:{percent:0}});this.contentBuffer.length;)this.push(this.contentBuffer.shift());this.currentFile=null},l.prototype.flush=function(){for(var t=this.bytesWritten,e=0;e<this.dirRecords.length;e++)this.push({data:this.dirRecords[e],meta:{percent:100}});var n=this.bytesWritten-t,i=function(t,e,n,i,o){var a=r.transformTo("string",o(i));return s.CENTRAL_DIRECTORY_END+"\0\0\0\0"+u(t,2)+u(t,2)+u(e,4)+u(n,4)+u(a.length,2)+a}(this.dirRecords.length,n,t,this.zipComment,this.encodeFileName);this.push({data:i,meta:{percent:100}})},l.prototype.prepareNextSource=function(){this.previous=this._sources.shift(),this.openedSource(this.previous.streamInfo),this.isPaused?this.previous.pause():this.previous.resume()},l.prototype.registerPrevious=function(t){this._sources.push(t);var e=this;return t.on("data",function(t){e.processChunk(t)}),t.on("end",function(){e.closedSource(e.previous.streamInfo),e._sources.length?e.prepareNextSource():e.end()}),t.on("error",function(t){e.error(t)}),this},l.prototype.resume=function(){return!!i.prototype.resume.call(this)&&(!this.previous&&this._sources.length?(this.prepareNextSource(),!0):this.previous||this._sources.length||this.generatedError?void 0:(this.end(),!0))},l.prototype.error=function(t){var e=this._sources;if(!i.prototype.error.call(this,t))return!1;for(var n=0;n<e.length;n++)try{e[n].error(t)}catch(t){}return!0},l.prototype.lock=function(){i.prototype.lock.call(this);for(var t=this._sources,e=0;e<t.length;e++)t[e].lock()},t.exports=l},function(t,e,n){"use strict";var r=n(185),i=n(426);e.generateWorker=function(t,e,n){var o=new i(e.streamFiles,n,e.platform,e.encodeFileName),a=0;try{t.forEach(function(t,n){a++;var i=function(t,e){var n=t||e,i=r[n];if(!i)throw new Error(n+" is not a valid compression method !");return i}(n.options.compression,e.compression),s=n.options.compressionOptions||e.compressionOptions||{},u=n.dir,c=n.date;n._compressWorker(i,s).withStreamInfo("file",{name:t,dir:u,date:c,comment:n.comment||"",unixPermissions:n.unixPermissions,dosPermissions:n.dosPermissions}).pipe(o)}),o.entriesCount=a}catch(t){o.error(t)}return o}},function(t,e,n){"use strict";function r(){if(!(this instanceof r))return new r;if(arguments.length)throw new Error("The constructor with parameters has been removed in JSZip 3.0, please check the upgrade guide.");this.files={},this.comment=null,this.root="",this.clone=function(){var t=new r;for(var e in this)"function"!=typeof this[e]&&(t[e]=this[e]);return t}}r.prototype=n(432),r.prototype.loadAsync=n(429),r.support=n(42),r.defaults=n(186),r.version="3.1.5",r.loadAsync=function(t,e){return(new r).loadAsync(t,e)},r.external=n(74),t.exports=r},function(t,e,n){"use strict";var r=n(12),i=n(74),o=n(60),a=(r=n(12),n(436)),s=n(193),u=n(90);function c(t){return new i.Promise(function(e,n){var r=t.decompressed.getContentWorker().pipe(new s);r.on("error",function(t){n(t)}).on("end",function(){r.streamInfo.crc32!==t.decompressed.crc32?n(new Error("Corrupted zip : CRC32 mismatch")):e()}).resume()})}t.exports=function(t,e){var n=this;return e=r.extend(e||{},{base64:!1,checkCRC32:!1,optimizedBinaryString:!1,createFolders:!1,decodeFileName:o.utf8decode}),u.isNode&&u.isStream(t)?i.Promise.reject(new Error("JSZip can't accept a stream when loading a zip file.")):r.prepareContent("the loaded zip file",t,!0,e.optimizedBinaryString,e.base64).then(function(t){var n=new a(e);return n.load(t),n}).then(function(t){var n=[i.Promise.resolve(t)],r=t.files;if(e.checkCRC32)for(var o=0;o<r.length;o++)n.push(c(r[o]));return i.Promise.all(n)}).then(function(t){for(var r=t.shift(),i=r.files,o=0;o<i.length;o++){var a=i[o];n.file(a.fileNameStr,a.decompressed,{binary:!0,optimizedBinaryString:!0,date:a.date,dir:a.dir,comment:a.fileCommentStr.length?a.fileCommentStr:null,unixPermissions:a.unixPermissions,dosPermissions:a.dosPermissions,createFolders:e.createFolders})}return r.zipComment.length&&(n.comment=r.zipComment),n})}},function(t,e,n){"use strict";var r=n(12),i=n(31);function o(t,e){i.call(this,"Nodejs stream input adapter for "+t),this._upstreamEnded=!1,this._bindStream(e)}r.inherits(o,i),o.prototype._bindStream=function(t){var e=this;this._stream=t,t.pause(),t.on("data",function(t){e.push({data:t,meta:{percent:0}})}).on("error",function(t){e.isPaused?this.generatedError=t:e.error(t)}).on("end",function(){e.isPaused?e._upstreamEnded=!0:e.end()})},o.prototype.pause=function(){return!!i.prototype.pause.call(this)&&(this._stream.pause(),!0)},o.prototype.resume=function(){return!!i.prototype.resume.call(this)&&(this._upstreamEnded?this.end():this._stream.resume(),!0)},t.exports=o},function(t,e,n){"use strict";var r=n(187).Readable;function i(t,e,n){r.call(this,e),this._helper=t;var i=this;t.on("data",function(t,e){i.push(t)||i._helper.pause(),n&&n(e)}).on("error",function(t){i.emit("error",t)}).on("end",function(){i.push(null)})}n(12).inherits(i,r),i.prototype._read=function(){this._helper.resume()},t.exports=i},function(t,e,n){"use strict";var r=n(60),i=n(12),o=n(31),a=n(196),s=n(186),u=n(119),c=n(438),l=n(427),h=n(90),d=n(430),f=function(t,e,n){var r,a=i.getTypeOf(e),l=i.extend(n||{},s);l.date=l.date||new Date,null!==l.compression&&(l.compression=l.compression.toUpperCase()),"string"==typeof l.unixPermissions&&(l.unixPermissions=parseInt(l.unixPermissions,8)),l.unixPermissions&&16384&l.unixPermissions&&(l.dir=!0),l.dosPermissions&&16&l.dosPermissions&&(l.dir=!0),l.dir&&(t=g(t)),l.createFolders&&(r=p(t))&&v.call(this,r,!0);var f="string"===a&&!1===l.binary&&!1===l.base64;n&&void 0!==n.binary||(l.binary=!f),(e instanceof u&&0===e.uncompressedSize||l.dir||!e||0===e.length)&&(l.base64=!1,l.binary=!0,e="",l.compression="STORE",a="string");var m;m=e instanceof u||e instanceof o?e:h.isNode&&h.isStream(e)?new d(t,e):i.prepareContent(t,e,l.binary,l.optimizedBinaryString,l.base64);var y=new c(t,m,l);this.files[t]=y},p=function(t){"/"===t.slice(-1)&&(t=t.substring(0,t.length-1));var e=t.lastIndexOf("/");return e>0?t.substring(0,e):""},g=function(t){return"/"!==t.slice(-1)&&(t+="/"),t},v=function(t,e){return e=void 0!==e?e:s.createFolders,t=g(t),this.files[t]||f.call(this,t,null,{dir:!0,createFolders:e}),this.files[t]};function m(t){return"[object RegExp]"===Object.prototype.toString.call(t)}var y={load:function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},forEach:function(t){var e,n,r;for(e in this.files)this.files.hasOwnProperty(e)&&(r=this.files[e],(n=e.slice(this.root.length,e.length))&&e.slice(0,this.root.length)===this.root&&t(n,r))},filter:function(t){var e=[];return this.forEach(function(n,r){t(n,r)&&e.push(r)}),e},file:function(t,e,n){if(1===arguments.length){if(m(t)){var r=t;return this.filter(function(t,e){return!e.dir&&r.test(t)})}var i=this.files[this.root+t];return i&&!i.dir?i:null}return t=this.root+t,f.call(this,t,e,n),this},folder:function(t){if(!t)return this;if(m(t))return this.filter(function(e,n){return n.dir&&t.test(e)});var e=this.root+t,n=v.call(this,e),r=this.clone();return r.root=n.name,r},remove:function(t){t=this.root+t;var e=this.files[t];if(e||("/"!==t.slice(-1)&&(t+="/"),e=this.files[t]),e&&!e.dir)delete this.files[t];else for(var n=this.filter(function(e,n){return n.name.slice(0,t.length)===t}),r=0;r<n.length;r++)delete this.files[n[r].name];return this},generate:function(t){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},generateInternalStream:function(t){var e,n={};try{if((n=i.extend(t||{},{streamFiles:!1,compression:"STORE",compressionOptions:null,type:"",platform:"DOS",comment:null,mimeType:"application/zip",encodeFileName:r.utf8encode})).type=n.type.toLowerCase(),n.compression=n.compression.toUpperCase(),"binarystring"===n.type&&(n.type="string"),!n.type)throw new Error("No output type specified.");i.checkSupport(n.type),"darwin"!==n.platform&&"freebsd"!==n.platform&&"linux"!==n.platform&&"sunos"!==n.platform||(n.platform="UNIX"),"win32"===n.platform&&(n.platform="DOS");var s=n.comment||this.comment||"";e=l.generateWorker(this,n,s)}catch(t){(e=new o("error")).error(t)}return new a(e,n.type||"string",n.mimeType)},generateAsync:function(t,e){return this.generateInternalStream(t).accumulate(e)},generateNodeStream:function(t,e){return(t=t||{}).type||(t.type="nodebuffer"),this.generateInternalStream(t).toNodejsStream(e)}};t.exports=y},function(t,e,n){"use strict";var r=n(190);function i(t){r.call(this,t)}n(12).inherits(i,r),i.prototype.readData=function(t){this.checkOffset(t);var e=this.data.slice(this.zero+this.index,this.zero+this.index+t);return this.index+=t,e},t.exports=i},function(t,e,n){"use strict";var r=n(189);function i(t){r.call(this,t)}n(12).inherits(i,r),i.prototype.byteAt=function(t){return this.data.charCodeAt(this.zero+t)},i.prototype.lastIndexOfSignature=function(t){return this.data.lastIndexOf(t)-this.zero},i.prototype.readAndCheckSignature=function(t){return t===this.readData(4)},i.prototype.readData=function(t){this.checkOffset(t);var e=this.data.slice(this.zero+this.index,this.zero+this.index+t);return this.index+=t,e},t.exports=i},function(t,e,n){"use strict";var r=n(31),i=n(12);function o(t){r.call(this,"ConvertWorker to "+t),this.destType=t}i.inherits(o,r),o.prototype.processChunk=function(t){this.push({data:i.transformTo(this.destType,t.data),meta:t.meta})},t.exports=o},function(t,e,n){"use strict";var r=n(191),i=n(12),o=n(192),a=n(437),s=(n(60),n(42));function u(t){this.files=[],this.loadOptions=t}u.prototype={checkSignature:function(t){if(!this.reader.readAndCheckSignature(t)){this.reader.index-=4;var e=this.reader.readString(4);throw new Error("Corrupted zip or bug: unexpected signature ("+i.pretty(e)+", expected "+i.pretty(t)+")")}},isSignature:function(t,e){var n=this.reader.index;this.reader.setIndex(t);var r=this.reader.readString(4)===e;return this.reader.setIndex(n),r},readBlockEndOfCentral:function(){this.diskNumber=this.reader.readInt(2),this.diskWithCentralDirStart=this.reader.readInt(2),this.centralDirRecordsOnThisDisk=this.reader.readInt(2),this.centralDirRecords=this.reader.readInt(2),this.centralDirSize=this.reader.readInt(4),this.centralDirOffset=this.reader.readInt(4),this.zipCommentLength=this.reader.readInt(2);var t=this.reader.readData(this.zipCommentLength),e=s.uint8array?"uint8array":"array",n=i.transformTo(e,t);this.zipComment=this.loadOptions.decodeFileName(n)},readBlockZip64EndOfCentral:function(){this.zip64EndOfCentralSize=this.reader.readInt(8),this.reader.skip(4),this.diskNumber=this.reader.readInt(4),this.diskWithCentralDirStart=this.reader.readInt(4),this.centralDirRecordsOnThisDisk=this.reader.readInt(8),this.centralDirRecords=this.reader.readInt(8),this.centralDirSize=this.reader.readInt(8),this.centralDirOffset=this.reader.readInt(8),this.zip64ExtensibleData={};for(var t,e,n,r=this.zip64EndOfCentralSize-44;0<r;)t=this.reader.readInt(2),e=this.reader.readInt(4),n=this.reader.readData(e),this.zip64ExtensibleData[t]={id:t,length:e,value:n}},readBlockZip64EndOfCentralLocator:function(){if(this.diskWithZip64CentralDirStart=this.reader.readInt(4),this.relativeOffsetEndOfZip64CentralDir=this.reader.readInt(8),this.disksCount=this.reader.readInt(4),this.disksCount>1)throw new Error("Multi-volumes zip are not supported")},readLocalFiles:function(){var t,e;for(t=0;t<this.files.length;t++)e=this.files[t],this.reader.setIndex(e.localHeaderOffset),this.checkSignature(o.LOCAL_FILE_HEADER),e.readLocalPart(this.reader),e.handleUTF8(),e.processAttributes()},readCentralDir:function(){var t;for(this.reader.setIndex(this.centralDirOffset);this.reader.readAndCheckSignature(o.CENTRAL_FILE_HEADER);)(t=new a({zip64:this.zip64},this.loadOptions)).readCentralPart(this.reader),this.files.push(t);if(this.centralDirRecords!==this.files.length&&0!==this.centralDirRecords&&0===this.files.length)throw new Error("Corrupted zip or bug: expected "+this.centralDirRecords+" records in central dir, got "+this.files.length)},readEndOfCentral:function(){var t=this.reader.lastIndexOfSignature(o.CENTRAL_DIRECTORY_END);if(t<0)throw this.isSignature(0,o.LOCAL_FILE_HEADER)?new Error("Corrupted zip: can't find end of central directory"):new Error("Can't find end of central directory : is this a zip file ? If it is, see https://stuk.github.io/jszip/documentation/howto/read_zip.html");this.reader.setIndex(t);var e=t;if(this.checkSignature(o.CENTRAL_DIRECTORY_END),this.readBlockEndOfCentral(),this.diskNumber===i.MAX_VALUE_16BITS||this.diskWithCentralDirStart===i.MAX_VALUE_16BITS||this.centralDirRecordsOnThisDisk===i.MAX_VALUE_16BITS||this.centralDirRecords===i.MAX_VALUE_16BITS||this.centralDirSize===i.MAX_VALUE_32BITS||this.centralDirOffset===i.MAX_VALUE_32BITS){if(this.zip64=!0,(t=this.reader.lastIndexOfSignature(o.ZIP64_CENTRAL_DIRECTORY_LOCATOR))<0)throw new Error("Corrupted zip: can't find the ZIP64 end of central directory locator");if(this.reader.setIndex(t),this.checkSignature(o.ZIP64_CENTRAL_DIRECTORY_LOCATOR),this.readBlockZip64EndOfCentralLocator(),!this.isSignature(this.relativeOffsetEndOfZip64CentralDir,o.ZIP64_CENTRAL_DIRECTORY_END)&&(this.relativeOffsetEndOfZip64CentralDir=this.reader.lastIndexOfSignature(o.ZIP64_CENTRAL_DIRECTORY_END),this.relativeOffsetEndOfZip64CentralDir<0))throw new Error("Corrupted zip: can't find the ZIP64 end of central directory");this.reader.setIndex(this.relativeOffsetEndOfZip64CentralDir),this.checkSignature(o.ZIP64_CENTRAL_DIRECTORY_END),this.readBlockZip64EndOfCentral()}var n=this.centralDirOffset+this.centralDirSize;this.zip64&&(n+=20,n+=12+this.zip64EndOfCentralSize);var r=e-n;if(r>0)this.isSignature(e,o.CENTRAL_FILE_HEADER)||(this.reader.zero=r);else if(r<0)throw new Error("Corrupted zip: missing "+Math.abs(r)+" bytes.")},prepareReader:function(t){this.reader=r(t)},load:function(t){this.prepareReader(t),this.readEndOfCentral(),this.readCentralDir(),this.readLocalFiles()}},t.exports=u},function(t,e,n){"use strict";var r=n(191),i=n(12),o=n(119),a=n(120),s=n(60),u=n(185),c=n(42);function l(t,e){this.options=t,this.loadOptions=e}l.prototype={isEncrypted:function(){return 1==(1&this.bitFlag)},useUTF8:function(){return 2048==(2048&this.bitFlag)},readLocalPart:function(t){var e,n;if(t.skip(22),this.fileNameLength=t.readInt(2),n=t.readInt(2),this.fileName=t.readData(this.fileNameLength),t.skip(n),-1===this.compressedSize||-1===this.uncompressedSize)throw new Error("Bug or corrupted zip : didn't get enough informations from the central directory (compressedSize === -1 || uncompressedSize === -1)");if(null===(e=function(t){for(var e in u)if(u.hasOwnProperty(e)&&u[e].magic===t)return u[e];return null}(this.compressionMethod)))throw new Error("Corrupted zip : compression "+i.pretty(this.compressionMethod)+" unknown (inner file : "+i.transformTo("string",this.fileName)+")");this.decompressed=new o(this.compressedSize,this.uncompressedSize,this.crc32,e,t.readData(this.compressedSize))},readCentralPart:function(t){this.versionMadeBy=t.readInt(2),t.skip(2),this.bitFlag=t.readInt(2),this.compressionMethod=t.readString(2),this.date=t.readDate(),this.crc32=t.readInt(4),this.compressedSize=t.readInt(4),this.uncompressedSize=t.readInt(4);var e=t.readInt(2);if(this.extraFieldsLength=t.readInt(2),this.fileCommentLength=t.readInt(2),this.diskNumberStart=t.readInt(2),this.internalFileAttributes=t.readInt(2),this.externalFileAttributes=t.readInt(4),this.localHeaderOffset=t.readInt(4),this.isEncrypted())throw new Error("Encrypted zip are not supported");t.skip(e),this.readExtraFields(t),this.parseZIP64ExtraField(t),this.fileComment=t.readData(this.fileCommentLength)},processAttributes:function(){this.unixPermissions=null,this.dosPermissions=null;var t=this.versionMadeBy>>8;this.dir=!!(16&this.externalFileAttributes),0===t&&(this.dosPermissions=63&this.externalFileAttributes),3===t&&(this.unixPermissions=this.externalFileAttributes>>16&65535),this.dir||"/"!==this.fileNameStr.slice(-1)||(this.dir=!0)},parseZIP64ExtraField:function(t){if(this.extraFields[1]){var e=r(this.extraFields[1].value);this.uncompressedSize===i.MAX_VALUE_32BITS&&(this.uncompressedSize=e.readInt(8)),this.compressedSize===i.MAX_VALUE_32BITS&&(this.compressedSize=e.readInt(8)),this.localHeaderOffset===i.MAX_VALUE_32BITS&&(this.localHeaderOffset=e.readInt(8)),this.diskNumberStart===i.MAX_VALUE_32BITS&&(this.diskNumberStart=e.readInt(4))}},readExtraFields:function(t){var e,n,r,i=t.index+this.extraFieldsLength;for(this.extraFields||(this.extraFields={});t.index<i;)e=t.readInt(2),n=t.readInt(2),r=t.readData(n),this.extraFields[e]={id:e,length:n,value:r}},handleUTF8:function(){var t=c.uint8array?"uint8array":"array";if(this.useUTF8())this.fileNameStr=s.utf8decode(this.fileName),this.fileCommentStr=s.utf8decode(this.fileComment);else{var e=this.findExtraFieldUnicodePath();if(null!==e)this.fileNameStr=e;else{var n=i.transformTo(t,this.fileName);this.fileNameStr=this.loadOptions.decodeFileName(n)}var r=this.findExtraFieldUnicodeComment();if(null!==r)this.fileCommentStr=r;else{var o=i.transformTo(t,this.fileComment);this.fileCommentStr=this.loadOptions.decodeFileName(o)}}},findExtraFieldUnicodePath:function(){var t=this.extraFields[28789];if(t){var e=r(t.value);return 1!==e.readInt(1)?null:a(this.fileName)!==e.readInt(4)?null:s.utf8decode(e.readData(t.length-5))}return null},findExtraFieldUnicodeComment:function(){var t=this.extraFields[25461];if(t){var e=r(t.value);return 1!==e.readInt(1)?null:a(this.fileComment)!==e.readInt(4)?null:s.utf8decode(e.readData(t.length-5))}return null}},t.exports=l},function(t,e,n){"use strict";var r=n(196),i=n(195),o=n(60),a=n(119),s=n(31),u=function(t,e,n){this.name=t,this.dir=n.dir,this.date=n.date,this.comment=n.comment,this.unixPermissions=n.unixPermissions,this.dosPermissions=n.dosPermissions,this._data=e,this._dataBinary=n.binary,this.options={compression:n.compression,compressionOptions:n.compressionOptions}};u.prototype={internalStream:function(t){var e=null,n="string";try{if(!t)throw new Error("No output type specified.");var i="string"===(n=t.toLowerCase())||"text"===n;"binarystring"!==n&&"text"!==n||(n="string"),e=this._decompressWorker();var a=!this._dataBinary;a&&!i&&(e=e.pipe(new o.Utf8EncodeWorker)),!a&&i&&(e=e.pipe(new o.Utf8DecodeWorker))}catch(t){(e=new s("error")).error(t)}return new r(e,n,"")},async:function(t,e){return this.internalStream(t).accumulate(e)},nodeStream:function(t,e){return this.internalStream(t||"nodebuffer").toNodejsStream(e)},_compressWorker:function(t,e){if(this._data instanceof a&&this._data.compression.magic===t.magic)return this._data.getCompressedWorker();var n=this._decompressWorker();return this._dataBinary||(n=n.pipe(new o.Utf8EncodeWorker)),a.createWorkerFrom(n,t,e)},_decompressWorker:function(){return this._data instanceof a?this._data.getContentWorker():this._data instanceof s?this._data:new i(this._data)}};for(var c=["asText","asBinary","asNodeBuffer","asUint8Array","asArrayBuffer"],l=function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},h=0;h<c.length;h++)u.prototype[c[h]]=l;t.exports=u},function(t,e,n){n(452),t.exports=n(197).setImmediate},function(t,e){t.exports=function(t){if("function"!=typeof t)throw TypeError(t+" is not a function!");return t}},function(t,e,n){var r=n(122);t.exports=function(t){if(!r(t))throw TypeError(t+" is not an object!");return t}},function(t,e){var n={}.toString;t.exports=function(t){return n.call(t).slice(8,-1)}},function(t,e,n){var r=n(91),i=n(197),o=n(198),a=n(444),s=function(t,e,n){var u,c,l,h=t&s.F,d=t&s.G,f=t&s.S,p=t&s.P,g=t&s.B,v=t&s.W,m=d?i:i[e]||(i[e]={}),y=m.prototype,_=d?r:f?r[e]:(r[e]||{}).prototype;for(u in d&&(n=e),n)(c=!h&&_&&void 0!==_[u])&&u in m||(l=c?_[u]:n[u],m[u]=d&&"function"!=typeof _[u]?n[u]:g&&c?o(l,r):v&&_[u]==l?function(t){var e=function(e,n,r){if(this instanceof t){switch(arguments.length){case 0:return new t;case 1:return new t(e);case 2:return new t(e,n)}return new t(e,n,r)}return t.apply(this,arguments)};return e.prototype=t.prototype,e}(l):p&&"function"==typeof l?o(Function.call,l):l,p&&((m.virtual||(m.virtual={}))[u]=l,t&s.R&&y&&!y[u]&&a(y,u,l)))};s.F=1,s.G=2,s.S=4,s.P=8,s.B=16,s.W=32,s.U=64,s.R=128,t.exports=s},function(t,e,n){var r=n(448),i=n(449);t.exports=n(121)?function(t,e,n){return r.f(t,e,i(1,n))}:function(t,e,n){return t[e]=n,t}},function(t,e,n){t.exports=n(91).document&&document.documentElement},function(t,e,n){t.exports=!n(121)&&!n(200)(function(){return 7!=Object.defineProperty(n(199)("div"),"a",{get:function(){return 7}}).a})},function(t,e){t.exports=function(t,e,n){var r=void 0===n;switch(e.length){case 0:return r?t():t.call(n);case 1:return r?t(e[0]):t.call(n,e[0]);case 2:return r?t(e[0],e[1]):t.call(n,e[0],e[1]);case 3:return r?t(e[0],e[1],e[2]):t.call(n,e[0],e[1],e[2]);case 4:return r?t(e[0],e[1],e[2],e[3]):t.call(n,e[0],e[1],e[2],e[3])}return t.apply(n,e)}},function(t,e,n){var r=n(441),i=n(446),o=n(451),a=Object.defineProperty;e.f=n(121)?Object.defineProperty:function(t,e,n){if(r(t),e=o(e,!0),r(n),i)try{return a(t,e,n)}catch(t){}if("get"in n||"set"in n)throw TypeError("Accessors not supported!");return"value"in n&&(t[e]=n.value),t}},function(t,e){t.exports=function(t,e){return{enumerable:!(1&t),configurable:!(2&t),writable:!(4&t),value:e}}},function(t,e,n){var r,i,o,a=n(198),s=n(447),u=n(445),c=n(199),l=n(91),h=l.process,d=l.setImmediate,f=l.clearImmediate,p=l.MessageChannel,g=0,v={},m=function(){var t=+this;if(v.hasOwnProperty(t)){var e=v[t];delete v[t],e()}},y=function(t){m.call(t.data)};d&&f||(d=function(t){for(var e=[],n=1;arguments.length>n;)e.push(arguments[n++]);return v[++g]=function(){s("function"==typeof t?t:Function(t),e)},r(g),g},f=function(t){delete v[t]},"process"==n(442)(h)?r=function(t){h.nextTick(a(m,t,1))}:p?(o=(i=new p).port2,i.port1.onmessage=y,r=a(o.postMessage,o,1)):l.addEventListener&&"function"==typeof postMessage&&!l.importScripts?(r=function(t){l.postMessage(t+"","*")},l.addEventListener("message",y,!1)):r="onreadystatechange"in c("script")?function(t){u.appendChild(c("script")).onreadystatechange=function(){u.removeChild(this),m.call(t)}}:function(t){setTimeout(a(m,t,1),0)}),t.exports={set:d,clear:f}},function(t,e,n){var r=n(122);t.exports=function(t,e){if(!r(t))return t;var n,i;if(e&&"function"==typeof(n=t.toString)&&!r(i=n.call(t)))return i;if("function"==typeof(n=t.valueOf)&&!r(i=n.call(t)))return i;if(!e&&"function"==typeof(n=t.toString)&&!r(i=n.call(t)))return i;throw TypeError("Can't convert object to primitive value")}},function(t,e,n){var r=n(443),i=n(450);r(r.G+r.B,{setImmediate:i.set,clearImmediate:i.clear})},function(t,e,n){"use strict";var r=n(423);function i(){}var o={},a=["REJECTED"],s=["FULFILLED"],u=["PENDING"];function c(t){if("function"!=typeof t)throw new TypeError("resolver must be a function");this.state=u,this.queue=[],this.outcome=void 0,t!==i&&f(this,t)}function l(t,e,n){this.promise=t,"function"==typeof e&&(this.onFulfilled=e,this.callFulfilled=this.otherCallFulfilled),"function"==typeof n&&(this.onRejected=n,this.callRejected=this.otherCallRejected)}function h(t,e,n){r(function(){var r;try{r=e(n)}catch(e){return o.reject(t,e)}r===t?o.reject(t,new TypeError("Cannot resolve promise with itself")):o.resolve(t,r)})}function d(t){var e=t&&t.then;if(t&&("object"==typeof t||"function"==typeof t)&&"function"==typeof e)return function(){e.apply(t,arguments)}}function f(t,e){var n=!1;function r(e){n||(n=!0,o.reject(t,e))}function i(e){n||(n=!0,o.resolve(t,e))}var a=p(function(){e(i,r)});"error"===a.status&&r(a.value)}function p(t,e){var n={};try{n.value=t(e),n.status="success"}catch(t){n.status="error",n.value=t}return n}t.exports=c,c.prototype.catch=function(t){return this.then(null,t)},c.prototype.then=function(t,e){if("function"!=typeof t&&this.state===s||"function"!=typeof e&&this.state===a)return this;var n=new this.constructor(i);return this.state!==u?h(n,this.state===s?t:e,this.outcome):this.queue.push(new l(n,t,e)),n},l.prototype.callFulfilled=function(t){o.resolve(this.promise,t)},l.prototype.otherCallFulfilled=function(t){h(this.promise,this.onFulfilled,t)},l.prototype.callRejected=function(t){o.reject(this.promise,t)},l.prototype.otherCallRejected=function(t){h(this.promise,this.onRejected,t)},o.resolve=function(t,e){var n=p(d,e);if("error"===n.status)return o.reject(t,n.value);var r=n.value;if(r)f(t,r);else{t.state=s,t.outcome=e;for(var i=-1,a=t.queue.length;++i<a;)t.queue[i].callFulfilled(e)}return t},o.reject=function(t,e){t.state=a,t.outcome=e;for(var n=-1,r=t.queue.length;++n<r;)t.queue[n].callRejected(e);return t},c.resolve=function(t){return t instanceof this?t:o.resolve(new this(i),t)},c.reject=function(t){var e=new this(i);return o.reject(e,t)},c.all=function(t){var e=this;if("[object Array]"!==Object.prototype.toString.call(t))return this.reject(new TypeError("must be an array"));var n=t.length,r=!1;if(!n)return this.resolve([]);for(var a=new Array(n),s=0,u=-1,c=new this(i);++u<n;)l(t[u],u);return c;function l(t,i){e.resolve(t).then(function(t){a[i]=t,++s!==n||r||(r=!0,o.resolve(c,a))},function(t){r||(r=!0,o.reject(c,t))})}},c.race=function(t){if("[object Array]"!==Object.prototype.toString.call(t))return this.reject(new TypeError("must be an array"));var e=t.length,n=!1;if(!e)return this.resolve([]);for(var r,a=-1,s=new this(i);++a<e;)r=t[a],this.resolve(r).then(function(t){n||(n=!0,o.resolve(s,t))},function(t){n||(n=!0,o.reject(s,t))});return s}},function(t,e,n){"use strict";var r={};(0,n(43).assign)(r,n(455),n(456),n(203)),t.exports=r},function(t,e,n){"use strict";var r=n(457),i=n(43),o=n(201),a=n(123),s=n(205),u=Object.prototype.toString,c=0,l=-1,h=0,d=8;function f(t){if(!(this instanceof f))return new f(t);this.options=i.assign({level:l,method:d,chunkSize:16384,windowBits:15,memLevel:8,strategy:h,to:""},t||{});var e=this.options;e.raw&&e.windowBits>0?e.windowBits=-e.windowBits:e.gzip&&e.windowBits>0&&e.windowBits<16&&(e.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new s,this.strm.avail_out=0;var n=r.deflateInit2(this.strm,e.level,e.method,e.windowBits,e.memLevel,e.strategy);if(n!==c)throw new Error(a[n]);if(e.header&&r.deflateSetHeader(this.strm,e.header),e.dictionary){var p;if(p="string"==typeof e.dictionary?o.string2buf(e.dictionary):"[object ArrayBuffer]"===u.call(e.dictionary)?new Uint8Array(e.dictionary):e.dictionary,(n=r.deflateSetDictionary(this.strm,p))!==c)throw new Error(a[n]);this._dict_set=!0}}function p(t,e){var n=new f(e);if(n.push(t,!0),n.err)throw n.msg||a[n.err];return n.result}f.prototype.push=function(t,e){var n,a,s=this.strm,l=this.options.chunkSize;if(this.ended)return!1;a=e===~~e?e:!0===e?4:0,"string"==typeof t?s.input=o.string2buf(t):"[object ArrayBuffer]"===u.call(t)?s.input=new Uint8Array(t):s.input=t,s.next_in=0,s.avail_in=s.input.length;do{if(0===s.avail_out&&(s.output=new i.Buf8(l),s.next_out=0,s.avail_out=l),1!==(n=r.deflate(s,a))&&n!==c)return this.onEnd(n),this.ended=!0,!1;0!==s.avail_out&&(0!==s.avail_in||4!==a&&2!==a)||("string"===this.options.to?this.onData(o.buf2binstring(i.shrinkBuf(s.output,s.next_out))):this.onData(i.shrinkBuf(s.output,s.next_out)))}while((s.avail_in>0||0===s.avail_out)&&1!==n);return 4===a?(n=r.deflateEnd(this.strm),this.onEnd(n),this.ended=!0,n===c):2!==a||(this.onEnd(c),s.avail_out=0,!0)},f.prototype.onData=function(t){this.chunks.push(t)},f.prototype.onEnd=function(t){t===c&&("string"===this.options.to?this.result=this.chunks.join(""):this.result=i.flattenChunks(this.chunks)),this.chunks=[],this.err=t,this.msg=this.strm.msg},e.Deflate=f,e.deflate=p,e.deflateRaw=function(t,e){return(e=e||{}).raw=!0,p(t,e)},e.gzip=function(t,e){return(e=e||{}).gzip=!0,p(t,e)}},function(t,e,n){"use strict";var r=n(460),i=n(43),o=n(201),a=n(203),s=n(123),u=n(205),c=n(458),l=Object.prototype.toString;function h(t){if(!(this instanceof h))return new h(t);this.options=i.assign({chunkSize:16384,windowBits:0,to:""},t||{});var e=this.options;e.raw&&e.windowBits>=0&&e.windowBits<16&&(e.windowBits=-e.windowBits,0===e.windowBits&&(e.windowBits=-15)),!(e.windowBits>=0&&e.windowBits<16)||t&&t.windowBits||(e.windowBits+=32),e.windowBits>15&&e.windowBits<48&&0==(15&e.windowBits)&&(e.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new u,this.strm.avail_out=0;var n=r.inflateInit2(this.strm,e.windowBits);if(n!==a.Z_OK)throw new Error(s[n]);this.header=new c,r.inflateGetHeader(this.strm,this.header)}function d(t,e){var n=new h(e);if(n.push(t,!0),n.err)throw n.msg||s[n.err];return n.result}h.prototype.push=function(t,e){var n,s,u,c,h,d,f=this.strm,p=this.options.chunkSize,g=this.options.dictionary,v=!1;if(this.ended)return!1;s=e===~~e?e:!0===e?a.Z_FINISH:a.Z_NO_FLUSH,"string"==typeof t?f.input=o.binstring2buf(t):"[object ArrayBuffer]"===l.call(t)?f.input=new Uint8Array(t):f.input=t,f.next_in=0,f.avail_in=f.input.length;do{if(0===f.avail_out&&(f.output=new i.Buf8(p),f.next_out=0,f.avail_out=p),(n=r.inflate(f,a.Z_NO_FLUSH))===a.Z_NEED_DICT&&g&&(d="string"==typeof g?o.string2buf(g):"[object ArrayBuffer]"===l.call(g)?new Uint8Array(g):g,n=r.inflateSetDictionary(this.strm,d)),n===a.Z_BUF_ERROR&&!0===v&&(n=a.Z_OK,v=!1),n!==a.Z_STREAM_END&&n!==a.Z_OK)return this.onEnd(n),this.ended=!0,!1;f.next_out&&(0!==f.avail_out&&n!==a.Z_STREAM_END&&(0!==f.avail_in||s!==a.Z_FINISH&&s!==a.Z_SYNC_FLUSH)||("string"===this.options.to?(u=o.utf8border(f.output,f.next_out),c=f.next_out-u,h=o.buf2string(f.output,u),f.next_out=c,f.avail_out=p-c,c&&i.arraySet(f.output,f.output,u,c,0),this.onData(h)):this.onData(i.shrinkBuf(f.output,f.next_out)))),0===f.avail_in&&0===f.avail_out&&(v=!0)}while((f.avail_in>0||0===f.avail_out)&&n!==a.Z_STREAM_END);return n===a.Z_STREAM_END&&(s=a.Z_FINISH),s===a.Z_FINISH?(n=r.inflateEnd(this.strm),this.onEnd(n),this.ended=!0,n===a.Z_OK):s!==a.Z_SYNC_FLUSH||(this.onEnd(a.Z_OK),f.avail_out=0,!0)},h.prototype.onData=function(t){this.chunks.push(t)},h.prototype.onEnd=function(t){t===a.Z_OK&&("string"===this.options.to?this.result=this.chunks.join(""):this.result=i.flattenChunks(this.chunks)),this.chunks=[],this.err=t,this.msg=this.strm.msg},e.Inflate=h,e.inflate=d,e.inflateRaw=function(t,e){return(e=e||{}).raw=!0,d(t,e)},e.ungzip=d},function(t,e,n){"use strict";var r,i=n(43),o=n(462),a=n(202),s=n(204),u=n(123),c=0,l=4,h=0,d=-2,f=-1,p=1,g=4,v=2,m=8,y=9,_=286,E=30,A=19,S=2*_+1,T=15,x=3,b=258,w=b+x+1,C=42,I=103,L=113,N=666,O=1,R=2,M=3,D=4;function P(t,e){return t.msg=u[e],e}function k(t){return(t<<1)-(t>4?9:0)}function B(t){for(var e=t.length;--e>=0;)t[e]=0}function F(t){var e=t.state,n=e.pending;n>t.avail_out&&(n=t.avail_out),0!==n&&(i.arraySet(t.output,e.pending_buf,e.pending_out,n,t.next_out),t.next_out+=n,e.pending_out+=n,t.total_out+=n,t.avail_out-=n,e.pending-=n,0===e.pending&&(e.pending_out=0))}function V(t,e){o._tr_flush_block(t,t.block_start>=0?t.block_start:-1,t.strstart-t.block_start,e),t.block_start=t.strstart,F(t.strm)}function U(t,e){t.pending_buf[t.pending++]=e}function H(t,e){t.pending_buf[t.pending++]=e>>>8&255,t.pending_buf[t.pending++]=255&e}function Y(t,e){var n,r,i=t.max_chain_length,o=t.strstart,a=t.prev_length,s=t.nice_match,u=t.strstart>t.w_size-w?t.strstart-(t.w_size-w):0,c=t.window,l=t.w_mask,h=t.prev,d=t.strstart+b,f=c[o+a-1],p=c[o+a];t.prev_length>=t.good_match&&(i>>=2),s>t.lookahead&&(s=t.lookahead);do{if(c[(n=e)+a]===p&&c[n+a-1]===f&&c[n]===c[o]&&c[++n]===c[o+1]){o+=2,n++;do{}while(c[++o]===c[++n]&&c[++o]===c[++n]&&c[++o]===c[++n]&&c[++o]===c[++n]&&c[++o]===c[++n]&&c[++o]===c[++n]&&c[++o]===c[++n]&&c[++o]===c[++n]&&o<d);if(r=b-(d-o),o=d-b,r>a){if(t.match_start=e,a=r,r>=s)break;f=c[o+a-1],p=c[o+a]}}}while((e=h[e&l])>u&&0!=--i);return a<=t.lookahead?a:t.lookahead}function G(t){var e,n,r,o,u,c,l,h,d,f,p=t.w_size;do{if(o=t.window_size-t.lookahead-t.strstart,t.strstart>=p+(p-w)){i.arraySet(t.window,t.window,p,p,0),t.match_start-=p,t.strstart-=p,t.block_start-=p,e=n=t.hash_size;do{r=t.head[--e],t.head[e]=r>=p?r-p:0}while(--n);e=n=p;do{r=t.prev[--e],t.prev[e]=r>=p?r-p:0}while(--n);o+=p}if(0===t.strm.avail_in)break;if(c=t.strm,l=t.window,h=t.strstart+t.lookahead,d=o,f=void 0,(f=c.avail_in)>d&&(f=d),n=0===f?0:(c.avail_in-=f,i.arraySet(l,c.input,c.next_in,f,h),1===c.state.wrap?c.adler=a(c.adler,l,f,h):2===c.state.wrap&&(c.adler=s(c.adler,l,f,h)),c.next_in+=f,c.total_in+=f,f),t.lookahead+=n,t.lookahead+t.insert>=x)for(u=t.strstart-t.insert,t.ins_h=t.window[u],t.ins_h=(t.ins_h<<t.hash_shift^t.window[u+1])&t.hash_mask;t.insert&&(t.ins_h=(t.ins_h<<t.hash_shift^t.window[u+x-1])&t.hash_mask,t.prev[u&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=u,u++,t.insert--,!(t.lookahead+t.insert<x)););}while(t.lookahead<w&&0!==t.strm.avail_in)}function j(t,e){for(var n,r;;){if(t.lookahead<w){if(G(t),t.lookahead<w&&e===c)return O;if(0===t.lookahead)break}if(n=0,t.lookahead>=x&&(t.ins_h=(t.ins_h<<t.hash_shift^t.window[t.strstart+x-1])&t.hash_mask,n=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart),0!==n&&t.strstart-n<=t.w_size-w&&(t.match_length=Y(t,n)),t.match_length>=x)if(r=o._tr_tally(t,t.strstart-t.match_start,t.match_length-x),t.lookahead-=t.match_length,t.match_length<=t.max_lazy_match&&t.lookahead>=x){t.match_length--;do{t.strstart++,t.ins_h=(t.ins_h<<t.hash_shift^t.window[t.strstart+x-1])&t.hash_mask,n=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart}while(0!=--t.match_length);t.strstart++}else t.strstart+=t.match_length,t.match_length=0,t.ins_h=t.window[t.strstart],t.ins_h=(t.ins_h<<t.hash_shift^t.window[t.strstart+1])&t.hash_mask;else r=o._tr_tally(t,0,t.window[t.strstart]),t.lookahead--,t.strstart++;if(r&&(V(t,!1),0===t.strm.avail_out))return O}return t.insert=t.strstart<x-1?t.strstart:x-1,e===l?(V(t,!0),0===t.strm.avail_out?M:D):t.last_lit&&(V(t,!1),0===t.strm.avail_out)?O:R}function z(t,e){for(var n,r,i;;){if(t.lookahead<w){if(G(t),t.lookahead<w&&e===c)return O;if(0===t.lookahead)break}if(n=0,t.lookahead>=x&&(t.ins_h=(t.ins_h<<t.hash_shift^t.window[t.strstart+x-1])&t.hash_mask,n=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart),t.prev_length=t.match_length,t.prev_match=t.match_start,t.match_length=x-1,0!==n&&t.prev_length<t.max_lazy_match&&t.strstart-n<=t.w_size-w&&(t.match_length=Y(t,n),t.match_length<=5&&(t.strategy===p||t.match_length===x&&t.strstart-t.match_start>4096)&&(t.match_length=x-1)),t.prev_length>=x&&t.match_length<=t.prev_length){i=t.strstart+t.lookahead-x,r=o._tr_tally(t,t.strstart-1-t.prev_match,t.prev_length-x),t.lookahead-=t.prev_length-1,t.prev_length-=2;do{++t.strstart<=i&&(t.ins_h=(t.ins_h<<t.hash_shift^t.window[t.strstart+x-1])&t.hash_mask,n=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart)}while(0!=--t.prev_length);if(t.match_available=0,t.match_length=x-1,t.strstart++,r&&(V(t,!1),0===t.strm.avail_out))return O}else if(t.match_available){if((r=o._tr_tally(t,0,t.window[t.strstart-1]))&&V(t,!1),t.strstart++,t.lookahead--,0===t.strm.avail_out)return O}else t.match_available=1,t.strstart++,t.lookahead--}return t.match_available&&(r=o._tr_tally(t,0,t.window[t.strstart-1]),t.match_available=0),t.insert=t.strstart<x-1?t.strstart:x-1,e===l?(V(t,!0),0===t.strm.avail_out?M:D):t.last_lit&&(V(t,!1),0===t.strm.avail_out)?O:R}function W(t,e,n,r,i){this.good_length=t,this.max_lazy=e,this.nice_length=n,this.max_chain=r,this.func=i}function K(t){var e;return t&&t.state?(t.total_in=t.total_out=0,t.data_type=v,(e=t.state).pending=0,e.pending_out=0,e.wrap<0&&(e.wrap=-e.wrap),e.status=e.wrap?C:L,t.adler=2===e.wrap?0:1,e.last_flush=c,o._tr_init(e),h):P(t,d)}function Q(t){var e,n=K(t);return n===h&&((e=t.state).window_size=2*e.w_size,B(e.head),e.max_lazy_match=r[e.level].max_lazy,e.good_match=r[e.level].good_length,e.nice_match=r[e.level].nice_length,e.max_chain_length=r[e.level].max_chain,e.strstart=0,e.block_start=0,e.lookahead=0,e.insert=0,e.match_length=e.prev_length=x-1,e.match_available=0,e.ins_h=0),n}function q(t,e,n,r,o,a){if(!t)return d;var s=1;if(e===f&&(e=6),r<0?(s=0,r=-r):r>15&&(s=2,r-=16),o<1||o>y||n!==m||r<8||r>15||e<0||e>9||a<0||a>g)return P(t,d);8===r&&(r=9);var u=new function(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=m,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new i.Buf16(2*S),this.dyn_dtree=new i.Buf16(2*(2*E+1)),this.bl_tree=new i.Buf16(2*(2*A+1)),B(this.dyn_ltree),B(this.dyn_dtree),B(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new i.Buf16(T+1),this.heap=new i.Buf16(2*_+1),B(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new i.Buf16(2*_+1),B(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0};return t.state=u,u.strm=t,u.wrap=s,u.gzhead=null,u.w_bits=r,u.w_size=1<<u.w_bits,u.w_mask=u.w_size-1,u.hash_bits=o+7,u.hash_size=1<<u.hash_bits,u.hash_mask=u.hash_size-1,u.hash_shift=~~((u.hash_bits+x-1)/x),u.window=new i.Buf8(2*u.w_size),u.head=new i.Buf16(u.hash_size),u.prev=new i.Buf16(u.w_size),u.lit_bufsize=1<<o+6,u.pending_buf_size=4*u.lit_bufsize,u.pending_buf=new i.Buf8(u.pending_buf_size),u.d_buf=1*u.lit_bufsize,u.l_buf=3*u.lit_bufsize,u.level=e,u.strategy=a,u.method=n,Q(t)}r=[new W(0,0,0,0,function(t,e){var n=65535;for(n>t.pending_buf_size-5&&(n=t.pending_buf_size-5);;){if(t.lookahead<=1){if(G(t),0===t.lookahead&&e===c)return O;if(0===t.lookahead)break}t.strstart+=t.lookahead,t.lookahead=0;var r=t.block_start+n;if((0===t.strstart||t.strstart>=r)&&(t.lookahead=t.strstart-r,t.strstart=r,V(t,!1),0===t.strm.avail_out))return O;if(t.strstart-t.block_start>=t.w_size-w&&(V(t,!1),0===t.strm.avail_out))return O}return t.insert=0,e===l?(V(t,!0),0===t.strm.avail_out?M:D):(t.strstart>t.block_start&&(V(t,!1),t.strm.avail_out),O)}),new W(4,4,8,4,j),new W(4,5,16,8,j),new W(4,6,32,32,j),new W(4,4,16,16,z),new W(8,16,32,32,z),new W(8,16,128,128,z),new W(8,32,128,256,z),new W(32,128,258,1024,z),new W(32,258,258,4096,z)],e.deflateInit=function(t,e){return q(t,e,m,15,8,0)},e.deflateInit2=q,e.deflateReset=Q,e.deflateResetKeep=K,e.deflateSetHeader=function(t,e){return t&&t.state?2!==t.state.wrap?d:(t.state.gzhead=e,h):d},e.deflate=function(t,e){var n,i,a,u;if(!t||!t.state||e>5||e<0)return t?P(t,d):d;if(i=t.state,!t.output||!t.input&&0!==t.avail_in||i.status===N&&e!==l)return P(t,0===t.avail_out?-5:d);if(i.strm=t,n=i.last_flush,i.last_flush=e,i.status===C)if(2===i.wrap)t.adler=0,U(i,31),U(i,139),U(i,8),i.gzhead?(U(i,(i.gzhead.text?1:0)+(i.gzhead.hcrc?2:0)+(i.gzhead.extra?4:0)+(i.gzhead.name?8:0)+(i.gzhead.comment?16:0)),U(i,255&i.gzhead.time),U(i,i.gzhead.time>>8&255),U(i,i.gzhead.time>>16&255),U(i,i.gzhead.time>>24&255),U(i,9===i.level?2:i.strategy>=2||i.level<2?4:0),U(i,255&i.gzhead.os),i.gzhead.extra&&i.gzhead.extra.length&&(U(i,255&i.gzhead.extra.length),U(i,i.gzhead.extra.length>>8&255)),i.gzhead.hcrc&&(t.adler=s(t.adler,i.pending_buf,i.pending,0)),i.gzindex=0,i.status=69):(U(i,0),U(i,0),U(i,0),U(i,0),U(i,0),U(i,9===i.level?2:i.strategy>=2||i.level<2?4:0),U(i,3),i.status=L);else{var f=m+(i.w_bits-8<<4)<<8;f|=(i.strategy>=2||i.level<2?0:i.level<6?1:6===i.level?2:3)<<6,0!==i.strstart&&(f|=32),f+=31-f%31,i.status=L,H(i,f),0!==i.strstart&&(H(i,t.adler>>>16),H(i,65535&t.adler)),t.adler=1}if(69===i.status)if(i.gzhead.extra){for(a=i.pending;i.gzindex<(65535&i.gzhead.extra.length)&&(i.pending!==i.pending_buf_size||(i.gzhead.hcrc&&i.pending>a&&(t.adler=s(t.adler,i.pending_buf,i.pending-a,a)),F(t),a=i.pending,i.pending!==i.pending_buf_size));)U(i,255&i.gzhead.extra[i.gzindex]),i.gzindex++;i.gzhead.hcrc&&i.pending>a&&(t.adler=s(t.adler,i.pending_buf,i.pending-a,a)),i.gzindex===i.gzhead.extra.length&&(i.gzindex=0,i.status=73)}else i.status=73;if(73===i.status)if(i.gzhead.name){a=i.pending;do{if(i.pending===i.pending_buf_size&&(i.gzhead.hcrc&&i.pending>a&&(t.adler=s(t.adler,i.pending_buf,i.pending-a,a)),F(t),a=i.pending,i.pending===i.pending_buf_size)){u=1;break}u=i.gzindex<i.gzhead.name.length?255&i.gzhead.name.charCodeAt(i.gzindex++):0,U(i,u)}while(0!==u);i.gzhead.hcrc&&i.pending>a&&(t.adler=s(t.adler,i.pending_buf,i.pending-a,a)),0===u&&(i.gzindex=0,i.status=91)}else i.status=91;if(91===i.status)if(i.gzhead.comment){a=i.pending;do{if(i.pending===i.pending_buf_size&&(i.gzhead.hcrc&&i.pending>a&&(t.adler=s(t.adler,i.pending_buf,i.pending-a,a)),F(t),a=i.pending,i.pending===i.pending_buf_size)){u=1;break}u=i.gzindex<i.gzhead.comment.length?255&i.gzhead.comment.charCodeAt(i.gzindex++):0,U(i,u)}while(0!==u);i.gzhead.hcrc&&i.pending>a&&(t.adler=s(t.adler,i.pending_buf,i.pending-a,a)),0===u&&(i.status=I)}else i.status=I;if(i.status===I&&(i.gzhead.hcrc?(i.pending+2>i.pending_buf_size&&F(t),i.pending+2<=i.pending_buf_size&&(U(i,255&t.adler),U(i,t.adler>>8&255),t.adler=0,i.status=L)):i.status=L),0!==i.pending){if(F(t),0===t.avail_out)return i.last_flush=-1,h}else if(0===t.avail_in&&k(e)<=k(n)&&e!==l)return P(t,-5);if(i.status===N&&0!==t.avail_in)return P(t,-5);if(0!==t.avail_in||0!==i.lookahead||e!==c&&i.status!==N){var p=2===i.strategy?function(t,e){for(var n;;){if(0===t.lookahead&&(G(t),0===t.lookahead)){if(e===c)return O;break}if(t.match_length=0,n=o._tr_tally(t,0,t.window[t.strstart]),t.lookahead--,t.strstart++,n&&(V(t,!1),0===t.strm.avail_out))return O}return t.insert=0,e===l?(V(t,!0),0===t.strm.avail_out?M:D):t.last_lit&&(V(t,!1),0===t.strm.avail_out)?O:R}(i,e):3===i.strategy?function(t,e){for(var n,r,i,a,s=t.window;;){if(t.lookahead<=b){if(G(t),t.lookahead<=b&&e===c)return O;if(0===t.lookahead)break}if(t.match_length=0,t.lookahead>=x&&t.strstart>0&&(r=s[i=t.strstart-1])===s[++i]&&r===s[++i]&&r===s[++i]){a=t.strstart+b;do{}while(r===s[++i]&&r===s[++i]&&r===s[++i]&&r===s[++i]&&r===s[++i]&&r===s[++i]&&r===s[++i]&&r===s[++i]&&i<a);t.match_length=b-(a-i),t.match_length>t.lookahead&&(t.match_length=t.lookahead)}if(t.match_length>=x?(n=o._tr_tally(t,1,t.match_length-x),t.lookahead-=t.match_length,t.strstart+=t.match_length,t.match_length=0):(n=o._tr_tally(t,0,t.window[t.strstart]),t.lookahead--,t.strstart++),n&&(V(t,!1),0===t.strm.avail_out))return O}return t.insert=0,e===l?(V(t,!0),0===t.strm.avail_out?M:D):t.last_lit&&(V(t,!1),0===t.strm.avail_out)?O:R}(i,e):r[i.level].func(i,e);if(p!==M&&p!==D||(i.status=N),p===O||p===M)return 0===t.avail_out&&(i.last_flush=-1),h;if(p===R&&(1===e?o._tr_align(i):5!==e&&(o._tr_stored_block(i,0,0,!1),3===e&&(B(i.head),0===i.lookahead&&(i.strstart=0,i.block_start=0,i.insert=0))),F(t),0===t.avail_out))return i.last_flush=-1,h}return e!==l?h:i.wrap<=0?1:(2===i.wrap?(U(i,255&t.adler),U(i,t.adler>>8&255),U(i,t.adler>>16&255),U(i,t.adler>>24&255),U(i,255&t.total_in),U(i,t.total_in>>8&255),U(i,t.total_in>>16&255),U(i,t.total_in>>24&255)):(H(i,t.adler>>>16),H(i,65535&t.adler)),F(t),i.wrap>0&&(i.wrap=-i.wrap),0!==i.pending?h:1)},e.deflateEnd=function(t){var e;return t&&t.state?(e=t.state.status)!==C&&69!==e&&73!==e&&91!==e&&e!==I&&e!==L&&e!==N?P(t,d):(t.state=null,e===L?P(t,-3):h):d},e.deflateSetDictionary=function(t,e){var n,r,o,s,u,c,l,f,p=e.length;if(!t||!t.state)return d;if(2===(s=(n=t.state).wrap)||1===s&&n.status!==C||n.lookahead)return d;for(1===s&&(t.adler=a(t.adler,e,p,0)),n.wrap=0,p>=n.w_size&&(0===s&&(B(n.head),n.strstart=0,n.block_start=0,n.insert=0),f=new i.Buf8(n.w_size),i.arraySet(f,e,p-n.w_size,n.w_size,0),e=f,p=n.w_size),u=t.avail_in,c=t.next_in,l=t.input,t.avail_in=p,t.next_in=0,t.input=e,G(n);n.lookahead>=x;){r=n.strstart,o=n.lookahead-(x-1);do{n.ins_h=(n.ins_h<<n.hash_shift^n.window[r+x-1])&n.hash_mask,n.prev[r&n.w_mask]=n.head[n.ins_h],n.head[n.ins_h]=r,r++}while(--o);n.strstart=r,n.lookahead=x-1,G(n)}return n.strstart+=n.lookahead,n.block_start=n.strstart,n.insert=n.lookahead,n.lookahead=0,n.match_length=n.prev_length=x-1,n.match_available=0,t.next_in=c,t.input=l,t.avail_in=u,n.wrap=s,h},e.deflateInfo="pako deflate (from Nodeca project)"},function(t,e,n){"use strict";t.exports=function(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}},function(t,e,n){"use strict";t.exports=function(t,e){var n,r,i,o,a,s,u,c,l,h,d,f,p,g,v,m,y,_,E,A,S,T,x,b,w;n=t.state,r=t.next_in,b=t.input,i=r+(t.avail_in-5),o=t.next_out,w=t.output,a=o-(e-t.avail_out),s=o+(t.avail_out-257),u=n.dmax,c=n.wsize,l=n.whave,h=n.wnext,d=n.window,f=n.hold,p=n.bits,g=n.lencode,v=n.distcode,m=(1<<n.lenbits)-1,y=(1<<n.distbits)-1;t:do{p<15&&(f+=b[r++]<<p,p+=8,f+=b[r++]<<p,p+=8),_=g[f&m];e:for(;;){if(f>>>=E=_>>>24,p-=E,0==(E=_>>>16&255))w[o++]=65535&_;else{if(!(16&E)){if(0==(64&E)){_=g[(65535&_)+(f&(1<<E)-1)];continue e}if(32&E){n.mode=12;break t}t.msg="invalid literal/length code",n.mode=30;break t}A=65535&_,(E&=15)&&(p<E&&(f+=b[r++]<<p,p+=8),A+=f&(1<<E)-1,f>>>=E,p-=E),p<15&&(f+=b[r++]<<p,p+=8,f+=b[r++]<<p,p+=8),_=v[f&y];n:for(;;){if(f>>>=E=_>>>24,p-=E,!(16&(E=_>>>16&255))){if(0==(64&E)){_=v[(65535&_)+(f&(1<<E)-1)];continue n}t.msg="invalid distance code",n.mode=30;break t}if(S=65535&_,p<(E&=15)&&(f+=b[r++]<<p,(p+=8)<E&&(f+=b[r++]<<p,p+=8)),(S+=f&(1<<E)-1)>u){t.msg="invalid distance too far back",n.mode=30;break t}if(f>>>=E,p-=E,S>(E=o-a)){if((E=S-E)>l&&n.sane){t.msg="invalid distance too far back",n.mode=30;break t}if(T=0,x=d,0===h){if(T+=c-E,E<A){A-=E;do{w[o++]=d[T++]}while(--E);T=o-S,x=w}}else if(h<E){if(T+=c+h-E,(E-=h)<A){A-=E;do{w[o++]=d[T++]}while(--E);if(T=0,h<A){A-=E=h;do{w[o++]=d[T++]}while(--E);T=o-S,x=w}}}else if(T+=h-E,E<A){A-=E;do{w[o++]=d[T++]}while(--E);T=o-S,x=w}for(;A>2;)w[o++]=x[T++],w[o++]=x[T++],w[o++]=x[T++],A-=3;A&&(w[o++]=x[T++],A>1&&(w[o++]=x[T++]))}else{T=o-S;do{w[o++]=w[T++],w[o++]=w[T++],w[o++]=w[T++],A-=3}while(A>2);A&&(w[o++]=w[T++],A>1&&(w[o++]=w[T++]))}break}}break}}while(r<i&&o<s);r-=A=p>>3,f&=(1<<(p-=A<<3))-1,t.next_in=r,t.next_out=o,t.avail_in=r<i?i-r+5:5-(r-i),t.avail_out=o<s?s-o+257:257-(o-s),n.hold=f,n.bits=p}},function(t,e,n){"use strict";var r=n(43),i=n(202),o=n(204),a=n(459),s=n(461),u=1,c=2,l=0,h=-2,d=1,f=12,p=30,g=852,v=592;function m(t){return(t>>>24&255)+(t>>>8&65280)+((65280&t)<<8)+((255&t)<<24)}function y(t){var e;return t&&t.state?(e=t.state,t.total_in=t.total_out=e.total=0,t.msg="",e.wrap&&(t.adler=1&e.wrap),e.mode=d,e.last=0,e.havedict=0,e.dmax=32768,e.head=null,e.hold=0,e.bits=0,e.lencode=e.lendyn=new r.Buf32(g),e.distcode=e.distdyn=new r.Buf32(v),e.sane=1,e.back=-1,l):h}function _(t){var e;return t&&t.state?((e=t.state).wsize=0,e.whave=0,e.wnext=0,y(t)):h}function E(t,e){var n,r;return t&&t.state?(r=t.state,e<0?(n=0,e=-e):(n=1+(e>>4),e<48&&(e&=15)),e&&(e<8||e>15)?h:(null!==r.window&&r.wbits!==e&&(r.window=null),r.wrap=n,r.wbits=e,_(t))):h}function A(t,e){var n,i;return t?(i=new function(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new r.Buf16(320),this.work=new r.Buf16(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0},t.state=i,i.window=null,(n=E(t,e))!==l&&(t.state=null),n):h}var S,T,x=!0;function b(t){if(x){var e;for(S=new r.Buf32(512),T=new r.Buf32(32),e=0;e<144;)t.lens[e++]=8;for(;e<256;)t.lens[e++]=9;for(;e<280;)t.lens[e++]=7;for(;e<288;)t.lens[e++]=8;for(s(u,t.lens,0,288,S,0,t.work,{bits:9}),e=0;e<32;)t.lens[e++]=5;s(c,t.lens,0,32,T,0,t.work,{bits:5}),x=!1}t.lencode=S,t.lenbits=9,t.distcode=T,t.distbits=5}function w(t,e,n,i){var o,a=t.state;return null===a.window&&(a.wsize=1<<a.wbits,a.wnext=0,a.whave=0,a.window=new r.Buf8(a.wsize)),i>=a.wsize?(r.arraySet(a.window,e,n-a.wsize,a.wsize,0),a.wnext=0,a.whave=a.wsize):((o=a.wsize-a.wnext)>i&&(o=i),r.arraySet(a.window,e,n-i,o,a.wnext),(i-=o)?(r.arraySet(a.window,e,n-i,i,0),a.wnext=i,a.whave=a.wsize):(a.wnext+=o,a.wnext===a.wsize&&(a.wnext=0),a.whave<a.wsize&&(a.whave+=o))),0}e.inflateReset=_,e.inflateReset2=E,e.inflateResetKeep=y,e.inflateInit=function(t){return A(t,15)},e.inflateInit2=A,e.inflate=function(t,e){var n,g,v,y,_,E,A,S,T,x,C,I,L,N,O,R,M,D,P,k,B,F,V,U,H=0,Y=new r.Buf8(4),G=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];if(!t||!t.state||!t.output||!t.input&&0!==t.avail_in)return h;(n=t.state).mode===f&&(n.mode=13),_=t.next_out,v=t.output,A=t.avail_out,y=t.next_in,g=t.input,E=t.avail_in,S=n.hold,T=n.bits,x=E,C=A,F=l;t:for(;;)switch(n.mode){case d:if(0===n.wrap){n.mode=13;break}for(;T<16;){if(0===E)break t;E--,S+=g[y++]<<T,T+=8}if(2&n.wrap&&35615===S){n.check=0,Y[0]=255&S,Y[1]=S>>>8&255,n.check=o(n.check,Y,2,0),S=0,T=0,n.mode=2;break}if(n.flags=0,n.head&&(n.head.done=!1),!(1&n.wrap)||(((255&S)<<8)+(S>>8))%31){t.msg="incorrect header check",n.mode=p;break}if(8!=(15&S)){t.msg="unknown compression method",n.mode=p;break}if(T-=4,B=8+(15&(S>>>=4)),0===n.wbits)n.wbits=B;else if(B>n.wbits){t.msg="invalid window size",n.mode=p;break}n.dmax=1<<B,t.adler=n.check=1,n.mode=512&S?10:f,S=0,T=0;break;case 2:for(;T<16;){if(0===E)break t;E--,S+=g[y++]<<T,T+=8}if(n.flags=S,8!=(255&n.flags)){t.msg="unknown compression method",n.mode=p;break}if(57344&n.flags){t.msg="unknown header flags set",n.mode=p;break}n.head&&(n.head.text=S>>8&1),512&n.flags&&(Y[0]=255&S,Y[1]=S>>>8&255,n.check=o(n.check,Y,2,0)),S=0,T=0,n.mode=3;case 3:for(;T<32;){if(0===E)break t;E--,S+=g[y++]<<T,T+=8}n.head&&(n.head.time=S),512&n.flags&&(Y[0]=255&S,Y[1]=S>>>8&255,Y[2]=S>>>16&255,Y[3]=S>>>24&255,n.check=o(n.check,Y,4,0)),S=0,T=0,n.mode=4;case 4:for(;T<16;){if(0===E)break t;E--,S+=g[y++]<<T,T+=8}n.head&&(n.head.xflags=255&S,n.head.os=S>>8),512&n.flags&&(Y[0]=255&S,Y[1]=S>>>8&255,n.check=o(n.check,Y,2,0)),S=0,T=0,n.mode=5;case 5:if(1024&n.flags){for(;T<16;){if(0===E)break t;E--,S+=g[y++]<<T,T+=8}n.length=S,n.head&&(n.head.extra_len=S),512&n.flags&&(Y[0]=255&S,Y[1]=S>>>8&255,n.check=o(n.check,Y,2,0)),S=0,T=0}else n.head&&(n.head.extra=null);n.mode=6;case 6:if(1024&n.flags&&((I=n.length)>E&&(I=E),I&&(n.head&&(B=n.head.extra_len-n.length,n.head.extra||(n.head.extra=new Array(n.head.extra_len)),r.arraySet(n.head.extra,g,y,I,B)),512&n.flags&&(n.check=o(n.check,g,I,y)),E-=I,y+=I,n.length-=I),n.length))break t;n.length=0,n.mode=7;case 7:if(2048&n.flags){if(0===E)break t;I=0;do{B=g[y+I++],n.head&&B&&n.length<65536&&(n.head.name+=String.fromCharCode(B))}while(B&&I<E);if(512&n.flags&&(n.check=o(n.check,g,I,y)),E-=I,y+=I,B)break t}else n.head&&(n.head.name=null);n.length=0,n.mode=8;case 8:if(4096&n.flags){if(0===E)break t;I=0;do{B=g[y+I++],n.head&&B&&n.length<65536&&(n.head.comment+=String.fromCharCode(B))}while(B&&I<E);if(512&n.flags&&(n.check=o(n.check,g,I,y)),E-=I,y+=I,B)break t}else n.head&&(n.head.comment=null);n.mode=9;case 9:if(512&n.flags){for(;T<16;){if(0===E)break t;E--,S+=g[y++]<<T,T+=8}if(S!==(65535&n.check)){t.msg="header crc mismatch",n.mode=p;break}S=0,T=0}n.head&&(n.head.hcrc=n.flags>>9&1,n.head.done=!0),t.adler=n.check=0,n.mode=f;break;case 10:for(;T<32;){if(0===E)break t;E--,S+=g[y++]<<T,T+=8}t.adler=n.check=m(S),S=0,T=0,n.mode=11;case 11:if(0===n.havedict)return t.next_out=_,t.avail_out=A,t.next_in=y,t.avail_in=E,n.hold=S,n.bits=T,2;t.adler=n.check=1,n.mode=f;case f:if(5===e||6===e)break t;case 13:if(n.last){S>>>=7&T,T-=7&T,n.mode=27;break}for(;T<3;){if(0===E)break t;E--,S+=g[y++]<<T,T+=8}switch(n.last=1&S,T-=1,3&(S>>>=1)){case 0:n.mode=14;break;case 1:if(b(n),n.mode=20,6===e){S>>>=2,T-=2;break t}break;case 2:n.mode=17;break;case 3:t.msg="invalid block type",n.mode=p}S>>>=2,T-=2;break;case 14:for(S>>>=7&T,T-=7&T;T<32;){if(0===E)break t;E--,S+=g[y++]<<T,T+=8}if((65535&S)!=(S>>>16^65535)){t.msg="invalid stored block lengths",n.mode=p;break}if(n.length=65535&S,S=0,T=0,n.mode=15,6===e)break t;case 15:n.mode=16;case 16:if(I=n.length){if(I>E&&(I=E),I>A&&(I=A),0===I)break t;r.arraySet(v,g,y,I,_),E-=I,y+=I,A-=I,_+=I,n.length-=I;break}n.mode=f;break;case 17:for(;T<14;){if(0===E)break t;E--,S+=g[y++]<<T,T+=8}if(n.nlen=257+(31&S),S>>>=5,T-=5,n.ndist=1+(31&S),S>>>=5,T-=5,n.ncode=4+(15&S),S>>>=4,T-=4,n.nlen>286||n.ndist>30){t.msg="too many length or distance symbols",n.mode=p;break}n.have=0,n.mode=18;case 18:for(;n.have<n.ncode;){for(;T<3;){if(0===E)break t;E--,S+=g[y++]<<T,T+=8}n.lens[G[n.have++]]=7&S,S>>>=3,T-=3}for(;n.have<19;)n.lens[G[n.have++]]=0;if(n.lencode=n.lendyn,n.lenbits=7,V={bits:n.lenbits},F=s(0,n.lens,0,19,n.lencode,0,n.work,V),n.lenbits=V.bits,F){t.msg="invalid code lengths set",n.mode=p;break}n.have=0,n.mode=19;case 19:for(;n.have<n.nlen+n.ndist;){for(;R=(H=n.lencode[S&(1<<n.lenbits)-1])>>>16&255,M=65535&H,!((O=H>>>24)<=T);){if(0===E)break t;E--,S+=g[y++]<<T,T+=8}if(M<16)S>>>=O,T-=O,n.lens[n.have++]=M;else{if(16===M){for(U=O+2;T<U;){if(0===E)break t;E--,S+=g[y++]<<T,T+=8}if(S>>>=O,T-=O,0===n.have){t.msg="invalid bit length repeat",n.mode=p;break}B=n.lens[n.have-1],I=3+(3&S),S>>>=2,T-=2}else if(17===M){for(U=O+3;T<U;){if(0===E)break t;E--,S+=g[y++]<<T,T+=8}T-=O,B=0,I=3+(7&(S>>>=O)),S>>>=3,T-=3}else{for(U=O+7;T<U;){if(0===E)break t;E--,S+=g[y++]<<T,T+=8}T-=O,B=0,I=11+(127&(S>>>=O)),S>>>=7,T-=7}if(n.have+I>n.nlen+n.ndist){t.msg="invalid bit length repeat",n.mode=p;break}for(;I--;)n.lens[n.have++]=B}}if(n.mode===p)break;if(0===n.lens[256]){t.msg="invalid code -- missing end-of-block",n.mode=p;break}if(n.lenbits=9,V={bits:n.lenbits},F=s(u,n.lens,0,n.nlen,n.lencode,0,n.work,V),n.lenbits=V.bits,F){t.msg="invalid literal/lengths set",n.mode=p;break}if(n.distbits=6,n.distcode=n.distdyn,V={bits:n.distbits},F=s(c,n.lens,n.nlen,n.ndist,n.distcode,0,n.work,V),n.distbits=V.bits,F){t.msg="invalid distances set",n.mode=p;break}if(n.mode=20,6===e)break t;case 20:n.mode=21;case 21:if(E>=6&&A>=258){t.next_out=_,t.avail_out=A,t.next_in=y,t.avail_in=E,n.hold=S,n.bits=T,a(t,C),_=t.next_out,v=t.output,A=t.avail_out,y=t.next_in,g=t.input,E=t.avail_in,S=n.hold,T=n.bits,n.mode===f&&(n.back=-1);break}for(n.back=0;R=(H=n.lencode[S&(1<<n.lenbits)-1])>>>16&255,M=65535&H,!((O=H>>>24)<=T);){if(0===E)break t;E--,S+=g[y++]<<T,T+=8}if(R&&0==(240&R)){for(D=O,P=R,k=M;R=(H=n.lencode[k+((S&(1<<D+P)-1)>>D)])>>>16&255,M=65535&H,!(D+(O=H>>>24)<=T);){if(0===E)break t;E--,S+=g[y++]<<T,T+=8}S>>>=D,T-=D,n.back+=D}if(S>>>=O,T-=O,n.back+=O,n.length=M,0===R){n.mode=26;break}if(32&R){n.back=-1,n.mode=f;break}if(64&R){t.msg="invalid literal/length code",n.mode=p;break}n.extra=15&R,n.mode=22;case 22:if(n.extra){for(U=n.extra;T<U;){if(0===E)break t;E--,S+=g[y++]<<T,T+=8}n.length+=S&(1<<n.extra)-1,S>>>=n.extra,T-=n.extra,n.back+=n.extra}n.was=n.length,n.mode=23;case 23:for(;R=(H=n.distcode[S&(1<<n.distbits)-1])>>>16&255,M=65535&H,!((O=H>>>24)<=T);){if(0===E)break t;E--,S+=g[y++]<<T,T+=8}if(0==(240&R)){for(D=O,P=R,k=M;R=(H=n.distcode[k+((S&(1<<D+P)-1)>>D)])>>>16&255,M=65535&H,!(D+(O=H>>>24)<=T);){if(0===E)break t;E--,S+=g[y++]<<T,T+=8}S>>>=D,T-=D,n.back+=D}if(S>>>=O,T-=O,n.back+=O,64&R){t.msg="invalid distance code",n.mode=p;break}n.offset=M,n.extra=15&R,n.mode=24;case 24:if(n.extra){for(U=n.extra;T<U;){if(0===E)break t;E--,S+=g[y++]<<T,T+=8}n.offset+=S&(1<<n.extra)-1,S>>>=n.extra,T-=n.extra,n.back+=n.extra}if(n.offset>n.dmax){t.msg="invalid distance too far back",n.mode=p;break}n.mode=25;case 25:if(0===A)break t;if(I=C-A,n.offset>I){if((I=n.offset-I)>n.whave&&n.sane){t.msg="invalid distance too far back",n.mode=p;break}I>n.wnext?(I-=n.wnext,L=n.wsize-I):L=n.wnext-I,I>n.length&&(I=n.length),N=n.window}else N=v,L=_-n.offset,I=n.length;I>A&&(I=A),A-=I,n.length-=I;do{v[_++]=N[L++]}while(--I);0===n.length&&(n.mode=21);break;case 26:if(0===A)break t;v[_++]=n.length,A--,n.mode=21;break;case 27:if(n.wrap){for(;T<32;){if(0===E)break t;E--,S|=g[y++]<<T,T+=8}if(C-=A,t.total_out+=C,n.total+=C,C&&(t.adler=n.check=n.flags?o(n.check,v,C,_-C):i(n.check,v,C,_-C)),C=A,(n.flags?S:m(S))!==n.check){t.msg="incorrect data check",n.mode=p;break}S=0,T=0}n.mode=28;case 28:if(n.wrap&&n.flags){for(;T<32;){if(0===E)break t;E--,S+=g[y++]<<T,T+=8}if(S!==(4294967295&n.total)){t.msg="incorrect length check",n.mode=p;break}S=0,T=0}n.mode=29;case 29:F=1;break t;case p:F=-3;break t;case 31:return-4;case 32:default:return h}return t.next_out=_,t.avail_out=A,t.next_in=y,t.avail_in=E,n.hold=S,n.bits=T,(n.wsize||C!==t.avail_out&&n.mode<p&&(n.mode<27||4!==e))&&w(t,t.output,t.next_out,C-t.avail_out)?(n.mode=31,-4):(x-=t.avail_in,C-=t.avail_out,t.total_in+=x,t.total_out+=C,n.total+=C,n.wrap&&C&&(t.adler=n.check=n.flags?o(n.check,v,C,t.next_out-C):i(n.check,v,C,t.next_out-C)),t.data_type=n.bits+(n.last?64:0)+(n.mode===f?128:0)+(20===n.mode||15===n.mode?256:0),(0===x&&0===C||4===e)&&F===l&&(F=-5),F)},e.inflateEnd=function(t){if(!t||!t.state)return h;var e=t.state;return e.window&&(e.window=null),t.state=null,l},e.inflateGetHeader=function(t,e){var n;return t&&t.state?0==(2&(n=t.state).wrap)?h:(n.head=e,e.done=!1,l):h},e.inflateSetDictionary=function(t,e){var n,r=e.length;return t&&t.state?0!==(n=t.state).wrap&&11!==n.mode?h:11===n.mode&&i(1,e,r,0)!==n.check?-3:w(t,e,r,r)?(n.mode=31,-4):(n.havedict=1,l):h},e.inflateInfo="pako inflate (from Nodeca project)"},function(t,e,n){"use strict";var r=n(43),i=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],o=[16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78],a=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0],s=[16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64];t.exports=function(t,e,n,u,c,l,h,d){var f,p,g,v,m,y,_,E,A,S=d.bits,T=0,x=0,b=0,w=0,C=0,I=0,L=0,N=0,O=0,R=0,M=null,D=0,P=new r.Buf16(16),k=new r.Buf16(16),B=null,F=0;for(T=0;T<=15;T++)P[T]=0;for(x=0;x<u;x++)P[e[n+x]]++;for(C=S,w=15;w>=1&&0===P[w];w--);if(C>w&&(C=w),0===w)return c[l++]=20971520,c[l++]=20971520,d.bits=1,0;for(b=1;b<w&&0===P[b];b++);for(C<b&&(C=b),N=1,T=1;T<=15;T++)if(N<<=1,(N-=P[T])<0)return-1;if(N>0&&(0===t||1!==w))return-1;for(k[1]=0,T=1;T<15;T++)k[T+1]=k[T]+P[T];for(x=0;x<u;x++)0!==e[n+x]&&(h[k[e[n+x]]++]=x);if(0===t?(M=B=h,y=19):1===t?(M=i,D-=257,B=o,F-=257,y=256):(M=a,B=s,y=-1),R=0,x=0,T=b,m=l,I=C,L=0,g=-1,v=(O=1<<C)-1,1===t&&O>852||2===t&&O>592)return 1;for(;;){_=T-L,h[x]<y?(E=0,A=h[x]):h[x]>y?(E=B[F+h[x]],A=M[D+h[x]]):(E=96,A=0),f=1<<T-L,b=p=1<<I;do{c[m+(R>>L)+(p-=f)]=_<<24|E<<16|A|0}while(0!==p);for(f=1<<T-1;R&f;)f>>=1;if(0!==f?(R&=f-1,R+=f):R=0,x++,0==--P[T]){if(T===w)break;T=e[n+h[x]]}if(T>C&&(R&v)!==g){for(0===L&&(L=C),m+=b,N=1<<(I=T-L);I+L<w&&!((N-=P[I+L])<=0);)I++,N<<=1;if(O+=1<<I,1===t&&O>852||2===t&&O>592)return 1;c[g=R&v]=C<<24|I<<16|m-l|0}}return 0!==R&&(c[m+R]=T-L<<24|64<<16|0),d.bits=C,0}},function(t,e,n){"use strict";var r=n(43);function i(t){for(var e=t.length;--e>=0;)t[e]=0}var o=0,a=256,s=a+1+29,u=30,c=19,l=2*s+1,h=15,d=16,f=256,p=16,g=17,v=18,m=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0],y=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],_=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7],E=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],A=new Array(2*(s+2));i(A);var S=new Array(2*u);i(S);var T=new Array(512);i(T);var x=new Array(256);i(x);var b=new Array(29);i(b);var w,C,I,L=new Array(u);function N(t,e,n,r,i){this.static_tree=t,this.extra_bits=e,this.extra_base=n,this.elems=r,this.max_length=i,this.has_stree=t&&t.length}function O(t,e){this.dyn_tree=t,this.max_code=0,this.stat_desc=e}function R(t){return t<256?T[t]:T[256+(t>>>7)]}function M(t,e){t.pending_buf[t.pending++]=255&e,t.pending_buf[t.pending++]=e>>>8&255}function D(t,e,n){t.bi_valid>d-n?(t.bi_buf|=e<<t.bi_valid&65535,M(t,t.bi_buf),t.bi_buf=e>>d-t.bi_valid,t.bi_valid+=n-d):(t.bi_buf|=e<<t.bi_valid&65535,t.bi_valid+=n)}function P(t,e,n){D(t,n[2*e],n[2*e+1])}function k(t,e){var n=0;do{n|=1&t,t>>>=1,n<<=1}while(--e>0);return n>>>1}function B(t,e,n){var r,i,o=new Array(h+1),a=0;for(r=1;r<=h;r++)o[r]=a=a+n[r-1]<<1;for(i=0;i<=e;i++){var s=t[2*i+1];0!==s&&(t[2*i]=k(o[s]++,s))}}function F(t){var e;for(e=0;e<s;e++)t.dyn_ltree[2*e]=0;for(e=0;e<u;e++)t.dyn_dtree[2*e]=0;for(e=0;e<c;e++)t.bl_tree[2*e]=0;t.dyn_ltree[2*f]=1,t.opt_len=t.static_len=0,t.last_lit=t.matches=0}function V(t){t.bi_valid>8?M(t,t.bi_buf):t.bi_valid>0&&(t.pending_buf[t.pending++]=t.bi_buf),t.bi_buf=0,t.bi_valid=0}function U(t,e,n,r){var i=2*e,o=2*n;return t[i]<t[o]||t[i]===t[o]&&r[e]<=r[n]}function H(t,e,n){for(var r=t.heap[n],i=n<<1;i<=t.heap_len&&(i<t.heap_len&&U(e,t.heap[i+1],t.heap[i],t.depth)&&i++,!U(e,r,t.heap[i],t.depth));)t.heap[n]=t.heap[i],n=i,i<<=1;t.heap[n]=r}function Y(t,e,n){var r,i,o,s,u=0;if(0!==t.last_lit)do{r=t.pending_buf[t.d_buf+2*u]<<8|t.pending_buf[t.d_buf+2*u+1],i=t.pending_buf[t.l_buf+u],u++,0===r?P(t,i,e):(P(t,(o=x[i])+a+1,e),0!==(s=m[o])&&D(t,i-=b[o],s),P(t,o=R(--r),n),0!==(s=y[o])&&D(t,r-=L[o],s))}while(u<t.last_lit);P(t,f,e)}function G(t,e){var n,r,i,o=e.dyn_tree,a=e.stat_desc.static_tree,s=e.stat_desc.has_stree,u=e.stat_desc.elems,c=-1;for(t.heap_len=0,t.heap_max=l,n=0;n<u;n++)0!==o[2*n]?(t.heap[++t.heap_len]=c=n,t.depth[n]=0):o[2*n+1]=0;for(;t.heap_len<2;)o[2*(i=t.heap[++t.heap_len]=c<2?++c:0)]=1,t.depth[i]=0,t.opt_len--,s&&(t.static_len-=a[2*i+1]);for(e.max_code=c,n=t.heap_len>>1;n>=1;n--)H(t,o,n);i=u;do{n=t.heap[1],t.heap[1]=t.heap[t.heap_len--],H(t,o,1),r=t.heap[1],t.heap[--t.heap_max]=n,t.heap[--t.heap_max]=r,o[2*i]=o[2*n]+o[2*r],t.depth[i]=(t.depth[n]>=t.depth[r]?t.depth[n]:t.depth[r])+1,o[2*n+1]=o[2*r+1]=i,t.heap[1]=i++,H(t,o,1)}while(t.heap_len>=2);t.heap[--t.heap_max]=t.heap[1],function(t,e){var n,r,i,o,a,s,u=e.dyn_tree,c=e.max_code,d=e.stat_desc.static_tree,f=e.stat_desc.has_stree,p=e.stat_desc.extra_bits,g=e.stat_desc.extra_base,v=e.stat_desc.max_length,m=0;for(o=0;o<=h;o++)t.bl_count[o]=0;for(u[2*t.heap[t.heap_max]+1]=0,n=t.heap_max+1;n<l;n++)(o=u[2*u[2*(r=t.heap[n])+1]+1]+1)>v&&(o=v,m++),u[2*r+1]=o,r>c||(t.bl_count[o]++,a=0,r>=g&&(a=p[r-g]),s=u[2*r],t.opt_len+=s*(o+a),f&&(t.static_len+=s*(d[2*r+1]+a)));if(0!==m){do{for(o=v-1;0===t.bl_count[o];)o--;t.bl_count[o]--,t.bl_count[o+1]+=2,t.bl_count[v]--,m-=2}while(m>0);for(o=v;0!==o;o--)for(r=t.bl_count[o];0!==r;)(i=t.heap[--n])>c||(u[2*i+1]!==o&&(t.opt_len+=(o-u[2*i+1])*u[2*i],u[2*i+1]=o),r--)}}(t,e),B(o,c,t.bl_count)}function j(t,e,n){var r,i,o=-1,a=e[1],s=0,u=7,c=4;for(0===a&&(u=138,c=3),e[2*(n+1)+1]=65535,r=0;r<=n;r++)i=a,a=e[2*(r+1)+1],++s<u&&i===a||(s<c?t.bl_tree[2*i]+=s:0!==i?(i!==o&&t.bl_tree[2*i]++,t.bl_tree[2*p]++):s<=10?t.bl_tree[2*g]++:t.bl_tree[2*v]++,s=0,o=i,0===a?(u=138,c=3):i===a?(u=6,c=3):(u=7,c=4))}function z(t,e,n){var r,i,o=-1,a=e[1],s=0,u=7,c=4;for(0===a&&(u=138,c=3),r=0;r<=n;r++)if(i=a,a=e[2*(r+1)+1],!(++s<u&&i===a)){if(s<c)do{P(t,i,t.bl_tree)}while(0!=--s);else 0!==i?(i!==o&&(P(t,i,t.bl_tree),s--),P(t,p,t.bl_tree),D(t,s-3,2)):s<=10?(P(t,g,t.bl_tree),D(t,s-3,3)):(P(t,v,t.bl_tree),D(t,s-11,7));s=0,o=i,0===a?(u=138,c=3):i===a?(u=6,c=3):(u=7,c=4)}}i(L);var W=!1;function K(t,e,n,i){D(t,(o<<1)+(i?1:0),3),function(t,e,n,i){V(t),M(t,n),M(t,~n),r.arraySet(t.pending_buf,t.window,e,n,t.pending),t.pending+=n}(t,e,n)}e._tr_init=function(t){W||(function(){var t,e,n,r,i,o=new Array(h+1);for(n=0,r=0;r<28;r++)for(b[r]=n,t=0;t<1<<m[r];t++)x[n++]=r;for(x[n-1]=r,i=0,r=0;r<16;r++)for(L[r]=i,t=0;t<1<<y[r];t++)T[i++]=r;for(i>>=7;r<u;r++)for(L[r]=i<<7,t=0;t<1<<y[r]-7;t++)T[256+i++]=r;for(e=0;e<=h;e++)o[e]=0;for(t=0;t<=143;)A[2*t+1]=8,t++,o[8]++;for(;t<=255;)A[2*t+1]=9,t++,o[9]++;for(;t<=279;)A[2*t+1]=7,t++,o[7]++;for(;t<=287;)A[2*t+1]=8,t++,o[8]++;for(B(A,s+1,o),t=0;t<u;t++)S[2*t+1]=5,S[2*t]=k(t,5);w=new N(A,m,a+1,s,h),C=new N(S,y,0,u,h),I=new N(new Array(0),_,0,c,7)}(),W=!0),t.l_desc=new O(t.dyn_ltree,w),t.d_desc=new O(t.dyn_dtree,C),t.bl_desc=new O(t.bl_tree,I),t.bi_buf=0,t.bi_valid=0,F(t)},e._tr_stored_block=K,e._tr_flush_block=function(t,e,n,r){var i,o,s=0;t.level>0?(2===t.strm.data_type&&(t.strm.data_type=function(t){var e,n=4093624447;for(e=0;e<=31;e++,n>>>=1)if(1&n&&0!==t.dyn_ltree[2*e])return 0;if(0!==t.dyn_ltree[18]||0!==t.dyn_ltree[20]||0!==t.dyn_ltree[26])return 1;for(e=32;e<a;e++)if(0!==t.dyn_ltree[2*e])return 1;return 0}(t)),G(t,t.l_desc),G(t,t.d_desc),s=function(t){var e;for(j(t,t.dyn_ltree,t.l_desc.max_code),j(t,t.dyn_dtree,t.d_desc.max_code),G(t,t.bl_desc),e=c-1;e>=3&&0===t.bl_tree[2*E[e]+1];e--);return t.opt_len+=3*(e+1)+5+5+4,e}(t),i=t.opt_len+3+7>>>3,(o=t.static_len+3+7>>>3)<=i&&(i=o)):i=o=n+5,n+4<=i&&-1!==e?K(t,e,n,r):4===t.strategy||o===i?(D(t,2+(r?1:0),3),Y(t,A,S)):(D(t,4+(r?1:0),3),function(t,e,n,r){var i;for(D(t,e-257,5),D(t,n-1,5),D(t,r-4,4),i=0;i<r;i++)D(t,t.bl_tree[2*E[i]+1],3);z(t,t.dyn_ltree,e-1),z(t,t.dyn_dtree,n-1)}(t,t.l_desc.max_code+1,t.d_desc.max_code+1,s+1),Y(t,t.dyn_ltree,t.dyn_dtree)),F(t),r&&V(t)},e._tr_tally=function(t,e,n){return t.pending_buf[t.d_buf+2*t.last_lit]=e>>>8&255,t.pending_buf[t.d_buf+2*t.last_lit+1]=255&e,t.pending_buf[t.l_buf+t.last_lit]=255&n,t.last_lit++,0===e?t.dyn_ltree[2*n]++:(t.matches++,e--,t.dyn_ltree[2*(x[n]+a+1)]++,t.dyn_dtree[2*R(e)]++),t.last_lit===t.lit_bufsize-1},e._tr_align=function(t){D(t,2,3),P(t,f,A),function(t){16===t.bi_valid?(M(t,t.bi_buf),t.bi_buf=0,t.bi_valid=0):t.bi_valid>=8&&(t.pending_buf[t.pending++]=255&t.bi_buf,t.bi_buf>>=8,t.bi_valid-=8)}(t)}},function(t,e,n){t.exports=n(50)},function(t,e,n){"use strict";t.exports=o;var r=n(207),i=n(73);function o(t){if(!(this instanceof o))return new o(t);r.call(this,t)}i.inherits=n(75),i.inherits(o,r),o.prototype._transform=function(t,e,n){n(null,t)}},function(t,e,n){"use strict";var r=n(93).Buffer;t.exports=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.head=null,this.tail=null,this.length=0}return t.prototype.push=function(t){var e={data:t,next:null};this.length>0?this.tail.next=e:this.head=e,this.tail=e,++this.length},t.prototype.unshift=function(t){var e={data:t,next:this.head};0===this.length&&(this.tail=e),this.head=e,++this.length},t.prototype.shift=function(){if(0!==this.length){var t=this.head.data;return 1===this.length?this.head=this.tail=null:this.head=this.head.next,--this.length,t}},t.prototype.clear=function(){this.head=this.tail=null,this.length=0},t.prototype.join=function(t){if(0===this.length)return"";for(var e=this.head,n=""+e.data;e=e.next;)n+=t+e.data;return n},t.prototype.concat=function(t){if(0===this.length)return r.alloc(0);if(1===this.length)return this.head.data;for(var e,n,i=r.allocUnsafe(t>>>0),o=this.head,a=0;o;)e=i,n=a,o.data.copy(e,n),a+=o.data.length,o=o.next;return i},t}()},function(t,e,n){t.exports=n(125).PassThrough},function(t,e,n){t.exports=n(125).Transform},function(t,e,n){t.exports=n(124)},function(t,e,n){var r=function(){return this}()||Function("return this")(),i=r.regeneratorRuntime&&Object.getOwnPropertyNames(r).indexOf("regeneratorRuntime")>=0,o=i&&r.regeneratorRuntime;if(r.regeneratorRuntime=void 0,t.exports=n(470),i)r.regeneratorRuntime=o;else try{delete r.regeneratorRuntime}catch(t){r.regeneratorRuntime=void 0}},function(t,e){!function(e){"use strict";var n,r=Object.prototype,i=r.hasOwnProperty,o="function"==typeof Symbol?Symbol:{},a=o.iterator||"@@iterator",s=o.asyncIterator||"@@asyncIterator",u=o.toStringTag||"@@toStringTag",c="object"==typeof t,l=e.regeneratorRuntime;if(l)c&&(t.exports=l);else{(l=e.regeneratorRuntime=c?t.exports:{}).wrap=E;var h="suspendedStart",d="suspendedYield",f="executing",p="completed",g={},v={};v[a]=function(){return this};var m=Object.getPrototypeOf,y=m&&m(m(O([])));y&&y!==r&&i.call(y,a)&&(v=y);var _=x.prototype=S.prototype=Object.create(v);T.prototype=_.constructor=x,x.constructor=T,x[u]=T.displayName="GeneratorFunction",l.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===T||"GeneratorFunction"===(e.displayName||e.name))},l.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,x):(t.__proto__=x,u in t||(t[u]="GeneratorFunction")),t.prototype=Object.create(_),t},l.awrap=function(t){return{__await:t}},b(w.prototype),w.prototype[s]=function(){return this},l.AsyncIterator=w,l.async=function(t,e,n,r){var i=new w(E(t,e,n,r));return l.isGeneratorFunction(e)?i:i.next().then(function(t){return t.done?t.value:i.next()})},b(_),_[u]="Generator",_[a]=function(){return this},_.toString=function(){return"[object Generator]"},l.keys=function(t){var e=[];for(var n in t)e.push(n);return e.reverse(),function n(){for(;e.length;){var r=e.pop();if(r in t)return n.value=r,n.done=!1,n}return n.done=!0,n}},l.values=O,N.prototype={constructor:N,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=n,this.done=!1,this.delegate=null,this.method="next",this.arg=n,this.tryEntries.forEach(L),!t)for(var e in this)"t"===e.charAt(0)&&i.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=n)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function r(r,i){return s.type="throw",s.arg=t,e.next=r,i&&(e.method="next",e.arg=n),!!i}for(var o=this.tryEntries.length-1;o>=0;--o){var a=this.tryEntries[o],s=a.completion;if("root"===a.tryLoc)return r("end");if(a.tryLoc<=this.prev){var u=i.call(a,"catchLoc"),c=i.call(a,"finallyLoc");if(u&&c){if(this.prev<a.catchLoc)return r(a.catchLoc,!0);if(this.prev<a.finallyLoc)return r(a.finallyLoc)}else if(u){if(this.prev<a.catchLoc)return r(a.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return r(a.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var r=this.tryEntries[n];if(r.tryLoc<=this.prev&&i.call(r,"finallyLoc")&&this.prev<r.finallyLoc){var o=r;break}}o&&("break"===t||"continue"===t)&&o.tryLoc<=e&&e<=o.finallyLoc&&(o=null);var a=o?o.completion:{};return a.type=t,a.arg=e,o?(this.method="next",this.next=o.finallyLoc,g):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),g},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.finallyLoc===t)return this.complete(n.completion,n.afterLoc),L(n),g}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.tryLoc===t){var r=n.completion;if("throw"===r.type){var i=r.arg;L(n)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,r){return this.delegate={iterator:O(t),resultName:e,nextLoc:r},"next"===this.method&&(this.arg=n),g}}}function E(t,e,n,r){var i=e&&e.prototype instanceof S?e:S,o=Object.create(i.prototype),a=new N(r||[]);return o._invoke=function(t,e,n){var r=h;return function(i,o){if(r===f)throw new Error("Generator is already running");if(r===p){if("throw"===i)throw o;return R()}for(n.method=i,n.arg=o;;){var a=n.delegate;if(a){var s=C(a,n);if(s){if(s===g)continue;return s}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(r===h)throw r=p,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r=f;var u=A(t,e,n);if("normal"===u.type){if(r=n.done?p:d,u.arg===g)continue;return{value:u.arg,done:n.done}}"throw"===u.type&&(r=p,n.method="throw",n.arg=u.arg)}}}(t,n,a),o}function A(t,e,n){try{return{type:"normal",arg:t.call(e,n)}}catch(t){return{type:"throw",arg:t}}}function S(){}function T(){}function x(){}function b(t){["next","throw","return"].forEach(function(e){t[e]=function(t){return this._invoke(e,t)}})}function w(t){var e;this._invoke=function(n,r){function o(){return new Promise(function(e,o){!function e(n,r,o,a){var s=A(t[n],t,r);if("throw"!==s.type){var u=s.arg,c=u.value;return c&&"object"==typeof c&&i.call(c,"__await")?Promise.resolve(c.__await).then(function(t){e("next",t,o,a)},function(t){e("throw",t,o,a)}):Promise.resolve(c).then(function(t){u.value=t,o(u)},a)}a(s.arg)}(n,r,e,o)})}return e=e?e.then(o,o):o()}}function C(t,e){var r=t.iterator[e.method];if(r===n){if(e.delegate=null,"throw"===e.method){if(t.iterator.return&&(e.method="return",e.arg=n,C(t,e),"throw"===e.method))return g;e.method="throw",e.arg=new TypeError("The iterator does not provide a 'throw' method")}return g}var i=A(r,t.iterator,e.arg);if("throw"===i.type)return e.method="throw",e.arg=i.arg,e.delegate=null,g;var o=i.arg;return o?o.done?(e[t.resultName]=o.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=n),e.delegate=null,g):o:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,g)}function I(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function L(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function N(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(I,this),this.reset(!0)}function O(t){if(t){var e=t[a];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var r=-1,o=function e(){for(;++r<t.length;)if(i.call(t,r))return e.value=t[r],e.done=!1,e;return e.value=n,e.done=!0,e};return o.next=o}}return{next:R}}function R(){return{value:n,done:!0}}}(function(){return this}()||Function("return this")())},function(t,e,n){(function(t,e){!function(t,n){"use strict";if(!t.setImmediate){var r,i,o,a,s,u=1,c={},l=!1,h=t.document,d=Object.getPrototypeOf&&Object.getPrototypeOf(t);d=d&&d.setTimeout?d:t,"[object process]"==={}.toString.call(t.process)?r=function(t){e.nextTick(function(){p(t)})}:function(){if(t.postMessage&&!t.importScripts){var e=!0,n=t.onmessage;return t.onmessage=function(){e=!1},t.postMessage("","*"),t.onmessage=n,e}}()?(a="setImmediate$"+Math.random()+"$",s=function(e){e.source===t&&"string"==typeof e.data&&0===e.data.indexOf(a)&&p(+e.data.slice(a.length))},t.addEventListener?t.addEventListener("message",s,!1):t.attachEvent("onmessage",s),r=function(e){t.postMessage(a+e,"*")}):t.MessageChannel?((o=new MessageChannel).port1.onmessage=function(t){p(t.data)},r=function(t){o.port2.postMessage(t)}):h&&"onreadystatechange"in h.createElement("script")?(i=h.documentElement,r=function(t){var e=h.createElement("script");e.onreadystatechange=function(){p(t),e.onreadystatechange=null,i.removeChild(e),e=null},i.appendChild(e)}):r=function(t){setTimeout(p,0,t)},d.setImmediate=function(t){"function"!=typeof t&&(t=new Function(""+t));for(var e=new Array(arguments.length-1),n=0;n<e.length;n++)e[n]=arguments[n+1];var i={callback:t,args:e};return c[u]=i,r(u),u++},d.clearImmediate=f}function f(t){delete c[t]}function p(t){if(l)setTimeout(p,0,t);else{var e=c[t];if(e){l=!0;try{!function(t){var e=t.callback,r=t.args;switch(r.length){case 0:e();break;case 1:e(r[0]);break;case 2:e(r[0],r[1]);break;case 3:e(r[0],r[1],r[2]);break;default:e.apply(n,r)}}(e)}finally{f(t),l=!1}}}}}("undefined"==typeof self?void 0===t?this:t:self)}).call(e,n(6),n(28))},function(t,e,n){t.exports=i;var r=n(118).EventEmitter;function i(){r.call(this)}n(424)(i,r),i.Readable=n(125),i.Writable=n(468),i.Duplex=n(463),i.Transform=n(467),i.PassThrough=n(466),i.Stream=i,i.prototype.pipe=function(t,e){var n=this;function i(e){t.writable&&!1===t.write(e)&&n.pause&&n.pause()}function o(){n.readable&&n.resume&&n.resume()}n.on("data",i),t.on("drain",o),t._isStdio||e&&!1===e.end||(n.on("end",s),n.on("close",u));var a=!1;function s(){a||(a=!0,t.end())}function u(){a||(a=!0,"function"==typeof t.destroy&&t.destroy())}function c(t){if(l(),0===r.listenerCount(this,"error"))throw t}function l(){n.removeListener("data",i),t.removeListener("drain",o),n.removeListener("end",s),n.removeListener("close",u),n.removeListener("error",c),t.removeListener("error",c),n.removeListener("end",l),n.removeListener("close",l),t.removeListener("close",l)}return n.on("error",c),t.on("error",c),n.on("end",l),n.on("close",l),t.on("close",l),t.emit("pipe",n),t}},function(t,e,n){(function(t){var r=Function.prototype.apply;function i(t,e){this._id=t,this._clearFn=e}e.setTimeout=function(){return new i(r.call(setTimeout,window,arguments),clearTimeout)},e.setInterval=function(){return new i(r.call(setInterval,window,arguments),clearInterval)},e.clearTimeout=e.clearInterval=function(t){t&&t.close()},i.prototype.unref=i.prototype.ref=function(){},i.prototype.close=function(){this._clearFn.call(window,this._id)},e.enroll=function(t,e){clearTimeout(t._idleTimeoutId),t._idleTimeout=e},e.unenroll=function(t){clearTimeout(t._idleTimeoutId),t._idleTimeout=-1},e._unrefActive=e.active=function(t){clearTimeout(t._idleTimeoutId);var e=t._idleTimeout;e>=0&&(t._idleTimeoutId=setTimeout(function(){t._onTimeout&&t._onTimeout()},e))},n(471),e.setImmediate="undefined"!=typeof self&&self.setImmediate||void 0!==t&&t.setImmediate||this&&this.setImmediate,e.clearImmediate="undefined"!=typeof self&&self.clearImmediate||void 0!==t&&t.clearImmediate||this&&this.clearImmediate}).call(e,n(6))},function(t,e,n){(function(e){function n(t){try{if(!e.localStorage)return!1}catch(t){return!1}var n=e.localStorage[t];return null!=n&&"true"===String(n).toLowerCase()}t.exports=function(t,e){if(n("noDeprecation"))return t;var r=!1;return function(){if(!r){if(n("throwDeprecation"))throw new Error(e);n("traceDeprecation")?console.trace(e):console.warn(e),r=!0}return t.apply(this,arguments)}}}).call(e,n(6))},function(t,e,n){function r(t){this.options=t||{locator:{}}}function i(){this.cdata=!1}function o(t,e){e.lineNumber=t.lineNumber,e.columnNumber=t.columnNumber}function a(t){if(t)return"\n@"+(t.systemId||"")+"#[line:"+t.lineNumber+",col:"+t.columnNumber+"]"}function s(t,e,n){return"string"==typeof t?t.substr(e,n):t.length>=e+n||e?new java.lang.String(t,e,n)+"":t}function u(t,e){t.currentElement?t.currentElement.appendChild(e):t.doc.appendChild(e)}r.prototype.parseFromString=function(t,e){var n=this.options,r=new c,o=n.domBuilder||new i,s=n.errorHandler,u=n.locator,l=n.xmlns||{},h={lt:"<",gt:">",amp:"&",quot:'"',apos:"'"};return u&&o.setDocumentLocator(u),r.errorHandler=function(t,e,n){if(!t){if(e instanceof i)return e;t=e}var r={},o=t instanceof Function;function s(e){var i=t[e];!i&&o&&(i=2==t.length?function(n){t(e,n)}:t),r[e]=i&&function(t){i("[xmldom "+e+"]\t"+t+a(n))}||function(){}}return n=n||{},s("warning"),s("error"),s("fatalError"),r}(s,o,u),r.domBuilder=n.domBuilder||o,/\/x?html?$/.test(e)&&(h.nbsp="",h.copy="",l[""]="http://www.w3.org/1999/xhtml"),l.xml=l.xml||"http://www.w3.org/XML/1998/namespace",t?r.parse(t,l,h):r.errorHandler.error("invalid doc source"),o.doc},i.prototype={startDocument:function(){this.doc=(new l).createDocument(null,null,null),this.locator&&(this.doc.documentURI=this.locator.systemId)},startElement:function(t,e,n,r){var i=this.doc,a=i.createElementNS(t,n||e),s=r.length;u(this,a),this.currentElement=a,this.locator&&o(this.locator,a);for(var c=0;c<s;c++){t=r.getURI(c);var l=r.getValue(c),h=(n=r.getQName(c),i.createAttributeNS(t,n));this.locator&&o(r.getLocator(c),h),h.value=h.nodeValue=l,a.setAttributeNode(h)}},endElement:function(t,e,n){var r=this.currentElement;r.tagName,this.currentElement=r.parentNode},startPrefixMapping:function(t,e){},endPrefixMapping:function(t){},processingInstruction:function(t,e){var n=this.doc.createProcessingInstruction(t,e);this.locator&&o(this.locator,n),u(this,n)},ignorableWhitespace:function(t,e,n){},characters:function(t,e,n){if(t=s.apply(this,arguments)){if(this.cdata)var r=this.doc.createCDATASection(t);else r=this.doc.createTextNode(t);this.currentElement?this.currentElement.appendChild(r):/^\s*$/.test(t)&&this.doc.appendChild(r),this.locator&&o(this.locator,r)}},skippedEntity:function(t){},endDocument:function(){this.doc.normalize()},setDocumentLocator:function(t){(this.locator=t)&&(t.lineNumber=0)},comment:function(t,e,n){t=s.apply(this,arguments);var r=this.doc.createComment(t);this.locator&&o(this.locator,r),u(this,r)},startCDATA:function(){this.cdata=!0},endCDATA:function(){this.cdata=!1},startDTD:function(t,e,n){var r=this.doc.implementation;if(r&&r.createDocumentType){var i=r.createDocumentType(t,e,n);this.locator&&o(this.locator,i),u(this,i)}},warning:function(t){console.warn("[xmldom warning]\t"+t,a(this.locator))},error:function(t){console.error("[xmldom error]\t"+t,a(this.locator))},fatalError:function(t){throw console.error("[xmldom fatalError]\t"+t,a(this.locator)),t}},"endDTD,startEntity,endEntity,attributeDecl,elementDecl,externalEntityDecl,internalEntityDecl,resolveEntity,getExternalSubset,notationDecl,unparsedEntityDecl".replace(/\w+/g,function(t){i.prototype[t]=function(){return null}});var c=n(476).XMLReader,l=e.DOMImplementation=n(211).DOMImplementation;e.XMLSerializer=n(211).XMLSerializer,e.DOMParser=r},function(t,e){var n=/[A-Z_a-z\xC0-\xD6\xD8-\xF6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]/,r=new RegExp("[\\-\\.0-9"+n.source.slice(1,-1)+"\\u00B7\\u0300-\\u036F\\u203F-\\u2040]"),i=new RegExp("^"+n.source+r.source+"*(?::"+n.source+r.source+"*)?$"),o=0,a=1,s=2,u=3,c=4,l=5,h=6,d=7;function f(){}function p(t,e){return e.lineNumber=t.lineNumber,e.columnNumber=t.columnNumber,e}function g(t,e,n,r,i,f){for(var p,g=++e,v=o;;){var m=t.charAt(g);switch(m){case"=":if(v===a)p=t.slice(e,g),v=u;else{if(v!==s)throw new Error("attribute equal must after attrName");v=u}break;case"'":case'"':if(v===u||v===a){if(v===a&&(f.warning('attribute value must after "="'),p=t.slice(e,g)),e=g+1,!((g=t.indexOf(m,e))>0))throw new Error("attribute value no end '"+m+"' match");y=t.slice(e,g).replace(/&#?\w+;/g,i),n.add(p,y,e-1),v=l}else{if(v!=c)throw new Error('attribute value must after "="');y=t.slice(e,g).replace(/&#?\w+;/g,i),n.add(p,y,e),f.warning('attribute "'+p+'" missed start quot('+m+")!!"),e=g+1,v=l}break;case"/":switch(v){case o:n.setTagName(t.slice(e,g));case l:case h:case d:v=d,n.closed=!0;case c:case a:case s:break;default:throw new Error("attribute invalid close char('/')")}break;case"":return f.error("unexpected end of input"),v==o&&n.setTagName(t.slice(e,g)),g;case">":switch(v){case o:n.setTagName(t.slice(e,g));case l:case h:case d:break;case c:case a:"/"===(y=t.slice(e,g)).slice(-1)&&(n.closed=!0,y=y.slice(0,-1));case s:v===s&&(y=p),v==c?(f.warning('attribute "'+y+'" missed quot(")!!'),n.add(p,y.replace(/&#?\w+;/g,i),e)):("http://www.w3.org/1999/xhtml"===r[""]&&y.match(/^(?:disabled|checked|selected)$/i)||f.warning('attribute "'+y+'" missed value!! "'+y+'" instead!!'),n.add(y,y,e));break;case u:throw new Error("attribute value missed!!")}return g;case"":m=" ";default:if(m<=" ")switch(v){case o:n.setTagName(t.slice(e,g)),v=h;break;case a:p=t.slice(e,g),v=s;break;case c:var y=t.slice(e,g).replace(/&#?\w+;/g,i);f.warning('attribute "'+y+'" missed quot(")!!'),n.add(p,y,e);case l:v=h}else switch(v){case s:n.tagName,"http://www.w3.org/1999/xhtml"===r[""]&&p.match(/^(?:disabled|checked|selected)$/i)||f.warning('attribute "'+p+'" missed value!! "'+p+'" instead2!!'),n.add(p,p,e),e=g,v=a;break;case l:f.warning('attribute space is required"'+p+'"!!');case h:v=a,e=g;break;case u:v=c,e=g;break;case d:throw new Error("elements closed character '/' and '>' must be connected to")}}g++}}function v(t,e,n){for(var r=t.tagName,i=null,o=t.length;o--;){var a=t[o],s=a.qName,u=a.value;if((d=s.indexOf(":"))>0)var c=a.prefix=s.slice(0,d),l=s.slice(d+1),h="xmlns"===c&&l;else l=s,c=null,h="xmlns"===s&&"";a.localName=l,!1!==h&&(null==i&&(i={},_(n,n={})),n[h]=i[h]=u,a.uri="http://www.w3.org/2000/xmlns/",e.startPrefixMapping(h,u))}for(o=t.length;o--;)(c=(a=t[o]).prefix)&&("xml"===c&&(a.uri="http://www.w3.org/XML/1998/namespace"),"xmlns"!==c&&(a.uri=n[c||""]));var d;(d=r.indexOf(":"))>0?(c=t.prefix=r.slice(0,d),l=t.localName=r.slice(d+1)):(c=null,l=t.localName=r);var f=t.uri=n[c||""];if(e.startElement(f,l,r,t),!t.closed)return t.currentNSMap=n,t.localNSMap=i,!0;if(e.endElement(f,l,r),i)for(c in i)e.endPrefixMapping(c)}function m(t,e,n,r,i){if(/^(?:script|textarea)$/i.test(n)){var o=t.indexOf("</"+n+">",e),a=t.substring(e+1,o);if(/[&<]/.test(a))return/^script$/i.test(n)?(i.characters(a,0,a.length),o):(a=a.replace(/&#?\w+;/g,r),i.characters(a,0,a.length),o)}return e+1}function y(t,e,n,r){var i=r[n];return null==i&&((i=t.lastIndexOf("</"+n+">"))<e&&(i=t.lastIndexOf("</"+n)),r[n]=i),i<e}function _(t,e){for(var n in t)e[n]=t[n]}function E(t,e,n,r){switch(t.charAt(e+2)){case"-":return"-"===t.charAt(e+3)?(i=t.indexOf("--\x3e",e+4))>e?(n.comment(t,e+4,i-e-4),i+3):(r.error("Unclosed comment"),-1):-1;default:if("CDATA["==t.substr(e+3,6)){var i=t.indexOf("]]>",e+9);return n.startCDATA(),n.characters(t,e+9,i-e-9),n.endCDATA(),i+3}var o=function(t,e){var n,r=[],i=/'[^']+'|"[^"]+"|[^\s<>\/=]+=?|(\/?\s*>|<)/g;for(i.lastIndex=e,i.exec(t);n=i.exec(t);)if(r.push(n),n[1])return r}(t,e),a=o.length;if(a>1&&/!doctype/i.test(o[0][0])){var s=o[1][0],u=a>3&&/^public$/i.test(o[2][0])&&o[3][0],c=a>4&&o[4][0],l=o[a-1];return n.startDTD(s,u&&u.replace(/^(['"])(.*?)\1$/,"$2"),c&&c.replace(/^(['"])(.*?)\1$/,"$2")),n.endDTD(),l.index+l[0].length}}return-1}function A(t,e,n){var r=t.indexOf("?>",e);if(r){var i=t.substring(e,r).match(/^<\?(\S*)\s*([\s\S]*?)\s*$/);return i?(i[0].length,n.processingInstruction(i[1],i[2]),r+2):-1}return-1}function S(t){}function T(t,e){return t.__proto__=e,t}f.prototype={parse:function(t,e,n){var r=this.domBuilder;r.startDocument(),_(e,e={}),function(t,e,n,r,i){function o(t){var e=t.slice(1,-1);return e in n?n[e]:"#"===e.charAt(0)?function(t){if(t>65535){var e=55296+((t-=65536)>>10),n=56320+(1023&t);return String.fromCharCode(e,n)}return String.fromCharCode(t)}(parseInt(e.substr(1).replace("x","0x"))):(i.error("entity not found:"+t),t)}function a(e){if(e>_){var n=t.substring(_,e).replace(/&#?\w+;/g,o);h&&s(_),r.characters(n,0,e-_),_=e}}function s(e,n){for(;e>=c&&(n=l.exec(t));)u=n.index,c=u+n[0].length,h.lineNumber++;h.columnNumber=e-u+1}for(var u=0,c=0,l=/.*(?:\r\n?|\n)|.*$/g,h=r.locator,d=[{currentNSMap:e}],f={},_=0;;){try{var T=t.indexOf("<",_);if(T<0){if(!t.substr(_).match(/^\s*$/)){var x=r.doc,b=x.createTextNode(t.substr(_));x.appendChild(b),r.currentElement=b}return}switch(T>_&&a(T),t.charAt(T+1)){case"/":var w=t.indexOf(">",T+3),C=t.substring(T+2,w),I=d.pop();w<0?(C=t.substring(T+2).replace(/[\s<].*/,""),i.error("end tag name: "+C+" is not complete:"+I.tagName),w=T+1+C.length):C.match(/\s</)&&(C=C.replace(/[\s<].*/,""),i.error("end tag name: "+C+" maybe not complete"),w=T+1+C.length);var L=I.localNSMap,N=I.tagName==C;if(N||I.tagName&&I.tagName.toLowerCase()==C.toLowerCase()){if(r.endElement(I.uri,I.localName,C),L)for(var O in L)r.endPrefixMapping(O);N||i.fatalError("end tag name: "+C+" is not match the current start tagName:"+I.tagName)}else d.push(I);w++;break;case"?":h&&s(T),w=A(t,T,r);break;case"!":h&&s(T),w=E(t,T,r,i);break;default:h&&s(T);var R=new S,M=d[d.length-1].currentNSMap,D=(w=g(t,T,R,M,o,i),R.length);if(!R.closed&&y(t,w,R.tagName,f)&&(R.closed=!0,n.nbsp||i.warning("unclosed xml attribute")),h&&D){for(var P=p(h,{}),k=0;k<D;k++){var B=R[k];s(B.offset),B.locator=p(h,{})}r.locator=P,v(R,r,M)&&d.push(R),r.locator=h}else v(R,r,M)&&d.push(R);"http://www.w3.org/1999/xhtml"!==R.uri||R.closed?w++:w=m(t,w,R.tagName,o,r)}}catch(t){i.error("element parse error: "+t),w=-1}w>_?_=w:a(Math.max(T,_)+1)}}(t,e,n,r,this.errorHandler),r.endDocument()}},S.prototype={setTagName:function(t){if(!i.test(t))throw new Error("invalid tagName:"+t);this.tagName=t},add:function(t,e,n){if(!i.test(t))throw new Error("invalid attribute:"+t);this[this.length++]={qName:t,value:e,offset:n}},length:0,getLocalName:function(t){return this[t].localName},getLocator:function(t){return this[t].locator},getQName:function(t){return this[t].qName},getURI:function(t){return this[t].uri},getValue:function(t){return this[t].value}},T({},T.prototype)instanceof T||(T=function(t,e){function n(){}for(e in n.prototype=e,n=new n,t)n[e]=t[e];return n}),e.XMLReader=f},function(t,e){t.exports=__webpack_require__(281)},function(t,e){t.exports=__webpack_require__(296)},function(t,e){}])},function(t,e,n){var r,i,o,a;o=function(t,e,n,r){var i=t.Backbone,o=Array.prototype.slice;e.VERSION="1.3.3",e.$=r,e.noConflict=function(){return t.Backbone=i,this},e.emulateHTTP=!1,e.emulateJSON=!1;var a=function(t,e,r){n.each(e,function(e,i){n[i]&&(t.prototype[i]=function(t,e,r){switch(t){case 1:return function(){return n[e](this[r])};case 2:return function(t){return n[e](this[r],t)};case 3:return function(t,i){return n[e](this[r],s(t,this),i)};case 4:return function(t,i,o){return n[e](this[r],s(t,this),i,o)};default:return function(){var t=o.call(arguments);return t.unshift(this[r]),n[e].apply(n,t)}}}(e,i,r))})},s=function(t,e){return n.isFunction(t)?t:n.isObject(t)&&!e._isModel(t)?u(t):n.isString(t)?function(e){return e.get(t)}:t},u=function(t){var e=n.matches(t);return function(t){return e(t.attributes)}},c=e.Events={},l=/\s+/,h=function(t,e,r,i,o){var a,s=0;if(r&&"object"==typeof r){void 0!==i&&"context"in o&&void 0===o.context&&(o.context=i);for(a=n.keys(r);s<a.length;s++)e=h(t,e,a[s],r[a[s]],o)}else if(r&&l.test(r))for(a=r.split(l);s<a.length;s++)e=t(e,a[s],i,o);else e=t(e,r,i,o);return e};c.on=function(t,e,n){return d(this,t,e,n)};var d=function(t,e,n,r,i){(t._events=h(f,t._events||{},e,n,{context:r,ctx:t,listening:i}),i)&&((t._listeners||(t._listeners={}))[i.id]=i);return t};c.listenTo=function(t,e,r){if(!t)return this;var i=t._listenId||(t._listenId=n.uniqueId("l")),o=this._listeningTo||(this._listeningTo={}),a=o[i];if(!a){var s=this._listenId||(this._listenId=n.uniqueId("l"));a=o[i]={obj:t,objId:i,id:s,listeningTo:o,count:0}}return d(t,e,r,this,a),this};var f=function(t,e,n,r){if(n){var i=t[e]||(t[e]=[]),o=r.context,a=r.ctx,s=r.listening;s&&s.count++,i.push({callback:n,context:o,ctx:o||a,listening:s})}return t};c.off=function(t,e,n){return this._events?(this._events=h(p,this._events,t,e,{context:n,listeners:this._listeners}),this):this},c.stopListening=function(t,e,r){var i=this._listeningTo;if(!i)return this;for(var o=t?[t._listenId]:n.keys(i),a=0;a<o.length;a++){var s=i[o[a]];if(!s)break;s.obj.off(e,r,this)}return this};var p=function(t,e,r,i){if(t){var o,a=0,s=i.context,u=i.listeners;if(e||r||s){for(var c=e?[e]:n.keys(t);a<c.length;a++){var l=t[e=c[a]];if(!l)break;for(var h=[],d=0;d<l.length;d++){var f=l[d];r&&r!==f.callback&&r!==f.callback._callback||s&&s!==f.context?h.push(f):(o=f.listening)&&0==--o.count&&(delete u[o.id],delete o.listeningTo[o.objId])}h.length?t[e]=h:delete t[e]}return t}for(var p=n.keys(u);a<p.length;a++)delete u[(o=u[p[a]]).id],delete o.listeningTo[o.objId]}};c.once=function(t,e,r){var i=h(g,{},t,e,n.bind(this.off,this));return"string"==typeof t&&null==r&&(e=void 0),this.on(i,e,r)},c.listenToOnce=function(t,e,r){var i=h(g,{},e,r,n.bind(this.stopListening,this,t));return this.listenTo(t,i)};var g=function(t,e,r,i){if(r){var o=t[e]=n.once(function(){i(e,o),r.apply(this,arguments)});o._callback=r}return t};c.trigger=function(t){if(!this._events)return this;for(var e=Math.max(0,arguments.length-1),n=Array(e),r=0;r<e;r++)n[r]=arguments[r+1];return h(v,this._events,t,void 0,n),this};var v=function(t,e,n,r){if(t){var i=t[e],o=t.all;i&&o&&(o=o.slice()),i&&m(i,r),o&&m(o,[e].concat(r))}return t},m=function(t,e){var n,r=-1,i=t.length,o=e[0],a=e[1],s=e[2];switch(e.length){case 0:for(;++r<i;)(n=t[r]).callback.call(n.ctx);return;case 1:for(;++r<i;)(n=t[r]).callback.call(n.ctx,o);return;case 2:for(;++r<i;)(n=t[r]).callback.call(n.ctx,o,a);return;case 3:for(;++r<i;)(n=t[r]).callback.call(n.ctx,o,a,s);return;default:for(;++r<i;)(n=t[r]).callback.apply(n.ctx,e);return}};c.bind=c.on,c.unbind=c.off,n.extend(e,c);var y=e.Model=function(t,e){var r=t||{};e||(e={}),this.cid=n.uniqueId(this.cidPrefix),this.attributes={},e.collection&&(this.collection=e.collection),e.parse&&(r=this.parse(r,e)||{});var i=n.result(this,"defaults");r=n.defaults(n.extend({},i,r),i),this.set(r,e),this.changed={},this.initialize.apply(this,arguments)};n.extend(y.prototype,c,{changed:null,validationError:null,idAttribute:"id",cidPrefix:"c",initialize:function(){},toJSON:function(t){return n.clone(this.attributes)},sync:function(){return e.sync.apply(this,arguments)},get:function(t){return this.attributes[t]},escape:function(t){return n.escape(this.get(t))},has:function(t){return null!=this.get(t)},matches:function(t){return!!n.iteratee(t,this)(this.attributes)},set:function(t,e,r){if(null==t)return this;var i;if("object"==typeof t?(i=t,r=e):(i={})[t]=e,r||(r={}),!this._validate(i,r))return!1;var o=r.unset,a=r.silent,s=[],u=this._changing;this._changing=!0,u||(this._previousAttributes=n.clone(this.attributes),this.changed={});var c=this.attributes,l=this.changed,h=this._previousAttributes;for(var d in i)e=i[d],n.isEqual(c[d],e)||s.push(d),n.isEqual(h[d],e)?delete l[d]:l[d]=e,o?delete c[d]:c[d]=e;if(this.idAttribute in i&&(this.id=this.get(this.idAttribute)),!a){s.length&&(this._pending=r);for(var f=0;f<s.length;f++)this.trigger("change:"+s[f],this,c[s[f]],r)}if(u)return this;if(!a)for(;this._pending;)r=this._pending,this._pending=!1,this.trigger("change",this,r);return this._pending=!1,this._changing=!1,this},unset:function(t,e){return this.set(t,void 0,n.extend({},e,{unset:!0}))},clear:function(t){var e={};for(var r in this.attributes)e[r]=void 0;return this.set(e,n.extend({},t,{unset:!0}))},hasChanged:function(t){return null==t?!n.isEmpty(this.changed):n.has(this.changed,t)},changedAttributes:function(t){if(!t)return!!this.hasChanged()&&n.clone(this.changed);var e=this._changing?this._previousAttributes:this.attributes,r={};for(var i in t){var o=t[i];n.isEqual(e[i],o)||(r[i]=o)}return!!n.size(r)&&r},previous:function(t){return null!=t&&this._previousAttributes?this._previousAttributes[t]:null},previousAttributes:function(){return n.clone(this._previousAttributes)},fetch:function(t){var e=this,r=(t=n.extend({parse:!0},t)).success;return t.success=function(n){var i=t.parse?e.parse(n,t):n;if(!e.set(i,t))return!1;r&&r.call(t.context,e,n,t),e.trigger("sync",e,n,t)},B(this,t),this.sync("read",this,t)},save:function(t,e,r){var i;null==t||"object"==typeof t?(i=t,r=e):(i={})[t]=e;var o=(r=n.extend({validate:!0,parse:!0},r)).wait;if(i&&!o){if(!this.set(i,r))return!1}else if(!this._validate(i,r))return!1;var a=this,s=r.success,u=this.attributes;r.success=function(t){a.attributes=u;var e=r.parse?a.parse(t,r):t;if(o&&(e=n.extend({},i,e)),e&&!a.set(e,r))return!1;s&&s.call(r.context,a,t,r),a.trigger("sync",a,t,r)},B(this,r),i&&o&&(this.attributes=n.extend({},u,i));var c=this.isNew()?"create":r.patch?"patch":"update";"patch"!==c||r.attrs||(r.attrs=i);var l=this.sync(c,this,r);return this.attributes=u,l},destroy:function(t){var e=this,r=(t=t?n.clone(t):{}).success,i=t.wait,o=function(){e.stopListening(),e.trigger("destroy",e,e.collection,t)};t.success=function(n){i&&o(),r&&r.call(t.context,e,n,t),e.isNew()||e.trigger("sync",e,n,t)};var a=!1;return this.isNew()?n.defer(t.success):(B(this,t),a=this.sync("delete",this,t)),i||o(),a},url:function(){var t=n.result(this,"urlRoot")||n.result(this.collection,"url")||k();if(this.isNew())return t;var e=this.get(this.idAttribute);return t.replace(/[^\/]$/,"$&/")+encodeURIComponent(e)},parse:function(t,e){return t},clone:function(){return new this.constructor(this.attributes)},isNew:function(){return!this.has(this.idAttribute)},isValid:function(t){return this._validate({},n.extend({},t,{validate:!0}))},_validate:function(t,e){if(!e.validate||!this.validate)return!0;t=n.extend({},this.attributes,t);var r=this.validationError=this.validate(t,e)||null;return!r||(this.trigger("invalid",this,r,n.extend(e,{validationError:r})),!1)}});a(y,{keys:1,values:1,pairs:1,invert:1,pick:0,omit:0,chain:1,isEmpty:1},"attributes");var _=e.Collection=function(t,e){e||(e={}),e.model&&(this.model=e.model),void 0!==e.comparator&&(this.comparator=e.comparator),this._reset(),this.initialize.apply(this,arguments),t&&this.reset(t,n.extend({silent:!0},e))},E={add:!0,remove:!0,merge:!0},A={add:!0,remove:!1},S=function(t,e,n){n=Math.min(Math.max(n,0),t.length);var r,i=Array(t.length-n),o=e.length;for(r=0;r<i.length;r++)i[r]=t[r+n];for(r=0;r<o;r++)t[r+n]=e[r];for(r=0;r<i.length;r++)t[r+o+n]=i[r]};n.extend(_.prototype,c,{model:y,initialize:function(){},toJSON:function(t){return this.map(function(e){return e.toJSON(t)})},sync:function(){return e.sync.apply(this,arguments)},add:function(t,e){return this.set(t,n.extend({merge:!1},e,A))},remove:function(t,e){e=n.extend({},e);var r=!n.isArray(t);t=r?[t]:t.slice();var i=this._removeModels(t,e);return!e.silent&&i.length&&(e.changes={added:[],merged:[],removed:i},this.trigger("update",this,e)),r?i[0]:i},set:function(t,e){if(null!=t){(e=n.extend({},E,e)).parse&&!this._isModel(t)&&(t=this.parse(t,e)||[]);var r=!n.isArray(t);t=r?[t]:t.slice();var i=e.at;null!=i&&(i=+i),i>this.length&&(i=this.length),i<0&&(i+=this.length+1);var o,a,s=[],u=[],c=[],l=[],h={},d=e.add,f=e.merge,p=e.remove,g=!1,v=this.comparator&&null==i&&!1!==e.sort,m=n.isString(this.comparator)?this.comparator:null;for(a=0;a<t.length;a++){o=t[a];var y=this.get(o);if(y){if(f&&o!==y){var _=this._isModel(o)?o.attributes:o;e.parse&&(_=y.parse(_,e)),y.set(_,e),c.push(y),v&&!g&&(g=y.hasChanged(m))}h[y.cid]||(h[y.cid]=!0,s.push(y)),t[a]=y}else d&&(o=t[a]=this._prepareModel(o,e))&&(u.push(o),this._addReference(o,e),h[o.cid]=!0,s.push(o))}if(p){for(a=0;a<this.length;a++)h[(o=this.models[a]).cid]||l.push(o);l.length&&this._removeModels(l,e)}var A=!1,T=!v&&d&&p;if(s.length&&T?(A=this.length!==s.length||n.some(this.models,function(t,e){return t!==s[e]}),this.models.length=0,S(this.models,s,0),this.length=this.models.length):u.length&&(v&&(g=!0),S(this.models,u,null==i?this.length:i),this.length=this.models.length),g&&this.sort({silent:!0}),!e.silent){for(a=0;a<u.length;a++)null!=i&&(e.index=i+a),(o=u[a]).trigger("add",o,this,e);(g||A)&&this.trigger("sort",this,e),(u.length||l.length||c.length)&&(e.changes={added:u,removed:l,merged:c},this.trigger("update",this,e))}return r?t[0]:t}},reset:function(t,e){e=e?n.clone(e):{};for(var r=0;r<this.models.length;r++)this._removeReference(this.models[r],e);return e.previousModels=this.models,this._reset(),t=this.add(t,n.extend({silent:!0},e)),e.silent||this.trigger("reset",this,e),t},push:function(t,e){return this.add(t,n.extend({at:this.length},e))},pop:function(t){var e=this.at(this.length-1);return this.remove(e,t)},unshift:function(t,e){return this.add(t,n.extend({at:0},e))},shift:function(t){var e=this.at(0);return this.remove(e,t)},slice:function(){return o.apply(this.models,arguments)},get:function(t){if(null!=t)return this._byId[t]||this._byId[this.modelId(t.attributes||t)]||t.cid&&this._byId[t.cid]},has:function(t){return null!=this.get(t)},at:function(t){return t<0&&(t+=this.length),this.models[t]},where:function(t,e){return this[e?"find":"filter"](t)},findWhere:function(t){return this.where(t,!0)},sort:function(t){var e=this.comparator;if(!e)throw new Error("Cannot sort a set without a comparator");t||(t={});var r=e.length;return n.isFunction(e)&&(e=n.bind(e,this)),1===r||n.isString(e)?this.models=this.sortBy(e):this.models.sort(e),t.silent||this.trigger("sort",this,t),this},pluck:function(t){return this.map(t+"")},fetch:function(t){var e=(t=n.extend({parse:!0},t)).success,r=this;return t.success=function(n){var i=t.reset?"reset":"set";r[i](n,t),e&&e.call(t.context,r,n,t),r.trigger("sync",r,n,t)},B(this,t),this.sync("read",this,t)},create:function(t,e){var r=(e=e?n.clone(e):{}).wait;if(!(t=this._prepareModel(t,e)))return!1;r||this.add(t,e);var i=this,o=e.success;return e.success=function(t,e,n){r&&i.add(t,n),o&&o.call(n.context,t,e,n)},t.save(null,e),t},parse:function(t,e){return t},clone:function(){return new this.constructor(this.models,{model:this.model,comparator:this.comparator})},modelId:function(t){return t[this.model.prototype.idAttribute||"id"]},_reset:function(){this.length=0,this.models=[],this._byId={}},_prepareModel:function(t,e){if(this._isModel(t))return t.collection||(t.collection=this),t;(e=e?n.clone(e):{}).collection=this;var r=new this.model(t,e);return r.validationError?(this.trigger("invalid",this,r.validationError,e),!1):r},_removeModels:function(t,e){for(var n=[],r=0;r<t.length;r++){var i=this.get(t[r]);if(i){var o=this.indexOf(i);this.models.splice(o,1),this.length--,delete this._byId[i.cid];var a=this.modelId(i.attributes);null!=a&&delete this._byId[a],e.silent||(e.index=o,i.trigger("remove",i,this,e)),n.push(i),this._removeReference(i,e)}}return n},_isModel:function(t){return t instanceof y},_addReference:function(t,e){this._byId[t.cid]=t;var n=this.modelId(t.attributes);null!=n&&(this._byId[n]=t),t.on("all",this._onModelEvent,this)},_removeReference:function(t,e){delete this._byId[t.cid];var n=this.modelId(t.attributes);null!=n&&delete this._byId[n],this===t.collection&&delete t.collection,t.off("all",this._onModelEvent,this)},_onModelEvent:function(t,e,n,r){if(e){if(("add"===t||"remove"===t)&&n!==this)return;if("destroy"===t&&this.remove(e,r),"change"===t){var i=this.modelId(e.previousAttributes()),o=this.modelId(e.attributes);i!==o&&(null!=i&&delete this._byId[i],null!=o&&(this._byId[o]=e))}}this.trigger.apply(this,arguments)}});a(_,{forEach:3,each:3,map:3,collect:3,reduce:0,foldl:0,inject:0,reduceRight:0,foldr:0,find:3,detect:3,filter:3,select:3,reject:3,every:3,all:3,some:3,any:3,include:3,includes:3,contains:3,invoke:0,max:3,min:3,toArray:1,size:1,first:3,head:3,take:3,initial:3,rest:3,tail:3,drop:3,last:3,without:0,difference:0,indexOf:3,shuffle:1,lastIndexOf:3,isEmpty:1,chain:1,sample:3,partition:3,groupBy:3,countBy:3,sortBy:3,indexBy:3,findIndex:3,findLastIndex:3},"models");var T=e.View=function(t){this.cid=n.uniqueId("view"),n.extend(this,n.pick(t,b)),this._ensureElement(),this.initialize.apply(this,arguments)},x=/^(\S+)\s*(.*)$/,b=["model","collection","el","id","attributes","className","tagName","events"];n.extend(T.prototype,c,{tagName:"div",$:function(t){return this.$el.find(t)},initialize:function(){},render:function(){return this},remove:function(){return this._removeElement(),this.stopListening(),this},_removeElement:function(){this.$el.remove()},setElement:function(t){return this.undelegateEvents(),this._setElement(t),this.delegateEvents(),this},_setElement:function(t){this.$el=t instanceof e.$?t:e.$(t),this.el=this.$el[0]},delegateEvents:function(t){if(t||(t=n.result(this,"events")),!t)return this;for(var e in this.undelegateEvents(),t){var r=t[e];if(n.isFunction(r)||(r=this[r]),r){var i=e.match(x);this.delegate(i[1],i[2],n.bind(r,this))}}return this},delegate:function(t,e,n){return this.$el.on(t+".delegateEvents"+this.cid,e,n),this},undelegateEvents:function(){return this.$el&&this.$el.off(".delegateEvents"+this.cid),this},undelegate:function(t,e,n){return this.$el.off(t+".delegateEvents"+this.cid,e,n),this},_createElement:function(t){return document.createElement(t)},_ensureElement:function(){if(this.el)this.setElement(n.result(this,"el"));else{var t=n.extend({},n.result(this,"attributes"));this.id&&(t.id=n.result(this,"id")),this.className&&(t.class=n.result(this,"className")),this.setElement(this._createElement(n.result(this,"tagName"))),this._setAttributes(t)}},_setAttributes:function(t){this.$el.attr(t)}}),e.sync=function(t,r,i){var o=w[t];n.defaults(i||(i={}),{emulateHTTP:e.emulateHTTP,emulateJSON:e.emulateJSON});var a={type:o,dataType:"json"};if(i.url||(a.url=n.result(r,"url")||k()),null!=i.data||!r||"create"!==t&&"update"!==t&&"patch"!==t||(a.contentType="application/json",a.data=JSON.stringify(i.attrs||r.toJSON(i))),i.emulateJSON&&(a.contentType="application/x-www-form-urlencoded",a.data=a.data?{model:a.data}:{}),i.emulateHTTP&&("PUT"===o||"DELETE"===o||"PATCH"===o)){a.type="POST",i.emulateJSON&&(a.data._method=o);var s=i.beforeSend;i.beforeSend=function(t){if(t.setRequestHeader("X-HTTP-Method-Override",o),s)return s.apply(this,arguments)}}"GET"===a.type||i.emulateJSON||(a.processData=!1);var u=i.error;i.error=function(t,e,n){i.textStatus=e,i.errorThrown=n,u&&u.call(i.context,t,e,n)};var c=i.xhr=e.ajax(n.extend(a,i));return r.trigger("request",r,c,i),c};var w={create:"POST",update:"PUT",patch:"PATCH",delete:"DELETE",read:"GET"};e.ajax=function(){return e.$.ajax.apply(e.$,arguments)};var C=e.Router=function(t){t||(t={}),t.routes&&(this.routes=t.routes),this._bindRoutes(),this.initialize.apply(this,arguments)},I=/\((.*?)\)/g,L=/(\(\?)?:\w+/g,N=/\*\w+/g,O=/[\-{}\[\]+?.,\\\^$|#\s]/g;n.extend(C.prototype,c,{initialize:function(){},route:function(t,r,i){n.isRegExp(t)||(t=this._routeToRegExp(t)),n.isFunction(r)&&(i=r,r=""),i||(i=this[r]);var o=this;return e.history.route(t,function(n){var a=o._extractParameters(t,n);!1!==o.execute(i,a,r)&&(o.trigger.apply(o,["route:"+r].concat(a)),o.trigger("route",r,a),e.history.trigger("route",o,r,a))}),this},execute:function(t,e,n){t&&t.apply(this,e)},navigate:function(t,n){return e.history.navigate(t,n),this},_bindRoutes:function(){if(this.routes){this.routes=n.result(this,"routes");for(var t,e=n.keys(this.routes);null!=(t=e.pop());)this.route(t,this.routes[t])}},_routeToRegExp:function(t){return t=t.replace(O,"\\$&").replace(I,"(?:$1)?").replace(L,function(t,e){return e?t:"([^/?]+)"}).replace(N,"([^?]*?)"),new RegExp("^"+t+"(?:\\?([\\s\\S]*))?$")},_extractParameters:function(t,e){var r=t.exec(e).slice(1);return n.map(r,function(t,e){return e===r.length-1?t||null:t?decodeURIComponent(t):null})}});var R=e.History=function(){this.handlers=[],this.checkUrl=n.bind(this.checkUrl,this),"undefined"!=typeof window&&(this.location=window.location,this.history=window.history)},M=/^[#\/]|\s+$/g,D=/^\/+|\/+$/g,P=/#.*$/;R.started=!1,n.extend(R.prototype,c,{interval:50,atRoot:function(){return this.location.pathname.replace(/[^\/]$/,"$&/")===this.root&&!this.getSearch()},matchRoot:function(){return this.decodeFragment(this.location.pathname).slice(0,this.root.length-1)+"/"===this.root},decodeFragment:function(t){return decodeURI(t.replace(/%25/g,"%2525"))},getSearch:function(){var t=this.location.href.replace(/#.*/,"").match(/\?.+/);return t?t[0]:""},getHash:function(t){var e=(t||this).location.href.match(/#(.*)$/);return e?e[1]:""},getPath:function(){var t=this.decodeFragment(this.location.pathname+this.getSearch()).slice(this.root.length-1);return"/"===t.charAt(0)?t.slice(1):t},getFragment:function(t){return null==t&&(t=this._usePushState||!this._wantsHashChange?this.getPath():this.getHash()),t.replace(M,"")},start:function(t){if(R.started)throw new Error("Backbone.history has already been started");if(R.started=!0,this.options=n.extend({root:"/"},this.options,t),this.root=this.options.root,this._wantsHashChange=!1!==this.options.hashChange,this._hasHashChange="onhashchange"in window&&(void 0===document.documentMode||document.documentMode>7),this._useHashChange=this._wantsHashChange&&this._hasHashChange,this._wantsPushState=!!this.options.pushState,this._hasPushState=!(!this.history||!this.history.pushState),this._usePushState=this._wantsPushState&&this._hasPushState,this.fragment=this.getFragment(),this.root=("/"+this.root+"/").replace(D,"/"),this._wantsHashChange&&this._wantsPushState){if(!this._hasPushState&&!this.atRoot()){var e=this.root.slice(0,-1)||"/";return this.location.replace(e+"#"+this.getPath()),!0}this._hasPushState&&this.atRoot()&&this.navigate(this.getHash(),{replace:!0})}if(!this._hasHashChange&&this._wantsHashChange&&!this._usePushState){this.iframe=document.createElement("iframe"),this.iframe.src="javascript:0",this.iframe.style.display="none",this.iframe.tabIndex=-1;var r=document.body,i=r.insertBefore(this.iframe,r.firstChild).contentWindow;i.document.open(),i.document.close(),i.location.hash="#"+this.fragment}var o=window.addEventListener||function(t,e){return attachEvent("on"+t,e)};if(this._usePushState?o("popstate",this.checkUrl,!1):this._useHashChange&&!this.iframe?o("hashchange",this.checkUrl,!1):this._wantsHashChange&&(this._checkUrlInterval=setInterval(this.checkUrl,this.interval)),!this.options.silent)return this.loadUrl()},stop:function(){var t=window.removeEventListener||function(t,e){return detachEvent("on"+t,e)};this._usePushState?t("popstate",this.checkUrl,!1):this._useHashChange&&!this.iframe&&t("hashchange",this.checkUrl,!1),this.iframe&&(document.body.removeChild(this.iframe),this.iframe=null),this._checkUrlInterval&&clearInterval(this._checkUrlInterval),R.started=!1},route:function(t,e){this.handlers.unshift({route:t,callback:e})},checkUrl:function(t){var e=this.getFragment();if(e===this.fragment&&this.iframe&&(e=this.getHash(this.iframe.contentWindow)),e===this.fragment)return!1;this.iframe&&this.navigate(e),this.loadUrl()},loadUrl:function(t){return!!this.matchRoot()&&(t=this.fragment=this.getFragment(t),n.some(this.handlers,function(e){if(e.route.test(t))return e.callback(t),!0}))},navigate:function(t,e){if(!R.started)return!1;e&&!0!==e||(e={trigger:!!e}),t=this.getFragment(t||"");var n=this.root;""!==t&&"?"!==t.charAt(0)||(n=n.slice(0,-1)||"/");var r=n+t;if(t=this.decodeFragment(t.replace(P,"")),this.fragment!==t){if(this.fragment=t,this._usePushState)this.history[e.replace?"replaceState":"pushState"]({},document.title,r);else{if(!this._wantsHashChange)return this.location.assign(r);if(this._updateHash(this.location,t,e.replace),this.iframe&&t!==this.getHash(this.iframe.contentWindow)){var i=this.iframe.contentWindow;e.replace||(i.document.open(),i.document.close()),this._updateHash(i.location,t,e.replace)}}return e.trigger?this.loadUrl(t):void 0}},_updateHash:function(t,e,n){if(n){var r=t.href.replace(/(javascript:|#).*$/,"");t.replace(r+"#"+e)}else t.hash="#"+e}}),e.history=new R;y.extend=_.extend=C.extend=T.extend=R.extend=function(t,e){var r,i=this;return r=t&&n.has(t,"constructor")?t.constructor:function(){return i.apply(this,arguments)},n.extend(r,i,e),r.prototype=n.create(i.prototype,t),r.prototype.constructor=r,r.__super__=i.prototype,r};var k=function(){throw new Error('A "url" property or function must be specified')},B=function(t,e){var n=e.error;e.error=function(r){n&&n.call(e.context,t,r,e),t.trigger("error",t,r,e)}};return e},a="object"==typeof self&&self.self===self&&self||"object"==typeof global&&global.global===global&&global,r=[n(115),n(54),e],void 0===(i=function(t,e,n){a.Backbone=o(a,n,t,e)}.apply(e,r))||(t.exports=i)},function(t,e,n){var r;!function(i,o,a,s){"use strict";var u,c=["","webkit","Moz","MS","ms","o"],l=o.createElement("div"),h="function",d=Math.round,f=Math.abs,p=Date.now;function g(t,e,n){return setTimeout(S(t,n),e)}function v(t,e,n){return!!Array.isArray(t)&&(m(t,n[e],n),!0)}function m(t,e,n){var r;if(t)if(t.forEach)t.forEach(e,n);else if(t.length!==s)for(r=0;r<t.length;)e.call(n,t[r],r,t),r++;else for(r in t)t.hasOwnProperty(r)&&e.call(n,t[r],r,t)}function y(t,e,n){var r="DEPRECATED METHOD: "+e+"\n"+n+" AT \n";return function(){var e=new Error("get-stack-trace"),n=e&&e.stack?e.stack.replace(/^[^\(]+?[\n$]/gm,"").replace(/^\s+at\s+/gm,"").replace(/^Object.<anonymous>\s*\(/gm,"{anonymous}()@"):"Unknown Stack Trace",o=i.console&&(i.console.warn||i.console.log);return o&&o.call(i.console,r,n),t.apply(this,arguments)}}u="function"!=typeof Object.assign?function(t){if(t===s||null===t)throw new TypeError("Cannot convert undefined or null to object");for(var e=Object(t),n=1;n<arguments.length;n++){var r=arguments[n];if(r!==s&&null!==r)for(var i in r)r.hasOwnProperty(i)&&(e[i]=r[i])}return e}:Object.assign;var _=y(function(t,e,n){for(var r=Object.keys(e),i=0;i<r.length;)(!n||n&&t[r[i]]===s)&&(t[r[i]]=e[r[i]]),i++;return t},"extend","Use `assign`."),E=y(function(t,e){return _(t,e,!0)},"merge","Use `assign`.");function A(t,e,n){var r,i=e.prototype;(r=t.prototype=Object.create(i)).constructor=t,r._super=i,n&&u(r,n)}function S(t,e){return function(){return t.apply(e,arguments)}}function T(t,e){return typeof t==h?t.apply(e&&e[0]||s,e):t}function x(t,e){return t===s?e:t}function b(t,e,n){m(L(e),function(e){t.addEventListener(e,n,!1)})}function w(t,e,n){m(L(e),function(e){t.removeEventListener(e,n,!1)})}function C(t,e){for(;t;){if(t==e)return!0;t=t.parentNode}return!1}function I(t,e){return t.indexOf(e)>-1}function L(t){return t.trim().split(/\s+/g)}function N(t,e,n){if(t.indexOf&&!n)return t.indexOf(e);for(var r=0;r<t.length;){if(n&&t[r][n]==e||!n&&t[r]===e)return r;r++}return-1}function O(t){return Array.prototype.slice.call(t,0)}function R(t,e,n){for(var r=[],i=[],o=0;o<t.length;){var a=e?t[o][e]:t[o];N(i,a)<0&&r.push(t[o]),i[o]=a,o++}return n&&(r=e?r.sort(function(t,n){return t[e]>n[e]}):r.sort()),r}function M(t,e){for(var n,r,i=e[0].toUpperCase()+e.slice(1),o=0;o<c.length;){if((r=(n=c[o])?n+i:e)in t)return r;o++}return s}var D=1;function P(t){var e=t.ownerDocument||t;return e.defaultView||e.parentWindow||i}var k="ontouchstart"in i,B=M(i,"PointerEvent")!==s,F=k&&/mobile|tablet|ip(ad|hone|od)|android/i.test(navigator.userAgent),V=25,U=1,H=2,Y=4,G=8,j=1,z=2,W=4,K=8,Q=16,q=z|W,X=K|Q,$=q|X,J=["x","y"],Z=["clientX","clientY"];function tt(t,e){var n=this;this.manager=t,this.callback=e,this.element=t.element,this.target=t.options.inputTarget,this.domHandler=function(e){T(t.options.enable,[t])&&n.handler(e)},this.init()}function et(t,e,n){var r=n.pointers.length,i=n.changedPointers.length,o=e&U&&r-i==0,a=e&(Y|G)&&r-i==0;n.isFirst=!!o,n.isFinal=!!a,o&&(t.session={}),n.eventType=e,function(t,e){var n=t.session,r=e.pointers,i=r.length;n.firstInput||(n.firstInput=nt(e));i>1&&!n.firstMultiple?n.firstMultiple=nt(e):1===i&&(n.firstMultiple=!1);var o=n.firstInput,a=n.firstMultiple,u=a?a.center:o.center,c=e.center=rt(r);e.timeStamp=p(),e.deltaTime=e.timeStamp-o.timeStamp,e.angle=st(u,c),e.distance=at(u,c),function(t,e){var n=e.center,r=t.offsetDelta||{},i=t.prevDelta||{},o=t.prevInput||{};e.eventType!==U&&o.eventType!==Y||(i=t.prevDelta={x:o.deltaX||0,y:o.deltaY||0},r=t.offsetDelta={x:n.x,y:n.y});e.deltaX=i.x+(n.x-r.x),e.deltaY=i.y+(n.y-r.y)}(n,e),e.offsetDirection=ot(e.deltaX,e.deltaY);var l=it(e.deltaTime,e.deltaX,e.deltaY);e.overallVelocityX=l.x,e.overallVelocityY=l.y,e.overallVelocity=f(l.x)>f(l.y)?l.x:l.y,e.scale=a?(h=a.pointers,d=r,at(d[0],d[1],Z)/at(h[0],h[1],Z)):1,e.rotation=a?function(t,e){return st(e[1],e[0],Z)+st(t[1],t[0],Z)}(a.pointers,r):0,e.maxPointers=n.prevInput?e.pointers.length>n.prevInput.maxPointers?e.pointers.length:n.prevInput.maxPointers:e.pointers.length,function(t,e){var n,r,i,o,a=t.lastInterval||e,u=e.timeStamp-a.timeStamp;if(e.eventType!=G&&(u>V||a.velocity===s)){var c=e.deltaX-a.deltaX,l=e.deltaY-a.deltaY,h=it(u,c,l);r=h.x,i=h.y,n=f(h.x)>f(h.y)?h.x:h.y,o=ot(c,l),t.lastInterval=e}else n=a.velocity,r=a.velocityX,i=a.velocityY,o=a.direction;e.velocity=n,e.velocityX=r,e.velocityY=i,e.direction=o}(n,e);var h,d;var g=t.element;C(e.srcEvent.target,g)&&(g=e.srcEvent.target);e.target=g}(t,n),t.emit("hammer.input",n),t.recognize(n),t.session.prevInput=n}function nt(t){for(var e=[],n=0;n<t.pointers.length;)e[n]={clientX:d(t.pointers[n].clientX),clientY:d(t.pointers[n].clientY)},n++;return{timeStamp:p(),pointers:e,center:rt(e),deltaX:t.deltaX,deltaY:t.deltaY}}function rt(t){var e=t.length;if(1===e)return{x:d(t[0].clientX),y:d(t[0].clientY)};for(var n=0,r=0,i=0;i<e;)n+=t[i].clientX,r+=t[i].clientY,i++;return{x:d(n/e),y:d(r/e)}}function it(t,e,n){return{x:e/t||0,y:n/t||0}}function ot(t,e){return t===e?j:f(t)>=f(e)?t<0?z:W:e<0?K:Q}function at(t,e,n){n||(n=J);var r=e[n[0]]-t[n[0]],i=e[n[1]]-t[n[1]];return Math.sqrt(r*r+i*i)}function st(t,e,n){n||(n=J);var r=e[n[0]]-t[n[0]],i=e[n[1]]-t[n[1]];return 180*Math.atan2(i,r)/Math.PI}tt.prototype={handler:function(){},init:function(){this.evEl&&b(this.element,this.evEl,this.domHandler),this.evTarget&&b(this.target,this.evTarget,this.domHandler),this.evWin&&b(P(this.element),this.evWin,this.domHandler)},destroy:function(){this.evEl&&w(this.element,this.evEl,this.domHandler),this.evTarget&&w(this.target,this.evTarget,this.domHandler),this.evWin&&w(P(this.element),this.evWin,this.domHandler)}};var ut={mousedown:U,mousemove:H,mouseup:Y},ct="mousedown",lt="mousemove mouseup";function ht(){this.evEl=ct,this.evWin=lt,this.pressed=!1,tt.apply(this,arguments)}A(ht,tt,{handler:function(t){var e=ut[t.type];e&U&&0===t.button&&(this.pressed=!0),e&H&&1!==t.which&&(e=Y),this.pressed&&(e&Y&&(this.pressed=!1),this.callback(this.manager,e,{pointers:[t],changedPointers:[t],pointerType:"mouse",srcEvent:t}))}});var dt={pointerdown:U,pointermove:H,pointerup:Y,pointercancel:G,pointerout:G},ft={2:"touch",3:"pen",4:"mouse",5:"kinect"},pt="pointerdown",gt="pointermove pointerup pointercancel";function vt(){this.evEl=pt,this.evWin=gt,tt.apply(this,arguments),this.store=this.manager.session.pointerEvents=[]}i.MSPointerEvent&&!i.PointerEvent&&(pt="MSPointerDown",gt="MSPointerMove MSPointerUp MSPointerCancel"),A(vt,tt,{handler:function(t){var e=this.store,n=!1,r=t.type.toLowerCase().replace("ms",""),i=dt[r],o=ft[t.pointerType]||t.pointerType,a="touch"==o,s=N(e,t.pointerId,"pointerId");i&U&&(0===t.button||a)?s<0&&(e.push(t),s=e.length-1):i&(Y|G)&&(n=!0),s<0||(e[s]=t,this.callback(this.manager,i,{pointers:e,changedPointers:[t],pointerType:o,srcEvent:t}),n&&e.splice(s,1))}});var mt={touchstart:U,touchmove:H,touchend:Y,touchcancel:G},yt="touchstart",_t="touchstart touchmove touchend touchcancel";function Et(){this.evTarget=yt,this.evWin=_t,this.started=!1,tt.apply(this,arguments)}A(Et,tt,{handler:function(t){var e=mt[t.type];if(e===U&&(this.started=!0),this.started){var n=function(t,e){var n=O(t.touches),r=O(t.changedTouches);e&(Y|G)&&(n=R(n.concat(r),"identifier",!0));return[n,r]}.call(this,t,e);e&(Y|G)&&n[0].length-n[1].length==0&&(this.started=!1),this.callback(this.manager,e,{pointers:n[0],changedPointers:n[1],pointerType:"touch",srcEvent:t})}}});var At={touchstart:U,touchmove:H,touchend:Y,touchcancel:G},St="touchstart touchmove touchend touchcancel";function Tt(){this.evTarget=St,this.targetIds={},tt.apply(this,arguments)}A(Tt,tt,{handler:function(t){var e=At[t.type],n=function(t,e){var n=O(t.touches),r=this.targetIds;if(e&(U|H)&&1===n.length)return r[n[0].identifier]=!0,[n,n];var i,o,a=O(t.changedTouches),s=[],u=this.target;if(o=n.filter(function(t){return C(t.target,u)}),e===U)for(i=0;i<o.length;)r[o[i].identifier]=!0,i++;i=0;for(;i<a.length;)r[a[i].identifier]&&s.push(a[i]),e&(Y|G)&&delete r[a[i].identifier],i++;if(!s.length)return;return[R(o.concat(s),"identifier",!0),s]}.call(this,t,e);n&&this.callback(this.manager,e,{pointers:n[0],changedPointers:n[1],pointerType:"touch",srcEvent:t})}});var xt=2500,bt=25;function wt(){tt.apply(this,arguments);var t=S(this.handler,this);this.touch=new Tt(this.manager,t),this.mouse=new ht(this.manager,t),this.primaryTouch=null,this.lastTouches=[]}function Ct(t){var e=t.changedPointers[0];if(e.identifier===this.primaryTouch){var n={x:e.clientX,y:e.clientY};this.lastTouches.push(n);var r=this.lastTouches;setTimeout(function(){var t=r.indexOf(n);t>-1&&r.splice(t,1)},xt)}}A(wt,tt,{handler:function(t,e,n){var r="touch"==n.pointerType,i="mouse"==n.pointerType;if(!(i&&n.sourceCapabilities&&n.sourceCapabilities.firesTouchEvents)){if(r)(function(t,e){t&U?(this.primaryTouch=e.changedPointers[0].identifier,Ct.call(this,e)):t&(Y|G)&&Ct.call(this,e)}).call(this,e,n);else if(i&&function(t){for(var e=t.srcEvent.clientX,n=t.srcEvent.clientY,r=0;r<this.lastTouches.length;r++){var i=this.lastTouches[r],o=Math.abs(e-i.x),a=Math.abs(n-i.y);if(o<=bt&&a<=bt)return!0}return!1}.call(this,n))return;this.callback(t,e,n)}},destroy:function(){this.touch.destroy(),this.mouse.destroy()}});var It=M(l.style,"touchAction"),Lt=It!==s,Nt="auto",Ot="manipulation",Rt="none",Mt="pan-x",Dt="pan-y",Pt=function(){if(!Lt)return!1;var t={},e=i.CSS&&i.CSS.supports;return["auto","manipulation","pan-y","pan-x","pan-x pan-y","none"].forEach(function(n){t[n]=!e||i.CSS.supports("touch-action",n)}),t}();function kt(t,e){this.manager=t,this.set(e)}kt.prototype={set:function(t){"compute"==t&&(t=this.compute()),Lt&&this.manager.element.style&&Pt[t]&&(this.manager.element.style[It]=t),this.actions=t.toLowerCase().trim()},update:function(){this.set(this.manager.options.touchAction)},compute:function(){var t=[];return m(this.manager.recognizers,function(e){T(e.options.enable,[e])&&(t=t.concat(e.getTouchAction()))}),function(t){if(I(t,Rt))return Rt;var e=I(t,Mt),n=I(t,Dt);if(e&&n)return Rt;if(e||n)return e?Mt:Dt;if(I(t,Ot))return Ot;return Nt}(t.join(" "))},preventDefaults:function(t){var e=t.srcEvent,n=t.offsetDirection;if(this.manager.session.prevented)e.preventDefault();else{var r=this.actions,i=I(r,Rt)&&!Pt[Rt],o=I(r,Dt)&&!Pt[Dt],a=I(r,Mt)&&!Pt[Mt];if(i){var s=1===t.pointers.length,u=t.distance<2,c=t.deltaTime<250;if(s&&u&&c)return}if(!a||!o)return i||o&&n&q||a&&n&X?this.preventSrc(e):void 0}},preventSrc:function(t){this.manager.session.prevented=!0,t.preventDefault()}};var Bt=1,Ft=2,Vt=4,Ut=8,Ht=Ut,Yt=16;function Gt(t){this.options=u({},this.defaults,t||{}),this.id=D++,this.manager=null,this.options.enable=x(this.options.enable,!0),this.state=Bt,this.simultaneous={},this.requireFail=[]}function jt(t){return t&Yt?"cancel":t&Ut?"end":t&Vt?"move":t&Ft?"start":""}function zt(t){return t==Q?"down":t==K?"up":t==z?"left":t==W?"right":""}function Wt(t,e){var n=e.manager;return n?n.get(t):t}function Kt(){Gt.apply(this,arguments)}function Qt(){Kt.apply(this,arguments),this.pX=null,this.pY=null}function qt(){Kt.apply(this,arguments)}function Xt(){Gt.apply(this,arguments),this._timer=null,this._input=null}function $t(){Kt.apply(this,arguments)}function Jt(){Kt.apply(this,arguments)}function Zt(){Gt.apply(this,arguments),this.pTime=!1,this.pCenter=!1,this._timer=null,this._input=null,this.count=0}function te(t,e){return(e=e||{}).recognizers=x(e.recognizers,te.defaults.preset),new ee(t,e)}Gt.prototype={defaults:{},set:function(t){return u(this.options,t),this.manager&&this.manager.touchAction.update(),this},recognizeWith:function(t){if(v(t,"recognizeWith",this))return this;var e=this.simultaneous;return e[(t=Wt(t,this)).id]||(e[t.id]=t,t.recognizeWith(this)),this},dropRecognizeWith:function(t){return v(t,"dropRecognizeWith",this)?this:(t=Wt(t,this),delete this.simultaneous[t.id],this)},requireFailure:function(t){if(v(t,"requireFailure",this))return this;var e=this.requireFail;return-1===N(e,t=Wt(t,this))&&(e.push(t),t.requireFailure(this)),this},dropRequireFailure:function(t){if(v(t,"dropRequireFailure",this))return this;t=Wt(t,this);var e=N(this.requireFail,t);return e>-1&&this.requireFail.splice(e,1),this},hasRequireFailures:function(){return this.requireFail.length>0},canRecognizeWith:function(t){return!!this.simultaneous[t.id]},emit:function(t){var e=this,n=this.state;function r(n){e.manager.emit(n,t)}n<Ut&&r(e.options.event+jt(n)),r(e.options.event),t.additionalEvent&&r(t.additionalEvent),n>=Ut&&r(e.options.event+jt(n))},tryEmit:function(t){if(this.canEmit())return this.emit(t);this.state=32},canEmit:function(){for(var t=0;t<this.requireFail.length;){if(!(this.requireFail[t].state&(32|Bt)))return!1;t++}return!0},recognize:function(t){var e=u({},t);if(!T(this.options.enable,[this,e]))return this.reset(),void(this.state=32);this.state&(Ht|Yt|32)&&(this.state=Bt),this.state=this.process(e),this.state&(Ft|Vt|Ut|Yt)&&this.tryEmit(e)},process:function(t){},getTouchAction:function(){},reset:function(){}},A(Kt,Gt,{defaults:{pointers:1},attrTest:function(t){var e=this.options.pointers;return 0===e||t.pointers.length===e},process:function(t){var e=this.state,n=t.eventType,r=e&(Ft|Vt),i=this.attrTest(t);return r&&(n&G||!i)?e|Yt:r||i?n&Y?e|Ut:e&Ft?e|Vt:Ft:32}}),A(Qt,Kt,{defaults:{event:"pan",threshold:10,pointers:1,direction:$},getTouchAction:function(){var t=this.options.direction,e=[];return t&q&&e.push(Dt),t&X&&e.push(Mt),e},directionTest:function(t){var e=this.options,n=!0,r=t.distance,i=t.direction,o=t.deltaX,a=t.deltaY;return i&e.direction||(e.direction&q?(i=0===o?j:o<0?z:W,n=o!=this.pX,r=Math.abs(t.deltaX)):(i=0===a?j:a<0?K:Q,n=a!=this.pY,r=Math.abs(t.deltaY))),t.direction=i,n&&r>e.threshold&&i&e.direction},attrTest:function(t){return Kt.prototype.attrTest.call(this,t)&&(this.state&Ft||!(this.state&Ft)&&this.directionTest(t))},emit:function(t){this.pX=t.deltaX,this.pY=t.deltaY;var e=zt(t.direction);e&&(t.additionalEvent=this.options.event+e),this._super.emit.call(this,t)}}),A(qt,Kt,{defaults:{event:"pinch",threshold:0,pointers:2},getTouchAction:function(){return[Rt]},attrTest:function(t){return this._super.attrTest.call(this,t)&&(Math.abs(t.scale-1)>this.options.threshold||this.state&Ft)},emit:function(t){if(1!==t.scale){var e=t.scale<1?"in":"out";t.additionalEvent=this.options.event+e}this._super.emit.call(this,t)}}),A(Xt,Gt,{defaults:{event:"press",pointers:1,time:251,threshold:9},getTouchAction:function(){return[Nt]},process:function(t){var e=this.options,n=t.pointers.length===e.pointers,r=t.distance<e.threshold,i=t.deltaTime>e.time;if(this._input=t,!r||!n||t.eventType&(Y|G)&&!i)this.reset();else if(t.eventType&U)this.reset(),this._timer=g(function(){this.state=Ht,this.tryEmit()},e.time,this);else if(t.eventType&Y)return Ht;return 32},reset:function(){clearTimeout(this._timer)},emit:function(t){this.state===Ht&&(t&&t.eventType&Y?this.manager.emit(this.options.event+"up",t):(this._input.timeStamp=p(),this.manager.emit(this.options.event,this._input)))}}),A($t,Kt,{defaults:{event:"rotate",threshold:0,pointers:2},getTouchAction:function(){return[Rt]},attrTest:function(t){return this._super.attrTest.call(this,t)&&(Math.abs(t.rotation)>this.options.threshold||this.state&Ft)}}),A(Jt,Kt,{defaults:{event:"swipe",threshold:10,velocity:.3,direction:q|X,pointers:1},getTouchAction:function(){return Qt.prototype.getTouchAction.call(this)},attrTest:function(t){var e,n=this.options.direction;return n&(q|X)?e=t.overallVelocity:n&q?e=t.overallVelocityX:n&X&&(e=t.overallVelocityY),this._super.attrTest.call(this,t)&&n&t.offsetDirection&&t.distance>this.options.threshold&&t.maxPointers==this.options.pointers&&f(e)>this.options.velocity&&t.eventType&Y},emit:function(t){var e=zt(t.offsetDirection);e&&this.manager.emit(this.options.event+e,t),this.manager.emit(this.options.event,t)}}),A(Zt,Gt,{defaults:{event:"tap",pointers:1,taps:1,interval:300,time:250,threshold:9,posThreshold:10},getTouchAction:function(){return[Ot]},process:function(t){var e=this.options,n=t.pointers.length===e.pointers,r=t.distance<e.threshold,i=t.deltaTime<e.time;if(this.reset(),t.eventType&U&&0===this.count)return this.failTimeout();if(r&&i&&n){if(t.eventType!=Y)return this.failTimeout();var o=!this.pTime||t.timeStamp-this.pTime<e.interval,a=!this.pCenter||at(this.pCenter,t.center)<e.posThreshold;if(this.pTime=t.timeStamp,this.pCenter=t.center,a&&o?this.count+=1:this.count=1,this._input=t,0===this.count%e.taps)return this.hasRequireFailures()?(this._timer=g(function(){this.state=Ht,this.tryEmit()},e.interval,this),Ft):Ht}return 32},failTimeout:function(){return this._timer=g(function(){this.state=32},this.options.interval,this),32},reset:function(){clearTimeout(this._timer)},emit:function(){this.state==Ht&&(this._input.tapCount=this.count,this.manager.emit(this.options.event,this._input))}}),te.VERSION="2.0.7",te.defaults={domEvents:!1,touchAction:"compute",enable:!0,inputTarget:null,inputClass:null,preset:[[$t,{enable:!1}],[qt,{enable:!1},["rotate"]],[Jt,{direction:q}],[Qt,{direction:q},["swipe"]],[Zt],[Zt,{event:"doubletap",taps:2},["tap"]],[Xt]],cssProps:{userSelect:"none",touchSelect:"none",touchCallout:"none",contentZooming:"none",userDrag:"none",tapHighlightColor:"rgba(0,0,0,0)"}};function ee(t,e){var n;this.options=u({},te.defaults,e||{}),this.options.inputTarget=this.options.inputTarget||t,this.handlers={},this.session={},this.recognizers=[],this.oldCssProps={},this.element=t,this.input=new((n=this).options.inputClass||(B?vt:F?Tt:k?wt:ht))(n,et),this.touchAction=new kt(this,this.options.touchAction),ne(this,!0),m(this.options.recognizers,function(t){var e=this.add(new t[0](t[1]));t[2]&&e.recognizeWith(t[2]),t[3]&&e.requireFailure(t[3])},this)}function ne(t,e){var n,r=t.element;r.style&&(m(t.options.cssProps,function(i,o){n=M(r.style,o),e?(t.oldCssProps[n]=r.style[n],r.style[n]=i):r.style[n]=t.oldCssProps[n]||""}),e||(t.oldCssProps={}))}ee.prototype={set:function(t){return u(this.options,t),t.touchAction&&this.touchAction.update(),t.inputTarget&&(this.input.destroy(),this.input.target=t.inputTarget,this.input.init()),this},stop:function(t){this.session.stopped=t?2:1},recognize:function(t){var e=this.session;if(!e.stopped){var n;this.touchAction.preventDefaults(t);var r=this.recognizers,i=e.curRecognizer;(!i||i&&i.state&Ht)&&(i=e.curRecognizer=null);for(var o=0;o<r.length;)n=r[o],2===e.stopped||i&&n!=i&&!n.canRecognizeWith(i)?n.reset():n.recognize(t),!i&&n.state&(Ft|Vt|Ut)&&(i=e.curRecognizer=n),o++}},get:function(t){if(t instanceof Gt)return t;for(var e=this.recognizers,n=0;n<e.length;n++)if(e[n].options.event==t)return e[n];return null},add:function(t){if(v(t,"add",this))return this;var e=this.get(t.options.event);return e&&this.remove(e),this.recognizers.push(t),t.manager=this,this.touchAction.update(),t},remove:function(t){if(v(t,"remove",this))return this;if(t=this.get(t)){var e=this.recognizers,n=N(e,t);-1!==n&&(e.splice(n,1),this.touchAction.update())}return this},on:function(t,e){if(t!==s&&e!==s){var n=this.handlers;return m(L(t),function(t){n[t]=n[t]||[],n[t].push(e)}),this}},off:function(t,e){if(t!==s){var n=this.handlers;return m(L(t),function(t){e?n[t]&&n[t].splice(N(n[t],e),1):delete n[t]}),this}},emit:function(t,e){this.options.domEvents&&function(t,e){var n=o.createEvent("Event");n.initEvent(t,!0,!0),n.gesture=e,e.target.dispatchEvent(n)}(t,e);var n=this.handlers[t]&&this.handlers[t].slice();if(n&&n.length){e.type=t,e.preventDefault=function(){e.srcEvent.preventDefault()};for(var r=0;r<n.length;)n[r](e),r++}},destroy:function(){this.element&&ne(this,!1),this.handlers={},this.session={},this.input.destroy(),this.element=null}},u(te,{INPUT_START:U,INPUT_MOVE:H,INPUT_END:Y,INPUT_CANCEL:G,STATE_POSSIBLE:Bt,STATE_BEGAN:Ft,STATE_CHANGED:Vt,STATE_ENDED:Ut,STATE_RECOGNIZED:Ht,STATE_CANCELLED:Yt,STATE_FAILED:32,DIRECTION_NONE:j,DIRECTION_LEFT:z,DIRECTION_RIGHT:W,DIRECTION_UP:K,DIRECTION_DOWN:Q,DIRECTION_HORIZONTAL:q,DIRECTION_VERTICAL:X,DIRECTION_ALL:$,Manager:ee,Input:tt,TouchAction:kt,TouchInput:Tt,MouseInput:ht,PointerEventInput:vt,TouchMouseInput:wt,SingleTouchInput:Et,Recognizer:Gt,AttrRecognizer:Kt,Tap:Zt,Pan:Qt,Swipe:Jt,Pinch:qt,Rotate:$t,Press:Xt,on:b,off:w,each:m,merge:E,extend:_,assign:u,inherit:A,bindFn:S,prefixed:M}),(void 0!==i?i:"undefined"!=typeof self?self:{}).Hammer=te,(r=function(){return te}.call(e,n,e,t))===s||(t.exports=r)}(window,document)},function(t,e,n){"use strict";t.exports.Node=n(81),t.exports.Parser=n(282),t.exports.HtmlRenderer=n(294),t.exports.XmlRenderer=n(295)},function(t,e,n){"use strict";var r=n(81),i=n(34).unescapeString,o=n(34).OPENTAG,a=n(34).CLOSETAG,s=n(290),u=[/./,/^<(?:script|pre|style)(?:\s|>|$)/i,/^<!--/,/^<[?]/,/^<![A-Z]/,/^<!\[CDATA\[/,/^<[/]?(?:address|article|aside|base|basefont|blockquote|body|caption|center|col|colgroup|dd|details|dialog|dir|div|dl|dt|fieldset|figcaption|figure|footer|form|frame|frameset|h[123456]|head|header|hr|html|iframe|legend|li|link|main|menu|menuitem|meta|nav|noframes|ol|optgroup|option|p|param|section|source|title|summary|table|tbody|td|tfoot|th|thead|title|tr|track|ul)(?:\s|[/]?[>]|$)/i,new RegExp("^(?:"+o+"|"+a+")\\s*$","i")],c=[/./,/<\/(?:script|pre|style)>/i,/-->/,/\?>/,/>/,/\]\]>/],l=/^(?:(?:\*[ \t]*){3,}|(?:_[ \t]*){3,}|(?:-[ \t]*){3,})[ \t]*$/,h=/^[#`~*+_=<>0-9-]/,d=/[^ \t\f\v\r\n]/,f=/^[*+-]/,p=/^(\d{1,9})([.)])/,g=/^#{1,6}(?:[ \t]+|$)/,v=/^`{3,}(?!.*`)|^~{3,}(?!.*~)/,m=/^(?:`{3,}|~{3,})(?= *$)/,y=/^(?:=+|-+)[ \t]*$/,_=/\r\n|\n|\r/,E=function(t){return 32===t||9===t},A=function(t,e){return e<t.length?t.charCodeAt(e):-1},S=function(t){for(;t;){if(t._lastLineBlank)return!0;var e=t.type;if("list"!==e&&"item"!==e)break;t=t._lastChild}return!1},T=function(){if(this.partiallyConsumedTab){this.offset+=1;var t=4-this.column%4;this.tip._string_content+=" ".repeat(t)}this.tip._string_content+=this.currentLine.slice(this.offset)+"\n"},x=function(t,e){for(;!this.blocks[this.tip.type].canContain(t);)this.finalize(this.tip,this.lineNumber-1);var n=e+1,i=new r(t,[[this.lineNumber,n],[0,0]]);return i._string_content="",this.tip.appendChild(i),this.tip=i,i},b=function(){if(!this.allClosed){for(;this.oldtip!==this.lastMatchedContainer;){var t=this.oldtip._parent;this.finalize(this.oldtip,this.lineNumber-1),this.oldtip=t}this.allClosed=!0}},w={document:{continue:function(){return 0},finalize:function(){},canContain:function(t){return"item"!==t},acceptsLines:!1},list:{continue:function(){return 0},finalize:function(t,e){for(var n=e._firstChild;n;){if(S(n)&&n._next){e._listData.tight=!1;break}for(var r=n._firstChild;r;){if(S(r)&&(n._next||r._next)){e._listData.tight=!1;break}r=r._next}n=n._next}},canContain:function(t){return"item"===t},acceptsLines:!1},block_quote:{continue:function(t){var e=t.currentLine;return t.indented||62!==A(e,t.nextNonspace)?1:(t.advanceNextNonspace(),t.advanceOffset(1,!1),E(A(e,t.offset))&&t.advanceOffset(1,!0),0)},finalize:function(){},canContain:function(t){return"item"!==t},acceptsLines:!1},item:{continue:function(t,e){if(t.blank){if(null==e._firstChild)return 1;t.advanceNextNonspace()}else{if(!(t.indent>=e._listData.markerOffset+e._listData.padding))return 1;t.advanceOffset(e._listData.markerOffset+e._listData.padding,!0)}return 0},finalize:function(){},canContain:function(t){return"item"!==t},acceptsLines:!1},heading:{continue:function(){return 1},finalize:function(){},canContain:function(){return!1},acceptsLines:!1},thematic_break:{continue:function(){return 1},finalize:function(){},canContain:function(){return!1},acceptsLines:!1},code_block:{continue:function(t,e){var n=t.currentLine,r=t.indent;if(e._isFenced){var i=r<=3&&n.charAt(t.nextNonspace)===e._fenceChar&&n.slice(t.nextNonspace).match(m);if(i&&i[0].length>=e._fenceLength)return t.finalize(e,t.lineNumber),2;for(var o=e._fenceOffset;o>0&&E(A(n,t.offset));)t.advanceOffset(1,!0),o--}else if(r>=4)t.advanceOffset(4,!0);else{if(!t.blank)return 1;t.advanceNextNonspace()}return 0},finalize:function(t,e){if(e._isFenced){var n=e._string_content,r=n.indexOf("\n"),o=n.slice(0,r),a=n.slice(r+1);e.info=i(o.trim()),e._literal=a}else e._literal=e._string_content.replace(/(\n *)+$/,"\n");e._string_content=null},canContain:function(){return!1},acceptsLines:!0},html_block:{continue:function(t,e){return!t.blank||6!==e._htmlBlockType&&7!==e._htmlBlockType?0:1},finalize:function(t,e){e._literal=e._string_content.replace(/(\n *)+$/,""),e._string_content=null},canContain:function(){return!1},acceptsLines:!0},paragraph:{continue:function(t){return t.blank?1:0},finalize:function(t,e){for(var n,r,i=!1;91===A(e._string_content,0)&&(n=t.inlineParser.parseReference(e._string_content,t.refmap));)e._string_content=e._string_content.slice(n),i=!0;i&&(r=e._string_content,!d.test(r))&&e.unlink()},canContain:function(){return!1},acceptsLines:!0}},C=[function(t){return t.indented||62!==A(t.currentLine,t.nextNonspace)?0:(t.advanceNextNonspace(),t.advanceOffset(1,!1),E(A(t.currentLine,t.offset))&&t.advanceOffset(1,!0),t.closeUnmatchedBlocks(),t.addChild("block_quote",t.nextNonspace),1)},function(t){var e;if(!t.indented&&(e=t.currentLine.slice(t.nextNonspace).match(g))){t.advanceNextNonspace(),t.advanceOffset(e[0].length,!1),t.closeUnmatchedBlocks();var n=t.addChild("heading",t.nextNonspace);return n.level=e[0].trim().length,n._string_content=t.currentLine.slice(t.offset).replace(/^[ \t]*#+[ \t]*$/,"").replace(/[ \t]+#+[ \t]*$/,""),t.advanceOffset(t.currentLine.length-t.offset),2}return 0},function(t){var e;if(!t.indented&&(e=t.currentLine.slice(t.nextNonspace).match(v))){var n=e[0].length;t.closeUnmatchedBlocks();var r=t.addChild("code_block",t.nextNonspace);return r._isFenced=!0,r._fenceLength=n,r._fenceChar=e[0][0],r._fenceOffset=t.indent,t.advanceNextNonspace(),t.advanceOffset(n,!1),2}return 0},function(t,e){if(!t.indented&&60===A(t.currentLine,t.nextNonspace)){var n,r=t.currentLine.slice(t.nextNonspace);for(n=1;n<=7;n++){if(u[n].test(r)&&(n<7||"paragraph"!==e.type))return t.closeUnmatchedBlocks(),t.addChild("html_block",t.offset)._htmlBlockType=n,2}}return 0},function(t,e){var n;if(!t.indented&&"paragraph"===e.type&&(n=t.currentLine.slice(t.nextNonspace).match(y))){t.closeUnmatchedBlocks();var i=new r("heading",e.sourcepos);return i.level="="===n[0][0]?1:2,i._string_content=e._string_content,e.insertAfter(i),e.unlink(),t.tip=i,t.advanceOffset(t.currentLine.length-t.offset,!1),2}return 0},function(t){return!t.indented&&l.test(t.currentLine.slice(t.nextNonspace))?(t.closeUnmatchedBlocks(),t.addChild("thematic_break",t.nextNonspace),t.advanceOffset(t.currentLine.length-t.offset,!1),2):0},function(t,e){var n,r,i;return t.indented&&"list"!==e.type||!(n=function(t,e){var n,r,i,o,a=t.currentLine.slice(t.nextNonspace),s={type:null,tight:!0,bulletChar:null,start:null,delimiter:null,padding:null,markerOffset:t.indent};if(n=a.match(f))s.type="bullet",s.bulletChar=n[0][0];else{if(!(n=a.match(p))||"paragraph"===e.type&&"1"!==n[1])return null;s.type="ordered",s.start=parseInt(n[1]),s.delimiter=n[2]}if(-1!==(r=A(t.currentLine,t.nextNonspace+n[0].length))&&9!==r&&32!==r)return null;if("paragraph"===e.type&&!t.currentLine.slice(t.nextNonspace+n[0].length).match(d))return null;t.advanceNextNonspace(),t.advanceOffset(n[0].length,!0),i=t.column,o=t.offset;do{t.advanceOffset(1,!0),r=A(t.currentLine,t.offset)}while(t.column-i<5&&E(r));var u=-1===A(t.currentLine,t.offset),c=t.column-i;return c>=5||c<1||u?(s.padding=n[0].length+1,t.column=i,t.offset=o,E(A(t.currentLine,t.offset))&&t.advanceOffset(1,!0)):s.padding=n[0].length+c,s}(t,e))?0:(t.closeUnmatchedBlocks(),"list"===t.tip.type&&(r=e._listData,i=n,r.type===i.type&&r.delimiter===i.delimiter&&r.bulletChar===i.bulletChar)||((e=t.addChild("list",t.nextNonspace))._listData=n),(e=t.addChild("item",t.nextNonspace))._listData=n,1)},function(t){return t.indented&&"paragraph"!==t.tip.type&&!t.blank?(t.advanceOffset(4,!0),t.closeUnmatchedBlocks(),t.addChild("code_block",t.offset),2):0}],I=function(t,e){for(var n,r,i,o=this.currentLine;t>0&&(i=o[this.offset]);)"\t"===i?(n=4-this.column%4,e?(this.partiallyConsumedTab=n>t,r=n>t?t:n,this.column+=r,this.offset+=this.partiallyConsumedTab?0:1,t-=r):(this.partiallyConsumedTab=!1,this.column+=n,this.offset+=1,t-=1)):(this.partiallyConsumedTab=!1,this.offset+=1,this.column+=1,t-=1)},L=function(){this.offset=this.nextNonspace,this.column=this.nextNonspaceColumn,this.partiallyConsumedTab=!1},N=function(){for(var t,e=this.currentLine,n=this.offset,r=this.column;""!==(t=e.charAt(n));)if(" "===t)n++,r++;else{if("\t"!==t)break;n++,r+=4-r%4}this.blank="\n"===t||"\r"===t||""===t,this.nextNonspace=n,this.nextNonspaceColumn=r,this.indent=this.nextNonspaceColumn-this.column,this.indented=this.indent>=4},O=function(t){var e,n,r=!0,i=this.doc;for(this.oldtip=this.tip,this.offset=0,this.column=0,this.blank=!1,this.partiallyConsumedTab=!1,this.lineNumber+=1,-1!==t.indexOf("\0")&&(t=t.replace(/\0/g,"")),this.currentLine=t;(n=i._lastChild)&&n._open;){switch(i=n,this.findNextNonspace(),this.blocks[i.type].continue(this,i)){case 0:break;case 1:r=!1;break;case 2:return void(this.lastLineLength=t.length);default:throw"continue returned illegal value, must be 0, 1, or 2"}if(!r){i=i._parent;break}}this.allClosed=i===this.oldtip,this.lastMatchedContainer=i;for(var o="paragraph"!==i.type&&w[i.type].acceptsLines,a=this.blockStarts,s=a.length;!o;){if(this.findNextNonspace(),!this.indented&&!h.test(t.slice(this.nextNonspace))){this.advanceNextNonspace();break}for(var u=0;u<s;){var l=a[u](this,i);if(1===l){i=this.tip;break}if(2===l){i=this.tip,o=!0;break}u++}if(u===s){this.advanceNextNonspace();break}}if(this.allClosed||this.blank||"paragraph"!==this.tip.type){this.closeUnmatchedBlocks(),this.blank&&i.lastChild&&(i.lastChild._lastLineBlank=!0),e=i.type;for(var d=this.blank&&!("block_quote"===e||"code_block"===e&&i._isFenced||"item"===e&&!i._firstChild&&i.sourcepos[0][0]===this.lineNumber),f=i;f;)f._lastLineBlank=d,f=f._parent;this.blocks[e].acceptsLines?(this.addLine(),"html_block"===e&&i._htmlBlockType>=1&&i._htmlBlockType<=5&&c[i._htmlBlockType].test(this.currentLine.slice(this.offset))&&this.finalize(i,this.lineNumber)):this.offset<t.length&&!this.blank&&(i=this.addChild("paragraph",this.offset),this.advanceNextNonspace(),this.addLine())}else this.addLine();this.lastLineLength=t.length},R=function(t,e){var n=t._parent;t._open=!1,t.sourcepos[1]=[e,this.lastLineLength],this.blocks[t.type].finalize(this,t),this.tip=n},M=function(t){var e,n,r,i=t.walker();for(this.inlineParser.refmap=this.refmap,this.inlineParser.options=this.options;n=i.next();)r=(e=n.node).type,n.entering||"paragraph"!==r&&"heading"!==r||this.inlineParser.parse(e)},D=function(){return new r("document",[[1,1],[0,0]])},P=function(t){this.doc=new D,this.tip=this.doc,this.refmap={},this.lineNumber=0,this.lastLineLength=0,this.offset=0,this.column=0,this.lastMatchedContainer=this.doc,this.currentLine="",this.options.time&&console.time("preparing input");var e=t.split(_),n=e.length;10===t.charCodeAt(t.length-1)&&(n-=1),this.options.time&&console.timeEnd("preparing input"),this.options.time&&console.time("block parsing");for(var r=0;r<n;r++)this.incorporateLine(e[r]);for(;this.tip;)this.finalize(this.tip,n);return this.options.time&&console.timeEnd("block parsing"),this.options.time&&console.time("inline parsing"),this.processInlines(this.doc),this.options.time&&console.timeEnd("inline parsing"),this.doc};t.exports=function(t){return{doc:new D,blocks:w,blockStarts:C,tip:this.doc,oldtip:this.doc,currentLine:"",lineNumber:0,offset:0,column:0,nextNonspace:0,nextNonspaceColumn:0,indent:0,indented:!1,blank:!1,partiallyConsumedTab:!1,allClosed:!0,lastMatchedContainer:this.doc,refmap:{},lastLineLength:0,inlineParser:new s(t),findNextNonspace:N,advanceOffset:I,advanceNextNonspace:L,addLine:T,addChild:x,incorporateLine:O,finalize:R,processInlines:M,closeUnmatchedBlocks:b,parse:P,options:t||{}}}},function(t,e,n){"use strict";var r={};function i(t,e,n){var o,a,s,u,c,l="";for("string"!=typeof e&&(n=e,e=i.defaultChars),void 0===n&&(n=!0),c=function(t){var e,n,i=r[t];if(i)return i;for(i=r[t]=[],e=0;e<128;e++)n=String.fromCharCode(e),/^[0-9a-z]$/i.test(n)?i.push(n):i.push("%"+("0"+e.toString(16).toUpperCase()).slice(-2));for(e=0;e<t.length;e++)i[t.charCodeAt(e)]=t[e];return i}(e),o=0,a=t.length;o<a;o++)if(s=t.charCodeAt(o),n&&37===s&&o+2<a&&/^[0-9a-f]{2}$/i.test(t.slice(o+1,o+3)))l+=t.slice(o,o+3),o+=2;else if(s<128)l+=c[s];else if(s>=55296&&s<=57343){if(s>=55296&&s<=56319&&o+1<a&&(u=t.charCodeAt(o+1))>=56320&&u<=57343){l+=encodeURIComponent(t[o]+t[o+1]),o++;continue}l+="%EF%BF%BD"}else l+=encodeURIComponent(t[o]);return l}i.defaultChars=";/?:@&=+$,-_.!~*'()#",i.componentChars="-_.!~*'()",t.exports=i},function(t,e,n){"use strict";var r={};function i(t,e){var n;return"string"!=typeof e&&(e=i.defaultChars),n=function(t){var e,n,i=r[t];if(i)return i;for(i=r[t]=[],e=0;e<128;e++)n=String.fromCharCode(e),i.push(n);for(e=0;e<t.length;e++)i[n=t.charCodeAt(e)]="%"+("0"+n.toString(16).toUpperCase()).slice(-2);return i}(e),t.replace(/(%[a-f0-9]{2})+/gi,function(t){var e,r,i,o,a,s,u,c="";for(e=0,r=t.length;e<r;e+=3)(i=parseInt(t.slice(e+1,e+3),16))<128?c+=n[i]:192==(224&i)&&e+3<r&&128==(192&(o=parseInt(t.slice(e+4,e+6),16)))?(c+=(u=i<<6&1984|63&o)<128?"":String.fromCharCode(u),e+=3):224==(240&i)&&e+6<r&&(o=parseInt(t.slice(e+4,e+6),16),a=parseInt(t.slice(e+7,e+9),16),128==(192&o)&&128==(192&a))?(c+=(u=i<<12&61440|o<<6&4032|63&a)<2048||u>=55296&&u<=57343?"":String.fromCharCode(u),e+=6):240==(248&i)&&e+9<r&&(o=parseInt(t.slice(e+4,e+6),16),a=parseInt(t.slice(e+7,e+9),16),s=parseInt(t.slice(e+10,e+12),16),128==(192&o)&&128==(192&a)&&128==(192&s))?((u=i<<18&1835008|o<<12&258048|a<<6&4032|63&s)<65536||u>1114111?c+="":(u-=65536,c+=String.fromCharCode(55296+(u>>10),56320+(1023&u))),e+=9):c+="";return c})}i.defaultChars=";/?:@&=+$,#",i.componentChars="",t.exports=i},function(t,e,n){var r=s(n(117)),i=u(r);e.XML=f(r,i);var o=s(n(118)),a=u(o);function s(t){return Object.keys(t).sort().reduce(function(e,n){return e[t[n]]="&"+n+";",e},{})}function u(t){var e=[],n=[];return Object.keys(t).forEach(function(t){1===t.length?e.push("\\"+t):n.push(t)}),n.unshift("["+e.join("")+"]"),new RegExp(n.join("|"),"g")}e.HTML=f(o,a);var c=/[^\0-\x7F]/g,l=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g;function h(t){return"&#x"+t.charCodeAt(0).toString(16).toUpperCase()+";"}function d(t){return"&#x"+(1024*(t.charCodeAt(0)-55296)+t.charCodeAt(1)-56320+65536).toString(16).toUpperCase()+";"}function f(t,e){function n(e){return t[e]}return function(t){return t.replace(e,n).replace(l,d).replace(c,h)}}var p=u(r);e.escape=function(t){return t.replace(p,h).replace(l,d).replace(c,h)}},function(t,e,n){var r=n(118),i=n(287),o=n(117),a=n(288),s=c(o),u=c(r);function c(t){var e=Object.keys(t).join("|"),n=d(t),r=new RegExp("&(?:"+(e+="|#[xX][\\da-fA-F]+|#\\d+")+");","g");return function(t){return String(t).replace(r,n)}}var l=function(){for(var t=Object.keys(i).sort(h),e=Object.keys(r).sort(h),n=0,o=0;n<e.length;n++)t[o]===e[n]?(e[n]+=";?",o++):e[n]+=";";var a=new RegExp("&(?:"+e.join("|")+"|#[xX][\\da-fA-F]+;?|#\\d+;?)","g"),s=d(r);function u(t){return";"!==t.substr(-1)&&(t+=";"),s(t)}return function(t){return String(t).replace(a,u)}}();function h(t,e){return t<e?1:-1}function d(t){return function(e){return"#"===e.charAt(1)?"X"===e.charAt(2)||"x"===e.charAt(2)?a(parseInt(e.substr(3),16)):a(parseInt(e.substr(2),10)):t[e.slice(1,-1)]}}t.exports={XML:s,HTML:l,HTMLStrict:u}},function(t,e){t.exports={Aacute:"",aacute:"",Acirc:"",acirc:"",acute:"",AElig:"",aelig:"",Agrave:"",agrave:"",amp:"&",AMP:"&",Aring:"",aring:"",Atilde:"",atilde:"",Auml:"",auml:"",brvbar:"",Ccedil:"",ccedil:"",cedil:"",cent:"",copy:"",COPY:"",curren:"",deg:"",divide:"",Eacute:"",eacute:"",Ecirc:"",ecirc:"",Egrave:"",egrave:"",ETH:"",eth:"",Euml:"",euml:"",frac12:"",frac14:"",frac34:"",gt:">",GT:">",Iacute:"",iacute:"",Icirc:"",icirc:"",iexcl:"",Igrave:"",igrave:"",iquest:"",Iuml:"",iuml:"",laquo:"",lt:"<",LT:"<",macr:"",micro:"",middot:"",nbsp:"",not:"",Ntilde:"",ntilde:"",Oacute:"",oacute:"",Ocirc:"",ocirc:"",Ograve:"",ograve:"",ordf:"",ordm:"",Oslash:"",oslash:"",Otilde:"",otilde:"",Ouml:"",ouml:"",para:"",plusmn:"",pound:"",quot:'"',QUOT:'"',raquo:"",reg:"",REG:"",sect:"",shy:"",sup1:"",sup2:"",sup3:"",szlig:"",THORN:"",thorn:"",times:"",Uacute:"",uacute:"",Ucirc:"",ucirc:"",Ugrave:"",ugrave:"",uml:"",Uuml:"",uuml:"",Yacute:"",yacute:"",yen:"",yuml:""}},function(t,e,n){var r=n(289);t.exports=function(t){if(t>=55296&&t<=57343||t>1114111)return"";t in r&&(t=r[t]);var e="";t>65535&&(t-=65536,e+=String.fromCharCode(t>>>10&1023|55296),t=56320|1023&t);return e+=String.fromCharCode(t)}},function(t,e){t.exports={0:65533,128:8364,130:8218,131:402,132:8222,133:8230,134:8224,135:8225,136:710,137:8240,138:352,139:8249,140:338,142:381,145:8216,146:8217,147:8220,148:8221,149:8226,150:8211,151:8212,152:732,153:8482,154:353,155:8250,156:339,158:382,159:376}},function(t,e,n){"use strict";var r=n(81),i=n(34),o=n(291),a=i.normalizeURI,s=i.unescapeString,u=n(292),c=n(116).decodeHTML;n(293);var l=i.ESCAPABLE,h="\\\\"+l,d=i.ENTITY,f=i.reHtmlTag,p=new RegExp(/[!"#$%&'()*+,\-./:;<=>?@\[\]^_`{|}~\xA1\xA7\xAB\xB6\xB7\xBB\xBF\u037E\u0387\u055A-\u055F\u0589\u058A\u05BE\u05C0\u05C3\u05C6\u05F3\u05F4\u0609\u060A\u060C\u060D\u061B\u061E\u061F\u066A-\u066D\u06D4\u0700-\u070D\u07F7-\u07F9\u0830-\u083E\u085E\u0964\u0965\u0970\u0AF0\u0DF4\u0E4F\u0E5A\u0E5B\u0F04-\u0F12\u0F14\u0F3A-\u0F3D\u0F85\u0FD0-\u0FD4\u0FD9\u0FDA\u104A-\u104F\u10FB\u1360-\u1368\u1400\u166D\u166E\u169B\u169C\u16EB-\u16ED\u1735\u1736\u17D4-\u17D6\u17D8-\u17DA\u1800-\u180A\u1944\u1945\u1A1E\u1A1F\u1AA0-\u1AA6\u1AA8-\u1AAD\u1B5A-\u1B60\u1BFC-\u1BFF\u1C3B-\u1C3F\u1C7E\u1C7F\u1CC0-\u1CC7\u1CD3\u2010-\u2027\u2030-\u2043\u2045-\u2051\u2053-\u205E\u207D\u207E\u208D\u208E\u2308-\u230B\u2329\u232A\u2768-\u2775\u27C5\u27C6\u27E6-\u27EF\u2983-\u2998\u29D8-\u29DB\u29FC\u29FD\u2CF9-\u2CFC\u2CFE\u2CFF\u2D70\u2E00-\u2E2E\u2E30-\u2E42\u3001-\u3003\u3008-\u3011\u3014-\u301F\u3030\u303D\u30A0\u30FB\uA4FE\uA4FF\uA60D-\uA60F\uA673\uA67E\uA6F2-\uA6F7\uA874-\uA877\uA8CE\uA8CF\uA8F8-\uA8FA\uA8FC\uA92E\uA92F\uA95F\uA9C1-\uA9CD\uA9DE\uA9DF\uAA5C-\uAA5F\uAADE\uAADF\uAAF0\uAAF1\uABEB\uFD3E\uFD3F\uFE10-\uFE19\uFE30-\uFE52\uFE54-\uFE61\uFE63\uFE68\uFE6A\uFE6B\uFF01-\uFF03\uFF05-\uFF0A\uFF0C-\uFF0F\uFF1A\uFF1B\uFF1F\uFF20\uFF3B-\uFF3D\uFF3F\uFF5B\uFF5D\uFF5F-\uFF65]|\uD800[\uDD00-\uDD02\uDF9F\uDFD0]|\uD801\uDD6F|\uD802[\uDC57\uDD1F\uDD3F\uDE50-\uDE58\uDE7F\uDEF0-\uDEF6\uDF39-\uDF3F\uDF99-\uDF9C]|\uD804[\uDC47-\uDC4D\uDCBB\uDCBC\uDCBE-\uDCC1\uDD40-\uDD43\uDD74\uDD75\uDDC5-\uDDC9\uDDCD\uDDDB\uDDDD-\uDDDF\uDE38-\uDE3D\uDEA9]|\uD805[\uDCC6\uDDC1-\uDDD7\uDE41-\uDE43\uDF3C-\uDF3E]|\uD809[\uDC70-\uDC74]|\uD81A[\uDE6E\uDE6F\uDEF5\uDF37-\uDF3B\uDF44]|\uD82F\uDC9F|\uD836[\uDE87-\uDE8B]/),g=new RegExp('^(?:"('+h+'|[^"\\x00])*"|\'('+h+"|[^'\\x00])*'|\\(("+h+"|[^)\\x00])*\\))"),v=new RegExp("^(?:[<](?:[^ <>\\t\\n\\\\\\x00]|"+h+"|\\\\)*[>])"),m=new RegExp("^"+l),y=new RegExp("^"+d,"i"),_=/`+/,E=/^`+/,A=/\.\.\./g,S=/--+/g,T=/^<([a-zA-Z0-9.!#$%&'*+\/=?^_`{|}~-]+@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*)>/,x=/^<[A-Za-z][A-Za-z0-9.+-]{1,31}:[^<>\x00-\x20]*>/i,b=/^ *(?:\n *)?/,w=/^[ \t\n\x0b\x0c\x0d]/,C=/[ \t\n\x0b\x0c\x0d]+/g,I=/^\s/,L=/ *$/,N=/^ */,O=/^ *(?:\n|$)/,R=new RegExp("^\\[(?:[^\\\\\\[\\]]|"+h+"|\\\\){0,1000}\\]"),M=/^[^\n`\[\]\\!<&*_'"]+/m,D=function(t){var e=new r("text");return e._literal=t,e},P=function(t){var e=t.exec(this.subject.slice(this.pos));return null===e?null:(this.pos+=e.index+e[0].length,e[0])},k=function(){return this.pos<this.subject.length?this.subject.charCodeAt(this.pos):-1},B=function(){return this.match(b),!0},F=function(t){var e=this.match(E);if(null===e)return!1;for(var n,i,o=this.pos;null!==(n=this.match(_));)if(n===e)return(i=new r("code"))._literal=this.subject.slice(o,this.pos-e.length).trim().replace(C," "),t.appendChild(i),!0;return this.pos=o,t.appendChild(D(e)),!0},V=function(t){var e,n=this.subject;return this.pos+=1,10===this.peek()?(this.pos+=1,e=new r("linebreak"),t.appendChild(e)):m.test(n.charAt(this.pos))?(t.appendChild(D(n.charAt(this.pos))),this.pos+=1):t.appendChild(D("\\")),!0},U=function(t){var e,n,i;return(e=this.match(T))?(n=e.slice(1,e.length-1),(i=new r("link"))._destination=a("mailto:"+n),i._title="",i.appendChild(D(n)),t.appendChild(i),!0):!!(e=this.match(x))&&(n=e.slice(1,e.length-1),(i=new r("link"))._destination=a(n),i._title="",i.appendChild(D(n)),t.appendChild(i),!0)},H=function(t){var e=this.match(f);if(null===e)return!1;var n=new r("html_inline");return n._literal=e,t.appendChild(n),!0},Y=function(t){var e,n,r,i,o,a,s,c,l,h,d,f=0,g=this.pos;if(39===t||34===t)f++,this.pos++;else for(;this.peek()===t;)f++,this.pos++;return 0===f?null:(e=0===g?"\n":this.subject.charAt(g-1),n=-1===(r=this.peek())?"\n":u(r),c=I.test(n),l=p.test(n),h=I.test(e),d=p.test(e),i=!c&&(!l||h||d),o=!h&&(!d||c||l),95===t?(a=i&&(!o||d),s=o&&(!i||l)):39===t||34===t?(a=i&&!o,s=o):(a=i,s=o),this.pos=g,{numdelims:f,can_open:a,can_close:s})},G=function(t,e){var n=this.scanDelims(t);if(!n)return!1;var r,i=n.numdelims,o=this.pos;this.pos+=i,r=39===t?"":34===t?"":this.subject.slice(o,this.pos);var a=D(r);return e.appendChild(a),this.delimiters={cc:t,numdelims:i,origdelims:i,node:a,previous:this.delimiters,next:null,can_open:n.can_open,can_close:n.can_close},null!==this.delimiters.previous&&(this.delimiters.previous.next=this.delimiters),!0},j=function(t){null!==t.previous&&(t.previous.next=t.next),null===t.next?this.delimiters=t.previous:t.next.previous=t.previous},z=function(t){var e,n,i,o,a,s,u,c,l,h,d,f,p=[],g=!1;for(p[95]=t,p[42]=t,p[39]=t,p[34]=t,n=this.delimiters;null!==n&&n.previous!==t;)n=n.previous;for(;null!==n;){var v=n.cc;if(n.can_close){for(e=n.previous,h=!1;null!==e&&e!==t&&e!==p[v];){if(g=(n.can_open||e.can_close)&&(e.origdelims+n.origdelims)%3==0,e.cc===n.cc&&e.can_open&&!g){h=!0;break}e=e.previous}if(i=n,42===v||95===v)if(h){u=n.numdelims>=2&&e.numdelims>=2?2:1,o=e.node,a=n.node,e.numdelims-=u,n.numdelims-=u,o._literal=o._literal.slice(0,o._literal.length-u),a._literal=a._literal.slice(0,a._literal.length-u);var m=new r(1===u?"emph":"strong");for(c=o._next;c&&c!==a;)l=c._next,c.unlink(),m.appendChild(c),c=l;o.insertAfter(m),f=n,(d=e).next!==f&&(d.next=f,f.previous=d),0===e.numdelims&&(o.unlink(),this.removeDelimiter(e)),0===n.numdelims&&(a.unlink(),s=n.next,this.removeDelimiter(n),n=s)}else n=n.next;else 39===v?(n.node._literal="",h&&(e.node._literal=""),n=n.next):34===v&&(n.node._literal="",h&&(e.node.literal=""),n=n.next);h||g||(p[v]=i.previous,i.can_open||this.removeDelimiter(i))}else n=n.next}for(;null!==this.delimiters&&this.delimiters!==t;)this.removeDelimiter(this.delimiters)},W=function(){var t=this.match(g);return null===t?null:s(t.substr(1,t.length-2))},K=function(){var t=this.match(v);if(null===t){for(var e,n=this.pos,r=0;-1!==(e=this.peek());)if(92===e)this.pos+=1,-1!==this.peek()&&(this.pos+=1);else if(40===e)this.pos+=1,r+=1;else if(41===e){if(r<1)break;this.pos+=1,r-=1}else{if(null!==w.exec(u(e)))break;this.pos+=1}return t=this.subject.substr(n,this.pos-n),a(s(t))}return a(s(t.substr(1,t.length-2)))},Q=function(){var t=this.match(R);return null===t||t.length>1001||/[^\\]\\\]$/.exec(t)?0:t.length},q=function(t){var e=this.pos;this.pos+=1;var n=D("[");return t.appendChild(n),this.addBracket(n,e,!1),!0},X=function(t){var e=this.pos;if(this.pos+=1,91===this.peek()){this.pos+=1;var n=D("![");t.appendChild(n),this.addBracket(n,e+1,!0)}else t.appendChild(D("!"));return!0},$=function(t){var e,n,i,a,s,u,c=!1;if(this.pos+=1,e=this.pos,null===(u=this.brackets))return t.appendChild(D("]")),!0;if(!u.active)return t.appendChild(D("]")),this.removeBracket(),!0;n=u.image;var l=this.pos;if(40===this.peek()&&(this.pos++,this.spnl()&&null!==(i=this.parseLinkDestination())&&this.spnl()&&(w.test(this.subject.charAt(this.pos-1))&&(a=this.parseLinkTitle()),1)&&this.spnl()&&41===this.peek()?(this.pos+=1,c=!0):this.pos=l),!c){var h=this.pos,d=this.parseLinkLabel();if(d>2?s=this.subject.slice(h,h+d):u.bracketAfter||(s=this.subject.slice(u.index,e)),0===d&&(this.pos=l),s){var f=this.refmap[o(s)];f&&(i=f.destination,a=f.title,c=!0)}}if(c){var p,g,v=new r(n?"image":"link");for(v._destination=i,v._title=a||"",p=u.node._next;p;)g=p._next,p.unlink(),v.appendChild(p),p=g;if(t.appendChild(v),this.processEmphasis(u.previousDelimiter),this.removeBracket(),u.node.unlink(),!n)for(u=this.brackets;null!==u;)u.image||(u.active=!1),u=u.previous;return!0}return this.removeBracket(),this.pos=e,t.appendChild(D("]")),!0},J=function(t,e,n){null!==this.brackets&&(this.brackets.bracketAfter=!0),this.brackets={node:t,previous:this.brackets,previousDelimiter:this.delimiters,index:e,image:n,active:!0}},Z=function(){this.brackets=this.brackets.previous},tt=function(t){var e;return!!(e=this.match(y))&&(t.appendChild(D(c(e))),!0)},et=function(t){var e;return!!(e=this.match(M))&&(this.options.smart?t.appendChild(D(e.replace(A,"").replace(S,function(t){var e=0,n=0;return t.length%3==0?n=t.length/3:t.length%2==0?e=t.length/2:t.length%3==2?(e=1,n=(t.length-2)/3):(e=2,n=(t.length-4)/3),"".repeat(n)+"".repeat(e)}))):t.appendChild(D(e)),!0)},nt=function(t){this.pos+=1;var e=t._lastChild;if(e&&"text"===e.type&&" "===e._literal[e._literal.length-1]){var n=" "===e._literal[e._literal.length-2];e._literal=e._literal.replace(L,""),t.appendChild(new r(n?"linebreak":"softbreak"))}else t.appendChild(new r("softbreak"));return this.match(N),!0},rt=function(t,e){var n,r,i,a;this.subject=t,this.pos=0;var s=this.pos;if(0===(a=this.parseLinkLabel()))return 0;if(n=this.subject.substr(0,a),58!==this.peek())return this.pos=s,0;if(this.pos++,this.spnl(),null===(r=this.parseLinkDestination())||0===r.length)return this.pos=s,0;var u=this.pos;this.spnl(),null===(i=this.parseLinkTitle())&&(i="",this.pos=u);var c=!0;if(null===this.match(O)&&(""===i?c=!1:(i="",this.pos=u,c=null!==this.match(O))),!c)return this.pos=s,0;var l=o(n);return""===l?(this.pos=s,0):(e[l]||(e[l]={destination:r,title:i}),this.pos-s)},it=function(t){var e=!1,n=this.peek();if(-1===n)return!1;switch(n){case 10:e=this.parseNewline(t);break;case 92:e=this.parseBackslash(t);break;case 96:e=this.parseBackticks(t);break;case 42:case 95:e=this.handleDelim(n,t);break;case 39:case 34:e=this.options.smart&&this.handleDelim(n,t);break;case 91:e=this.parseOpenBracket(t);break;case 33:e=this.parseBang(t);break;case 93:e=this.parseCloseBracket(t);break;case 60:e=this.parseAutolink(t)||this.parseHtmlTag(t);break;case 38:e=this.parseEntity(t);break;default:e=this.parseString(t)}return e||(this.pos+=1,t.appendChild(D(u(n)))),!0},ot=function(t){for(this.subject=t._string_content.trim(),this.pos=0,this.delimiters=null,this.brackets=null;this.parseInline(t););t._string_content=null,this.processEmphasis(null)};t.exports=function(t){return{subject:"",delimiters:null,brackets:null,pos:0,refmap:{},match:P,peek:k,spnl:B,parseBackticks:F,parseBackslash:V,parseAutolink:U,parseHtmlTag:H,scanDelims:Y,handleDelim:G,parseLinkTitle:W,parseLinkDestination:K,parseLinkLabel:Q,parseOpenBracket:q,parseBang:X,parseCloseBracket:$,addBracket:J,removeBracket:Z,parseEntity:tt,parseString:et,parseNewline:nt,parseReference:rt,parseInline:it,processEmphasis:z,removeDelimiter:j,options:t||{},parse:ot}}},function(t,e,n){"use strict";var r=/[ \t\r\n]+|[A-Z\xB5\xC0-\xD6\xD8-\xDF\u0100\u0102\u0104\u0106\u0108\u010A\u010C\u010E\u0110\u0112\u0114\u0116\u0118\u011A\u011C\u011E\u0120\u0122\u0124\u0126\u0128\u012A\u012C\u012E\u0130\u0132\u0134\u0136\u0139\u013B\u013D\u013F\u0141\u0143\u0145\u0147\u0149\u014A\u014C\u014E\u0150\u0152\u0154\u0156\u0158\u015A\u015C\u015E\u0160\u0162\u0164\u0166\u0168\u016A\u016C\u016E\u0170\u0172\u0174\u0176\u0178\u0179\u017B\u017D\u017F\u0181\u0182\u0184\u0186\u0187\u0189-\u018B\u018E-\u0191\u0193\u0194\u0196-\u0198\u019C\u019D\u019F\u01A0\u01A2\u01A4\u01A6\u01A7\u01A9\u01AC\u01AE\u01AF\u01B1-\u01B3\u01B5\u01B7\u01B8\u01BC\u01C4\u01C5\u01C7\u01C8\u01CA\u01CB\u01CD\u01CF\u01D1\u01D3\u01D5\u01D7\u01D9\u01DB\u01DE\u01E0\u01E2\u01E4\u01E6\u01E8\u01EA\u01EC\u01EE\u01F0-\u01F2\u01F4\u01F6-\u01F8\u01FA\u01FC\u01FE\u0200\u0202\u0204\u0206\u0208\u020A\u020C\u020E\u0210\u0212\u0214\u0216\u0218\u021A\u021C\u021E\u0220\u0222\u0224\u0226\u0228\u022A\u022C\u022E\u0230\u0232\u023A\u023B\u023D\u023E\u0241\u0243-\u0246\u0248\u024A\u024C\u024E\u0345\u0370\u0372\u0376\u037F\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03AB\u03B0\u03C2\u03CF-\u03D1\u03D5\u03D6\u03D8\u03DA\u03DC\u03DE\u03E0\u03E2\u03E4\u03E6\u03E8\u03EA\u03EC\u03EE\u03F0\u03F1\u03F4\u03F5\u03F7\u03F9\u03FA\u03FD-\u042F\u0460\u0462\u0464\u0466\u0468\u046A\u046C\u046E\u0470\u0472\u0474\u0476\u0478\u047A\u047C\u047E\u0480\u048A\u048C\u048E\u0490\u0492\u0494\u0496\u0498\u049A\u049C\u049E\u04A0\u04A2\u04A4\u04A6\u04A8\u04AA\u04AC\u04AE\u04B0\u04B2\u04B4\u04B6\u04B8\u04BA\u04BC\u04BE\u04C0\u04C1\u04C3\u04C5\u04C7\u04C9\u04CB\u04CD\u04D0\u04D2\u04D4\u04D6\u04D8\u04DA\u04DC\u04DE\u04E0\u04E2\u04E4\u04E6\u04E8\u04EA\u04EC\u04EE\u04F0\u04F2\u04F4\u04F6\u04F8\u04FA\u04FC\u04FE\u0500\u0502\u0504\u0506\u0508\u050A\u050C\u050E\u0510\u0512\u0514\u0516\u0518\u051A\u051C\u051E\u0520\u0522\u0524\u0526\u0528\u052A\u052C\u052E\u0531-\u0556\u0587\u10A0-\u10C5\u10C7\u10CD\u1E00\u1E02\u1E04\u1E06\u1E08\u1E0A\u1E0C\u1E0E\u1E10\u1E12\u1E14\u1E16\u1E18\u1E1A\u1E1C\u1E1E\u1E20\u1E22\u1E24\u1E26\u1E28\u1E2A\u1E2C\u1E2E\u1E30\u1E32\u1E34\u1E36\u1E38\u1E3A\u1E3C\u1E3E\u1E40\u1E42\u1E44\u1E46\u1E48\u1E4A\u1E4C\u1E4E\u1E50\u1E52\u1E54\u1E56\u1E58\u1E5A\u1E5C\u1E5E\u1E60\u1E62\u1E64\u1E66\u1E68\u1E6A\u1E6C\u1E6E\u1E70\u1E72\u1E74\u1E76\u1E78\u1E7A\u1E7C\u1E7E\u1E80\u1E82\u1E84\u1E86\u1E88\u1E8A\u1E8C\u1E8E\u1E90\u1E92\u1E94\u1E96-\u1E9B\u1E9E\u1EA0\u1EA2\u1EA4\u1EA6\u1EA8\u1EAA\u1EAC\u1EAE\u1EB0\u1EB2\u1EB4\u1EB6\u1EB8\u1EBA\u1EBC\u1EBE\u1EC0\u1EC2\u1EC4\u1EC6\u1EC8\u1ECA\u1ECC\u1ECE\u1ED0\u1ED2\u1ED4\u1ED6\u1ED8\u1EDA\u1EDC\u1EDE\u1EE0\u1EE2\u1EE4\u1EE6\u1EE8\u1EEA\u1EEC\u1EEE\u1EF0\u1EF2\u1EF4\u1EF6\u1EF8\u1EFA\u1EFC\u1EFE\u1F08-\u1F0F\u1F18-\u1F1D\u1F28-\u1F2F\u1F38-\u1F3F\u1F48-\u1F4D\u1F50\u1F52\u1F54\u1F56\u1F59\u1F5B\u1F5D\u1F5F\u1F68-\u1F6F\u1F80-\u1FAF\u1FB2-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD2\u1FD3\u1FD6-\u1FDB\u1FE2-\u1FE4\u1FE6-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u2126\u212A\u212B\u2132\u2160-\u216F\u2183\u24B6-\u24CF\u2C00-\u2C2E\u2C60\u2C62-\u2C64\u2C67\u2C69\u2C6B\u2C6D-\u2C70\u2C72\u2C75\u2C7E-\u2C80\u2C82\u2C84\u2C86\u2C88\u2C8A\u2C8C\u2C8E\u2C90\u2C92\u2C94\u2C96\u2C98\u2C9A\u2C9C\u2C9E\u2CA0\u2CA2\u2CA4\u2CA6\u2CA8\u2CAA\u2CAC\u2CAE\u2CB0\u2CB2\u2CB4\u2CB6\u2CB8\u2CBA\u2CBC\u2CBE\u2CC0\u2CC2\u2CC4\u2CC6\u2CC8\u2CCA\u2CCC\u2CCE\u2CD0\u2CD2\u2CD4\u2CD6\u2CD8\u2CDA\u2CDC\u2CDE\u2CE0\u2CE2\u2CEB\u2CED\u2CF2\uA640\uA642\uA644\uA646\uA648\uA64A\uA64C\uA64E\uA650\uA652\uA654\uA656\uA658\uA65A\uA65C\uA65E\uA660\uA662\uA664\uA666\uA668\uA66A\uA66C\uA680\uA682\uA684\uA686\uA688\uA68A\uA68C\uA68E\uA690\uA692\uA694\uA696\uA698\uA69A\uA722\uA724\uA726\uA728\uA72A\uA72C\uA72E\uA732\uA734\uA736\uA738\uA73A\uA73C\uA73E\uA740\uA742\uA744\uA746\uA748\uA74A\uA74C\uA74E\uA750\uA752\uA754\uA756\uA758\uA75A\uA75C\uA75E\uA760\uA762\uA764\uA766\uA768\uA76A\uA76C\uA76E\uA779\uA77B\uA77D\uA77E\uA780\uA782\uA784\uA786\uA78B\uA78D\uA790\uA792\uA796\uA798\uA79A\uA79C\uA79E\uA7A0\uA7A2\uA7A4\uA7A6\uA7A8\uA7AA-\uA7AD\uA7B0\uA7B1\uFB00-\uFB06\uFB13-\uFB17\uFF21-\uFF3A]|\uD801[\uDC00-\uDC27]|\uD806[\uDCA0-\uDCBF]/g,i={A:"a",B:"b",C:"c",D:"d",E:"e",F:"f",G:"g",H:"h",I:"i",J:"j",K:"k",L:"l",M:"m",N:"n",O:"o",P:"p",Q:"q",R:"r",S:"s",T:"t",U:"u",V:"v",W:"w",X:"x",Y:"y",Z:"z","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"s","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"k","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"ss","":"i","":"n","":"j","":"","":"","":"","":"h","":"t","":"w","":"y","":"a","":"ss","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"ff","":"fi","":"fl","":"ffi","":"ffl","":"st","":"st","":"","":"","":"","":"","":""};t.exports=function(t){return t.slice(1,t.length-1).trim().replace(r,function(t){return i[t]||" "})}},function(t,e,n){"use strict";if(String.fromCodePoint)t.exports=function(t){try{return String.fromCodePoint(t)}catch(t){if(t instanceof RangeError)return String.fromCharCode(65533);throw t}};else{var r=String.fromCharCode,i=Math.floor;t.exports=function(){var t,e,n=[],o=-1,a=arguments.length;if(!a)return"";for(var s="";++o<a;){var u=Number(arguments[o]);if(!isFinite(u)||u<0||u>1114111||i(u)!==u)return String.fromCharCode(65533);u<=65535?n.push(u):(t=55296+((u-=65536)>>10),e=u%1024+56320,n.push(t,e)),(o+1===a||n.length>16384)&&(s+=r.apply(null,n),n.length=0)}return s}}},function(t,e){String.prototype.repeat||function(){"use strict";var t=function(){try{var t={},e=Object.defineProperty,n=e(t,t,t)&&e}catch(t){}return n}(),e=function(t){if(null==this)throw TypeError();var e=String(this),n=t?Number(t):0;if(n!=n&&(n=0),n<0||n==1/0)throw RangeError();for(var r="";n;)n%2==1&&(r+=e),n>1&&(e+=e),n>>=1;return r};t?t(String.prototype,"repeat",{value:e,configurable:!0,writable:!0}):String.prototype.repeat=e}()},function(t,e,n){"use strict";var r=n(119),i=/^javascript:|vbscript:|file:|data:/i,o=/^data:image\/(?:png|gif|jpeg|webp)/i,a=function(t){return i.test(t)&&!o.test(t)};function s(t){(t=t||{}).softbreak=t.softbreak||"\n",this.disableTags=0,this.lastOut="\n",this.options=t}s.prototype=Object.create(r.prototype),s.prototype.text=function(t){this.out(t.literal)},s.prototype.html_inline=function(t){this.options.safe?this.lit("\x3c!-- raw HTML omitted --\x3e"):this.lit(t.literal)},s.prototype.html_block=function(t){this.cr(),this.options.safe?this.lit("\x3c!-- raw HTML omitted --\x3e"):this.lit(t.literal),this.cr()},s.prototype.softbreak=function(){this.lit(this.options.softbreak)},s.prototype.linebreak=function(){this.tag("br",[],!0),this.cr()},s.prototype.link=function(t,e){var n=this.attrs(t);e?(this.options.safe&&a(t.destination)||n.push(["href",this.esc(t.destination,!0)]),t.title&&n.push(["title",this.esc(t.title,!0)]),this.tag("a",n)):this.tag("/a")},s.prototype.image=function(t,e){e?(0===this.disableTags&&(this.options.safe&&a(t.destination)?this.lit('<img src="" alt="'):this.lit('<img src="'+this.esc(t.destination,!0)+'" alt="')),this.disableTags+=1):(this.disableTags-=1,0===this.disableTags&&(t.title&&this.lit('" title="'+this.esc(t.title,!0)),this.lit('" />')))},s.prototype.emph=function(t,e){this.tag(e?"em":"/em")},s.prototype.strong=function(t,e){this.tag(e?"strong":"/strong")},s.prototype.paragraph=function(t,e){var n=t.parent.parent,r=this.attrs(t);null!==n&&"list"===n.type&&n.listTight||(e?(this.cr(),this.tag("p",r)):(this.tag("/p"),this.cr()))},s.prototype.heading=function(t,e){var n="h"+t.level,r=this.attrs(t);e?(this.cr(),this.tag(n,r)):(this.tag("/"+n),this.cr())},s.prototype.code=function(t){this.tag("code"),this.out(t.literal),this.tag("/code")},s.prototype.code_block=function(t){var e=t.info?t.info.split(/\s+/):[],n=this.attrs(t);e.length>0&&e[0].length>0&&n.push(["class","language-"+this.esc(e[0],!0)]),this.cr(),this.tag("pre"),this.tag("code",n),this.out(t.literal),this.tag("/code"),this.tag("/pre"),this.cr()},s.prototype.thematic_break=function(t){var e=this.attrs(t);this.cr(),this.tag("hr",e,!0),this.cr()},s.prototype.block_quote=function(t,e){var n=this.attrs(t);e?(this.cr(),this.tag("blockquote",n),this.cr()):(this.cr(),this.tag("/blockquote"),this.cr())},s.prototype.list=function(t,e){var n="bullet"===t.listType?"ul":"ol",r=this.attrs(t);if(e){var i=t.listStart;null!==i&&1!==i&&r.push(["start",i.toString()]),this.cr(),this.tag(n,r),this.cr()}else this.cr(),this.tag("/"+n),this.cr()},s.prototype.item=function(t,e){var n=this.attrs(t);e?this.tag("li",n):(this.tag("/li"),this.cr())},s.prototype.custom_inline=function(t,e){e&&t.onEnter?this.lit(t.onEnter):!e&&t.onExit&&this.lit(t.onExit)},s.prototype.custom_block=function(t,e){this.cr(),e&&t.onEnter?this.lit(t.onEnter):!e&&t.onExit&&this.lit(t.onExit),this.cr()},s.prototype.esc=n(34).escapeXml,s.prototype.out=function(t){this.lit(this.esc(t,!1))},s.prototype.tag=function(t,e,n){if(!(this.disableTags>0)){if(this.buffer+="<"+t,e&&e.length>0)for(var r,i=0;void 0!==(r=e[i]);)this.buffer+=" "+r[0]+'="'+r[1]+'"',i++;n&&(this.buffer+=" /"),this.buffer+=">",this.lastOut=">"}},s.prototype.attrs=function(t){var e=[];if(this.options.sourcepos){var n=t.sourcepos;n&&e.push(["data-sourcepos",String(n[0][0])+":"+String(n[0][1])+"-"+String(n[1][0])+":"+String(n[1][1])])}return e},t.exports=s},function(t,e,n){"use strict";var r=n(119),i=/\<[^>]*\>/;function o(t){t=t||{},this.disableTags=0,this.lastOut="\n",this.indentLevel=0,this.indent="  ",this.options=t}o.prototype=Object.create(r.prototype),o.prototype.render=function(t){var e,n;this.buffer="";var r,i,o,a,s,u,c=t.walker(),l=this.options;for(l.time&&console.time("rendering"),this.buffer+='<?xml version="1.0" encoding="UTF-8"?>\n',this.buffer+='<!DOCTYPE document SYSTEM "CommonMark.dtd">\n';r=c.next();)if(o=r.entering,u=(i=r.node).type,a=i.isContainer,s="thematic_break"===u||"linebreak"===u||"softbreak"===u,n=u.replace(/([a-z])([A-Z])/g,"$1_$2").toLowerCase(),o){switch(e=[],u){case"document":e.push(["xmlns","http://commonmark.org/xml/1.0"]);break;case"list":null!==i.listType&&e.push(["type",i.listType.toLowerCase()]),null!==i.listStart&&e.push(["start",String(i.listStart)]),null!==i.listTight&&e.push(["tight",i.listTight?"true":"false"]);var h=i.listDelimiter;if(null!==h){var d="";d="."===h?"period":"paren",e.push(["delimiter",d])}break;case"code_block":i.info&&e.push(["info",i.info]);break;case"heading":e.push(["level",String(i.level)]);break;case"link":case"image":e.push(["destination",i.destination]),e.push(["title",i.title]);break;case"custom_inline":case"custom_block":e.push(["on_enter",i.onEnter]),e.push(["on_exit",i.onExit])}if(l.sourcepos){var f=i.sourcepos;f&&e.push(["sourcepos",String(f[0][0])+":"+String(f[0][1])+"-"+String(f[1][0])+":"+String(f[1][1])])}if(this.cr(),this.out(this.tag(n,e,s)),a)this.indentLevel+=1;else if(!a&&!s){var p=i.literal;p&&this.out(this.esc(p)),this.out(this.tag("/"+n))}}else this.indentLevel-=1,this.cr(),this.out(this.tag("/"+n));return l.time&&console.timeEnd("rendering"),this.buffer+="\n",this.buffer},o.prototype.out=function(t){this.disableTags>0?this.buffer+=t.replace(i,""):this.buffer+=t,this.lastOut=t},o.prototype.cr=function(){if("\n"!==this.lastOut){this.buffer+="\n",this.lastOut="\n";for(var t=this.indentLevel;t>0;t--)this.buffer+=this.indent}},o.prototype.tag=function(t,e,n){var r="<"+t;if(e&&e.length>0)for(var i,o=0;void 0!==(i=e[o]);)r+=" "+i[0]+'="'+this.esc(i[1])+'"',o++;return n&&(r+=" /"),r+=">"},o.prototype.esc=n(34).escapeXml,t.exports=o},function(t,e,n){var r,i,o,a,s=(r=/d{1,4}|m{1,4}|yy(?:yy)?|([HhMsTt])\1?|[LloSZW]|"[^"]*"|'[^']*'/g,i=/\b(?:[PMCEA][SDP]T|(?:Pacific|Mountain|Central|Eastern|Atlantic) (?:Standard|Daylight|Prevailing) Time|(?:GMT|UTC)(?:[-+]\d{4})?)\b/g,o=/[^-+\dA-Z]/g,a=function(t,e){for(t=String(t),e=e||2;t.length<e;)t="0"+t;return t},function(t,e,n){var u=s;if(1!=arguments.length||"[object String]"!=Object.prototype.toString.call(t)||/\d/.test(t)||(e=t,t=void 0),(t=t||new Date)instanceof Date||(t=new Date(t)),isNaN(t))throw TypeError("Invalid date");"UTC:"==(e=String(u.masks[e]||e||u.masks.default)).slice(0,4)&&(e=e.slice(4),n=!0);var c=n?"getUTC":"get",l=t[c+"Date"](),h=t[c+"Day"](),d=t[c+"Month"](),f=t[c+"FullYear"](),p=t[c+"Hours"](),g=t[c+"Minutes"](),v=t[c+"Seconds"](),m=t[c+"Milliseconds"](),y=n?0:t.getTimezoneOffset(),_=function(t){var e=new Date(t.getFullYear(),t.getMonth(),t.getDate());e.setDate(e.getDate()-(e.getDay()+6)%7+3);var n=new Date(e.getFullYear(),0,4);n.setDate(n.getDate()-(n.getDay()+6)%7+3);var r=e.getTimezoneOffset()/n.getTimezoneOffset()-1;return e.setHours(e.getHours()+r),1+(e-n)/6048e5}(t),E={d:l,dd:a(l),ddd:u.i18n.dayNames[h],dddd:u.i18n.dayNames[h+7],m:d+1,mm:a(d+1),mmm:u.i18n.monthNames[d],mmmm:u.i18n.monthNames[d+12],yy:String(f).slice(2),yyyy:f,h:p%12||12,hh:a(p%12||12),H:p,HH:a(p),M:g,MM:a(g),s:v,ss:a(v),l:a(m,3),L:a(m>99?Math.round(m/10):m),t:p<12?"a":"p",tt:p<12?"am":"pm",T:p<12?"A":"P",TT:p<12?"AM":"PM",Z:n?"UTC":(String(t).match(i)||[""]).pop().replace(o,""),o:(y>0?"-":"+")+a(100*Math.floor(Math.abs(y)/60)+Math.abs(y)%60,4),S:["th","st","nd","rd"][l%10>3?0:(l%100-l%10!=10)*l%10],W:_};return e.replace(r,function(t){return t in E?E[t]:t.slice(1,t.length-1)})});s.masks={default:"ddd mmm dd yyyy HH:MM:ss",shortDate:"m/d/yy",mediumDate:"mmm d, yyyy",longDate:"mmmm d, yyyy",fullDate:"dddd, mmmm d, yyyy",shortTime:"h:MM TT",mediumTime:"h:MM:ss TT",longTime:"h:MM:ss TT Z",isoDate:"yyyy-mm-dd",isoTime:"HH:MM:ss",isoDateTime:"yyyy-mm-dd'T'HH:MM:ss",isoUtcDateTime:"UTC:yyyy-mm-dd'T'HH:MM:ss'Z'"},s.i18n={dayNames:["Sun","Mon","Tue","Wed","Thu","Fri","Sat","Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],monthNames:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec","January","February","March","April","May","June","July","August","September","October","November","December"]},t.exports=s},function(t,e){t.exports=require("ipp")},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=p(n(80)),i=p(n(85)),o=p(n(299)),a=p(n(314)),s=p(n(35)),u=p(n(25));e.prepare=function(t,e,n,p){var _=(0,f.doMatchWatermarkLanguage)("print-watermark"),E=(0,f.doMatchWatermarkLanguage)("pdf-footer"),A=(0,f.fetchResourceFnCreator)(_),S="full"===n?(0,f.fetchResourceFnCreator)(E):(0,f.fetchResourceFnCreator)(d.default),T=(M=[],{cleanUp:function(){M.forEach(function(t){return t.remove()}),M.length=0},addToRemoveEl:function(t){M.push(t)}}),x=T.cleanUp,b=T.addToRemoveEl,w=function(t,e,n){var r=document.createElement("div");return r.classList.add("print-el"),(0,s.default)(r.style,{width:e+"px",height:n+"px",backgroundImage:"url('"+t+"')",backgroundPosition:"center",backgroundRepeat:"no-repeat"}),r},C=function(t,n,r,i){for(var o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{pageX:1,pageY:1,actualSizeMode:!1},a=o.pageX,s=o.pageY,u=o.actualSizeMode,c=(a>s?s:a)/(u?a>2||s>2?2:1.5:1),l=[{key:"width",value:m},{key:"height",value:y},{key:"href",value:n},{key:"id",value:"watermark"},{key:"transform",value:"translate(90, 0) rotate(45)"}],h=[{key:"href",value:"#watermark"}],d=r.width/i.x?r.width/v/(u?1:2):0,f=r.height/i.y?r.height/g/(u?1:2):0,p=(d+f).toFixed(2)/(a*s)*c,_=Math.sqrt(Math.pow(y,2)+Math.pow(y,2)),E=r.width/v/2>r.height/g/2?{offsetX:p,offsetY:1}:{offsetX:1,offsetY:p},A=parseInt(i.y/_+1)*s,S=parseInt(i.x/_+1)*a,T="http://www.w3.org/2000/svg",x=document.createElementNS(T,"defs"),b=document.createElementNS(T,"image"),w=r.height/i.y>r.width/i.x||u?1:0,C=r.width/i.x>r.height/i.y||u?1:0,I=[],L=[],N=0;N<S;N++)for(var O=function(t){var e=document.createElementNS(T,"use");h.forEach(function(t){return e.setAttributeNS(null,t.key,t.value)}),e.setAttributeNS(null,"transform","translate(0, "+165*t+")"),I.push(e)},R=0;R<A;R++)O(R);for(var M=function(t){var n=I.slice(t*A,(t+1)*A);L[t]=document.createElementNS(T,"g"),L[t].setAttributeNS(null,"transform","translate("+(-400*E.offsetY*w/(u&&"portrait"===e.orientation?2:1)+153*t*p)+", "+(-153*p+-300*E.offsetX/(u&&"portrait"!==e.orientation?2:1))*C+") scale("+p+")"),n.forEach(function(e){L[t].appendChild(e)})},D=0;D<S;D++)M(D);l.forEach(function(t){return b.setAttributeNS(null,t.key,t.value)}),x.appendChild(b),L.forEach(function(e){return t.prepend(e)}),t.prepend(x)},I={x:"portrait"===e.orientation?e.pageSize.x:e.pageSize.y,y:"portrait"===e.orientation?e.pageSize.y:e.pageSize.x},L=(0,f.getScreenDPI)(),N={x:parseInt((I.x-e.margins.left-e.margins.right)*L.x/25.4),y:parseInt((I.y-e.margins.top-e.margins.bottom)*L.y/25.4)},O=[],R=void 0;var M;if("workbook"==e.content){t.sbEditor.initAllSheetEditor(),R=t.sbEditor.sheetEditors;var D=t.sbEditor.model.get("sheetOrder")[0];e.defaultPath=h.saveDialogHelper.guessFilePath(t.document.source.startsWith("new://")?R[D]:t.document.title)}else{var P,k=t.sbEditor.getCurrentSheetEditor();(P={})[k.model.id]=k,R=P,e.defaultPath=h.saveDialogHelper.guessFilePath(k)}var B=(0,i.default)(R),F=[],V=function(t){var n=R[t];F.push(n.exportImage({format:"SVG",hideCollapseOpen:!1,hideCollapseClose:!1,noBackground:!e.pageSetup.background,targetBranch:p}).then(function(t){t.data=function(t){var e=t.match(/(id="Svgjs.*?)(")/g);if(null===e)return t;return(0,a.default)(new o.default(e.map(function(t){return t.substring(4,t.length-1)}))).forEach(function(e){var n=(0,l.UUID)();t=t.replace(new RegExp(e,"g"),n)}),t}(t.data),O[B.indexOf(n.model.id)]=t}))};for(var U in R)V(U);return function(t){return"full"===n?u.default.all(t).then(function(){return u.default.all([A(),S()])}):"sub"===n?u.default.all(t).then(function(){return u.default.all([!1,S()])}):u.default.all(t)}(F).then(function(t){var n=t[0],i=t[1],o=[];if("actualSize"==e.scale)for(var s=O,u=Array.isArray(s),h=0,s=u?s:(0,r.default)(s);;){var d;if(u){if(h>=s.length)break;d=s[h++]}else{if((h=s.next()).done)break;d=h.value}for(var f=d,p=Math.ceil(f.width/N.x),g=Math.ceil(f.height/N.y),v=(p*N.x-f.width)/2,m=(g*N.y-f.height)/2,y=0;y<g;y++)for(var _=0;_<p;_++){var E="print_"+(0,l.UUID)(),A=(0,c.default)(f.data).eq(2).attr("viewBox",_*N.x-v+" "+(y*N.y-m)+" "+N.x+" "+N.y).attr("width",N.x).attr("height",N.y).attr("id",E).addClass("print-el"),S=void 0;e.boundaryFillNone&&(0,a.default)(A.get(0).querySelectorAll('[data-name="boundary-path"]')).forEach(function(t){return t.setAttribute("fill","none")}),n&&C(A,n,f,N,{pageX:p,pageY:g,actualSizeMode:!0}),i&&((S=w(i,N.x,Math.floor((e.margins.bottom-2)*L.y/25.4))).style.pageBreakAfter="always",b(S)),A.appendTo((0,c.default)(document.body)),S&&document.body.appendChild(S),b(A[0]),o.push(E)}}else for(var T=O,x=Array.isArray(T),I=0,T=x?T:(0,r.default)(T);;){var R;if(x){if(I>=T.length)break;R=T[I++]}else{if((I=T.next()).done)break;R=I.value}var M=R,D="print_"+(0,l.UUID)(),P=(0,c.default)(M.data).eq(2).attr("width",N.x).attr("height",N.y).attr("id",D).addClass("print-el"),k=void 0;e.boundaryFillNone&&(0,a.default)(P.get(0).querySelectorAll('[data-name="boundary-path"]')).forEach(function(t){return t.setAttribute("fill","none")}),n&&C(P,n,M,N),i&&(k=w(i,N.x,Math.floor((e.margins.bottom-2)*L.y/25.4)),b(k)),P.appendTo((0,c.default)(document.body)),b(P[0]),k&&document.body.appendChild(k),o.push(D)}return o}).then(function(){var t='\n  <style id="print_css">\n  .print-el{\n    display:none;\n  }\n  @page{\n    size:'+I.x+"mm "+I.y+"mm "+e.orientation+";\n    margin-top:"+e.margins.top+"mm;\n    margin-left:"+e.margins.left+"mm;\n    margin-right:"+e.margins.right+"mm;\n    margin-bottom:"+(n?"0":e.margins.bottom+"mm")+";\n  }\n  @media print{\n    .print-el{\n      display: block;\n    }\n    *{\n      webkit-transition: none !important;\n      transition: none !important;\n    }\n    html{\n      background-color:#fff;\n    }\n    body{\n      overflow:visible!important;\n      background-color:#fff;\n    }\n    .titlebar{\n      display:none!important;\n    }\n    .workbench{\n      top:0!important;\n    }\n    .workbench > .evaluation-text {\n      display:none!important;\n    }\n    .topbar{\n      display:none!important;\n    }\n    .leftbar{\n      display:none!important;\n    }\n    .rightbar{\n      display:none!important;\n    }\n    .bottombar{\n      display:none!important;\n    }\n    .sheet-bar{\n      display:none!important;\n    }\n    .sb-mind-map-container{\n      display:none!important;\n    }\n    .editor-stack{\n      top:0!important;\n      right:0!important;\n      left:0!important;\n      bottom:0!important;\n      z-index:9999!important;\n    }\n    .editor-content{\n      top:0!important;\n      right:0!important;\n      left:0!important;\n      bottom:0!important;\n    }\n    .f10__dialog{\n      display:none:!important;\n    }\n    #app{\n      width:0;\n      height:0;\n    }\n    \n    \n    \n    \n  }\n  </style>\n  ";return b((0,c.default)(t).appendTo((0,c.default)(document.head))[0]),x})};var c=p(n(54)),l=n(77),h=n(121),d=p(n(318)),f=n(319);function p(t){return t&&t.__esModule?t:{default:t}}var g=204.6,v=312,m=130,y=135},function(t,e,n){t.exports={default:n(300),__esModule:!0}},function(t,e,n){n(69),n(41),n(50),n(301),n(307),n(310),n(312),t.exports=n(3).Set},function(t,e,n){"use strict";var r=n(302),i=n(120);t.exports=n(303)("Set",function(t){return function(){return t(this,arguments.length>0?arguments[0]:void 0)}},{add:function(t){return r.def(i(this,"Set"),t=0===t?0:t,t)}},r)},function(t,e,n){"use strict";var r=n(11).f,i=n(65),o=n(74),a=n(16),s=n(71),u=n(44),c=n(64),l=n(88),h=n(97),d=n(13),f=n(67).fastKey,p=n(120),g=d?"_s":"size",v=function(t,e){var n,r=f(e);if("F"!==r)return t._i[r];for(n=t._f;n;n=n.n)if(n.k==e)return n};t.exports={getConstructor:function(t,e,n,c){var l=t(function(t,r){s(t,l,e,"_i"),t._t=e,t._i=i(null),t._f=void 0,t._l=void 0,t[g]=0,void 0!=r&&u(r,n,t[c],t)});return o(l.prototype,{clear:function(){for(var t=p(this,e),n=t._i,r=t._f;r;r=r.n)r.r=!0,r.p&&(r.p=r.p.n=void 0),delete n[r.i];t._f=t._l=void 0,t[g]=0},delete:function(t){var n=p(this,e),r=v(n,t);if(r){var i=r.n,o=r.p;delete n._i[r.i],r.r=!0,o&&(o.n=i),i&&(i.p=o),n._f==r&&(n._f=i),n._l==r&&(n._l=o),n[g]--}return!!r},forEach:function(t){p(this,e);for(var n,r=a(t,arguments.length>1?arguments[1]:void 0,3);n=n?n.n:this._f;)for(r(n.v,n.k,this);n&&n.r;)n=n.p},has:function(t){return!!v(p(this,e),t)}}),d&&r(l.prototype,"size",{get:function(){return p(this,e)[g]}}),l},def:function(t,e,n){var r,i,o=v(t,e);return o?o.v=n:(t._l=o={i:i=f(e,!0),k:e,v:n,p:r=t._l,n:void 0,r:!1},t._f||(t._f=o),r&&(r.n=o),t[g]++,"F"!==i&&(t._i[i]=o)),t},getEntry:v,setStrong:function(t,e,n){c(t,e,function(t,n){this._t=p(t,e),this._k=n,this._l=void 0},function(){for(var t=this._k,e=this._l;e&&e.r;)e=e.p;return this._t&&(this._l=e=e?e.n:this._t._f)?l(0,"keys"==t?e.k:"values"==t?e.v:[e.k,e.v]):(this._t=void 0,l(1))},n?"entries":"values",!n,!0),h(e)}}},function(t,e,n){"use strict";var r=n(7),i=n(6),o=n(67),a=n(21),s=n(17),u=n(74),c=n(44),l=n(71),h=n(12),d=n(43),f=n(11).f,p=n(304)(0),g=n(13);t.exports=function(t,e,n,v,m,y){var _=r[t],E=_,A=m?"set":"add",S=E&&E.prototype,T={};return g&&"function"==typeof E&&(y||S.forEach&&!a(function(){(new E).entries().next()}))?(E=e(function(e,n){l(e,E,t,"_c"),e._c=new _,void 0!=n&&c(n,m,e[A],e)}),p("add,clear,delete,forEach,get,has,set,keys,values,entries,toJSON".split(","),function(t){var e="add"==t||"set"==t;t in S&&(!y||"clear"!=t)&&s(E.prototype,t,function(n,r){if(l(this,E,t),!e&&y&&!h(n))return"get"==t&&void 0;var i=this._c[t](0===n?0:n,r);return e?this:i})}),y||f(E.prototype,"size",{get:function(){return this._c.size}})):(E=v.getConstructor(e,t,m,A),u(E.prototype,n),o.NEED=!0),d(E,t),T[t]=E,i(i.G+i.W+i.F,T),y||v.setStrong(E,t,m),E}},function(t,e,n){var r=n(16),i=n(57),o=n(40),a=n(45),s=n(305);t.exports=function(t,e){var n=1==t,u=2==t,c=3==t,l=4==t,h=6==t,d=5==t||h,f=e||s;return function(e,s,p){for(var g,v,m=o(e),y=i(m),_=r(s,p,3),E=a(y.length),A=0,S=n?f(e,E):u?f(e,0):void 0;E>A;A++)if((d||A in y)&&(v=_(g=y[A],A,m),t))if(n)S[A]=v;else if(v)switch(t){case 3:return!0;case 5:return g;case 6:return A;case 2:S.push(g)}else if(l)return!1;return h?-1:c||l?l:S}}},function(t,e,n){var r=n(306);t.exports=function(t,e){return new(r(t))(e)}},function(t,e,n){var r=n(12),i=n(89),o=n(8)("species");t.exports=function(t){var e;return i(t)&&("function"!=typeof(e=t.constructor)||e!==Array&&!i(e.prototype)||(e=void 0),r(e)&&null===(e=e[o])&&(e=void 0)),void 0===e?Array:e}},function(t,e,n){var r=n(6);r(r.P+r.R,"Set",{toJSON:n(308)("Set")})},function(t,e,n){var r=n(70),i=n(309);t.exports=function(t){return function(){if(r(this)!=t)throw TypeError(t+"#toJSON isn't generic");return i(this)}}},function(t,e,n){var r=n(44);t.exports=function(t,e){var n=[];return r(t,!1,n.push,n,e),n}},function(t,e,n){n(311)("Set")},function(t,e,n){"use strict";var r=n(6);t.exports=function(t){r(r.S,t,{of:function(){for(var t=arguments.length,e=new Array(t);t--;)e[t]=arguments[t];return new this(e)}})}},function(t,e,n){n(313)("Set")},function(t,e,n){"use strict";var r=n(6),i=n(36),o=n(16),a=n(44);t.exports=function(t){r(r.S,t,{from:function(t){var e,n,r,s,u=arguments[1];return i(this),(e=void 0!==u)&&i(u),void 0==t?new this:(n=[],e?(r=0,s=o(u,arguments[2],2),a(t,!1,function(t){n.push(s(t,r++))})):a(t,!1,n.push,n),new this(n))}})}},function(t,e,n){t.exports={default:n(315),__esModule:!0}},function(t,e,n){n(41),n(316),t.exports=n(3).Array.from},function(t,e,n){"use strict";var r=n(16),i=n(6),o=n(40),a=n(91),s=n(92),u=n(45),c=n(317),l=n(72);i(i.S+i.F*!n(98)(function(t){Array.from(t)}),"Array",{from:function(t){var e,n,i,h,d=o(t),f="function"==typeof this?this:Array,p=arguments.length,g=p>1?arguments[1]:void 0,v=void 0!==g,m=0,y=l(d);if(v&&(g=r(g,p>2?arguments[2]:void 0,2)),void 0==y||f==Array&&s(y))for(n=new f(e=u(d.length));e>m;m++)c(n,m,v?g(d[m],m):d[m]);else for(h=y.call(d),n=new f;!(i=h.next()).done;m++)c(n,m,v?a(h,g,[i.value,m],!0):i.value);return n.length=m,n}})},function(t,e,n){"use strict";var r=n(11),i=n(37);t.exports=function(t,e,n){e in t?r.f(t,e,i(0,n)):t[e]=n}},function(t,e,n){t.exports=n.p+"imgs/pdf-sub-footer.svg"},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.doMatchWatermarkLanguage=e.fetchResourceFnCreator=e.getScreenDPI=void 0;var r=u(n(25)),i=u(n(2)),o=n(14),a=n(77),s=n(18);function u(t){return t&&t.__esModule?t:{default:t}}var c,l=(c=null,function(){if(!c)if(window.screen.deviceXDPI&&window.screen.deviceYDPI)c={x:window.screen.deviceXDPI,y:window.screen.deviceYDPI};else{var t=document.createElement("div");t.style.cssText="width:1in;height:1in;position:absolute;left:0px;top:0px;z-index:99;visibility:hidden",document.body.appendChild(t),c={x:parseInt(t.offsetWidth),y:parseInt(t.offsetHeight)},t.parentNode.removeChild(t)}return c});e.getScreenDPI=l,e.fetchResourceFnCreator=function(t){var e=t.startsWith("data:")?t:null;return function(){return new r.default(function(n,r){if(e)n(e);else{var o=s.workspace.appRoot+"/out",u=new XMLHttpRequest,c=i.default.extname(t);u.addEventListener("load",function(){switch(c){case".svg":e="data:image/svg+xml;base64,"+window.btoa((t=u.responseText,t=(t=encodeURIComponent(t)).replace(/%([0-9A-F]{2})/g,function(t,e){var n=String.fromCharCode("0x"+e);return"%"===n?"%25":n}),decodeURIComponent(t)));break;case".png":e="data:image/png;base64,"+(0,a.arrayBufferToBase64)(u.response);break;default:throw new Error("unsupported format:",c)}var t;n(e)}),u.addEventListener("error",r),u.open("GET",i.default.join(o,t)),".png"===c&&(u.responseType="arraybuffer"),u.send()}})}},e.doMatchWatermarkLanguage=function(t){switch(o.remote.app.preferences.get("general.locale")){case"zh-TW":switch(t){case"print-watermark":return n(320);case"png-watermark":return n(321);case"pdf-footer":return n(322)}break;case"zh-CN":switch(t){case"print-watermark":return n(323);case"png-watermark":return n(324);case"pdf-footer":return n(325)}break;case"en-US":switch(t){case"print-watermark":return n(122);case"png-watermark":return n(123);case"pdf-footer":return n(124)}break;case"fr-FR":switch(t){case"print-watermark":return n(326);case"png-watermark":return n(327);case"pdf-footer":return n(328)}break;case"de-DE":switch(t){case"print-watermark":return n(329);case"png-watermark":return n(330);case"pdf-footer":return n(331)}break;case"ja-JP":switch(t){case"print-watermark":return n(332);case"png-watermark":return n(333);case"pdf-footer":return n(334)}break;default:switch(t){case"print-watermark":return n(122);case"png-watermark":return n(123);case"pdf-footer":return n(124)}}}},function(t,e,n){t.exports=n.p+"imgs/print-watermark-zh-TW.svg"},function(t,e,n){t.exports=n.p+"imgs/png-watermark-zh-TW.svg"},function(t,e,n){t.exports=n.p+"imgs/pdf-footer-zh-TW.svg"},function(t,e,n){t.exports=n.p+"imgs/print-watermark-zh-CN.svg"},function(t,e,n){t.exports=n.p+"imgs/png-watermark-zh-CN.svg"},function(t,e,n){t.exports=n.p+"imgs/pdf-footer-zh-CN.svg"},function(t,e,n){t.exports=n.p+"imgs/print-watermark-fr-FR.svg"},function(t,e,n){t.exports=n.p+"imgs/png-watermark-fr-FR.svg"},function(t,e,n){t.exports=n.p+"imgs/pdf-footer-fr-FR.svg"},function(t,e,n){t.exports=n.p+"imgs/print-watermark-de-DE.svg"},function(t,e,n){t.exports=n.p+"imgs/png-watermark-de-DE.svg"},function(t,e,n){t.exports=n.p+"imgs/pdf-footer-de-DE.svg"},function(t,e,n){t.exports=n.p+"imgs/print-watermark-ja-JP.svg"},function(t,e,n){t.exports=n.p+"imgs/png-watermark-ja-JP.svg"},function(t,e,n){t.exports=n.p+"imgs/pdf-footer-ja-JP.svg"},function(t,e){t.exports=require("edge")},function(t,e,n){t.exports={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("modal-dialog",{attrs:{win32:t.isWin(),title:t.l10n.T("Print")},on:{close:t.close}},[n("div",{staticClass:"print-dialog-wrapper"},[n("div",{staticClass:"col-6"},[n("div",{staticClass:"row print-preview-center"},[n("div",{staticClass:"print-preview-pic",class:t.previewEffect},[n("div",{ref:"picborder",staticClass:"print-preview-pic-border",style:[t.previewBorderStyle,t.previewBorderBackground]},[n("img",{ref:"img",staticClass:"preview-image",attrs:{src:t.previewHtml,alt:""}})])])]),t._v(" "),n("div",{staticClass:"row print-preview-navi"},[n("div",{staticClass:"print-preview-navi-leftest",class:{disabled:1===t.currentIndex},on:{click:function(e){t.currentIndex=1}}}),t._v(" "),n("div",{staticClass:"print-preview-navi-left",class:{disabled:1===t.currentIndex},on:{click:function(e){t.currentIndex>1&&t.currentIndex--}}}),t._v(" "),n("div",{staticClass:"print-preview-navi-range"},[t._v(t._s(t.l10n.T(t.rangeText)))]),t._v(" "),n("div",{staticClass:"print-preview-navi-right",class:{disabled:t.currentIndex===t.allPreviews.length},on:{click:function(e){t.currentIndex<t.allPreviews.length&&t.currentIndex++}}}),t._v(" "),n("div",{staticClass:"print-preview-navi-rightest",class:{disabled:t.currentIndex===t.allPreviews.length},on:{click:function(e){t.currentIndex=t.allPreviews.length}}})])]),t._v(" "),n("div",{staticClass:"col-6"},[n("div",{staticClass:"row"},[n("h3",[t._v(t._s(t.l10n.T("Printer Settings")))])]),t._v(" "),n("div",{staticClass:"row"}),t._v(" "),n("div",{staticStyle:{display:"flex"}},[n("div",{staticStyle:{"flex-shrink":"0"}},[n("div",{staticClass:"text-right row"},[t._v(t._s(t.l10n.T("Printer"))+":")]),t._v(" "),n("div",{staticClass:"text-right row"},[t._v(t._s(t.l10n.T("Copies"))+":")]),t._v(" "),n("div",{staticClass:"text-right row"},[t._v(t._s(t.l10n.T("Content"))+":")]),t._v(" "),n("div",{staticClass:"text-right row"},[t._v(t._s(t.l10n.T("Page Size"))+":")]),t._v(" "),n("div",{staticClass:"text-right row",staticStyle:{"line-height":"32px"}},[t._v(t._s(t.l10n.T("Layout"))+":")]),t._v(" "),n("div",{staticClass:"text-right row",staticStyle:{"line-height":"inherit"}},[t._v(t._s(t.l10n.T("Scale"))+":")]),t._v(" "),n("div",{staticStyle:{height:"24px"}}),t._v(" "),n("div",{staticClass:"text-right row",staticStyle:{"line-height":"inherit"}},[t._v(t._s(t.l10n.T("Option"))+":")])]),t._v(" "),n("div",{staticStyle:{overflow:"hidden"}},[n("div",{staticClass:"row"},[n("xm-dropdown",{staticStyle:{width:"100%"},model:{value:t.printerIndex,callback:function(e){t.printerIndex=e},expression:"printerIndex"}},[n("span",[t._v(t._s(t.scanedPrinters[t.printerIndex].name))]),t._v(" "),t._l(t.scanedPrinters,function(e,r){return n("xm-dropdown-item",{attrs:{slot:"dropdown",index:r},slot:"dropdown"},[n("span",[t._v(t._s(e.name))])])})],2)],1),t._v(" "),n("div",{staticClass:"row"},[n("xm-stepper",{staticStyle:{width:"60px"},attrs:{min:1,max:999},model:{value:t.settings.copies,callback:function(e){t.$set(t.settings,"copies",e)},expression:"settings.copies"}})],1),t._v(" "),n("div",{staticClass:"row"},[n("xm-dropdown",{staticStyle:{width:"200px"},model:{value:t.contentIndex,callback:function(e){t.contentIndex=e},expression:"contentIndex"}},[n("span",[t._v(t._s([t.l10n.T("Current Map"),t.l10n.T("Whole Workbook")][t.contentIndex]))]),t._v(" "),t._l([t.l10n.T("Current Map"),t.l10n.T("Whole Workbook")],function(e,r){return n("xm-dropdown-item",{attrs:{slot:"dropdown",index:r},slot:"dropdown"},[n("span",[t._v(t._s(e))])])})],2)],1),t._v(" "),n("div",{staticClass:"row"},[t.supportedPageSizes.length?[n("xm-dropdown",{staticStyle:{width:"200px"},model:{value:t.pageSizeIndex,callback:function(e){t.pageSizeIndex=e},expression:"pageSizeIndex"}},[n("span",[t._v(t._s(t.supportedPageSizes[t.pageSizeIndex]))]),t._v(" "),t._l(t.supportedPageSizes,function(e,r){return n("xm-dropdown-item",{attrs:{slot:"dropdown",index:r},slot:"dropdown"},[n("span",[t._v(t._s(e))])])})],2)]:[n("div",[n("xm-dropdown",{attrs:{disable:!0},model:{value:t.nothing,callback:function(e){t.nothing=e},expression:"nothing"}},[n("xm-dropdown-item",[t._v("")])],1)],1)]],2),t._v(" "),n("div",{staticClass:"row"},[n("div",{staticClass:"col-2",staticStyle:{width:"33px","margin-right":"10px"}},[n("div",{staticClass:"layout-block layout-block-landscape",class:{"layout-select":"landscape"==t.settings.orientation},on:{click:function(e){t.settings.orientation="landscape"}}})]),t._v(" "),n("div",{staticClass:"col-2",staticStyle:{width:"33px"}},[n("div",{staticClass:"layout-block layout-block-portrait",class:{"layout-select":"portrait"==t.settings.orientation},on:{click:function(e){t.settings.orientation="portrait"}}})])]),t._v(" "),n("div",{staticClass:"row"},[n("div",{staticClass:"col-8"},[n("div",{staticClass:"row"},[n("xm-radio",{model:{value:t.actualSizeBoolean,callback:function(e){t.actualSizeBoolean=e},expression:"actualSizeBoolean"}},[t._v(t._s(t.l10n.T("Actual Size")))])],1),t._v(" "),n("div",[n("xm-radio",{model:{value:t.fitMapBoolean,callback:function(e){t.fitMapBoolean=e},expression:"fitMapBoolean"}},[t._v(t._s(t.l10n.T("Fit Page")))])],1)])]),t._v(" "),n("div",{staticClass:"row"},[n("xm-checkbox",{model:{value:t.settings.pageSetup.background,callback:function(e){t.$set(t.settings.pageSetup,"background",e)},expression:"settings.pageSetup.background"}},[t._v("\n              "+t._s(t.l10n.T("Background Color"))+"\n            ")])],1)])])])]),t._v(" "),n("xm-button-group",{staticClass:"bottom right",staticStyle:{position:"fixed",bottom:"24px",right:"24px"}},[n("xm-button",{on:{click:t.close}},[t._v(t._s(t.l10n.T("Close")))]),t._v(" "),n("xm-button",{attrs:{type:"primary"},on:{click:t.clickPrint}},[t._v(t._s(t.l10n.T(t.primaryBtnText)))])],1)],1)},staticRenderFns:[]},t.exports.render._withStripped=!0}]);
//# sourceMappingURL=modal-print.js.map